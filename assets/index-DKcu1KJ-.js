(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var im={exports:{}},gc={};var gb;function lw(){if(gb)return gc;gb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:c}}return gc.Fragment=e,gc.jsx=n,gc.jsxs=n,gc}var pb;function cw(){return pb||(pb=1,im.exports=lw()),im.exports}var p=cw(),sm={exports:{}},ot={};var yb;function uw(){if(yb)return ot;yb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),V=Symbol.iterator;function O(j){return j===null||typeof j!="object"?null:(j=V&&j[V]||j["@@iterator"],typeof j=="function"?j:null)}var pe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,he={};function I(j,re,ye){this.props=j,this.context=re,this.refs=he,this.updater=ye||pe}I.prototype.isReactComponent={},I.prototype.setState=function(j,re){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,re,"setState")},I.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Ae(){}Ae.prototype=I.prototype;function xe(j,re,ye){this.props=j,this.context=re,this.refs=he,this.updater=ye||pe}var ct=xe.prototype=new Ae;ct.constructor=xe,de(ct,I.prototype),ct.isPureReactComponent=!0;var zt=Array.isArray;function qe(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(j,re,ye){var Se=ye.ref;return{$$typeof:r,type:j,key:re,ref:Se!==void 0?Se:null,props:ye}}function B(j,re){return N(j.type,re,j.props)}function L(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function U(j){var re={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ye){return re[ye]})}var C=/\/+/g;function $t(j,re){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):re.toString(36)}function wn(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(qe,qe):(j.status="pending",j.then(function(re){j.status==="pending"&&(j.status="fulfilled",j.value=re)},function(re){j.status==="pending"&&(j.status="rejected",j.reason=re)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function te(j,re,ye,Se,je){var it=typeof j;(it==="undefined"||it==="boolean")&&(j=null);var ut=!1;if(j===null)ut=!0;else switch(it){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(j.$$typeof){case r:case e:ut=!0;break;case S:return ut=j._init,te(ut(j._payload),re,ye,Se,je)}}if(ut)return je=je(j),ut=Se===""?"."+$t(j,0):Se,zt(je)?(ye="",ut!=null&&(ye=ut.replace(C,"$&/")+"/"),te(je,re,ye,"",function(hn){return hn})):je!=null&&(L(je)&&(je=B(je,ye+(je.key==null||j&&j.key===je.key?"":(""+je.key).replace(C,"$&/")+"/")+ut)),re.push(je)),1;ut=0;var un=Se===""?".":Se+":";if(zt(j))for(var We=0;We<j.length;We++)Se=j[We],it=un+$t(Se,We),ut+=te(Se,re,ye,it,je);else if(We=O(j),typeof We=="function")for(j=We.call(j),We=0;!(Se=j.next()).done;)Se=Se.value,it=un+$t(Se,We++),ut+=te(Se,re,ye,it,je);else if(it==="object"){if(typeof j.then=="function")return te(wn(j),re,ye,Se,je);throw re=String(j),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ut}function ve(j,re,ye){if(j==null)return j;var Se=[],je=0;return te(j,Se,"","",function(it){return re.call(ye,it,je++)}),Se}function Ve(j){if(j._status===-1){var re=j._result;re=re(),re.then(function(ye){(j._status===0||j._status===-1)&&(j._status=1,j._result=ye)},function(ye){(j._status===0||j._status===-1)&&(j._status=2,j._result=ye)}),j._status===-1&&(j._status=0,j._result=re)}if(j._status===1)return j._result.default;throw j._result}var yt=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ut={map:ve,forEach:function(j,re,ye){ve(j,function(){re.apply(this,arguments)},ye)},count:function(j){var re=0;return ve(j,function(){re++}),re},toArray:function(j){return ve(j,function(re){return re})||[]},only:function(j){if(!L(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ot.Activity=A,ot.Children=Ut,ot.Component=I,ot.Fragment=n,ot.Profiler=o,ot.PureComponent=xe,ot.StrictMode=s,ot.Suspense=b,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ot.__COMPILER_RUNTIME={__proto__:null,c:function(j){return D.H.useMemoCache(j)}},ot.cache=function(j){return function(){return j.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(j,re,ye){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Se=de({},j.props),je=j.key;if(re!=null)for(it in re.key!==void 0&&(je=""+re.key),re)!R.call(re,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&re.ref===void 0||(Se[it]=re[it]);var it=arguments.length-2;if(it===1)Se.children=ye;else if(1<it){for(var ut=Array(it),un=0;un<it;un++)ut[un]=arguments[un+2];Se.children=ut}return N(j.type,je,Se)},ot.createContext=function(j){return j={$$typeof:f,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},ot.createElement=function(j,re,ye){var Se,je={},it=null;if(re!=null)for(Se in re.key!==void 0&&(it=""+re.key),re)R.call(re,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(je[Se]=re[Se]);var ut=arguments.length-2;if(ut===1)je.children=ye;else if(1<ut){for(var un=Array(ut),We=0;We<ut;We++)un[We]=arguments[We+2];je.children=un}if(j&&j.defaultProps)for(Se in ut=j.defaultProps,ut)je[Se]===void 0&&(je[Se]=ut[Se]);return N(j,it,je)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(j){return{$$typeof:m,render:j}},ot.isValidElement=L,ot.lazy=function(j){return{$$typeof:S,_payload:{_status:-1,_result:j},_init:Ve}},ot.memo=function(j,re){return{$$typeof:_,type:j,compare:re===void 0?null:re}},ot.startTransition=function(j){var re=D.T,ye={};D.T=ye;try{var Se=j(),je=D.S;je!==null&&je(ye,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(qe,yt)}catch(it){yt(it)}finally{re!==null&&ye.types!==null&&(re.types=ye.types),D.T=re}},ot.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ot.use=function(j){return D.H.use(j)},ot.useActionState=function(j,re,ye){return D.H.useActionState(j,re,ye)},ot.useCallback=function(j,re){return D.H.useCallback(j,re)},ot.useContext=function(j){return D.H.useContext(j)},ot.useDebugValue=function(){},ot.useDeferredValue=function(j,re){return D.H.useDeferredValue(j,re)},ot.useEffect=function(j,re){return D.H.useEffect(j,re)},ot.useEffectEvent=function(j){return D.H.useEffectEvent(j)},ot.useId=function(){return D.H.useId()},ot.useImperativeHandle=function(j,re,ye){return D.H.useImperativeHandle(j,re,ye)},ot.useInsertionEffect=function(j,re){return D.H.useInsertionEffect(j,re)},ot.useLayoutEffect=function(j,re){return D.H.useLayoutEffect(j,re)},ot.useMemo=function(j,re){return D.H.useMemo(j,re)},ot.useOptimistic=function(j,re){return D.H.useOptimistic(j,re)},ot.useReducer=function(j,re,ye){return D.H.useReducer(j,re,ye)},ot.useRef=function(j){return D.H.useRef(j)},ot.useState=function(j){return D.H.useState(j)},ot.useSyncExternalStore=function(j,re,ye){return D.H.useSyncExternalStore(j,re,ye)},ot.useTransition=function(){return D.H.useTransition()},ot.version="19.2.0",ot}var _b;function Xm(){return _b||(_b=1,sm.exports=uw()),sm.exports}var Z=Xm(),rm={exports:{}},pc={},am={exports:{}},om={};var bb;function hw(){return bb||(bb=1,(function(r){function e(te,ve){var Ve=te.length;te.push(ve);e:for(;0<Ve;){var yt=Ve-1>>>1,Ut=te[yt];if(0<o(Ut,ve))te[yt]=ve,te[Ve]=Ut,Ve=yt;else break e}}function n(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var ve=te[0],Ve=te.pop();if(Ve!==ve){te[0]=Ve;e:for(var yt=0,Ut=te.length,j=Ut>>>1;yt<j;){var re=2*(yt+1)-1,ye=te[re],Se=re+1,je=te[Se];if(0>o(ye,Ve))Se<Ut&&0>o(je,ye)?(te[yt]=je,te[Se]=Ve,yt=Se):(te[yt]=ye,te[re]=Ve,yt=re);else if(Se<Ut&&0>o(je,Ve))te[yt]=je,te[Se]=Ve,yt=Se;else break e}}return ve}function o(te,ve){var Ve=te.sortIndex-ve.sortIndex;return Ve!==0?Ve:te.id-ve.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var b=[],_=[],S=1,A=null,V=3,O=!1,pe=!1,de=!1,he=!1,I=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,xe=typeof setImmediate<"u"?setImmediate:null;function ct(te){for(var ve=n(_);ve!==null;){if(ve.callback===null)s(_);else if(ve.startTime<=te)s(_),ve.sortIndex=ve.expirationTime,e(b,ve);else break;ve=n(_)}}function zt(te){if(de=!1,ct(te),!pe)if(n(b)!==null)pe=!0,qe||(qe=!0,U());else{var ve=n(_);ve!==null&&wn(zt,ve.startTime-te)}}var qe=!1,D=-1,R=5,N=-1;function B(){return he?!0:!(r.unstable_now()-N<R)}function L(){if(he=!1,qe){var te=r.unstable_now();N=te;var ve=!0;try{e:{pe=!1,de&&(de=!1,Ae(D),D=-1),O=!0;var Ve=V;try{t:{for(ct(te),A=n(b);A!==null&&!(A.expirationTime>te&&B());){var yt=A.callback;if(typeof yt=="function"){A.callback=null,V=A.priorityLevel;var Ut=yt(A.expirationTime<=te);if(te=r.unstable_now(),typeof Ut=="function"){A.callback=Ut,ct(te),ve=!0;break t}A===n(b)&&s(b),ct(te)}else s(b);A=n(b)}if(A!==null)ve=!0;else{var j=n(_);j!==null&&wn(zt,j.startTime-te),ve=!1}}break e}finally{A=null,V=Ve,O=!1}ve=void 0}}finally{ve?U():qe=!1}}}var U;if(typeof xe=="function")U=function(){xe(L)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,$t=C.port2;C.port1.onmessage=L,U=function(){$t.postMessage(null)}}else U=function(){I(L,0)};function wn(te,ve){D=I(function(){te(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return V},r.unstable_next=function(te){switch(V){case 1:case 2:case 3:var ve=3;break;default:ve=V}var Ve=V;V=ve;try{return te()}finally{V=Ve}},r.unstable_requestPaint=function(){he=!0},r.unstable_runWithPriority=function(te,ve){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ve=V;V=te;try{return ve()}finally{V=Ve}},r.unstable_scheduleCallback=function(te,ve,Ve){var yt=r.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?yt+Ve:yt):Ve=yt,te){case 1:var Ut=-1;break;case 2:Ut=250;break;case 5:Ut=1073741823;break;case 4:Ut=1e4;break;default:Ut=5e3}return Ut=Ve+Ut,te={id:S++,callback:ve,priorityLevel:te,startTime:Ve,expirationTime:Ut,sortIndex:-1},Ve>yt?(te.sortIndex=Ve,e(_,te),n(b)===null&&te===n(_)&&(de?(Ae(D),D=-1):de=!0,wn(zt,Ve-yt))):(te.sortIndex=Ut,e(b,te),pe||O||(pe=!0,qe||(qe=!0,U()))),te},r.unstable_shouldYield=B,r.unstable_wrapCallback=function(te){var ve=V;return function(){var Ve=V;V=ve;try{return te.apply(this,arguments)}finally{V=Ve}}}})(om)),om}var vb;function dw(){return vb||(vb=1,am.exports=hw()),am.exports}var lm={exports:{}},Ci={};var Tb;function fw(){if(Tb)return Ci;Tb=1;var r=Xm();function e(b){var _="https://react.dev/errors/"+b;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(b,_,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:b,containerInfo:_,implementation:S}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(b,_){if(b==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ci.createPortal=function(b,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(b,_,null,S)},Ci.flushSync=function(b){var _=f.T,S=s.p;try{if(f.T=null,s.p=2,b)return b()}finally{f.T=_,s.p=S,s.d.f()}},Ci.preconnect=function(b,_){typeof b=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(b,_))},Ci.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},Ci.preinit=function(b,_){if(typeof b=="string"&&_&&typeof _.as=="string"){var S=_.as,A=m(S,_.crossOrigin),V=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?s.d.S(b,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:V,fetchPriority:O}):S==="script"&&s.d.X(b,{crossOrigin:A,integrity:V,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ci.preinitModule=function(b,_){if(typeof b=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=m(_.as,_.crossOrigin);s.d.M(b,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(b)},Ci.preload=function(b,_){if(typeof b=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,A=m(S,_.crossOrigin);s.d.L(b,S,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ci.preloadModule=function(b,_){if(typeof b=="string")if(_){var S=m(_.as,_.crossOrigin);s.d.m(b,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(b)},Ci.requestFormReset=function(b){s.d.r(b)},Ci.unstable_batchedUpdates=function(b,_){return b(_)},Ci.useFormState=function(b,_,S){return f.H.useFormState(b,_,S)},Ci.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ci.version="19.2.0",Ci}var Sb;function mw(){if(Sb)return lm.exports;Sb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=fw(),lm.exports}var Eb;function gw(){if(Eb)return pc;Eb=1;var r=dw(),e=Xm(),n=mw();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function b(t){if(c(t)!==t)throw Error(s(188))}function _(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return b(h),t;if(d===l)return b(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var y=!1,T=h.child;T;){if(T===a){y=!0,a=h,l=d;break}if(T===l){y=!0,l=h,a=d;break}T=T.sibling}if(!y){for(T=d.child;T;){if(T===a){y=!0,a=d,l=h;break}if(T===l){y=!0,l=d,a=h;break}T=T.sibling}if(!y)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,V=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),pe=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),Ae=Symbol.for("react.consumer"),xe=Symbol.for("react.context"),ct=Symbol.for("react.forward_ref"),zt=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function $t(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case de:return"Fragment";case I:return"Profiler";case he:return"StrictMode";case zt:return"Suspense";case qe:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case pe:return"Portal";case xe:return t.displayName||"Context";case Ae:return(t._context.displayName||"Context")+".Consumer";case ct:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:$t(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return $t(t(i))}catch{}}return null}var wn=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve={pending:!1,data:null,method:null,action:null},yt=[],Ut=-1;function j(t){return{current:t}}function re(t){0>Ut||(t.current=yt[Ut],yt[Ut]=null,Ut--)}function ye(t,i){Ut++,yt[Ut]=t.current,t.current=i}var Se=j(null),je=j(null),it=j(null),ut=j(null);function un(t,i){switch(ye(it,i),ye(je,t),ye(Se,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?P_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=P_(i),t=z_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}re(Se),ye(Se,t)}function We(){re(Se),re(je),re(it)}function hn(t){t.memoizedState!==null&&ye(ut,t);var i=Se.current,a=z_(i,t.type);i!==a&&(ye(je,t),ye(Se,a))}function ss(t){je.current===t&&(re(Se),re(je)),ut.current===t&&(re(ut),hc._currentValue=Ve)}var Js,Yn;function jn(t){if(Js===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Js=i&&i[1]||"",Yn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Js+t+Yn}var qs=!1;function Ki(t,i){if(!t||qs)return"";qs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(J){var $=J}Reflect.construct(t,[],le)}else{try{le.call()}catch(J){$=J}t.call(le.prototype)}}else{try{throw Error()}catch(J){$=J}(le=t())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(J){if(J&&$&&typeof J.stack=="string")return[J.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],T=d[1];if(y&&T){var x=y.split(`
`),K=T.split(`
`);for(h=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;h<K.length&&!K[h].includes("DetermineComponentFrameRoot");)h++;if(l===x.length||h===K.length)for(l=x.length-1,h=K.length-1;1<=l&&0<=h&&x[l]!==K[h];)h--;for(;1<=l&&0<=h;l--,h--)if(x[l]!==K[h]){if(l!==1||h!==1)do if(l--,h--,0>h||x[l]!==K[h]){var ie=`
`+x[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=h);break}}}finally{qs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?jn(a):""}function Oi(t,i){switch(t.tag){case 26:case 27:case 5:return jn(t.type);case 16:return jn("Lazy");case 13:return t.child!==i&&i!==null?jn("Suspense Fallback"):jn("Suspense");case 19:return jn("SuspenseList");case 0:case 15:return Ki(t.type,!1);case 11:return Ki(t.type.render,!1);case 1:return Ki(t.type,!0);case 31:return jn("Activity");default:return""}}function br(t){try{var i="",a=null;do i+=Oi(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var dn=Object.prototype.hasOwnProperty,Yt=r.unstable_scheduleCallback,As=r.unstable_cancelCallback,rs=r.unstable_shouldYield,$i=r.unstable_requestPaint,vn=r.unstable_now,ci=r.unstable_getCurrentPriorityLevel,Qi=r.unstable_ImmediatePriority,Rs=r.unstable_UserBlockingPriority,as=r.unstable_NormalPriority,os=r.unstable_LowPriority,er=r.unstable_IdlePriority,ls=r.log,vr=r.unstable_setDisableYieldValue,ui=null,An=null;function hi(t){if(typeof ls=="function"&&vr(t),An&&typeof An.setStrictMode=="function")try{An.setStrictMode(ui,t)}catch{}}var on=Math.clz32?Math.clz32:Pn,Is=Math.log,cs=Math.LN2;function Pn(t){return t>>>=0,t===0?32:31-(Is(t)/cs|0)|0}var di=256,us=262144,Zt=4194304;function ni(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Mn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=ni(l):(y&=T,y!==0?h=ni(y):a||(a=T&~t,a!==0&&(h=ni(a))))):(T=l&~d,T!==0?h=ni(T):y!==0?h=ni(y):a||(a=l&~t,a!==0&&(h=ni(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function fn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Tr(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tr(){var t=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),t}function Li(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Cs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Fa(t,i,a,l,h,d){var y=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,x=t.expirationTimes,K=t.hiddenUpdates;for(a=y&~a;0<a;){var ie=31-on(a),le=1<<ie;T[ie]=0,x[ie]=-1;var $=K[ie];if($!==null)for(K[ie]=null,ie=0;ie<$.length;ie++){var J=$[ie];J!==null&&(J.lane&=-536870913)}a&=~le}l!==0&&Mt(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(y&~i))}function Mt(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-on(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function wt(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-on(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Vi(t,i){var a=i&-i;return a=(a&42)!==0?1:fi(a),(a&(t.suspendedLanes|i))!==0?0:a}function fi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function kn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function nr(){var t=ve.p;return t!==0?t:(t=window.event,t===void 0?32:lb(t.type))}function xn(t,i){var a=ve.p;try{return ve.p=t,i()}finally{ve.p=a}}var ji=Math.random().toString(36).slice(2),P="__reactFiber$"+ji,ne="__reactProps$"+ji,_e="__reactContainer$"+ji,we="__reactEvents$"+ji,He="__reactListeners$"+ji,_t="__reactHandles$"+ji,tn="__reactResources$"+ji,mi="__reactMarker$"+ji;function Hs(t){delete t[P],delete t[ne],delete t[we],delete t[He],delete t[_t]}function Pi(t){var i=t[P];if(i)return i;for(var a=t.parentNode;a;){if(i=a[_e]||a[P]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=K_(t);t!==null;){if(a=t[P])return a;t=K_(t)}return i}t=a,a=t.parentNode}return null}function Wi(t){if(t=t[P]||t[_e]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function zi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function ks(t){var i=t[tn];return i||(i=t[tn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rn(t){t[mi]=!0}var Xr=new Set,Ga={};function hs(t,i){Ns(t,i),Ns(t+"Capture",i)}function Ns(t,i){for(Ga[t]=i,t=0;t<i.length;t++)Xr.add(i[t])}var Zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ka={},$a={};function Jr(t){return dn.call($a,t)?!0:dn.call(Ka,t)?!1:Zr.test(t)?$a[t]=!0:(Ka[t]=!0,!1)}function Sr(t,i,a){if(Jr(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Tn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function ln(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ds(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qa(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function qt(t){if(!t._valueTracker){var i=Ds(t)?"checked":"value";t._valueTracker=Qa(t,i,""+t[i])}}function ir(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ds(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Er=/[\n"\\]/g;function gi(t){return t.replace(Er,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wr(t,i,a,l,h,d,y,T){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),i!=null?y==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+mn(i)):t.value!==""+mn(i)&&(t.value=""+mn(i)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),i!=null?Ya(t,y,mn(i)):a!=null?Ya(t,y,mn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+mn(T):t.removeAttribute("name")}function Wa(t,i,a,l,h,d,y,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){qt(t);return}a=a!=null?""+mn(a):"",i=i!=null?""+mn(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),qt(t)}function Ya(t,i,a){i==="number"&&Ms(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function sr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ro(t,i,a){if(i!=null&&(i=""+mn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+mn(a):""}function rr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(wn(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=mn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),qt(t)}function Ri(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var M=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function q(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||M.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function X(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&q(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&q(t,d,i[d])}function me(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function se(t){return E.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Y(){}var Ie=null;function ke(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ce=null,Ee=null;function De(t){var i=Wi(t);if(i&&(t=i.stateNode)){var a=t[ne]||null;e:switch(t=i.stateNode,i.type){case"input":if(wr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gi(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[ne]||null;if(!h)throw Error(s(90));wr(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&ir(l)}break e;case"textarea":Ro(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&sr(t,!!a.multiple,i,!1)}}}var ht=!1;function Pe(t,i,a){if(ht)return t(i,a);ht=!0;try{var l=t(i);return l}finally{if(ht=!1,(Ce!==null||Ee!==null)&&(Ou(),Ce&&(i=Ce,t=Ee,Ee=Ce=null,De(i),t)))for(i=0;i<t.length;i++)De(t[i])}}function ze(t,i){var a=t.stateNode;if(a===null)return null;var l=a[ne]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var At=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xt=!1;if(At)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){xt=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch{xt=!1}var rt=null,fe=null,pn=null;function pt(){if(pn)return pn;var t,i=fe,a=i.length,l,h="value"in rt?rt.value:rt.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var y=a-t;for(l=1;l<=y&&i[a-l]===h[d-l];l++);return pn=h.slice(t,1<l?1-l:void 0)}function bt(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Be(){return!0}function tt(){return!1}function Xe(t){function i(a,l,h,d,y){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Be:tt,this.isPropagationStopped=tt,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Be)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Be)},persist:function(){},isPersistent:Be}),i}var Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vt=Xe(Xt),at=A({},Xt,{view:0,detail:0}),Ht=Xe(at),Qt,Tt,ge,Ge=A({},at,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ui,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ge&&(ge&&t.type==="mousemove"?(Qt=t.screenX-ge.screenX,Tt=t.screenY-ge.screenY):Tt=Qt=0,ge=t),Qt)},movementY:function(t){return"movementY"in t?t.movementY:Tt}}),Fe=Xe(Ge),Me=A({},Ge,{dataTransfer:0}),dt=Xe(Me),gn=A({},at,{relatedTarget:0}),Rt=Xe(gn),ft=A({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0}),Xn=Xe(ft),Zn=A({},Xt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ii=Xe(Zn),si=A({},Xt,{data:0}),Sn=Xe(si),Bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ar(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=xs[t])?!!i[t]:!1}function Ui(){return ar}var Ot=A({},at,{key:function(t){if(t.key){var i=Bi[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=bt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ui,charCode:function(t){return t.type==="keypress"?bt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qi=Xe(Ot),pi=A({},Ge,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=Xe(pi),u=A({},at,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ui}),g=Xe(u),v=A({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Xe(v),F=A({},Ge,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Xe(F),be=A({},Xt,{newState:0,oldState:0}),Le=Xe(be),Ft=[9,13,27,32],vt=At&&"CompositionEvent"in window,Ke=null;At&&"documentMode"in document&&(Ke=document.documentMode);var Bt=At&&"TextEvent"in window&&!Ke,Bn=At&&(!vt||Ke&&8<Ke&&11>=Ke),Ii=" ",Fs=!1;function Xa(t,i){switch(t){case"keyup":return Ft.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Io(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function ME(t,i){switch(t){case"compositionend":return Io(i);case"keypress":return i.which!==32?null:(Fs=!0,Ii);case"textInput":return t=i.data,t===Ii&&Fs?null:t;default:return null}}function xE(t,i){if(Co)return t==="compositionend"||!vt&&Xa(t,i)?(t=pt(),pn=fe=rt=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Bn&&i.locale!=="ko"?null:i.data;default:return null}}var OE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!OE[t.type]:i==="textarea"}function Yg(t,i,a,l){Ce?Ee?Ee.push(l):Ee=[l]:Ce=l,i=Uu(i,"onChange"),0<i.length&&(a=new Vt("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var xl=null,Ol=null;function LE(t){M_(t,0)}function Jc(t){var i=zi(t);if(ir(i))return t}function Xg(t,i){if(t==="change")return i}var Zg=!1;if(At){var cd;if(At){var ud="oninput"in document;if(!ud){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),ud=typeof Jg.oninput=="function"}cd=ud}else cd=!1;Zg=cd&&(!document.documentMode||9<document.documentMode)}function ep(){xl&&(xl.detachEvent("onpropertychange",tp),Ol=xl=null)}function tp(t){if(t.propertyName==="value"&&Jc(Ol)){var i=[];Yg(i,Ol,t,ke(t)),Pe(LE,i)}}function VE(t,i,a){t==="focusin"?(ep(),xl=i,Ol=a,xl.attachEvent("onpropertychange",tp)):t==="focusout"&&ep()}function jE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jc(Ol)}function PE(t,i){if(t==="click")return Jc(i)}function zE(t,i){if(t==="input"||t==="change")return Jc(i)}function BE(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ds=typeof Object.is=="function"?Object.is:BE;function Ll(t,i){if(ds(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!dn.call(i,h)||!ds(t[h],i[h]))return!1}return!0}function np(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ip(t,i){var a=np(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=np(a)}}function sp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?sp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function rp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ms(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ms(t.document)}return i}function hd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var UE=At&&"documentMode"in document&&11>=document.documentMode,ko=null,dd=null,Vl=null,fd=!1;function ap(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fd||ko==null||ko!==Ms(l)||(l=ko,"selectionStart"in l&&hd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Vl&&Ll(Vl,l)||(Vl=l,l=Uu(dd,"onSelect"),0<l.length&&(i=new Vt("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ko)))}function Za(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var No={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},md={},op={};At&&(op=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Ja(t){if(md[t])return md[t];if(!No[t])return t;var i=No[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in op)return md[t]=i[a];return t}var lp=Ja("animationend"),cp=Ja("animationiteration"),up=Ja("animationstart"),qE=Ja("transitionrun"),HE=Ja("transitionstart"),FE=Ja("transitioncancel"),hp=Ja("transitionend"),dp=new Map,gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gd.push("scrollEnd");function Gs(t,i){dp.set(t,i),hs(i,[t])}var eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Os=[],Do=0,pd=0;function tu(){for(var t=Do,i=pd=Do=0;i<t;){var a=Os[i];Os[i++]=null;var l=Os[i];Os[i++]=null;var h=Os[i];Os[i++]=null;var d=Os[i];if(Os[i++]=null,l!==null&&h!==null){var y=l.pending;y===null?h.next=h:(h.next=y.next,y.next=h),l.pending=h}d!==0&&fp(a,h,d)}}function nu(t,i,a,l){Os[Do++]=t,Os[Do++]=i,Os[Do++]=a,Os[Do++]=l,pd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function yd(t,i,a,l){return nu(t,i,a,l),iu(t)}function eo(t,i){return nu(t,null,null,i),iu(t)}function fp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-on(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function iu(t){if(50<sc)throw sc=0,If=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Mo={};function GE(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(t,i,a,l){return new GE(t,i,a,l)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ar(t,i){var a=t.alternate;return a===null?(a=fs(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function mp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function su(t,i,a,l,h,d){var y=0;if(l=t,typeof t=="function")_d(t)&&(y=1);else if(typeof t=="string")y=Y0(t,a,Se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=fs(31,a,i,h),t.elementType=N,t.lanes=d,t;case de:return to(a.children,h,d,i);case he:y=8,h|=24;break;case I:return t=fs(12,a,i,h|2),t.elementType=I,t.lanes=d,t;case zt:return t=fs(13,a,i,h),t.elementType=zt,t.lanes=d,t;case qe:return t=fs(19,a,i,h),t.elementType=qe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xe:y=10;break e;case Ae:y=9;break e;case ct:y=11;break e;case D:y=14;break e;case R:y=16,l=null;break e}y=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=fs(y,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function to(t,i,a,l){return t=fs(7,t,l,i),t.lanes=a,t}function bd(t,i,a){return t=fs(6,t,null,i),t.lanes=a,t}function gp(t){var i=fs(18,null,null,0);return i.stateNode=t,i}function vd(t,i,a){return i=fs(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var pp=new WeakMap;function Ls(t,i){if(typeof t=="object"&&t!==null){var a=pp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:br(i)},pp.set(t,i),i)}return{value:t,source:i,stack:br(i)}}var xo=[],Oo=0,ru=null,jl=0,Vs=[],js=0,ea=null,or=1,lr="";function Rr(t,i){xo[Oo++]=jl,xo[Oo++]=ru,ru=t,jl=i}function yp(t,i,a){Vs[js++]=or,Vs[js++]=lr,Vs[js++]=ea,ea=t;var l=or;t=lr;var h=32-on(l)-1;l&=~(1<<h),a+=1;var d=32-on(i)+h;if(30<d){var y=h-h%5;d=(l&(1<<y)-1).toString(32),l>>=y,h-=y,or=1<<32-on(i)+h|a<<h|l,lr=d+t}else or=1<<d|a<<h|l,lr=t}function Td(t){t.return!==null&&(Rr(t,1),yp(t,1,0))}function Sd(t){for(;t===ru;)ru=xo[--Oo],xo[Oo]=null,jl=xo[--Oo],xo[Oo]=null;for(;t===ea;)ea=Vs[--js],Vs[js]=null,lr=Vs[--js],Vs[js]=null,or=Vs[--js],Vs[js]=null}function _p(t,i){Vs[js++]=or,Vs[js++]=lr,Vs[js++]=ea,or=i.id,lr=i.overflow,ea=t}var yi=null,yn=null,Lt=!1,ta=null,Ps=!1,Ed=Error(s(519));function na(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(Ls(i,t)),Ed}function bp(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[P]=t,i[ne]=l,a){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(a=0;a<ac.length;a++)Et(ac[a],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":Et("invalid",i),Wa(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Et("invalid",i);break;case"textarea":Et("invalid",i),rr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||V_(i.textContent,a)?(l.popover!=null&&(Et("beforetoggle",i),Et("toggle",i)),l.onScroll!=null&&Et("scroll",i),l.onScrollEnd!=null&&Et("scrollend",i),l.onClick!=null&&(i.onclick=Y),i=!0):i=!1,i||na(t,!0)}function vp(t){for(yi=t.return;yi;)switch(yi.tag){case 5:case 31:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:yi=yi.return}}function Lo(t){if(t!==yi)return!1;if(!Lt)return vp(t),Lt=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||qf(t.type,t.memoizedProps)),a=!a),a&&yn&&na(t),vp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));yn=G_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));yn=G_(t)}else i===27?(i=yn,pa(t.type)?(t=$f,$f=null,yn=t):yn=i):yn=yi?Bs(t.stateNode.nextSibling):null;return!0}function no(){yn=yi=null,Lt=!1}function wd(){var t=ta;return t!==null&&(es===null?es=t:es.push.apply(es,t),ta=null),t}function Pl(t){ta===null?ta=[t]:ta.push(t)}var Ad=j(null),io=null,Ir=null;function ia(t,i,a){ye(Ad,i._currentValue),i._currentValue=a}function Cr(t){t._currentValue=Ad.current,re(Ad)}function Rd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Id(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var y=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var x=0;x<i.length;x++)if(T.context===i[x]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Rd(d.return,a,t),l||(y=null);break e}d=T.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(s(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),Rd(y,a,t),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===t){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function Vo(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var T=h.type;ds(h.pendingProps.value,y.value)||(t!==null?t.push(T):t=[T])}}else if(h===ut.current){if(y=h.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(hc):t=[hc])}h=h.return}t!==null&&Id(i,t,a,l),i.flags|=262144}function au(t){for(t=t.firstContext;t!==null;){if(!ds(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function so(t){io=t,Ir=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function _i(t){return Tp(io,t)}function ou(t,i){return io===null&&so(t),Tp(t,i)}function Tp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ir===null){if(t===null)throw Error(s(308));Ir=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ir=Ir.next=i;return a}var KE=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},$E=r.unstable_scheduleCallback,QE=r.unstable_NormalPriority,Un={$$typeof:xe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cd(){return{controller:new KE,data:new Map,refCount:0}}function zl(t){t.refCount--,t.refCount===0&&$E(QE,function(){t.controller.abort()})}var Bl=null,kd=0,jo=0,Po=null;function WE(t,i){if(Bl===null){var a=Bl=[];kd=0,jo=xf(),Po={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kd++,i.then(Sp,Sp),i}function Sp(){if(--kd===0&&Bl!==null){Po!==null&&(Po.status="fulfilled");var t=Bl;Bl=null,jo=0,Po=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function YE(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ep=te.S;te.S=function(t,i){a_=vn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&WE(t,i),Ep!==null&&Ep(t,i)};var ro=j(null);function Nd(){var t=ro.current;return t!==null?t:cn.pooledCache}function lu(t,i){i===null?ye(ro,ro.current):ye(ro,i.pool)}function wp(){var t=Nd();return t===null?null:{parent:Un._currentValue,pool:t}}var zo=Error(s(460)),Dd=Error(s(474)),cu=Error(s(542)),uu={then:function(){}};function Ap(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Rp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Y,Y),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Cp(t),t;default:if(typeof i.status=="string")i.then(Y,Y);else{if(t=cn,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Cp(t),t}throw oo=i,zo}}function ao(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oo=a,zo):a}}var oo=null;function Ip(){if(oo===null)throw Error(s(459));var t=oo;return oo=null,t}function Cp(t){if(t===zo||t===cu)throw Error(s(483))}var Bo=null,Ul=0;function hu(t){var i=Ul;return Ul+=1,Bo===null&&(Bo=[]),Rp(Bo,t,i)}function ql(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function du(t,i){throw i.$$typeof===V?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function kp(t){function i(H,z){if(t){var G=H.deletions;G===null?(H.deletions=[z],H.flags|=16):G.push(z)}}function a(H,z){if(!t)return null;for(;z!==null;)i(H,z),z=z.sibling;return null}function l(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function h(H,z){return H=Ar(H,z),H.index=0,H.sibling=null,H}function d(H,z,G){return H.index=G,t?(G=H.alternate,G!==null?(G=G.index,G<z?(H.flags|=67108866,z):G):(H.flags|=67108866,z)):(H.flags|=1048576,z)}function y(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function T(H,z,G,oe){return z===null||z.tag!==6?(z=bd(G,H.mode,oe),z.return=H,z):(z=h(z,G),z.return=H,z)}function x(H,z,G,oe){var Qe=G.type;return Qe===de?ie(H,z,G.props.children,oe,G.key):z!==null&&(z.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===R&&ao(Qe)===z.type)?(z=h(z,G.props),ql(z,G),z.return=H,z):(z=su(G.type,G.key,G.props,null,H.mode,oe),ql(z,G),z.return=H,z)}function K(H,z,G,oe){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=vd(G,H.mode,oe),z.return=H,z):(z=h(z,G.children||[]),z.return=H,z)}function ie(H,z,G,oe,Qe){return z===null||z.tag!==7?(z=to(G,H.mode,oe,Qe),z.return=H,z):(z=h(z,G),z.return=H,z)}function le(H,z,G){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=bd(""+z,H.mode,G),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return G=su(z.type,z.key,z.props,null,H.mode,G),ql(G,z),G.return=H,G;case pe:return z=vd(z,H.mode,G),z.return=H,z;case R:return z=ao(z),le(H,z,G)}if(wn(z)||U(z))return z=to(z,H.mode,G,null),z.return=H,z;if(typeof z.then=="function")return le(H,hu(z),G);if(z.$$typeof===xe)return le(H,ou(H,z),G);du(H,z)}return null}function $(H,z,G,oe){var Qe=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Qe!==null?null:T(H,z,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case O:return G.key===Qe?x(H,z,G,oe):null;case pe:return G.key===Qe?K(H,z,G,oe):null;case R:return G=ao(G),$(H,z,G,oe)}if(wn(G)||U(G))return Qe!==null?null:ie(H,z,G,oe,null);if(typeof G.then=="function")return $(H,z,hu(G),oe);if(G.$$typeof===xe)return $(H,z,ou(H,G),oe);du(H,G)}return null}function J(H,z,G,oe,Qe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(G)||null,T(z,H,""+oe,Qe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:return H=H.get(oe.key===null?G:oe.key)||null,x(z,H,oe,Qe);case pe:return H=H.get(oe.key===null?G:oe.key)||null,K(z,H,oe,Qe);case R:return oe=ao(oe),J(H,z,G,oe,Qe)}if(wn(oe)||U(oe))return H=H.get(G)||null,ie(z,H,oe,Qe,null);if(typeof oe.then=="function")return J(H,z,G,hu(oe),Qe);if(oe.$$typeof===xe)return J(H,z,G,ou(z,oe),Qe);du(z,oe)}return null}function Ne(H,z,G,oe){for(var Qe=null,Gt=null,Oe=z,gt=z=0,Ct=null;Oe!==null&&gt<G.length;gt++){Oe.index>gt?(Ct=Oe,Oe=null):Ct=Oe.sibling;var Kt=$(H,Oe,G[gt],oe);if(Kt===null){Oe===null&&(Oe=Ct);break}t&&Oe&&Kt.alternate===null&&i(H,Oe),z=d(Kt,z,gt),Gt===null?Qe=Kt:Gt.sibling=Kt,Gt=Kt,Oe=Ct}if(gt===G.length)return a(H,Oe),Lt&&Rr(H,gt),Qe;if(Oe===null){for(;gt<G.length;gt++)Oe=le(H,G[gt],oe),Oe!==null&&(z=d(Oe,z,gt),Gt===null?Qe=Oe:Gt.sibling=Oe,Gt=Oe);return Lt&&Rr(H,gt),Qe}for(Oe=l(Oe);gt<G.length;gt++)Ct=J(Oe,H,gt,G[gt],oe),Ct!==null&&(t&&Ct.alternate!==null&&Oe.delete(Ct.key===null?gt:Ct.key),z=d(Ct,z,gt),Gt===null?Qe=Ct:Gt.sibling=Ct,Gt=Ct);return t&&Oe.forEach(function(Ta){return i(H,Ta)}),Lt&&Rr(H,gt),Qe}function Je(H,z,G,oe){if(G==null)throw Error(s(151));for(var Qe=null,Gt=null,Oe=z,gt=z=0,Ct=null,Kt=G.next();Oe!==null&&!Kt.done;gt++,Kt=G.next()){Oe.index>gt?(Ct=Oe,Oe=null):Ct=Oe.sibling;var Ta=$(H,Oe,Kt.value,oe);if(Ta===null){Oe===null&&(Oe=Ct);break}t&&Oe&&Ta.alternate===null&&i(H,Oe),z=d(Ta,z,gt),Gt===null?Qe=Ta:Gt.sibling=Ta,Gt=Ta,Oe=Ct}if(Kt.done)return a(H,Oe),Lt&&Rr(H,gt),Qe;if(Oe===null){for(;!Kt.done;gt++,Kt=G.next())Kt=le(H,Kt.value,oe),Kt!==null&&(z=d(Kt,z,gt),Gt===null?Qe=Kt:Gt.sibling=Kt,Gt=Kt);return Lt&&Rr(H,gt),Qe}for(Oe=l(Oe);!Kt.done;gt++,Kt=G.next())Kt=J(Oe,H,gt,Kt.value,oe),Kt!==null&&(t&&Kt.alternate!==null&&Oe.delete(Kt.key===null?gt:Kt.key),z=d(Kt,z,gt),Gt===null?Qe=Kt:Gt.sibling=Kt,Gt=Kt);return t&&Oe.forEach(function(ow){return i(H,ow)}),Lt&&Rr(H,gt),Qe}function rn(H,z,G,oe){if(typeof G=="object"&&G!==null&&G.type===de&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case O:e:{for(var Qe=G.key;z!==null;){if(z.key===Qe){if(Qe=G.type,Qe===de){if(z.tag===7){a(H,z.sibling),oe=h(z,G.props.children),oe.return=H,H=oe;break e}}else if(z.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===R&&ao(Qe)===z.type){a(H,z.sibling),oe=h(z,G.props),ql(oe,G),oe.return=H,H=oe;break e}a(H,z);break}else i(H,z);z=z.sibling}G.type===de?(oe=to(G.props.children,H.mode,oe,G.key),oe.return=H,H=oe):(oe=su(G.type,G.key,G.props,null,H.mode,oe),ql(oe,G),oe.return=H,H=oe)}return y(H);case pe:e:{for(Qe=G.key;z!==null;){if(z.key===Qe)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){a(H,z.sibling),oe=h(z,G.children||[]),oe.return=H,H=oe;break e}else{a(H,z);break}else i(H,z);z=z.sibling}oe=vd(G,H.mode,oe),oe.return=H,H=oe}return y(H);case R:return G=ao(G),rn(H,z,G,oe)}if(wn(G))return Ne(H,z,G,oe);if(U(G)){if(Qe=U(G),typeof Qe!="function")throw Error(s(150));return G=Qe.call(G),Je(H,z,G,oe)}if(typeof G.then=="function")return rn(H,z,hu(G),oe);if(G.$$typeof===xe)return rn(H,z,ou(H,G),oe);du(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,z!==null&&z.tag===6?(a(H,z.sibling),oe=h(z,G),oe.return=H,H=oe):(a(H,z),oe=bd(G,H.mode,oe),oe.return=H,H=oe),y(H)):a(H,z)}return function(H,z,G,oe){try{Ul=0;var Qe=rn(H,z,G,oe);return Bo=null,Qe}catch(Oe){if(Oe===zo||Oe===cu)throw Oe;var Gt=fs(29,Oe,null,H.mode);return Gt.lanes=oe,Gt.return=H,Gt}finally{}}}var lo=kp(!0),Np=kp(!1),sa=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ra(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function aa(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Wt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=iu(t),fp(t,null,a),i}return nu(t,l,i,a),iu(t)}function Hl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,wt(t,a)}}function Od(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Ld=!1;function Fl(){if(Ld){var t=Po;if(t!==null)throw t}}function Gl(t,i,a,l){Ld=!1;var h=t.updateQueue;sa=!1;var d=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var x=T,K=x.next;x.next=null,y===null?d=K:y.next=K,y=x;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==y&&(T===null?ie.firstBaseUpdate=K:T.next=K,ie.lastBaseUpdate=x))}if(d!==null){var le=h.baseState;y=0,ie=K=x=null,T=d;do{var $=T.lane&-536870913,J=$!==T.lane;if(J?(It&$)===$:(l&$)===$){$!==0&&$===jo&&(Ld=!0),ie!==null&&(ie=ie.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ne=t,Je=T;$=i;var rn=a;switch(Je.tag){case 1:if(Ne=Je.payload,typeof Ne=="function"){le=Ne.call(rn,le,$);break e}le=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Je.payload,$=typeof Ne=="function"?Ne.call(rn,le,$):Ne,$==null)break e;le=A({},le,$);break e;case 2:sa=!0}}$=T.callback,$!==null&&(t.flags|=64,J&&(t.flags|=8192),J=h.callbacks,J===null?h.callbacks=[$]:J.push($))}else J={lane:$,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(K=ie=J,x=le):ie=ie.next=J,y|=$;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;J=T,T=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);ie===null&&(x=le),h.baseState=x,h.firstBaseUpdate=K,h.lastBaseUpdate=ie,d===null&&(h.shared.lanes=0),ha|=y,t.lanes=y,t.memoizedState=le}}function Dp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Mp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Dp(a[t],i)}var Uo=j(null),fu=j(0);function xp(t,i){t=jr,ye(fu,t),ye(Uo,i),jr=t|i.baseLanes}function Vd(){ye(fu,jr),ye(Uo,Uo.current)}function jd(){jr=fu.current,re(Uo),re(fu)}var ms=j(null),zs=null;function oa(t){var i=t.alternate;ye(On,On.current&1),ye(ms,t),zs===null&&(i===null||Uo.current!==null||i.memoizedState!==null)&&(zs=t)}function Pd(t){ye(On,On.current),ye(ms,t),zs===null&&(zs=t)}function Op(t){t.tag===22?(ye(On,On.current),ye(ms,t),zs===null&&(zs=t)):la()}function la(){ye(On,On.current),ye(ms,ms.current)}function gs(t){re(ms),zs===t&&(zs=null),re(On)}var On=j(0);function mu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gf(a)||Kf(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kr=0,mt=null,nn=null,qn=null,gu=!1,qo=!1,co=!1,pu=0,Kl=0,Ho=null,XE=0;function Nn(){throw Error(s(321))}function zd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!ds(t[a],i[a]))return!1;return!0}function Bd(t,i,a,l,h,d){return kr=d,mt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,te.H=t===null||t.memoizedState===null?yy:tf,co=!1,d=a(l,h),co=!1,qo&&(d=Vp(i,a,l,h)),Lp(t),d}function Lp(t){te.H=Wl;var i=nn!==null&&nn.next!==null;if(kr=0,qn=nn=mt=null,gu=!1,Kl=0,Ho=null,i)throw Error(s(300));t===null||Hn||(t=t.dependencies,t!==null&&au(t)&&(Hn=!0))}function Vp(t,i,a,l){mt=t;var h=0;do{if(qo&&(Ho=null),Kl=0,qo=!1,25<=h)throw Error(s(301));if(h+=1,qn=nn=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}te.H=_y,d=i(a,l)}while(qo);return d}function ZE(){var t=te.H,i=t.useState()[0];return i=typeof i.then=="function"?$l(i):i,t=t.useState()[0],(nn!==null?nn.memoizedState:null)!==t&&(mt.flags|=1024),i}function Ud(){var t=pu!==0;return pu=0,t}function qd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Hd(t){if(gu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}gu=!1}kr=0,qn=nn=mt=null,qo=!1,Kl=pu=0,Ho=null}function Hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?mt.memoizedState=qn=t:qn=qn.next=t,qn}function Ln(){if(nn===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=nn.next;var i=qn===null?mt.memoizedState:qn.next;if(i!==null)qn=i,nn=t;else{if(t===null)throw mt.alternate===null?Error(s(467)):Error(s(310));nn=t,t={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},qn===null?mt.memoizedState=qn=t:qn=qn.next=t}return qn}function yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(t){var i=Kl;return Kl+=1,Ho===null&&(Ho=[]),t=Rp(Ho,t,i),i=mt,(qn===null?i.memoizedState:qn.next)===null&&(i=i.alternate,te.H=i===null||i.memoizedState===null?yy:tf),t}function _u(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $l(t);if(t.$$typeof===xe)return _i(t)}throw Error(s(438,String(t)))}function Fd(t){var i=null,a=mt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=mt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=yu(),mt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=B;return i.index++,a}function Nr(t,i){return typeof i=="function"?i(t):i}function bu(t){var i=Ln();return Gd(i,nn,t)}function Gd(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var y=h.next;h.next=d.next,d.next=y}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=y=null,x=null,K=i,ie=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(It&le)===le:(kr&le)===le){var $=K.revertLane;if($===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===jo&&(ie=!0);else if((kr&$)===$){K=K.next,$===jo&&(ie=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},x===null?(T=x=le,y=d):x=x.next=le,mt.lanes|=$,ha|=$;le=K.action,co&&a(d,le),d=K.hasEagerState?K.eagerState:a(d,le)}else $={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},x===null?(T=x=$,y=d):x=x.next=$,mt.lanes|=le,ha|=le;K=K.next}while(K!==null&&K!==i);if(x===null?y=d:x.next=T,!ds(d,t.memoizedState)&&(Hn=!0,ie&&(a=Po,a!==null)))throw a;t.memoizedState=d,t.baseState=y,t.baseQueue=x,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Kd(t){var i=Ln(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var y=h=h.next;do d=t(d,y.action),y=y.next;while(y!==h);ds(d,i.memoizedState)||(Hn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function jp(t,i,a){var l=mt,h=Ln(),d=Lt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var y=!ds((nn||h).memoizedState,a);if(y&&(h.memoizedState=a,Hn=!0),h=h.queue,Wd(Bp.bind(null,l,h,t),[t]),h.getSnapshot!==i||y||qn!==null&&qn.memoizedState.tag&1){if(l.flags|=2048,Fo(9,{destroy:void 0},zp.bind(null,l,h,a,i),null),cn===null)throw Error(s(349));d||(kr&127)!==0||Pp(l,i,a)}return a}function Pp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=mt.updateQueue,i===null?(i=yu(),mt.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function zp(t,i,a,l){i.value=a,i.getSnapshot=l,Up(i)&&qp(t)}function Bp(t,i,a){return a(function(){Up(i)&&qp(t)})}function Up(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!ds(t,a)}catch{return!0}}function qp(t){var i=eo(t,2);i!==null&&ts(i,t,2)}function $d(t){var i=Hi();if(typeof t=="function"){var a=t;if(t=a(),co){hi(!0);try{a()}finally{hi(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:t},i}function Hp(t,i,a,l){return t.baseState=a,Gd(t,nn,typeof l=="function"?l:Nr)}function JE(t,i,a,l,h){if(Su(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};te.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Fp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Fp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=te.T,y={};te.T=y;try{var T=a(h,l),x=te.S;x!==null&&x(y,T),Gp(t,i,T)}catch(K){Qd(t,i,K)}finally{d!==null&&y.types!==null&&(d.types=y.types),te.T=d}}else try{d=a(h,l),Gp(t,i,d)}catch(K){Qd(t,i,K)}}function Gp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Kp(t,i,l)},function(l){return Qd(t,i,l)}):Kp(t,i,a)}function Kp(t,i,a){i.status="fulfilled",i.value=a,$p(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Fp(t,a)))}function Qd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,$p(i),i=i.next;while(i!==l)}t.action=null}function $p(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Qp(t,i){return i}function Wp(t,i){if(Lt){var a=cn.formState;if(a!==null){e:{var l=mt;if(Lt){if(yn){t:{for(var h=yn,d=Ps;h.nodeType!==8;){if(!d){h=null;break t}if(h=Bs(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){yn=Bs(h.nextSibling),l=h.data==="F!";break e}}na(l)}l=!1}l&&(i=a[0])}}return a=Hi(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qp,lastRenderedState:i},a.queue=l,a=my.bind(null,mt,l),l.dispatch=a,l=$d(!1),d=ef.bind(null,mt,!1,l.queue),l=Hi(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=JE.bind(null,mt,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Yp(t){var i=Ln();return Xp(i,nn,t)}function Xp(t,i,a){if(i=Gd(t,i,Qp)[0],t=bu(Nr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=$l(i)}catch(y){throw y===zo?cu:y}else l=i;i=Ln();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(mt.flags|=2048,Fo(9,{destroy:void 0},e0.bind(null,h,a),null)),[l,d,t]}function e0(t,i){t.action=i}function Zp(t){var i=Ln(),a=nn;if(a!==null)return Xp(i,a,t);Ln(),i=i.memoizedState,a=Ln();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Fo(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=mt.updateQueue,i===null&&(i=yu(),mt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Jp(){return Ln().memoizedState}function vu(t,i,a,l){var h=Hi();mt.flags|=t,h.memoizedState=Fo(1|i,{destroy:void 0},a,l===void 0?null:l)}function Tu(t,i,a,l){var h=Ln();l=l===void 0?null:l;var d=h.memoizedState.inst;nn!==null&&l!==null&&zd(l,nn.memoizedState.deps)?h.memoizedState=Fo(i,d,a,l):(mt.flags|=t,h.memoizedState=Fo(1|i,d,a,l))}function ey(t,i){vu(8390656,8,t,i)}function Wd(t,i){Tu(2048,8,t,i)}function t0(t){mt.flags|=4;var i=mt.updateQueue;if(i===null)i=yu(),mt.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function ty(t){var i=Ln().memoizedState;return t0({ref:i,nextImpl:t}),function(){if((Wt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ny(t,i){return Tu(4,2,t,i)}function iy(t,i){return Tu(4,4,t,i)}function sy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ry(t,i,a){a=a!=null?a.concat([t]):null,Tu(4,4,sy.bind(null,i,t),a)}function Yd(){}function ay(t,i){var a=Ln();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&zd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function oy(t,i){var a=Ln();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&zd(i,l[1]))return l[0];if(l=t(),co){hi(!0);try{t()}finally{hi(!1)}}return a.memoizedState=[l,i],l}function Xd(t,i,a){return a===void 0||(kr&1073741824)!==0&&(It&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=l_(),mt.lanes|=t,ha|=t,a)}function ly(t,i,a,l){return ds(a,i)?a:Uo.current!==null?(t=Xd(t,a,l),ds(t,i)||(Hn=!0),t):(kr&42)===0||(kr&1073741824)!==0&&(It&261930)===0?(Hn=!0,t.memoizedState=a):(t=l_(),mt.lanes|=t,ha|=t,i)}function cy(t,i,a,l,h){var d=ve.p;ve.p=d!==0&&8>d?d:8;var y=te.T,T={};te.T=T,ef(t,!1,i,a);try{var x=h(),K=te.S;if(K!==null&&K(T,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var ie=YE(x,l);Ql(t,i,ie,_s(t))}else Ql(t,i,l,_s(t))}catch(le){Ql(t,i,{then:function(){},status:"rejected",reason:le},_s())}finally{ve.p=d,y!==null&&T.types!==null&&(y.types=T.types),te.T=y}}function n0(){}function Zd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=uy(t).queue;cy(t,h,i,Ve,a===null?n0:function(){return hy(t),a(l)})}function uy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Ve,baseState:Ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:Ve},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function hy(t){var i=uy(t);i.next===null&&(i=t.alternate.memoizedState),Ql(t,i.next.queue,{},_s())}function Jd(){return _i(hc)}function dy(){return Ln().memoizedState}function fy(){return Ln().memoizedState}function i0(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=_s();t=ra(a);var l=aa(i,t,a);l!==null&&(ts(l,i,a),Hl(l,i,a)),i={cache:Cd()},t.payload=i;return}i=i.return}}function s0(t,i,a){var l=_s();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Su(t)?gy(i,a):(a=yd(t,i,a,l),a!==null&&(ts(a,t,l),py(a,i,l)))}function my(t,i,a){var l=_s();Ql(t,i,a,l)}function Ql(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Su(t))gy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var y=i.lastRenderedState,T=d(y,a);if(h.hasEagerState=!0,h.eagerState=T,ds(T,y))return nu(t,i,h,0),cn===null&&tu(),!1}catch{}finally{}if(a=yd(t,i,h,l),a!==null)return ts(a,t,l),py(a,i,l),!0}return!1}function ef(t,i,a,l){if(l={lane:2,revertLane:xf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Su(t)){if(i)throw Error(s(479))}else i=yd(t,a,l,2),i!==null&&ts(i,t,2)}function Su(t){var i=t.alternate;return t===mt||i!==null&&i===mt}function gy(t,i){qo=gu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function py(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,wt(t,a)}}var Wl={readContext:_i,use:_u,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn};Wl.useEffectEvent=Nn;var yy={readContext:_i,use:_u,useCallback:function(t,i){return Hi().memoizedState=[t,i===void 0?null:i],t},useContext:_i,useEffect:ey,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,vu(4194308,4,sy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return vu(4194308,4,t,i)},useInsertionEffect:function(t,i){vu(4,2,t,i)},useMemo:function(t,i){var a=Hi();i=i===void 0?null:i;var l=t();if(co){hi(!0);try{t()}finally{hi(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Hi();if(a!==void 0){var h=a(i);if(co){hi(!0);try{a(i)}finally{hi(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=s0.bind(null,mt,t),[l.memoizedState,t]},useRef:function(t){var i=Hi();return t={current:t},i.memoizedState=t},useState:function(t){t=$d(t);var i=t.queue,a=my.bind(null,mt,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Yd,useDeferredValue:function(t,i){var a=Hi();return Xd(a,t,i)},useTransition:function(){var t=$d(!1);return t=cy.bind(null,mt,t.queue,!0,!1),Hi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=mt,h=Hi();if(Lt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),cn===null)throw Error(s(349));(It&127)!==0||Pp(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,ey(Bp.bind(null,l,d,t),[t]),l.flags|=2048,Fo(9,{destroy:void 0},zp.bind(null,l,d,a,i),null),a},useId:function(){var t=Hi(),i=cn.identifierPrefix;if(Lt){var a=lr,l=or;a=(l&~(1<<32-on(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=pu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=XE++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Jd,useFormState:Wp,useActionState:Wp,useOptimistic:function(t){var i=Hi();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ef.bind(null,mt,!0,a),a.dispatch=i,[t,i]},useMemoCache:Fd,useCacheRefresh:function(){return Hi().memoizedState=i0.bind(null,mt)},useEffectEvent:function(t){var i=Hi(),a={impl:t};return i.memoizedState=a,function(){if((Wt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:_i,use:_u,useCallback:ay,useContext:_i,useEffect:Wd,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:oy,useReducer:bu,useRef:Jp,useState:function(){return bu(Nr)},useDebugValue:Yd,useDeferredValue:function(t,i){var a=Ln();return ly(a,nn.memoizedState,t,i)},useTransition:function(){var t=bu(Nr)[0],i=Ln().memoizedState;return[typeof t=="boolean"?t:$l(t),i]},useSyncExternalStore:jp,useId:dy,useHostTransitionStatus:Jd,useFormState:Yp,useActionState:Yp,useOptimistic:function(t,i){var a=Ln();return Hp(a,nn,t,i)},useMemoCache:Fd,useCacheRefresh:fy};tf.useEffectEvent=ty;var _y={readContext:_i,use:_u,useCallback:ay,useContext:_i,useEffect:Wd,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:oy,useReducer:Kd,useRef:Jp,useState:function(){return Kd(Nr)},useDebugValue:Yd,useDeferredValue:function(t,i){var a=Ln();return nn===null?Xd(a,t,i):ly(a,nn.memoizedState,t,i)},useTransition:function(){var t=Kd(Nr)[0],i=Ln().memoizedState;return[typeof t=="boolean"?t:$l(t),i]},useSyncExternalStore:jp,useId:dy,useHostTransitionStatus:Jd,useFormState:Zp,useActionState:Zp,useOptimistic:function(t,i){var a=Ln();return nn!==null?Hp(a,nn,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Fd,useCacheRefresh:fy};_y.useEffectEvent=ty;function nf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=_s(),h=ra(l);h.payload=i,a!=null&&(h.callback=a),i=aa(t,h,l),i!==null&&(ts(i,t,l),Hl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=_s(),h=ra(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=aa(t,h,l),i!==null&&(ts(i,t,l),Hl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=_s(),l=ra(a);l.tag=2,i!=null&&(l.callback=i),i=aa(t,l,a),i!==null&&(ts(i,t,a),Hl(i,t,a))}};function by(t,i,a,l,h,d,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,y):i.prototype&&i.prototype.isPureReactComponent?!Ll(a,l)||!Ll(h,d):!0}function vy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&sf.enqueueReplaceState(i,i.state,null)}function uo(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Ty(t){eu(t)}function Sy(t){console.error(t)}function Ey(t){eu(t)}function Eu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function wy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function rf(t,i,a){return a=ra(a),a.tag=3,a.payload={element:null},a.callback=function(){Eu(t,i)},a}function Ay(t){return t=ra(t),t.tag=3,t}function Ry(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){wy(i,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){wy(i,a,l),typeof h!="function"&&(da===null?da=new Set([this]):da.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function r0(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Vo(i,a,h,!0),a=ms.current,a!==null){switch(a.tag){case 31:case 13:return zs===null?Lu():a.alternate===null&&Dn===0&&(Dn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===uu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Nf(t,l,h)),!1;case 22:return a.flags|=65536,l===uu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Nf(t,l,h)),!1}throw Error(s(435,a.tag))}return Nf(t,l,h),Lu(),!1}if(Lt)return i=ms.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Ed&&(t=Error(s(422),{cause:l}),Pl(Ls(t,a)))):(l!==Ed&&(i=Error(s(423),{cause:l}),Pl(Ls(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ls(l,a),h=rf(t.stateNode,l,h),Od(t,h),Dn!==4&&(Dn=2)),!1;var d=Error(s(520),{cause:l});if(d=Ls(d,a),ic===null?ic=[d]:ic.push(d),Dn!==4&&(Dn=2),i===null)return!0;l=Ls(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=rf(a.stateNode,l,t),Od(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(da===null||!da.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ay(h),Ry(h,t,a,l),Od(a,h),!1}a=a.return}while(a!==null);return!1}var af=Error(s(461)),Hn=!1;function bi(t,i,a,l){i.child=t===null?Np(i,null,a,l):lo(i,t.child,a,l)}function Iy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var y={};for(var T in l)T!=="ref"&&(y[T]=l[T])}else y=l;return so(i),l=Bd(t,i,a,y,d,h),T=Ud(),t!==null&&!Hn?(qd(t,i,h),Dr(t,i,h)):(Lt&&T&&Td(i),i.flags|=1,bi(t,i,l,h),i.child)}function Cy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!_d(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ky(t,i,d,l,h)):(t=su(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!mf(t,h)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ll,a(y,l)&&t.ref===i.ref)return Dr(t,i,h)}return i.flags|=1,t=Ar(d,l),t.ref=i.ref,t.return=i,i.child=t}function ky(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Ll(d,l)&&t.ref===i.ref)if(Hn=!1,i.pendingProps=l=d,mf(t,h))(t.flags&131072)!==0&&(Hn=!0);else return i.lanes=t.lanes,Dr(t,i,h)}return of(t,i,a,l,h)}function Ny(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return Dy(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&lu(i,d!==null?d.cachePool:null),d!==null?xp(i,d):Vd(),Op(i);else return l=i.lanes=536870912,Dy(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(lu(i,d.cachePool),xp(i,d),la(),i.memoizedState=null):(t!==null&&lu(i,null),Vd(),la());return bi(t,i,h,a),i.child}function Yl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Dy(t,i,a,l,h){var d=Nd();return d=d===null?null:{parent:Un._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&lu(i,null),Vd(),Op(i),t!==null&&Vo(t,i,l,!0),i.childLanes=h,null}function wu(t,i){return i=Ru({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function My(t,i,a){return lo(i,t.child,null,a),t=wu(i,i.pendingProps),t.flags|=2,gs(i),i.memoizedState=null,t}function a0(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Lt){if(l.mode==="hidden")return t=wu(i,l),i.lanes=536870912,Yl(null,t);if(Pd(i),(t=yn)?(t=F_(t,Ps),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ea!==null?{id:or,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},a=gp(t),a.return=i,i.child=a,yi=i,yn=null)):t=null,t===null)throw na(i);return i.lanes=536870912,null}return wu(i,l)}var d=t.memoizedState;if(d!==null){var y=d.dehydrated;if(Pd(i),h)if(i.flags&256)i.flags&=-257,i=My(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Hn||Vo(t,i,a,!1),h=(a&t.childLanes)!==0,Hn||h){if(l=cn,l!==null&&(y=Vi(l,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,eo(t,y),ts(l,t,y),af;Lu(),i=My(t,i,a)}else t=d.treeContext,yn=Bs(y.nextSibling),yi=i,Lt=!0,ta=null,Ps=!1,t!==null&&_p(i,t),i=wu(i,l),i.flags|=4096;return i}return t=Ar(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Au(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function of(t,i,a,l,h){return so(i),a=Bd(t,i,a,l,void 0,h),l=Ud(),t!==null&&!Hn?(qd(t,i,h),Dr(t,i,h)):(Lt&&l&&Td(i),i.flags|=1,bi(t,i,a,h),i.child)}function xy(t,i,a,l,h,d){return so(i),i.updateQueue=null,a=Vp(i,l,a,h),Lp(t),l=Ud(),t!==null&&!Hn?(qd(t,i,d),Dr(t,i,d)):(Lt&&l&&Td(i),i.flags|=1,bi(t,i,a,d),i.child)}function Oy(t,i,a,l,h){if(so(i),i.stateNode===null){var d=Mo,y=a.contextType;typeof y=="object"&&y!==null&&(d=_i(y)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Md(i),y=a.contextType,d.context=typeof y=="object"&&y!==null?_i(y):Mo,d.state=i.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(nf(i,a,y,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&sf.enqueueReplaceState(d,d.state,null),Gl(i,l,d,h),Fl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,x=uo(a,T);d.props=x;var K=d.context,ie=a.contextType;y=Mo,typeof ie=="object"&&ie!==null&&(y=_i(ie));var le=a.getDerivedStateFromProps;ie=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,ie||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||K!==y)&&vy(i,d,l,y),sa=!1;var $=i.memoizedState;d.state=$,Gl(i,l,d,h),Fl(),K=i.memoizedState,T||$!==K||sa?(typeof le=="function"&&(nf(i,a,le,l),K=i.memoizedState),(x=sa||by(i,a,x,l,$,K,y))?(ie||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=y,l=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,xd(t,i),y=i.memoizedProps,ie=uo(a,y),d.props=ie,le=i.pendingProps,$=d.context,K=a.contextType,x=Mo,typeof K=="object"&&K!==null&&(x=_i(K)),T=a.getDerivedStateFromProps,(K=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==le||$!==x)&&vy(i,d,l,x),sa=!1,$=i.memoizedState,d.state=$,Gl(i,l,d,h),Fl();var J=i.memoizedState;y!==le||$!==J||sa||t!==null&&t.dependencies!==null&&au(t.dependencies)?(typeof T=="function"&&(nf(i,a,T,l),J=i.memoizedState),(ie=sa||by(i,a,ie,l,$,J,x)||t!==null&&t.dependencies!==null&&au(t.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,J,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,J,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=J),d.props=l,d.state=J,d.context=x,l=ie):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Au(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=lo(i,t.child,null,h),i.child=lo(i,null,a,h)):bi(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Dr(t,i,h),t}function Ly(t,i,a,l){return no(),i.flags|=256,bi(t,i,a,l),i.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cf(t){return{baseLanes:t,cachePool:wp()}}function uf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ys),t}function Vy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,y;if((y=d)||(y=t!==null&&t.memoizedState===null?!1:(On.current&2)!==0),y&&(h=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,t===null){if(Lt){if(h?oa(i):la(),(t=yn)?(t=F_(t,Ps),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ea!==null?{id:or,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},a=gp(t),a.return=i,i.child=a,yi=i,yn=null)):t=null,t===null)throw na(i);return Kf(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(la(),h=i.mode,T=Ru({mode:"hidden",children:T},h),l=to(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=cf(a),l.childLanes=uf(t,y,a),i.memoizedState=lf,Yl(null,l)):(oa(i),hf(i,T))}var x=t.memoizedState;if(x!==null&&(T=x.dehydrated,T!==null)){if(d)i.flags&256?(oa(i),i.flags&=-257,i=df(t,i,a)):i.memoizedState!==null?(la(),i.child=t.child,i.flags|=128,i=null):(la(),T=l.fallback,h=i.mode,l=Ru({mode:"visible",children:l.children},h),T=to(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,lo(i,t.child,null,a),l=i.child,l.memoizedState=cf(a),l.childLanes=uf(t,y,a),i.memoizedState=lf,i=Yl(null,l));else if(oa(i),Kf(T)){if(y=T.nextSibling&&T.nextSibling.dataset,y)var K=y.dgst;y=K,l=Error(s(419)),l.stack="",l.digest=y,Pl({value:l,source:null,stack:null}),i=df(t,i,a)}else if(Hn||Vo(t,i,a,!1),y=(a&t.childLanes)!==0,Hn||y){if(y=cn,y!==null&&(l=Vi(y,a),l!==0&&l!==x.retryLane))throw x.retryLane=l,eo(t,l),ts(y,t,l),af;Gf(T)||Lu(),i=df(t,i,a)}else Gf(T)?(i.flags|=192,i.child=t.child,i=null):(t=x.treeContext,yn=Bs(T.nextSibling),yi=i,Lt=!0,ta=null,Ps=!1,t!==null&&_p(i,t),i=hf(i,l.children),i.flags|=4096);return i}return h?(la(),T=l.fallback,h=i.mode,x=t.child,K=x.sibling,l=Ar(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,K!==null?T=Ar(K,T):(T=to(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Yl(null,l),l=i.child,T=t.child.memoizedState,T===null?T=cf(a):(h=T.cachePool,h!==null?(x=Un._currentValue,h=h.parent!==x?{parent:x,pool:x}:h):h=wp(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=uf(t,y,a),i.memoizedState=lf,Yl(t.child,l)):(oa(i),a=t.child,t=a.sibling,a=Ar(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(y=i.deletions,y===null?(i.deletions=[t],i.flags|=16):y.push(t)),i.child=a,i.memoizedState=null,a)}function hf(t,i){return i=Ru({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ru(t,i){return t=fs(22,t,null,i),t.lanes=0,t}function df(t,i,a){return lo(i,t.child,null,a),t=hf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function jy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Rd(t.return,i,a)}function ff(t,i,a,l,h,d){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=h,y.treeForkCount=d)}function Py(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var y=On.current,T=(y&2)!==0;if(T?(y=y&1|2,i.flags|=128):y&=1,ye(On,y),bi(t,i,l,a),l=Lt?jl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jy(t,a,i);else if(t.tag===19)jy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&mu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),ff(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&mu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ff(i,!0,a,null,d,l);break;case"together":ff(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Dr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),ha|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Vo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ar(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ar(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function mf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&au(t)))}function o0(t,i,a){switch(i.tag){case 3:un(i,i.stateNode.containerInfo),ia(i,Un,t.memoizedState.cache),no();break;case 27:case 5:hn(i);break;case 4:un(i,i.stateNode.containerInfo);break;case 10:ia(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Pd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(oa(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Vy(t,i,a):(oa(i),t=Dr(t,i,a),t!==null?t.sibling:null);oa(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Vo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Py(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ye(On,On.current),l)break;return null;case 22:return i.lanes=0,Ny(t,i,a,i.pendingProps);case 24:ia(i,Un,t.memoizedState.cache)}return Dr(t,i,a)}function zy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Hn=!0;else{if(!mf(t,a)&&(i.flags&128)===0)return Hn=!1,o0(t,i,a);Hn=(t.flags&131072)!==0}else Hn=!1,Lt&&(i.flags&1048576)!==0&&yp(i,jl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=ao(i.elementType),i.type=t,typeof t=="function")_d(t)?(l=uo(t,l),i.tag=1,i=Oy(null,i,t,l,a)):(i.tag=0,i=of(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ct){i.tag=11,i=Iy(null,i,t,l,a);break e}else if(h===D){i.tag=14,i=Cy(null,i,t,l,a);break e}}throw i=$t(t)||t,Error(s(306,i,""))}}return i;case 0:return of(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=uo(l,i.pendingProps),Oy(t,i,l,h,a);case 3:e:{if(un(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,xd(t,i),Gl(i,l,null,a);var y=i.memoizedState;if(l=y.cache,ia(i,Un,l),l!==d.cache&&Id(i,[Un],a,!0),Fl(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ly(t,i,l,a);break e}else if(l!==h){h=Ls(Error(s(424)),i),Pl(h),i=Ly(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(yn=Bs(t.firstChild),yi=i,Lt=!0,ta=null,Ps=!0,a=Np(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(no(),l===h){i=Dr(t,i,a);break e}bi(t,i,l,a)}i=i.child}return i;case 26:return Au(t,i),t===null?(a=Y_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Lt||(a=i.type,t=i.pendingProps,l=qu(it.current).createElement(a),l[P]=i,l[ne]=t,vi(l,a,t),Rn(l),i.stateNode=l):i.memoizedState=Y_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return hn(i),t===null&&Lt&&(l=i.stateNode=$_(i.type,i.pendingProps,it.current),yi=i,Ps=!0,h=yn,pa(i.type)?($f=h,yn=Bs(l.firstChild)):yn=h),bi(t,i,i.pendingProps.children,a),Au(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Lt&&((h=l=yn)&&(l=j0(l,i.type,i.pendingProps,Ps),l!==null?(i.stateNode=l,yi=i,yn=Bs(l.firstChild),Ps=!1,h=!0):h=!1),h||na(i)),hn(i),h=i.type,d=i.pendingProps,y=t!==null?t.memoizedProps:null,l=d.children,qf(h,d)?l=null:y!==null&&qf(h,y)&&(i.flags|=32),i.memoizedState!==null&&(h=Bd(t,i,ZE,null,null,a),hc._currentValue=h),Au(t,i),bi(t,i,l,a),i.child;case 6:return t===null&&Lt&&((t=a=yn)&&(a=P0(a,i.pendingProps,Ps),a!==null?(i.stateNode=a,yi=i,yn=null,t=!0):t=!1),t||na(i)),null;case 13:return Vy(t,i,a);case 4:return un(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=lo(i,null,l,a):bi(t,i,l,a),i.child;case 11:return Iy(t,i,i.type,i.pendingProps,a);case 7:return bi(t,i,i.pendingProps,a),i.child;case 8:return bi(t,i,i.pendingProps.children,a),i.child;case 12:return bi(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,ia(i,i.type,l.value),bi(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,so(i),h=_i(h),l=l(h),i.flags|=1,bi(t,i,l,a),i.child;case 14:return Cy(t,i,i.type,i.pendingProps,a);case 15:return ky(t,i,i.type,i.pendingProps,a);case 19:return Py(t,i,a);case 31:return a0(t,i,a);case 22:return Ny(t,i,a,i.pendingProps);case 24:return so(i),l=_i(Un),t===null?(h=Nd(),h===null&&(h=cn,d=Cd(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Md(i),ia(i,Un,h)):((t.lanes&a)!==0&&(xd(t,i),Gl(i,null,null,a),Fl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ia(i,Un,l)):(l=d.cache,ia(i,Un,l),l!==h.cache&&Id(i,[Un],a,!0))),bi(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Mr(t){t.flags|=4}function gf(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(d_())t.flags|=8192;else throw oo=uu,Dd}else t.flags&=-16777217}function By(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!tb(i))if(d_())t.flags|=8192;else throw oo=uu,Dd}function Iu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?tr():536870912,t.lanes|=i,Qo|=i)}function Xl(t,i){if(!Lt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function _n(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function l0(t,i,a){var l=i.pendingProps;switch(Sd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(i),null;case 1:return _n(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Cr(Un),We(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Lo(i)?Mr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wd())),_n(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(Mr(i),d!==null?(_n(i),By(i,d)):(_n(i),gf(i,h,null,l,a))):d?d!==t.memoizedState?(Mr(i),_n(i),By(i,d)):(_n(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Mr(i),_n(i),gf(i,h,t,l,a)),null;case 27:if(ss(i),a=it.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Mr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return _n(i),null}t=Se.current,Lo(i)?bp(i):(t=$_(h,l,a),i.stateNode=t,Mr(i))}return _n(i),null;case 5:if(ss(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Mr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return _n(i),null}if(d=Se.current,Lo(i))bp(i);else{var y=qu(it.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(h,{is:l.is}):y.createElement(h)}}d[P]=i,d[ne]=l;e:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=d;e:switch(vi(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Mr(i)}}return _n(i),gf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Mr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=it.current,Lo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=yi,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[P]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||V_(t.nodeValue,a)),t||na(i,!0)}else t=qu(t).createTextNode(l),t[P]=i,i.stateNode=t}return _n(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Lo(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[P]=i}else no(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_n(i),t=!1}else a=wd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(gs(i),i):(gs(i),null);if((i.flags&128)!==0)throw Error(s(558))}return _n(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Lo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[P]=i}else no(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_n(i),h=!1}else h=wd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(gs(i),i):(gs(i),null)}return gs(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Iu(i,i.updateQueue),_n(i),null);case 4:return We(),t===null&&jf(i.stateNode.containerInfo),_n(i),null;case 10:return Cr(i.type),_n(i),null;case 19:if(re(On),l=i.memoizedState,l===null)return _n(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)Xl(l,!1);else{if(Dn!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=mu(t),d!==null){for(i.flags|=128,Xl(l,!1),t=d.updateQueue,i.updateQueue=t,Iu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)mp(a,t),a=a.sibling;return ye(On,On.current&1|2),Lt&&Rr(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&vn()>Mu&&(i.flags|=128,h=!0,Xl(l,!1),i.lanes=4194304)}else{if(!h)if(t=mu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Iu(i,t),Xl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Lt)return _n(i),null}else 2*vn()-l.renderingStartTime>Mu&&a!==536870912&&(i.flags|=128,h=!0,Xl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=vn(),t.sibling=null,a=On.current,ye(On,h?a&1|2:a&1),Lt&&Rr(i,l.treeForkCount),t):(_n(i),null);case 22:case 23:return gs(i),jd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(_n(i),i.subtreeFlags&6&&(i.flags|=8192)):_n(i),a=i.updateQueue,a!==null&&Iu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&re(ro),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Cr(Un),_n(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function c0(t,i){switch(Sd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Cr(Un),We(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ss(i),null;case 31:if(i.memoizedState!==null){if(gs(i),i.alternate===null)throw Error(s(340));no()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(gs(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));no()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return re(On),null;case 4:return We(),null;case 10:return Cr(i.type),null;case 22:case 23:return gs(i),jd(),t!==null&&re(ro),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Cr(Un),null;case 25:return null;default:return null}}function Uy(t,i){switch(Sd(i),i.tag){case 3:Cr(Un),We();break;case 26:case 27:case 5:ss(i);break;case 4:We();break;case 31:i.memoizedState!==null&&gs(i);break;case 13:gs(i);break;case 19:re(On);break;case 10:Cr(i.type);break;case 22:case 23:gs(i),jd(),t!==null&&re(ro);break;case 24:Cr(Un)}}function Zl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,y=a.inst;l=d(),y.destroy=l}a=a.next}while(a!==h)}}catch(T){en(i,i.return,T)}}function ca(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var y=l.inst,T=y.destroy;if(T!==void 0){y.destroy=void 0,h=i;var x=a,K=T;try{K()}catch(ie){en(h,x,ie)}}}l=l.next}while(l!==d)}}catch(ie){en(i,i.return,ie)}}function qy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Mp(i,a)}catch(l){en(t,t.return,l)}}}function Hy(t,i,a){a.props=uo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){en(t,i,l)}}function Jl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){en(t,i,h)}}function cr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){en(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){en(t,i,h)}else a.current=null}function Fy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){en(t,t.return,h)}}function pf(t,i,a){try{var l=t.stateNode;D0(l,t.type,a,i),l[ne]=i}catch(h){en(t,t.return,h)}}function Gy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&pa(t.type)||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&pa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _f(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Y));else if(l!==4&&(l===27&&pa(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(_f(t,i,a),t=t.sibling;t!==null;)_f(t,i,a),t=t.sibling}function Cu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&pa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cu(t,i,a),t=t.sibling;t!==null;)Cu(t,i,a),t=t.sibling}function Ky(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);vi(i,l,a),i[P]=t,i[ne]=a}catch(d){en(t,t.return,d)}}var xr=!1,Fn=!1,bf=!1,$y=typeof WeakSet=="function"?WeakSet:Set,ri=null;function u0(t,i){if(t=t.containerInfo,Bf=Wu,t=rp(t),hd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var y=0,T=-1,x=-1,K=0,ie=0,le=t,$=null;t:for(;;){for(var J;le!==a||h!==0&&le.nodeType!==3||(T=y+h),le!==d||l!==0&&le.nodeType!==3||(x=y+l),le.nodeType===3&&(y+=le.nodeValue.length),(J=le.firstChild)!==null;)$=le,le=J;for(;;){if(le===t)break t;if($===a&&++K===h&&(T=y),$===d&&++ie===l&&(x=y),(J=le.nextSibling)!==null)break;le=$,$=le.parentNode}le=J}a=T===-1||x===-1?null:{start:T,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Uf={focusedElem:t,selectionRange:a},Wu=!1,ri=i;ri!==null;)if(i=ri,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,ri=t;else for(;ri!==null;){switch(i=ri,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ne=uo(a.type,h);t=l.getSnapshotBeforeUpdate(Ne,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Je){en(a,a.return,Je)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,ri=t;break}ri=i.return}}function Qy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Lr(t,a),l&4&&Zl(5,a);break;case 1:if(Lr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(y){en(a,a.return,y)}else{var h=uo(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(y){en(a,a.return,y)}}l&64&&qy(a),l&512&&Jl(a,a.return);break;case 3:if(Lr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Mp(t,i)}catch(y){en(a,a.return,y)}}break;case 27:i===null&&l&4&&Ky(a);case 26:case 5:Lr(t,a),i===null&&l&4&&Fy(a),l&512&&Jl(a,a.return);break;case 12:Lr(t,a);break;case 31:Lr(t,a),l&4&&Xy(t,a);break;case 13:Lr(t,a),l&4&&Zy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=b0.bind(null,a),z0(t,a))));break;case 22:if(l=a.memoizedState!==null||xr,!l){i=i!==null&&i.memoizedState!==null||Fn,h=xr;var d=Fn;xr=l,(Fn=i)&&!d?Vr(t,a,(a.subtreeFlags&8772)!==0):Lr(t,a),xr=h,Fn=d}break;case 30:break;default:Lr(t,a)}}function Wy(t){var i=t.alternate;i!==null&&(t.alternate=null,Wy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Hs(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var En=null,Xi=!1;function Or(t,i,a){for(a=a.child;a!==null;)Yy(t,i,a),a=a.sibling}function Yy(t,i,a){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(ui,a)}catch{}switch(a.tag){case 26:Fn||cr(a,i),Or(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Fn||cr(a,i);var l=En,h=Xi;pa(a.type)&&(En=a.stateNode,Xi=!1),Or(t,i,a),lc(a.stateNode),En=l,Xi=h;break;case 5:Fn||cr(a,i);case 6:if(l=En,h=Xi,En=null,Or(t,i,a),En=l,Xi=h,En!==null)if(Xi)try{(En.nodeType===9?En.body:En.nodeName==="HTML"?En.ownerDocument.body:En).removeChild(a.stateNode)}catch(d){en(a,i,d)}else try{En.removeChild(a.stateNode)}catch(d){en(a,i,d)}break;case 18:En!==null&&(Xi?(t=En,q_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),nl(t)):q_(En,a.stateNode));break;case 4:l=En,h=Xi,En=a.stateNode.containerInfo,Xi=!0,Or(t,i,a),En=l,Xi=h;break;case 0:case 11:case 14:case 15:ca(2,a,i),Fn||ca(4,a,i),Or(t,i,a);break;case 1:Fn||(cr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Hy(a,i,l)),Or(t,i,a);break;case 21:Or(t,i,a);break;case 22:Fn=(l=Fn)||a.memoizedState!==null,Or(t,i,a),Fn=l;break;default:Or(t,i,a)}}function Xy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{nl(t)}catch(a){en(i,i.return,a)}}}function Zy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{nl(t)}catch(a){en(i,i.return,a)}}function h0(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new $y),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new $y),i;default:throw Error(s(435,t.tag))}}function ku(t,i){var a=h0(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=v0.bind(null,t,l);l.then(h,h)}})}function Zi(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,y=i,T=y;e:for(;T!==null;){switch(T.tag){case 27:if(pa(T.type)){En=T.stateNode,Xi=!1;break e}break;case 5:En=T.stateNode,Xi=!1;break e;case 3:case 4:En=T.stateNode.containerInfo,Xi=!0;break e}T=T.return}if(En===null)throw Error(s(160));Yy(d,y,h),En=null,Xi=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Jy(i,t),i=i.sibling}var Ks=null;function Jy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Zi(i,t),Ji(t),l&4&&(ca(3,t,t.return),Zl(3,t),ca(5,t,t.return));break;case 1:Zi(i,t),Ji(t),l&512&&(Fn||a===null||cr(a,a.return)),l&64&&xr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ks;if(Zi(i,t),Ji(t),l&512&&(Fn||a===null||cr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[mi]||d[P]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),vi(d,l,a),d[P]=t,Rn(d),l=d;break e;case"link":var y=J_("link","href",h).get(l+(a.href||""));if(y){for(var T=0;T<y.length;T++)if(d=y[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(T,1);break t}}d=h.createElement(l),vi(d,l,a),h.head.appendChild(d);break;case"meta":if(y=J_("meta","content",h).get(l+(a.content||""))){for(T=0;T<y.length;T++)if(d=y[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(T,1);break t}}d=h.createElement(l),vi(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[P]=t,Rn(d),l=d}t.stateNode=l}else eb(h,t.type,t.stateNode);else t.stateNode=Z_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?eb(h,t.type,t.stateNode):Z_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Zi(i,t),Ji(t),l&512&&(Fn||a===null||cr(a,a.return)),a!==null&&l&4&&pf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Zi(i,t),Ji(t),l&512&&(Fn||a===null||cr(a,a.return)),t.flags&32){h=t.stateNode;try{Ri(h,"")}catch(Ne){en(t,t.return,Ne)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,pf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(bf=!0);break;case 6:if(Zi(i,t),Ji(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ne){en(t,t.return,Ne)}}break;case 3:if(Gu=null,h=Ks,Ks=Hu(i.containerInfo),Zi(i,t),Ks=h,Ji(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{nl(i.containerInfo)}catch(Ne){en(t,t.return,Ne)}bf&&(bf=!1,e_(t));break;case 4:l=Ks,Ks=Hu(t.stateNode.containerInfo),Zi(i,t),Ji(t),Ks=l;break;case 12:Zi(i,t),Ji(t);break;case 31:Zi(i,t),Ji(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 13:Zi(i,t),Ji(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Du=vn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 22:h=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,K=xr,ie=Fn;if(xr=K||h,Fn=ie||x,Zi(i,t),Fn=ie,xr=K,Ji(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||x||xr||Fn||ho(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,h)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{T=x.stateNode;var le=x.memoizedProps.style,$=le!=null&&le.hasOwnProperty("display")?le.display:null;T.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Ne){en(x,x.return,Ne)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(Ne){en(x,x.return,Ne)}}}else if(i.tag===18){if(a===null){x=i;try{var J=x.stateNode;h?H_(J,!0):H_(x.stateNode,!1)}catch(Ne){en(x,x.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ku(t,a))));break;case 19:Zi(i,t),Ji(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 30:break;case 21:break;default:Zi(i,t),Ji(t)}}function Ji(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Gy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=yf(t);Cu(t,d,h);break;case 5:var y=a.stateNode;a.flags&32&&(Ri(y,""),a.flags&=-33);var T=yf(t);Cu(t,T,y);break;case 3:case 4:var x=a.stateNode.containerInfo,K=yf(t);_f(t,K,x);break;default:throw Error(s(161))}}catch(ie){en(t,t.return,ie)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function e_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;e_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Lr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Qy(t,i.alternate,i),i=i.sibling}function ho(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ca(4,i,i.return),ho(i);break;case 1:cr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Hy(i,i.return,a),ho(i);break;case 27:lc(i.stateNode);case 26:case 5:cr(i,i.return),ho(i);break;case 22:i.memoizedState===null&&ho(i);break;case 30:ho(i);break;default:ho(i)}t=t.sibling}}function Vr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,y=d.flags;switch(d.tag){case 0:case 11:case 15:Vr(h,d,a),Zl(4,d);break;case 1:if(Vr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(K){en(l,l.return,K)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)Dp(x[h],T)}catch(K){en(l,l.return,K)}}a&&y&64&&qy(d),Jl(d,d.return);break;case 27:Ky(d);case 26:case 5:Vr(h,d,a),a&&l===null&&y&4&&Fy(d),Jl(d,d.return);break;case 12:Vr(h,d,a);break;case 31:Vr(h,d,a),a&&y&4&&Xy(h,d);break;case 13:Vr(h,d,a),a&&y&4&&Zy(h,d);break;case 22:d.memoizedState===null&&Vr(h,d,a),Jl(d,d.return);break;case 30:break;default:Vr(h,d,a)}i=i.sibling}}function vf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&zl(a))}function Tf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&zl(t))}function $s(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)t_(t,i,a,l),i=i.sibling}function t_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:$s(t,i,a,l),h&2048&&Zl(9,i);break;case 1:$s(t,i,a,l);break;case 3:$s(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&zl(t)));break;case 12:if(h&2048){$s(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,y=d.id,T=d.onPostCommit;typeof T=="function"&&T(y,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){en(i,i.return,x)}}else $s(t,i,a,l);break;case 31:$s(t,i,a,l);break;case 13:$s(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,y=i.alternate,i.memoizedState!==null?d._visibility&2?$s(t,i,a,l):ec(t,i):d._visibility&2?$s(t,i,a,l):(d._visibility|=2,Go(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&vf(y,i);break;case 24:$s(t,i,a,l),h&2048&&Tf(i.alternate,i);break;default:$s(t,i,a,l)}}function Go(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,y=i,T=a,x=l,K=y.flags;switch(y.tag){case 0:case 11:case 15:Go(d,y,T,x,h),Zl(8,y);break;case 23:break;case 22:var ie=y.stateNode;y.memoizedState!==null?ie._visibility&2?Go(d,y,T,x,h):ec(d,y):(ie._visibility|=2,Go(d,y,T,x,h)),h&&K&2048&&vf(y.alternate,y);break;case 24:Go(d,y,T,x,h),h&&K&2048&&Tf(y.alternate,y);break;default:Go(d,y,T,x,h)}i=i.sibling}}function ec(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:ec(a,l),h&2048&&vf(l.alternate,l);break;case 24:ec(a,l),h&2048&&Tf(l.alternate,l);break;default:ec(a,l)}i=i.sibling}}var tc=8192;function Ko(t,i,a){if(t.subtreeFlags&tc)for(t=t.child;t!==null;)n_(t,i,a),t=t.sibling}function n_(t,i,a){switch(t.tag){case 26:Ko(t,i,a),t.flags&tc&&t.memoizedState!==null&&X0(a,Ks,t.memoizedState,t.memoizedProps);break;case 5:Ko(t,i,a);break;case 3:case 4:var l=Ks;Ks=Hu(t.stateNode.containerInfo),Ko(t,i,a),Ks=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=tc,tc=16777216,Ko(t,i,a),tc=l):Ko(t,i,a));break;default:Ko(t,i,a)}}function i_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function nc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];ri=l,r_(l,t)}i_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)s_(t),t=t.sibling}function s_(t){switch(t.tag){case 0:case 11:case 15:nc(t),t.flags&2048&&ca(9,t,t.return);break;case 3:nc(t);break;case 12:nc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Nu(t)):nc(t);break;default:nc(t)}}function Nu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];ri=l,r_(l,t)}i_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ca(8,i,i.return),Nu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Nu(i));break;default:Nu(i)}t=t.sibling}}function r_(t,i){for(;ri!==null;){var a=ri;switch(a.tag){case 0:case 11:case 15:ca(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:zl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ri=l;else e:for(a=t;ri!==null;){l=ri;var h=l.sibling,d=l.return;if(Wy(l),l===a){ri=null;break e}if(h!==null){h.return=d,ri=h;break e}ri=d}}}var d0={getCacheForType:function(t){var i=_i(Un),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return _i(Un).controller.signal}},f0=typeof WeakMap=="function"?WeakMap:Map,Wt=0,cn=null,St=null,It=0,Jt=0,ps=null,ua=!1,$o=!1,Sf=!1,jr=0,Dn=0,ha=0,fo=0,Ef=0,ys=0,Qo=0,ic=null,es=null,wf=!1,Du=0,a_=0,Mu=1/0,xu=null,da=null,Jn=0,fa=null,Wo=null,Pr=0,Af=0,Rf=null,o_=null,sc=0,If=null;function _s(){return(Wt&2)!==0&&It!==0?It&-It:te.T!==null?xf():nr()}function l_(){if(ys===0)if((It&536870912)===0||Lt){var t=us;us<<=1,(us&3932160)===0&&(us=262144),ys=t}else ys=536870912;return t=ms.current,t!==null&&(t.flags|=32),ys}function ts(t,i,a){(t===cn&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)&&(Yo(t,0),ma(t,It,ys,!1)),Cs(t,a),((Wt&2)===0||t!==cn)&&(t===cn&&((Wt&2)===0&&(fo|=a),Dn===4&&ma(t,It,ys,!1)),ur(t))}function c_(t,i,a){if((Wt&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||fn(t,i),h=l?p0(t,i):kf(t,i,!0),d=l;do{if(h===0){$o&&!l&&ma(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!m0(a)){h=kf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;e:{var T=t;h=ic;var x=T.current.memoizedState.isDehydrated;if(x&&(Yo(T,y).flags|=256),y=kf(T,y,!1),y!==2){if(Sf&&!x){T.errorRecoveryDisabledLanes|=d,fo|=d,h=4;break e}d=es,es=h,d!==null&&(es===null?es=d:es.push.apply(es,d))}h=y}if(d=!1,h!==2)continue}}if(h===1){Yo(t,0),ma(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ma(l,i,ys,!ua);break e;case 2:es=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Du+300-vn(),10<h)){if(ma(l,i,ys,!ua),Mn(l,0,!0)!==0)break e;Pr=i,l.timeoutHandle=B_(u_.bind(null,l,a,es,xu,wf,i,ys,fo,Qo,ua,d,"Throttled",-0,0),h);break e}u_(l,a,es,xu,wf,i,ys,fo,Qo,ua,d,null,-0,0)}}break}while(!0);ur(t)}function u_(t,i,a,l,h,d,y,T,x,K,ie,le,$,J){if(t.timeoutHandle=-1,le=i.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Y},n_(i,d,le);var Ne=(d&62914560)===d?Du-vn():(d&4194048)===d?a_-vn():0;if(Ne=Z0(le,Ne),Ne!==null){Pr=d,t.cancelPendingCommit=Ne(__.bind(null,t,i,d,a,l,h,y,T,x,ie,le,null,$,J)),ma(t,d,y,!K);return}}__(t,i,d,a,l,h,y,T,x)}function m0(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!ds(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ma(t,i,a,l){i&=~Ef,i&=~fo,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-on(h),y=1<<d;l[d]=-1,h&=~y}a!==0&&Mt(t,a,i)}function Ou(){return(Wt&6)===0?(rc(0),!1):!0}function Cf(){if(St!==null){if(Jt===0)var t=St.return;else t=St,Ir=io=null,Hd(t),Bo=null,Ul=0,t=St;for(;t!==null;)Uy(t.alternate,t),t=t.return;St=null}}function Yo(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,O0(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Pr=0,Cf(),cn=t,St=a=Ar(t.current,null),It=i,Jt=0,ps=null,ua=!1,$o=fn(t,i),Sf=!1,Qo=ys=Ef=fo=ha=Dn=0,es=ic=null,wf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-on(l),d=1<<h;i|=t[h],l&=~d}return jr=i,tu(),a}function h_(t,i){mt=null,te.H=Wl,i===zo||i===cu?(i=Ip(),Jt=3):i===Dd?(i=Ip(),Jt=4):Jt=i===af?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ps=i,St===null&&(Dn=1,Eu(t,Ls(i,t.current)))}function d_(){var t=ms.current;return t===null?!0:(It&4194048)===It?zs===null:(It&62914560)===It||(It&536870912)!==0?t===zs:!1}function f_(){var t=te.H;return te.H=Wl,t===null?Wl:t}function m_(){var t=te.A;return te.A=d0,t}function Lu(){Dn=4,ua||(It&4194048)!==It&&ms.current!==null||($o=!0),(ha&134217727)===0&&(fo&134217727)===0||cn===null||ma(cn,It,ys,!1)}function kf(t,i,a){var l=Wt;Wt|=2;var h=f_(),d=m_();(cn!==t||It!==i)&&(xu=null,Yo(t,i)),i=!1;var y=Dn;e:do try{if(Jt!==0&&St!==null){var T=St,x=ps;switch(Jt){case 8:Cf(),y=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(i=!0);var K=Jt;if(Jt=0,ps=null,Xo(t,T,x,K),a&&$o){y=0;break e}break;default:K=Jt,Jt=0,ps=null,Xo(t,T,x,K)}}g0(),y=Dn;break}catch(ie){h_(t,ie)}while(!0);return i&&t.shellSuspendCounter++,Ir=io=null,Wt=l,te.H=h,te.A=d,St===null&&(cn=null,It=0,tu()),y}function g0(){for(;St!==null;)g_(St)}function p0(t,i){var a=Wt;Wt|=2;var l=f_(),h=m_();cn!==t||It!==i?(xu=null,Mu=vn()+500,Yo(t,i)):$o=fn(t,i);e:do try{if(Jt!==0&&St!==null){i=St;var d=ps;t:switch(Jt){case 1:Jt=0,ps=null,Xo(t,i,d,1);break;case 2:case 9:if(Ap(d)){Jt=0,ps=null,p_(i);break}i=function(){Jt!==2&&Jt!==9||cn!==t||(Jt=7),ur(t)},d.then(i,i);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:Ap(d)?(Jt=0,ps=null,p_(i)):(Jt=0,ps=null,Xo(t,i,d,7));break;case 5:var y=null;switch(St.tag){case 26:y=St.memoizedState;case 5:case 27:var T=St;if(y?tb(y):T.stateNode.complete){Jt=0,ps=null;var x=T.sibling;if(x!==null)St=x;else{var K=T.return;K!==null?(St=K,Vu(K)):St=null}break t}}Jt=0,ps=null,Xo(t,i,d,5);break;case 6:Jt=0,ps=null,Xo(t,i,d,6);break;case 8:Cf(),Dn=6;break e;default:throw Error(s(462))}}y0();break}catch(ie){h_(t,ie)}while(!0);return Ir=io=null,te.H=l,te.A=h,Wt=a,St!==null?0:(cn=null,It=0,tu(),Dn)}function y0(){for(;St!==null&&!rs();)g_(St)}function g_(t){var i=zy(t.alternate,t,jr);t.memoizedProps=t.pendingProps,i===null?Vu(t):St=i}function p_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=xy(a,i,i.pendingProps,i.type,void 0,It);break;case 11:i=xy(a,i,i.pendingProps,i.type.render,i.ref,It);break;case 5:Hd(i);default:Uy(a,i),i=St=mp(i,jr),i=zy(a,i,jr)}t.memoizedProps=t.pendingProps,i===null?Vu(t):St=i}function Xo(t,i,a,l){Ir=io=null,Hd(i),Bo=null,Ul=0;var h=i.return;try{if(r0(t,h,i,a,It)){Dn=1,Eu(t,Ls(a,t.current)),St=null;return}}catch(d){if(h!==null)throw St=h,d;Dn=1,Eu(t,Ls(a,t.current)),St=null;return}i.flags&32768?(Lt||l===1?t=!0:$o||(It&536870912)!==0?t=!1:(ua=t=!0,(l===2||l===9||l===3||l===6)&&(l=ms.current,l!==null&&l.tag===13&&(l.flags|=16384))),y_(i,t)):Vu(i)}function Vu(t){var i=t;do{if((i.flags&32768)!==0){y_(i,ua);return}t=i.return;var a=l0(i.alternate,i,jr);if(a!==null){St=a;return}if(i=i.sibling,i!==null){St=i;return}St=i=t}while(i!==null);Dn===0&&(Dn=5)}function y_(t,i){do{var a=c0(t.alternate,t);if(a!==null){a.flags&=32767,St=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){St=t;return}St=t=a}while(t!==null);Dn=6,St=null}function __(t,i,a,l,h,d,y,T,x){t.cancelPendingCommit=null;do ju();while(Jn!==0);if((Wt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=pd,Fa(t,a,d,y,T,x),t===cn&&(St=cn=null,It=0),Wo=i,fa=t,Pr=a,Af=d,Rf=h,o_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,T0(as,function(){return E_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=te.T,te.T=null,h=ve.p,ve.p=2,y=Wt,Wt|=4;try{u0(t,i,a)}finally{Wt=y,ve.p=h,te.T=l}}Jn=1,b_(),v_(),T_()}}function b_(){if(Jn===1){Jn=0;var t=fa,i=Wo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var l=ve.p;ve.p=2;var h=Wt;Wt|=4;try{Jy(i,t);var d=Uf,y=rp(t.containerInfo),T=d.focusedElem,x=d.selectionRange;if(y!==T&&T&&T.ownerDocument&&sp(T.ownerDocument.documentElement,T)){if(x!==null&&hd(T)){var K=x.start,ie=x.end;if(ie===void 0&&(ie=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(ie,T.value.length);else{var le=T.ownerDocument||document,$=le&&le.defaultView||window;if($.getSelection){var J=$.getSelection(),Ne=T.textContent.length,Je=Math.min(x.start,Ne),rn=x.end===void 0?Je:Math.min(x.end,Ne);!J.extend&&Je>rn&&(y=rn,rn=Je,Je=y);var H=ip(T,Je),z=ip(T,rn);if(H&&z&&(J.rangeCount!==1||J.anchorNode!==H.node||J.anchorOffset!==H.offset||J.focusNode!==z.node||J.focusOffset!==z.offset)){var G=le.createRange();G.setStart(H.node,H.offset),J.removeAllRanges(),Je>rn?(J.addRange(G),J.extend(z.node,z.offset)):(G.setEnd(z.node,z.offset),J.addRange(G))}}}}for(le=[],J=T;J=J.parentNode;)J.nodeType===1&&le.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<le.length;T++){var oe=le[T];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Wu=!!Bf,Uf=Bf=null}finally{Wt=h,ve.p=l,te.T=a}}t.current=i,Jn=2}}function v_(){if(Jn===2){Jn=0;var t=fa,i=Wo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var l=ve.p;ve.p=2;var h=Wt;Wt|=4;try{Qy(t,i.alternate,i)}finally{Wt=h,ve.p=l,te.T=a}}Jn=3}}function T_(){if(Jn===4||Jn===3){Jn=0,$i();var t=fa,i=Wo,a=Pr,l=o_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Jn=5:(Jn=0,Wo=fa=null,S_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(da=null),kn(a),i=i.stateNode,An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(ui,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=te.T,h=ve.p,ve.p=2,te.T=null;try{for(var d=t.onRecoverableError,y=0;y<l.length;y++){var T=l[y];d(T.value,{componentStack:T.stack})}}finally{te.T=i,ve.p=h}}(Pr&3)!==0&&ju(),ur(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===If?sc++:(sc=0,If=t):sc=0,rc(0)}}function S_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,zl(i)))}function ju(){return b_(),v_(),T_(),E_()}function E_(){if(Jn!==5)return!1;var t=fa,i=Af;Af=0;var a=kn(Pr),l=te.T,h=ve.p;try{ve.p=32>a?32:a,te.T=null,a=Rf,Rf=null;var d=fa,y=Pr;if(Jn=0,Wo=fa=null,Pr=0,(Wt&6)!==0)throw Error(s(331));var T=Wt;if(Wt|=4,s_(d.current),t_(d,d.current,y,a),Wt=T,rc(0,!1),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(ui,d)}catch{}return!0}finally{ve.p=h,te.T=l,S_(t,i)}}function w_(t,i,a){i=Ls(a,i),i=rf(t.stateNode,i,2),t=aa(t,i,2),t!==null&&(Cs(t,2),ur(t))}function en(t,i,a){if(t.tag===3)w_(t,t,a);else for(;i!==null;){if(i.tag===3){w_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(da===null||!da.has(l))){t=Ls(a,t),a=Ay(2),l=aa(i,a,2),l!==null&&(Ry(a,l,i,t),Cs(l,2),ur(l));break}}i=i.return}}function Nf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new f0;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Sf=!0,h.add(a),t=_0.bind(null,t,i,a),i.then(t,t))}function _0(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,cn===t&&(It&a)===a&&(Dn===4||Dn===3&&(It&62914560)===It&&300>vn()-Du?(Wt&2)===0&&Yo(t,0):Ef|=a,Qo===It&&(Qo=0)),ur(t)}function A_(t,i){i===0&&(i=tr()),t=eo(t,i),t!==null&&(Cs(t,i),ur(t))}function b0(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),A_(t,a)}function v0(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),A_(t,a)}function T0(t,i){return Yt(t,i)}var Pu=null,Zo=null,Df=!1,zu=!1,Mf=!1,ga=0;function ur(t){t!==Zo&&t.next===null&&(Zo===null?Pu=Zo=t:Zo=Zo.next=t),zu=!0,Df||(Df=!0,E0())}function rc(t,i){if(!Mf&&zu){Mf=!0;do for(var a=!1,l=Pu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var y=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-on(42|t)+1)-1,d&=h&~(y&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,k_(l,d))}else d=It,d=Mn(l,l===cn?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||fn(l,d)||(a=!0,k_(l,d));l=l.next}while(a);Mf=!1}}function S0(){R_()}function R_(){zu=Df=!1;var t=0;ga!==0&&x0()&&(t=ga);for(var i=vn(),a=null,l=Pu;l!==null;){var h=l.next,d=I_(l,i);d===0?(l.next=null,a===null?Pu=h:a.next=h,h===null&&(Zo=a)):(a=l,(t!==0||(d&3)!==0)&&(zu=!0)),l=h}Jn!==0&&Jn!==5||rc(t),ga!==0&&(ga=0)}function I_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var y=31-on(d),T=1<<y,x=h[y];x===-1?((T&a)===0||(T&l)!==0)&&(h[y]=Tr(T,i)):x<=i&&(t.expiredLanes|=T),d&=~T}if(i=cn,a=It,a=Mn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&As(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||fn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&As(l),kn(a)){case 2:case 8:a=Rs;break;case 32:a=as;break;case 268435456:a=er;break;default:a=as}return l=C_.bind(null,t),a=Yt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&As(l),t.callbackPriority=2,t.callbackNode=null,2}function C_(t,i){if(Jn!==0&&Jn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ju()&&t.callbackNode!==a)return null;var l=It;return l=Mn(t,t===cn?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(c_(t,l,i),I_(t,vn()),t.callbackNode!=null&&t.callbackNode===a?C_.bind(null,t):null)}function k_(t,i){if(ju())return null;c_(t,i,!0)}function E0(){L0(function(){(Wt&6)!==0?Yt(Qi,S0):R_()})}function xf(){if(ga===0){var t=jo;t===0&&(t=di,di<<=1,(di&261888)===0&&(di=256)),ga=t}return ga}function N_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:se(""+t)}function D_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function w0(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=N_((h[ne]||null).action),y=l.submitter;y&&(i=(i=y[ne]||null)?N_(i.formAction):y.getAttribute("formAction"),i!==null&&(d=i,y=null));var T=new Vt("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ga!==0){var x=y?D_(h,y):new FormData(h);Zd(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(T.preventDefault(),x=y?D_(h,y):new FormData(h),Zd(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var Of=0;Of<gd.length;Of++){var Lf=gd[Of],A0=Lf.toLowerCase(),R0=Lf[0].toUpperCase()+Lf.slice(1);Gs(A0,"on"+R0)}Gs(lp,"onAnimationEnd"),Gs(cp,"onAnimationIteration"),Gs(up,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(qE,"onTransitionRun"),Gs(HE,"onTransitionStart"),Gs(FE,"onTransitionCancel"),Gs(hp,"onTransitionEnd"),Ns("onMouseEnter",["mouseout","mouseover"]),Ns("onMouseLeave",["mouseout","mouseover"]),Ns("onPointerEnter",["pointerout","pointerover"]),Ns("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function M_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var y=l.length-1;0<=y;y--){var T=l[y],x=T.instance,K=T.currentTarget;if(T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=K;try{d(h)}catch(ie){eu(ie)}h.currentTarget=null,d=x}else for(y=0;y<l.length;y++){if(T=l[y],x=T.instance,K=T.currentTarget,T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=K;try{d(h)}catch(ie){eu(ie)}h.currentTarget=null,d=x}}}}function Et(t,i){var a=i[we];a===void 0&&(a=i[we]=new Set);var l=t+"__bubble";a.has(l)||(x_(i,t,2,!1),a.add(l))}function Vf(t,i,a){var l=0;i&&(l|=4),x_(a,t,l,i)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function jf(t){if(!t[Bu]){t[Bu]=!0,Xr.forEach(function(a){a!=="selectionchange"&&(I0.has(a)||Vf(a,!1,t),Vf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Bu]||(i[Bu]=!0,Vf("selectionchange",!1,i))}}function x_(t,i,a,l){switch(lb(i)){case 2:var h=tw;break;case 8:h=nw;break;default:h=Zf}a=h.bind(null,i,a,t),h=void 0,!xt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Pf(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var T=l.stateNode.containerInfo;if(T===h)break;if(y===4)for(y=l.return;y!==null;){var x=y.tag;if((x===3||x===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;T!==null;){if(y=Pi(T),y===null)return;if(x=y.tag,x===5||x===6||x===26||x===27){l=d=y;continue e}T=T.parentNode}}l=l.return}Pe(function(){var K=d,ie=ke(a),le=[];e:{var $=dp.get(t);if($!==void 0){var J=Vt,Ne=t;switch(t){case"keypress":if(bt(a)===0)break e;case"keydown":case"keyup":J=qi;break;case"focusin":Ne="focus",J=Rt;break;case"focusout":Ne="blur",J=Rt;break;case"beforeblur":case"afterblur":J=Rt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Fe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=dt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=g;break;case lp:case cp:case up:J=Xn;break;case hp:J=w;break;case"scroll":case"scrollend":J=Ht;break;case"wheel":J=Q;break;case"copy":case"cut":case"paste":J=ii;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=zn;break;case"toggle":case"beforetoggle":J=Le}var Je=(i&4)!==0,rn=!Je&&(t==="scroll"||t==="scrollend"),H=Je?$!==null?$+"Capture":null:$;Je=[];for(var z=K,G;z!==null;){var oe=z;if(G=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||G===null||H===null||(oe=ze(z,H),oe!=null&&Je.push(oc(z,oe,G))),rn)break;z=z.return}0<Je.length&&($=new J($,Ne,null,a,ie),le.push({event:$,listeners:Je}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",$&&a!==Ie&&(Ne=a.relatedTarget||a.fromElement)&&(Pi(Ne)||Ne[_e]))break e;if((J||$)&&($=ie.window===ie?ie:($=ie.ownerDocument)?$.defaultView||$.parentWindow:window,J?(Ne=a.relatedTarget||a.toElement,J=K,Ne=Ne?Pi(Ne):null,Ne!==null&&(rn=c(Ne),Je=Ne.tag,Ne!==rn||Je!==5&&Je!==27&&Je!==6)&&(Ne=null)):(J=null,Ne=K),J!==Ne)){if(Je=Fe,oe="onMouseLeave",H="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(Je=zn,oe="onPointerLeave",H="onPointerEnter",z="pointer"),rn=J==null?$:zi(J),G=Ne==null?$:zi(Ne),$=new Je(oe,z+"leave",J,a,ie),$.target=rn,$.relatedTarget=G,oe=null,Pi(ie)===K&&(Je=new Je(H,z+"enter",Ne,a,ie),Je.target=G,Je.relatedTarget=rn,oe=Je),rn=oe,J&&Ne)t:{for(Je=C0,H=J,z=Ne,G=0,oe=H;oe;oe=Je(oe))G++;oe=0;for(var Qe=z;Qe;Qe=Je(Qe))oe++;for(;0<G-oe;)H=Je(H),G--;for(;0<oe-G;)z=Je(z),oe--;for(;G--;){if(H===z||z!==null&&H===z.alternate){Je=H;break t}H=Je(H),z=Je(z)}Je=null}else Je=null;J!==null&&O_(le,$,J,Je,!1),Ne!==null&&rn!==null&&O_(le,rn,Ne,Je,!0)}}e:{if($=K?zi(K):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var Gt=Xg;else if(Wg($))if(Zg)Gt=zE;else{Gt=jE;var Oe=VE}else J=$.nodeName,!J||J.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&me(K.elementType)&&(Gt=Xg):Gt=PE;if(Gt&&(Gt=Gt(t,K))){Yg(le,Gt,a,ie);break e}Oe&&Oe(t,$,K),t==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Ya($,"number",$.value)}switch(Oe=K?zi(K):window,t){case"focusin":(Wg(Oe)||Oe.contentEditable==="true")&&(ko=Oe,dd=K,Vl=null);break;case"focusout":Vl=dd=ko=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,ap(le,a,ie);break;case"selectionchange":if(UE)break;case"keydown":case"keyup":ap(le,a,ie)}var gt;if(vt)e:{switch(t){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else Co?Xa(t,a)&&(Ct="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(Bn&&a.locale!=="ko"&&(Co||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Co&&(gt=pt()):(rt=ie,fe="value"in rt?rt.value:rt.textContent,Co=!0)),Oe=Uu(K,Ct),0<Oe.length&&(Ct=new Sn(Ct,t,null,a,ie),le.push({event:Ct,listeners:Oe}),gt?Ct.data=gt:(gt=Io(a),gt!==null&&(Ct.data=gt)))),(gt=Bt?ME(t,a):xE(t,a))&&(Ct=Uu(K,"onBeforeInput"),0<Ct.length&&(Oe=new Sn("onBeforeInput","beforeinput",null,a,ie),le.push({event:Oe,listeners:Ct}),Oe.data=gt)),w0(le,t,K,a,ie)}M_(le,i)})}function oc(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Uu(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ze(t,a),h!=null&&l.unshift(oc(t,h,d)),h=ze(t,i),h!=null&&l.push(oc(t,h,d))),t.tag===3)return l;t=t.return}return[]}function C0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function O_(t,i,a,l,h){for(var d=i._reactName,y=[];a!==null&&a!==l;){var T=a,x=T.alternate,K=T.stateNode;if(T=T.tag,x!==null&&x===l)break;T!==5&&T!==26&&T!==27||K===null||(x=K,h?(K=ze(a,d),K!=null&&y.unshift(oc(a,K,x))):h||(K=ze(a,d),K!=null&&y.push(oc(a,K,x)))),a=a.return}y.length!==0&&t.push({event:i,listeners:y})}var k0=/\r\n?/g,N0=/\u0000|\uFFFD/g;function L_(t){return(typeof t=="string"?t:""+t).replace(k0,`
`).replace(N0,"")}function V_(t,i){return i=L_(i),L_(t)===i}function sn(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Ri(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Ri(t,""+l);break;case"className":Tn(t,"class",l);break;case"tabIndex":Tn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(t,a,l);break;case"style":X(t,l,d);break;case"data":if(i!=="object"){Tn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=se(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&sn(t,i,"name",h.name,h,null),sn(t,i,"formEncType",h.formEncType,h,null),sn(t,i,"formMethod",h.formMethod,h,null),sn(t,i,"formTarget",h.formTarget,h,null)):(sn(t,i,"encType",h.encType,h,null),sn(t,i,"method",h.method,h,null),sn(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=se(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Y);break;case"onScroll":l!=null&&Et("scroll",t);break;case"onScrollEnd":l!=null&&Et("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=se(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Et("beforetoggle",t),Et("toggle",t),Sr(t,"popover",l);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Sr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=W.get(a)||a,Sr(t,a,l))}}function zf(t,i,a,l,h,d){switch(a){case"style":X(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Ri(t,l):(typeof l=="number"||typeof l=="bigint")&&Ri(t,""+l);break;case"onScroll":l!=null&&Et("scroll",t);break;case"onScrollEnd":l!=null&&Et("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Y);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ga.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[ne]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Sr(t,a,l)}}}function vi(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",t),Et("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:sn(t,i,d,y,a,null)}}h&&sn(t,i,"srcSet",a.srcSet,a,null),l&&sn(t,i,"src",a.src,a,null);return;case"input":Et("invalid",t);var T=d=y=h=null,x=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var ie=a[l];if(ie!=null)switch(l){case"name":h=ie;break;case"type":y=ie;break;case"checked":x=ie;break;case"defaultChecked":K=ie;break;case"value":d=ie;break;case"defaultValue":T=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:sn(t,i,l,ie,a,null)}}Wa(t,d,T,x,K,y,h,!1);return;case"select":Et("invalid",t),l=y=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":y=T;break;case"multiple":l=T;default:sn(t,i,h,T,a,null)}i=d,a=y,t.multiple=!!l,i!=null?sr(t,!!l,i,!1):a!=null&&sr(t,!!l,a,!0);return;case"textarea":Et("invalid",t),d=h=l=null;for(y in a)if(a.hasOwnProperty(y)&&(T=a[y],T!=null))switch(y){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:sn(t,i,y,T,a,null)}rr(t,l,h,d);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:sn(t,i,x,l,a,null)}return;case"dialog":Et("beforetoggle",t),Et("toggle",t),Et("cancel",t),Et("close",t);break;case"iframe":case"object":Et("load",t);break;case"video":case"audio":for(l=0;l<ac.length;l++)Et(ac[l],t);break;case"image":Et("error",t),Et("load",t);break;case"details":Et("toggle",t);break;case"embed":case"source":case"link":Et("error",t),Et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:sn(t,i,K,l,a,null)}return;default:if(me(i)){for(ie in a)a.hasOwnProperty(ie)&&(l=a[ie],l!==void 0&&zf(t,i,ie,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&sn(t,i,T,l,a,null))}function D0(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,y=null,T=null,x=null,K=null,ie=null;for(J in a){var le=a[J];if(a.hasOwnProperty(J)&&le!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":x=le;default:l.hasOwnProperty(J)||sn(t,i,J,null,l,le)}}for(var $ in l){var J=l[$];if(le=a[$],l.hasOwnProperty($)&&(J!=null||le!=null))switch($){case"type":d=J;break;case"name":h=J;break;case"checked":K=J;break;case"defaultChecked":ie=J;break;case"value":y=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:J!==le&&sn(t,i,$,J,l,le)}}wr(t,y,T,x,K,ie,d,h);return;case"select":J=y=T=$=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":J=x;default:l.hasOwnProperty(d)||sn(t,i,d,null,l,x)}for(h in l)if(d=l[h],x=a[h],l.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":$=d;break;case"defaultValue":T=d;break;case"multiple":y=d;default:d!==x&&sn(t,i,h,d,l,x)}i=T,a=y,l=J,$!=null?sr(t,!!a,$,!1):!!l!=!!a&&(i!=null?sr(t,!!a,i,!0):sr(t,!!a,a?[]:"",!1));return;case"textarea":J=$=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:sn(t,i,T,null,l,h)}for(y in l)if(h=l[y],d=a[y],l.hasOwnProperty(y)&&(h!=null||d!=null))switch(y){case"value":$=h;break;case"defaultValue":J=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&sn(t,i,y,h,l,d)}Ro(t,$,J);return;case"option":for(var Ne in a)if($=a[Ne],a.hasOwnProperty(Ne)&&$!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:sn(t,i,Ne,null,l,$)}for(x in l)if($=l[x],J=a[x],l.hasOwnProperty(x)&&$!==J&&($!=null||J!=null))switch(x){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:sn(t,i,x,$,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in a)$=a[Je],a.hasOwnProperty(Je)&&$!=null&&!l.hasOwnProperty(Je)&&sn(t,i,Je,null,l,$);for(K in l)if($=l[K],J=a[K],l.hasOwnProperty(K)&&$!==J&&($!=null||J!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:sn(t,i,K,$,l,J)}return;default:if(me(i)){for(var rn in a)$=a[rn],a.hasOwnProperty(rn)&&$!==void 0&&!l.hasOwnProperty(rn)&&zf(t,i,rn,void 0,l,$);for(ie in l)$=l[ie],J=a[ie],!l.hasOwnProperty(ie)||$===J||$===void 0&&J===void 0||zf(t,i,ie,$,l,J);return}}for(var H in a)$=a[H],a.hasOwnProperty(H)&&$!=null&&!l.hasOwnProperty(H)&&sn(t,i,H,null,l,$);for(le in l)$=l[le],J=a[le],!l.hasOwnProperty(le)||$===J||$==null&&J==null||sn(t,i,le,$,l,J)}function j_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M0(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,y=h.initiatorType,T=h.duration;if(d&&T&&j_(y)){for(y=0,T=h.responseEnd,l+=1;l<a.length;l++){var x=a[l],K=x.startTime;if(K>T)break;var ie=x.transferSize,le=x.initiatorType;ie&&j_(le)&&(x=x.responseEnd,y+=ie*(x<T?1:(T-K)/(x-K)))}if(--l,i+=8*(d+y)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bf=null,Uf=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function P_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function qf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hf=null;function x0(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var B_=typeof setTimeout=="function"?setTimeout:void 0,O0=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,L0=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(t){return U_.resolve(null).then(t).catch(V0)}:B_;function V0(t){setTimeout(function(){throw t})}function pa(t){return t==="head"}function q_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),nl(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")lc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,lc(a);for(var d=a.firstChild;d;){var y=d.nextSibling,T=d.nodeName;d[mi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&lc(t.ownerDocument.body);a=h}while(a);nl(i)}function H_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ff(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ff(a),Hs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function j0(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[mi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Bs(t.nextSibling),t===null)break}return null}function P0(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Bs(t.nextSibling),t===null))return null;return t}function F_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Bs(t.nextSibling),t===null))return null;return t}function Gf(t){return t.data==="$?"||t.data==="$~"}function Kf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function z0(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Bs(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var $f=null;function G_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Bs(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function K_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function $_(t,i,a){switch(i=qu(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function lc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Hs(t)}var Us=new Map,Q_=new Set;function Hu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var zr=ve.d;ve.d={f:B0,r:U0,D:q0,C:H0,L:F0,m:G0,X:$0,S:K0,M:Q0};function B0(){var t=zr.f(),i=Ou();return t||i}function U0(t){var i=Wi(t);i!==null&&i.tag===5&&i.type==="form"?hy(i):zr.r(t)}var Jo=typeof document>"u"?null:document;function W_(t,i,a){var l=Jo;if(l&&typeof i=="string"&&i){var h=gi(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Q_.has(h)||(Q_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),vi(i,"link",t),Rn(i),l.head.appendChild(i)))}}function q0(t){zr.D(t),W_("dns-prefetch",t,null)}function H0(t,i){zr.C(t,i),W_("preconnect",t,i)}function F0(t,i,a){zr.L(t,i,a);var l=Jo;if(l&&t&&i){var h='link[rel="preload"][as="'+gi(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+gi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+gi(a.imageSizes)+'"]')):h+='[href="'+gi(t)+'"]';var d=h;switch(i){case"style":d=el(t);break;case"script":d=tl(t)}Us.has(d)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Us.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(cc(d))||i==="script"&&l.querySelector(uc(d))||(i=l.createElement("link"),vi(i,"link",t),Rn(i),l.head.appendChild(i)))}}function G0(t,i){zr.m(t,i);var a=Jo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+gi(l)+'"][href="'+gi(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=tl(t)}if(!Us.has(d)&&(t=A({rel:"modulepreload",href:t},i),Us.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uc(d)))return}l=a.createElement("link"),vi(l,"link",t),Rn(l),a.head.appendChild(l)}}}function K0(t,i,a){zr.S(t,i,a);var l=Jo;if(l&&t){var h=ks(l).hoistableStyles,d=el(t);i=i||"default";var y=h.get(d);if(!y){var T={loading:0,preload:null};if(y=l.querySelector(cc(d)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Us.get(d))&&Qf(t,a);var x=y=l.createElement("link");Rn(x),vi(x,"link",t),x._p=new Promise(function(K,ie){x.onload=K,x.onerror=ie}),x.addEventListener("load",function(){T.loading|=1}),x.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fu(y,i,l)}y={type:"stylesheet",instance:y,count:1,state:T},h.set(d,y)}}}function $0(t,i){zr.X(t,i);var a=Jo;if(a&&t){var l=ks(a).hoistableScripts,h=tl(t),d=l.get(h);d||(d=a.querySelector(uc(h)),d||(t=A({src:t,async:!0},i),(i=Us.get(h))&&Wf(t,i),d=a.createElement("script"),Rn(d),vi(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Q0(t,i){zr.M(t,i);var a=Jo;if(a&&t){var l=ks(a).hoistableScripts,h=tl(t),d=l.get(h);d||(d=a.querySelector(uc(h)),d||(t=A({src:t,async:!0,type:"module"},i),(i=Us.get(h))&&Wf(t,i),d=a.createElement("script"),Rn(d),vi(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Y_(t,i,a,l){var h=(h=it.current)?Hu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=el(a.href),a=ks(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=el(a.href);var d=ks(h).hoistableStyles,y=d.get(t);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,y),(d=h.querySelector(cc(t)))&&!d._p&&(y.instance=d,y.state.loading=5),Us.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Us.set(t,a),d||W0(h,t,a,y.state))),i&&l===null)throw Error(s(528,""));return y}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=tl(a),a=ks(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function el(t){return'href="'+gi(t)+'"'}function cc(t){return'link[rel="stylesheet"]['+t+"]"}function X_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function W0(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),vi(i,"link",a),Rn(i),t.head.appendChild(i))}function tl(t){return'[src="'+gi(t)+'"]'}function uc(t){return"script[async]"+t}function Z_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+gi(a.href)+'"]');if(l)return i.instance=l,Rn(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Rn(l),vi(l,"style",h),Fu(l,a.precedence,t),i.instance=l;case"stylesheet":h=el(a.href);var d=t.querySelector(cc(h));if(d)return i.state.loading|=4,i.instance=d,Rn(d),d;l=X_(a),(h=Us.get(h))&&Qf(l,h),d=(t.ownerDocument||t).createElement("link"),Rn(d);var y=d;return y._p=new Promise(function(T,x){y.onload=T,y.onerror=x}),vi(d,"link",l),i.state.loading|=4,Fu(d,a.precedence,t),i.instance=d;case"script":return d=tl(a.src),(h=t.querySelector(uc(d)))?(i.instance=h,Rn(h),h):(l=a,(h=Us.get(d))&&(l=A({},a),Wf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Rn(h),vi(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Fu(l,a.precedence,t));return i.instance}function Fu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,y=0;y<l.length;y++){var T=l[y];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Qf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Wf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Gu=null;function J_(t,i,a){if(Gu===null){var l=new Map,h=Gu=new Map;h.set(a,l)}else h=Gu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[mi]||d[P]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(i)||"";y=t+y;var T=l.get(y);T?T.push(d):l.set(y,[d])}}return l}function eb(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Y0(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function tb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function X0(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=el(l.href),d=i.querySelector(cc(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ku.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Rn(d);return}d=i.ownerDocument||i,l=X_(l),(h=Us.get(h))&&Qf(l,h),d=d.createElement("link"),Rn(d);var y=d;y._p=new Promise(function(T,x){y.onload=T,y.onerror=x}),vi(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ku.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Yf=0;function Z0(t,i){return t.stylesheets&&t.count===0&&Qu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Yf===0&&(Yf=62500*M0());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Yf?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Ku(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function Qu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,i.forEach(J0,t),$u=null,Ku.call(t))}function J0(t,i){if(!(i.state.loading&4)){var a=$u.get(t);if(a)var l=a.get(null);else{a=new Map,$u.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var y=h[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}h=i.instance,y=h.getAttribute("data-precedence"),d=a.get(y)||l,d===l&&a.set(null,h),a.set(y,h),this.count++,l=Ku.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var hc={$$typeof:xe,Provider:null,Consumer:null,_currentValue:Ve,_currentValue2:Ve,_threadCount:0};function ew(t,i,a,l,h,d,y,T,x){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function nb(t,i,a,l,h,d,y,T,x,K,ie,le){return t=new ew(t,i,a,y,x,K,ie,le,T),i=1,d===!0&&(i|=24),d=fs(3,null,null,i),t.current=d,d.stateNode=t,i=Cd(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Md(d),t}function ib(t){return t?(t=Mo,t):Mo}function sb(t,i,a,l,h,d){h=ib(h),l.context===null?l.context=h:l.pendingContext=h,l=ra(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=aa(t,l,i),a!==null&&(ts(a,t,i),Hl(a,t,i))}function rb(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Xf(t,i){rb(t,i),(t=t.alternate)&&rb(t,i)}function ab(t){if(t.tag===13||t.tag===31){var i=eo(t,67108864);i!==null&&ts(i,t,67108864),Xf(t,67108864)}}function ob(t){if(t.tag===13||t.tag===31){var i=_s();i=fi(i);var a=eo(t,i);a!==null&&ts(a,t,i),Xf(t,i)}}var Wu=!0;function tw(t,i,a,l){var h=te.T;te.T=null;var d=ve.p;try{ve.p=2,Zf(t,i,a,l)}finally{ve.p=d,te.T=h}}function nw(t,i,a,l){var h=te.T;te.T=null;var d=ve.p;try{ve.p=8,Zf(t,i,a,l)}finally{ve.p=d,te.T=h}}function Zf(t,i,a,l){if(Wu){var h=Jf(l);if(h===null)Pf(t,i,l,Yu,a),cb(t,l);else if(sw(h,t,i,a,l))l.stopPropagation();else if(cb(t,l),i&4&&-1<iw.indexOf(t)){for(;h!==null;){var d=Wi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=ni(d.pendingLanes);if(y!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;y;){var x=1<<31-on(y);T.entanglements[1]|=x,y&=~x}ur(d),(Wt&6)===0&&(Mu=vn()+500,rc(0))}}break;case 31:case 13:T=eo(d,2),T!==null&&ts(T,d,2),Ou(),Xf(d,2)}if(d=Jf(l),d===null&&Pf(t,i,l,Yu,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Pf(t,i,l,null,a)}}function Jf(t){return t=ke(t),em(t)}var Yu=null;function em(t){if(Yu=null,t=Pi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Yu=t,null}function lb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ci()){case Qi:return 2;case Rs:return 8;case as:case os:return 32;case er:return 268435456;default:return 32}default:return 32}}var tm=!1,ya=null,_a=null,ba=null,dc=new Map,fc=new Map,va=[],iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cb(t,i){switch(t){case"focusin":case"focusout":ya=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":dc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(i.pointerId)}}function mc(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Wi(i),i!==null&&ab(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function sw(t,i,a,l,h){switch(i){case"focusin":return ya=mc(ya,t,i,a,l,h),!0;case"dragenter":return _a=mc(_a,t,i,a,l,h),!0;case"mouseover":return ba=mc(ba,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return dc.set(d,mc(dc.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,fc.set(d,mc(fc.get(d)||null,t,i,a,l,h)),!0}return!1}function ub(t){var i=Pi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,xn(t.priority,function(){ob(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,xn(t.priority,function(){ob(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Jf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ie=l,a.target.dispatchEvent(l),Ie=null}else return i=Wi(a),i!==null&&ab(i),t.blockedOn=a,!1;i.shift()}return!0}function hb(t,i,a){Xu(t)&&a.delete(i)}function rw(){tm=!1,ya!==null&&Xu(ya)&&(ya=null),_a!==null&&Xu(_a)&&(_a=null),ba!==null&&Xu(ba)&&(ba=null),dc.forEach(hb),fc.forEach(hb)}function Zu(t,i){t.blockedOn===i&&(t.blockedOn=null,tm||(tm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,rw)))}var Ju=null;function db(t){Ju!==t&&(Ju=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ju===t&&(Ju=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(em(l||a)===null)continue;break}var d=Wi(a);d!==null&&(t.splice(i,3),i-=3,Zd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function nl(t){function i(x){return Zu(x,t)}ya!==null&&Zu(ya,t),_a!==null&&Zu(_a,t),ba!==null&&Zu(ba,t),dc.forEach(i),fc.forEach(i);for(var a=0;a<va.length;a++){var l=va[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<va.length&&(a=va[0],a.blockedOn===null);)ub(a),a.blockedOn===null&&va.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],y=h[ne]||null;if(typeof d=="function")y||db(a);else if(y){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,y=d[ne]||null)T=y.formAction;else if(em(h)!==null)continue}else T=y.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),db(a)}}}function fb(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function nm(t){this._internalRoot=t}eh.prototype.render=nm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=_s();sb(a,l,t,i,null,null)},eh.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;sb(t.current,2,null,t,null,null),Ou(),i[_e]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var i=nr();t={blockedOn:null,target:t,priority:i};for(var a=0;a<va.length&&i!==0&&i<va[a].priority;a++);va.splice(a,0,t),a===0&&ub(t)}};var mb=e.version;if(mb!=="19.2.0")throw Error(s(527,mb,"19.2.0"));ve.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=_(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var aw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{ui=th.inject(aw),An=th}catch{}}return pc.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Ty,d=Sy,y=Ey;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=nb(t,1,!1,null,null,a,l,null,h,d,y,fb),t[_e]=i.current,jf(t),new nm(i)},pc.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Ty,y=Sy,T=Ey,x=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),i=nb(t,1,!0,i,a??null,l,h,x,d,y,T,fb),i.context=ib(null),a=i.current,l=_s(),l=fi(l),h=ra(l),h.callback=null,aa(a,h,l),a=l,i.current.lanes=a,Cs(i,a),ur(i),t[_e]=i.current,jf(t),new eh(i)},pc.version="19.2.0",pc}var wb;function pw(){if(wb)return rm.exports;wb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=gw(),rm.exports}var yw=pw();const _w="_projectHub_bg565_1",bw="_backgroundOverlay_bg565_23",vw="_content_bg565_53",Tw="_header_bg565_77",Sw="_logoContainer_bg565_109",Ew="_title_bg565_123",ww="_titleGradient_bg565_137",Aw="_subtitle_bg565_173",Rw="_projectGrid_bg565_189",Iw="_projectCard_bg565_229",Cw="_cardGlow_bg565_291",kw="_cardContent_bg565_329",Nw="_projectEmoji_bg565_347",Dw="_projectName_bg565_369",Mw="_projectDescription_bg565_397",xw="_comingSoon_bg565_411",Ow="_cardBorder_bg565_431",Lw="_footer_bg565_471",Vw="_footerText_bg565_491",Gn={projectHub:_w,backgroundOverlay:bw,content:vw,header:Tw,logoContainer:Sw,title:Ew,titleGradient:ww,subtitle:Aw,projectGrid:Rw,projectCard:Iw,cardGlow:Cw,cardContent:kw,projectEmoji:Nw,projectName:Dw,projectDescription:Mw,comingSoon:xw,cardBorder:Ow,footer:Lw,footerText:Vw},Ab="/Hitzkopf/assets/hk_logo_horizontal-EzCfu4m-.png",jw=({onSelectProject:r})=>{const[e,n]=Z.useState(null),s=[{id:"hitzkopf",name:"Hitzkopf",description:"Das explosive Partyspiel",color:"#ff6b35",emoji:"",available:!0},{id:"musicvoter",name:"Amplify",description:"Gemeinsam den Ton angeben",color:"#4ecdc4",emoji:"",available:!0}];return p.jsxs("div",{className:Gn.projectHub,children:[p.jsx("div",{className:Gn.backgroundOverlay}),p.jsxs("div",{className:Gn.content,children:[p.jsx("div",{className:Gn.header,children:p.jsxs("div",{className:Gn.logoContainer,children:[p.jsx("h1",{className:Gn.title,children:p.jsx("span",{className:Gn.titleGradient,children:"Party Games"})}),p.jsx("p",{className:Gn.subtitle,children:"Whle dein Spiel"})]})}),p.jsx("div",{className:Gn.projectGrid,children:s.map(o=>p.jsxs("button",{className:`${Gn.projectCard} ${e===o.id?Gn.hovered:""}`,onClick:()=>o.available&&r(o.id),onMouseEnter:()=>n(o.id),onMouseLeave:()=>n(null),disabled:!o.available,style:{"--project-color":o.color,"--project-glow":`${o.color}40`},children:[p.jsx("div",{className:Gn.cardGlow}),p.jsxs("div",{className:Gn.cardContent,children:[p.jsx("div",{className:Gn.projectEmoji,children:o.emoji}),p.jsx("h2",{className:Gn.projectName,children:o.name}),p.jsx("p",{className:Gn.projectDescription,children:o.description}),!o.available&&p.jsx("div",{className:Gn.comingSoon,children:"Bald verfgbar"})]}),p.jsx("div",{className:Gn.cardBorder})]},o.id))}),p.jsx("div",{className:Gn.footer,children:p.jsx("p",{className:Gn.footerText,children:"Made with  by Niklas"})})]})]})},Pw=()=>{};var Rb={};const tT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},zw=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],f=r[n++],m=r[n++],b=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(b>>10)),e[s++]=String.fromCharCode(56320+(b&1023))}else{const c=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},nT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],f=o+1<r.length,m=f?r[o+1]:0,b=o+2<r.length,_=b?r[o+2]:0,S=c>>2,A=(c&3)<<4|m>>4;let V=(m&15)<<2|_>>6,O=_&63;b||(O=64,f||(V=64)),s.push(n[S],n[A],n[V],n[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(tT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):zw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const _=o<r.length?n[r.charAt(o)]:64;++o;const A=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||m==null||_==null||A==null)throw new Bw;const V=c<<2|m>>4;if(s.push(V),_!==64){const O=m<<4&240|_>>2;if(s.push(O),A!==64){const pe=_<<6&192|A;s.push(pe)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uw=function(r){const e=tT(r);return nT.encodeByteArray(e,!0)},_h=function(r){return Uw(r).replace(/\./g,"")},iT=function(r){try{return nT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Hw=()=>qw().__FIREBASE_DEFAULTS__,Fw=()=>{if(typeof process>"u"||typeof Rb>"u")return;const r=Rb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Gw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&iT(r[1]);return e&&JSON.parse(e)},zh=()=>{try{return Pw()||Hw()||Fw()||Gw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},sT=r=>zh()?.emulatorHosts?.[r],Kw=r=>{const e=sT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},rT=()=>zh()?.config,aT=r=>zh()?.[`_${r}`];class $w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Rl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oT(r){return(await fetch(r,{credentials:"include"})).ok}function Qw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[_h(JSON.stringify(n)),_h(JSON.stringify(f)),""].join(".")}const Ec={};function Ww(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ec))Ec[e]?r.emulator.push(e):r.prod.push(e);return r}function Yw(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Ib=!1;function lT(r,e){if(typeof window>"u"||typeof document>"u"||!Rl(window.location.host)||Ec[r]===e||Ec[r]||Ib)return;Ec[r]=e;function n(V){return`__firebase__banner__${V}`}const s="__firebase__banner",c=Ww().prod.length>0;function f(){const V=document.getElementById(s);V&&V.remove()}function m(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function b(V,O){V.setAttribute("width","24"),V.setAttribute("id",O),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function _(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{Ib=!0,f()},V}function S(V,O){V.setAttribute("id",O),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function A(){const V=Yw(s),O=n("text"),pe=document.getElementById(O)||document.createElement("span"),de=n("learnmore"),he=document.getElementById(de)||document.createElement("a"),I=n("preprendIcon"),Ae=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const xe=V.element;m(xe),S(he,de);const ct=_();b(Ae,I),xe.append(Ae,pe,he,ct),document.body.appendChild(xe)}c?(pe.innerText="Preview backend disconnected.",Ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,pe.innerText="Preview backend running in this workspace."),pe.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function xi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xi())}function Zw(){const r=zh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function tA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nA(){const r=xi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function iA(){return!Zw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sA(){try{return typeof indexedDB=="object"}catch{return!1}}function rA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const aA="FirebaseError";class Yr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=aA,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?oA(c,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Yr(o,m,s)}}function oA(r,e){return r.replace(lA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const lA=/\{\$([^}]+)}/g;function cA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Hr(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],f=e[o];if(Cb(c)&&Cb(f)){if(!Hr(c,f))return!1}else if(c!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Cb(r){return r!==null&&typeof r=="object"}function zc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function uA(r,e){const n=new hA(r,e);return n.subscribe.bind(n)}class hA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");dA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=cm),o.error===void 0&&(o.error=cm),o.complete===void 0&&(o.complete=cm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function cm(){}function ti(r){return r&&r._delegate?r._delegate:r}class yo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mo="[DEFAULT]";class fA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $w;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gA(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mA(r){return r===mo?void 0:r}function gA(r){return r.instantiationMode==="EAGER"}class pA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var kt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(kt||(kt={}));const yA={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},_A=kt.INFO,bA={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},vA=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=bA[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zm{constructor(e){this.name=e,this._logLevel=_A,this._logHandler=vA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}}const TA=(r,e)=>e.some(n=>r instanceof n);let kb,Nb;function SA(){return kb||(kb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EA(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cT=new WeakMap,Sm=new WeakMap,uT=new WeakMap,um=new WeakMap,Jm=new WeakMap;function wA(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(Ca(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&cT.set(n,r)}).catch(()=>{}),Jm.set(e,r),e}function AA(r){if(Sm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Sm.set(r,e)}let Em={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Sm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||uT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ca(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function RA(r){Em=r(Em)}function IA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(hm(this),e,...n);return uT.set(s,e.sort?e.sort():[e]),Ca(s)}:EA().includes(r)?function(...e){return r.apply(hm(this),e),Ca(cT.get(this))}:function(...e){return Ca(r.apply(hm(this),e))}}function CA(r){return typeof r=="function"?IA(r):(r instanceof IDBTransaction&&AA(r),TA(r,SA())?new Proxy(r,Em):r)}function Ca(r){if(r instanceof IDBRequest)return wA(r);if(um.has(r))return um.get(r);const e=CA(r);return e!==r&&(um.set(r,e),Jm.set(e,r)),e}const hm=r=>Jm.get(r);function kA(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const f=indexedDB.open(r,e),m=Ca(f);return s&&f.addEventListener("upgradeneeded",b=>{s(Ca(f.result),b.oldVersion,b.newVersion,Ca(f.transaction),b)}),n&&f.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),m.then(b=>{c&&b.addEventListener("close",()=>c()),o&&b.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const NA=["get","getKey","getAll","getAllKeys","count"],DA=["put","add","delete","clear"],dm=new Map;function Db(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=DA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||NA.includes(n)))return;const c=async function(f,...m){const b=this.transaction(f,o?"readwrite":"readonly");let _=b.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&b.done]))[0]};return dm.set(e,c),c}RA(r=>({...r,get:(e,n,s)=>Db(e,n)||r.get(e,n,s),has:(e,n)=>!!Db(e,n)||r.has(e,n)}));class MA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function xA(r){return r.getComponent()?.type==="VERSION"}const wm="@firebase/app",Mb="0.14.6";const Fr=new Zm("@firebase/app"),OA="@firebase/app-compat",LA="@firebase/analytics-compat",VA="@firebase/analytics",jA="@firebase/app-check-compat",PA="@firebase/app-check",zA="@firebase/auth",BA="@firebase/auth-compat",UA="@firebase/database",qA="@firebase/data-connect",HA="@firebase/database-compat",FA="@firebase/functions",GA="@firebase/functions-compat",KA="@firebase/installations",$A="@firebase/installations-compat",QA="@firebase/messaging",WA="@firebase/messaging-compat",YA="@firebase/performance",XA="@firebase/performance-compat",ZA="@firebase/remote-config",JA="@firebase/remote-config-compat",e1="@firebase/storage",t1="@firebase/storage-compat",n1="@firebase/firestore",i1="@firebase/ai",s1="@firebase/firestore-compat",r1="firebase",a1="12.6.0";const Am="[DEFAULT]",o1={[wm]:"fire-core",[OA]:"fire-core-compat",[VA]:"fire-analytics",[LA]:"fire-analytics-compat",[PA]:"fire-app-check",[jA]:"fire-app-check-compat",[zA]:"fire-auth",[BA]:"fire-auth-compat",[UA]:"fire-rtdb",[qA]:"fire-data-connect",[HA]:"fire-rtdb-compat",[FA]:"fire-fn",[GA]:"fire-fn-compat",[KA]:"fire-iid",[$A]:"fire-iid-compat",[QA]:"fire-fcm",[WA]:"fire-fcm-compat",[YA]:"fire-perf",[XA]:"fire-perf-compat",[ZA]:"fire-rc",[JA]:"fire-rc-compat",[e1]:"fire-gcs",[t1]:"fire-gcs-compat",[n1]:"fire-fst",[s1]:"fire-fst-compat",[i1]:"fire-vertex","fire-js":"fire-js",[r1]:"fire-js-all"};const bh=new Map,l1=new Map,Rm=new Map;function xb(r,e){try{r.container.addComponent(e)}catch(n){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function yl(r){const e=r.name;if(Rm.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;Rm.set(e,r);for(const n of bh.values())xb(n,r);for(const n of l1.values())xb(n,r);return!0}function eg(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Ys(r){return r==null?!1:r.settings!==void 0}const c1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new Pc("app","Firebase",c1);class u1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}const Il=a1;function tg(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Am,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ka.create("bad-app-name",{appName:String(o)});if(n||(n=rT()),!n)throw ka.create("no-options");const c=bh.get(o);if(c){if(Hr(n,c.options)&&Hr(s,c.config))return c;throw ka.create("duplicate-app",{appName:o})}const f=new pA(o);for(const b of Rm.values())f.addComponent(b);const m=new u1(n,s,f);return bh.set(o,m),m}function hT(r=Am){const e=bh.get(r);if(!e&&r===Am&&rT())return tg();if(!e)throw ka.create("no-app",{appName:r});return e}function Na(r,e,n){let s=o1[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(f.join(" "));return}yl(new yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const h1="firebase-heartbeat-database",d1=1,Nc="firebase-heartbeat-store";let fm=null;function dT(){return fm||(fm=kA(h1,d1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Nc)}catch(n){console.warn(n)}}}}).catch(r=>{throw ka.create("idb-open",{originalErrorMessage:r.message})})),fm}async function f1(r){try{const n=(await dT()).transaction(Nc),s=await n.objectStore(Nc).get(fT(r));return await n.done,s}catch(e){if(e instanceof Yr)Fr.warn(e.message);else{const n=ka.create("idb-get",{originalErrorMessage:e?.message});Fr.warn(n.message)}}}async function Ob(r,e){try{const s=(await dT()).transaction(Nc,"readwrite");await s.objectStore(Nc).put(e,fT(r)),await s.done}catch(n){if(n instanceof Yr)Fr.warn(n.message);else{const s=ka.create("idb-set",{originalErrorMessage:n?.message});Fr.warn(s.message)}}}function fT(r){return`${r.name}!${r.options.appId}`}const m1=1024,g1=30;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Lb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>g1){const o=b1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lb(),{heartbeatsToSend:n,unsentEntries:s}=y1(this._heartbeatsCache.heartbeats),o=_h(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Fr.warn(e),""}}}function Lb(){return new Date().toISOString().substring(0,10)}function y1(r,e=m1){const n=[];let s=r.slice();for(const o of r){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Vb(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Vb(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sA()?rA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await f1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vb(r){return _h(JSON.stringify({version:2,heartbeats:r})).length}function b1(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function v1(r){yl(new yo("platform-logger",e=>new MA(e),"PRIVATE")),yl(new yo("heartbeat",e=>new p1(e),"PRIVATE")),Na(wm,Mb,r),Na(wm,Mb,"esm2020"),Na("fire-js","")}v1("");var T1="firebase",S1="12.6.0";Na(T1,S1,"app");function mT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E1=mT,gT=new Pc("auth","Firebase",mT());const vh=new Zm("@firebase/auth");function w1(r,...e){vh.logLevel<=kt.WARN&&vh.warn(`Auth (${Il}): ${r}`,...e)}function lh(r,...e){vh.logLevel<=kt.ERROR&&vh.error(`Auth (${Il}): ${r}`,...e)}function Gr(r,...e){throw ng(r,...e)}function dr(r,...e){return ng(r,...e)}function pT(r,e,n){const s={...E1(),[e]:n};return new Pc("auth","Firebase",s).create(e,{appName:r.name})}function Da(r){return pT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return gT.create(r,...e)}function nt(r,e,...n){if(!r)throw ng(e,...n)}function Ur(r){const e="INTERNAL ASSERTION FAILED: "+r;throw lh(e),new Error(e)}function Kr(r,e){r||Ur(e)}function Im(){return typeof self<"u"&&self.location?.href||""}function A1(){return jb()==="http:"||jb()==="https:"}function jb(){return typeof self<"u"&&self.location?.protocol||null}function R1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A1()||eA()||"connection"in navigator)?navigator.onLine:!0}function I1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=Xw()||tA()}get(){return R1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ig(r,e){Kr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class yT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const C1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const k1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N1=new Bc(3e4,6e4);function Bh(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Cl(r,e,n,s,o={}){return _T(r,o,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const m=zc({key:r.config.apiKey,...f}).slice(1),b=await r._getAdditionalHeaders();b["Content-Type"]="application/json",r.languageCode&&(b["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:b,...c};return Jw()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(_.credentials="include"),yT.fetch()(await vT(r,r.config.apiHost,n,m),_)})}async function _T(r,e,n){r._canInitEmulator=!1;const s={...C1,...e};try{const o=new D1(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw nh(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const m=c.ok?f.errorMessage:f.error.message,[b,_]=m.split(" : ");if(b==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(r,"credential-already-in-use",f);if(b==="EMAIL_EXISTS")throw nh(r,"email-already-in-use",f);if(b==="USER_DISABLED")throw nh(r,"user-disabled",f);const S=s[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw pT(r,S,_);Gr(r,S)}}catch(o){if(o instanceof Yr)throw o;Gr(r,"network-request-failed",{message:String(o)})}}async function bT(r,e,n,s,o={}){const c=await Cl(r,e,n,s,o);return"mfaPendingCredential"in c&&Gr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function vT(r,e,n,s){const o=`${e}${n}?${s}`,c=r,f=c.config.emulator?ig(r.config,o):`${r.config.apiScheme}://${o}`;return k1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}class D1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(dr(this.auth,"network-request-failed")),N1.get())})}}function nh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=dr(r,e,s);return o.customData._tokenResponse=n,o}async function M1(r,e){return Cl(r,"POST","/v1/accounts:delete",e)}async function Th(r,e){return Cl(r,"POST","/v1/accounts:lookup",e)}function wc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x1(r,e=!1){const n=ti(r),s=await n.getIdToken(e),o=sg(s);nt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c?.sign_in_provider;return{claims:o,token:s,authTime:wc(mm(o.auth_time)),issuedAtTime:wc(mm(o.iat)),expirationTime:wc(mm(o.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function mm(r){return Number(r)*1e3}function sg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const o=iT(n);return o?JSON.parse(o):(lh("Failed to decode base64 JWT payload"),null)}catch(o){return lh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Pb(r){const e=sg(r);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Dc(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Yr&&O1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function O1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class L1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Cm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wc(this.lastLoginAt),this.creationTime=wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sh(r){const e=r.auth,n=await r.getIdToken(),s=await Dc(r,Th(e,{idToken:n}));nt(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?TT(o.providerUserInfo):[],f=j1(r.providerData,c),m=r.isAnonymous,b=!(r.email&&o.passwordHash)&&!f?.length,_=m?b:!1,S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Cm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,S)}async function V1(r){const e=ti(r);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function j1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function TT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function P1(r,e){const n=await _T(r,{},async()=>{const s=zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,f=await vT(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const b={method:"POST",headers:m,body:s};return r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(b.credentials="include"),yT.fetch()(f,b)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function z1(r,e){return Cl(r,"POST","/v2/accounts:revokeToken",Bh(r,e))}class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=Pb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await P1(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,f=new dl;return s&&(nt(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(nt(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(nt(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return Ur("not implemented")}}function Sa(r,e){nt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new L1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return x1(this,e)}reload(){return V1(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ys(this.auth.app))return Promise.reject(Da(this.auth));const e=await this.getIdToken();return await Dc(this,M1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,b=n._redirectEventId??void 0,_=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:A,emailVerified:V,isAnonymous:O,providerData:pe,stsTokenManager:de}=n;nt(A&&de,e,"internal-error");const he=dl.fromJSON(this.name,de);nt(typeof A=="string",e,"internal-error"),Sa(s,e.name),Sa(o,e.name),nt(typeof V=="boolean",e,"internal-error"),nt(typeof O=="boolean",e,"internal-error"),Sa(c,e.name),Sa(f,e.name),Sa(m,e.name),Sa(b,e.name),Sa(_,e.name),Sa(S,e.name);const I=new Xs({uid:A,auth:e,email:o,emailVerified:V,displayName:s,isAnonymous:O,photoURL:f,phoneNumber:c,tenantId:m,stsTokenManager:he,createdAt:_,lastLoginAt:S});return pe&&Array.isArray(pe)&&(I.providerData=pe.map(Ae=>({...Ae}))),b&&(I._redirectEventId=b),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new dl;o.updateFromServerResponse(n);const c=new Xs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Sh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];nt(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?TT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!c?.length,m=new dl;m.updateFromIdToken(s);const b=new Xs({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Cm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(b,_),b}}const zb=new Map;function qr(r){Kr(r instanceof Function,"Expected a class definition");let e=zb.get(r);return e?(Kr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,zb.set(r,e),e)}class ST{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ST.type="NONE";const Bb=ST;function ch(r,e,n){return`firebase:${r}:${e}:${n}`}class fl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=ch(this.userKey,o.apiKey,c),this.fullPersistenceKey=ch("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Th(this.auth,{idToken:e}).catch(()=>{});return n?Xs._fromGetAccountInfoResponse(this.auth,n,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new fl(qr(Bb),e,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||qr(Bb);const f=ch(s,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const S=await _._get(f);if(S){let A;if(typeof S=="string"){const V=await Th(e,{idToken:S}).catch(()=>{});if(!V)break;A=await Xs._fromGetAccountInfoResponse(e,V,S)}else A=Xs._fromJSON(e,S);_!==c&&(m=A),c=_;break}}catch{}const b=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!b.length?new fl(c,e,s):(c=b[0],m&&await c._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(f)}catch{}})),new fl(c,e,s))}}function Ub(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ET(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CT(e))return"Blackberry";if(kT(e))return"Webos";if(wT(e))return"Safari";if((e.includes("chrome/")||AT(e))&&!e.includes("edge/"))return"Chrome";if(IT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function ET(r=xi()){return/firefox\//i.test(r)}function wT(r=xi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AT(r=xi()){return/crios\//i.test(r)}function RT(r=xi()){return/iemobile/i.test(r)}function IT(r=xi()){return/android/i.test(r)}function CT(r=xi()){return/blackberry/i.test(r)}function kT(r=xi()){return/webos/i.test(r)}function rg(r=xi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function B1(r=xi()){return rg(r)&&!!window.navigator?.standalone}function U1(){return nA()&&document.documentMode===10}function NT(r=xi()){return rg(r)||IT(r)||kT(r)||CT(r)||/windows phone/i.test(r)||RT(r)}function DT(r,e=[]){let n;switch(r){case"Browser":n=Ub(xi());break;case"Worker":n=`${Ub(xi())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Il}/${s}`}class q1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((f,m)=>{try{const b=e(c);f(b)}catch(b){m(b)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function H1(r,e={}){return Cl(r,"GET","/v2/passwordPolicy",Bh(r,e))}const F1=6;class G1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??F1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class K1{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qb(this),this.idTokenSubscription=new qb(this),this.beforeStateQueue=new q1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Th(this,{idToken:e}),s=await Xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ys(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=I1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ys(this.app))return Promise.reject(Da(this));const n=e?ti(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ys(this.app)?Promise.reject(Da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ys(this.app)?Promise.reject(Da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H1(this),n=new G1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await z1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qr(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(m,this,"internal-error"),m.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const b=e.addObserver(n,s,o);return()=>{f=!0,b()}}else{const b=e.addObserver(n);return()=>{f=!0,b()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&w1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Uh(r){return ti(r)}class qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=uA(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $1(r){ag=r}function Q1(r){return ag.loadJS(r)}function W1(){return ag.gapiScript}function Y1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function X1(r,e){const n=eg(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Hr(c,e??{}))return o;Gr(o,"already-initialized")}return n.initialize({options:e})}function Z1(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(qr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function J1(r,e,n){const s=Uh(r);nt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=MT(e),{host:f,port:m}=eR(e),b=m===null?"":`:${m}`,_={url:`${c}//${f}${b}/`},S=Object.freeze({host:f,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){nt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),nt(Hr(_,s.config.emulator)&&Hr(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,Rl(f)?(oT(`${c}//${f}${b}`),lT("Auth",!0)):tR()}function MT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function eR(r){const e=MT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:Hb(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:Hb(f)}}}function Hb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function tR(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class xT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,n){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function ml(r,e){return bT(r,"POST","/v1/accounts:signInWithIdp",Bh(r,e))}const nR="http://localhost";class _o extends xT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const f=new _o(s,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ml(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ml(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ml(e,n)}buildRequest(){const e={requestUri:nR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zc(n)}return e}}class OT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Uc extends OT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ea extends Uc{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ea.PROVIDER_ID="facebook.com";class wa extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _o._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return wa.credential(n,s)}catch{return null}}}wa.GOOGLE_SIGN_IN_METHOD="google.com";wa.PROVIDER_ID="google.com";class Aa extends Uc{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.GITHUB_SIGN_IN_METHOD="github.com";Aa.PROVIDER_ID="github.com";class Ra extends Uc{constructor(){super("twitter.com")}static credential(e,n){return _o._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ra.credential(n,s)}catch{return null}}}Ra.TWITTER_SIGN_IN_METHOD="twitter.com";Ra.PROVIDER_ID="twitter.com";async function iR(r,e){return bT(r,"POST","/v1/accounts:signUp",Bh(r,e))}class La{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Xs._fromIdTokenResponse(e,s,o),f=Fb(s);return new La({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Fb(s);return new La({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Fb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function LT(r){if(Ys(r.app))return Promise.reject(Da(r));const e=Uh(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new La({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await iR(e,{returnSecureToken:!0}),s=await La._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}class Eh extends Yr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Eh(e,n,s,o)}}function VT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(r,c,e,s):c})}async function sR(r,e,n=!1){const s=await Dc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return La._forOperation(r,"link",s)}async function rR(r,e,n=!1){const{auth:s}=r;if(Ys(s.app))return Promise.reject(Da(s));const o="reauthenticate";try{const c=await Dc(r,VT(s,o,e,r),n);nt(c.idToken,s,"internal-error");const f=sg(c.idToken);nt(f,s,"internal-error");const{sub:m}=f;return nt(r.uid===m,s,"user-mismatch"),La._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Gr(s,"user-mismatch"),c}}async function aR(r,e,n=!1){if(Ys(r.app))return Promise.reject(Da(r));const s="signIn",o=await VT(r,s,e),c=await La._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}function oR(r,e,n,s){return ti(r).onIdTokenChanged(e,n,s)}function lR(r,e,n){return ti(r).beforeAuthStateChanged(e,n)}function cR(r,e,n,s){return ti(r).onAuthStateChanged(e,n,s)}const wh="__sak";class jT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uR=1e3,hR=10;class PT extends jT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,b)=>{this.notifyListeners(f,b)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);U1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,hR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},uR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PT.type="LOCAL";const dR=PT;class zT extends jT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zT.type="SESSION";const BT=zT;function fR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new qh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async _=>_(n.origin,c)),b=await fR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:b})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qh.receivers=[];function og(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class mR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((m,b)=>{const _=og("",20);o.port1.start();const S=setTimeout(()=>{b(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(A){const V=A;if(V.data.eventId===_)switch(V.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{b(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(V.data.response);break;default:clearTimeout(S),clearTimeout(c),b(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function fr(){return window}function gR(r){fr().location.href=r}function UT(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function pR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yR(){return navigator?.serviceWorker?.controller||null}function _R(){return UT()?self:null}const qT="firebaseLocalStorageDb",bR=1,Ah="firebaseLocalStorage",HT="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(r,e){return r.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function vR(){const r=indexedDB.deleteDatabase(qT);return new qc(r).toPromise()}function km(){const r=indexedDB.open(qT,bR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Ah,{keyPath:HT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Ah)?e(s):(s.close(),await vR(),e(await km()))})})}async function Gb(r,e,n){const s=Hh(r,!0).put({[HT]:e,value:n});return new qc(s).toPromise()}async function TR(r,e){const n=Hh(r,!1).get(e),s=await new qc(n).toPromise();return s===void 0?null:s.value}function Kb(r,e){const n=Hh(r,!0).delete(e);return new qc(n).toPromise()}const SR=800,ER=3;class FT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ER)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qh._getInstance(_R()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pR(),!this.activeServiceWorker)return;this.sender=new mR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Gb(e,wh,"1"),await Kb(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>TR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Hh(o,!1).getAll();return new qc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FT.type="LOCAL";const wR=FT;new Bc(3e4,6e4);function AR(r,e){return e?qr(e):(nt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class lg extends xT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ml(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ml(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RR(r){return aR(r.auth,new lg(r),r.bypassAuthState)}function IR(r){const{auth:e,user:n}=r;return nt(n,e,"internal-error"),rR(n,new lg(r),r.bypassAuthState)}async function CR(r){const{auth:e,user:n}=r;return nt(n,e,"internal-error"),sR(n,new lg(r),r.bypassAuthState)}class GT{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:f,type:m}=e;if(f){this.reject(f);return}const b={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(b))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RR;case"linkViaPopup":case"linkViaRedirect":return CR;case"reauthViaPopup":case"reauthViaRedirect":return IR;default:Gr(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kR=new Bc(2e3,1e4);class ul extends GT{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kR.get())};e()}}ul.currentPopupAction=null;const NR="pendingRedirect",uh=new Map;class DR extends GT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=uh.get(this.auth._key());if(!e){try{const s=await MR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}uh.set(this.auth._key(),e)}return this.bypassAuthState||uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MR(r,e){const n=LR(e),s=OR(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function xR(r,e){uh.set(r._key(),e)}function OR(r){return qr(r._redirectPersistence)}function LR(r){return ch(NR,r.config.apiKey,r.name)}async function VR(r,e,n=!1){if(Ys(r.app))return Promise.reject(Da(r));const s=Uh(r),o=AR(s,e),f=await new DR(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const jR=600*1e3;class PR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!KT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(dr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jR&&this.cachedEventUids.clear(),this.cachedEventUids.has($b(e))}saveEventToCache(e){this.cachedEventUids.add($b(e)),this.lastProcessedEventTime=Date.now()}}function $b(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function KT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KT(r);default:return!1}}async function BR(r,e={}){return Cl(r,"GET","/v1/projects",e)}const UR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qR=/^https?/;async function HR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await BR(r);for(const n of e)try{if(FR(n))return}catch{}Gr(r,"unauthorized-domain")}function FR(r){const e=Im(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!qR.test(n))return!1;if(UR.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const GR=new Bc(3e4,6e4);function Qb(){const r=fr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function KR(r){return new Promise((e,n)=>{function s(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),n(dr(r,"network-request-failed"))},timeout:GR.get()})}if(fr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fr().gapi?.load)s();else{const o=Y1("iframefcb");return fr()[o]=()=>{gapi.load?s():n(dr(r,"network-request-failed"))},Q1(`${W1()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw hh=null,e})}let hh=null;function $R(r){return hh=hh||KR(r),hh}const QR=new Bc(5e3,15e3),WR="__/auth/iframe",YR="emulator/auth/iframe",XR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JR(r){const e=r.config;nt(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?ig(e,YR):`https://${r.config.authDomain}/${WR}`,s={apiKey:e.apiKey,appName:r.name,v:Il},o=ZR.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${zc(s).slice(1)}`}async function eI(r){const e=await $R(r),n=fr().gapi;return nt(n,r,"internal-error"),e.open({where:document.body,url:JR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XR,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const f=dr(r,"network-request-failed"),m=fr().setTimeout(()=>{c(f)},QR.get());function b(){fr().clearTimeout(m),o(s)}s.ping(b).then(b,()=>{c(f)})}))}const tI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nI=500,iI=600,sI="_blank",rI="http://localhost";class Wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aI(r,e,n,s=nI,o=iI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const b={...tI,width:s.toString(),height:o.toString(),top:c,left:f},_=xi().toLowerCase();n&&(m=AT(_)?sI:n),ET(_)&&(e=e||rI,b.scrollbars="yes");const S=Object.entries(b).reduce((V,[O,pe])=>`${V}${O}=${pe},`,"");if(B1(_)&&m!=="_self")return oI(e||"",m),new Wb(null);const A=window.open(e||"",m,S);nt(A,r,"popup-blocked");try{A.focus()}catch{}return new Wb(A)}function oI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const lI="__/auth/handler",cI="emulator/auth/handler",uI=encodeURIComponent("fac");async function Yb(r,e,n,s,o,c){nt(r.config.authDomain,r,"auth-domain-config-required"),nt(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Il,eventId:o};if(e instanceof OT){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",cA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,A]of Object.entries({}))f[S]=A}if(e instanceof Uc){const S=e.getScopes().filter(A=>A!=="");S.length>0&&(f.scopes=S.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const S of Object.keys(m))m[S]===void 0&&delete m[S];const b=await r._getAppCheckToken(),_=b?`#${uI}=${encodeURIComponent(b)}`:"";return`${hI(r)}?${zc(m).slice(1)}${_}`}function hI({config:r}){return r.emulator?ig(r,cI):`https://${r.authDomain}/${lI}`}const gm="webStorageSupport";class dI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=VR,this._overrideRedirectResult=xR}async _openPopup(e,n,s,o){Kr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Yb(e,n,s,Im(),o);return aI(e,c,og())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await Yb(e,n,s,Im(),o);return gR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Kr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await eI(e),s=new PR(e);return n.register("authEvent",o=>(nt(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gm,{type:gm},o=>{const c=o?.[0]?.[gm];c!==void 0&&n(!!c),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NT()||wT()||rg()}}const fI=dI;var Xb="@firebase/auth",Zb="1.11.1";class mI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pI(r){yl(new yo("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;nt(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const b={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DT(r)},_=new K1(s,o,c,b);return Z1(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),yl(new yo("auth-internal",e=>{const n=Uh(e.getProvider("auth").getImmediate());return(s=>new mI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Na(Xb,Zb,gI(r)),Na(Xb,Zb,"esm2020")}const yI=300,_I=aT("authIdTokenMaxAge")||yI;let Jb=null;const bI=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>_I)return;const o=n?.token;Jb!==o&&(Jb=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $T(r=hT()){const e=eg(r,"auth");if(e.isInitialized())return e.getImmediate();const n=X1(r,{popupRedirectResolver:fI,persistence:[wR,dR,BT]}),s=aT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=bI(c.toString());lR(n,f,()=>f(n.currentUser)),oR(n,m=>f(m))}}const o=sT("auth");return o&&J1(n,`http://${o}`),n}function vI(){return document.getElementsByTagName("head")?.[0]??document}$1({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=dr("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",vI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pI("Browser");var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ma,QT;(function(){var r;function e(D,R){function N(){}N.prototype=R.prototype,D.F=R.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(B,L,U){for(var C=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)C[$t-2]=arguments[$t];return R.prototype[L].apply(B,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,N){N||(N=0);const B=Array(16);if(typeof R=="string")for(var L=0;L<16;++L)B[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;L<16;++L)B[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=D.g[0],N=D.g[1],L=D.g[2];let U=D.g[3],C;C=R+(U^N&(L^U))+B[0]+3614090360&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+B[1]+3905402710&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+B[2]+606105819&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+B[3]+3250441966&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+B[4]+4118548399&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+B[5]+1200080426&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+B[6]+2821735955&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+B[7]+4249261313&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+B[8]+1770035416&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+B[9]+2336552879&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+B[10]+4294925233&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+B[11]+2304563134&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+B[12]+1804603682&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+B[13]+4254626195&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+B[14]+2792965006&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+B[15]+1236535329&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(L^U&(N^L))+B[1]+4129170786&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+B[6]+3225465664&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+B[11]+643717713&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+B[0]+3921069994&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+B[5]+3593408605&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+B[10]+38016083&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+B[15]+3634488961&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+B[4]+3889429448&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+B[9]+568446438&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+B[14]+3275163606&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+B[3]+4107603335&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+B[8]+1163531501&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+B[13]+2850285829&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+B[2]+4243563512&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+B[7]+1735328473&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+B[12]+2368359562&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(N^L^U)+B[5]+4294588738&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+B[8]+2272392833&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+B[11]+1839030562&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+B[14]+4259657740&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+B[1]+2763975236&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+B[4]+1272893353&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+B[7]+4139469664&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+B[10]+3200236656&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+B[13]+681279174&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+B[0]+3936430074&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+B[3]+3572445317&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+B[6]+76029189&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+B[9]+3654602809&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+B[12]+3873151461&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+B[15]+530742520&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+B[2]+3299628645&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(L^(N|~U))+B[0]+4096336452&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+B[7]+1126891415&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+B[14]+2878612391&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+B[5]+4237533241&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+B[12]+1700485571&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+B[3]+2399980690&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+B[10]+4293915773&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+B[1]+2240044497&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+B[8]+1873313359&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+B[15]+4264355552&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+B[6]+2734768916&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+B[13]+1309151649&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+B[4]+4149444226&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+B[11]+3174756917&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+B[2]+718787259&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+B[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+U&4294967295}s.prototype.v=function(D,R){R===void 0&&(R=D.length);const N=R-this.blockSize,B=this.C;let L=this.h,U=0;for(;U<R;){if(L==0)for(;U<=N;)o(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<R;)if(B[L++]=D.charCodeAt(U++),L==this.blockSize){o(this,B),L=0;break}}else for(;U<R;)if(B[L++]=D[U++],L==this.blockSize){o(this,B),L=0;break}}this.h=L,this.o+=R},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,N=0;N<4;++N)for(let B=0;B<32;B+=8)D[R++]=this.g[N]>>>B&255;return D};function c(D,R){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=R(D)}function f(D,R){this.h=R;const N=[];let B=!0;for(let L=D.length-1;L>=0;L--){const U=D[L]|0;B&&U==R||(N[L]=U,B=!1)}this.g=N}var m={};function b(D){return-128<=D&&D<128?c(D,function(R){return new f([R|0],R<0?-1:0)}):new f([D|0],D<0?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return A;if(D<0)return he(_(-D));const R=[];let N=1;for(let B=0;D>=N;B++)R[B]=D/N|0,N*=4294967296;return new f(R,0)}function S(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return he(S(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=_(Math.pow(R,8));let B=A;for(let U=0;U<D.length;U+=8){var L=Math.min(8,D.length-U);const C=parseInt(D.substring(U,U+L),R);L<8?(L=_(Math.pow(R,L)),B=B.j(L).add(_(C))):(B=B.j(N),B=B.add(_(C)))}return B}var A=b(0),V=b(1),O=b(16777216);r=f.prototype,r.m=function(){if(de(this))return-he(this).m();let D=0,R=1;for(let N=0;N<this.g.length;N++){const B=this.i(N);D+=(B>=0?B:4294967296+B)*R,R*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(pe(this))return"0";if(de(this))return"-"+he(this).toString(D);const R=_(Math.pow(D,6));var N=this;let B="";for(;;){const L=ct(N,R).g;N=I(N,L.j(R));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=L,pe(N))return U+B;for(;U.length<6;)U="0"+U;B=U+B}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function pe(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function de(D){return D.h==-1}r.l=function(D){return D=I(this,D),de(D)?-1:pe(D)?0:1};function he(D){const R=D.g.length,N=[];for(let B=0;B<R;B++)N[B]=~D.g[B];return new f(N,~D.h).add(V)}r.abs=function(){return de(this)?he(this):this},r.add=function(D){const R=Math.max(this.g.length,D.g.length),N=[];let B=0;for(let L=0;L<=R;L++){let U=B+(this.i(L)&65535)+(D.i(L)&65535),C=(U>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);B=C>>>16,U&=65535,C&=65535,N[L]=C<<16|U}return new f(N,N[N.length-1]&-2147483648?-1:0)};function I(D,R){return D.add(he(R))}r.j=function(D){if(pe(this)||pe(D))return A;if(de(this))return de(D)?he(this).j(he(D)):he(he(this).j(D));if(de(D))return he(this.j(he(D)));if(this.l(O)<0&&D.l(O)<0)return _(this.m()*D.m());const R=this.g.length+D.g.length,N=[];for(var B=0;B<2*R;B++)N[B]=0;for(B=0;B<this.g.length;B++)for(let L=0;L<D.g.length;L++){const U=this.i(B)>>>16,C=this.i(B)&65535,$t=D.i(L)>>>16,wn=D.i(L)&65535;N[2*B+2*L]+=C*wn,Ae(N,2*B+2*L),N[2*B+2*L+1]+=U*wn,Ae(N,2*B+2*L+1),N[2*B+2*L+1]+=C*$t,Ae(N,2*B+2*L+1),N[2*B+2*L+2]+=U*$t,Ae(N,2*B+2*L+2)}for(D=0;D<R;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=R;D<2*R;D++)N[D]=0;return new f(N,0)};function Ae(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function xe(D,R){this.g=D,this.h=R}function ct(D,R){if(pe(R))throw Error("division by zero");if(pe(D))return new xe(A,A);if(de(D))return R=ct(he(D),R),new xe(he(R.g),he(R.h));if(de(R))return R=ct(D,he(R)),new xe(he(R.g),R.h);if(D.g.length>30){if(de(D)||de(R))throw Error("slowDivide_ only works with positive integers.");for(var N=V,B=R;B.l(D)<=0;)N=zt(N),B=zt(B);var L=qe(N,1),U=qe(B,1);for(B=qe(B,2),N=qe(N,2);!pe(B);){var C=U.add(B);C.l(D)<=0&&(L=L.add(N),U=C),B=qe(B,1),N=qe(N,1)}return R=I(D,L.j(R)),new xe(L,R)}for(L=A;D.l(R)>=0;){for(N=Math.max(1,Math.floor(D.m()/R.m())),B=Math.ceil(Math.log(N)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),U=_(N),C=U.j(R);de(C)||C.l(D)>0;)N-=B,U=_(N),C=U.j(R);pe(U)&&(U=V),L=L.add(U),D=I(D,C)}return new xe(L,D)}r.B=function(D){return ct(this,D).h},r.and=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let B=0;B<R;B++)N[B]=this.i(B)&D.i(B);return new f(N,this.h&D.h)},r.or=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let B=0;B<R;B++)N[B]=this.i(B)|D.i(B);return new f(N,this.h|D.h)},r.xor=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let B=0;B<R;B++)N[B]=this.i(B)^D.i(B);return new f(N,this.h^D.h)};function zt(D){const R=D.g.length+1,N=[];for(let B=0;B<R;B++)N[B]=D.i(B)<<1|D.i(B-1)>>>31;return new f(N,D.h)}function qe(D,R){const N=R>>5;R%=32;const B=D.g.length-N,L=[];for(let U=0;U<B;U++)L[U]=R>0?D.i(U+N)>>>R|D.i(U+N+1)<<32-R:D.i(U+N);return new f(L,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,QT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=S,Ma=f}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var WT,bc,YT,dh,Nm,XT,ZT,JT;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(u,g){if(g)e:{var v=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var F=u[w];if(!(F in v))break e;v=v[F]}u=u[u.length-1],w=v[u],g=g(w),g!=w&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var v=[],w;for(w in g)Object.prototype.hasOwnProperty.call(g,w)&&v.push([w,g[w]]);return v}});var c=c||{},f=this||self;function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function b(u,g,v){return u.call.apply(u.bind,arguments)}function _(u,g,v){return _=b,_.apply(null,arguments)}function S(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function A(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(w,F,Q){for(var be=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)be[Le-2]=arguments[Le];return g.prototype[F].apply(w,be)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const g=u.length;if(g>0){const v=Array(g);for(let w=0;w<g;w++)v[w]=u[w];return v}return[]}function pe(u,g){for(let w=1;w<arguments.length;w++){const F=arguments[w];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=u.length||0;const Q=F.length||0;u.length=v+Q;for(let be=0;be<Q;be++)u[v+be]=F[be]}else u.push(F)}}class de{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function he(u){f.setTimeout(()=>{throw u},0)}function I(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ae{constructor(){this.h=this.g=null}add(g,v){const w=xe.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var xe=new de(()=>new ct,u=>u.reset());class ct{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let zt,qe=!1,D=new Ae,R=()=>{const u=Promise.resolve(void 0);zt=()=>{u.then(N)}};function N(){for(var u;u=I();){try{u.h.call(u.g)}catch(v){he(v)}var g=xe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}qe=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function $t(u,g){L.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}A($t,L),$t.prototype.init=function(u,g){const v=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&$t.Z.h.call(this)},$t.prototype.h=function(){$t.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var wn="closure_listenable_"+(Math.random()*1e6|0),te=0;function ve(u,g,v,w,F){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=F,this.key=++te,this.da=this.fa=!1}function Ve(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yt(u,g,v){for(const w in u)g.call(v,u[w],w,u)}function Ut(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function j(u){const g={};for(const v in u)g[v]=u[v];return g}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(u,g){let v,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(v in w)u[v]=w[v];for(let Q=0;Q<re.length;Q++)v=re[Q],Object.prototype.hasOwnProperty.call(w,v)&&(u[v]=w[v])}}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,g,v,w,F){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const be=it(u,g,w,F);return be>-1?(g=u[be],v||(g.fa=!1)):(g=new ve(g,this.src,Q,!!w,F),g.fa=v,u.push(g)),g};function je(u,g){const v=g.type;if(v in u.g){var w=u.g[v],F=Array.prototype.indexOf.call(w,g,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(w,F,1),Q&&(Ve(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function it(u,g,v,w){for(let F=0;F<u.length;++F){const Q=u[F];if(!Q.da&&Q.listener==g&&Q.capture==!!v&&Q.ha==w)return F}return-1}var ut="closure_lm_"+(Math.random()*1e6|0),un={};function We(u,g,v,w,F){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)We(u,g[Q],v,w,F);return null}return v=br(v),u&&u[wn]?u.J(g,v,m(w)?!!w.capture:!1,F):hn(u,g,v,!1,w,F)}function hn(u,g,v,w,F,Q){if(!g)throw Error("Invalid event type");const be=m(F)?!!F.capture:!!F;let Le=Ki(u);if(Le||(u[ut]=Le=new Se(u)),v=Le.add(g,v,w,be,Q),v.proxy)return v;if(w=ss(),v.proxy=w,w.src=u,w.listener=v,u.addEventListener)U||(F=be),F===void 0&&(F=!1),u.addEventListener(g.toString(),w,F);else if(u.attachEvent)u.attachEvent(jn(g.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ss(){function u(v){return g.call(u.src,u.listener,v)}const g=qs;return u}function Js(u,g,v,w,F){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)Js(u,g[Q],v,w,F);else w=m(w)?!!w.capture:!!w,v=br(v),u&&u[wn]?(u=u.i,Q=String(g).toString(),Q in u.g&&(g=u.g[Q],v=it(g,v,w,F),v>-1&&(Ve(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[Q],u.h--)))):u&&(u=Ki(u))&&(g=u.g[g.toString()],u=-1,g&&(u=it(g,v,w,F)),(v=u>-1?g[u]:null)&&Yn(v))}function Yn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[wn])je(g.i,u);else{var v=u.type,w=u.proxy;g.removeEventListener?g.removeEventListener(v,w,u.capture):g.detachEvent?g.detachEvent(jn(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=Ki(g))?(je(v,u),v.h==0&&(v.src=null,g[ut]=null)):Ve(u)}}}function jn(u){return u in un?un[u]:un[u]="on"+u}function qs(u,g){if(u.da)u=!0;else{g=new $t(g,this);const v=u.listener,w=u.ha||u.src;u.fa&&Yn(u),u=v.call(w,g)}return u}function Ki(u){return u=u[ut],u instanceof Se?u:null}var Oi="__closure_events_fn_"+(Math.random()*1e9>>>0);function br(u){return typeof u=="function"?u:(u[Oi]||(u[Oi]=function(g){return u.handleEvent(g)}),u[Oi])}function dn(){B.call(this),this.i=new Se(this),this.M=this,this.G=null}A(dn,B),dn.prototype[wn]=!0,dn.prototype.removeEventListener=function(u,g,v,w){Js(this,u,g,v,w)};function Yt(u,g){var v,w=u.G;if(w)for(v=[];w;w=w.G)v.push(w);if(u=u.M,w=g.type||g,typeof g=="string")g=new L(g,u);else if(g instanceof L)g.target=g.target||u;else{var F=g;g=new L(w,u),ye(g,F)}F=!0;let Q,be;if(v)for(be=v.length-1;be>=0;be--)Q=g.g=v[be],F=As(Q,w,!0,g)&&F;if(Q=g.g=u,F=As(Q,w,!0,g)&&F,F=As(Q,w,!1,g)&&F,v)for(be=0;be<v.length;be++)Q=g.g=v[be],F=As(Q,w,!1,g)&&F}dn.prototype.N=function(){if(dn.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let w=0;w<v.length;w++)Ve(v[w]);delete u.g[g],u.h--}}this.G=null},dn.prototype.J=function(u,g,v,w){return this.i.add(String(u),g,!1,v,w)},dn.prototype.K=function(u,g,v,w){return this.i.add(String(u),g,!0,v,w)};function As(u,g,v,w){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let Q=0;Q<g.length;++Q){const be=g[Q];if(be&&!be.da&&be.capture==v){const Le=be.listener,Ft=be.ha||be.src;be.fa&&je(u.i,be),F=Le.call(Ft,w)!==!1&&F}}return F&&!w.defaultPrevented}function rs(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function $i(u){u.g=rs(()=>{u.g=null,u.i&&(u.i=!1,$i(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class vn extends B{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:$i(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(u){B.call(this),this.h=u,this.g={}}A(ci,B);var Qi=[];function Rs(u){yt(u.g,function(g,v){this.g.hasOwnProperty(v)&&Yn(g)},u),u.g={}}ci.prototype.N=function(){ci.Z.N.call(this),Rs(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var as=f.JSON.stringify,os=f.JSON.parse,er=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function ls(){}function vr(){}var ui={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function An(){L.call(this,"d")}A(An,L);function hi(){L.call(this,"c")}A(hi,L);var on={},Is=null;function cs(){return Is=Is||new dn}on.Ia="serverreachability";function Pn(u){L.call(this,on.Ia,u)}A(Pn,L);function di(u){const g=cs();Yt(g,new Pn(g))}on.STAT_EVENT="statevent";function us(u,g){L.call(this,on.STAT_EVENT,u),this.stat=g}A(us,L);function Zt(u){const g=cs();Yt(g,new us(g,u))}on.Ja="timingevent";function ni(u,g){L.call(this,on.Ja,u),this.size=g}A(ni,L);function Mn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function fn(){this.g=!0}fn.prototype.ua=function(){this.g=!1};function Tr(u,g,v,w,F,Q){u.info(function(){if(u.g)if(Q){var be="",Le=Q.split("&");for(let vt=0;vt<Le.length;vt++){var Ft=Le[vt].split("=");if(Ft.length>1){const Ke=Ft[0];Ft=Ft[1];const Bt=Ke.split("_");be=Bt.length>=2&&Bt[1]=="type"?be+(Ke+"="+Ft+"&"):be+(Ke+"=redacted&")}}}else be=null;else be=Q;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+g+`
`+v+`
`+be})}function tr(u,g,v,w,F,Q,be){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+g+`
`+v+`
`+Q+" "+be})}function Li(u,g,v,w){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Fa(u,v)+(w?" "+w:"")})}function Cs(u,g){u.info(function(){return"TIMEOUT: "+g})}fn.prototype.info=function(){};function Fa(u,g){if(!u.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var v=Q[u];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var F=w[0];if(F!="noop"&&F!="stop"&&F!="close")for(let be=1;be<w.length;be++)w[be]=""}}}}return as(Q)}catch{return g}}var Mt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vi;function fi(){}A(fi,ls),fi.prototype.g=function(){return new XMLHttpRequest},Vi=new fi;function kn(u){return encodeURIComponent(String(u))}function nr(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function xn(u,g,v,w){this.j=u,this.i=g,this.l=v,this.S=w||1,this.V=new ci(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ji}function ji(){this.i=null,this.g="",this.h=!1}var P={},ne={};function _e(u,g,v){u.M=1,u.A=ir(ln(g)),u.u=v,u.R=!0,we(u,null)}function we(u,g){u.F=Date.now(),mi(u),u.B=ln(u.A);var v=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),me(v.i,"t",w),u.C=0,v=u.j.L,u.h=new ji,u.g=xs(u.j,v?g:null,!u.u),u.P>0&&(u.O=new vn(_(u.Y,u,u.g),u.P)),g=u.V,v=u.g,w=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Qi[0]=F.toString()),F=Qi);for(let Q=0;Q<F.length;Q++){const be=We(v,F[Q],w||g.handleEvent,!1,g.h||g);if(!be)break;g.g[be.key]=be}g=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),di(),Tr(u.i,u.v,u.B,u.l,u.S,u.u)}xn.prototype.ba=function(u){u=u.target;const g=this.O;g&&tt(u)==3?g.j():this.Y(u)},xn.prototype.Y=function(u){try{if(u==this.g)e:{const Le=tt(this.g),Ft=this.g.ya(),vt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||Xe(this.g)))){this.K||Le!=4||Ft==7||(Ft==8||vt<=0?di(3):di(2)),Pi(this);var g=this.g.ca();this.X=g;var v=He(this);if(this.o=g==200,tr(this.i,this.v,this.B,this.l,this.S,Le,g),this.o){if(this.U&&!this.L){t:{if(this.g){var w,F=this.g;if((w=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(w)){var Q=w;break t}}Q=null}if(u=Q)Li(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ks(this,u);else{this.o=!1,this.m=3,Zt(12),zi(this),Wi(this);break e}}if(this.R){u=!0;let Ke;for(;!this.K&&this.C<v.length;)if(Ke=tn(this,v),Ke==ne){Le==4&&(this.m=4,Zt(14),u=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==P){this.m=4,Zt(15),Li(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Li(this.i,this.l,Ke,null),ks(this,Ke);if(_t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||v.length!=0||this.h.h||(this.m=1,Zt(16),u=!1),this.o=this.o&&u,!u)Li(this.i,this.l,v,"[Invalid Chunked Response]"),zi(this),Wi(this);else if(v.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ft(be),be.P=!0,Zt(11))}}else Li(this.i,this.l,v,null),ks(this,v);Le==4&&zi(this),this.o&&!this.K&&(Le==4?ii(this.j,this):(this.o=!1,mi(this)))}else Xt(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Zt(12)):(this.m=0,Zt(13)),zi(this),Wi(this)}}}catch{}finally{}};function He(u){if(!_t(u))return u.g.la();const g=Xe(u.g);if(g==="")return"";let v="";const w=g.length,F=tt(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return zi(u),Wi(u),"";u.h.i=new f.TextDecoder}for(let Q=0;Q<w;Q++)u.h.h=!0,v+=u.h.i.decode(g[Q],{stream:!(F&&Q==w-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function _t(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function tn(u,g){var v=u.C,w=g.indexOf(`
`,v);return w==-1?ne:(v=Number(g.substring(v,w)),isNaN(v)?P:(w+=1,w+v>g.length?ne:(g=g.slice(w,w+v),u.C=w+v,g)))}xn.prototype.cancel=function(){this.K=!0,zi(this)};function mi(u){u.T=Date.now()+u.H,Hs(u,u.H)}function Hs(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Mn(_(u.aa,u),g)}function Pi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}xn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Cs(this.i,this.B),this.M!=2&&(di(),Zt(17)),zi(this),this.m=2,Wi(this)):Hs(this,this.T-u)};function Wi(u){u.j.I==0||u.K||ii(u.j,u)}function zi(u){Pi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Rs(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function ks(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||Ns(v.h,u))){if(!u.L&&Ns(v.h,u)&&v.I==3){try{var w=v.Ba.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Zn(v),Qt(v);else break e;Rt(v),Zt(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Mn(_(v.Va,v),6e3));hs(v.h)<=1&&v.ta&&(v.ta=void 0)}else Sn(v,11)}else if((u.L||v.g==u)&&Zn(v),!C(g))for(F=v.Ba.g.parse(g),g=0;g<F.length;g++){let vt=F[g];const Ke=vt[0];if(!(Ke<=v.K))if(v.K=Ke,vt=vt[1],v.I==2)if(vt[0]=="c"){v.M=vt[1],v.ba=vt[2];const Bt=vt[3];Bt!=null&&(v.ka=Bt,v.j.info("VER="+v.ka));const Bn=vt[4];Bn!=null&&(v.za=Bn,v.j.info("SVER="+v.za));const Ii=vt[5];Ii!=null&&typeof Ii=="number"&&Ii>0&&(w=1.5*Ii,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Fs=u.g;if(Fs){const Xa=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var Q=w.h;Q.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Zr(Q,Q.h),Q.h=null))}if(w.G){const Io=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(w.wa=Io,qt(w.J,w.G,Io))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var be=u;if(w.na=Yi(w,w.L?w.ba:null,w.W),be.L){Ka(w.h,be);var Le=be,Ft=w.O;Ft&&(Le.H=Ft),Le.D&&(Pi(Le),mi(Le)),w.g=be}else gn(w);v.i.length>0&&ge(v)}else vt[0]!="stop"&&vt[0]!="close"||Sn(v,7);else v.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Sn(v,7):Ht(v):vt[0]!="noop"&&v.l&&v.l.qa(vt),v.A=0)}}di(4)}catch{}}var Rn=class{constructor(u,g){this.g=u,this.map=g}};function Xr(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ga(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function hs(u){return u.h?1:u.g?u.g.size:0}function Ns(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Zr(u,g){u.g?u.g.add(g):u.h=g}function Ka(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Xr.prototype.cancel=function(){if(this.i=$a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $a(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return O(u.i)}var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sr(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const w=u[v].indexOf("=");let F,Q=null;w>=0?(F=u[v].substring(0,w),Q=u[v].substring(w+1)):F=u[v],g(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Tn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Tn?(this.l=u.l,mn(this,u.j),this.o=u.o,this.g=u.g,Ds(this,u.u),this.h=u.h,Qa(this,W(u.i)),this.m=u.m):u&&(g=String(u).match(Jr))?(this.l=!1,mn(this,g[1]||"",!0),this.o=Ms(g[2]||""),this.g=Ms(g[3]||"",!0),Ds(this,g[4]),this.h=Ms(g[5]||"",!0),Qa(this,g[6]||"",!0),this.m=Ms(g[7]||"")):(this.l=!1,this.i=new rr(null,this.l))}Tn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Er(g,wr,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Er(g,wr,!0),"@"),u.push(kn(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Er(v,v.charAt(0)=="/"?Ya:Wa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Er(v,Ro)),u.join("")},Tn.prototype.resolve=function(u){const g=ln(this);let v=!!u.j;v?mn(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var w=u.h;if(v)Ds(g,u.u);else if(v=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var F=g.h.lastIndexOf("/");F!=-1&&(w=g.h.slice(0,F+1)+w)}if(F=w,F==".."||F==".")w="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){w=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let be=0;be<F.length;){const Le=F[be++];Le=="."?w&&be==F.length&&Q.push(""):Le==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&be==F.length&&Q.push("")):(Q.push(Le),w=!0)}w=Q.join("/")}else w=F}return v?g.h=w:v=u.i.toString()!=="",v?Qa(g,W(u.i)):v=!!u.m,v&&(g.m=u.m),g};function ln(u){return new Tn(u)}function mn(u,g,v){u.j=v?Ms(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Ds(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Qa(u,g,v){g instanceof rr?(u.i=g,se(u.i,u.l)):(v||(g=Er(g,sr)),u.i=new rr(g,u.l))}function qt(u,g,v){u.i.set(g,v)}function ir(u){return qt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ms(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Er(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,gi),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gi(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var wr=/[#\/\?@]/g,Wa=/[#\?:]/g,Ya=/[#\?]/g,sr=/[#\?@]/g,Ro=/#/g;function rr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Ri(u){u.g||(u.g=new Map,u.h=0,u.i&&Sr(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=rr.prototype,r.add=function(u,g){Ri(this),this.i=null,u=E(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function M(u,g){Ri(u),g=E(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function q(u,g){return Ri(u),g=E(u,g),u.g.has(g)}r.forEach=function(u,g){Ri(this),this.g.forEach(function(v,w){v.forEach(function(F){u.call(g,F,w,this)},this)},this)};function X(u,g){Ri(u);let v=[];if(typeof g=="string")q(u,g)&&(v=v.concat(u.g.get(E(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}r.set=function(u,g){return Ri(this),this.i=null,u=E(this,u),q(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=X(this,u),u.length>0?String(u[0]):g):g};function me(u,g,v){M(u,g),v.length>0&&(u.i=null,u.g.set(E(u,g),O(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let w=0;w<g.length;w++){var v=g[w];const F=kn(v);v=X(this,v);for(let Q=0;Q<v.length;Q++){let be=F;v[Q]!==""&&(be+="="+kn(v[Q])),u.push(be)}}return this.i=u.join("&")};function W(u){const g=new rr;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function E(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function se(u,g){g&&!u.j&&(Ri(u),u.i=null,u.g.forEach(function(v,w){const F=w.toLowerCase();w!=F&&(M(this,w),me(this,F,v))},u)),u.j=g}function Y(u,g){const v=new fn;if(f.Image){const w=new Image;w.onload=S(ke,v,"TestLoadImage: loaded",!0,g,w),w.onerror=S(ke,v,"TestLoadImage: error",!1,g,w),w.onabort=S(ke,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=S(ke,v,"TestLoadImage: timeout",!1,g,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else g(!1)}function Ie(u,g){const v=new fn,w=new AbortController,F=setTimeout(()=>{w.abort(),ke(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:w.signal}).then(Q=>{clearTimeout(F),Q.ok?ke(v,"TestPingServer: ok",!0,g):ke(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),ke(v,"TestPingServer: error",!1,g)})}function ke(u,g,v,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(v)}catch{}}function Ce(){this.g=new er}function Ee(u){this.i=u.Sb||null,this.h=u.ab||!1}A(Ee,ls),Ee.prototype.g=function(){return new De(this.i,this.h)};function De(u,g){dn.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(De,dn),r=De.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,ze(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pe(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ze(this)),this.g&&(this.readyState=3,ze(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ht(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ht(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Pe(this):ze(this),this.readyState==3&&ht(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Pe(this))},r.Na=function(u){this.g&&(this.response=u,Pe(this))},r.ga=function(){this.g&&Pe(this)};function Pe(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ze(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function ze(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(De.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function At(u){let g="";return yt(u,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function xt(u,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=At(v),typeof u=="string"?v!=null&&kn(v):qt(u,g,v))}function Ye(u){dn.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Ye,dn);var rt=/^https?$/i,fe=["POST","PUT"];r=Ye.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vi.g(),this.g.onreadystatechange=V(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){pn(this,Q);return}if(u=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)v.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())v.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(fe,g,void 0)>=0)||w||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,be]of v)this.g.setRequestHeader(Q,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){pn(this,Q)}};function pn(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,pt(u),Be(u)}function pt(u){u.A||(u.A=!0,Yt(u,"complete"),Yt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Yt(this,"complete"),Yt(this,"abort"),Be(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Be(this,!0)),Ye.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?bt(this):this.Xa())},r.Xa=function(){bt(this)};function bt(u){if(u.h&&typeof c<"u"){if(u.v&&tt(u)==4)setTimeout(u.Ca.bind(u),0);else if(Yt(u,"readystatechange"),tt(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=Q===0){let be=String(u.D).match(Jr)[1]||null;!be&&f.self&&f.self.location&&(be=f.self.location.protocol.slice(0,-1)),w=!rt.test(be?be.toLowerCase():"")}v=w}if(v)Yt(u,"complete"),Yt(u,"success");else{u.o=6;try{var F=tt(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",pt(u)}}finally{Be(u)}}}}function Be(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Yt(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function tt(u){return u.g?u.g.readyState:0}r.ca=function(){try{return tt(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),os(g)}};function Xe(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Xt(u){const g={};u=(u.g&&tt(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(C(u[w]))continue;var v=nr(u[w]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=g[F]||[];g[F]=Q,Q.push(v)}Ut(g,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vt(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function at(u){this.za=0,this.i=[],this.j=new fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,u),this.Za=Vt("retryDelaySeedMs",1e4,u),this.Ta=Vt("forwardChannelMaxRetries",2,u),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Xr(u&&u.concurrentRequestLimit),this.Ba=new Ce,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=at.prototype,r.ka=8,r.I=1,r.connect=function(u,g,v,w){Zt(0),this.W=u,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=Yi(this,null,this.W),ge(this)};function Ht(u){if(Tt(u),u.I==3){var g=u.V++,v=ln(u.J);if(qt(v,"SID",u.M),qt(v,"RID",g),qt(v,"TYPE","terminate"),Me(u,v),g=new xn(u,u.j,g),g.M=2,g.A=ir(ln(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=xs(g.j,null),g.g.ea(g.A)),g.F=Date.now(),mi(g)}Bi(u)}function Qt(u){u.g&&(ft(u),u.g.cancel(),u.g=null)}function Tt(u){Qt(u),u.v&&(f.clearTimeout(u.v),u.v=null),Zn(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function ge(u){if(!Ga(u.h)&&!u.m){u.m=!0;var g=u.Ea;zt||R(),qe||(zt(),qe=!0),D.add(g,u),u.D=0}}function Ge(u,g){return hs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Mn(_(u.Ea,u,g),si(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new xn(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=j(Q),ye(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=dt(this,F,g),v=ln(this.J),qt(v,"RID",u),qt(v,"CVER",22),this.G&&qt(v,"X-HTTP-Session-Id",this.G),Me(this,v),Q&&(this.R?g="headers="+kn(At(Q))+"&"+g:this.u&&xt(v,this.u,Q)),Zr(this.h,F),this.Ra&&qt(v,"TYPE","init"),this.S?(qt(v,"$req",g),qt(v,"SID","null"),F.U=!0,_e(F,v,null)):_e(F,v,g),this.I=2}}else this.I==3&&(u?Fe(this,u):this.i.length==0||Ga(this.h)||Fe(this))};function Fe(u,g){var v;g?v=g.l:v=u.V++;const w=ln(u.J);qt(w,"SID",u.M),qt(w,"RID",v),qt(w,"AID",u.K),Me(u,w),u.u&&u.o&&xt(w,u.u,u.o),v=new xn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=dt(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Zr(u.h,v),_e(v,w,g)}function Me(u,g){u.H&&yt(u.H,function(v,w){qt(g,w,v)}),u.l&&yt({},function(v,w){qt(g,w,v)})}function dt(u,g,v){v=Math.min(u.i.length,v);const w=u.l?_(u.l.Ka,u.l,u):null;e:{var F=u.i;let Le=-1;for(;;){const Ft=["count="+v];Le==-1?v>0?(Le=F[0].g,Ft.push("ofs="+Le)):Le=0:Ft.push("ofs="+Le);let vt=!0;for(let Ke=0;Ke<v;Ke++){var Q=F[Ke].g;const Bt=F[Ke].map;if(Q-=Le,Q<0)Le=Math.max(0,F[Ke].g-100),vt=!1;else try{Q="req"+Q+"_"||"";try{var be=Bt instanceof Map?Bt:Object.entries(Bt);for(const[Bn,Ii]of be){let Fs=Ii;m(Ii)&&(Fs=as(Ii)),Ft.push(Q+Bn+"="+encodeURIComponent(Fs))}}catch(Bn){throw Ft.push(Q+"type="+encodeURIComponent("_badmap")),Bn}}catch{w&&w(Bt)}}if(vt){be=Ft.join("&");break e}}be=void 0}return u=u.i.splice(0,v),g.G=u,be}function gn(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;zt||R(),qe||(zt(),qe=!0),D.add(g,u),u.A=0}}function Rt(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Mn(_(u.Da,u),si(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Xn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Mn(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Zt(10),Qt(this),Xn(this))};function ft(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Xn(u){u.g=new xn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=ln(u.na);qt(g,"RID","rpc"),qt(g,"SID",u.M),qt(g,"AID",u.K),qt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&qt(g,"TO",u.ia),qt(g,"TYPE","xmlhttp"),Me(u,g),u.u&&u.o&&xt(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=ir(ln(g)),v.u=null,v.R=!0,we(v,u)}r.Va=function(){this.C!=null&&(this.C=null,Qt(this),Rt(this),Zt(19))};function Zn(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function ii(u,g){var v=null;if(u.g==g){Zn(u),ft(u),u.g=null;var w=2}else if(Ns(u.h,g))v=g.G,Ka(u.h,g),w=1;else return;if(u.I!=0){if(g.o)if(w==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;w=cs(),Yt(w,new ni(w,v)),ge(u)}else gn(u);else if(F=g.m,F==3||F==0&&g.X>0||!(w==1&&Ge(u,g)||w==2&&Rt(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),F){case 1:Sn(u,5);break;case 4:Sn(u,10);break;case 3:Sn(u,6);break;default:Sn(u,2)}}}function si(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function Sn(u,g){if(u.j.info("Error code "+g),g==2){var v=_(u.bb,u),w=u.Ua;const F=!w;w=new Tn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||mn(w,"https"),ir(w),F?Y(w.toString(),v):Ie(w.toString(),v)}else Zt(2);u.I=0,u.l&&u.l.pa(g),Bi(u),Tt(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function Bi(u){if(u.I=0,u.ja=[],u.l){const g=$a(u.h);(g.length!=0||u.i.length!=0)&&(pe(u.ja,g),pe(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Yi(u,g,v){var w=v instanceof Tn?ln(v):new Tn(v);if(w.g!="")g&&(w.g=g+"."+w.g),Ds(w,w.u);else{var F=f.location;w=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const Q=new Tn(null);w&&mn(Q,w),g&&(Q.g=g),F&&Ds(Q,F),v&&(Q.h=v),w=Q}return v=u.G,g=u.wa,v&&g&&qt(w,v,g),qt(w,"VER",u.ka),Me(u,w),w}function xs(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Ye(new Ee({ab:v})):new Ye(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ar(){}r=ar.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ui(){}Ui.prototype.g=function(u,g){return new Ot(u,g)};function Ot(u,g){dn.call(this),this.g=new at(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new zn(this)}A(Ot,dn),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){Ht(this.g)},Ot.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=as(u),u=v);g.i.push(new Rn(g.Ya++,u)),g.I==3&&ge(g)},Ot.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,Ot.Z.N.call(this)};function qi(u){An.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}A(qi,An);function pi(){hi.call(this),this.status=1}A(pi,hi);function zn(u){this.g=u}A(zn,ar),zn.prototype.ra=function(){Yt(this.g,"a")},zn.prototype.qa=function(u){Yt(this.g,new qi(u))},zn.prototype.pa=function(u){Yt(this.g,new pi)},zn.prototype.oa=function(){Yt(this.g,"b")},Ui.prototype.createWebChannel=Ui.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,JT=function(){return new Ui},ZT=function(){return cs()},XT=on,Nm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,dh=Mt,wt.COMPLETE="complete",YT=wt,vr.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",dn.prototype.listen=dn.prototype.J,bc=vr,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,WT=Ye}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const tv="@firebase/firestore",nv="4.9.2";class Di{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Di.UNAUTHENTICATED=new Di(null),Di.GOOGLE_CREDENTIALS=new Di("google-credentials-uid"),Di.FIRST_PARTY=new Di("first-party-uid"),Di.MOCK_USER=new Di("mock-user");let kl="12.3.0";const bo=new Zm("@firebase/firestore");function rl(){return bo.logLevel}function Re(r,...e){if(bo.logLevel<=kt.DEBUG){const n=e.map(cg);bo.debug(`Firestore (${kl}): ${r}`,...n)}}function $r(r,...e){if(bo.logLevel<=kt.ERROR){const n=e.map(cg);bo.error(`Firestore (${kl}): ${r}`,...n)}}function _l(r,...e){if(bo.logLevel<=kt.WARN){const n=e.map(cg);bo.warn(`Firestore (${kl}): ${r}`,...n)}}function cg(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ze(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,eS(r,s,n)}function eS(r,e,n){let s=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw $r(s),new Error(s)}function Pt(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||eS(e,o,s)}function st(r,e){return r}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class tS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Di.UNAUTHENTICATED)))}shutdown(){}}class SI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=Di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pt(this.o===void 0,42304);let s=this.i;const o=b=>this.i!==s?(s=this.i,n(b)):Promise.resolve();let c=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new mr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const b=c;e.enqueueRetryable((async()=>{await b.promise,await o(this.currentUser)}))},m=b=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((b=>m(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new mr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Pt(typeof s.accessToken=="string",31837,{l:s}),new tS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new Di(e)}}class wI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Di.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new wI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Di.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ys(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pt(this.o===void 0,3512);const s=c=>{c.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function II(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=II(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Nt(r,e){return r<e?-1:r>e?1:0}function Dm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return pm(o)===pm(c)?Nt(o,c):pm(o)?1:-1}return Nt(r.length,e.length)}const CI=55296,kI=57343;function pm(r){const e=r.charCodeAt(0);return e>=CI&&e<=kI}function bl(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const sv="__name__";class hr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ze(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return hr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=hr.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Nt(e.length,n.length)}static compareSegments(e,n){const s=hr.isNumericId(e),o=hr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?hr.extractNumericId(e).compare(hr.extractNumericId(n)):Dm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ma.fromString(e.substring(4,e.length-2))}}class an extends hr{construct(e,n,s){return new an(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new an(n)}static emptyPath(){return new an([])}}const NI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wi extends hr{construct(e,n,s){return new wi(e,n,s)}static isValidIdentifier(e){return NI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sv}static keyField(){return new wi([sv])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new Te(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Te(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[o+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new Te(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(c(),o++)}if(c(),f)throw new Te(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wi(n)}static emptyPath(){return new wi([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(an.fromString(e))}static fromName(e){return new $e(an.fromString(e).popFirst(5))}static empty(){return new $e(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&an.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return an.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new an(e.slice()))}}function nS(r,e,n){if(!n)throw new Te(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function DI(r,e,n,s){if(e===!0&&s===!0)throw new Te(ae.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function rv(r){if(!$e.isDocumentKey(r))throw new Te(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function av(r){if($e.isDocumentKey(r))throw new Te(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function iS(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ze(12329,{type:typeof r})}function is(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Te(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fh(r);throw new Te(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function Wn(r,e){const n={typeString:r};return e&&(n.value=e),n}function Hc(r,e){if(!iS(r))throw new Te(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new Te(ae.INVALID_ARGUMENT,n);return!0}const ov=-62135596800,lv=1e6;class bn{static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*lv);return new bn(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ov)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lv}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,bn._jsonSchema))return new bn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ov;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bn._jsonSchemaVersion="firestore/timestamp/1.0",bn._jsonSchema={type:Wn("string",bn._jsonSchemaVersion),seconds:Wn("number"),nanoseconds:Wn("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new bn(0,0))}static max(){return new et(new bn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mc=-1;function MI(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=et.fromTimestamp(s===1e9?new bn(n+1,0):new bn(n,s));return new Va(o,$e.empty(),e)}function xI(r){return new Va(r.readTime,r.key,Mc)}class Va{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Va(et.min(),$e.empty(),Mc)}static max(){return new Va(et.max(),$e.empty(),Mc)}}function OI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(r.documentKey,e.documentKey),n!==0?n:Nt(r.largestBatchId,e.largestBatchId))}const LI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Nl(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==LI)throw r;Re("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,s)=>{n(e)}))}static reject(e){return new ue(((n,s)=>{s(e)}))}static waitFor(e){return new ue(((n,s)=>{let o=0,c=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++c,f&&c===o&&n()}),(b=>s(b)))})),f=!0,c===o&&n()}))}static or(e){let n=ue.resolve(!1);for(const s of e)n=n.next((o=>o?ue.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new ue(((s,o)=>{const c=e.length,f=new Array(c);let m=0;for(let b=0;b<c;b++){const _=b;n(e[_]).next((S=>{f[_]=S,++m,m===c&&s(f)}),(S=>o(S)))}}))}static doWhile(e,n){return new ue(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function jI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dl(r){return r.name==="IndexedDbTransactionError"}class Gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gh.ce=-1;const hg=-1;function Fc(r){return r==null}function Rh(r){return r===0&&1/r==-1/0}function PI(r){return typeof r=="number"&&Number.isInteger(r)&&!Rh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const sS="";function zI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=cv(e)),e=BI(r.get(n),e);return cv(e)}function BI(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case sS:n+="";break;default:n+=c}}return n}function cv(r){return r+sS+""}function uv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function qa(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function rS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Cn{constructor(e,n){this.comparator=e,this.root=n||Ei.EMPTY}insert(e,n){return new Cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(e){return new Cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ei{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??Ei.RED,this.left=o??Ei.EMPTY,this.right=c??Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new Ei(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ei.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1;Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new Ei(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ei{constructor(e){this.comparator=e,this.data=new Cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ei)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ei(this.comparator);return n.data=e,n}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Es{constructor(e){this.fields=e,e.sort(wi.comparator)}static empty(){return new Es([])}unionWith(e){let n=new ei(wi.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Es(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class aS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ai{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new aS("Invalid base64 string: "+c):c}})(e);return new Ai(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c})(e);return new Ai(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ai.EMPTY_BYTE_STRING=new Ai("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(r){if(Pt(!!r,39018),typeof r=="string"){let e=0;const n=UI.exec(r);if(Pt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Vn(r.seconds),nanos:Vn(r.nanos)}}function Vn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Pa(r){return typeof r=="string"?Ai.fromBase64String(r):Ai.fromUint8Array(r)}const oS="server_timestamp",lS="__type__",cS="__previous_value__",uS="__local_write_time__";function dg(r){return(r?.mapValue?.fields||{})[lS]?.stringValue===oS}function Kh(r){const e=r.mapValue.fields[cS];return dg(e)?Kh(e):e}function xc(r){const e=ja(r.mapValue.fields[uS].timestampValue);return new bn(e.seconds,e.nanos)}class qI{constructor(e,n,s,o,c,f,m,b,_,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=b,this.useFetchStreams=_,this.isUsingEmulator=S}}const Ih="(default)";class Oc{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new Oc("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}const hS="__type__",HI="__max__",rh={mapValue:{}},dS="__vector__",Ch="value";function za(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?dg(r)?4:GI(r)?9007199254740991:FI(r)?10:11:Ze(28295,{value:r})}function _r(r,e){if(r===e)return!0;const n=za(r);if(n!==za(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return xc(r).isEqual(xc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=ja(o.timestampValue),m=ja(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Pa(o.bytesValue).isEqual(Pa(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Vn(o.geoPointValue.latitude)===Vn(c.geoPointValue.latitude)&&Vn(o.geoPointValue.longitude)===Vn(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Vn(o.integerValue)===Vn(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Vn(o.doubleValue),m=Vn(c.doubleValue);return f===m?Rh(f)===Rh(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return bl(r.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return(function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(uv(f)!==uv(m))return!1;for(const b in f)if(f.hasOwnProperty(b)&&(m[b]===void 0||!_r(f[b],m[b])))return!1;return!0})(r,e);default:return Ze(52216,{left:r})}}function Lc(r,e){return(r.values||[]).find((n=>_r(n,e)))!==void 0}function vl(r,e){if(r===e)return 0;const n=za(r),s=za(e);if(n!==s)return Nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=Vn(c.integerValue||c.doubleValue),b=Vn(f.integerValue||f.doubleValue);return m<b?-1:m>b?1:m===b?0:isNaN(m)?isNaN(b)?0:-1:1})(r,e);case 3:return dv(r.timestampValue,e.timestampValue);case 4:return dv(xc(r),xc(e));case 5:return Dm(r.stringValue,e.stringValue);case 6:return(function(c,f){const m=Pa(c),b=Pa(f);return m.compareTo(b)})(r.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),b=f.split("/");for(let _=0;_<m.length&&_<b.length;_++){const S=Nt(m[_],b[_]);if(S!==0)return S}return Nt(m.length,b.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=Nt(Vn(c.latitude),Vn(f.latitude));return m!==0?m:Nt(Vn(c.longitude),Vn(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return fv(r.arrayValue,e.arrayValue);case 10:return(function(c,f){const m=c.fields||{},b=f.fields||{},_=m[Ch]?.arrayValue,S=b[Ch]?.arrayValue,A=Nt(_?.values?.length||0,S?.values?.length||0);return A!==0?A:fv(_,S)})(r.mapValue,e.mapValue);case 11:return(function(c,f){if(c===rh.mapValue&&f===rh.mapValue)return 0;if(c===rh.mapValue)return 1;if(f===rh.mapValue)return-1;const m=c.fields||{},b=Object.keys(m),_=f.fields||{},S=Object.keys(_);b.sort(),S.sort();for(let A=0;A<b.length&&A<S.length;++A){const V=Dm(b[A],S[A]);if(V!==0)return V;const O=vl(m[b[A]],_[S[A]]);if(O!==0)return O}return Nt(b.length,S.length)})(r.mapValue,e.mapValue);default:throw Ze(23264,{he:n})}}function dv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Nt(r,e);const n=ja(r),s=ja(e),o=Nt(n.seconds,s.seconds);return o!==0?o:Nt(n.nanos,s.nanos)}function fv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=vl(n[o],s[o]);if(c)return c}return Nt(n.length,s.length)}function Tl(r){return Mm(r)}function Mm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=ja(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Pa(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return $e.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=Mm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const f of s)c?c=!1:o+=",",o+=`${f}:${Mm(n.fields[f])}`;return o+"}"})(r.mapValue):Ze(61005,{value:r})}function fh(r){switch(za(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(r);return e?16+fh(e):16;case 5:return 2*r.stringValue.length;case 6:return Pa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+fh(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return qa(s.fields,((c,f)=>{o+=c.length+fh(f)})),o})(r.mapValue);default:throw Ze(13486,{value:r})}}function mv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function xm(r){return!!r&&"integerValue"in r}function fg(r){return!!r&&"arrayValue"in r}function gv(r){return!!r&&"nullValue"in r}function pv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mh(r){return!!r&&"mapValue"in r}function FI(r){return(r?.mapValue?.fields||{})[hS]?.stringValue===dS}function Ac(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return qa(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ac(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ac(r.arrayValue.values[n]);return e}return{...r}}function GI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===HI}class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ac(n)}setAll(e){let n=wi.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const b=this.getFieldsMap(n);this.applyChanges(b,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Ac(f):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];mh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){qa(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new Gi(Ac(this.value))}}function fS(r){const e=[];return qa(r.fields,((n,s)=>{const o=new wi([n]);if(mh(s)){const c=fS(s.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)})),new Es(e)}class li{constructor(e,n,s,o,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new li(e,0,et.min(),et.min(),et.min(),Gi.empty(),0)}static newFoundDocument(e,n,s,o){return new li(e,1,n,et.min(),s,o,0)}static newNoDocument(e,n){return new li(e,2,n,et.min(),et.min(),Gi.empty(),0)}static newUnknownDocument(e,n){return new li(e,3,n,et.min(),et.min(),Gi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof li&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new li(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kh{constructor(e,n){this.position=e,this.inclusive=n}}function yv(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],f=r.position[o];if(c.field.isKeyField()?s=$e.comparator($e.fromName(f.referenceValue),n.key):s=vl(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function _v(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!_r(r.position[n],e.position[n]))return!1;return!0}class Nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function KI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class mS{}class Qn extends mS{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new QI(e,n,s):n==="array-contains"?new XI(e,s):n==="in"?new ZI(e,s):n==="not-in"?new JI(e,s):n==="array-contains-any"?new eC(e,s):new Qn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new WI(e,s):new YI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vl(n,this.value)):n!==null&&za(this.value)===za(n)&&this.matchesComparison(vl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zs extends mS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zs(e,n)}matches(e){return gS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gS(r){return r.op==="and"}function pS(r){return $I(r)&&gS(r)}function $I(r){for(const e of r.filters)if(e instanceof Zs)return!1;return!0}function Om(r){if(r instanceof Qn)return r.field.canonicalString()+r.op.toString()+Tl(r.value);if(pS(r))return r.filters.map((e=>Om(e))).join(",");{const e=r.filters.map((n=>Om(n))).join(",");return`${r.op}(${e})`}}function yS(r,e){return r instanceof Qn?(function(s,o){return o instanceof Qn&&s.op===o.op&&s.field.isEqual(o.field)&&_r(s.value,o.value)})(r,e):r instanceof Zs?(function(s,o){return o instanceof Zs&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,f,m)=>c&&yS(f,o.filters[m])),!0):!1})(r,e):void Ze(19439)}function _S(r){return r instanceof Qn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Tl(n.value)}`})(r):r instanceof Zs?(function(n){return n.op.toString()+" {"+n.getFilters().map(_S).join(" ,")+"}"})(r):"Filter"}class QI extends Qn{constructor(e,n,s){super(e,n,s),this.key=$e.fromName(s.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class WI extends Qn{constructor(e,n){super(e,"in",n),this.keys=bS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class YI extends Qn{constructor(e,n){super(e,"not-in",n),this.keys=bS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bS(r,e){return(e.arrayValue?.values||[]).map((n=>$e.fromName(n.referenceValue)))}class XI extends Qn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fg(n)&&Lc(n.arrayValue,this.value)}}class ZI extends Qn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class JI extends Qn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class eC extends Qn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Lc(this.value.arrayValue,s)))}}class tC{constructor(e,n=null,s=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function bv(r,e=null,n=[],s=[],o=null,c=null,f=null){return new tC(r,e,n,s,o,c,f)}function mg(r){const e=st(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Om(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Fc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Tl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Tl(s))).join(",")),e.Te=n}return e.Te}function gg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!KI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!yS(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!_v(r.startAt,e.startAt)&&_v(r.endAt,e.endAt)}function Lm(r){return $e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Gc{constructor(e,n=null,s=[],o=[],c=null,f="F",m=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nC(r,e,n,s,o,c,f,m){return new Gc(r,e,n,s,o,c,f,m)}function $h(r){return new Gc(r)}function vv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function vS(r){return r.collectionGroup!==null}function Rc(r){const e=st(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new ei(wi.comparator);return f.filters.forEach((b=>{b.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Nh(c,s))})),n.has(wi.keyField().canonicalString())||e.Ie.push(new Nh(wi.keyField(),s))}return e.Ie}function gr(r){const e=st(r);return e.Ee||(e.Ee=iC(e,Rc(r))),e.Ee}function iC(r,e){if(r.limitType==="F")return bv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Nh(o.field,c)}));const n=r.endAt?new kh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new kh(r.startAt.position,r.startAt.inclusive):null;return bv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Vm(r,e){const n=r.filters.concat([e]);return new Gc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function jm(r,e,n){return new Gc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Qh(r,e){return gg(gr(r),gr(e))&&r.limitType===e.limitType}function TS(r){return`${mg(gr(r))}|lt:${r.limitType}`}function al(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>_S(o))).join(", ")}]`),Fc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Tl(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Tl(o))).join(",")),`Target(${s})`})(gr(r))}; limitType=${r.limitType})`}function Wh(r,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):$e.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,o){for(const c of Rc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,b){const _=yv(f,m,b);return f.inclusive?_<=0:_<0})(s.startAt,Rc(s),o)||s.endAt&&!(function(f,m,b){const _=yv(f,m,b);return f.inclusive?_>=0:_>0})(s.endAt,Rc(s),o))})(r,e)}function sC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function SS(r){return(e,n)=>{let s=!1;for(const o of Rc(r)){const c=rC(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function rC(r,e,n){const s=r.field.isKeyField()?$e.comparator(e.key,n.key):(function(c,f,m){const b=f.data.field(c),_=m.data.field(c);return b!==null&&_!==null?vl(b,_):Ze(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ze(19790,{direction:r.dir})}}class To{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return rS(this.inner)}size(){return this.innerSize}}const aC=new Cn($e.comparator);function Qr(){return aC}const ES=new Cn($e.comparator);function vc(...r){let e=ES;for(const n of r)e=e.insert(n.key,n);return e}function wS(r){let e=ES;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function go(){return Ic()}function AS(){return Ic()}function Ic(){return new To((r=>r.toString()),((r,e)=>r.isEqual(e)))}const oC=new Cn($e.comparator),lC=new ei($e.comparator);function Dt(...r){let e=lC;for(const n of r)e=e.add(n);return e}const cC=new ei(Nt);function uC(){return cC}function pg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function RS(r){return{integerValue:""+r}}function IS(r,e){return PI(e)?RS(e):pg(r,e)}class Yh{constructor(){this._=void 0}}function hC(r,e,n){return r instanceof Vc?(function(o,c){const f={fields:{[lS]:{stringValue:oS},[uS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&dg(c)&&(c=Kh(c)),c&&(f.fields[cS]=c),{mapValue:f}})(n,e):r instanceof Sl?kS(r,e):r instanceof El?NS(r,e):(function(o,c){const f=CS(o,c),m=Tv(f)+Tv(o.Ae);return xm(f)&&xm(o.Ae)?RS(m):pg(o.serializer,m)})(r,e)}function dC(r,e,n){return r instanceof Sl?kS(r,e):r instanceof El?NS(r,e):n}function CS(r,e){return r instanceof jc?(function(s){return xm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Vc extends Yh{}class Sl extends Yh{constructor(e){super(),this.elements=e}}function kS(r,e){const n=DS(e);for(const s of r.elements)n.some((o=>_r(o,s)))||n.push(s);return{arrayValue:{values:n}}}class El extends Yh{constructor(e){super(),this.elements=e}}function NS(r,e){let n=DS(e);for(const s of r.elements)n=n.filter((o=>!_r(o,s)));return{arrayValue:{values:n}}}class jc extends Yh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tv(r){return Vn(r.integerValue||r.doubleValue)}function DS(r){return fg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Xh{constructor(e,n){this.field=e,this.transform=n}}function fC(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Sl&&o instanceof Sl||s instanceof El&&o instanceof El?bl(s.elements,o.elements,_r):s instanceof jc&&o instanceof jc?_r(s.Ae,o.Ae):s instanceof Vc&&o instanceof Vc})(r.transform,e.transform)}class mC{constructor(e,n){this.version=e,this.transformResults=n}}class Mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Zh{}function MS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Jh(r.key,Mi.none()):new Kc(r.key,r.data,Mi.none());{const n=r.data,s=Gi.empty();let o=new ei(wi.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),o=o.add(c)}return new Ha(r.key,s,new Es(o.toArray()),Mi.none())}}function gC(r,e,n){r instanceof Kc?(function(o,c,f){const m=o.value.clone(),b=Ev(o.fieldTransforms,c,f.transformResults);m.setAll(b),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Ha?(function(o,c,f){if(!gh(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Ev(o.fieldTransforms,c,f.transformResults),b=c.data;b.setAll(xS(o)),b.setAll(m),c.convertToFoundDocument(f.version,b).setHasCommittedMutations()})(r,e,n):(function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Cc(r,e,n,s){return r instanceof Kc?(function(c,f,m,b){if(!gh(c.precondition,f))return m;const _=c.value.clone(),S=wv(c.fieldTransforms,b,f);return _.setAll(S),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(r,e,n,s):r instanceof Ha?(function(c,f,m,b){if(!gh(c.precondition,f))return m;const _=wv(c.fieldTransforms,b,f),S=f.data;return S.setAll(xS(c)),S.setAll(_),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(r,e,n,s):(function(c,f,m){return gh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function pC(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=CS(s.transform,o||null);c!=null&&(n===null&&(n=Gi.empty()),n.set(s.field,c))}return n||null}function Sv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&bl(s,o,((c,f)=>fC(c,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Kc extends Zh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ha extends Zh{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function xS(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Ev(r,e,n){const s=new Map;Pt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const c=r[o],f=c.transform,m=e.data.field(c.field);s.set(c.field,dC(f,m,n[o]))}return s}function wv(r,e,n){const s=new Map;for(const o of r){const c=o.transform,f=n.data.field(o.field);s.set(o.field,hC(c,f,e))}return s}class Jh extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OS extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&gC(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Cc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Cc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=AS();return this.mutations.forEach((o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(o.key)?null:m;const b=MS(f,m);b!==null&&s.set(o.key,b),f.isValidDocument()||f.convertToNoDocument(et.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Dt())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,((n,s)=>Sv(n,s)))&&bl(this.baseMutations,e.baseMutations,((n,s)=>Sv(n,s)))}}class yg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return oC})();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,s[f].version);return new yg(e,n,s,o)}}class _C{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class bC{constructor(e,n){this.count=e,this.unchangedNames=n}}var $n,jt;function LS(r){switch(r){case ae.OK:return Ze(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ze(15467,{code:r})}}function VS(r){if(r===void 0)return $r("GRPC error has no .code"),ae.UNKNOWN;switch(r){case $n.OK:return ae.OK;case $n.CANCELLED:return ae.CANCELLED;case $n.UNKNOWN:return ae.UNKNOWN;case $n.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case $n.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case $n.INTERNAL:return ae.INTERNAL;case $n.UNAVAILABLE:return ae.UNAVAILABLE;case $n.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case $n.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case $n.NOT_FOUND:return ae.NOT_FOUND;case $n.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case $n.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case $n.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case $n.ABORTED:return ae.ABORTED;case $n.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case $n.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case $n.DATA_LOSS:return ae.DATA_LOSS;default:return Ze(39323,{code:r})}}(jt=$n||($n={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";function vC(){return new TextEncoder}const TC=new Ma([4294967295,4294967295],0);function Av(r){const e=vC().encode(r),n=new QT;return n.update(e),new Uint8Array(n.digest())}function Rv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ma([n,s],0),new Ma([o,c],0)]}class _g{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Tc(`Invalid padding: ${n}`);if(s<0)throw new Tc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ma.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Ma.fromNumber(s)));return o.compare(TC)===1&&(o=new Ma([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Av(e),[s,o]=Rv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new _g(c,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Av(e),[s,o]=Rv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ed{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ed(et.min(),o,new Cn(Nt),Qr(),Dt())}}class $c{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new $c(s,n,Dt(),Dt(),Dt())}}class ph{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class jS{constructor(e,n){this.targetId=e,this.Ce=n}}class PS{constructor(e,n,s=Ai.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Iv{constructor(){this.ve=0,this.Fe=Cv(),this.Me=Ai.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Dt(),n=Dt(),s=Dt();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ze(38017,{changeType:c})}})),new $c(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Cv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qr(),this.Je=ah(),this.He=ah(),this.Ye=new Cn(Nt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Lm(c))if(s===0){const f=new $e(c.path);this.et(n,f,li.newNoDocument(f,et.min()))}else Pt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),b=m?this.ct(m,e,f):1;if(b!==0){this.it(n);const _=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let f,m;try{f=Pa(s).toUint8Array()}catch(b){if(b instanceof aS)return _l("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{m=new _g(f,o,c)}catch(b){return _l(b instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&Lm(m.target)){const b=new $e(m.target.path);this.It(b).has(f)||this.Et(f,b)||this.et(f,b,li.newNoDocument(b,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=Dt();this.He.forEach(((c,f)=>{let m=!0;f.forEachWhile((b=>{const _=this.ot(b);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const o=new ed(e,n,this.Ye,this.je,s);return this.je=Qr(),this.Je=ah(),this.He=ah(),this.Ye=new Cn(Nt),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Iv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ei(Nt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ei(Nt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ah(){return new Cn($e.comparator)}function Cv(){return new Cn($e.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},wC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AC={and:"AND",or:"OR"};class RC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pm(r,e){return r.useProto3Json||Fc(e)?e:{value:e}}function Dh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IC(r,e){return Dh(r,e.toTimestamp())}function ws(r){return Pt(!!r,49232),et.fromTimestamp((function(n){const s=ja(n);return new bn(s.seconds,s.nanos)})(r))}function bg(r,e){return zm(r,e).canonicalString()}function zm(r,e){const n=(function(o){return new an(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function BS(r){const e=an.fromString(r);return Pt(KS(e),10190,{key:e.toString()}),e}function Mh(r,e){return bg(r.databaseId,e.path)}function kc(r,e){const n=BS(e);if(n.get(1)!==r.databaseId.projectId)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new $e(qS(n))}function US(r,e){return bg(r.databaseId,e)}function CC(r){const e=BS(r);return e.length===4?an.emptyPath():qS(e)}function Bm(r){return new an(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function qS(r){return Pt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function kv(r,e,n){return{name:Mh(r,e),fields:n.value.mapValue.fields}}function kC(r,e){return"found"in e?(function(s,o){Pt(!!o.found,43571),o.found.name,o.found.updateTime;const c=kc(s,o.found.name),f=ws(o.found.updateTime),m=o.found.createTime?ws(o.found.createTime):et.min(),b=new Gi({mapValue:{fields:o.found.fields}});return li.newFoundDocument(c,f,m,b)})(r,e):"missing"in e?(function(s,o){Pt(!!o.missing,3894),Pt(!!o.readTime,22933);const c=kc(s,o.missing),f=ws(o.readTime);return li.newNoDocument(c,f)})(r,e):Ze(7234,{result:e})}function NC(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ze(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,S){return _.useProto3Json?(Pt(S===void 0||typeof S=="string",58123),Ai.fromBase64String(S||"")):(Pt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Ai.fromUint8Array(S||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(_){const S=_.code===void 0?ae.UNKNOWN:VS(_.code);return new Te(S,_.message||"")})(f);n=new PS(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=kc(r,s.document.name),c=ws(s.document.updateTime),f=s.document.createTime?ws(s.document.createTime):et.min(),m=new Gi({mapValue:{fields:s.document.fields}}),b=li.newFoundDocument(o,c,f,m),_=s.targetIds||[],S=s.removedTargetIds||[];n=new ph(_,S,b.key,b)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=kc(r,s.document),c=s.readTime?ws(s.readTime):et.min(),f=li.newNoDocument(o,c),m=s.removedTargetIds||[];n=new ph([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=kc(r,s.document),c=s.removedTargetIds||[];n=new ph([],c,o,null)}else{if(!("filter"in e))return Ze(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,f=new bC(o,c),m=s.targetId;n=new jS(m,f)}}return n}function HS(r,e){let n;if(e instanceof Kc)n={update:kv(r,e.key,e.value)};else if(e instanceof Jh)n={delete:Mh(r,e.key)};else if(e instanceof Ha)n={update:kv(r,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof OS))return Ze(16599,{Vt:e.type});n={verify:Mh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Vc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Sl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof El)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof jc)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ze(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:IC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ze(27497)})(r,e.precondition)),n}function DC(r,e){return r&&r.length>0?(Pt(e!==void 0,14353),r.map((n=>(function(o,c){let f=o.updateTime?ws(o.updateTime):ws(c);return f.isEqual(et.min())&&(f=ws(c)),new mC(f,o.transformResults||[])})(n,e)))):[]}function MC(r,e){return{documents:[US(r,e.path)]}}function xC(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=US(r,o);const c=(function(_){if(_.length!==0)return GS(Zs.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(_){if(_.length!==0)return _.map((S=>(function(V){return{field:ol(V.field),direction:VC(V.dir)}})(S)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Pm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function OC(r){let e=CC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Pt(s===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=(function(A){const V=FS(A);return V instanceof Zs&&pS(V)?V.getFilters():[V]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((V=>(function(pe){return new Nh(ll(pe.field),(function(he){switch(he){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(pe.direction))})(V)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let V;return V=typeof A=="object"?A.value:A,Fc(V)?null:V})(n.limit));let b=null;n.startAt&&(b=(function(A){const V=!!A.before,O=A.values||[];return new kh(O,V)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const V=!A.before,O=A.values||[];return new kh(O,V)})(n.endAt)),nC(e,o,f,c,m,"F",b,_)}function LC(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FS(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ll(n.unaryFilter.field);return Qn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ll(n.unaryFilter.field);return Qn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ll(n.unaryFilter.field);return Qn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ll(n.unaryFilter.field);return Qn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Qn.create(ll(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Zs.create(n.compositeFilter.filters.map((s=>FS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}})(n.compositeFilter.op))})(r):Ze(30097,{filter:r})}function VC(r){return EC[r]}function jC(r){return wC[r]}function PC(r){return AC[r]}function ol(r){return{fieldPath:r.canonicalString()}}function ll(r){return wi.fromServerFormat(r.fieldPath)}function GS(r){return r instanceof Qn?(function(n){if(n.op==="=="){if(pv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(gv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(gv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:jC(n.op),value:n.value}}})(r):r instanceof Zs?(function(n){const s=n.getFilters().map((o=>GS(o)));return s.length===1?s[0]:{compositeFilter:{op:PC(n.op),filters:s}}})(r):Ze(54877,{filter:r})}function zC(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function KS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ia{constructor(e,n,s,o,c=et.min(),f=et.min(),m=Ai.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=b}withSequenceNumber(e){return new Ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BC{constructor(e){this.yt=e}}function UC(r){const e=OC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?jm(e,e.limit,"L"):e}class qC{constructor(){this.Cn=new HC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Va.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Va.min())}updateCollectionGroup(e,n,s){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class HC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new ei(an.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new ei(an.comparator)).toArray()}}const Nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$S=41943040;class ns{static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns($S,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class wl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wl(0)}static cr(){return new wl(-1)}}const Dv="LruGarbageCollector",FC=1048576;function Mv([r,e],[n,s]){const o=Nt(r,n);return o===0?Nt(e,s):o}class GC{constructor(e){this.Ir=e,this.buffer=new ei(Mv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Mv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(Dv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Dl(n)?Re(Dv,"Ignoring IndexedDB error during garbage collection: ",n):await Nl(n)}await this.Vr(3e5)}))}}class $C{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(Gh.ce);const s=new GC(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Nv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,f,m,b,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,n)))).next((A=>(c=A,b=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(_=Date.now(),rl()<=kt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(b-m)+`ms
	Removed ${A} documents in `+(_-b)+`ms
Total Duration: ${_-S}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A}))))}}function QC(r,e){return new $C(r,e)}class WC{constructor(){this.changes=new To((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,li.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ue.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Cc(s.mutation,o,Es.empty(),bn.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Dt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Dt()){const o=go();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let f=vc();return c.forEach(((m,b)=>{f=f.insert(m,b.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=go();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Dt())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let c=Qr();const f=Ic(),m=(function(){return Ic()})();return n.forEach(((b,_)=>{const S=s.get(_.key);o.has(_.key)&&(S===void 0||S.mutation instanceof Ha)?c=c.insert(_.key,_):S!==void 0?(f.set(_.key,S.mutation.getFieldMask()),Cc(S.mutation,_,S.mutation.getFieldMask(),bn.now())):f.set(_.key,Es.empty())})),this.recalculateAndSaveOverlays(e,c).next((b=>(b.forEach(((_,S)=>f.set(_,S))),n.forEach(((_,S)=>m.set(_,new YC(S,f.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Ic();let o=new Cn(((f,m)=>f-m)),c=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((b=>{const _=n.get(b);if(_===null)return;let S=s.get(b)||Es.empty();S=m.applyToLocalView(_,S),s.set(b,S);const A=(o.get(m.batchId)||Dt()).add(b);o=o.insert(m.batchId,A)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const b=m.getNext(),_=b.key,S=b.value,A=AS();S.forEach((V=>{if(!c.has(V)){const O=MS(n.get(V),s.get(V));O!==null&&A.set(V,O),c=c.add(V)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,A))}return ue.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return $e.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):ue.resolve(go());let m=Mc,b=c;return f.next((_=>ue.forEach(_,((S,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(S)?ue.resolve():this.remoteDocumentCache.getEntry(e,S).next((V=>{b=b.insert(S,V)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,b,_,Dt()))).next((S=>({batchId:m,changes:wS(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next((s=>{let o=vc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let f=vc();return this.indexManager.getCollectionParents(e,c).next((m=>ue.forEach(m,(b=>{const _=(function(A,V){return new Gc(V,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,b.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next((S=>{S.forEach(((A,V)=>{f=f.insert(A,V)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((f=>{c.forEach(((b,_)=>{const S=_.getKey();f.get(S)===null&&(f=f.insert(S,li.newInvalidDocument(S)))}));let m=vc();return f.forEach(((b,_)=>{const S=c.get(b);S!==void 0&&Cc(S.mutation,_,Es.empty(),bn.now()),Wh(n,_)&&(m=m.insert(b,_))})),m}))}}class ZC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ws(o.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:UC(o.bundledQuery),readTime:ws(o.readTime)}})(n)),ue.resolve()}}class JC{constructor(){this.overlays=new Cn($e.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const s=go();return ue.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),ue.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,n,s){const o=go(),c=n.length+1,f=new $e(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const b=m.getNext().value,_=b.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&b.largestBatchId>s&&o.set(b.getKey(),b)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new Cn(((_,S)=>_-S));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let S=c.get(_.largestBatchId);S===null&&(S=go(),c=c.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const m=go(),b=c.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((_,S)=>m.set(_,S))),!(m.size()>=o)););return ue.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new _C(n,s));let c=this.qr.get(n);c===void 0&&(c=Dt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}class ek{constructor(){this.sessionToken=Ai.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}class vg{constructor(){this.Qr=new ei(oi.$r),this.Ur=new ei(oi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new oi(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new oi(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new $e(new an([])),s=new oi(n,e),o=new oi(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $e(new an([])),s=new oi(n,e),o=new oi(n,e+1);let c=Dt();return this.Ur.forEachInRange([s,o],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new oi(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class oi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $e.comparator(e.key,n.key)||Nt(e.Yr,n.Yr)}static Kr(e,n){return Nt(e.Yr,n.Yr)||$e.comparator(e.key,n.key)}}class tk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ei(oi.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new yC(c,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new oi(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return ue.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new oi(n,0),o=new oi(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);c.push(m)})),ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ei(Nt);return n.forEach((o=>{const c=new oi(o,0),f=new oi(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(m=>{s=s.add(m.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;$e.isDocumentKey(c)||(c=c.child(""));const f=new oi(new $e(c),0);let m=new ei(Nt);return this.Zr.forEachWhile((b=>{const _=b.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(b.Yr)),!0)}),f),ue.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Pt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(n.mutations,(o=>{const c=new oi(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new oi(n,0),o=this.Zr.firstAfterOrEqual(s);return ue.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nk{constructor(e){this.ri=e,this.docs=(function(){return new Cn($e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ue.resolve(s?s.document.mutableCopy():li.newInvalidDocument(n))}getEntries(e,n){let s=Qr();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():li.newInvalidDocument(o))})),ue.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Qr();const f=n.path,m=new $e(f.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(m);for(;b.hasNext();){const{key:_,value:{document:S}}=b.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||OI(xI(S),s)<=0||(o.has(S.key)||Wh(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return ue.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Ze(9500)}ii(e,n){return ue.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new ik(this)}getSize(e){return ue.resolve(this.size)}}class ik extends WC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class sk{constructor(e){this.persistence=e,this.si=new To((n=>mg(n)),gg),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.oi=0,this._i=new vg,this.targetCount=0,this.ai=wl.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new wl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(c).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ue.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ue.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((f=>{c.push(o.markPotentiallyOrphaned(e,f))})),ue.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ue.resolve(s)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}class QS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Gh(0),this.li=!1,this.li=!0,this.hi=new ek,this.referenceDelegate=e(this),this.Pi=new sk(this),this.indexManager=new qC,this.remoteDocumentCache=(function(o){return new nk(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BC(n),this.Ii=new ZC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new tk(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Re("MemoryPersistence","Starting transaction:",e);const o=new rk(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class rk extends VI{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Ri=new vg,this.Vi=null}static mi(e){return new Tg(e)}get fi(){if(this.Vi)return this.Vi;throw Ze(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const o=$e.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,et.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class xh{constructor(e,n){this.persistence=e,this.pi=new To((s=>zI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=QC(this,n)}static mi(e,n){return new xh(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ue.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ue.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,c.removeEntry(f,et.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fh(e.data.value)),n}br(e,n,s){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ue.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Sg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Dt(),o=Dt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Sg(e,n.fromCache,s,o)}}class ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ok{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return iA()?8:jI(xi())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new ak;return this.Ss(e,n,f).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(rl()<=kt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(rl()<=kt.DEBUG&&Re("QueryEngine","Query:",al(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(rl()<=kt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(n))):ue.resolve())}ys(e,n){if(vv(n))return ue.resolve(null);let s=gr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=jm(n,null,"F"),s=gr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=Dt(...c);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((b=>{const _=this.Ds(n,m);return this.Cs(n,_,f,b.readTime)?this.ys(e,jm(n,null,"F")):this.vs(e,_,n,b)}))))})))))}ws(e,n,s,o){return vv(n)||o.isEqual(et.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,o)?ue.resolve(null):(rl()<=kt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),al(n)),this.vs(e,f,n,MI(o,Mc)).next((m=>m)))}))}Ds(e,n){let s=new ei(SS(e));return n.forEach(((o,c)=>{Wh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return rl()<=kt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",al(n)),this.ps.getDocumentsMatchingQuery(e,n,Va.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const Eg="LocalStore",lk=3e8;class ck{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Cn(Nt),this.xs=new To((c=>mg(c)),gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function uk(r,e,n,s){return new ck(r,e,n,s)}async function WS(r,e){const n=st(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let b=Dt();for(const _ of o){f.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}for(const _ of c){m.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}return n.localDocuments.getDocuments(s,b).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:m})))}))}))}function hk(r,e){const n=st(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,b,_,S){const A=_.batch,V=A.keys();let O=ue.resolve();return V.forEach((pe=>{O=O.next((()=>S.getEntry(b,pe))).next((de=>{const he=_.docVersions.get(pe);Pt(he!==null,48541),de.version.compareTo(he)<0&&(A.applyToRemoteDocument(de,_),de.isValidDocument()&&(de.setReadTime(_.commitVersion),S.addEntry(de)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(b,A)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let b=Dt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(b=b.add(m.batch.mutations[_].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function YS(r){const e=st(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function dk(r,e){const n=st(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((S,A)=>{const V=o.get(A);if(!V)return;m.push(n.Pi.removeMatchingKeys(c,S.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(c,S.addedDocuments,A))));let O=V.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?O=O.withResumeToken(Ai.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):S.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(S.resumeToken,s)),o=o.insert(A,O),(function(de,he,I){return de.resumeToken.approximateByteSize()===0||he.snapshotVersion.toMicroseconds()-de.snapshotVersion.toMicroseconds()>=lk?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(V,O,S)&&m.push(n.Pi.updateTargetData(c,O))}));let b=Qr(),_=Dt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))})),m.push(fk(c,f,e.documentUpdates).next((S=>{b=S.ks,_=S.qs}))),!s.isEqual(et.min())){const S=n.Pi.getLastRemoteSnapshotVersion(c).next((A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(S)}return ue.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,b,_))).next((()=>b))})).then((c=>(n.Ms=o,c)))}function fk(r,e,n){let s=Dt(),o=Dt();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let f=Qr();return n.forEach(((m,b)=>{const _=c.get(m);b.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),b.isNoDocument()&&b.version.isEqual(et.min())?(e.removeEntry(m,b.readTime),f=f.insert(m,b)):!_.isValidDocument()||b.version.compareTo(_.version)>0||b.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(b),f=f.insert(m,b)):Re(Eg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",b.version)})),{ks:f,qs:o}}))}function mk(r,e){const n=st(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=hg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gk(r,e){const n=st(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,ue.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new Ia(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Um(r,e,n){const s=st(r),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Dl(f))throw f;Re(Eg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function xv(r,e,n){const s=st(r);let o=et.min(),c=Dt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(b,_,S){const A=st(b),V=A.xs.get(S);return V!==void 0?ue.resolve(A.Ms.get(V)):A.Pi.getTargetData(_,S)})(s,f,gr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((b=>{c=b}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:et.min(),n?c:Dt()))).next((m=>(pk(s,sC(e),m),{documents:m,Qs:c})))))}function pk(r,e,n){let s=r.Os.get(e)||et.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class Ov{constructor(){this.activeTargetIds=uC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yk{constructor(){this.Mo=new Ov,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ov,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _k{Oo(e){}shutdown(){}}const Lv="ConnectivityMonitor";class Vv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(Lv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(Lv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let oh=null;function qm(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}const ym="RestConnection",bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const f=qm(),m=this.zo(e,n.toUriEncodedString());Re(ym,`Sending RPC '${e}' ${f}:`,m,s);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,o,c);const{host:_}=new URL(m),S=Rl(_);return this.Jo(e,m,b,s,S).then((A=>(Re(ym,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw _l(ym,`RPC '${e}' ${f} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,n,s,o,c,f){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=bk[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class Tk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ki="WebChannelConnection";class Sk extends vk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const f=qm();return new Promise(((m,b)=>{const _=new WT;_.setWithCredentials(!0),_.listenOnce(YT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case dh.NO_ERROR:const A=_.getResponseJson();Re(ki,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),m(A);break;case dh.TIMEOUT:Re(ki,`RPC '${e}' ${f} timed out`),b(new Te(ae.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const V=_.getStatus();if(Re(ki,`RPC '${e}' ${f} failed with status:`,V,"response text:",_.getResponseText()),V>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const pe=O?.error;if(pe&&pe.status&&pe.message){const de=(function(I){const Ae=I.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Ae)>=0?Ae:ae.UNKNOWN})(pe.status);b(new Te(de,pe.message))}else b(new Te(ae.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new Te(ae.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Re(ki,`RPC '${e}' ${f} completed.`)}}));const S=JSON.stringify(o);Re(ki,`RPC '${e}' ${f} sending request:`,o),_.send(n,"POST",S,s,15)}))}T_(e,n,s){const o=qm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=JT(),m=ZT(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(b.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,s),b.encodeInitMessageHeaders=!0;const S=c.join("");Re(ki,`Creating RPC '${e}' stream ${o}: ${S}`,b);const A=f.createWebChannel(S,b);this.I_(A);let V=!1,O=!1;const pe=new Tk({Yo:he=>{O?Re(ki,`Not sending because RPC '${e}' stream ${o} is closed:`,he):(V||(Re(ki,`Opening RPC '${e}' stream ${o} transport.`),A.open(),V=!0),Re(ki,`RPC '${e}' stream ${o} sending:`,he),A.send(he))},Zo:()=>A.close()}),de=(he,I,Ae)=>{he.listen(I,(xe=>{try{Ae(xe)}catch(ct){setTimeout((()=>{throw ct}),0)}}))};return de(A,bc.EventType.OPEN,(()=>{O||(Re(ki,`RPC '${e}' stream ${o} transport opened.`),pe.o_())})),de(A,bc.EventType.CLOSE,(()=>{O||(O=!0,Re(ki,`RPC '${e}' stream ${o} transport closed`),pe.a_(),this.E_(A))})),de(A,bc.EventType.ERROR,(he=>{O||(O=!0,_l(ki,`RPC '${e}' stream ${o} transport errored. Name:`,he.name,"Message:",he.message),pe.a_(new Te(ae.UNAVAILABLE,"The operation could not be completed")))})),de(A,bc.EventType.MESSAGE,(he=>{if(!O){const I=he.data[0];Pt(!!I,16349);const Ae=I,xe=Ae?.error||Ae[0]?.error;if(xe){Re(ki,`RPC '${e}' stream ${o} received error:`,xe);const ct=xe.status;let zt=(function(R){const N=$n[R];if(N!==void 0)return VS(N)})(ct),qe=xe.message;zt===void 0&&(zt=ae.INTERNAL,qe="Unknown error status: "+ct+" with message "+xe.message),O=!0,pe.a_(new Te(zt,qe)),A.close()}else Re(ki,`RPC '${e}' stream ${o} received:`,I),pe.u_(I)}})),de(m,XT.STAT_EVENT,(he=>{he.stat===Nm.PROXY?Re(ki,`RPC '${e}' stream ${o} detected buffering proxy`):he.stat===Nm.NOPROXY&&Re(ki,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{pe.__()}),0),pe}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _m(){return typeof document<"u"?document:null}function td(r){return new RC(r,!0)}class wg{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const jv="PersistentStream";class XS{constructor(e,n,s,o,c,f,m,b){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Te(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(jv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Re(jv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ek extends XS{constructor(e,n,s,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NC(this.serializer,e),s=(function(c){if(!("targetChange"in c))return et.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?et.min():f.readTime?ws(f.readTime):et.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Bm(this.serializer),n.addTarget=(function(c,f){let m;const b=f.target;if(m=Lm(b)?{documents:MC(c,b)}:{query:xC(c,b).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=zS(c,f.resumeToken);const _=Pm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(et.min())>0){m.readTime=Dh(c,f.snapshotVersion.toTimestamp());const _=Pm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const s=LC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Bm(this.serializer),n.removeTarget=e,this.q_(n)}}class wk extends XS{constructor(e,n,s,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=DC(e.writeResults,e.commitTime),s=ws(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Bm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>HS(this.serializer,s)))};this.q_(n)}}class Ak{}class Rk extends Ak{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,zm(n,s),o,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(ae.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,zm(n,s),o,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Te(ae.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ik{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($r(n),this.aa=!1):Re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const vo="RemoteStore";class Ck{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{So(this)&&(Re(vo,"Restarting streams for network reachability change."),await(async function(b){const _=st(b);_.Ea.add(4),await Qc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await nd(_)})(this))}))})),this.Ra=new Ik(s,o)}}async function nd(r){if(So(r))for(const e of r.da)await e(!0)}async function Qc(r){for(const e of r.da)await e(!1)}function ZS(r,e){const n=st(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cg(n)?Ig(n):Ml(n).O_()&&Rg(n,e))}function Ag(r,e){const n=st(r),s=Ml(n);n.Ia.delete(e),s.O_()&&JS(n,e),n.Ia.size===0&&(s.O_()?s.L_():So(n)&&n.Ra.set("Unknown"))}function Rg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ml(r).Y_(e)}function JS(r,e){r.Va.Ue(e),Ml(r).Z_(e)}function Ig(r){r.Va=new SC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ml(r).start(),r.Ra.ua()}function Cg(r){return So(r)&&!Ml(r).x_()&&r.Ia.size>0}function So(r){return st(r).Ea.size===0}function eE(r){r.Va=void 0}async function kk(r){r.Ra.set("Online")}async function Nk(r){r.Ia.forEach(((e,n)=>{Rg(r,e)}))}async function Dk(r,e){eE(r),Cg(r)?(r.Ra.ha(e),Ig(r)):r.Ra.set("Unknown")}async function Mk(r,e,n){if(r.Ra.set("Online"),e instanceof PS&&e.state===2&&e.cause)try{await(async function(o,c){const f=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){Re(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Oh(r,s)}else if(e instanceof ph?r.Va.Ze(e):e instanceof jS?r.Va.st(e):r.Va.tt(e),!n.isEqual(et.min()))try{const s=await YS(r.localStore);n.compareTo(s)>=0&&await(function(c,f){const m=c.Va.Tt(f);return m.targetChanges.forEach(((b,_)=>{if(b.resumeToken.approximateByteSize()>0){const S=c.Ia.get(_);S&&c.Ia.set(_,S.withResumeToken(b.resumeToken,f))}})),m.targetMismatches.forEach(((b,_)=>{const S=c.Ia.get(b);if(!S)return;c.Ia.set(b,S.withResumeToken(Ai.EMPTY_BYTE_STRING,S.snapshotVersion)),JS(c,b);const A=new Ia(S.target,b,_,S.sequenceNumber);Rg(c,A)})),c.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){Re(vo,"Failed to raise snapshot:",s),await Oh(r,s)}}async function Oh(r,e,n){if(!Dl(e))throw e;r.Ea.add(1),await Qc(r),r.Ra.set("Offline"),n||(n=()=>YS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Re(vo,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await nd(r)}))}function tE(r,e){return e().catch((n=>Oh(r,n,e)))}async function id(r){const e=st(r),n=Ba(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;xk(e);)try{const o=await mk(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Ok(e,o)}catch(o){await Oh(e,o)}nE(e)&&iE(e)}function xk(r){return So(r)&&r.Ta.length<10}function Ok(r,e){r.Ta.push(e);const n=Ba(r);n.O_()&&n.X_&&n.ea(e.mutations)}function nE(r){return So(r)&&!Ba(r).x_()&&r.Ta.length>0}function iE(r){Ba(r).start()}async function Lk(r){Ba(r).ra()}async function Vk(r){const e=Ba(r);for(const n of r.Ta)e.ea(n.mutations)}async function jk(r,e,n){const s=r.Ta.shift(),o=yg.from(s,e,n);await tE(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await id(r)}async function Pk(r,e){e&&Ba(r).X_&&await(async function(s,o){if((function(f){return LS(f)&&f!==ae.ABORTED})(o.code)){const c=s.Ta.shift();Ba(s).B_(),await tE(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await id(s)}})(r,e),nE(r)&&iE(r)}async function Pv(r,e){const n=st(r);n.asyncQueue.verifyOperationInProgress(),Re(vo,"RemoteStore received new credentials");const s=So(n);n.Ea.add(3),await Qc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nd(n)}async function zk(r,e){const n=st(r);e?(n.Ea.delete(2),await nd(n)):e||(n.Ea.add(2),await Qc(n),n.Ra.set("Unknown"))}function Ml(r){return r.ma||(r.ma=(function(n,s,o){const c=st(n);return c.sa(),new Ek(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:kk.bind(null,r),t_:Nk.bind(null,r),r_:Dk.bind(null,r),H_:Mk.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Cg(r)?Ig(r):r.Ra.set("Unknown")):(await r.ma.stop(),eE(r))}))),r.ma}function Ba(r){return r.fa||(r.fa=(function(n,s,o){const c=st(n);return c.sa(),new wk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lk.bind(null,r),r_:Pk.bind(null,r),ta:Vk.bind(null,r),na:jk.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await id(r)):(await r.fa.stop(),r.Ta.length>0&&(Re(vo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class kg{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const f=Date.now()+s,m=new kg(e,n,f,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ng(r,e){if($r("AsyncQueue",`${e}: ${r}`),Dl(r))return new Te(ae.UNAVAILABLE,`${e}: ${r}`);throw r}class gl{static emptySet(e){return new gl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||$e.comparator(n.key,s.key):(n,s)=>$e.comparator(n.key,s.key),this.keyedMap=vc(),this.sortedSet=new Cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new gl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class zv{constructor(){this.ga=new Cn($e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ze(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Al{constructor(e,n,s,o,c,f,m,b,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=b,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,o,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Al(e,n,gl.emptySet(n),f,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class Bk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Uk{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=st(n),c=o.queries;o.queries=Bv(),c.forEach(((f,m)=>{for(const b of m.Sa)b.onError(s)}))})(this,new Te(ae.ABORTED,"Firestore shutting down"))}}function Bv(){return new To((r=>TS(r)),Qh)}async function Dg(r,e){const n=st(r);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new Bk,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Ng(f,`Initialization of query '${al(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&xg(n)}async function Mg(r,e){const n=st(r),s=e.query;let o=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function qk(r,e){const n=st(r);let s=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&xg(n)}function Hk(r,e,n){const s=st(r),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function xg(r){r.Ca.forEach((e=>{e.next()}))}var Hm,Uv;(Uv=Hm||(Hm={})).Ma="default",Uv.Cache="cache";class Og{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Al(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hm.Cache}}class sE{constructor(e){this.key=e}}class rE{constructor(e){this.key=e}}class Fk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Dt(),this.mutatedKeys=Dt(),this.eu=SS(e),this.tu=new gl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new zv,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const b=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,A)=>{const V=o.get(S),O=Wh(this.query,A)?A:null,pe=!!V&&this.mutatedKeys.has(V.key),de=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let he=!1;V&&O?V.data.isEqual(O.data)?pe!==de&&(s.track({type:3,doc:O}),he=!0):this.su(V,O)||(s.track({type:2,doc:O}),he=!0,(b&&this.eu(O,b)>0||_&&this.eu(O,_)<0)&&(m=!0)):!V&&O?(s.track({type:0,doc:O}),he=!0):V&&!O&&(s.track({type:1,doc:V}),he=!0,(b||_)&&(m=!0)),he&&(O?(f=f.add(O),c=de?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{tu:f,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((S,A)=>(function(O,pe){const de=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Rt:he})}};return de(O)-de(pe)})(S.type,A.type)||this.eu(S.doc,A.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],b=this.Xa.size===0&&this.current&&!o?1:0,_=b!==this.Za;return this.Za=b,f.length!==0||_?{snapshot:new Al(this.query,e.tu,c,f,e.mutatedKeys,b===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Dt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new rE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new sE(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Dt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lg="SyncEngine";class Gk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Kk{constructor(e){this.key=e,this.hu=!1}}class $k{constructor(e,n,s,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new To((m=>TS(m)),Qh),this.Iu=new Map,this.Eu=new Set,this.du=new Cn($e.comparator),this.Au=new Map,this.Ru=new vg,this.Vu={},this.mu=new Map,this.fu=wl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Qk(r,e,n=!0){const s=hE(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await aE(s,e,n,!0),o}async function Wk(r,e){const n=hE(r);await aE(n,e,!0,!1)}async function aE(r,e,n,s){const o=await gk(r.localStore,gr(e)),c=o.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await Yk(r,e,c,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&ZS(r.remoteStore,o),m}async function Yk(r,e,n,s,o){r.pu=(A,V,O)=>(async function(de,he,I,Ae){let xe=he.view.ru(I);xe.Cs&&(xe=await xv(de.localStore,he.query,!1).then((({documents:D})=>he.view.ru(D,xe))));const ct=Ae&&Ae.targetChanges.get(he.targetId),zt=Ae&&Ae.targetMismatches.get(he.targetId)!=null,qe=he.view.applyChanges(xe,de.isPrimaryClient,ct,zt);return Hv(de,he.targetId,qe.au),qe.snapshot})(r,A,V,O);const c=await xv(r.localStore,e,!0),f=new Fk(e,c.Qs),m=f.ru(c.documents),b=$c.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),_=f.applyChanges(m,r.isPrimaryClient,b);Hv(r,n,_.au);const S=new Gk(e,n,f);return r.Tu.set(e,S),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),_.snapshot}async function Xk(r,e,n){const s=st(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((f=>!Qh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Um(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Ag(s.remoteStore,o.targetId),Fm(s,o.targetId)})).catch(Nl)):(Fm(s,o.targetId),await Um(s.localStore,o.targetId,!0))}async function Zk(r,e){const n=st(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ag(n.remoteStore,s.targetId))}async function Jk(r,e,n){const s=aN(r);try{const o=await(function(f,m){const b=st(f),_=bn.now(),S=m.reduce(((O,pe)=>O.add(pe.key)),Dt());let A,V;return b.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let pe=Qr(),de=Dt();return b.Ns.getEntries(O,S).next((he=>{pe=he,pe.forEach(((I,Ae)=>{Ae.isValidDocument()||(de=de.add(I))}))})).next((()=>b.localDocuments.getOverlayedDocuments(O,pe))).next((he=>{A=he;const I=[];for(const Ae of m){const xe=pC(Ae,A.get(Ae.key).overlayedDocument);xe!=null&&I.push(new Ha(Ae.key,xe,fS(xe.value.mapValue),Mi.exists(!0)))}return b.mutationQueue.addMutationBatch(O,_,I,m)})).next((he=>{V=he;const I=he.applyToLocalDocumentSet(A,de);return b.documentOverlayCache.saveOverlays(O,he.batchId,I)}))})).then((()=>({batchId:V.batchId,changes:wS(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,b){let _=f.Vu[f.currentUser.toKey()];_||(_=new Cn(Nt)),_=_.insert(m,b),f.Vu[f.currentUser.toKey()]=_})(s,o.batchId,n),await Wc(s,o.changes),await id(s.remoteStore)}catch(o){const c=Ng(o,"Failed to persist write");n.reject(c)}}async function oE(r,e){const n=st(r);try{const s=await dk(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const f=n.Au.get(c);f&&(Pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Pt(f.hu,14607):o.removedDocuments.size>0&&(Pt(f.hu,42227),f.hu=!1))})),await Wc(n,s,e)}catch(s){await Nl(s)}}function qv(r,e,n){const s=st(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const b=st(f);b.onlineState=m;let _=!1;b.queries.forEach(((S,A)=>{for(const V of A.Sa)V.va(m)&&(_=!0)})),_&&xg(b)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eN(r,e,n){const s=st(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let f=new Cn($e.comparator);f=f.insert(c,li.newNoDocument(c,et.min()));const m=Dt().add(c),b=new ed(et.min(),new Map,new Cn(Nt),f,m);await oE(s,b),s.du=s.du.remove(c),s.Au.delete(e),Vg(s)}else await Um(s.localStore,e,!1).then((()=>Fm(s,e,n))).catch(Nl)}async function tN(r,e){const n=st(r),s=e.batch.batchId;try{const o=await hk(n.localStore,e);cE(n,s,null),lE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wc(n,o)}catch(o){await Nl(o)}}async function nN(r,e,n){const s=st(r);try{const o=await(function(f,m){const b=st(f);return b.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return b.mutationQueue.lookupMutationBatch(_,m).next((A=>(Pt(A!==null,37113),S=A.keys(),b.mutationQueue.removeMutationBatch(_,A)))).next((()=>b.mutationQueue.performConsistencyCheck(_))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(_,S,m))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>b.localDocuments.getDocuments(_,S)))}))})(s.localStore,e);cE(s,e,n),lE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Wc(s,o)}catch(o){await Nl(o)}}function lE(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function cE(r,e,n){const s=st(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Fm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||uE(r,s)}))}function uE(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Ag(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Vg(r))}function Hv(r,e,n){for(const s of n)s instanceof sE?(r.Ru.addReference(s.key,e),iN(r,s)):s instanceof rE?(Re(Lg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||uE(r,s.key)):Ze(19791,{wu:s})}function iN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(Re(Lg,"New document in limbo: "+n),r.Eu.add(s),Vg(r))}function Vg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new $e(an.fromString(e)),s=r.fu.next();r.Au.set(s,new Kk(n)),r.du=r.du.insert(n,s),ZS(r.remoteStore,new Ia(gr($h(n.path)),s,"TargetPurposeLimboResolution",Gh.ce))}}async function Wc(r,e,n){const s=st(r),o=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,b)=>{f.push(s.pu(b,e,n).then((_=>{if((_||n)&&s.isPrimaryClient){const S=_?!_.fromCache:n?.targetChanges.get(b.targetId)?.current;s.sharedClientState.updateQueryState(b.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Sg.As(b.targetId,_);c.push(S)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(b,_){const S=st(b);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ue.forEach(_,(V=>ue.forEach(V.Es,(O=>S.persistence.referenceDelegate.addReference(A,V.targetId,O))).next((()=>ue.forEach(V.ds,(O=>S.persistence.referenceDelegate.removeReference(A,V.targetId,O)))))))))}catch(A){if(!Dl(A))throw A;Re(Eg,"Failed to update sequence numbers: "+A)}for(const A of _){const V=A.targetId;if(!A.fromCache){const O=S.Ms.get(V),pe=O.snapshotVersion,de=O.withLastLimboFreeSnapshotVersion(pe);S.Ms=S.Ms.insert(V,de)}}})(s.localStore,c))}async function sN(r,e){const n=st(r);if(!n.currentUser.isEqual(e)){Re(Lg,"User change. New user:",e.toKey());const s=await WS(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((b=>{b.reject(new Te(ae.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Wc(n,s.Ls)}}function rN(r,e){const n=st(r),s=n.Au.get(e);if(s&&s.hu)return Dt().add(s.key);{let o=Dt();const c=n.Iu.get(e);if(!c)return o;for(const f of c){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function hE(r){const e=st(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=oE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eN.bind(null,e),e.Pu.H_=qk.bind(null,e.eventManager),e.Pu.yu=Hk.bind(null,e.eventManager),e}function aN(r){const e=st(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nN.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return uk(this.persistence,new ok,e.initialUser,this.serializer)}Cu(e){return new QS(Tg.mi,this.serializer)}Du(e){return new yk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class oN extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pt(this.persistence.referenceDelegate instanceof xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new KC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new QS((s=>xh.mi(s,n)),this.serializer)}}class Gm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>qv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await zk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Uk})()}createDatastore(e){const n=td(e.databaseInfo.databaseId),s=(function(c){return new Sk(c)})(e.databaseInfo);return(function(c,f,m,b){return new Rk(c,f,m,b)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,f,m){return new Ck(s,o,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>qv(this.syncEngine,n,0)),(function(){return Vv.v()?new Vv:new _k})())}createSyncEngine(e,n){return(function(o,c,f,m,b,_,S){const A=new $k(o,c,f,m,b,_);return S&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=st(n);Re(vo,"RemoteStore shutting down."),s.Ea.add(5),await Qc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gm.provider={build:()=>new Gm};class jg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class lN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Te(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const f=st(o),m={documents:c.map((A=>Mh(f.serializer,A)))},b=await f.Ho("BatchGetDocuments",f.serializer.databaseId,an.emptyPath(),m,c.length),_=new Map;b.forEach((A=>{const V=kC(f.serializer,A);_.set(V.key.toString(),V)}));const S=[];return c.forEach((A=>{const V=_.get(A.toString());Pt(!!V,55234,{key:A}),S.push(V)})),S})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=$e.fromPath(s);this.mutations.push(new OS(o,this.precondition(o)))})),await(async function(s,o){const c=st(s),f={writes:o.map((m=>HS(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,an.emptyPath(),f)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ze(50498,{Gu:e.constructor.name});n=et.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new Te(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(et.min())?Mi.exists(!1):Mi.updateTime(n):Mi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(et.min()))throw new Te(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mi.updateTime(n)}return Mi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cN{constructor(e,n,s,o,c){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=c,this.zu=s.maxAttempts,this.M_=new wg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new lN(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Fc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!LS(n)}return!1}}const Ua="FirestoreClient";class uN{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Di.UNAUTHENTICATED,this.clientId=ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{Re(Ua,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(Re(Ua,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ng(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function bm(r,e){r.asyncQueue.verifyOperationInProgress(),Re(Ua,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await WS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Fv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await hN(r);Re(Ua,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Pv(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Pv(e.remoteStore,o))),r._onlineComponents=e}async function hN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Re(Ua,"Using user provided OfflineComponentProvider");try{await bm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;_l("Error using user provided cache. Falling back to memory cache: "+n),await bm(r,new Lh)}}else Re(Ua,"Using default OfflineComponentProvider"),await bm(r,new oN(void 0));return r._offlineComponents}async function Pg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Re(Ua,"Using user provided OnlineComponentProvider"),await Fv(r,r._uninitializedComponentsProvider._online)):(Re(Ua,"Using default OnlineComponentProvider"),await Fv(r,new Gm))),r._onlineComponents}function dN(r){return Pg(r).then((e=>e.syncEngine))}function fN(r){return Pg(r).then((e=>e.datastore))}async function Vh(r){const e=await Pg(r),n=e.eventManager;return n.onListen=Qk.bind(null,e.syncEngine),n.onUnlisten=Xk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Wk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zk.bind(null,e.syncEngine),n}function mN(r,e,n={}){const s=new mr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,b,_){const S=new jg({next:V=>{S.Nu(),f.enqueueAndForget((()=>Mg(c,A)));const O=V.docs.has(m);!O&&V.fromCache?_.reject(new Te(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&V.fromCache&&b&&b.source==="server"?_.reject(new Te(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(V)},error:V=>_.reject(V)}),A=new Og($h(m.path),S,{includeMetadataChanges:!0,qa:!0});return Dg(c,A)})(await Vh(r),r.asyncQueue,e,n,s))),s.promise}function gN(r,e,n={}){const s=new mr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,b,_){const S=new jg({next:V=>{S.Nu(),f.enqueueAndForget((()=>Mg(c,A))),V.fromCache&&b.source==="server"?_.reject(new Te(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(V)},error:V=>_.reject(V)}),A=new Og(m,S,{includeMetadataChanges:!0,qa:!0});return Dg(c,A)})(await Vh(r),r.asyncQueue,e,n,s))),s.promise}function dE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Gv=new Map;const fE="firestore.googleapis.com",Kv=!0;class $v{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fE,this.ssl=Kv}else this.host=e.host,this.ssl=e.ssl??Kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FC)throw new Te(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new TI;switch(s.type){case"firstParty":return new AI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Te(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Gv.get(n);s&&(Re("ComponentProvider","Removing Datastore"),Gv.delete(n),s.terminate())})(this),Promise.resolve()}}function pN(r,e,n,s={}){r=is(r,sd);const o=Rl(e),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(oT(`https://${m}`),lT("Firestore",!0)),c.host!==fE&&c.host!==m&&_l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...c,host:m,ssl:o,emulatorOptions:s};if(!Hr(b,f)&&(r._setSettings(b),s.mockUserToken)){let _,S;if(typeof s.mockUserToken=="string")_=s.mockUserToken,S=Di.MOCK_USER;else{_=Qw(s.mockUserToken,r._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Te(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Di(A)}r._authCredentials=new SI(new tS(_,S))}}class Eo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class In{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}toJSON(){return{type:In._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Hc(n,In._jsonSchema))return new In(e,s||null,new $e(an.fromString(n.referencePath)))}}In._jsonSchemaVersion="firestore/documentReference/1.0",In._jsonSchema={type:Wn("string",In._jsonSchemaVersion),referencePath:Wn("string")};class xa extends Eo{constructor(e,n,s){super(e,n,$h(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new $e(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function Km(r,e,...n){if(r=ti(r),nS("collection","path",e),r instanceof sd){const s=an.fromString(e,...n);return av(s),new xa(r,null,s)}{if(!(r instanceof In||r instanceof xa))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(an.fromString(e,...n));return av(s),new xa(r.firestore,null,s)}}function Ue(r,e,...n){if(r=ti(r),arguments.length===1&&(e=ug.newId()),nS("doc","path",e),r instanceof sd){const s=an.fromString(e,...n);return rv(s),new In(r,null,new $e(s))}{if(!(r instanceof In||r instanceof xa))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(an.fromString(e,...n));return rv(s),new In(r.firestore,r instanceof xa?r.converter:null,new $e(s))}}const Qv="AsyncQueue";class Wv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wg(this,"async_queue_retry"),this._c=()=>{const s=_m();s&&Re(Qv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=_m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new mr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dl(e))throw e;Re(Qv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,$r("INTERNAL UNHANDLED ERROR: ",Yv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=kg.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ze(47125,{Pc:Yv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Yv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Xv(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Wr extends sd{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Wv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function mE(r,e){const n=typeof r=="object"?r:hT(),s=typeof r=="string"?r:Ih,o=eg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=Kw("firestore");c&&pN(o,...c)}return o}function Yc(r){if(r._terminated)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yN(r),r._firestoreClient}function yN(r){const e=r._freezeSettings(),n=(function(o,c,f,m){return new qI(o,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,dE(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new uN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class Ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ss(Ai.fromBase64String(e))}catch(n){throw new Te(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ss(Ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ss._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,Ss._jsonSchema))return Ss.fromBase64String(e.bytes)}}Ss._jsonSchemaVersion="firestore/bytes/1.0",Ss._jsonSchema={type:Wn("string",Ss._jsonSchemaVersion),bytes:Wn("string")};class Xc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wo{constructor(e){this._methodName=e}}class pr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:Wn("string",pr._jsonSchemaVersion),latitude:Wn("number"),longitude:Wn("number")};class yr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new yr(e.vectorValues);throw new Te(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:Wn("string",yr._jsonSchemaVersion),vectorValues:Wn("object")};const _N=/^__.*__$/;class bN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ha(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class gE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ha(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ac:r})}}class rd{constructor(e,n,s,o,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pE(this.Ac)&&_N.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||td(e)}Cc(e,n,s,o=!1){return new rd({Ac:e,methodName:n,Dc:s,path:wi.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ad(r){const e=r._freezeSettings(),n=td(r._databaseId);return new vN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function yE(r,e,n,s,o,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,e,n,o);Hg("Data must be an object, but it was:",f,s);const m=TE(s,f);let b,_;if(c.merge)b=new Es(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const A of c.mergeFields){const V=$m(e,A,n);if(!f.contains(V))throw new Te(ae.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);EE(S,V)||S.push(V)}b=new Es(S),_=f.fieldTransforms.filter((A=>b.covers(A.field)))}else b=null,_=f.fieldTransforms;return new bN(new Gi(m),b,_)}class Zc extends wo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}function _E(r,e,n){return new rd({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zg extends wo{_toFieldTransform(e){return new Xh(e.path,new Vc)}isEqual(e){return e instanceof zg}}class Bg extends wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_E(this,e,!0),s=this.vc.map((c=>Ao(c,n))),o=new Sl(s);return new Xh(e.path,o)}isEqual(e){return e instanceof Bg&&Hr(this.vc,e.vc)}}class Ug extends wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_E(this,e,!0),s=this.vc.map((c=>Ao(c,n))),o=new El(s);return new Xh(e.path,o)}isEqual(e){return e instanceof Ug&&Hr(this.vc,e.vc)}}class qg extends wo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new jc(e.serializer,IS(e.serializer,this.Fc));return new Xh(e.path,n)}isEqual(e){return e instanceof qg&&this.Fc===e.Fc}}function bE(r,e,n,s){const o=r.Cc(1,e,n);Hg("Data must be an object, but it was:",o,s);const c=[],f=Gi.empty();qa(s,((b,_)=>{const S=Fg(e,b,n);_=ti(_);const A=o.yc(S);if(_ instanceof Zc)c.push(S);else{const V=Ao(_,A);V!=null&&(c.push(S),f.set(S,V))}}));const m=new Es(c);return new gE(f,m,o.fieldTransforms)}function vE(r,e,n,s,o,c){const f=r.Cc(1,e,n),m=[$m(e,s,n)],b=[o];if(c.length%2!=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<c.length;V+=2)m.push($m(e,c[V])),b.push(c[V+1]);const _=[],S=Gi.empty();for(let V=m.length-1;V>=0;--V)if(!EE(_,m[V])){const O=m[V];let pe=b[V];pe=ti(pe);const de=f.yc(O);if(pe instanceof Zc)_.push(O);else{const he=Ao(pe,de);he!=null&&(_.push(O),S.set(O,he))}}const A=new Es(_);return new gE(S,A,f.fieldTransforms)}function TN(r,e,n,s=!1){return Ao(n,r.Cc(s?4:3,e))}function Ao(r,e){if(SE(r=ti(r)))return Hg("Unsupported field value:",e,r),TE(r,e);if(r instanceof wo)return(function(s,o){if(!pE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let f=0;for(const m of s){let b=Ao(m,o.wc(f));b==null&&(b={nullValue:"NULL_VALUE"}),c.push(b),f++}return{arrayValue:{values:c}}})(r,e)}return(function(s,o){if((s=ti(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=bn.fromDate(s);return{timestampValue:Dh(o.serializer,c)}}if(s instanceof bn){const c=new bn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(o.serializer,c)}}if(s instanceof pr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ss)return{bytesValue:zS(o.serializer,s._byteString)};if(s instanceof In){const c=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:bg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof yr)return(function(f,m){return{mapValue:{fields:{[hS]:{stringValue:dS},[Ch]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return pg(m.serializer,_)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Fh(s)}`)})(r,e)}function TE(r,e){const n={};return rS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qa(r,((s,o)=>{const c=Ao(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function SE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof bn||r instanceof pr||r instanceof Ss||r instanceof In||r instanceof wo||r instanceof yr)}function Hg(r,e,n){if(!SE(n)||!iS(n)){const s=Fh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function $m(r,e,n){if((e=ti(e))instanceof Xc)return e._internalPath;if(typeof e=="string")return Fg(r,e);throw jh("Field path arguments must be of type string or ",r,!1,void 0,n)}const SN=new RegExp("[~\\*/\\[\\]]");function Fg(r,e,n){if(e.search(SN)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Xc(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function jh(r,e,n,s,o){const c=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let b="";return(c||f)&&(b+=" (found",c&&(b+=` in field ${s}`),f&&(b+=` in document ${o}`),b+=")"),new Te(ae.INVALID_ARGUMENT,m+r+b)}function EE(r,e){return r.some((n=>n.isEqual(e)))}class Ph{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EN extends Ph{data(){return super.data()}}function Gg(r,e){return typeof e=="string"?Fg(r,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}function wE(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Te(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class wN extends Kg{}function Qm(r,e,...n){let s=[];e instanceof Kg&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((b=>b instanceof $g)).length,m=c.filter((b=>b instanceof od)).length;if(f>1||f>0&&m>0)throw new Te(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class od extends wN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new od(e,n,s)}_apply(e){const n=this._parse(e);return AE(e._query,n),new Eo(e.firestore,e.converter,Vm(e._query,n))}_parse(e){const n=ad(e.firestore);return(function(c,f,m,b,_,S,A){let V;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){Jv(A,S);const pe=[];for(const de of A)pe.push(Zv(b,c,de));V={arrayValue:{values:pe}}}else V=Zv(b,c,A)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||Jv(A,S),V=TN(m,f,A,S==="in"||S==="not-in");return Qn.create(_,S,V)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wm(r,e,n){const s=e,o=Gg("where",r);return od._create(o,s,n)}class $g extends Kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $g(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Zs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let f=o;const m=c.getFlattenedFilters();for(const b of m)AE(f,b),f=Vm(f,b)})(e._query,n),new Eo(e.firestore,e.converter,Vm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Zv(r,e,n){if(typeof(n=ti(n))=="string"){if(n==="")throw new Te(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vS(e)&&n.indexOf("/")!==-1)throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(an.fromString(n));if(!$e.isDocumentKey(s))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return mv(r,new $e(s))}if(n instanceof In)return mv(r,n._key);throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(n)}.`)}function Jv(r,e){if(!Array.isArray(r)||r.length===0)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AE(r,e){const n=(function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Te(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class RE{convertValue(e,n="none"){switch(za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return qa(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[Ch].arrayValue?.values?.map((s=>Vn(s.doubleValue)));return new yr(n)}convertGeoPoint(e){return new pr(Vn(e.latitude),Vn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const n=ja(e);return new bn(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=an.fromString(e);Pt(KS(s),9688,{name:e});const o=new Oc(s.get(1),s.get(3)),c=new $e(s.popFirst(5));return o.isEqual(n)||$r(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function IE(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class AN extends RE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,n)}}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oa extends Ph{constructor(e,n,s,o,c,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Gg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Oa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oa._jsonSchema={type:Wn("string",Oa._jsonSchemaVersion),bundleSource:Wn("string","DocumentSnapshot"),bundleName:Wn("string"),bundle:Wn("string")};class yh extends Oa{data(e={}){return super.data(e)}}class po{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new hl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new yh(this._firestore,this._userDataWriter,s.key,s,new hl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const b=new yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:b,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const b=new yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,S=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),S=f.indexOf(m.doc.key)),{type:RN(m.type),doc:b,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ug.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:r})}}function ai(r){r=is(r,In);const e=is(r.firestore,Wr);return mN(Yc(e),r._key).then((n=>NE(e,r,n)))}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:Wn("string",po._jsonSchemaVersion),bundleSource:Wn("string","QuerySnapshot"),bundleName:Wn("string"),bundle:Wn("string")};class ld extends RE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,n)}}function Ym(r){r=is(r,Eo);const e=is(r.firestore,Wr),n=Yc(e),s=new ld(e);return wE(r._query),gN(n,r._query).then((o=>new po(e,s,r,o)))}function CE(r,e,n){r=is(r,In);const s=is(r.firestore,Wr),o=IE(r.converter,e,n);return Qg(s,[yE(ad(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Mi.none())])}function lt(r,e,n,...s){r=is(r,In);const o=is(r.firestore,Wr),c=ad(o);let f;return f=typeof(e=ti(e))=="string"||e instanceof Xc?vE(c,"updateDoc",r._key,e,n,s):bE(c,"updateDoc",r._key,e),Qg(o,[f.toMutation(r._key,Mi.exists(!0))])}function pl(r){return Qg(is(r.firestore,Wr),[new Jh(r._key,Mi.none())])}function kE(r,...e){r=ti(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xv(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Xv(e[s])){const b=e[s];e[s]=b.next?.bind(b),e[s+1]=b.error?.bind(b),e[s+2]=b.complete?.bind(b)}let c,f,m;if(r instanceof In)f=is(r.firestore,Wr),m=$h(r._key.path),c={next:b=>{e[s]&&e[s](NE(f,r,b))},error:e[s+1],complete:e[s+2]};else{const b=is(r,Eo);f=is(b.firestore,Wr),m=b._query;const _=new ld(f);c={next:S=>{e[s]&&e[s](new po(f,_,b,S))},error:e[s+1],complete:e[s+2]},wE(r._query)}return(function(_,S,A,V){const O=new jg(V),pe=new Og(S,O,A);return _.asyncQueue.enqueueAndForget((async()=>Dg(await Vh(_),pe))),()=>{O.Nu(),_.asyncQueue.enqueueAndForget((async()=>Mg(await Vh(_),pe)))}})(Yc(f),m,o,c)}function Qg(r,e){return(function(s,o){const c=new mr;return s.asyncQueue.enqueueAndForget((async()=>Jk(await dN(s),o,c))),c.promise})(Yc(r),e)}function NE(r,e,n){const s=n.docs.get(e._key),o=new ld(r);return new Oa(r,o,e._key,s,new hl(n.hasPendingWrites,n.fromCache),e.converter)}const IN={maxAttempts:5};function Sc(r,e){if((r=ti(r)).firestore!==e)throw new Te(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class CN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ad(e)}get(e){const n=Sc(e,this._firestore),s=new AN(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ze(24041);const c=o[0];if(c.isFoundDocument())return new Ph(this._firestore,s,c.key,c,n.converter);if(c.isNoDocument())return new Ph(this._firestore,s,n._key,null,n.converter);throw Ze(18433,{doc:c})}))}set(e,n,s){const o=Sc(e,this._firestore),c=IE(o.converter,n,s),f=yE(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,s);return this._transaction.set(o._key,f),this}update(e,n,s,...o){const c=Sc(e,this._firestore);let f;return f=typeof(n=ti(n))=="string"||n instanceof Xc?vE(this._dataReader,"Transaction.update",c._key,n,s,o):bE(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,f),this}delete(e){const n=Sc(e,this._firestore);return this._transaction.delete(n._key),this}}class kN extends CN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Sc(e,this._firestore),s=new ld(this._firestore);return super.get(e).then((o=>new Oa(this._firestore,s,n._key,o._document,new hl(!1,!1),n.converter)))}}function eT(r,e,n){r=is(r,Wr);const s={...IN,...n};return(function(c){if(c.maxAttempts<1)throw new Te(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(c,f,m){const b=new mr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await fN(c);new cN(c.asyncQueue,_,m,f,b).ju()})),b.promise})(Yc(r),(o=>e(new kN(r,o))),s)}function Ti(){return new Zc("deleteField")}function Fi(){return new zg("serverTimestamp")}function cl(...r){return new Bg("arrayUnion",r)}function yc(...r){return new Ug("arrayRemove",r)}function vm(r){return new qg("increment",r)}(function(e,n=!0){(function(o){kl=o})(Il),yl(new yo("firestore",((s,{instanceIdentifier:o,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Wr(new EI(s.getProvider("auth-internal")),new RI(f,s.getProvider("app-check-internal")),(function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Te(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(_.options.projectId,S)})(f,o),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Na(tv,nv,e),Na(tv,nv,"esm2020")})();const Si={astronomie_geographie:{name:"Astronomie & Geographie",emoji:"",questions:[{id:"ag_1",q:"Lieber am Tag oder in der Nacht aktiv sein?",a:"Tag ",b:"Nacht "},{id:"ag_2",q:"Lieber im Regenwald oder in der Wste stranden?",a:"Regenwald ",b:"Wste "},{id:"ag_3",q:"Lieber den Ozean oder riesige Gebirge bestaunen?",a:"Ozean ",b:"Gebirge "},{id:"ag_4",q:"Lieber ewiges Eis oder ewige Hitze ertragen?",a:"Eis ",b:"Hitze "},{id:"ag_5",q:"Lieber eine Stdtereise oder einen Natururlaub machen?",a:"Stadt ",b:"Natur "},{id:"ag_6",q:"Lieber auf einer Insel oder auf dem Festland leben?",a:"Insel ",b:"Festland "},{id:"ag_7",q:"Lieber ein Gewitter oder Sonnenschein beobachten?",a:"Gewitter ",b:"Sonne "},{id:"ag_8",q:"Lieber Schnee zu Weihnachten oder 30 Grad am Strand?",a:"Schnee ",b:"30 Grad "},{id:"ag_9",q:"Lieber zum Mond fliegen oder die Tiefsee erforschen?",a:"Mond ",b:"Tiefsee "},{id:"ag_10",q:"Lieber im Flachland oder in den Bergen wohnen?",a:"Flachland ",b:"Berge "},{id:"ag_11",q:"Lieber im Fluss oder im See schwimmen?",a:"Fluss ",b:"See "},{id:"ag_12",q:"Lieber durch den Dschungel oder durch den Nadelwald spazieren?",a:"Dschungel ",b:"Nadelwald "},{id:"ag_13",q:"Lieber einen Vulkan oder einen Geysir sehen?",a:"Vulkan ",b:"Geysir "},{id:"ag_14",q:"Lieber Polarlichter oder eine Sonnenfinsternis sehen?",a:"Polarlicht ",b:"Sonnenfinsternis "},{id:"ag_15",q:"Lieber den Mars besiedeln oder die Erde retten?",a:"Mars ",b:"Erde "},{id:"ag_16",q:"Lieber Urlaub im Camper oder auf dem Kreuzfahrtschiff machen?",a:"Camper ",b:"Schiff "},{id:"ag_17",q:"Lieber dnne Hhenluft oder salzige Meeresbrise atmen?",a:"Berge ",b:"Meer "},{id:"ag_18",q:"Lieber fliegen knnen oder die Zeit anhalten?",a:"Fliegen ",b:"Zeitstopp "}]},essen_trinken:{name:"Essen & Trinken",emoji:"",questions:[{id:"et_1",q:"Lieber Nutella mit oder ohne Butter essen?",a:"Mit Butter ",b:"Ohne Butter "},{id:"et_2",q:"Lieber Kaffee oder Tee am Morgen trinken?",a:"Kaffee ",b:"Tee "},{id:"et_3",q:"Lieber nie wieder Pizza oder nie wieder Pasta essen?",a:"Keine Pizza ",b:"Keine Pasta "},{id:"et_4",q:"Lieber Schokolade oder Gummibrchen naschen?",a:"Schokolade ",b:"Gummibrchen "},{id:"et_5",q:"Lieber einen Burger oder einen Dner essen?",a:"Burger ",b:"Dner "},{id:"et_6",q:"Lieber selbst kochen oder Essen bestellen?",a:"Kochen ",b:"Bestellen "},{id:"et_7",q:"Lieber Vanille- oder Schokoeis essen?",a:"Vanille ",b:"Schoko "},{id:"et_8",q:"Lieber ses oder salziges Popcorn essen?",a:"S ",b:"Salzig "},{id:"et_9",q:"Lieber Wein oder Bier am Abend trinken?",a:"Wein ",b:"Bier "},{id:"et_10",q:"Lieber Ksebrot oder Wurstbrot essen?",a:"Kse ",b:"Wurst "},{id:"et_11",q:"Lieber frhstcken oder zu Abend essen?",a:"Frhstck ",b:"Abendessen "},{id:"et_12",q:"Lieber Cola oder Saft trinken?",a:"Cola ",b:"Saft "},{id:"et_13",q:"Lieber Sahnetorte oder trockenen Kuchen essen?",a:"Torte ",b:"Kuchen "},{id:"et_14",q:"Lieber Pommes mit Ketchup oder Mayo essen?",a:"Ketchup ",b:"Mayo "},{id:"et_15",q:"Lieber eine Vorspeise oder ein Dessert bestellen?",a:"Vorspeise ",b:"Dessert "},{id:"et_16",q:"Lieber stilles Wasser oder Wasser mit Sprudel trinken?",a:"Still ",b:"Sprudel "},{id:"et_17",q:"Lieber Kartoffeln oder Reis als Beilage?",a:"Kartoffeln ",b:"Reis "},{id:"et_18",q:"Lieber s oder herzhaft frhstcken?",a:"S ",b:"Herzhaft "},{id:"et_19",q:"Lieber scharf oder mild essen?",a:"Scharf ",b:"Mild "},{id:"et_20",q:"Lieber Pizza Hawaii oder Pizza Salami essen?",a:"Hawaii ",b:"Salami "}]},flora_fauna:{name:"Flora & Fauna",emoji:"",questions:[{id:"ff_1",q:"Lieber einen Hund oder eine Katze haben?",a:"Hund ",b:"Katze "},{id:"ff_2",q:"Lieber Topfpflanzen oder Schnittblumen kaufen?",a:"Topf ",b:"Strau "},{id:"ff_3",q:"Lieber Vgel oder Fische beobachten?",a:"Vgel ",b:"Fische "},{id:"ff_4",q:"Lieber Kakteen oder Orchideen pflegen?",a:"Kaktus ",b:"Orchidee "},{id:"ff_5",q:"Lieber ein Pferd oder einen Delfin besitzen?",a:"Pferd ",b:"Delfin "},{id:"ff_6",q:"Lieber im Garten oder im Wald sein?",a:"Garten ",b:"Wald "},{id:"ff_7",q:"Lieber die Spinne fangen oder wegrennen?",a:"Fangen ",b:"Wegrennen "},{id:"ff_8",q:"Lieber einen Dino oder einen Drachen zhmen?",a:"Dino ",b:"Drache "},{id:"ff_9",q:"Lieber Nadelbume oder Laubbume im Garten?",a:"Nadel ",b:"Laub "},{id:"ff_10",q:"Lieber Sugetiere oder Reptilien?",a:"Suger ",b:"Reptil "},{id:"ff_11",q:"Lieber Obst oder Gemse anbauen?",a:"Obst ",b:"Gemse "},{id:"ff_12",q:"Lieber mit Haien schwimmen oder Lwen begegnen?",a:"Hai ",b:"Lwe "},{id:"ff_13",q:"Lieber Wespen oder Mcken ertragen?",a:"Wespe ",b:"Mcke "},{id:"ff_14",q:"Lieber Elefanten oder Wale sehen?",a:"Elefant ",b:"Wal "},{id:"ff_15",q:"Lieber duftende oder bunte Blumen?",a:"Duft ",b:"Farbe "},{id:"ff_16",q:"Lieber einem Wolf oder einem Bren begegnen?",a:"Wolf ",b:"Br "},{id:"ff_17",q:"Lieber in den Zoo oder in einen Wildpark gehen?",a:"Zoo ",b:"Wildpark "},{id:"ff_18",q:"Lieber Insekten essen oder hungern mssen?",a:"Insekten ",b:"Hungern "}]},forschung_wissenschaft:{name:"Forschung & Wissenschaft",emoji:"",questions:[{id:"fw_1",q:"Lieber Biologie- oder Physikunterricht?",a:"Bio ",b:"Physik "},{id:"fw_2",q:"Lieber im Labor oder drauen im Feld arbeiten?",a:"Labor ",b:"Drauen "},{id:"fw_3",q:"Lieber die Weltformel finden oder unsterblich sein?",a:"Formel ",b:"Unsterblich "},{id:"fw_4",q:"Lieber durch ein Mikroskop oder ein Teleskop schauen?",a:"Mikroskop ",b:"Teleskop "},{id:"fw_5",q:"Lieber Chemie oder Mathe verstehen?",a:"Chemie ",b:"Mathe "},{id:"fw_6",q:"Lieber in die Zukunft oder Vergangenheit reisen?",a:"Zukunft ",b:"Vergangenheit "},{id:"fw_7",q:"Lieber Aliens oder eine Super-KI entdecken?",a:"Aliens ",b:"KI "},{id:"fw_8",q:"Lieber wissen WANN oder WIE du stirbst?",a:"Wann ",b:"Wie "},{id:"fw_9",q:"Lieber die Tiefsee oder das Weltall erforschen?",a:"Tiefsee ",b:"Weltall "},{id:"fw_10",q:"Lieber Elon Musk oder Albert Einstein treffen?",a:"Musk ",b:"Einstein "},{id:"fw_11",q:"Lieber Genetik oder Informatik studieren?",a:"Genetik ",b:"Informatik "},{id:"fw_12",q:"Lieber auf Fakten oder auf Intuition vertrauen?",a:"Fakten ",b:"Bauchgefhl "},{id:"fw_13",q:"Lieber einen Roboter oder einen Klon haben?",a:"Roboter ",b:"Klon "},{id:"fw_14",q:"Lieber ein Entdecker oder ein Erfinder sein?",a:"Entdecker ",b:"Erfinder "},{id:"fw_15",q:"Lieber den Nobelpreis oder ein Patent erhalten?",a:"Nobelpreis ",b:"Patent "}]},geschichte_politik:{name:"Geschichte & Politik",emoji:"",questions:[{id:"gp_1",q:"Lieber in der Antike oder Zukunft leben?",a:"Antike ",b:"Zukunft "},{id:"gp_2",q:"Lieber Knig oder gewhlter Prsident sein?",a:"Knig ",b:"Prsident "},{id:"gp_3",q:"Lieber ein Ritter oder ein Pirat sein?",a:"Ritter ",b:"Pirat "},{id:"gp_4",q:"Lieber Revolutionr oder Stratege sein?",a:"Revolutionr ",b:"Stratege "},{id:"gp_5",q:"Lieber im Mittelalter oder in einem Sci-Fi Szenario leben?",a:"Mittelalter ",b:"Sci-Fi "},{id:"gp_6",q:"Lieber in einer Demokratie oder Monarchie leben?",a:"Demokratie ",b:"Monarchie "},{id:"gp_7",q:"Lieber reformieren oder eine Revolution starten?",a:"Reform ",b:"Revolution "},{id:"gp_8",q:"Lieber in einem Imperium oder Stadtstaat leben?",a:"Imperium ",b:"Stadtstaat "},{id:"gp_9",q:"Lieber echte Dinos oder den Pyramidenbau sehen?",a:"Dinos ",b:"Pyramiden "},{id:"gp_10",q:"Lieber Wirtschaft oder Umwelt priorisieren?",a:"Wirtschaft ",b:"Umwelt "},{id:"gp_11",q:"Lieber global oder national denken?",a:"Global ",b:"National "},{id:"gp_12",q:"Lieber Tradition oder Fortschritt bewahren?",a:"Tradition ",b:"Fortschritt "},{id:"gp_13",q:"Lieber Napoleon oder Caesar interviewen?",a:"Napoleon ",b:"Caesar "},{id:"gp_14",q:"Lieber auf Innenpolitik oder Auenpolitik konzentrieren?",a:"Innen ",b:"Auen "},{id:"gp_15",q:"Lieber Wahlpflicht oder Wahlrecht haben?",a:"Pflicht ",b:"Recht "},{id:"gp_16",q:"Lieber 100 Jahre in die Vergangenheit oder Zukunft reisen?",a:"Vergangenheit ",b:"Zukunft "}]},medien_unterhaltung:{name:"Medien & Unterhaltung",emoji:"",questions:[{id:"mu_1",q:"Lieber einen Film oder eine Serie schauen?",a:"Film ",b:"Serie "},{id:"mu_2",q:"Lieber Netflix oder YouTube nutzen?",a:"Netflix ",b:"YouTube "},{id:"mu_3",q:"Lieber ins Kino gehen oder auf der Couch bleiben?",a:"Kino ",b:"Couch "},{id:"mu_4",q:"Lieber Marvel oder DC schauen?",a:"Marvel ",b:"DC "},{id:"mu_5",q:"Lieber Comedy oder Horror schauen?",a:"Comedy ",b:"Horror "},{id:"mu_6",q:"Lieber Star Wars oder Star Trek Fan sein?",a:"Star Wars ",b:"Star Trek "},{id:"mu_7",q:"Lieber eine Doku oder einen Actionfilm sehen?",a:"Doku ",b:"Action "},{id:"mu_8",q:"Lieber im Originalton oder mit Synchro schauen?",a:"Original ",b:"Synchro "},{id:"mu_9",q:"Lieber Harry Potter oder Herr der Ringe schauen?",a:"Potter ",b:"HdR "},{id:"mu_10",q:"Lieber Spotify oder Radio hren?",a:"Spotify ",b:"Radio "},{id:"mu_11",q:"Lieber das Buch lesen oder den Film schauen?",a:"Buch ",b:"Film "},{id:"mu_12",q:"Lieber der Bsewicht oder der Held sein?",a:"Bsewicht ",b:"Held "},{id:"mu_13",q:"Lieber Game of Thrones Anfang oder Ende?",a:"Anfang ",b:"Ende "},{id:"mu_14",q:"Lieber Spoiler wissen oder berrascht werden?",a:"Spoiler ",b:"berraschung "},{id:"mu_15",q:"Lieber Trash-TV oder Arte schauen?",a:"Trash ",b:"Arte "},{id:"mu_16",q:"Lieber E-Books oder Papierbcher lesen?",a:"E-Book ",b:"Papier "}]},musik:{name:"Musik",emoji:"",questions:[{id:"mk_1",q:"Lieber Rock oder Hip-Hop hren?",a:"Rock ",b:"Hip-Hop "},{id:"mk_2",q:"Lieber zu Techno oder Schlager feiern?",a:"Techno ",b:"Schlager "},{id:"mk_3",q:"Lieber Musik mit Gesang oder Instrumental hren?",a:"Gesang ",b:"Instrumental "},{id:"mk_4",q:"Lieber auf ein Festival oder ein Konzert gehen?",a:"Festival ",b:"Konzert "},{id:"mk_5",q:"Lieber Snger oder Gitarrist sein?",a:"Snger ",b:"Gitarrist "},{id:"mk_6",q:"Lieber 80er oder 2000er Musik hren?",a:"80er ",b:"2000er "},{id:"mk_7",q:"Lieber Gitarre oder Klavier spielen knnen?",a:"Gitarre ",b:"Klavier "},{id:"mk_8",q:"Lieber Boybands oder Solo-Knstler hren?",a:"Boyband ",b:"Solo "},{id:"mk_9",q:"Lieber In-Ear oder Over-Ear Kopfhrer tragen?",a:"In-Ear ",b:"Over-Ear "},{id:"mk_10",q:"Lieber Vinyl oder Streaming nutzen?",a:"Vinyl ",b:"Streaming "},{id:"mk_11",q:"Lieber traurige oder frhliche Musik hren?",a:"Traurig ",b:"Frhlich "},{id:"mk_12",q:"Lieber Jazz oder Metal hren?",a:"Jazz ",b:"Metal "},{id:"mk_13",q:"Lieber im Club tanzen oder trinken?",a:"Tanzen ",b:"Trinken "},{id:"mk_14",q:"Lieber nur noch eine Band hren oder gar keine Musik mehr?",a:"Eine Band ",b:"Keine Musik "},{id:"mk_15",q:"Lieber Musik selber machen oder nur hren?",a:"Machen ",b:"Hren "}]},sport:{name:"Sport",emoji:"",questions:[{id:"sp_1",q:"Lieber Teamsport oder Einzelsport machen?",a:"Team ",b:"Einzel "},{id:"sp_2",q:"Lieber Sport gucken oder selbst machen?",a:"Gucken ",b:"Machen "},{id:"sp_3",q:"Lieber morgens oder abends trainieren?",a:"Morgens ",b:"Abends "},{id:"sp_4",q:"Lieber Cardio oder Krafttraining machen?",a:"Cardio ",b:"Kraft "},{id:"sp_5",q:"Lieber Fuball oder Formel 1 schauen?",a:"Fuball ",b:"Formel 1 "},{id:"sp_6",q:"Lieber Yoga oder Boxen machen?",a:"Yoga ",b:"Boxen "},{id:"sp_7",q:"Lieber Olympia oder die WM gewinnen?",a:"Olympia ",b:"WM "},{id:"sp_8",q:"Lieber siegen oder Spa haben?",a:"Siegen ",b:"Spa "},{id:"sp_9",q:"Lieber Schwimmen oder Joggen gehen?",a:"Schwimmen ",b:"Joggen "},{id:"sp_10",q:"Lieber Tennis oder Tischtennis spielen?",a:"Tennis ",b:"Tischtennis "},{id:"sp_11",q:"Lieber Fahrrad oder E-Bike fahren?",a:"Rad ",b:"E-Bike "},{id:"sp_12",q:"Lieber im Gym oder im Wald trainieren?",a:"Gym ",b:"Wald "},{id:"sp_13",q:"Lieber Fallschirm springen oder wandern gehen?",a:"Fallschirm ",b:"Wandern "},{id:"sp_14",q:"Lieber Ski oder Snowboard fahren?",a:"Ski ",b:"Snowboard "},{id:"sp_15",q:"Lieber Muskelkater haben oder faul sein?",a:"Muskelkater ",b:"Faul sein "}]},technik_wirtschaft:{name:"Technik & Wirtschaft",emoji:"",questions:[{id:"tw_1",q:"Lieber Apple oder Android nutzen?",a:"Apple ",b:"Android "},{id:"tw_2",q:"Lieber Windows oder Mac nutzen?",a:"Windows ",b:"Mac "},{id:"tw_3",q:"Lieber bar oder mit Karte zahlen?",a:"Bar ",b:"Karte "},{id:"tw_4",q:"Lieber Chef oder Angestellter sein?",a:"Chef ",b:"Angestellter "},{id:"tw_5",q:"Lieber im Homeoffice oder im Bro arbeiten?",a:"Homeoffice ",b:"Bro "},{id:"tw_6",q:"Lieber Sprachnachricht oder Text senden?",a:"Audio ",b:"Text "},{id:"tw_7",q:"Lieber Online oder im Laden einkaufen?",a:"Online ",b:"Laden "},{id:"tw_8",q:"Lieber in Aktien oder ins Sparbuch investieren?",a:"Aktien ",b:"Sparbuch "},{id:"tw_9",q:"Lieber auf Krypto oder Gold setzen?",a:"Krypto ",b:"Gold "},{id:"tw_10",q:"Lieber fliegen oder beamen knnen?",a:"Fliegen ",b:"Beamen "},{id:"tw_11",q:"Lieber Instagram oder TikTok nutzen?",a:"Insta ",b:"TikTok "},{id:"tw_12",q:"Lieber Elektro oder Verbrenner fahren?",a:"Elektro ",b:"Verbrenner "},{id:"tw_13",q:"Lieber per Sprache oder mit Knpfen steuern?",a:"Sprache ",b:"Knpfe "},{id:"tw_14",q:"Lieber Karriere machen oder viel Freizeit haben?",a:"Karriere ",b:"Freizeit "},{id:"tw_15",q:"Lieber reich oder berhmt sein?",a:"Reich ",b:"Berhmt "},{id:"tw_16",q:"Lieber leeres Postfach oder Chaos haben?",a:"Zero ",b:"Chaos "}]},gaming:{name:"Gaming",emoji:"",questions:[{id:"gm_1",q:"Lieber hohen Ping (Lag) oder Ruckeln (FPS) haben?",a:"Lag ",b:"Ruckeln "},{id:"gm_2",q:"Lieber Spielstand verlieren oder gebannt werden?",a:"Spielstand weg ",b:"Bann "},{id:"gm_3",q:"Lieber ein glcklicher Noob oder ein gestresster Pro sein?",a:"Noob ",b:"Pro "},{id:"gm_4",q:"Lieber Open World oder lineare Story spielen?",a:"Open World ",b:"Story "},{id:"gm_5",q:"Lieber am PC oder an der Konsole zocken?",a:"PC ",b:"Konsole "},{id:"gm_6",q:"Lieber mit Controller oder Maus spielen?",a:"Controller ",b:"Maus "},{id:"gm_7",q:"Lieber Survival oder Creative Modus spielen?",a:"Survival ",b:"Creative "},{id:"gm_8",q:"Lieber gute Grafik oder gute Story haben?",a:"Grafik ",b:"Story "},{id:"gm_9",q:"Lieber toxisch gewinnen oder nett verlieren?",a:"Gewinnen ",b:"Verlieren "},{id:"gm_10",q:"Lieber Singleplayer oder Multiplayer spielen?",a:"Single ",b:"Multi "},{id:"gm_11",q:"Lieber kostenlos (mit Werbung) oder Vollpreis spielen?",a:"Kostenlos ",b:"Vollpreis "},{id:"gm_12",q:"Lieber campen oder rushen?",a:"Campen ",b:"Rushen "},{id:"gm_13",q:"Lieber 100x versuchen oder beim ersten Mal schaffen?",a:"Tryhard ",b:"First Try "},{id:"gm_14",q:"Lieber Healer oder Damage Dealer spielen?",a:"Healer ",b:"Damage "},{id:"gm_15",q:"Lieber Retro-Games oder moderne Spiele zocken?",a:"Retro ",b:"Modern "}]},diverses:{name:"Diverses / Persnlichkeit",emoji:"",questions:[{id:"div_1",q:"Lieber unsichtbar sein oder fliegen knnen?",a:"Unsichtbar ",b:"Fliegen "},{id:"div_2",q:"Lieber immer die Wahrheit sagen oder immer lgen mssen?",a:"Wahrheit ",b:"Lge "},{id:"div_3",q:"Lieber frh aufstehen oder lange wach bleiben?",a:"Frh ",b:"Spt "},{id:"div_4",q:"Lieber nie wieder Musik hren oder nie wieder Filme sehen?",a:"Keine Musik ",b:"Keine Filme "},{id:"div_5",q:"Lieber mehr Zeit oder mehr Geld haben?",a:"Zeit ",b:"Geld "},{id:"div_6",q:"Lieber mit Socken oder barfu schlafen?",a:"An ",b:"Aus "},{id:"div_7",q:"Lieber in die Vergangenheit oder Zukunft reisen?",a:"Vergangenheit ",b:"Zukunft "},{id:"div_8",q:"Lieber chaotisch oder ordentlich sein?",a:"Chaos ",b:"Ordnung "},{id:"div_9",q:"Lieber Gedanken lesen oder mit Tieren sprechen knnen?",a:"Gedanken ",b:"Tiere "},{id:"div_10",q:"Lieber Tattoos oder Piercings haben?",a:"Tattoo ",b:"Piercing "},{id:"div_11",q:"Lieber weich oder hart liegen?",a:"Weich ",b:"Hart "},{id:"div_12",q:"Lieber auf das Handy oder das Auto verzichten?",a:"Kein Handy ",b:"Kein Auto "},{id:"div_13",q:"Lieber morgens oder abends duschen?",a:"Morgens ",b:"Abends "},{id:"div_14",q:"Lieber im Lotto gewinnen oder den Traumjob finden?",a:"Lotto ",b:"Traumjob "},{id:"div_15",q:"Lieber offene Hose oder Zahnlcke haben?",a:"Hose offen ",b:"Zahnlcke "},{id:"div_16",q:"Lieber an Geister oder an Aliens glauben?",a:"Geister ",b:"Aliens "}]},brettspiel:{name:"Brettspiel",emoji:"",questions:[{id:"bs_1",q:"Wenn ich ein Parfm kreieren msste, wonach wrde es am ehesten riechen?",a:"Frisch gemhter Rasen & Benzin",b:"Warme Pizza & Knoblauch",c:"Verbranntes Toast & Verzweiflung",d:"Neues Auto & alter Dachboden"},{id:"bs_2",q:"Was wre am ehesten meine erste Amtshandlung, wenn ich fr einen Tag Gott wre?",a:"Mcken ausrotten (ersatzlos!)",b:"Festlegen, dass Pizza gesund ist und Brokkoli dick macht",c:"Jedem Menschen ein Einhorn schenken",d:"Montags das Aufstehen verbieten"},{id:"bs_3",q:"Wie wrde ich am ehesten versuchen, ein Alien von der Menschheit zu berzeugen?",a:"Ich zeige ihnen se Katzenvideos",b:"Ich lade sie auf einen Dner ein",c:"Ich zeige ihnen Memes ber das Ende der Welt",d:"Wir sind verloren  ich helfe ihnen beim Zerstren"},{id:"bs_4",q:"Was ist am ehesten mein unntigstes Talent?",a:"Mit der Zunge die Nasenspitze berhren",b:"Extrem laut mit den Fingern schnippen",c:"Die Namen aller Pokmon auswendig wissen",d:"So tun, als wrde ich eine unsichtbare Treppe runtergehen"},{id:"bs_5",q:"In welcher Reality-Show wrde ich am ehesten landen?",a:"Shopping Queen (wegen meines fragwrdigen Stils)",b:"Das Sommerhaus der Stars (Drama ist mein Vorname)",c:"Bares fr Rares (um meinen alten Schrott zu verkaufen)",d:"Naked Survival (und ich wrde nach 5 Minuten weinen)"},{id:"bs_6",q:"Wie wrde mein eigener Freizeitpark am ehesten heien?",a:"Nickerchen-Land (berall stehen Sofas)",b:"Chaos-Canyon (nichts funktioniert, aber es macht Spa)",c:"Frittier-Paradies (alles ist aus Teig)",d:"Prokrastinations-World (Erffnung ist auf morgen verschoben)"},{id:"bs_7",q:"Was ist am ehesten der Song, bei dem ich sofort die Party verlasse?",a:"Atemlos durch die Nacht (Helene Fischer)",b:"Last Christmas (im Oktober)",c:"Baby Shark in Dauerschleife",d:"Den Ententanz"},{id:"bs_8",q:"Welches Objekt wrde ich am ehesten bei einer Zombie-Apokalypse als Waffe whlen?",a:"Eine elektrische Zahnbrste",b:"Eine gefrorene Salami",c:"Den Selfie-Stick (fr den letzten Post)",d:"Eine Pfanne (der Klassiker)"},{id:"bs_9",q:"Was ist am ehesten die merkwrdigste Sache, die ich je gegessen habe?",a:"Eine Mutprobe aus dem Garten (Regenwurm & Co.)",b:"Etwas, das 3 Monate ber dem MHD war",c:"Eine Kombination wie Nutella mit Salami",d:"Kreide in der Grundschule"},{id:"bs_10",q:"Wie wrde ich am ehesten eine Bank ausrauben?",a:"Mit einer Wasserpistole und einer Socke ber dem Kopf",b:"Ich wrde hflich nach dem Geld fragen",c:"Mit einem extrem komplizierten Plan, der sofort scheitert",d:"Gar nicht, ich wrde mich im Fluchtauto verfahren"},{id:"bs_11",q:"Wenn ich ein Mbelstck wre, welches wre ich am ehesten?",a:"Ein wackeliger Hocker",b:"Eine gemtliche, aber leicht fleckige Couch",c:"Ein Design-Regal, das niemand anfassen darf",d:"Die Minibar (immer gut gefllt)"},{id:"bs_12",q:"Was ist am ehesten mein Move auf der Tanzflche?",a:"Der betrunkene Onkel (rhythmisches Wippen)",b:"Der DNA-Test / Staubsauger (extrem tief am Boden)",c:"Ich stehe nur am Rand und halte mein Getrnk fest",d:"Ich bin der King/die Queen  Breakdance-Einlage inklusive"},{id:"bs_13",q:"Was wre am ehesten die Schlagzeile nach meiner Verhaftung?",a:"Person versuchte, Eichhrnchen zu hypnotisieren",b:"Wegen zu lauten Singens unter der Dusche festgenommen",c:"Versuchter Diebstahl von Gratis-Proben im Drogeriemarkt",d:"Aus Versehen ins falsche Haus eingebrochen und dort eingeschlafen"},{id:"bs_14",q:"Was wrde ich am ehesten tun, wenn ich eine dritte Hand am Rcken htte?",a:"Mich endlich berall selbst kratzen knnen",b:"Profi-Jongleur werden",c:"Sie unter einem weiten Pulli verstecken und Leute erschrecken",d:"Damit beim Zocken gleichzeitig Pizza essen"},{id:"bs_15",q:"Wie viele Tage wrde ich am ehesten im Dschungelcamp berleben?",a:"Ich wrde schon beim Helikopterflug aussteigen",b:"Genau 3 Tage, bis das erste Insekt mich ansieht",c:"Ich wrde gewinnen, weil ich alles esse",d:"Ich wrde wegen Regelversten rausgeworfen"},{id:"bs_16",q:"Was ist am ehesten meine peinlichste Google-Suche der letzten Zeit?",a:"Wie koche ich Wasser?",b:"Ab wann ist man ein Erwachsener?",c:"Warum guckt mich meine Katze so wertend an?",d:"Promi XY nackt"},{id:"bs_17",q:"Wenn mein Leben eine Sitcom wre, wie wrde der Titelsong am ehesten klingen?",a:"Ein trauriges Saxophon-Solo",b:"Aggressiver Heavy Metal",c:"Eine frhliche Pfeif-Melodie (die nervt)",d:"Der Sound eines abstrzenden Computers"},{id:"bs_18",q:"Was wrde ich am ehesten tun, wenn ich unsichtbar wre?",a:"Leute im Supermarkt erschrecken",b:"In geheime Meetings der Regierung schleichen",c:"Kostenlos ins Kino gehen",d:"Den ganzen Tag nackt drauen rumlaufen"},{id:"bs_19",q:"Welche fiktive Figur wre am ehesten mein idealer bester Freund?",a:"Patrick Star (SpongeBob)",b:"Sherlock Holmes (fr die Rtsel)",c:"Yoda (fr die Lebensweisheiten)",d:"Der Grinch"},{id:"bs_20",q:"Was ist am ehesten mein Endgegner im Haushalt?",a:"Das Beziehen der Bettdecke",b:"Die Steuererklrung",c:"Das Ausrumen der Splmaschine",d:"Socken, die nach dem Waschen keine Partner mehr haben"},{id:"bs_21",q:"Wie wrde ich am ehesten heien, wenn ich ein Rapper wre?",a:"MC Mdigkeit",b:"Lil' Verpeilt",c:"Dr. Dner",d:"Money Schmutz"},{id:"bs_22",q:"Was wre am ehesten das Schlimmste, was auf meinem Grabstein stehen knnte?",a:"Er/Sie hat das WLAN-Passwort mit ins Grab genommen.",b:"Er/Sie war stets bemht.",c:"Habe ich den Herd ausgemacht?",d:"Ladebalken bei 99% stehen geblieben."},{id:"bs_23",q:"Wenn ich eine neue Sportart erfinden msste, was wre das am ehesten?",a:"Extrem-Couch-Chilling",b:"Synchron-Ghnen",c:"Wett-Einkaufswagen-Rennen",d:"Weitwurf mit nassen Socken"},{id:"bs_24",q:"Was wre am ehesten mein letztes Abendmahl?",a:"Ein Eimer voll mit Pommes",b:"Ein 20-Gnge-Men, um die Hinrichtung hinauszuzgern",c:"Eine Schssel Msli (mit Wasser, weil keine Milch da ist)",d:"Ein Glckskeks ohne Zettel"},{id:"bs_25",q:"Wie reagiere ich am ehesten, wenn ich im Fahrstuhl mit einer fremden Person stecke?",a:"Ich fange sofort an, meine ganze Lebensgeschichte zu erzhlen",b:"Ich drcke panisch alle Knpfe",c:"Ich lege mich schlafen, bis Hilfe kommt",d:"Ich tue so, als wre ich der Techniker"},{id:"bs_26",q:"Welche App auf meinem Handy ist am ehesten peinlich?",a:"Eine App zum Kalorienzhlen (die ich nie nutze)",b:"Ein Talking Tom Abklatsch",c:"Eine Dating-App fr Haustierbesitzer",d:"Ein Spiel, fr das ich schon echtes Geld ausgegeben habe"},{id:"bs_27",q:"Was wrde ich am ehesten tun, wenn ich im Lotto gewinne (aber nur 1 Euro)?",a:"Ihn stolz einrahmen",b:"Eine einzige Kaugummi-Kugel kaufen",c:"Ihn jemandem schenken und so tun, als wre ich grozgig",d:"Mich ber die Steuer beschweren"},{id:"bs_28",q:"Wenn ich eine historische Person treffen knnte, wer wre es am ehesten?",a:"Einstein (um ihn zu fragen, ob er meine Hausaufgaben macht)",b:"Cleopatra (um Schmink-Tipps zu bekommen)",c:"Napoleon (um zu sehen, wie klein er wirklich war)",d:"Der Erfinder des Rades (um ihn zu fragen: Warum nicht quadratisch?)"},{id:"bs_29",q:"Was ist am ehesten meine geheime Superkraft?",a:"Ich finde immer die langsamste Schlange an der Kasse",b:"Ich kann Dinge aufrumen, sodass sie nie wieder auftauchen",c:"Ich erkenne Schauspieler in Filmen, wei aber nie ihren Namen",d:"Ich kann 12 Stunden am Stck schlafen und trotzdem mde sein"},{id:"bs_30",q:"Was ist am ehesten mein Spirit Animal beim Feiern?",a:"Die Grille (macht viel Lrm, man sieht sie aber nicht)",b:"Der Goldfisch (vergisst nach 3 Sekunden, welches Getrnk er hat)",c:"Der Pfau (muss im Mittelpunkt stehen)",d:"Der Waschbr (sucht am Ende nur was zu essen)"},{id:"bs_31",q:"Wie wrde ich am ehesten reagieren, wenn ich im falschen Zug sitze?",a:"Panisch bei der nchsten Station rausspringen",b:"So tun, als wre das mein Plan gewesen",c:"Den Schaffner bestechen",d:"Einfach sitzen bleiben und ein neues Leben in der Zielstadt anfangen"},{id:"bs_32",q:"Was war am ehesten mein dmmster Kaufrausch?",a:"Ein Fitnessgert, das jetzt als Kleiderstnder dient",b:"50 Rollen Klopapier (nur zur Sicherheit)",c:"Ein aufblasbares Kostm",d:"Eine DVD-Box einer Serie, die ich hasse"},{id:"bs_33",q:"Was ist am ehesten mein Lieblings-Schimpfwort?",a:"Ein klassisches Mist!",b:"Etwas sehr Kreatives wie Evolutionsbremse",c:"Nur wildes Gestikulieren",d:"Ein ganzer Schwall an Flchen, die keinen Sinn ergeben"},{id:"bs_34",q:"Welches Klischee erflle ich am ehesten voll und ganz?",a:"Der typische Deutsche (Handtuch auf die Liege)",b:"Das Chaos-Genie",c:"Der Frher war alles besser-Sager",d:"Der digitale Junkie (ohne WLAN kein Leben)"},{id:"bs_35",q:"Wenn ich eine Verschwrungstheorie starten msste, welche wre das am ehesten?",a:"Tauben sind eigentlich Kameras der Regierung",b:"Socken verschwinden in der Waschmaschine in eine andere Dimension",c:"Spiegel sind Fenster in eine Parallelwelt, aber die anderen sind schchtern",d:"Avocados wurden erfunden, um Hipster zu kontrollieren"},{id:"bs_36",q:"Wie wrde ich mein eigenes Land am ehesten nennen?",a:"Prokrastinationien",b:"Absurdistan",c:"Pommes-Land",d:"[Mein Name]-City"},{id:"bs_37",q:"Welche Art von kriminellem Mastermind wre ich am ehesten?",a:"Der charmante Hochstapler",b:"Der Hacker, der im Keller Pizza isst",c:"Der Fluchtwagenfahrer, der stndig falsch abbiegt",d:"Derjenige, der aus Versehen den falschen Tresor knackt"},{id:"bs_38",q:"Wenn ich ein Emoji wre, welches wre ich am ehesten?",a:" (Der Dauerlacher)",b:" (Der Klassenclown)",c:" (Der Sarkastische)",d:" (Der, der mit dem Alltag berfordert ist)"},{id:"bs_39",q:"Was wrde ich am ehesten tun, wenn ich in der Wildnis ausgesetzt werde?",a:"Versuchen, ein Feuer mit zwei Stcken zu machen (und scheitern)",b:"Beeren essen, die mich am Ende halluzinieren lassen",c:"Versuchen, Freundschaft mit einem Bren zu schlieen",d:"Nach 10 Minuten nach dem WLAN-Passwort suchen"},{id:"bs_40",q:"Was wre am ehesten mein Beruf in einer mittelalterlichen Fantasy-Welt?",a:"Der tollpatschige Zauberlehrling",b:"Der Dorflteste, der nur Rtsel spricht",c:"Der betrunkene Barde in der Taverne",d:"Der Drachenftterer (mit sehr kurzer Lebenserwartung)"},{id:"bs_41",q:"Wie wrde ich am ehesten reagieren, wenn ich ein Haar in meinem Essen im Restaurant finde?",a:"Den Manager verlangen und eine Szene machen",b:"Es diskret entfernen und einfach weiteressen",c:"Die ganze Zeit angewidert draufstarren, aber nichts sagen",d:"So tun, als wre es mein eigenes, um niemanden zu belstigen"},{id:"bs_42",q:"Was wrde ich am ehesten tun, wenn ich erfahre, dass mein Leben eine Truman Show ist?",a:"Direkt in die Kamera winken und Werbung fr Eistee machen",b:"Versuchen, aus dem Set auszubrechen",c:"Mich ber meine schlechte Gage beschweren",d:"Einfach weitermachen wie bisher, Hauptsache die Einschaltquoten stimmen"},{id:"bs_43",q:"Was ist am ehesten mein Verhalten bei einer Zombie-Invasion?",a:"Ich bin der Erste, der gebissen wird, weil ich den Zombie streicheln wollte",b:"Ich verbarrikadiere mich im nchsten Supermarkt in der Swarenabteilung",c:"Ich grnde eine neue Zivilisation in meinem Garten",d:"Ich versuche, die Zombies mit schlechten Witzen zu vertreiben"},{id:"bs_44",q:"Welches ungewhnliche Haustier htte ich am ehesten?",a:"Ein Alpaka (weil sie so flauschig sind)",b:"Ein Faultier (als Spiegelbild meiner Seele)",c:"Einen Pinguin, der im Khlschrank wohnt",d:"Einen Waschbren, der mir beim Mllsortieren hilft"},{id:"bs_45",q:"Was wrde ich am ehesten tun, wenn ich 24 Stunden lang die Zeit anhalten knnte?",a:"In Ruhe ausschlafen (endlich!)",b:"Leuten im Supermarkt die Einkaufswagen vertauschen",c:"In die Umkleidekabine von Promis schleichen",d:"Alle Hausarbeiten erledigen, um danach nie wieder was tun zu mssen"},{id:"bs_46",q:"Wie wrde ich am ehesten reagieren, wenn ich eine peinliche Nachricht an die falsche Person schicke?",a:"Mein Handy sofort in den nchsten Fluss werfen",b:"So tun, als wre mein Account gehackt worden",c:"Sofort 50 weitere Nachrichten schicken, um die erste zu berdecken",d:"Mit Ups, falscher Chat lol locker drber weggehen"},{id:"bs_47",q:"Was wre am ehesten meine Rolle in einer Zirkus-Show?",a:"Der Dompteur, der Angst vor Katzen hat",b:"Derjenige, der aus der Kanone geschossen wird",c:"Der tollpatschige Akrobat, der vom Seil fllt",d:"Die Person, die die Popcorn-Maschine bewacht"},{id:"bs_48",q:"Was wrde ich am ehesten tun, wenn ich im Fahrstuhl mit meinem absoluten Idol feststecke?",a:"Ohnmchtig werden",b:"Die ganze Zeit ber das Wetter reden, weil mir nichts Besseres einfllt",c:"Ein extrem verwackeltes Selfie machen",d:"Ihn/Sie fragen, ob ich mal am Parfum riechen darf"},{id:"bs_49",q:"Welche Sache wrde ich am ehesten mit auf eine einsame Insel nehmen?",a:"Eine unendliche Vorratspackung Kaffee",b:"Meinen Laptop (auch ohne Internet)",c:"Eine riesige aufblasbare Badeinsel",d:"Ein Buch ber Wie man ein Boot aus Sand baut"},{id:"bs_50",q:"Was wrde ich am ehesten tun, wenn ich pltzlich fliegen knnte?",a:"Den Stau auf dem Weg zur Arbeit ignorieren",b:"Tauben jagen und sie erschrecken",c:"Fenster putzen in schwindelerregender Hhe",d:"Nach 5 Minuten feststellen, dass ich Hhenangst habe und wieder landen"},{id:"bs_51",q:"In welcher Epoche htte ich am ehesten berlebt?",a:"Steinzeit (Beeren sammeln und Hhlen bemalen)",b:"Mittelalter (als Hofnarr)",c:"In der Zukunft (als Museumsstck fr 'Primitivitt')",d:"In den 80ern (wegen der Frisuren)"},{id:"bs_52",q:"Was wre am ehesten mein Markenzeichen als Superheld?",a:"Ein Umhang aus einer alten Bettdecke",b:"Dass ich immer 15 Minuten zu spt zur Rettung komme",c:"Ein extrem unpassender Kampfschrei",d:"Dass ich meine Geheimidentitt sofort aus Versehen verrate"},{id:"bs_53",q:"Was wrde ich am ehesten in einer Zeitkapsel fr die Nachwelt hinterlassen?",a:"Einen USB-Stick mit Memes",b:"Eine halbe Packung Tiefkhlpizza",c:"Eine Anleitung, wie man ein Blatt Papier faltet",d:"Einen Zettel, auf dem 'Ich war hier und es war okay' steht"},{id:"bs_54",q:"Wie wrde ich am ehesten versuchen, ein Feuer ohne Streichhlzer zu machen?",a:"Den Stein ganz fest bse angucken",b:"Zwei Stcke reiben, bis ich Blasen an den Hnden habe",c:"Auf ein Gewitter warten",d:"Eine App dafr herunterladen"},{id:"bs_55",q:"Was wre am ehesten mein Beitrag zu einem Potluck-Buffet?",a:"Eine Tte Chips (lieblos in eine Schssel geschttet)",b:"Etwas extrem Aufwendiges, das leider verbrannt ist",c:"Nudelsalat (der Klassiker, den schon 5 andere mitbringen)",d:"Nur Servietten und gute Laune"},{id:"bs_56",q:"Welche Sache wrde ich am ehesten im Weltraum vergessen?",a:"Meinen Helm",b:"Das Ladekabel fr mein Handy",c:"Die Koordinaten der Erde",d:"Dass ich die Katze noch fttern wollte"},{id:"bs_57",q:"Was wre am ehesten mein Job in einem Zirkus?",a:"Die Person, die die Elefantenpfel aufsammelt",b:"Der Typ, der die Messer wirft (aber immer daneben)",c:"Die menschliche Kanonenkugel (aber nur fr kurze Strecken)",d:"Der Wahrsager, der nur das Wetter von gestern vorhersagt"},{id:"bs_58",q:"Wie wrde ich am ehesten reagieren, wenn ich eine Million Euro geschenkt bekomme?",a:"Sofort alles fr Quatsch ausgeben",b:"Meinen Job kndigen und dann merken, dass es nicht reicht",c:"Erstmal drei Tage lang schlafen, um drber nachzudenken",d:"Fragen, ob das auch in bar geht"},{id:"bs_59",q:"Was ist am ehesten mein Problem beim Campen?",a:"Ich bekomme das Zelt nicht aufgebaut",b:"Ich werde von einer einzigen Mcke die ganze Nacht terrorisiert",c:"Ich vermisse meine Matratze nach 10 Minuten",d:"Ich finde den Weg zum Klo im Dunkeln nicht"},{id:"bs_60",q:"Was wre am ehesten mein Name in einem Western-Film?",a:"Der mde Joe",b:"Schleim-Sattel Sam",c:"Piano-Peter (der gar nicht spielen kann)",d:"Desperado ohne Plan"},{id:"bs_61",q:"Welches Kchengert wre ich am ehesten?",a:"Ein Toaster (macht viel Lrm fr wenig Ergebnis)",b:"Ein Eierkocher (kann nur eine Sache, die aber gut)",c:"Ein Sandwichmaker, der vllig verkrustet im Schrank steht",d:"Eine Kaffeemaschine (ohne mich luft nichts)"},{id:"bs_62",q:"Was wrde ich am ehesten tun, wenn ich Knig/Knigin von England wre?",a:"Die Corgis mit Burgern fttern",b:"Die Krone bei eBay verkaufen",c:"Jeden Tag im Pyjama regieren",d:"Den Tee durch Eiskaffee ersetzen"},{id:"bs_63",q:"Was ist am ehesten mein Talent bei einer Talentshow?",a:"Gerusche mit der Achselhhle machen",b:"Ein Glas Wasser in Rekordzeit austrinken",c:"Meinen eigenen Namen rckwrts rlpsen",d:"So lange stillstehen, bis die Jury mich vergisst"},{id:"bs_64",q:"Welche Disney-Figur wre ich am ehesten im echten Leben?",a:"Goofy (wegen der Tollpatschigkeit)",b:"Schneewittchen (weil ich viel schlafe)",c:"Einer der sieben Zwerge (wahrscheinlich 'Mde')",d:"Die bse Hexe (vor meinem ersten Kaffee)"},{id:"bs_65",q:"Was wre am ehesten mein Grund fr eine Anzeige bei der Polizei?",a:"Zu langsames Gehen auf dem Brgersteig",b:"Illegales Streamen von Kinderfilmen",c:"Bestechung eines Parkautomaten mit Knpfen",d:"Das Singen falscher Songtexte in der ffentlichkeit"},{id:"bs_66",q:"Wie wrde ich am ehesten reagieren, wenn ich einen Geist sehe?",a:"Ihm versuchen, eine Versicherung zu verkaufen",b:"Sofort ein Selfie machen (#GhostVibes)",c:"Ihn fragen, ob er die Miete mitbezahlt",d:"Einfach wegrennen und nie wieder zurckblicken"},{id:"bs_67",q:"Was wre am ehesten mein 'Signature Move' beim Kochen?",a:"Den Rauchmelder als Kurzzeitwecker nutzen",b:"Alles mit so viel Kse berbacken, dass man es nicht mehr erkennt",c:"Viel zu viel Salz benutzen",d:"Bestellen und behaupten, es sei selbstgemacht"},{id:"bs_68",q:"Welches Tier wrde ich am ehesten im Garten zhmen?",a:"Einen betrunkenen Igel",b:"Eine sehr aggressive Taube",c:"Einen Regenwurm namens Hans",d:"Einen Maulwurf, der meinen Rasen ruiniert"},{id:"bs_69",q:"Was wrde ich am ehesten machen, wenn ich eine Zeitmaschine htte?",a:"Lottozahlen von letzter Woche nachschauen",b:"Meinem jngeren Ich sagen: 'Schneid dir die Haare nicht so!'",c:"Dinosaurier streicheln (und wahrscheinlich gefressen werden)",d:"Die Erfindung der Hausaufgaben verhindern"},{id:"bs_70",q:"Was ist am ehesten mein grter Fail im Fitnessstudio?",a:"Vom Laufband fallen, weil ich auf mein Handy geguckt habe",b:"Nicht wissen, wie die Gerte funktionieren und einfach irgendwas machen",c:"Nach 5 Minuten Training ein Foto machen und nach Hause gehen",d:"Sich im Spiegel selbst bewundern und dabei gegen eine Hantelbank laufen"},{id:"bs_71",q:"In welcher Horrorfilm-Situation wrde ich am ehesten sterben?",a:"Ich stolpere ber eine ebene Flche",b:"Ich gehe nachsehen, was das Gerusch im Keller war",c:"Ich versuche, mich im Khlschrank zu verstecken",d:"Ich vertraue dem Mrder, weil er nett aussieht"},{id:"bs_72",q:"Was wre am ehesten meine Rolle in einer Boyband/Girlgroup?",a:"Der/Die Se (die eigentlich nichts kann)",b:"Der/Die Rebellische (der/die stndig Hausverbot hat)",c:"Der/Die Schchterne, die immer im Hintergrund tanzt",d:"Der/Diejenige, die nach zwei Wochen fr eine Solokarriere aussteigt"},{id:"bs_73",q:"Wie wrde ich am ehesten versuchen, ein Date zu beeindrucken?",a:"Mit unntigen Fakten ber Haie",b:"Indem ich sage, dass ich fast mal berhmt war",c:"Mit einem sehr schlechten Zaubertrick",d:"Indem ich die ganze Speisekarte auswendig lerne"},{id:"bs_74",q:"Was ist am ehesten mein 'Guilty Pleasure' im Fernsehen?",a:"Sendungen ber extrem fette Katzen",b:"Trash-TV, bei dem sich Leute anschreien",c:"Teleshopping mitten in der Nacht",d:"Zeichentrickserien fr Dreijhrige"},{id:"bs_75",q:"Was wrde ich am ehesten tun, wenn ich eine Ameise wre?",a:"Versuchen, einen ganzen Krmel Pizza alleine zu tragen",b:"In das Haus eines Promis einbrechen",c:"Die Ameisenknigin strzen und selbst regieren",d:"Mich in einem Picknickkorb verstecken"},{id:"bs_76",q:"Wie wrde mein eigenes Parfm am ehesten heien?",a:"Eau de Couch Potato",b:"Duft des Chaos",c:"Vergessenes Pausenbrot",d:"Frische Wsche (die noch nass ist)"},{id:"bs_77",q:"Was wre am ehesten meine Taktik bei einer Schneeballschlacht?",a:"Hinter einem Baum verstecken und hoffen, dass mich niemand sieht",b:"Haufenweise Schneeblle vorbereiten, die dann schmelzen",c:"Weglaufen und schreien: 'Nicht ins Gesicht!'",d:"Den Schnee essen statt werfen"},{id:"bs_78",q:"Welches Auto wrde ich am ehesten fahren, wenn Geld keine Rolle spielte?",a:"Einen Panzer (fr den Berufsverkehr)",b:"Ein Einhorn-Mobil mit Glitzerlack",c:"Ein Batmobil (ohne die Gadgets)",d:"Einen Oldtimer, der alle 2 km liegen bleibt"},{id:"bs_79",q:"Was ist am ehesten meine nervigste Eigenschaft?",a:"Dass ich Stze nicht zu Ende...",b:"Stndiges Besserwissen (auch wenn ich falsch liege)",c:"Zu laut kauen",d:"Immer zu spt kommen"},{id:"bs_80",q:"Wie wrde ich am ehesten auf eine einsame Insel gelangen?",a:"Vom Kreuzfahrtschiff gefallen, weil ich ein Selfie machen wollte",b:"Mit dem Tretboot verfahren",c:"Fallschirmabsprung an der falschen Stelle",d:"Freiwillig, um mal meine Ruhe zu haben"},{id:"bs_81",q:"Was wre am ehesten mein Wunsch-Superkraft-Nachteil?",a:"Fliegen knnen, aber nur 10 cm ber dem Boden",b:"Gedanken lesen, aber nur die schlechten ber mich",c:"Unsichtbar sein, aber nur wenn niemand hinguckt",d:"Superschnell rennen, aber sofort auer Puste sein"},{id:"bs_82",q:"Welche Frucht wre ich am ehesten?",a:"Eine Zitrone (sauer, aber erfrischend)",b:"Eine Banane (krumm und wird schnell braun)",c:"Eine Kokosnuss (harte Schale, weicher Kern)",d:"Eine Weintraube (nur in der Gruppe stark)"},{id:"bs_83",q:"Was wrde ich am ehesten tun, wenn mein Handy in die Toilette fllt?",a:"Hinterhergreifen ohne nachzudenken",b:"Davor stehen und weinen",c:"In Reis einlegen und beten",d:"Einfach splen und ein neues Leben anfangen"},{id:"bs_84",q:"Was ist am ehesten mein Lieblings-Smalltalk-Thema?",a:"Das Wetter (typisch deutsch)",b:"Wie mde ich heute wieder bin",c:"Was ich gestern gegessen habe",d:"Verschwrungstheorien ber Tauben"},{id:"bs_85",q:"Wie wrde ich am ehesten einen Streit gewinnen?",a:"Indem ich einfach so lange 'Warum?' frage, bis der andere aufgibt",b:"Mit vllig unlogischen Argumenten",c:"Indem ich anfange zu weinen",d:"Gar nicht, ich ziehe mich beleidigt zurck"},{id:"bs_86",q:"Was wre am ehesten mein Job in einer Weltraum-Kolonie?",a:"Sauerstoff-Tester (sehr riskant)",b:"Weltraum-Grtner fr Plastikblumen",c:"Unterhalter fr gelangweilte Roboter",d:"Mllschlucker-Bediener"},{id:"bs_87",q:"Was wrde ich am ehesten tun, wenn ich eine Million Follower htte?",a:"Nur noch Fotos von meinem Essen posten",b:"Versuchen, eine eigene Sekte zu grnden",c:"Meinen Account aus Versehen lschen",d:"Leuten dubiose Vitamin-Gummis verkaufen"},{id:"bs_88",q:"Welcher Wochentag wre ich am ehesten?",a:"Montag (niemand mag mich)",b:"Mittwoch (ich wei nicht, wo ich hingehre)",c:"Freitagabend (voller Energie, die schnell verpufft)",d:"Sonntag (nur am Faulenzen)"},{id:"bs_89",q:"Was wre am ehesten meine Reaktion auf einen Heiratsantrag in der ffentlichkeit?",a:"Wegrennen vor lauter Panik",b:"Ja sagen, nur damit die Leute aufhren zu gucken",c:"Fragen, ob das ein Prank fr YouTube ist",d:"Ohnmchtig werden und in die Torte fallen"},{id:"bs_90",q:"Was wrde ich am ehesten tun, wenn ich fr 5 Minuten der Prsident wre?",a:"Gratis Pizza fr alle befehlen",b:"Den Rasen vor dem Weien Haus mhen",c:"Geheime Akten ber Aliens lesen",d:"Ein Nickerchen im Oval Office machen"},{id:"bs_91",q:"Was ist am ehesten mein Verhalten im Kino?",a:"Nach 10 Minuten einschlafen",b:"Die ganze Zeit lautstark Popcorn essen",c:"Den Film kommentieren, als wre ich der Regisseur",d:"Nach der Hlfte fragen, worum es eigentlich geht"},{id:"bs_92",q:"Welches Brettspiel bringt mich am ehesten zum Ausrasten?",a:"Monopoly (ich lande immer im Gefngnis)",b:"Mensch rgere dich nicht (der Name ist Programm)",c:"Scrabble (weil ich keine Wrter kenne)",d:"Activity (niemand versteht meine Zeichnungen)"},{id:"bs_93",q:"Was wrde ich am ehesten tun, wenn ich ein Gespenst wre?",a:"Nur die Socken der Leute verstecken",b:"Das WLAN immer im spannendsten Moment ausschalten",c:"Nachts leise Witze flstern",d:"Leuten im Schlaf die Haare kmmen"},{id:"bs_94",q:"Wie wrde ich am ehesten auf eine Dit reagieren?",a:"Nach zwei Stunden eine Pizza bestellen",b:"Nur noch ber Essen reden",c:"Behaupten, dass Kekse eigentlich Gemse sind",d:"Einfach mehr Sport machen (hahaha, nein)"},{id:"bs_95",q:"Was wre am ehesten mein Name als Pirat?",a:"Einbein-Ede",b:"Kpt'n Chaos",c:"Scurvy-Susi",d:"Der Schrecken der Badewanne"},{id:"bs_96",q:"Was wrde ich am ehesten tun, wenn ich in einer Zeitschleife feststecke?",a:"Jeden Tag etwas anderes Dummes essen",b:"Endlich mal alle Serien zu Ende schauen",c:"Versuchen, den perfekten Tag zu erleben (und scheitern)",d:"Einfach nur schlafen, weil es eh egal ist"},{id:"bs_97",q:"Welche Art von Museum wrde ich am ehesten erffnen?",a:"Das Museum der gescheiterten Trume",b:"Eine Ausstellung ber hssliche Teppiche",c:"Das Museum fr Dinge, die ich mal verloren habe",d:"Eine Galerie fr schlechte Selfies"},{id:"bs_98",q:"Was wre am ehesten meine Strategie bei einer Talentshow?",a:"Mitleid erregen",b:"Die Jury bestechen",c:"Etwas so Schlechtes machen, dass es wieder gut ist",d:"Einfach nicht erscheinen"},{id:"bs_99",q:"Was wrde ich am ehesten tun, wenn ich einen Roboter-Zwilling htte?",a:"Ihn zur Arbeit schicken",b:"Ihn meine Wohnung aufrumen lassen",c:"Mich mit ihm streiten, wer das Original ist",d:"Ihn als Kleiderstnder benutzen"},{id:"bs_100",q:"Was ist am ehesten das Letzte, was ich vor meinem Tod sagen wrde?",a:"Ich habe das Gold vergraben bei...",b:"War das Fleisch noch gut?",c:"Ich wusste, dass das eine schlechte Idee war.",d:"Lscht meinen Browserverlauf!"}]}};function _c(r=[]){let e=[];return r.length===0&&(r=Object.keys(Si)),r.forEach(n=>{Si[n]&&Si[n].questions&&Si[n].questions.forEach(s=>{e.push({...s,category:n})})}),e}const Tm=new Map,DE=r=>{if(Tm.has(r))return Tm.get(r);try{const e="/Hitzkopf/",n=new Audio(`${e}sounds/${r}.mp3`);return n.addEventListener("error",s=>{console.warn(` Audio-Datei nicht gefunden: ${r}.mp3`,s)}),Tm.set(r,n),n}catch(e){return console.warn(` Fehler beim Erstellen des Audio-Objekts fr ${r}:`,e),null}},NN=(r,e=.5)=>{const n=DE(r);if(n)try{n.volume=e,n.currentTime=0,n.play().catch(s=>{})}catch(s){console.warn(` Fehler beim Abspielen von ${r}:`,s)}},DN=()=>DE("background_music"),MN="_menuModal_1ubl0_2",xN="_menuHeader_1ubl0_23",ON="_menuTitle_1ubl0_30",LN="_menuCloseButton_1ubl0_35",VN="_menuButton_1ubl0_49",jN="_menuBackButton_1ubl0_67",PN="_menuSection_1ubl0_81",zN="_menuSectionTitle_1ubl0_87",BN="_menuLogContainer_1ubl0_94",UN="_menuLogEntry_1ubl0_104",qN="_menuLogEmpty_1ubl0_110",HN="_landingContainer_1ubl0_115",FN="_landingLogoContainer_1ubl0_128",GN="_landingLogo_1ubl0_128",KN="_landingButton_1ubl0_144",$N="_backToProjectsButton_1ubl0_175",QN="_logoContainer_1ubl0_200",WN="_logoHorizontal_1ubl0_208",YN="_emojiGalleryWrapper_1ubl0_217",XN="_emojiGallery_1ubl0_217",ZN="_emojiSpacer_1ubl0_252",JN="_eliminatedText_1ubl0_270",eD="_eliminatedSubtext_1ubl0_276",tD="_thermoTop_1ubl0_296",nD="_thermoTopLeft_1ubl0_303",iD="_thermoTemp_1ubl0_309",sD="_thermoBar_1ubl0_318",rD="_thermoFill_1ubl0_326",aD="_attackSelectionGrid_1ubl0_344",oD="_volumeTitle_1ubl0_440",lD="_volumeIcon_1ubl0_452",cD="_waitText_1ubl0_514",uD="_buttonMarginTop_1ubl0_521",hD="_helpButtonLeft_1ubl0_526",dD="_spacer_1ubl0_539",fD="_settingsButton_1ubl0_544",mD="_settingsButtonGray_1ubl0_555",gD="_settingsButtonRed_1ubl0_559",pD="_settingsButtonDarkRed_1ubl0_564",yD="_settingsButtonDanger_1ubl0_569",_D="_settingsButtonMusic_1ubl0_575",bD="_settingsButtonMusicEnabled_1ubl0_582",vD="_settingsButtonMusicDisabled_1ubl0_586",TD="_volumeSliderContainer_1ubl0_591",SD="_volumeSliderWrapper_1ubl0_595",ED="_volumeSliderInput_1ubl0_601",wD="_correctGuessContainer_1ubl0_642",AD="_correctGuessTitle_1ubl0_646",RD="_correctGuessSubtitle_1ubl0_653",ID="_attackSelectionWrapper_1ubl0_665",CD="_attackSelectionHeader_1ubl0_673",kD="_attackSelectionHeaderIcon_1ubl0_682",ND="_attackPlayerCardLarge_1ubl0_692",DD="_attackPlayerEmojiLarge_1ubl0_711",MD="_attackPlayerNameLarge_1ubl0_716",xD="_attackPlayerDmgLarge_1ubl0_723",OD="_attackNoPlayersLarge_1ubl0_729",LD="_hotseatModalOverlay_1ubl0_737",VD="_hotseatModalContent_1ubl0_750",jD="_hotseatModalIcon_1ubl0_763",PD="_hotseatModalTitle_1ubl0_768",zD="_hotseatModalText_1ubl0_778",BD="_hotseatModalHeader_1ubl0_784",UD="_hotseatModalEmoji_1ubl0_792",qD="_hotseatModalButton_1ubl0_796",HD="_labelWithMargin_1ubl0_833",FD="_grid2Cols_1ubl0_842",GD="_grid3Cols_1ubl0_850",KD="_backButton_1ubl0_862",$D="_joinScreenTitle_1ubl0_870",QD="_refreshButton_1ubl0_875",WD="_noRoomsText_1ubl0_881",YD="_roomCard_1ubl0_887",XD="_categoryEmojiLarge_1ubl0_898",ZD="_categoryNameLarge_1ubl0_903",JD="_lobbyTitle_1ubl0_910",e2="_myPlayerCard_1ubl0_915",t2="_ready_1ubl0_932",n2="_notReady_1ubl0_936",i2="_eliminated_1ubl0_258",s2="_myPlayerEmoji_1ubl0_944",r2="_myPlayerInfo_1ubl0_949",a2="_myPlayerName_1ubl0_956",o2="_crownIcon_1ubl0_965",l2="_readyToggle_1ubl0_969",c2="_readyLabel_1ubl0_975",u2="_toggleSwitch_1ubl0_981",h2="_toggleThumb_1ubl0_1006",d2="_toggleCheck_1ubl0_1026",f2="_toggleCross_1ubl0_1032",m2="_gameQuestion_1ubl0_1103",g2="_gameCategory_1ubl0_1112",p2="_voteSubmitted_1ubl0_1121",y2="_voteSubmittedTitle_1ubl0_1128",_2="_voteSubmittedText_1ubl0_1133",b2="_submitButtonMargin_1ubl0_1139",v2="_resultTitle_1ubl0_1144",T2="_resultThermoItem_1ubl0_1149",S2="_eliminatedTitle_1ubl0_1157",E2="_eliminatedInfoBox_1ubl0_1162",w2="_thermoItemAnswered_1ubl0_1180",A2="_thermoItemNotAnswered_1ubl0_1186",R2="_thermoTempMax_1ubl0_1203",I2="_rewardDecisionMade_1ubl0_1261",C2="_rewardDecisionTitle_1ubl0_1268",k2="_rewardDecisionText_1ubl0_1273",N2="_wrongAnswerContainer_1ubl0_1279",D2="_wrongAnswerIcon_1ubl0_1288",M2="_attackModalOverlay_1ubl0_1306",x2="_attackModalContent_1ubl0_1319",O2="_attackModalNoDamage_1ubl0_1347",L2="_attackModalDetails_1ubl0_1353",V2="_attackModalDetailsTitle_1ubl0_1365",j2="_attackModalDetailItem_1ubl0_1369",P2="_attackModalBar_1ubl0_1374",z2="_attackModalTemp_1ubl0_1384",B2="_attackModalTempDamage_1ubl0_1390",U2="_attackModalTempNoDamage_1ubl0_1394",q2="_attackModalButton_1ubl0_1398",H2="_eliminationModalOverlay_1ubl0_1412",F2="_eliminationModalContent_1ubl0_1425",G2="_eliminationModalLogoContainer_1ubl0_1437",K2="_eliminationModalLogo_1ubl0_1437",$2="_eliminationModalTitle_1ubl0_1451",Q2="_eliminationModalText_1ubl0_1457",W2="_eliminationModalButton_1ubl0_1463",Y2="_rulesModalOverlay_1ubl0_1477",X2="_rulesModalContent_1ubl0_1490",Z2="_rulesModalSectionTitle_1ubl0_1518",J2="_rulesModalButton_1ubl0_1531",eM="_rulesModalHeader_1ubl0_1548",tM="_rulesModalHeaderIcon_1ubl0_1557",nM="_rulesModalBody_1ubl0_1561",iM="_rulesModalSectionBox_1ubl0_1567",sM="_rulesModalSectionHeader_1ubl0_1574",rM="_rulesModalSectionIcon_1ubl0_1581",aM="_rulesModalSectionText_1ubl0_1590",oM="_attackModalContentDamage_1ubl0_1596",lM="_attackModalContentNoDamage_1ubl0_1601",cM="_attackModalIcon_1ubl0_1606",uM="_attackModalName_1ubl0_1611",hM="_attackModalNameDamage_1ubl0_1617",dM="_attackModalNameNoDamage_1ubl0_1622",fM="_attackModalMessage_1ubl0_1627",mM="_attackModalBarFill_1ubl0_1633",gM="_attackModalBarFillDamage_1ubl0_1639",pM="_attackModalBarFillNoDamage_1ubl0_1644",yM="_hotseatWaitContainer_1ubl0_1657",_M="_hotseatWaitBox_1ubl0_1663",bM="_hotseatWaitTitle_1ubl0_1671",vM="_hotseatWaitSubtitle_1ubl0_1678",TM="_guessOverviewContainer_1ubl0_1685",SM="_guessOverviewSection_1ubl0_1691",EM="_guessOverviewTitle_1ubl0_1698",wM="_guessOverviewList_1ubl0_1704",AM="_guessOverviewItem_1ubl0_1710",RM="_playerReadyList_1ubl0_1721",IM="_playerReadyText_1ubl0_1725",CM="_fullWidthButton_1ubl0_1733",k={menuModal:MN,menuHeader:xN,menuTitle:ON,menuCloseButton:LN,menuButton:VN,menuBackButton:jN,menuSection:PN,menuSectionTitle:zN,menuLogContainer:BN,menuLogEntry:UN,menuLogEmpty:qN,landingContainer:HN,landingLogoContainer:FN,landingLogo:GN,landingButton:KN,backToProjectsButton:$N,logoContainer:QN,logoHorizontal:WN,emojiGalleryWrapper:YN,emojiGallery:XN,emojiSpacer:ZN,eliminatedText:JN,eliminatedSubtext:eD,thermoTop:tD,thermoTopLeft:nD,thermoTemp:iD,thermoBar:sD,thermoFill:rD,attackSelectionGrid:aD,volumeTitle:oD,volumeIcon:lD,waitText:cD,buttonMarginTop:uD,helpButtonLeft:hD,spacer:dD,settingsButton:fD,settingsButtonGray:mD,settingsButtonRed:gD,settingsButtonDarkRed:pD,settingsButtonDanger:yD,settingsButtonMusic:_D,settingsButtonMusicEnabled:bD,settingsButtonMusicDisabled:vD,volumeSliderContainer:TD,volumeSliderWrapper:SD,volumeSliderInput:ED,correctGuessContainer:wD,correctGuessTitle:AD,correctGuessSubtitle:RD,attackSelectionWrapper:ID,attackSelectionHeader:CD,attackSelectionHeaderIcon:kD,attackPlayerCardLarge:ND,attackPlayerEmojiLarge:DD,attackPlayerNameLarge:MD,attackPlayerDmgLarge:xD,attackNoPlayersLarge:OD,hotseatModalOverlay:LD,hotseatModalContent:VD,hotseatModalIcon:jD,hotseatModalTitle:PD,hotseatModalText:zD,hotseatModalHeader:BD,hotseatModalEmoji:UD,hotseatModalButton:qD,labelWithMargin:HD,grid2Cols:FD,grid3Cols:GD,backButton:KD,joinScreenTitle:$D,refreshButton:QD,noRoomsText:WD,roomCard:YD,categoryEmojiLarge:XD,categoryNameLarge:ZD,lobbyTitle:JD,myPlayerCard:e2,ready:t2,notReady:n2,eliminated:i2,myPlayerEmoji:s2,myPlayerInfo:r2,myPlayerName:a2,crownIcon:o2,readyToggle:l2,readyLabel:c2,toggleSwitch:u2,toggleThumb:h2,toggleCheck:d2,toggleCross:f2,gameQuestion:m2,gameCategory:g2,voteSubmitted:p2,voteSubmittedTitle:y2,voteSubmittedText:_2,submitButtonMargin:b2,resultTitle:v2,resultThermoItem:T2,eliminatedTitle:S2,eliminatedInfoBox:E2,thermoItemAnswered:w2,thermoItemNotAnswered:A2,thermoTempMax:R2,rewardDecisionMade:I2,rewardDecisionTitle:C2,rewardDecisionText:k2,wrongAnswerContainer:N2,wrongAnswerIcon:D2,attackModalOverlay:M2,attackModalContent:x2,attackModalNoDamage:O2,attackModalDetails:L2,attackModalDetailsTitle:V2,attackModalDetailItem:j2,attackModalBar:P2,attackModalTemp:z2,attackModalTempDamage:B2,attackModalTempNoDamage:U2,attackModalButton:q2,eliminationModalOverlay:H2,eliminationModalContent:F2,eliminationModalLogoContainer:G2,eliminationModalLogo:K2,eliminationModalTitle:$2,eliminationModalText:Q2,eliminationModalButton:W2,rulesModalOverlay:Y2,rulesModalContent:X2,rulesModalSectionTitle:Z2,rulesModalButton:J2,rulesModalHeader:eM,rulesModalHeaderIcon:tM,rulesModalBody:nM,rulesModalSectionBox:iM,rulesModalSectionHeader:sM,rulesModalSectionIcon:rM,rulesModalSectionText:aM,attackModalContentDamage:oM,attackModalContentNoDamage:lM,attackModalIcon:cM,attackModalName:uM,attackModalNameDamage:hM,attackModalNameNoDamage:dM,attackModalMessage:fM,attackModalBarFill:mM,attackModalBarFillDamage:gM,attackModalBarFillNoDamage:pM,hotseatWaitContainer:yM,hotseatWaitBox:_M,hotseatWaitTitle:bM,hotseatWaitSubtitle:vM,guessOverviewContainer:TM,guessOverviewSection:SM,guessOverviewTitle:EM,guessOverviewList:wM,guessOverviewItem:AM,playerReadyList:RM,playerReadyText:IM,fullWidthButton:CM},kM="/Hitzkopf/assets/hk_logo_vertical-B1yR7l9I.png",Ni={MAX_TEMP_DEFAULT:100,ATTACK_DMG_PARTY:20,PENALTY_DMG:10,CONNECTION_CHECK_INTERVAL:2e3,HOST_INACTIVE_THRESHOLD:5e3,CONNECTION_SLOW_THRESHOLD:5e3,CONNECTION_OFFLINE_THRESHOLD:1e4},ce={log:()=>{},warn:()=>{},error:()=>{},debug:()=>{}},il=(r,e=Ni.MAX_TEMP_DEFAULT,n=[])=>Object.keys(r||{}).filter(s=>(r?.[s]?.temp||0)<e&&!n.includes(s)).sort(),NM=r=>typeof r=="string"?r:r?.name||String(r||""),DM=(r,e)=>{const n=Object.keys(r||{}),s=Object.keys(e||{});return n.length!==s.length?!1:n.every(o=>r[o]?.choice===e[o]?.choice)},MM=(r,e,n)=>{const s=e.attackDetails?.length||0,o=e.attackDetails?.some(c=>c.hasOil)||!1;return`${r}-${e.totalDmg}-${s}-${o}-${n}`},xM=(r="op")=>`${r}_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,OM={apiKey:"AIzaSyBQ7c9JkZ3zWlyIjZLl1O1sJJOrKfYJbmA",authDomain:"hitzkopf-f0ea6.firebaseapp.com",projectId:"hitzkopf-f0ea6",storageBucket:"hitzkopf-f0ea6.firebasestorage.app",messagingSenderId:"828164655874",appId:"1:828164655874:web:1cab759bdb03bfb736101b"},LM=["","","","","","","","","","","","","","",""],Br=(()=>{const r=[...LM];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})();function VM({onBack:r}){const[e,n]=Z.useState(null),[s,o]=Z.useState(null),[c,f]=Z.useState("landing"),[m,b]=Z.useState(sessionStorage.getItem("hk_name")||""),_=Math.floor(Br.length/2),S=Br[_],[A,V]=Z.useState(S),[O,pe]=Z.useState(sessionStorage.getItem("hk_room")||""),[de,he]=Z.useState(!1),[I,Ae]=Z.useState(null);Z.useMemo(()=>{if(!I?.players)return[];const M=I.config?.maxTemp||Ni.MAX_TEMP_DEFAULT;return il(I.players,M)},[I?.players,I?.config?.maxTemp]),Z.useMemo(()=>I?.players?Object.keys(I.players).sort():[],[I?.players]),Z.useMemo(()=>Object.keys(I?.players||{}).length,[I?.players]);const[xe,ct]=Z.useState("online"),zt=Z.useRef(Date.now()),qe=Z.useRef(new Set),D=Z.useRef([]),R=Z.useRef(null),[N,B]=Z.useState(!1),[L,U]=Z.useState(!1),[C,$t]=Z.useState([]),[wn,te]=Z.useState(""),[ve,Ve]=Z.useState(""),[yt,Ut]=Z.useState(""),[j,re]=Z.useState([]),[ye,Se]=Z.useState(null),[je,it]=Z.useState([]),[ut,un]=Z.useState(0),[We,hn]=Z.useState(null),[ss,Js]=Z.useState(null),[Yn,jn]=Z.useState(!1),[qs,Ki]=Z.useState(null),[Oi,br]=Z.useState(null),[dn,Yt]=Z.useState(!1),[As,rs]=Z.useState(null),[$i,vn]=Z.useState(!1),[ci,Qi]=Z.useState(!1),[Rs,as]=Z.useState(!1),[os,er]=Z.useState(!1),[ls,vr]=Z.useState(!1),[ui,An]=Z.useState(!1),[hi,on]=Z.useState(!1),[Is,cs]=Z.useState(null),[Pn,di]=Z.useState(null),[us,Zt]=Z.useState(!1),[ni,Mn]=Z.useState("main"),[fn,Tr]=Z.useState(()=>{const M=localStorage.getItem("hk_music_enabled");return M!==null?M==="true":!0}),[tr,Li]=Z.useState(()=>{const M=localStorage.getItem("hk_music_volume");return M!==null?parseInt(M):10}),[Cs,Fa]=Z.useState(()=>{const M=localStorage.getItem("hk_sound_volume");return M!==null?parseInt(M):10}),Mt=Z.useRef(null),wt=Z.useRef(new Map),Vi=Z.useRef(Date.now()),fi=Z.useRef(null),kn=Z.useCallback(async(M,q=null,X=3,me=1e3)=>{const W=q||xM(),E=Date.now();wt.current.set(W,{startTime:E,attempts:0});for(let se=1;se<=X;se++){wt.current.get(W).attempts=se;try{await M();const Y=Date.now()-E;return Vi.current=Date.now(),wt.current.delete(W),ce.log(` [RETRY] Operation erfolgreich (${W}):`,{totalAttempts:se,totalDuration:Y+"ms",operationId:W}),!0}catch(Y){if(ce.warn(` [RETRY] Versuch ${se}/${X} fehlgeschlagen (${W}):`,{error:Y,code:Y?.code,message:Y?.message,stack:Y?.stack,serverResponse:Y?.serverResponse,operationId:W,attempt:se,maxRetries:X,roomId:O,hasDb:!!s}),Y?.code==="permission-denied"&&O)try{const ke=await ai(Ue(s,"lobbies",O));if(!ke.exists())return ce.warn(` [RETRY] Lobby existiert nicht mehr (${W})`),wt.current.delete(W),!1;const Ce=ke.data();if(Ce?.status==="deleted")return ce.warn(` [RETRY] Lobby wurde gelscht (${W})`),wt.current.delete(W),!1;ce.log(" [RETRY] Lobby existiert noch:",{status:Ce?.status,roundId:Ce?.roundId,host:Ce?.host})}catch{}if((Y?.code==="permission-denied"||Y?.code==="unavailable"||Y?.code==="deadline-exceeded"||Y?.code==="failed-precondition"||Y?.message?.includes("network")||Y?.message?.includes("blocked")||Y?.message?.includes("CORS")||Y?.message?.includes("Failed to fetch")||Y?.message?.includes("failed-precondition"))&&se<X){const ke=me*se;ce.log(` [RETRY] Warte ${ke}ms vor nchstem Versuch (${W}):`,{attempt:se,maxRetries:X,waitTime:ke,errorCode:Y?.code,errorMessage:Y?.message}),await new Promise(Ce=>setTimeout(Ce,ke))}else{if(se===X)return ce.error(` [RETRY] Alle Versuche fehlgeschlagen (${W}):`,{error:Y,code:Y?.code,message:Y?.message,stack:Y?.stack,serverResponse:Y?.serverResponse,operationId:W,totalAttempts:se,roomId:O,timestamp:new Date().toISOString()}),wt.current.delete(W),!1;throw ce.error(` [RETRY] Nicht-retrybarer Fehler (${W}):`,{error:Y,code:Y?.code,message:Y?.message,operationId:W,attempt:se}),wt.current.delete(W),Y}}}return wt.current.delete(W),!1},[]),nr=Z.useCallback(async()=>{if(!(!s||!O||!I))try{const M=await ai(Ue(s,"lobbies",O));if(!M.exists()){ce.log(" [RECOVERY] Lobby existiert nicht mehr");return}const q=M.data(),X=q.status,me=q.roundId;if(ce.log(" [RECOVERY] Firebase-Daten geladen:",{status:X,roundId:me,localStatus:I.status,localRoundId:I.roundId}),Ae(q),Vi.current=Date.now(),X==="result"&&de&&q.host===m){const W=q.config?.maxTemp||100,E=q.eliminatedPlayers||[],se=Object.keys(q.players||{}).filter(De=>(q.players?.[De]?.temp||0)<W&&!E.includes(De)),Y=(q.ready||[]).filter(De=>(q.players?.[De]?.temp||0)<W).length,Ie=q.roundRecapShown??!1,ke=q.attackResults&&Object.keys(q.attackResults).length>0,Ce=q.popupConfirmed||{},Ee=!ke||se.every(De=>q.attackResults?.[De]?Ce[De]===!0:!0);if(Y>=se.length&&se.length>0&&Ie&&Ee&&!wt.current.has("nextRound")){ce.log(" [RECOVERY] Spiel hngt - alle bereit, aber keine nchste Runde. Starte Recovery...");try{const De=`nextRound_recovery_${Date.now()}`;wt.current.set(De,{startTime:Date.now(),attempts:0});const ht=q.hotseat||"",Pe=typeof ht=="string"?ht:ht?.name||String(ht||"");let ze=se.indexOf(Pe);ze===-1&&(ze=0),ze=(ze+1)%se.length;const At=se[ze],xt=q.usedQuestions||[],Ye=q.config?.categories||Object.keys(Si),rt=_c(Ye);let fe=xt;xt.length>0&&typeof xt[0]=="number"&&(fe=xt.map(Xe=>rt[Xe]?.id).filter(Boolean));const pn=rt.filter(Xe=>Xe.id&&!fe.includes(Xe.id)),pt=pn[Math.floor(Math.random()*pn.length)]||rt[0],bt=(q.roundId??0)+1,Be={status:"game",hotseat:At,currentQ:pt,roundId:bt,lastQuestionCategory:pt.category,roundRecapShown:!1,votes:Ti(),ready:[],lobbyReady:{},pendingAttacks:{},attackDecisions:{},attackResults:{},popupConfirmed:{},countdownEnds:Ti()};pt.id&&!fe.includes(pt.id)&&(Be.usedQuestions=[...fe,pt.id]),await kn(async()=>{await lt(Ue(s,"lobbies",O),Be)},De,3,1e3)?(wt.current.delete(De),ce.log(" [RECOVERY] Nchste Runde erfolgreich gestartet")):ce.error(" [RECOVERY] Nchste Runde fehlgeschlagen")}catch(De){ce.error(" [RECOVERY] Fehler beim Starten der nchsten Runde:",De)}}}if(X==="result"&&de&&q.host===m){const W=Object.keys(q.attackDecisions||{}).length>=Object.keys(q.players||{}).length,E=q.roundRecapShown??!1,se=q.votes?.[q.hotseat]?.choice!==void 0;if(W&&!E&&se&&!wt.current.has("executeAttacks")){ce.log(" [RECOVERY] executePendingAttacks fehlgeschlagen. Versuche erneut...");try{const Y=`executeAttacks_recovery_${q.roundId||Date.now()}`;wt.current.set(Y,{startTime:Date.now(),attempts:0});const Ie={roundRecapShown:!0};await kn(async()=>{await lt(Ue(s,"lobbies",O),Ie)},Y,3,1e3)?(wt.current.delete(Y),ce.log(" [RECOVERY] roundRecapShown gesetzt - Spiel sollte weitergehen")):ce.error(" [RECOVERY] executePendingAttacks Recovery fehlgeschlagen")}catch(Y){ce.error(" [RECOVERY] Fehler bei executePendingAttacks Recovery:",Y)}}}}catch{}},[s,O,I,de,m]);Z.useEffect(()=>{if(!s||!O||!I){fi.current&&(clearInterval(fi.current),fi.current=null);return}return fi.current=setInterval(()=>{const M=Date.now()-Vi.current,q=wt.current.size>0;if(M>1e4&&q&&ai(Ue(s,"lobbies",O)).then(()=>{nr()}).catch(X=>{}),I.status==="result"&&de){const X=I.config?.maxTemp||100,me=I.eliminatedPlayers||[],W=Object.keys(I.players||{}).filter(Y=>(I.players?.[Y]?.temp||0)<X&&!me.includes(Y)),E=(I.ready||[]).filter(Y=>(I.players?.[Y]?.temp||0)<X).length,se=I.roundRecapShown??!1;E>=W.length&&W.length>0&&se&&M>15e3&&nr()}},5e3),()=>{fi.current&&(clearInterval(fi.current),fi.current=null)}},[s,O,I,de,nr]);const xn=Z.useCallback((M,q=.5)=>{NN(M,q*Cs/10)},[Cs]);Z.useEffect(()=>{if(!Mt.current){const q=DN();q&&(q.loop=!0,Mt.current=q)}const M=Mt.current;M&&(M.volume=tr/10,fn?M.play().catch(q=>{}):M.pause())},[fn,tr]),Z.useEffect(()=>{const M=()=>{fn&&Mt.current&&Mt.current.play().catch(()=>{})};if(fn){const q=["click","touchstart","keydown"];return q.forEach(X=>{document.addEventListener(X,M,{once:!0})}),()=>{q.forEach(X=>{document.removeEventListener(X,M)})}}},[fn]);const ji=Z.useCallback(()=>{const M=!fn;Tr(M),localStorage.setItem("hk_music_enabled",String(M))},[fn]),P=Z.useCallback(M=>{Li(M),localStorage.setItem("hk_music_volume",String(M)),Mt.current&&(Mt.current.volume=M/10)},[]),ne=Z.useCallback(M=>{Fa(M),localStorage.setItem("hk_sound_volume",String(M))},[]);Z.useEffect(()=>{const M=tg(OM),q=mE(M),X=$T(M);n(M),o(q),cR(X,me=>{me?ce.log(" [AUTH] Anonyme Authentifizierung erfolgreich:",me.uid):LT(X).then(W=>{ce.log(" [AUTH] Automatische anonyme Anmeldung erfolgreich:",W.user.uid)}).catch(W=>{})})},[]),Z.useEffect(()=>{if(!s||!O)return;D.current=[];const M=kE(Ue(s,"lobbies",O),W=>{if(!O)return;if(ct("online"),Vi.current=Date.now(),!W.exists()){sessionStorage.removeItem("hk_room"),pe(""),Ae(null),f("start"),R.current=null;return}const E=W.data();if(E.status==="deleted"){sessionStorage.removeItem("hk_room"),pe(""),Ae(null),f("start"),R.current=null,alert("Die Lobby wurde vom Host gelscht.");return}if(!O)return;const se=E.roundId??0,Y=R.current;if(Y!=null&&se<Y){(E.status!==I?.status||se!==I?.roundId)&&ce.warn(" [FIREBASE] Update mit niedrigerer roundId ignoriert:",{lastRoundId:Y,currentRoundId:se,status:E.status,oldStatus:I?.status});return}se>(Y||0)&&(R.current=se),W.metadata.hasPendingWrites===!1&&E?.host===m&&(zt.current=Date.now());const Ie=I?.status,ke=E.status,Ce=I?.roundId,Ee=E.roundId,De=I?.hotseat,ht=E.hotseat,Pe=Ie!==ke,ze=Ce!==Ee,At=De!==ht,xt=I?.votes||{},Ye=E.votes||{},rt=Object.keys(xt),fe=Object.keys(Ye);(rt.length!==fe.length||rt.some(Be=>xt[Be]?.choice!==Ye[Be]?.choice))&&ce.log(" [VOTES] Votes gendert:",{roundId:E.roundId,oldVotes:rt,newVotes:fe});const pt=E.host===m;if(he(pt),Ce!==Ee){if(Ce!=null&&Ee<Ce){ce.error(" [ROUND] KRITISCH: roundId geht zurck!",{oldRoundId:Ce,newRoundId:Ee,status:E.status,roomId:O});return}We&&hn(null)}let bt=!1;if(!I)bt=!0;else{bt=["status","roundId","hotseat","roundRecapShown"].some(at=>I[at]!==E[at]);const tt=I.lobbyReady||{},Xe=E.lobbyReady||{},Xt=Object.keys(tt),Vt=Object.keys(Xe);if(Xt.length!==Vt.length)ce.log(" [LOBBY READY] Anzahl Keys gendert:",{oldCount:Xt.length,newCount:Vt.length,oldKeys:Xt,newKeys:Vt}),bt=!0;else{const at=new Set([...Xt,...Vt]);let Ht=!1;for(const Qt of at){const Tt=tt[Qt],ge=Xe[Qt];Tt===!0!==(ge===!0)&&(Ht=!0)}Ht&&(bt=!0)}if(!bt){const at=I.votes||{},Ht=E.votes||{},Qt=Object.keys(at),Tt=Object.keys(Ht);(Qt.length!==Tt.length||Qt.some(ge=>at[ge]?.choice!==Ht[ge]?.choice))&&(bt=!0)}if(!bt){const at=I.players||{},Ht=E.players||{},Qt=Object.keys(at),Tt=Object.keys(Ht);(Qt.length!==Tt.length||Qt.some(ge=>{const Ge=at[ge],Fe=Ht[ge];return Ge?.temp!==Fe?.temp||Ge?.emoji!==Fe?.emoji}))&&(bt=!0)}if(!bt){const at=I.ready||[],Ht=E.ready||[];(at.length!==Ht.length||at.some((Qt,Tt)=>Qt!==Ht[Tt]))&&(bt=!0)}}if(bt||!I){const Be={...E};E.lobbyReady&&(Be.lobbyReady={...E.lobbyReady}),Ae(Be),(Pe||ze||At)&&ce.log(" [GLOBAL DATA] globalData aktualisiert:",{statusChanged:Pe,roundIdChanged:ze,hotseatChanged:At,status:Be.status,roundId:Be.roundId,hotseat:Be.hotseat,playerCount:Object.keys(Be.players||{}).length,voteCount:Object.keys(Be.votes||{}).length,readyCount:Array.isArray(Be.ready)?Be.ready.length:0})}if(E.status==="lobby")c!=="lobby"&&f("lobby");else if(E.status==="game"){c!=="game"?(ce.log(" [SCREEN] Wechsel zu Game:",{from:c,to:"game",roundId:E.roundId,hotseat:E.hotseat,timestamp:new Date().toISOString(),hasPendingWrites:W.metadata.hasPendingWrites,fromCache:W.metadata.fromCache}),f("game")):ce.log(" [SCREEN] Bereits auf Game-Screen, berspringe Wechsel:",{roundId:E.roundId,hotseat:E.hotseat});const Be=I&&I.status===E.status&&I.roundId===E.roundId&&I.hotseat===E.hotseat&&DM({...I,votes:{}},{...E,votes:{}})&&I.votes?.[m]?.choice===E.votes?.[m]?.choice;Y===null&&E.roundId!==void 0&&(ce.log(" [GAME SCREEN] Initialisiere lastRoundId beim ersten Mal:",E.roundId),Ki(E.roundId));const tt=Y??I?.roundId,Xe=tt!=null&&E.roundId!==tt;if(Xe){ce.log(" [GAME SCREEN] Neue Runde erkannt - RESET Selection:",{oldRoundId:tt,newRoundId:E.roundId,oldSelection:We,lastRoundId:Y,globalDataRoundId:I?.roundId}),hn(null),Ki(E.roundId),jn(!1),vn(!1),Qi(!1),as(!1);return}const Xt=!I&&Y===E.roundId&&!Xe,Vt=E.votes?.[m]?.choice!==void 0,at=E.votes?.[m]?.roundId,Ht=at!==void 0&&at===E.roundId,Qt=Vt&&Ht&&!We&&!Xe;if(Be||Xt)Qt?(ce.log(" [GAME SCREEN] Restore Selection aus Vote:",{oldSelection:We,newSelection:E.votes[m].choice,voteRoundId:at,currentRoundId:E.roundId,isNewRound:Xe}),hn(E.votes[m].choice)):Vt&&!Ht&&We?(ce.warn(" [GAME SCREEN] Vote aus alter Runde - RESET Selection:",{oldSelection:We,voteRoundId:at,currentRoundId:E.roundId}),hn(null)):Xe&&We&&(ce.warn(" [GAME SCREEN] Neue Runde erkannt, aber Selection noch gesetzt - RESET:",{oldSelection:We,currentRoundId:E.roundId,oldRoundId:tt}),hn(null));else if(ce.log(" [GAME SCREEN] Game-Screen Update:",{roundId:E.roundId,oldRoundId:I?.roundId,hotseat:E.hotseat,myVote:E.votes?.[m],allVotes:Object.keys(E.votes||{}),mySelection:We,localActionDone:Yn}),!Xe&&(!I&&E.roundId!==Y&&(ce.log(" [GAME SCREEN] Initialisiere lastRoundId:",E.roundId),Ki(E.roundId)),Y===E.roundId&&E.votes?.[m])){const ge=E.votes[m]?.roundId;ge!==void 0&&ge===E.roundId?We?We!==E.votes[m].choice&&(ce.log(" [GAME SCREEN] Synchronisiere Selection mit Vote (gleiche Runde):",{oldSelection:We,newSelection:E.votes[m].choice,voteRoundId:ge,currentRoundId:E.roundId,reason:"Selection stimmt nicht mit Vote berein"}),hn(E.votes[m].choice)):(ce.log(" [GAME SCREEN] Restore Selection aus Vote (gleiche Runde):",{oldSelection:We,newSelection:E.votes[m].choice,voteRoundId:ge,currentRoundId:E.roundId,reason:"Selection fehlt, Vote existiert"}),hn(E.votes[m].choice)):We&&(ce.warn(" [GAME SCREEN] Vote aus alter Runde - RESET Selection:",{mySelection:We,voteRoundId:ge,currentRoundId:E.roundId}),hn(null))}const Tt=E.roundId||0;if(E.hotseat&&E.players&&Tt!==ln.current&&!os){ln.current=Tt;const ge=m===E.hotseat;ce.log(" [HOTSEAT MODAL] Neue Runde erkannt:",{roundId:Tt,hotseat:E.hotseat,isMeHotseat:ge,myName:m,players:Object.keys(E.players||{}),showHotseatModal:os}),setTimeout(()=>{os||Qa(E.hotseat,E.players)},100)}else E.hotseat&&Tt===ln.current?ce.log(" [HOTSEAT MODAL] Bereits fr diese Runde angezeigt, berspringe:",{roundId:Tt,hotseatModalShownRef:ln.current,showHotseatModal:os}):os&&Tt!==ln.current&&(er(!1),ln.current=null)}else if(E.status==="result"){c!=="result"&&(ce.log(" [SCREEN] Wechsel zu Result:",{from:c,to:"result",roundId:E.roundId}),f("result"));const Be=!0,tt=m===E.hotseat,Xe=E.votes?.[m],Xt=typeof E.hotseat=="string"?E.hotseat:E.hotseat?.name||String(E.hotseat||""),Vt=E.votes?.[Xt],at=Vt?.roundId,Ht=E.roundId,Tt=at!==void 0&&at===Ht?Vt?.choice:void 0,ge=Tt!=null,Ge=ge&&Xe&&String(Xe.choice)===String(Tt),Fe=ge&&Xe&&String(Xe.choice)!==String(Tt),Me=E.attackDecisions||{},dt=E.roundRecapShown??!1;if(ce.log(" [RESULT] Result-Screen Analyse:",{roundId:E.roundId,isHotseat:tt,isPartyMode:Be,myVote:Xe?.choice,hotseat:E.hotseat,hotseatVote:Vt,truth:Tt,hasTruth:ge,guessedCorrectly:Ge,guessedWrong:Fe,attackDecisions:Me,myAttackDecision:Me[m],roundRecapShown:dt,allVotes:Object.keys(E.votes||{}),localActionDone:Yn,showRewardChoice:$i,showAttackSelection:ci,showJokerShop:Rs,pendingAttacks:E.pendingAttacks||{},attackResults:E.attackResults?Object.keys(E.attackResults):[]}),!ge&&!tt)ce.warn(" [RESULT] Hotseat hat noch keine Antwort abgegeben, warte...",{hotseat:E.hotseat,hotseatVote:Vt,allVotes:Object.keys(E.votes||{}),votes:E.votes});else if(tt&&!Me[m]&&s&&O)jn(!0),lt(Ue(s,"lobbies",O),{[`attackDecisions.${m}`]:!0}).catch(ce.error);else if(!(!tt&&Fe&&!Me[m]&&!Be)){if(!tt&&Fe&&!Me[m]&&Be&&s&&O){const Ke=`${E.roundId}-${m}`;Ds.current!==Ke&&(Ds.current=Ke,Ms().catch(ce.error),jn(!0))}}const gn=Y!==E.roundId;gn&&(vn(!1),Qi(!1),as(!1),Ds.current=null),!tt&&Ge&&!Me[m]&&!$i&&!ci&&!Rs&&(ce.log(" [ATTACK] Zeige Angriffsauswahl",{roundId:E.roundId,lastRoundId:Y,isNewRound:gn,attackDecisions:Me[m],isPartyMode:Be}),vn(!0));const Rt=E.popupConfirmed?.[m]===!0,ft=E.config?.maxTemp||100,Xn=E.eliminatedPlayers||[],Zn=Object.keys(E.players||{}).filter(Ke=>(E.players?.[Ke]?.temp||0)<ft&&!Xn.includes(Ke)),ii=Zn.length,si=Object.keys(Me).filter(Ke=>Me[Ke]===!0),Sn=E.hotseat&&E.votes?.[E.hotseat]?.choice!==void 0,Bi=si.length+(Sn&&!Me[E.hotseat]?1:0);if(E.attackResults&&E.attackResults[m]!==void 0&&dt&&!Rt){const Ke=E.attackResults[m],Bt=MM(E.roundId,Ke,dt);ce.log(" [ATTACK MODAL] Attack-Result gefunden:",{roundId:E.roundId,result:Ke,resultKey:Bt,lastAttackResultKey:Oi,attackModalShownRef:mn.current,isOpeningAttackModal:dn,showAttackModal:ls,roundRecapShown:dt,popupConfirmed:Rt,totalDmg:Ke.totalDmg,attackDetails:Ke.attackDetails});const Bn=Bt!==mn.current&&!dn&&!ls&&!Rt;if(Bn){ce.log(" [ATTACK MODAL] Modal wird angezeigt fr Runde:",E.roundId,"| Schaden:",Ke.totalDmg,"C"),mn.current=Bt,br(Bt),Yt(!0),di(Ke);const Ii=setTimeout(()=>{!ls&&mn.current===Bt&&!Rt?(vr(!0),Yt(!1)):(ce.log(" [ATTACK MODAL] Modal wird bereits angezeigt, Ref gendert oder Popup besttigt, berspringe setShowAttackModal:",{showAttackModal:ls,refMatches:mn.current===Bt,popupConfirmed:Rt}),Yt(!1))},300);D.current.push(Ii)}else ce.log(" [ATTACK MODAL] Modal wird NICHT angezeigt:",{resultKeyMatches:Bt===mn.current,isOpening:dn,alreadyShown:ls,popupConfirmed:Rt,resultKey:Bt,attackModalShownRef:mn.current,shouldShow:Bn})}if(E.eliminationInfo&&E.eliminationInfo.player&&!hi){const Ke=E.eliminationInfo.player,Bt=E.config?.maxTemp||100,Bn=E.players?.[Ke]?.temp||0,Ii=`${E.roundId}-${Ke}`;Bn>=Bt&&As!==Ii&&(cs(Ke),on(!0),rs(Ii))}else ce.log(" [ATTACK MODAL] Kein Modal:",{hasAttackResults:!!E.attackResults,hasMyResult:E.attackResults?.[m]!==void 0,roundRecapShown:dt,popupConfirmed:Rt,roundId:E.roundId});const Yi=Bi>=ii,xs=!dt,ar=E.votes||{},Ui=Zn.filter(Ke=>{const Bt=ar[Ke];if(!Bt||Bt.choice===void 0)return!1;const Bn=Bt.roundId;return Bn!==void 0&&Bn===E.roundId}).length,Ot=Ui>=ii&&ii>0;ce.log(" [EXECUTE ATTACKS] Prfung:",{roundId:E.roundId,playerCount:ii,playersWithDecision:si.length,effectiveDecidedCount:Bi,allDecided:Yi,allVoted:Ot,voteCount:Ui,totalVotesInFirebase:Object.keys(ar).length,recapNotShown:xs,hasTruth:ge,hotseat:E.hotseat,hotseatVote:Vt,isHost:de,isMeHost:E.host===m,attackDecisions:Me,hotseatShouldBeDecided:Sn,hotseatInDecisions:Me[E.hotseat]});const qi=E.lastHostActivity,pi=qi&&qi.toMillis?Date.now()-qi.toMillis()>Ni.HOST_INACTIVE_THRESHOLD:!0,zn=E.host,u=!pi&&zn===m,g=E.eliminatedPlayers||[],v=Object.keys(E.players||{}).filter(Ke=>(E.players?.[Ke]?.temp||0)<(E.config?.maxTemp||100)&&!g.includes(Ke)).sort(),F=v.indexOf(m)===0&&v.length>0&&v[0]!==zn,Q=Yi||Ot,be=xs,Le=ge,Ft=u||pi&&F,vt=Q&&be&&Le&&Ft;if(!vt&&(Yi||Ot)&&ce.log(" [EXECUTE ATTACKS] Prfung fehlgeschlagen - Details:",{roundId:E.roundId,condition1_allDecidedOrVoted:Q,allDecided:Yi,allVoted:Ot,condition2_recapNotShown:be,roundRecapShown:E.roundRecapShown,condition3_hasTruth:Le,hotseatVote:E.votes?.[E.hotseat],condition4_hostActive:Ft,isHostActive:u,hostInactive:pi,isFirstBackupHost:F,myName:m,host:E.host}),vt){const Ke=`executeAttacks_${E.roundId}`;if(!qe.current.has(Ke)){qe.current.add(Ke);const Bt=setTimeout(()=>{wr(E).catch(Bn=>{}),qe.current.delete(Ke)},500);D.current.push(Bt)}}else if(!(Yi&&xs&&!ge&&de&&E.host===m)){if(Yi&&xs&&ge&&!vt&&(ce.warn(" [EXECUTE ATTACKS] FALLBACK: Alle Bedingungen erfllt, aber canExecuteAttacks ist false. Versuche trotzdem...",{condition1:Q,condition2:be,condition3:Le,condition4:Ft,isHost:de,myName:m,host:E.host}),F||v[0]===m)){const Ke=`executeAttacks_fallback_${E.roundId}`;if(!qe.current.has(Ke)){qe.current.add(Ke);const Bt=setTimeout(()=>{wr(E).catch(Bn=>{}),qe.current.delete(Ke)},1e3);D.current.push(Bt)}}}}else E.status==="winner"&&c!=="winner"&&f("winner");if(E.status==="game"){const Be=E.lastHostActivity,tt=Be&&Be.toMillis?Date.now()-Be.toMillis()>Ni.HOST_INACTIVE_THRESHOLD:!1,Xe=E.host,Xt=E.config?.maxTemp||Ni.MAX_TEMP_DEFAULT,Vt=E.eliminatedPlayers||[],at=il(E.players,Xt,Vt),Qt=at.indexOf(m)===0&&at.length>0&&at[0]!==Xe,Tt=!tt&&Xe===m,ge=il(E.players,Xt,Vt),Ge=ge.length,Fe=ge.filter(Zn=>{const ii=E.votes?.[Zn];if(!ii||ii.choice===void 0)return!1;const si=ii?.roundId;return si!==void 0&&si===E.roundId}).length,Me=NM(E.hotseat),dt=Me?E.votes?.[Me]:null,gn=dt?.roundId;!(Me&&ge.includes(Me)&&dt?.choice!==void 0&&gn!==void 0&&gn===E.roundId)&&Me&&ce.warn(" [AUTO-ADVANCE] Hotseat hat noch nicht (gltig) abgestimmt:",{hotseat:Me,hasVote:!!dt,choice:dt?.choice,voteRoundId:gn,currentRoundId:E.roundId,isActive:ge.includes(Me)});const ft=Fe>=Ge&&Ge>0;if(E.votes&&(ft||Tt||tt&&Qt||Xe===m&&!Be)){const Zn=E.config?.maxTemp||Ni.MAX_TEMP_DEFAULT;if(il(E.players,Zn).length,ft){const Sn=`autoAdvance_${E.roundId}`;if(!qe.current.has(Sn)){qe.current.add(Sn);const Bi=setTimeout(async()=>{try{await kn(()=>lt(Ue(s,"lobbies",O),{status:"result",lastHostActivity:Fi()}),`autoAdvance_${E.roundId}`,5,1e3)}catch{ct("slow"),qe.current.delete(Sn)}},500);D.current.push(Bi)}}}}if(E.status==="result"){let Be=E.roundRecapShown??!1;const tt=E.lastHostActivity,Xe=tt&&tt.toMillis?Date.now()-tt.toMillis()>Ni.HOST_INACTIVE_THRESHOLD:!0,Xt=E.host,Vt=E.config?.maxTemp||Ni.MAX_TEMP_DEFAULT,at=il(E.players,Vt),Qt=at.indexOf(m)===0&&at.length>0&&at[0]!==Xt,Tt=!Xe&&Xt===m,ge=E.config?.maxTemp||100,Ge=E.eliminatedPlayers||[],Fe=Object.keys(E.players||{}).filter(Ot=>(E.players?.[Ot]?.temp||0)<ge&&!Ge.includes(Ot)),Me=Fe.length,dt=Fe.filter(Ot=>{const qi=E.votes?.[Ot];if(!qi||qi.choice===void 0)return!1;const pi=qi.roundId;return pi!==void 0&&pi===E.roundId}).length,gn=E.ready||[],Rt=Fe.filter(Ot=>gn.includes(Ot)).length,ft=Rt>=Me&&Me>0,Xn=dt>=Me&&Me>0,Zn=E.popupConfirmed||{},si=!(E.attackResults&&Object.keys(E.attackResults).length>0)||Fe.every(Ot=>E.attackResults?.[Ot]?Zn[Ot]===!0:!0),Sn=E.attackDecisions||{},Bi=Object.keys(Sn).filter(Ot=>Sn[Ot]===!0),Yi=E.hotseat&&E.votes?.[E.hotseat]?.choice!==void 0,xs=Bi.length+(Yi&&!Sn[E.hotseat]?1:0),ar=xs>=Me&&Me>0;E.status==="result"&&!Be&&ft&&(Xn||ar)&&si&&(Tt||Xe&&Qt)&&s&&O&&(ce.log(" [AUTO-NEXT] FALLBACK: Setze roundRecapShown auf true, weil alle bereit sind:",{roundId:E.roundId,allReady:ft,allVoted:Xn,allDecided:ar,allPopupConfirmed:si,readyCount:Rt,playerCount:Me,effectiveDecidedCount:xs}),lt(Ue(s,"lobbies",O),{roundRecapShown:!0}).catch(Ot=>{}),Be=!0);const Ui=E.status==="result"&&Be&&(Tt||Xe&&Qt||ft&&Xn&&si&&at.includes(m));if(!Ui&&E.status==="result"&&ce.log(" [AUTO-NEXT] canAutoNext ist false - Details:",{roundId:E.roundId,status:E.status,roundRecapShown:E.roundRecapShown,roundRecapShownForNext:Be,allReadyCheck:ft,allVotedCheck:Xn,allPopupConfirmedCheck:si,isHostActiveNext:Tt,hostInactiveNext:Xe,isFirstBackupHostNext:Qt,myName:m,host:E.host}),Ui){const Ot=E.config?.maxTemp||100,qi=E.eliminatedPlayers||[],pi=Object.keys(E.players||{}).filter(Le=>(E.players?.[Le]?.temp||0)<Ot&&!qi.includes(Le)),zn=pi.length,u=pi.filter(Le=>{const Ft=E.votes?.[Le];if(!Ft||Ft.choice===void 0)return!1;const vt=Ft.roundId;return vt!==void 0&&vt===E.roundId}).length,g=E.popupConfirmed||{};!(E.attackResults&&Object.keys(E.attackResults).length>0)||pi.every(Le=>E.attackResults?.[Le]?g[Le]===!0:!0);const w=E.ready||[],F=pi.filter(Le=>w.includes(Le)).length,Q=F>=zn&&zn>0,be=u>=zn&&zn>0&&Q;if(!be&&Ui&&ce.log(" [AUTO-NEXT] shouldNext ist false - Details:",{roundId:E.roundId,voteCount:u,playerCount:zn,readyCount:F,allReady:Q,hasEnoughVotes:u>=zn,hasEnoughPlayers:zn>0,readyList:w,activePlayers:pi}),be){const Le=`autoNext_${E.roundId}`;if(!qe.current.has(Le)){qe.current.add(Le);const Ft=setTimeout(async()=>{try{await kn(()=>gi(),`autoNext_${E.roundId}`,5,2e3)}catch{ct("slow")}qe.current.delete(Le)},1e3);D.current.push(Ft)}}}}},{includeMetadataChanges:!0}),q=setInterval(()=>{const W=Date.now()-Vi.current;W>Ni.CONNECTION_OFFLINE_THRESHOLD?ct("offline"):W>Ni.CONNECTION_SLOW_THRESHOLD?ct("slow"):ct("online")},Ni.CONNECTION_CHECK_INTERVAL),X=setInterval(async()=>{if(!(!s||!O||!m))try{const W=await ai(Ue(s,"lobbies",O));if(!W.exists()){ce.debug(" [PRESENCE] Lobby existiert nicht mehr, stoppe Heartbeat");return}if(W.data()?.status==="deleted"){ce.debug(" [PRESENCE] Lobby wurde gelscht, stoppe Heartbeat");return}await lt(Ue(s,"lobbies",O),{[`players.${m}.lastSeen`]:Fi()})}catch(W){if(W?.code==="permission-denied"||W?.code==="not-found")return}},5e3),me=setInterval(async()=>{if(!(!de||!s||!O||!I?.players))try{const W=Date.now(),E=15e3,se=[];for(const[Y,Ie]of Object.entries(I.players)){const ke=Ie?.lastSeen;if(ke&&ke.toMillis){const Ce=W-ke.toMillis();Ce>E&&(se.push(Y),ce.warn(` [PRESENCE] Spieler ${Y} ist inaktiv (${Math.round(Ce/1e3)}s)`))}}se.length>0&&ce.warn(" [PRESENCE] Inaktive Spieler erkannt:",se)}catch{}},1e4);return()=>{M(),clearInterval(q),clearInterval(X),clearInterval(me),D.current.forEach(W=>clearTimeout(W)),D.current=[],qe.current.clear()}},[s,O,m,de]);const _e=Z.useRef(null),[we,He]=Z.useState(Math.floor(Br.length/2)),_t=Z.useRef(!1),tn=Z.useRef({x:0,y:0,time:0});Z.useEffect(()=>{const M=Math.floor(Br.length/2),q=Br[M];if(c==="start")(A!==q||we!==M)&&(V(q),He(M),sessionStorage.setItem("hk_emoji",q));else if(!A||!Br.includes(A))V(q),He(M),sessionStorage.setItem("hk_emoji",q);else{const X=Br.indexOf(A);X>=0?He(X):(He(M),V(q))}},[c]),Z.useEffect(()=>{if(_e.current&&we>=0&&c==="start"){const M=_e.current,X=M.querySelectorAll(".emoji-card")[we];X&&(_t.current=!0,setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{const me=M.clientWidth,W=X.offsetWidth||80,se=X.offsetLeft-me/2+W/2,Y=Math.max(0,Math.min(se,M.scrollWidth-M.clientWidth));M.scrollLeft=Y,setTimeout(()=>{Math.abs(M.scrollLeft-Y)>10&&(M.scrollLeft=Y),setTimeout(()=>{_t.current=!1},100)},50)})})},150))}},[we,c]);const mi=M=>{const q=Br.indexOf(M);q>=0&&(He(q),V(M),sessionStorage.setItem("hk_emoji",M),_e.current&&_e.current.querySelectorAll(".emoji-card").forEach((me,W)=>{W===q?me.classList.add("selected"):me.classList.remove("selected")}))},Hs=Z.useCallback(M=>{const q=M.target.value.trim().substring(0,20);b(q),sessionStorage.setItem("hk_name",q)},[]),Pi=Z.useCallback(M=>{$t(M==="all"?q=>q.length===Object.keys(Si).length?[]:Object.keys(Si):q=>q.includes(M)?q.filter(X=>X!==M):[...q,M])},[]);Z.useCallback(M=>{const q=[...M];for(let X=q.length-1;X>0;X--){const me=Math.floor(Math.random()*(X+1));[q[X],q[me]]=[q[me],q[X]]}return q},[]);const Wi=Z.useCallback(()=>{if(je.length===0)return;const M=ut+1;M>=je.length?(un(0),Se(je[0])):(un(M),Se(je[M]))},[je,ut]),zi=Z.useCallback(()=>{if(ut===0)return;const M=ut-1;un(M),Se(je[M])},[je,ut]),ks=async()=>{if(!m.trim()){alert("Bitte gib deinen Namen ein!");return}if(C.length===0){alert("Bitte whle mindestens eine Kategorie aus!");return}if(!s){alert("Fehler: Firebase ist noch nicht initialisiert. Bitte warte einen Moment und versuche es erneut.");return}const M=Ni.ATTACK_DMG_PARTY,q=1.5,X=Ni.MAX_TEMP_DEFAULT,me=Math.random().toString(36).substring(2,6).toUpperCase();try{const E=_c(C)[0]||{q:"Willkommen zu Hitzkopf!",a:"A",b:"B"},se=E.category||null;ce.log(" [CREATE GAME] Versuche Lobby zu erstellen:",{code:me,host:m,categories:C.length});const Y={host:m,hostName:m,status:"lobby",createdAt:Fi(),players:{[m]:{temp:0,inventory:[],emoji:A,lastSeen:Fi()}},config:{dmg:M,speed:q,startTemp:0,maxTemp:X,categories:C},votes:{},ready:[],log:[],hotseat:"",currentQ:E,roundId:0,lobbyReady:{}};se&&(Y.lastQuestionCategory=se),await CE(Ue(s,"lobbies",me),Y),pe(me),sessionStorage.setItem("hk_room",me),he(!0),f("lobby"),R.current=null,ce.log(" [CREATE GAME] Lobby erfolgreich erstellt:",me)}catch(W){ce.error(" [CREATE GAME] Fehler beim Erstellen der Lobby:",{error:W,code:W.code,message:W.message,stack:W.stack}),pe(""),sessionStorage.removeItem("hk_room"),he(!1),W.code==="permission-denied"?alert("Fehler: Keine Berechtigung zum Erstellen einer Lobby. Bitte berprfe deine Firebase-Berechtigungen."):W.code==="unavailable"?alert("Fehler: Firebase ist nicht verfgbar. Bitte berprfe deine Internetverbindung."):alert(`Fehler beim Erstellen des Spiels: ${W.message||"Unbekannter Fehler"}`)}},Rn=async(M=null)=>{if(!m.trim()){alert("Bitte gib deinen Namen ein!");return}const q=(M||ve).toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,6);if(!q||q.length<4){alert("Bitte whle einen Raum aus der Liste!");return}const X=Ue(s,"lobbies",q),me=await ai(X);if(!me.exists()){alert("Lobby nicht gefunden!");return}const W=me.data();W.players&&W.players[m]&&alert("Du bist bereits in diesem Raum!"),pe(q),sessionStorage.setItem("hk_room",q),he(!1),R.current=null,await lt(X,{[`players.${m}`]:{temp:0,inventory:[],emoji:A},[`players.${m}.lastSeen`]:Fi()})},Xr=async()=>{if(!s)return;const M=Km(s,"lobbies"),q=Qm(M,Wm("status","==","lobby")),X=await Ym(q),me=[];X.forEach(W=>{const E=W.data();if(E.hostName&&E.status==="lobby"){const se=E.players?.[E.hostName]?.emoji||"";me.push({id:W.id,hostName:E.hostName,hostEmoji:se,playerCount:Object.keys(E.players||{}).length})}}),re(me),X.forEach(W=>{const E=W.data();E.hostName==="Host"&&E.status==="lobby"&&(ce.log(' [CLEANUP] Lsche alten Raum von "Host":',W.id),pl(W.ref).catch(se=>{}))})},Ga=async M=>{Ve(M),await Rn(M)},hs=async()=>{if(xn("toggle",.4),!s||!O)return;const M=I?.config?.maxTemp||100;if((I?.players?.[m]?.temp||0)>=M){alert("Du bist ausgeschieden und kannst nicht mehr mitspielen!");return}const W=!!!I?.lobbyReady?.[m];I&&Ae({...I,lobbyReady:{...I.lobbyReady||{},[m]:W}}),await lt(Ue(s,"lobbies",O),{[`lobbyReady.${m}`]:W})},Ns=async()=>{if(!s||!O||!de)return;const M=I?.config?.maxTemp||100,q=Object.keys(I?.players||{}),X=q.filter(De=>(I?.players?.[De]?.temp||0)<M),me=I?.lobbyReady||{},W=X.filter(De=>me[De]).length;if(ce.log(" [START GAME] Prfung:",{allPlayers:q,activePlayers:X,readyCount:W,totalActivePlayers:X.length,lobbyReady:me}),W<X.length||X.length<2){ce.warn(" [START GAME] Nicht alle aktiven Spieler bereit:",W,"/",X.length),alert(`Alle aktiven Spieler mssen bereit sein! (${W}/${X.length})`);return}await Wa(I.players);const E=I?.usedQuestions||[],se=I?.config?.categories||Object.keys(Si),Y=_c(se);let Ie=E;E.length>0&&typeof E[0]=="number"&&(Ie=E.map(De=>Y[De]?.id).filter(Boolean));const ke=Y.filter(De=>De.id&&!Ie.includes(De.id)),Ce=ke[Math.floor(Math.random()*ke.length)]||Y[0],Ee=(I?.roundId??0)+1;ce.log(" [START GAME] Starte erste Runde:",{hotseat:X[0],question:Ce.q,roundId:Ee,questionId:Ce.id}),xn("game_start",.7),await lt(Ue(s,"lobbies",O),{status:"game",hotseat:X[0],currentQ:Ce,votes:{},ready:[],roundId:Ee,lobbyReady:{},usedQuestions:Ce.id&&!Ie.includes(Ce.id)?[...Ie,Ce.id]:Ie,lastQuestionCategory:Ce.category,pendingAttacks:{},attackDecisions:{},attackResults:{},roundRecapShown:!1,popupConfirmed:{}})},Zr=Z.useCallback(M=>{if(I){const q=I.config?.maxTemp||100;if((I.players?.[m]?.temp||0)>=q){alert("Du bist ausgeschieden und kannst nicht mehr abstimmen!");return}}hn(M),xn("click",.3)},[xn,I,m]),Ka=Z.useCallback(async()=>{if(Yn)return;if(!s||!O){alert("Fehler: Datenbank-Verbindung fehlt!");return}const M=await ai(Ue(s,"lobbies",O));if(!M.exists()){alert("Lobby existiert nicht mehr!");return}const q=M.data(),X=q?.config?.maxTemp||100;if((q?.players?.[m]?.temp||0)>=X){alert("Du bist ausgeschieden und kannst nicht mehr abstimmen!");return}const W=q?.votes?.[m],E=q?.roundId||0;ce.log(" [SUBMIT VOTE] Prfe bestehende Votes:",{existingVote:W,allVotes:Object.keys(q?.votes||{}),roundId:E,myName:m,mySelection:We});const se=W?.roundId;if(W&&se!==void 0&&se===E){alert("Du hast bereits abgestimmt!");return}if(!We)if(W?.choice)ce.log(" [SUBMIT VOTE] Restore mySelection aus existingVote:",W.choice),hn(W.choice),W.choice;else{alert("Bitte whle zuerst eine Antwort!");return}const Ie=We||W?.choice;if(!Ie){alert("Bitte whle zuerst eine Antwort!");return}const ke=`submitVote_${m}_${E}_${Date.now()}`;let Ce=!1;try{Ce=await kn(async()=>{await eT(s,async Ee=>{const De=Ue(s,"lobbies",O),ht=await Ee.get(De);if(!ht.exists())throw new Error("Lobby existiert nicht mehr!");const Pe=ht.data(),ze=Pe?.roundId||0;if(ze!==E)throw ce.warn(" [SUBMIT VOTE] RoundId hat sich gendert whrend Transaction:",{expectedRoundId:E,actualRoundId:ze}),new Error("Runde hat sich gendert!");const At=Pe?.votes?.[m],xt=At?.roundId;if(At&&(xt!==void 0&&xt===ze||xt===void 0&&ze===E))throw ce.warn(" [SUBMIT VOTE] Bereits in dieser Runde abgestimmt (Transaction):",{existingVote:At,currentRoundIdInTransaction:ze,existingVoteRoundId:xt,currentRoundId:E}),new Error("Du hast bereits abgestimmt!");Ee.update(De,{[`votes.${m}`]:{choice:String(Ie),strategy:ss||"none",roundId:ze,timestamp:Fi()}})})},ke,3,500)}catch(Ee){if(Ee?.code==="failed-precondition"||Ee?.message?.includes("failed-precondition"))try{const De=await ai(Ue(s,"lobbies",O));if(!De.exists())throw new Error("Lobby existiert nicht mehr!");const ht=De.data(),Pe=ht?.roundId||0;if(Pe!==E)throw ce.warn(" [SUBMIT VOTE] RoundId hat sich gendert:",{expectedRoundId:E,actualRoundId:Pe}),new Error("Runde hat sich gendert!");const ze=ht?.votes?.[m],At=ze?.roundId;if(ze&&(At!==void 0&&At===Pe||At===void 0&&Pe===E))throw ce.warn(" [SUBMIT VOTE] Bereits in dieser Runde abgestimmt (Fallback):",{existingVote:ze,currentRoundIdInFallback:Pe}),new Error("Du hast bereits abgestimmt!");Ce=await kn(async()=>{await lt(Ue(s,"lobbies",O),{[`votes.${m}`]:{choice:String(Ie),strategy:ss||"none",roundId:Pe,timestamp:Fi()}})},`${ke}_fallback`,3,500)}catch{Ce=!1}else Ce=!1}Ce?(jn(!0),xn("click",.3)):I?.votes?.[m]?.roundId===E?alert("Du hast bereits abgestimmt!"):alert("Fehler beim Absenden der Antwort! Bitte versuche es erneut.")},[xn,I,m,We,ss,s,O]),$a=async()=>{if(!s||!O)return;const M=Ue(s,"lobbies",O),X=(I?.ready||[]).includes(m);try{X?(await lt(M,{ready:yc(m)}),ce.log(" [SET READY] Nicht mehr bereit gesetzt")):(await lt(M,{ready:cl(m)}),ce.log(" [SET READY] Bereit gesetzt"))}catch{try{const W=await ai(M);if(!W.exists()){ce.error(" [SET READY] Lobby existiert nicht mehr");return}const Y=(W.data()?.ready||[]).includes(m);Y!==X&&(Y?await lt(M,{ready:yc(m)}):await lt(M,{ready:cl(m)}),ce.log(" [SET READY] Retry erfolgreich"))}catch{}}},Jr=Z.useCallback(()=>{pe(""),Ae(null),f("start"),sessionStorage.removeItem("hk_room"),R.current=null},[]),Sr=Z.useMemo(()=>{if(!I?.players)return[];const M=I.host,q=Object.entries(I.players),X=q.find(([E])=>E===M),me=q.filter(([E])=>E!==M);return(X?[X,...me]:me).map(([E,se])=>({name:E,temp:se.temp||0,emoji:se.emoji||""}))},[I?.players,I?.host]),Tn=Z.useCallback(()=>Sr,[Sr]),ln=Z.useRef(null),mn=Z.useRef(null),Ds=Z.useRef(null),Qa=(M,q)=>{if(M&&q){if(os)return;er(!0)}},qt=()=>{er(!1)},ir=async()=>{if(vr(!1),Yt(!1),di(null),O&&m&&s)try{await kn(async()=>{const M=Ue(s,"lobbies",O);((await ai(M)).data()?.popupConfirmed||{})[m]||(ce.log(" [ATTACK MODAL] Markiere Popup als besttigt fr",m),await lt(M,{[`popupConfirmed.${m}`]:!0}),ce.log(" [ATTACK MODAL] Popup erfolgreich als besttigt markiert"))},`confirmPopup_${m}`,3,500)}catch{}},Ms=async()=>{if(!s||!O)return;const M=10,q=Ue(s,"lobbies",O),W={...(await ai(q)).data()?.attackDecisions||{},[m]:!0};await lt(q,{[`players.${m}.temp`]:vm(M),log:cl(` ${m} hat falsch geraten und sich selbst aufgeheizt (+${M}C)`),attackDecisions:W}).then(()=>{if(I&&I.players&&I.players[m]){const E=I.players[m].temp||0;Ae({...I,players:{...I.players,[m]:{...I.players[m],temp:E+M}}})}}).catch(E=>{})},Er=async M=>{if(xn("attack",.6),!s||!O)return;const q=Ni.ATTACK_DMG_PARTY,me=(I?.players?.[m]||{}).inventory?.includes("card_oil"),W=q*(me?2:1);try{await eT(s,async E=>{const se=Ue(s,"lobbies",O),Y=await E.get(se);if(!Y.exists())throw new Error("Lobby existiert nicht mehr!");const Ie=Y.data(),ke=Ie?.pendingAttacks||{},Ce=Ie?.attackDecisions||{};if(Ce[m]===!0)throw new Error("Du hast bereits eine Angriffsentscheidung getroffen!");const Ee=ke[M]||[];Ee.push({attacker:m,dmg:W,hasOil:me});const De={...ke,[M]:Ee},ht={...Ce,[m]:!0};E.update(se,{pendingAttacks:De,attackDecisions:ht}),me&&(E.update(se,{[`players.${m}.inventory`]:yc("card_oil")}),ce.log(" [ATTACK] lfass wird verbraucht"))}),ce.log(" [ATTACK] Angriff erfolgreich gesendet (Transaction)"),jn(!0)}catch(E){E.message==="Du hast bereits eine Angriffsentscheidung getroffen!"?(jn(!0),alert("Du hast bereits eine Angriffsentscheidung getroffen!")):alert("Fehler beim Senden des Angriffs: "+E.message)}},gi=async()=>{if(!de)return;const M=`nextRound_${Date.now()}`;if(wt.current.set(M,{startTime:Date.now(),attempts:0}),!s||!O)return;const q=await ai(Ue(s,"lobbies",O));if(!q.exists())return;const X=q.data();if(X.status==="deleted"||!O)return;const me=X.host===m;if(!me&&!de){const pt=X.config?.maxTemp||100,bt=X.eliminatedPlayers||[],Be=Object.keys(X.players||{}).filter(Fe=>(X.players?.[Fe]?.temp||0)<pt&&!bt.includes(Fe)),tt=Be.length,Xe=Be.filter(Fe=>{const Me=X.votes?.[Fe];if(!Me||Me.choice===void 0)return!1;const dt=Me.roundId;return dt!==void 0&&dt===X.roundId}).length,Xt=X.ready||[],Vt=Be.filter(Fe=>Xt.includes(Fe)).length,at=Vt>=tt&&tt>0,Ht=Xe>=tt&&tt>0,Qt=X.popupConfirmed||{},ge=!(X.attackResults&&Object.keys(X.attackResults).length>0)||Be.every(Fe=>X.attackResults?.[Fe]?Qt[Fe]===!0:!0),Ge=X.roundRecapShown??!1;if(!(at&&Ht&&ge&&Ge&&X.status==="result")){const Fe=Be.map(Me=>{const dt=X.votes?.[Me];return{player:Me,hasVote:!!dt,choice:dt?.choice,roundId:dt?.roundId,currentRoundId:X.roundId,isValid:dt?.roundId===X.roundId}});ce.warn(" [NEXT ROUND] Nicht der Host und Failover-Bedingungen nicht erfllt:",{roundId:X.roundId,allReady:at,allVoted:Ht,allPopupConfirmed:ge,roundRecapShown:Ge,status:X.status,voteCount:Xe,playerCount:tt,readyCount:Vt,voteDetails:Fe,readyList:Xt});return}}else if(!me){ce.warn(" [NEXT ROUND] Host-Check fehlgeschlagen:",{host:X.host,myName:m});return}ce.log(" [NEXT ROUND] Aktuelle Daten:",{roundId:X.roundId,status:X.status,players:Object.keys(X.players||{})});const W=X?.players||{},E=Object.keys(W),se=X?.config?.maxTemp||Ni.MAX_TEMP_DEFAULT,Y=il(W,se);if(ce.log(" [NEXT ROUND] Aktive Spieler:",{allPlayers:E,activePlayers:Y,maxTemp:se,playerTemps:E.map(pt=>({name:pt,temp:X?.players[pt]?.temp||0}))}),Y.length<=1){const pt=Y.length===1?Y[0]:null;ce.log(" [NEXT ROUND] Spielende erkannt:",{activePlayers:Y.length,winner:pt,allPlayers:E.map(bt=>({name:bt,temp:X?.players[bt]?.temp||0}))}),await lt(Ue(s,"lobbies",O),{status:"winner"});return}const Ie=X?.hotseat||"",ke=typeof Ie=="string"?Ie:Ie?.name||String(Ie||"");let Ce=Y.indexOf(ke);Ce===-1&&(Ce=0),Ce=(Ce+1)%Y.length;const Ee=Y[Ce],De=X?.usedQuestions||[],ht=X?.config?.categories||Object.keys(Si),Pe=_c(ht);let ze=De;De.length>0&&typeof De[0]=="number"&&(ze=De.map(pt=>Pe[pt]?.id).filter(Boolean));const At=Pe.filter(pt=>pt.id&&!ze.includes(pt.id)),xt=(X?.roundId??0)+1,Ye=At.length>0?xt%At.length:0,rt=At[Ye]||Pe[0];ce.log(" [NEXT ROUND] Runden-Details:",{currentHotseat:ke,nextHotseat:Ee,nextHotseatIndex:Ce,question:rt.q,nextRoundId:xt}),await Wa(X.players),ce.log(" [NEXT ROUND] Bereite nchste Runde vor:",{nextRoundId:xt,hotseat:Ee,question:rt.q,activePlayers:Y}),ce.log(" [NEXT ROUND] Erstelle updateData Objekt:",{currentRoundId:X?.roundId,nextRoundId:xt,currentStatus:X?.status,nextHotseat:Ee,hasRandomQ:!!rt,randomQId:rt?.id,randomQCategory:rt?.category});const fe={status:"game",hotseat:Ee,currentQ:rt,roundId:xt,lastQuestionCategory:rt.category,roundRecapShown:!1,lastHostActivity:Fi()};if(ce.log(" [NEXT ROUND] Basis-updateData erstellt:",{keys:Object.keys(fe),status:fe.status,roundId:fe.roundId,hotseat:fe.hotseat,hasCurrentQ:!!fe.currentQ}),fe.votes=Ti(),fe.ready=[],fe.lobbyReady={},fe.pendingAttacks={},fe.attackDecisions={},fe.attackResults={},fe.popupConfirmed={},ce.log(" [NEXT ROUND] updateData vollstndig erstellt:",{totalKeys:Object.keys(fe).length,hasDeleteFields:fe.votes===Ti(),arrayFields:{ready:Array.isArray(fe.ready),usedQuestions:Array.isArray(fe.usedQuestions)},objectFields:{lobbyReady:typeof fe.lobbyReady=="object",pendingAttacks:typeof fe.pendingAttacks=="object",attackDecisions:typeof fe.attackDecisions=="object",attackResults:typeof fe.attackResults=="object",popupConfirmed:typeof fe.popupConfirmed=="object"}}),rt.id&&!ze.includes(rt.id)?fe.usedQuestions=[...ze,rt.id]:fe.usedQuestions=ze,ce.log(" [NEXT ROUND] Update Firebase mit:",{roomId:O,roundId:fe.roundId,status:fe.status,hotseat:fe.hotseat,currentQ:fe.currentQ?{q:fe.currentQ.q?.substring(0,50),category:fe.currentQ.category}:null,lastQuestionCategory:fe.lastQuestionCategory,roundRecapShown:fe.roundRecapShown,hasLastHostActivity:!!fe.lastHostActivity,votes:"[deleteField]",ready:Array.isArray(fe.ready)?fe.ready:"not array",lobbyReady:fe.lobbyReady?Object.keys(fe.lobbyReady).length:0,pendingAttacks:fe.pendingAttacks?Object.keys(fe.pendingAttacks).length:0,attackDecisions:fe.attackDecisions?Object.keys(fe.attackDecisions).length:0,attackResults:fe.attackResults?Object.keys(fe.attackResults).length:0,popupConfirmed:fe.popupConfirmed?Object.keys(fe.popupConfirmed).length:0,usedQuestions:Array.isArray(fe.usedQuestions)?fe.usedQuestions.length:"not array"}),!O){wt.current.delete(M);return}if(ce.log(" [NEXT ROUND] Starte Firebase-Update:",{roomId:O,updateDataKeys:Object.keys(fe),roundId:fe.roundId,status:fe.status,hasDeleteFields:fe.votes===Ti(),updateDataSize:JSON.stringify(fe).length}),await kn(async()=>{if(!O)throw new Error("roomId wurde gelscht");ce.log(" [NEXT ROUND] Versuche updateDoc:",{roomId:O,timestamp:Date.now(),updateData:{status:fe.status,roundId:fe.roundId,hotseat:fe.hotseat,hasVotes:fe.votes!==void 0,readyLength:Array.isArray(fe.ready)?fe.ready.length:"not array",lobbyReadyKeys:fe.lobbyReady?Object.keys(fe.lobbyReady).length:0,pendingAttacksKeys:fe.pendingAttacks?Object.keys(fe.pendingAttacks).length:0,attackDecisionsKeys:fe.attackDecisions?Object.keys(fe.attackDecisions).length:0,attackResultsKeys:fe.attackResults?Object.keys(fe.attackResults).length:0,popupConfirmedKeys:fe.popupConfirmed?Object.keys(fe.popupConfirmed).length:0,usedQuestionsLength:Array.isArray(fe.usedQuestions)?fe.usedQuestions.length:"not array",hasCurrentQ:!!fe.currentQ,lastQuestionCategory:fe.lastQuestionCategory,roundRecapShown:fe.roundRecapShown,hasLastHostActivity:!!fe.lastHostActivity}});const pt=Date.now();await lt(Ue(s,"lobbies",O),fe);const bt=Date.now()-pt;ce.log(" [NEXT ROUND] updateDoc erfolgreich:",{duration:bt+"ms",roomId:O,roundId:fe.roundId,timestamp:new Date().toISOString()})},M,3,1e3))wt.current.delete(M);else{if(!O){wt.current.delete(M);return}setTimeout(async()=>{if(!O||!s){wt.current.delete(M);return}try{const pt=await ai(Ue(s,"lobbies",O));if(!pt.exists()||pt.data()?.status==="deleted"){ce.warn(" [NEXT ROUND] Lobby existiert nicht mehr, kein Retry"),wt.current.delete(M);return}await lt(Ue(s,"lobbies",O),fe),Vi.current=Date.now(),wt.current.delete(M),ce.log(" [NEXT ROUND] Retry erfolgreich")}catch{wt.current.delete(M)}},3e3)}},wr=async M=>{const q=`executeAttacks_${M?.roundId||Date.now()}`;wt.current.set(q,{startTime:Date.now(),attempts:0});const X=M?.config?.maxTemp||100,me=Object.keys(M?.players||{}).filter(ge=>(M.players?.[ge]?.temp||0)<X).sort(),W=M?.host,E=W===m,Y=me.indexOf(m)===0&&me.length>0,Ie=E||Y||de;if(ce.log(" [EXECUTE ATTACKS] Starte executePendingAttacks:",{roundId:M?.roundId,myName:m,hostName:W,isCurrentHost:E,isFirstBackupHost:Y,isHost:de,canExecute:Ie,hasDb:!!s,roomId:O}),!Ie){wt.current.delete(q);return}if(!s||!O){wt.current.delete(q);return}const ke=await ai(Ue(s,"lobbies",O));if(!ke.exists())return;const Ce=ke.data();if(Ce.status==="deleted"||Ce.host!==m||!O)return;const Ee=ke.data(),De=Ee.pendingAttacks||{},ht=Ee.players||{},Pe=Ee.attackDecisions||{},ze=typeof Ee.hotseat=="string"?Ee.hotseat:Ee.hotseat?.name||String(Ee.hotseat||""),At=Ee?.config?.maxTemp||100,xt=Ee?.eliminatedPlayers||[],Ye=Object.keys(ht).filter(ge=>(ht[ge]?.temp||0)<At&&!xt.includes(ge)),rt=Ye.filter(ge=>{if(ge===ze)return!1;const Ge=Ee.votes||{},Fe=Ge[ze],Me=Ge[ge];if(Fe&&Me){const dt=String(Fe.choice||"");if(String(Me.choice||"")!==dt)return!1}return!0}),fe=rt.every(ge=>Pe[ge]===!0),pn=Ye.filter(ge=>{if(ge===ze)return!1;const Ge=Ee.votes||{},Fe=Ge[ze],Me=Ge[ge];if(Fe&&Me){const dt=String(Fe.choice||"");if(String(Me.choice||"")!==dt)return!0}return!1}),pt=pn.every(ge=>Pe[ge]===!0);if(ce.log(" [EXECUTE ATTACKS] Verarbeite Angriffe:",{roundId:Ee.roundId,pendingAttacks:De,players:Object.keys(ht),playersWhoCanAttack:rt,playersWhoCannotAttack:pn,allAttackersDecided:fe,allNonAttackersDecided:pt,attackDecisions:Pe}),!fe&&rt.length>0){const ge=rt.filter(Ge=>!Pe[Ge]);ce.warn(" [EXECUTE ATTACKS]  Nicht alle Angreifer haben entschieden, warte noch...",{roundId:Ee.roundId,playersWhoCanAttack:rt,missing:ge,attackDecisions:Pe,pendingAttacks:De,allAttackersDecided:fe});return}if(rt.length===0&&!pt&&pn.length>0){const ge=pn.filter(Fe=>!Pe[Fe]);if(ce.warn(" [EXECUTE ATTACKS]  Nicht alle Nicht-Angreifer haben entschieden, warte noch...",{roundId:Ee.roundId,playersWhoCannotAttack:pn,missing:ge,attackDecisions:Pe,allNonAttackersDecided:pt,totalPlayers:Ye.length,hotseatName:ze}),Ye.length===pn.length+1){await lt(Ue(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}return}if(rt.length===0&&pt){await lt(Ue(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}if(rt.length===0&&pn.length===0){await lt(Ue(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}ce.log(" [EXECUTE ATTACKS]  Alle Entscheidungen getroffen, verarbeite Angriffe...",{roundId:Ee.roundId,playersWhoCanAttack:rt,playersWhoCannotAttack:pn,allAttackersDecided:fe,allNonAttackersDecided:pt,pendingAttacks:De});const bt={},Be={},tt=[];for(const[ge,Ge]of Object.entries(De)){if(!ht[ge]||!Array.isArray(Ge)||Ge.length===0)continue;const Me=ht[ge].inventory?.includes("card_mirror");let dt=0;const gn=[];if(Ge.forEach(Rt=>{dt+=Rt.dmg||0,gn.push(Rt.attacker),Rt.hasOil?tt.push(` ${Rt.attacker} greift ${ge} mit dem lfass an (+${Rt.dmg}C)`):tt.push(` ${Rt.attacker} greift ${ge} an (+${Rt.dmg}C)`)}),Me){await lt(Ue(s,"lobbies",O),{[`players.${ge}.inventory`]:yc("card_mirror")}),Ge.forEach(ft=>{bt[`players.${ft.attacker}.temp`]||(bt[`players.${ft.attacker}.temp`]=0),bt[`players.${ft.attacker}.temp`]+=ft.dmg||0});const Rt=gn.join(" und ");tt.push(` ${ge} spiegelt die Angriffe von ${Rt} zurck! (+${dt}C)`),Be[ge]={attackers:gn,totalDmg:0,attackDetails:Ge.map(ft=>({attacker:ft.attacker,dmg:ft.dmg||0,mirrored:!0}))}}else bt[`players.${ge}.temp`]||(bt[`players.${ge}.temp`]=0),bt[`players.${ge}.temp`]+=dt,Be[ge]={attackers:[...gn],totalDmg:dt,attackDetails:Ge.map(Rt=>({attacker:Rt.attacker,dmg:Rt.dmg||0}))}}const Xe=Ee.votes||{},Xt=typeof Ee.hotseat=="string"?Ee.hotseat:Ee.hotseat?.name||String(Ee.hotseat||""),Vt=Xe?.[Xt]?.choice,at=Object.keys(ht);at.forEach(ge=>{if(ge===Xt)return;const Ge=Xe[ge],Fe=String(Ge?.choice||""),Me=String(Vt||"");if(Ge&&Fe!==Me){let dt=Ni.PENALTY_DMG;dt=0,dt>0&&(bt[`players.${ge}.temp`]||(bt[`players.${ge}.temp`]=0),bt[`players.${ge}.temp`]+=dt),Be[ge]||(Be[ge]={attackers:[],totalDmg:0,attackDetails:[]});const gn=10;Be[ge].totalDmg+=gn,Be[ge].attackDetails.push({attacker:"Strafhitze",dmg:gn,isPenalty:!0})}}),at.forEach(ge=>{Be[ge]||(Be[ge]={attackers:[],totalDmg:0,attackDetails:[]})});const Ht={pendingAttacks:{},attackResults:Be,roundRecapShown:!0,lastHostActivity:Fi()};if(tt.length>0){const Fe=[...Ee.log||[],...tt].slice(-50);Ht.log=Fe}for(const[ge,Ge]of Object.entries(bt)){const Fe=ge.split(".");if(Fe.length===3&&Fe[0]==="players"&&Fe[2]==="temp"){const Me=Fe[1];Ht[`players.${Me}.temp`]=vm(Ge)}}await kn(async()=>{await lt(Ue(s,"lobbies",O),Ht)},q,3,1e3)?wt.current.delete(q):setTimeout(async()=>{try{await lt(Ue(s,"lobbies",O),Ht),Vi.current=Date.now(),wt.current.delete(q),ce.log(" [EXECUTE ATTACKS] Retry erfolgreich")}catch{}},3e3);const Tt=await ai(Ue(s,"lobbies",O));if(Tt.exists()){const ge=Tt.data(),Ge=ge.players||{},Fe=ge.config?.maxTemp||100,Me=Object.keys(Ge).filter(ft=>(Ge[ft]?.temp||0)<Fe),dt=Object.keys(Ge).filter(ft=>(Ge[ft]?.temp||0)>=Fe),gn=Ee.players||{},Rt=dt.filter(ft=>{const Xn=gn[ft]?.temp||0,Zn=Ge[ft]?.temp||0;return Xn<Fe&&Zn>=Fe});if(ce.log(" [WINNER CHECK] Prfe auf Gewinner nach Angriffen:",{roundId:ge.roundId,allPlayers:Object.keys(Ge),activePlayers:Me,newlyEliminated:dt,justEliminated:Rt,playerTemps:Object.keys(Ge).map(ft=>({name:ft,temp:Ge[ft]?.temp||0,beforeTemp:gn[ft]?.temp||0,isEliminated:(Ge[ft]?.temp||0)>=Fe})),maxTemp:Fe}),Rt.length>0){const ft=Rt[0],Xn=ge.eliminatedPlayers||[],Zn=Xn.includes(ft)?Xn:[...Xn,ft],ii={eliminationInfo:{player:ft,roundId:ge.roundId,timestamp:Date.now()},eliminatedPlayers:Zn,[`lobbyReady.${ft}`]:Ti()},si=ge.host;if(ft===si){const Sn=Me.filter(Bi=>Bi!==ft);if(Sn.length>0){const Bi=Sn[0];ii.host=Bi}}await lt(Ue(s,"lobbies",O),ii)}Me.length===1?(Me[0],await lt(Ue(s,"lobbies",O),{status:"winner"})):Me.length===0&&await lt(Ue(s,"lobbies",O),{status:"winner"})}},Wa=async M=>{if(!de||!M||!s||!O)return;const q=I?.config?.dmg||10,X=Ue(s,"lobbies",O);for(const me of Object.keys(M))if(M[me].inventory?.includes("card_ice")){const W=Math.min(q,M[me].temp||0);W>0&&await lt(X,{[`players.${me}.temp`]:vm(-W),[`players.${me}.inventory`]:yc("card_ice"),log:cl(` ${me} khlt sich ab (-${W}C)`)})}},Ya=async()=>{!de||!s||!O||window.confirm("Mchtest du wirklich zur nchsten Runde springen?")&&(await gi(),Zt(!1))},sr=async()=>{if(!de||!s||!O||!window.confirm("Mchtest du das Spiel wirklich neustarten? Alle Temperaturen werden zurckgesetzt."))return;const M={};Object.keys(I?.players||{}).forEach(q=>{M[q]={temp:0,inventory:[],emoji:I?.players[q]?.emoji||""}}),await lt(Ue(s,"lobbies",O),{status:"lobby",players:M,votes:Ti(),ready:[],log:[],hotseat:"",roundId:0,lobbyReady:{},usedQuestions:[],pendingAttacks:Ti(),attackResults:Ti(),popupConfirmed:Ti(),eliminatedPlayers:[]}),Zt(!1)},Ro=async()=>{if(!(!de||!s||!O)&&window.confirm("Lobby wirklich lschen? Alle Spieler werden ausgeworfen und die Lobby ist danach nicht mehr verfgbar!"))try{const M=Ue(s,"lobbies",O);await lt(M,{status:"deleted",deletedAt:Fi()}).catch(q=>{ce.warn(" [KILL LOBBY] Konnte Status nicht setzen, lsche direkt:",q)}),await new Promise(q=>setTimeout(q,500)),await pl(M),ce.log(" [KILL LOBBY] Lobby gelscht:",O),Zt(!1),Jr()}catch(M){alert(`Fehler beim Lschen der Lobby: ${M.message}`)}},rr=async()=>{if(!s){alert("Fehler: Firebase ist nicht verfgbar.");return}if(window.confirm(" WARNUNG: Alle offenen Lobbies werden gelscht! Dies kann nicht rckgngig gemacht werden. Fortfahren?")&&window.confirm("Bist du wirklich sicher? Alle Spieler werden ausgeworfen!"))try{ce.log(" [ADMIN] Starte Lschung aller Lobbies...");const M=Km(s,"lobbies"),q=Qm(M,Wm("status","in",["lobby","game","result"])),X=await Ym(q);let me=0,W=0;for(const E of X.docs)try{const se=E.data();await lt(E.ref,{status:"deleted",deletedAt:Fi()}).catch(()=>{}),await pl(E.ref),me++,ce.log(` [ADMIN] Lobby gelscht: ${E.id} (Host: ${se.hostName||se.host})`)}catch(se){W++,ce.error(` [ADMIN] Fehler beim Lschen von ${E.id}:`,se)}alert(` ${me} Lobby(s) gelscht.${W>0?`
 ${W} Fehler aufgetreten.`:""}`),ce.log(` [ADMIN] Lschung abgeschlossen: ${me} gelscht, ${W} Fehler`)}catch(M){alert(`Fehler beim Lschen: ${M.message}`)}},Ri=async()=>{if(!I||!s||!O)return;if(I.host!==m){alert("Nur der Host kann eine Revanche starten.");return}if(!window.confirm("Mchtest du eine Revanche starten? Alle Temperaturen werden zurckgesetzt."))return;const M={};Object.keys(I.players||{}).forEach(q=>{M[q]={temp:0,inventory:[],emoji:I.players[q]?.emoji||""}}),await lt(Ue(s,"lobbies",O),{status:"lobby",players:M,votes:Ti(),ready:[],log:cl(" Revanche gestartet! Alle Temperaturen wurden zurckgesetzt."),hotseat:"",roundId:(I.roundId??0)+1,lobbyReady:{},usedQuestions:[],pendingAttacks:Ti(),attackResults:Ti(),popupConfirmed:Ti(),eliminatedPlayers:[]}),alert("Revanche gestartet! Alle zurck in die Lobby.")};return p.jsxs("div",{className:"App",children:[c!=="landing"&&p.jsx("div",{className:"menu-btn",onClick:()=>Zt(!us),children:""}),c==="create"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("start"),children:""}),c==="questionGeneratorCategories"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("start"),children:""}),c==="questionGenerator"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("questionGeneratorCategories"),children:""}),c!=="landing"&&c!=="create"&&c!=="questionGeneratorCategories"&&c!=="questionGenerator"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>An(!0),children:"?"}),us&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"overlay open",onClick:()=>{Zt(!1),Mn("main")}}),p.jsxs("div",{className:k.menuModal,children:[ni==="main"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Men"}),p.jsx("button",{onClick:()=>{Zt(!1),Mn("main")},className:k.menuCloseButton,children:""})]}),p.jsx("button",{onClick:()=>Mn("settings"),className:k.menuButton,children:" Einstellungen"}),p.jsx("button",{onClick:()=>Mn("volume"),className:k.menuButton,children:" Lautstrke"}),p.jsx("button",{onClick:()=>Mn("log"),className:k.menuButton,children:" Spielverlauf"}),p.jsx("div",{className:k.spacer}),p.jsx("button",{onClick:Jr,className:k.leaveButton,children:" Spiel verlassen"})]}),ni==="settings"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Einstellungen"}),p.jsx("button",{onClick:()=>Mn("main"),className:k.menuBackButton,children:""})]}),de&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:Ya,className:`${k.settingsButton} ${k.settingsButtonGray}`,children:" Runde erzwingen"}),p.jsx("button",{onClick:sr,className:`${k.settingsButton} ${k.settingsButtonRed}`,children:" Spiel neustarten"}),p.jsx("button",{onClick:Ro,className:`${k.settingsButton} ${k.settingsButtonDarkRed}`,children:" Lobby lschen"})]}),p.jsxs("div",{className:k.menuSection,children:[p.jsx("h4",{className:k.menuSectionTitle,children:" Admin-Funktionen"}),p.jsx("button",{onClick:rr,className:`${k.settingsButton} ${k.settingsButtonDanger}`,children:" Alle Lobbies lschen (Test)"})]}),p.jsxs("button",{onClick:ji,className:`${k.settingsButton} ${k.settingsButtonMusic} ${fn?k.settingsButtonMusicEnabled:k.settingsButtonMusicDisabled}`,children:[fn?"":""," Hintergrundmusik ",fn?"an":"aus"]})]}),ni==="volume"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Lautstrke"}),p.jsx("button",{onClick:()=>Mn("main"),className:k.menuBackButton,children:""})]}),p.jsxs("div",{className:k.volumeSliderContainer,children:[p.jsx("h4",{className:k.volumeTitle,children:"Hintergrundmusik"}),p.jsxs("div",{className:k.volumeSliderWrapper,children:[p.jsx("span",{className:k.volumeIcon,children:""}),p.jsx("input",{type:"range",min:"0",max:"10",value:tr,onChange:M=>P(parseInt(M.target.value)),className:k.volumeSliderInput}),p.jsx("span",{className:k.volumeIcon,children:""})]})]}),p.jsxs("div",{className:k.volumeSliderContainer,children:[p.jsx("h4",{className:k.volumeTitle,children:"Soundeffekte"}),p.jsxs("div",{className:k.volumeSliderWrapper,children:[p.jsx("span",{className:k.volumeIcon,children:""}),p.jsx("input",{type:"range",min:"0",max:"10",value:Cs,onChange:M=>ne(parseInt(M.target.value)),className:k.volumeSliderInput}),p.jsx("span",{className:k.volumeIcon,children:""})]})]})]}),ni==="log"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Spielverlauf"}),p.jsx("button",{onClick:()=>Mn("main"),className:k.menuBackButton,children:""})]}),p.jsx("div",{className:k.menuLogContainer,children:I?.log&&I.log.length>0?I.log.slice(-20).map((M,q)=>p.jsx("div",{className:k.menuLogEntry,children:M},q)):p.jsx("div",{className:k.menuLogEmpty,children:"Keine Eintrge"})})]})]})]}),c!=="landing"&&p.jsx("div",{className:k.logoContainer,children:p.jsx("img",{src:Ab,alt:"Hitzkopf Logo",className:k.logoHorizontal})}),c==="landing"&&p.jsxs("div",{className:k.landingContainer,children:[r&&p.jsx("button",{onClick:r,className:k.backToProjectsButton,title:"Zurck zur Projektauswahl",children:" Zurck"}),p.jsx("div",{className:k.landingLogoContainer,children:p.jsx("img",{src:kM,alt:"Hitzkopf Logo",className:k.landingLogo})}),p.jsx("button",{onClick:()=>f("start"),className:k.landingButton,children:"SPIELEN"})]}),c==="start"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("input",{id:"playerName",name:"playerName",type:"text",value:m,onChange:Hs,placeholder:"Dein Name",maxLength:20,autoComplete:"name"}),p.jsx("div",{className:`emoji-gallery-wrapper ${k.emojiGalleryWrapper}`,children:p.jsxs("div",{ref:_e,id:"emojiGallery",className:k.emojiGallery,children:[p.jsx("div",{className:`emoji-spacer ${k.emojiSpacer}`}),Br.map((M,q)=>{const X=q===we;return p.jsx("div",{className:`emoji-card ${X?"selected":""}`,onClick:me=>{_t.current||mi(M)},onTouchStart:me=>{tn.current={x:me.touches[0].clientX,y:me.touches[0].clientY,time:Date.now()}},onTouchMove:me=>{if(tn.current.x!==0){const W=Math.abs(me.touches[0].clientX-tn.current.x),E=Math.abs(me.touches[0].clientY-tn.current.y);(W>10||E>10)&&(_t.current=!0)}},onTouchEnd:me=>{const W=Math.abs(me.changedTouches[0].clientX-tn.current.x),E=Math.abs(me.changedTouches[0].clientY-tn.current.y),se=Date.now()-tn.current.time;!(W>10||E>10)&&se<300&&!_t.current&&(me.preventDefault(),me.stopPropagation(),mi(M)),setTimeout(()=>{_t.current=!1,tn.current={x:0,y:0,time:0}},100)},"data-emoji":M,"data-index":q,children:M},`${M}-${q}`)}),p.jsx("div",{className:`emoji-spacer ${k.emojiSpacer}`})]})}),p.jsxs("div",{className:"start-actions",children:[p.jsx("button",{className:"btn-secondary",onClick:()=>f("create"),disabled:!m.trim(),children:" Spiel erstellen"}),p.jsx("button",{className:"btn-secondary",onClick:()=>{f("join"),Xr()},disabled:!m.trim(),children:" Spiel beitreten"})]})]}),c==="start"&&p.jsx("button",{className:k.fullWidthButton,onClick:()=>f("questionGeneratorCategories"),style:{opacity:1},children:" Fragengenerator"}),c==="create"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("label",{className:k.labelWithMargin,children:"Whle Fragenkategorien:"}),p.jsxs("div",{className:k.grid3Cols,children:[p.jsxs("div",{className:`category-card ${C.length===Object.keys(Si).length?"selected":""}`,onClick:()=>Pi("all"),children:[p.jsx("div",{className:"category-emoji",children:""}),p.jsx("div",{className:"category-name",children:"Alle"})]}),Object.entries(Si).map(([M,q])=>p.jsxs("div",{className:`category-card ${C.includes(M)?"selected":""}`,onClick:()=>Pi(M),children:[p.jsx("div",{className:"category-emoji",children:q.emoji}),p.jsx("div",{className:"category-name",children:q.name.split(" ")[0]})]},M))]}),p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:ks,disabled:!m.trim()||C.length===0,children:" Spiel erstellen"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="questionGeneratorCategories"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("label",{className:k.labelWithMargin,children:"Whle Fragenkategorien:"}),p.jsxs("div",{className:k.grid3Cols,children:[p.jsxs("div",{className:`category-card ${C.length===Object.keys(Si).length?"selected":""}`,onClick:()=>Pi("all"),children:[p.jsx("div",{className:"category-emoji",children:""}),p.jsx("div",{className:"category-name",children:"Alle"})]}),Object.entries(Si).map(([M,q])=>p.jsxs("div",{className:`category-card ${C.includes(M)?"selected":""}`,onClick:()=>Pi(M),children:[p.jsx("div",{className:"category-emoji",children:q.emoji}),p.jsx("div",{className:"category-name",children:q.name.split(" ")[0]})]},M))]}),p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:()=>{if(C.length===0){alert("Bitte whle mindestens eine Kategorie aus!");return}const M=_c().filter(X=>C.includes(X.category));if(M.length===0){alert("Keine Fragen in den ausgewhlten Kategorien gefunden!");return}const q=[...M];for(let X=q.length-1;X>0;X--){const me=Math.floor(Math.random()*(X+1));[q[X],q[me]]=[q[me],q[X]]}it(q),un(0),Se(q[0]),f("questionGenerator")},disabled:C.length===0,children:" Fragen generieren"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="questionGenerator"&&ye&&p.jsxs("div",{className:"screen active card",children:[ye.category&&p.jsxs("div",{className:k.gameCategory,style:{marginBottom:"20px"},children:[Si[ye.category]?.emoji," ",Si[ye.category]?.name]}),p.jsx("h3",{className:k.gameQuestion,children:ye.q||"Lade Frage..."}),p.jsxs("div",{className:"option-row",children:[p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["a) ",ye.a||"A"]}),p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["b) ",ye.b||"B"]})]}),(ye.c||ye.d)&&p.jsxs("div",{className:"option-row",children:[ye.c&&p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["c) ",ye.c]}),ye.d&&p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["d) ",ye.d]})]}),p.jsx("button",{className:`btn-primary ${k.submitButtonMargin}`,onClick:Wi,style:{background:"linear-gradient(135deg, #ff8c00 0%, #ff6b00 100%)",marginTop:"30px"},children:" Nchste Frage"}),p.jsx("button",{onClick:zi,className:`btn-secondary ${k.backButton}`,disabled:ut===0,children:" Vorherige Frage"})]}),c==="join"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("h3",{className:k.joinScreenTitle,children:" Spiel beitreten"}),p.jsx("button",{className:`btn-secondary ${k.refreshButton}`,onClick:Xr,children:" Rume aktualisieren"}),j.length>0?p.jsx("div",{className:k.grid2Cols,children:j.map(M=>p.jsxs("div",{className:`category-card ${ve===M.id?"selected":""} ${k.roomCard}`,onClick:()=>Ga(M.id,M.hasPassword),children:[p.jsx("div",{className:`category-emoji ${k.categoryEmojiLarge}`,children:M.hostEmoji||""}),p.jsxs("div",{className:`category-name ${k.categoryNameLarge}`,children:["Spiel von ",M.hostName]})]},M.id))}):p.jsx("p",{className:k.noRoomsText,children:"Keine Rume verfgbar"}),ve&&p.jsx("button",{className:"btn-secondary",onClick:()=>Rn(ve),disabled:!m.trim()||!ve,children:" Beitreten"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="lobby"&&I&&(()=>{const M=Tn(),q=M.find(se=>se.name===m),X=M.filter(se=>se.name!==m),me=I.lobbyReady?.[m]===!0,W=I.config?.maxTemp||100,E=(q?.temp||0)>=W;return p.jsxs("div",{className:"screen active card",children:[p.jsxs("h3",{className:k.lobbyTitle,children:[" Spiel von ",I.hostName||I.host||"Unbekannt"]}),q&&p.jsxs("div",{onClick:hs,className:`${k.myPlayerCard} ${E?k.eliminated:me?k.ready:k.notReady}`,children:[p.jsx("div",{className:k.myPlayerEmoji,children:q.emoji}),p.jsxs("div",{className:k.myPlayerInfo,children:[p.jsxs("div",{className:k.myPlayerName,children:[q.name," (Du)",I.host===q.name&&p.jsx("span",{className:k.crownIcon,children:""})]}),p.jsxs("div",{className:k.readyToggle,children:[p.jsx("span",{className:k.readyLabel,children:"Bereit"}),p.jsx("div",{onClick:se=>{se.stopPropagation(),hs()},className:`${k.toggleSwitch} ${me?k.ready:k.notReady}`,children:p.jsx("div",{className:`${k.toggleThumb} ${me?k.ready:k.notReady}`,children:me?p.jsx("span",{className:k.toggleCheck,children:""}):p.jsx("span",{className:k.toggleCross,children:""})})})]})]})]}),X.length>0&&p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginTop:"20px"},children:X.map(se=>{const Y=I.lobbyReady?.[se.name]===!0,Ie=(se.temp||0)>=W;return p.jsxs("div",{style:{padding:"16px",background:"rgba(22, 27, 34, 0.6)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",opacity:Ie?.5:Y?1:.4,transition:"opacity 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",cursor:"default"},children:[p.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"4px"},children:se.emoji}),p.jsxs("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#fff",textAlign:"center",display:"flex",alignItems:"center",gap:"6px"},children:[se.name,I.host===se.name&&p.jsx("span",{style:{fontSize:"1.2rem"},children:""})]}),p.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",background:Y?"#22c55e":"#d1d5db",cursor:"default",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",padding:"2px",opacity:.8,marginTop:"4px"},children:p.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"12px",background:"#fff",transition:"transform 0.3s ease",transform:Y?"translateX(22px)":"translateX(0)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:Y?p.jsx("span",{style:{color:"#22c55e",fontSize:"14px",fontWeight:"bold"},children:""}):p.jsx("span",{style:{color:"#9ca3af",fontSize:"12px",fontWeight:"bold"},children:""})})})]},se.name)})}),de&&p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:Ns,disabled:(()=>{const se=I.config?.maxTemp||100,Y=Tn().filter(ke=>(ke.temp||0)<se);return Y.filter(ke=>I.lobbyReady?.[ke.name]===!0).length<Y.length||Y.length<2})(),children:" Spiel starten"}),!de&&(()=>{const se=I.config?.maxTemp||100,Y=Tn().filter(Ce=>(Ce.temp||0)<se),ke=Y.filter(Ce=>I.lobbyReady?.[Ce.name]===!0).length>=Y.length&&Y.length>=2;return p.jsx("p",{className:k.waitText,children:ke?" Warten bis der Host das Spiel startet":" Warten bis alle bereit sind"})})()]})})(),c==="game"&&I&&(()=>{const M=I.hotseat,q=I.config?.maxTemp||100,X=I.players?.[m]?.temp||0,me=X>=q;return me?p.jsxs("div",{className:"screen active card",children:[p.jsx("h3",{className:k.eliminatedTitle,children:" Du bist ausgeschieden!"}),p.jsxs("div",{className:k.eliminatedInfoBox,children:[p.jsxs("p",{className:k.eliminatedText,children:["Du hast ",X,"C erreicht und bist ausgeschieden."]}),p.jsx("p",{className:k.eliminatedSubtext,children:"Du kannst dem Spiel als Zuschauer folgen."})]}),p.jsx("div",{className:"thermo-grid",style:{display:"none"},children:Tn().map(W=>{const E=Math.min(W.temp/q*100,100),se=W.name===M,Y=!!I.votes?.[W.name];return p.jsxs("div",{className:`thermo-item ${se?"is-hotseat":""} ${Y?k.thermoItemAnswered:k.thermoItemNotAnswered}`,children:[p.jsxs("div",{className:k.thermoTop,children:[p.jsxs("span",{className:k.thermoTopLeft,children:[se&&p.jsx("span",{children:""}),p.jsxs("span",{children:[W.emoji," ",W.name,W.name===m?" (Du)":""]})]}),p.jsxs("span",{className:`${k.thermoTemp} ${E>=100?k.thermoTempMax:""}`,children:[W.temp,"C"]})]}),p.jsx("div",{className:k.thermoBar,children:p.jsx("div",{className:k.thermoFill,style:{width:`${E}%`,height:"100%",background:E>=100?"linear-gradient(90deg, #ff0000, #ff4500)":E>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":E>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":E>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out"}})})]},W.name)})}),p.jsxs("div",{className:k.currentQuestionBox,children:[p.jsx("h4",{className:k.currentQuestionTitle,children:"Aktuelle Frage:"}),p.jsx("p",{className:k.currentQuestionText,children:I.currentQ?.q||"Lade Frage..."})]})]}):p.jsxs("div",{className:"screen active card",children:[p.jsx("div",{className:"thermo-grid",style:{display:"none"},children:Tn().map(W=>{const E=Math.min(W.temp/q*100,100),se=W.name===M,Y=!!I.votes?.[W.name];return p.jsxs("div",{className:`thermo-item ${se?"is-hotseat":""}`,style:{border:Y?"2px solid #22c55e":"1px solid #333",borderRadius:"10px",padding:"12px",background:Y?"rgba(34, 197, 94, 0.2)":"rgba(22, 27, 34, 0.6)",opacity:Y?1:.5,transition:"opacity 0.3s ease"},children:[p.jsxs("div",{className:"thermo-top",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[se&&p.jsx("span",{children:""}),p.jsxs("span",{children:[W.emoji," ",W.name]})]}),p.jsxs("span",{style:{fontWeight:"bold",color:E>=100?"#ff0000":"#fff"},children:[W.temp,"C"]})]}),p.jsx("div",{className:"thermo-bar",style:{width:"100%",height:"20px",background:"#333",borderRadius:"10px",overflow:"hidden",position:"relative"},children:p.jsx("div",{className:"thermo-fill",style:{width:`${E}%`,height:"100%",background:E>=100?"linear-gradient(90deg, #ff0000, #ff4500)":E>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":E>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":E>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out",boxShadow:E>=100?"0 0 10px rgba(255, 0, 0, 0.5)":"none"}})})]},W.name)})}),(()=>{const W=typeof M=="string"?M:M?.name||String(M||""),E=m===W,se=W?Tn().find(ke=>ke.name===W):null,Y=se?.name||W||"Hotseat",Ie=se?.emoji||"";return p.jsx("div",{style:{marginBottom:"15px",padding:"10px 15px",background:"rgba(22, 27, 34, 0.6)",border:"1px solid #333",borderRadius:"10px",textAlign:"center"},children:p.jsx("p",{style:{margin:0,color:"#aaa",fontSize:"0.95rem",fontWeight:E?"bold":"normal"},children:E?p.jsxs(p.Fragment,{children:[" Du bist gefragt! ",p.jsx("br",{}),"Antworte ehrlich - die anderen versuchen deine Wahl zu erraten."]}):p.jsxs(p.Fragment,{children:["Rate, was ",Ie," ",p.jsx("strong",{children:Y})," gewhlt hat."]})})})})(),p.jsx("h3",{className:k.gameQuestion,children:I.currentQ?.q||"Lade Frage..."}),I.currentQ?.category&&p.jsxs("div",{className:k.gameCategory,children:[Si[I.currentQ.category]?.emoji," ",Si[I.currentQ.category]?.name]}),I.votes?.[m]?p.jsxs("div",{className:k.voteSubmitted,children:[p.jsx("p",{className:k.voteSubmittedTitle,children:" Antwort abgesendet!"}),p.jsx("p",{className:k.voteSubmittedText,children:"Warte auf andere Spieler..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"option-row",children:[p.jsx("button",{className:`btn-option ${We==="A"?"selected":""}`,onClick:()=>Zr("A"),disabled:me,children:I.currentQ?.a||"A"}),p.jsx("button",{className:`btn-option ${We==="B"?"selected":""}`,onClick:()=>Zr("B"),disabled:me,children:I.currentQ?.b||"B"})]}),p.jsx("button",{className:`btn-primary ${k.submitButtonMargin}`,onClick:Ka,disabled:!We||me,children:" Antwort absenden"})]}),de&&p.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:p.jsx("button",{className:"btn-text",style:{fontSize:"0.8em",color:"#ff4d4d",opacity:.8},onClick:async()=>{confirm("Wirklich zur Auswertung springen? Dies sollte nur genutzt werden, wenn das Spiel hngt.")&&await lt(Ue(s,"lobbies",O),{status:"result",lastHostActivity:Fi()})},children:" Hngt? Weiter zur Auswertung"})})]})})(),c==="result"&&I&&(()=>{I.hotseat;const M=I.roundRecapShown??!1,q=I.config?.maxTemp||100,X=Object.keys(I.players||{}).filter(se=>(I.players?.[se]?.temp||0)<q),me=I.popupConfirmed||{};!(I.attackResults&&Object.keys(I.attackResults).length>0)||X.every(se=>I.attackResults?.[se]?me[se]===!0:!0);const E=M;return p.jsxs("div",{className:"screen active card",children:[E&&p.jsx("h3",{className:k.resultTitle,children:" Zwischenergebnis"}),p.jsx("div",{className:"thermo-grid",style:{display:E?"grid":"none"},children:Tn().sort((se,Y)=>Y.temp-se.temp).map(se=>{const Y=I.config?.maxTemp||100,Ie=Math.min(se.temp/Y*100,100);return p.jsxs("div",{className:`thermo-item ${k.resultThermoItem}`,children:[p.jsxs("div",{className:k.thermoTop,children:[p.jsxs("span",{children:[se.emoji," ",se.name,se.name===m?" (Du)":""]}),p.jsxs("span",{className:`${k.thermoTemp} ${Ie>=100?k.thermoTempMax:""}`,children:[se.temp,"C"]})]}),p.jsx("div",{className:k.thermoBar,children:p.jsx("div",{className:k.thermoFill,style:{width:`${Ie}%`,height:"100%",background:Ie>=100?"linear-gradient(90deg, #ff0000, #ff4500)":Ie>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":Ie>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":Ie>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out"}})})]},se.name)})}),!E&&(()=>{const se=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Y=I.votes?.[se]?.choice,Ie=I.votes?.[m],ke=!0,Ce=m===se;if(Ce){const Ee=Tn().filter(Pe=>Pe.name!==se),De=Ee.filter(Pe=>{const ze=I.votes?.[Pe.name];return ze&&String(ze.choice)===String(Y)}).sort((Pe,ze)=>Pe.name.localeCompare(ze.name)),ht=Ee.filter(Pe=>{const ze=I.votes?.[Pe.name];return!ze||String(ze.choice)!==String(Y)}).sort((Pe,ze)=>Pe.name.localeCompare(ze.name));return p.jsxs("div",{className:k.hotseatWaitContainer,children:[p.jsxs("div",{className:k.hotseatWaitBox,children:[p.jsx("p",{className:k.hotseatWaitTitle,children:" Warte bis alle Spieler ihre Hitze verteilt haben"}),p.jsx("p",{className:k.hotseatWaitSubtitle,children:"Die anderen Spieler greifen gerade an..."})]}),p.jsxs("div",{className:k.guessOverviewContainer,children:[De.length>0&&p.jsxs("div",{className:k.guessOverviewSection,children:[p.jsx("h4",{className:k.guessOverviewTitle,style:{color:"#22c55e"},children:" Richtig geraten:"}),p.jsx("div",{className:k.guessOverviewList,children:De.map(Pe=>p.jsx("div",{className:k.guessOverviewItem,style:{background:"rgba(34, 197, 94, 0.2)",border:"1px solid #22c55e"},children:p.jsxs("span",{children:[Pe.emoji," ",Pe.name]})},Pe.name))})]}),ht.length>0&&p.jsxs("div",{className:k.guessOverviewSection,children:[p.jsx("h4",{className:k.guessOverviewTitle,style:{color:"#ef4444"},children:" Falsch geraten:"}),p.jsx("div",{className:k.guessOverviewList,children:ht.map(Pe=>p.jsx("div",{className:k.guessOverviewItem,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid #ef4444"},children:p.jsxs("span",{children:[Pe.emoji," ",Pe.name]})},Pe.name))})]})]})]})}else if(Ie&&Y!==void 0&&Y!==null&&String(Ie.choice)===String(Y)){const Ee=I.attackDecisions||{},De=Ee[m]===!0,ht=!De&&ke;return ce.log(" [ATTACK SELECTION] Richtig geraten - Prfe Angriffsauswahl:",{roundId:I.roundId,myName:m,isPartyMode:ke,localActionDone:Yn,attackDecisions:Ee,myAttackDecision:Ee[m],hasAttackDecision:De,showRewardChoice:$i,showAttackSelection:ci,showJokerShop:Rs,isHotseat:Ce,shouldShowAttackSelection:ht,shouldShowReward:!De&&!ke}),ht?p.jsxs("div",{className:k.correctGuessContainer,children:[p.jsx("p",{className:k.correctGuessTitle,children:" RICHTIG GERATEN!"}),p.jsx("p",{className:k.correctGuessSubtitle,children:"Zur Belohnung darfst du einen Spieler aufheizen"}),p.jsxs("div",{className:k.attackSelectionWrapper,children:[p.jsxs("div",{className:k.attackSelectionHeader,children:[p.jsx("span",{className:k.attackSelectionHeaderIcon,children:""}),p.jsx("span",{children:"Wen aufheizen?"})]}),p.jsx("div",{className:k.attackSelectionGrid,children:(()=>{typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");const Pe=I?.config?.maxTemp||100,ze=Tn();ze.filter(Ye=>(I?.players?.[Ye.name]?.temp||0)<Pe).length;const xt=ze.filter(Ye=>!(Ye.name===m||(I?.players?.[Ye.name]?.temp||0)>=Pe));return xt.length===0?p.jsx("div",{className:k.attackNoPlayersLarge,children:"Keine Spieler zum Angreifen verfgbar"},"no-players"):xt.map(Ye=>{const pt=20*((I.players?.[m]||{}).inventory?.includes("card_oil")?2:1);return p.jsxs("div",{onClick:()=>Er(Ye.name),className:k.attackPlayerCardLarge,children:[p.jsx("div",{className:k.attackPlayerEmojiLarge,children:Ye.emoji}),p.jsx("div",{className:k.attackPlayerNameLarge,children:Ye.name}),p.jsxs("div",{className:k.attackPlayerDmgLarge,children:["+",pt,""]})]},Ye.name)})})()})]})]}):p.jsxs("div",{className:k.rewardDecisionMade,children:[p.jsx("p",{className:k.rewardDecisionTitle,children:" RICHTIG GERATEN!"}),p.jsx("p",{className:k.rewardDecisionText,children:"Entscheidung getroffen. Warte auf andere Spieler..."})]})}else if(Ie&&Y!==void 0&&Y!==null&&String(Ie.choice)!==String(Y)){const Ee=I?.attackDecisions||{};return ce.log(" [RESULT UI] Falsch geraten erkannt:",{myChoice:Ie.choice,truth:Y,isPartyMode:ke,localActionDone:Yn,hasAttackDecision:Ee[m]}),!Yn&&Ee[m]&&jn(!0),p.jsxs("div",{className:k.hotseatWaitContainer,children:[p.jsxs("div",{className:k.wrongAnswerContainer,children:[p.jsx("div",{className:k.wrongAnswerIcon,children:""}),p.jsx("p",{className:k.wrongAnswerTitleRed,children:"FALSCH GERATEN"}),p.jsx("p",{className:k.wrongAnswerTextWhite,children:"Du erhltst 10C Strafhitze."})]}),p.jsxs("div",{className:k.hotseatWaitBox,children:[p.jsx("p",{className:k.hotseatWaitTitle,children:" Warte bis alle Spieler ihre Hitze verteilt haben"}),p.jsx("p",{className:k.hotseatWaitSubtitle,children:"Die anderen Spieler greifen gerade an..."})]})]})}else return Ie&&Y==null?p.jsx("div",{className:k.resultStatusBox,children:p.jsx("p",{className:k.resultStatusText,children:"Du hast die Frage beantwortet. Warte auf die anderen Spieler..."})}):p.jsx("div",{className:k.resultStatusBox,children:p.jsx("p",{className:k.resultStatusTextAlt,children:" Keine Antwort abgegeben."})})})(),(()=>{const se=I.players?.[m],Y=I.config?.maxTemp||100,Ie=(se?.temp||0)>=Y,ke=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Ce=m===ke,Ee=I.votes?.[ke]?.choice,De=I.votes?.[m],ht=De&&Ee!==void 0&&String(De.choice)===String(Ee),Pe=De&&Ee!==void 0&&String(De.choice)!==String(Ee),At=(I.attackDecisions||{})[m]===!0;if(!(E?Yn||Ce||Ie:(Yn||Ie)&&!(!E&&ht&&!At&&!Ce)&&!Pe&&!Ce))return null;const rt=E?(I.ready||[]).includes(m)?" Bereit fr nchste Frage":" Nchste Frage":(I.ready||[]).includes(m)?" Nicht bereit":" Bereit";return p.jsx("button",{className:(I.ready||[]).includes(m)?"btn-secondary":"btn-primary",onClick:$a,disabled:Ie,style:{marginTop:"20px"},children:Ie?" Hitzkopf - Ausgeschieden":rt})})(),(()=>{const se=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Y=m===se,Ie=I.votes?.[se]?.choice,ke=I.votes?.[m],Ce=ke&&Ie!==void 0&&String(ke.choice)===String(Ie),Ee=ke&&Ie!==void 0&&String(ke.choice)!==String(Ie),ht=(I.attackDecisions||{})[m]===!0;return!E&&Ce&&!ht&&!Y||!E&&Ee||!E&&Y?null:p.jsx("div",{className:k.playerReadyList,children:(()=>{const ze=I.config?.maxTemp||100,At=Tn().filter(fe=>(I.players?.[fe.name]?.temp||0)<ze),xt=I.ready||[],rt=[...At].sort((fe,pn)=>fe.name.localeCompare(pn.name)).map(fe=>`${xt.includes(fe.name)?"":""} ${fe.emoji} ${fe.name}`).join(", ");return p.jsx("div",{className:k.playerReadyText,children:rt})})()})})()]})})(),c==="winner"&&I&&p.jsxs("div",{className:`screen active card ${k.winnerScreen}`,children:[[...Array(50)].map((M,q)=>p.jsx("div",{style:{position:"absolute",width:"10px",height:"10px",background:["#ff4500","#ff8c00","#ffd700","#ff6b35","#ffa500"][Math.floor(Math.random()*5)],left:`${Math.random()*100}%`,top:"-10px",animation:`confettiFall ${2+Math.random()*3}s linear infinite`,animationDelay:`${Math.random()*2}s`,borderRadius:"50%",zIndex:1}},q)),p.jsx("h2",{className:k.winnerTitle,children:" Gewinner!"}),(()=>{const M=I.config?.maxTemp||100,q=Object.entries(I.players||{}).find(([X,me])=>(me.temp||0)<M);if(q){const[X,me]=q;return p.jsxs("div",{className:k.winnerCard,children:[p.jsx("div",{className:k.winnerEmoji,children:me.emoji||""}),p.jsx("p",{className:k.winnerName,children:X}),p.jsx("p",{className:k.winnerText,children:"ist cool geblieben und gewinnt diese Runde Hitzkopf! "}),p.jsxs("p",{className:k.winnerTemp,children:[me.temp||0,"C"]})]})}return null})(),p.jsxs("div",{className:k.winnerActions,children:[de&&p.jsx("button",{onClick:Ri,className:`btn-primary ${k.winnerButton}`,children:" Revanche starten"}),p.jsx("button",{onClick:Jr,className:`btn-secondary ${k.winnerButton}`,children:" Lobby verlassen"})]})]}),os&&I&&I.hotseat&&p.jsx("div",{className:k.hotseatModalOverlay,onClick:qt,children:p.jsxs("div",{className:k.hotseatModalContent,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.hotseatModalIcon,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");return m===M?"":""})()}),m===I.hotseat?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:k.hotseatModalTitle,children:"Du bist gefragt!"}),p.jsx("div",{className:k.hotseatModalText,children:"Alle anderen mssen deine Antwort erraten."})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:k.hotseatModalHeader,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),q=I.players?.[M]?.emoji||"";return p.jsxs(p.Fragment,{children:[p.jsx("span",{className:k.hotseatModalEmoji,children:q}),p.jsx("span",{className:k.hotseatModalTitle,children:M})]})})()}),p.jsx("div",{className:k.hotseatModalText,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");return p.jsxs(p.Fragment,{children:["ist gefragt. Versuche ",M,"'s Antwort zu erraten."]})})()})]}),p.jsx("button",{className:`btn-primary ${k.hotseatModalButton}`,onClick:qt,children:"Los geht's"})]})}),ls&&Pn&&I&&p.jsx("div",{className:k.attackModalOverlay,onClick:ir,children:p.jsxs("div",{className:`${k.attackModalContent} ${Pn.totalDmg>0?k.attackModalContentDamage:k.attackModalContentNoDamage}`,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.attackModalIcon,children:Pn.totalDmg>0?"":""}),p.jsx("div",{className:`${k.attackModalName} ${Pn.totalDmg>0?k.attackModalNameDamage:k.attackModalNameNoDamage}`,children:m}),p.jsx("div",{className:k.attackModalMessage,children:Pn.totalDmg>0?`Du wurdest aufgeheizt! Insgesamt ${Pn.totalDmg}C`:"Cool geblieben - Keiner hat dich aufgeheizt"}),Pn.totalDmg===0&&p.jsx("div",{className:k.attackModalNoDamage,children:"Du hast diese Runde keine Hitze erhalten"}),Pn.attackDetails&&Pn.attackDetails.length>0&&Pn.totalDmg>0&&p.jsxs("div",{className:k.attackModalDetails,children:[p.jsx("strong",{className:k.attackModalDetailsTitle,children:"Angriffe:"}),p.jsx("br",{}),Pn.attackDetails.filter(M=>!M.mirrored).map((M,q)=>p.jsxs("div",{className:k.attackModalDetailItem,children:[" ",M.attacker,": +",M.dmg,"C"]},q))]}),p.jsx("div",{className:k.attackModalBar,children:(()=>{const M=I.config?.maxTemp||100,q=I.players?.[m]?.temp||0,X=Math.min(q/M*100,100);return p.jsx("div",{className:`${k.attackModalBarFill} ${Pn.totalDmg>0?k.attackModalBarFillDamage:k.attackModalBarFillNoDamage}`,ref:me=>{me&&setTimeout(()=>{me.style.width=`${X}%`},100)}})})()}),p.jsxs("div",{className:`${k.attackModalTemp} ${Pn.totalDmg>0?k.attackModalTempDamage:k.attackModalTempNoDamage}`,children:[I.players?.[m]?.temp||0,"C"]}),p.jsx("button",{className:`btn-primary ${k.attackModalButton}`,onClick:ir,children:"Verstanden"})]})}),hi&&Is&&I&&p.jsx("div",{className:k.eliminationModalOverlay,onClick:()=>{on(!1),cs(null),s&&O&&lt(Ue(s,"lobbies",O),{eliminationInfo:Ti()}).catch(console.error)},children:p.jsxs("div",{className:k.eliminationModalContent,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.eliminationModalLogoContainer,children:p.jsx("img",{src:Ab,alt:"Hitzkopf Logo",className:k.eliminationModalLogo})}),Is===m?p.jsxs(p.Fragment,{children:[p.jsx("h2",{className:k.eliminationModalTitle,children:"Oh nein!"}),p.jsx("p",{className:k.eliminationModalText,children:"Du bist ein Hitzkopf und somit ab sofort raus!"})]}):p.jsxs(p.Fragment,{children:[p.jsx("h2",{className:k.eliminationModalTitle,children:Is}),p.jsx("p",{className:k.eliminationModalText,children:"ist ein Hitzkopf und somit raus!"})]}),p.jsx("button",{className:`btn-primary ${k.eliminationModalButton}`,onClick:()=>{on(!1),cs(null),s&&O&&lt(Ue(s,"lobbies",O),{eliminationInfo:Ti()}).catch(console.error)},children:"Verstanden"})]})}),ui&&p.jsx("div",{className:k.rulesModalOverlay,onClick:()=>An(!1),children:p.jsxs("div",{className:k.rulesModalContent,onClick:M=>M.stopPropagation(),children:[p.jsxs("h2",{className:k.rulesModalHeader,children:[p.jsx("span",{className:k.rulesModalHeaderIcon,children:""}),p.jsx("span",{children:"Anleitung"})]}),p.jsxs("div",{className:k.rulesModalBody,children:[p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Ziel:"})]}),p.jsxs("p",{className:k.rulesModalSectionText,children:["Errate die Antworten deiner Freunde und bringe sie zum Kochen! ",p.jsx("br",{}),"Rtst du richtig, darfst du Hitze verteilen, liegst du falsch, erhltst du Strafhitze."]})]}),p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Verlierer:"})]}),p.jsx("p",{className:k.rulesModalSectionText,children:"Wer als erstes 100 erreicht ist ein Hitzkopf und fliegt raus."})]}),p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Gewinner:"})]}),p.jsx("p",{className:k.rulesModalSectionText,children:"Bewahrst du einen khlen Kopf, entscheidest du das Spiel fr dich."})]})]}),p.jsxs("button",{className:`btn-primary ${k.rulesModalButton}`,onClick:()=>An(!1),children:[p.jsx("span",{children:"Verstanden"}),p.jsx("span",{children:""})]})]})})]})}const jM="_lobbySystem_1gg27_1",PM="_backButtonBottom_1gg27_23",zM="_screen_1gg27_67",BM="_title_1gg27_113",UM="_nameInput_1gg27_131",qM="_roomInput_1gg27_133",HM="_emojiGalleryWrapper_1gg27_185",FM="_emojiGallery_1gg27_185",GM="_emojiSpacer_1gg27_229",KM="_emojiCard_1gg27_239",$M="_selected_1gg27_269",QM="_emojiCharacter_1gg27_295",WM="_buttonGroup_1gg27_307",YM="_btnPrimary_1gg27_319",XM="_btnSecondary_1gg27_321",Kn={lobbySystem:jM,backButtonBottom:PM,screen:zM,title:BM,nameInput:UM,roomInput:qM,emojiGalleryWrapper:HM,emojiGallery:FM,emojiSpacer:GM,emojiCard:KM,selected:$M,emojiCharacter:QM,buttonGroup:WM,btnPrimary:YM,btnSecondary:XM},ZM=["","","","","","","","","","","","","","",""],Qs=(()=>{const r=[...ZM];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})(),JM=({onCreateLobby:r,onJoinLobby:e,storagePrefix:n="lobby",title:s="Lobby System",buttonText:o="Lobby erstellen",accentColor:c="#4ecdc4",onBack:f=null})=>{const[m,b]=Z.useState("start"),[_,S]=Z.useState(sessionStorage.getItem(`${n}_name`)||""),[A,V]=Z.useState(()=>{const R=Math.floor(Qs.length/2);return Qs[R]}),[O,pe]=Z.useState(""),[de,he]=Z.useState(Math.floor(Qs.length/2)),I=Z.useRef(null),Ae=Z.useRef(!1),xe=Z.useRef({x:0,y:0,time:0});Z.useEffect(()=>{const R=I.current;if(!R)return;const N=()=>{Ae.current=!0;const L=R.scrollLeft,U=R.scrollWidth/(Qs.length+2),C=Math.round(L/U);he(Math.max(0,Math.min(C,Qs.length-1))),V(Qs[Math.max(0,Math.min(C,Qs.length-1))]),setTimeout(()=>{Ae.current=!1},100)};return R.addEventListener("scroll",N),setTimeout(()=>{const L=R.scrollWidth/(Qs.length+2);R.scrollLeft=de*L},100),()=>R.removeEventListener("scroll",N)},[de]);const ct=R=>{const N=R.target.value.slice(0,20);S(N),sessionStorage.setItem(`${n}_name`,N)},zt=R=>{const N=Qs.indexOf(R);he(N),V(R);const B=I.current;if(B){const L=B.scrollWidth/(Qs.length+2);B.scrollTo({left:N*L,behavior:"smooth"})}},qe=()=>{if(!_.trim()){alert("Bitte gib einen Namen ein!");return}sessionStorage.setItem(`${n}_name`,_),sessionStorage.setItem(`${n}_emoji`,A),r({name:_,emoji:A})},D=()=>{if(!_.trim()){alert("Bitte gib einen Namen ein!");return}if(!O.trim()){alert("Bitte gib einen Lobby-Code ein!");return}sessionStorage.setItem(`${n}_name`,_),sessionStorage.setItem(`${n}_emoji`,A),e({name:_,emoji:A,roomId:O.toUpperCase()})};return p.jsxs("div",{className:Kn.lobbySystem,style:{"--accent-color":c},children:[m==="start"&&p.jsxs("div",{className:Kn.screen,children:[p.jsx("h1",{className:Kn.title,children:s}),p.jsx("input",{type:"text",value:_,onChange:ct,placeholder:"Dein Name",maxLength:20,autoComplete:"name",className:Kn.nameInput}),p.jsx("div",{className:Kn.emojiGalleryWrapper,children:p.jsxs("div",{ref:I,className:Kn.emojiGallery,children:[p.jsx("div",{className:Kn.emojiSpacer}),Qs.map((R,N)=>{const B=N===de;return p.jsx("div",{className:`${Kn.emojiCard} ${B?Kn.selected:""}`,onClick:()=>{Ae.current||zt(R)},onTouchStart:L=>{xe.current={x:L.touches[0].clientX,y:L.touches[0].clientY,time:Date.now()}},onTouchMove:L=>{if(xe.current.x!==0){const U=Math.abs(L.touches[0].clientX-xe.current.x),C=Math.abs(L.touches[0].clientY-xe.current.y);(U>10||C>10)&&(Ae.current=!0)}},onTouchEnd:()=>{setTimeout(()=>{xe.current={x:0,y:0,time:0}},50)},children:p.jsx("div",{className:Kn.emojiCharacter,children:R})},`${R}-${N}`)}),p.jsx("div",{className:Kn.emojiSpacer})]})}),p.jsx("div",{className:Kn.buttonGroup,children:p.jsx("button",{className:Kn.btnPrimary,onClick:qe,children:o})})]}),m==="join"&&p.jsxs("div",{className:Kn.screen,children:[p.jsx("h1",{className:Kn.title,children:"Lobby beitreten"}),p.jsx("input",{type:"text",value:O,onChange:R=>pe(R.target.value.toUpperCase()),placeholder:"Lobby-Code",maxLength:6,className:Kn.roomInput}),p.jsxs("div",{className:Kn.buttonGroup,children:[p.jsx("button",{className:Kn.btnPrimary,onClick:D,children:"Beitreten"}),p.jsx("button",{className:Kn.btnSecondary,onClick:()=>b("start"),children:"Zurck"})]})]}),f&&p.jsx("button",{onClick:f,className:Kn.backButtonBottom,children:" Zurck"})]})},Ws="https://api.spotify.com/v1",sl="https://accounts.spotify.com",bs={PKCE_VERIFIER:"spotify_pkce_verifier",USER_ACCESS:"spotify_user_access_token",USER_REFRESH:"spotify_user_refresh_token",USER_EXPIRY:"spotify_user_expiry"};class ex{constructor(){this.clientId="2d9c122237af4b2391ab504f72edfd70",this.clientSecret="dce2d4bdae5b4afc8f9c3e24b309bb72";const e="https://nkillich.github.io/Hitzkopf";this.redirectUri=e.replace(/\/$/,""),typeof console<"u"&&console.log(" Spotify Redirect URI:",this.redirectUri),this.accessToken=null,this.tokenExpiry=null,this._userToken=null,this._deviceId=null,this._player=null,this._sdkReady=!1,!this.clientId||!this.clientSecret?(console.warn(" Spotify Credentials fehlen! berprfe .env.local"),console.log("Client ID vorhanden:",!!this.clientId),console.log("Client Secret vorhanden:",!!this.clientSecret)):console.log(" Spotify Credentials geladen")}_generateRandomString(e){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(e)).reduce((o,c)=>o+n[c%n.length],"")}async _sha256(e){const s=new TextEncoder().encode(e);return window.crypto.subtle.digest("SHA-256",s)}_base64urlEncode(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}async getAuthUrlWithPKCE(){if(!this.clientId)throw new Error("Spotify Client ID fehlt");const e=this._generateRandomString(64),n=await this._sha256(e),s=this._base64urlEncode(n);typeof sessionStorage<"u"&&sessionStorage.setItem(bs.PKCE_VERIFIER,e);const o=["streaming","user-read-email","user-read-private","user-modify-playback-state","user-read-playback-state"].join(" "),c=new URLSearchParams({response_type:"code",client_id:this.clientId,scope:o,code_challenge_method:"S256",code_challenge:s,redirect_uri:this.redirectUri,state:this._generateRandomString(16)});return`${sl}/authorize?${c.toString()}`}async exchangeCodeForToken(e){const n=typeof sessionStorage<"u"?sessionStorage.getItem(bs.PKCE_VERIFIER):null;if(!n)throw new Error("Code Verifier nicht gefunden  bitte erneut verbinden.");const s=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:this.clientId,grant_type:"authorization_code",code:e,redirect_uri:this.redirectUri,code_verifier:n})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.error_description||c.error||"Token-Austausch fehlgeschlagen")}const o=await s.json();return this._storeUserTokens(o.access_token,o.refresh_token,o.expires_in),typeof sessionStorage<"u"&&sessionStorage.removeItem(bs.PKCE_VERIFIER),o}_storeUserTokens(e,n,s){const o=Date.now()+s*1e3;this._userToken=e,typeof sessionStorage<"u"&&(sessionStorage.setItem(bs.USER_ACCESS,e),sessionStorage.setItem(bs.USER_REFRESH,n||""),sessionStorage.setItem(bs.USER_EXPIRY,String(o)))}async getStoredUserToken(){if(typeof sessionStorage>"u")return null;let e=sessionStorage.getItem(bs.USER_ACCESS);const n=sessionStorage.getItem(bs.USER_REFRESH),s=Number(sessionStorage.getItem(bs.USER_EXPIRY)||0);if(e&&Date.now()>=s-6e4&&n)try{e=(await this.refreshUserToken()).access_token}catch{return null}return this._userToken=e,e||null}async refreshUserToken(){const e=typeof sessionStorage<"u"?sessionStorage.getItem(bs.USER_REFRESH):null;if(!e)throw new Error("Kein Refresh Token");const n=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e,client_id:this.clientId})});if(!n.ok)throw this.clearUserTokens(),new Error("Token-Erneuerung fehlgeschlagen");const s=await n.json();return this._storeUserTokens(s.access_token,s.refresh_token||e,s.expires_in),s}clearUserTokens(){this._userToken=null,typeof sessionStorage<"u"&&(sessionStorage.removeItem(bs.USER_ACCESS),sessionStorage.removeItem(bs.USER_REFRESH),sessionStorage.removeItem(bs.USER_EXPIRY))}async isUserLoggedIn(){return!!await this.getStoredUserToken()}getAuthUrl(){const e=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative"].join(" "),n=new URLSearchParams({client_id:this.clientId,response_type:"code",redirect_uri:this.redirectUri,scope:e,show_dialog:"false"});return`${sl}/authorize?${n.toString()}`}async getAccessToken(e){const n=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:this.redirectUri}),s=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${this.clientId}:${this.clientSecret}`)},body:n.toString()});if(!s.ok)throw new Error("Failed to get access token");const o=await s.json();return this.accessToken=o.access_token,this.tokenExpiry=Date.now()+o.expires_in*1e3,o}async getClientCredentialsToken(){if(!this.clientId||!this.clientSecret){const n=new Error("Spotify Credentials fehlen! berprfe .env.local und starte Dev-Server neu.");throw n.code="MISSING_CREDENTIALS",n}const e=new URLSearchParams({grant_type:"client_credentials"});try{const n=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${this.clientId}:${this.clientSecret}`)},body:e.toString()});if(!n.ok){const o=await n.json().catch(()=>({}));console.error("Spotify API Fehler:",o);const c=new Error(`Spotify API Fehler (${n.status}): ${o.error_description||o.error||"Unbekannter Fehler"}`);throw c.code="SPOTIFY_API_ERROR",c.status=n.status,c}const s=await n.json();return this.accessToken=s.access_token,this.tokenExpiry=Date.now()+s.expires_in*1e3,console.log(" Spotify Token erfolgreich abgerufen"),s}catch(n){if(n.code==="MISSING_CREDENTIALS"||n.code==="SPOTIFY_API_ERROR")throw n;const s=new Error("Netzwerkfehler beim Abrufen des Spotify Tokens: "+n.message);throw s.code="NETWORK_ERROR",s}}async ensureValidToken(){(!this.accessToken||Date.now()>=this.tokenExpiry)&&await this.getClientCredentialsToken()}async searchTracks(e,n=10){await this.ensureValidToken();const s=new URLSearchParams({q:e,type:"track",limit:n.toString()}),o=await fetch(`${Ws}/search?${s.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!o.ok)throw new Error("Failed to search tracks");return(await o.json()).tracks.items.map(f=>({id:`spotify_track_${f.id}`,spotifyId:f.id,title:f.name,artist:f.artists.map(m=>m.name).join(", "),album:f.album.name,type:"song",source:"spotify",spotifyUrl:f.external_urls.spotify,previewUrl:f.preview_url,imageUrl:f.album.images[0]?.url,duration:f.duration_ms,votes:{},addedAt:Date.now()}))}async searchAlbums(e,n=10){await this.ensureValidToken();const s=new URLSearchParams({q:e,type:"album",limit:n.toString()}),o=await fetch(`${Ws}/search?${s.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!o.ok)throw new Error("Failed to search albums");return(await o.json()).albums.items.map(f=>({id:`spotify_album_${f.id}`,spotifyId:f.id,title:f.name,artist:f.artists.map(m=>m.name).join(", "),type:"album",source:"spotify",spotifyUrl:f.external_urls.spotify,imageUrl:f.images[0]?.url,releaseDate:f.release_date,totalTracks:f.total_tracks,votes:{},addedAt:Date.now()}))}async search(e,n=10){try{await this.ensureValidToken();const s=Math.min(Math.floor(n/2),10),o=new URLSearchParams({q:e,type:"track,album",limit:s.toString()}),c=await fetch(`${Ws}/search?${o.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!c.ok){const S=await c.json().catch(()=>({}));console.error("Spotify Search Fehler:",S);const A=new Error(`Spotify Search Fehler (${c.status}): ${S.error?.message||"Unbekannter Fehler"}`);throw A.code="SEARCH_FAILED",A}const f=await c.json(),m=(f.tracks?.items||[]).map(S=>({id:`spotify_track_${S.id}`,spotifyId:S.id,title:S.name,artist:S.artists.map(A=>A.name).join(", "),album:S.album.name,type:"song",source:"spotify",spotifyUrl:S.external_urls.spotify,previewUrl:S.preview_url,imageUrl:S.album.images[0]?.url,duration:S.duration_ms,votes:{},addedAt:Date.now()})),b=(f.albums?.items||[]).map(S=>({id:`spotify_album_${S.id}`,spotifyId:S.id,title:S.name,artist:S.artists.map(A=>A.name).join(", "),type:"album",source:"spotify",spotifyUrl:S.external_urls.spotify,imageUrl:S.images[0]?.url,releaseDate:S.release_date,totalTracks:S.total_tracks,votes:{},addedAt:Date.now()})),_=[...m,...b];return console.log(` Spotify Suche erfolgreich: ${_.length} Ergebnisse fr "${e}"`),_}catch(s){throw console.error(" Spotify Suche fehlgeschlagen:",s),s}}async getTrack(e){await this.ensureValidToken();const n=await fetch(`${Ws}/tracks/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to get track");return await n.json()}async getAlbum(e){await this.ensureValidToken();const n=await fetch(`${Ws}/albums/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to get album");return await n.json()}loadSpotifySDK(){return new Promise(e=>{if(window.Spotify){this._sdkReady=!0,e();return}if(document.querySelector('script[src*="spotify-player"]')){window.onSpotifyWebPlaybackSDKReady=()=>{this._sdkReady=!0,e()};return}const n=document.createElement("script");n.src="https://sdk.scdn.co/spotify-player.js",n.async=!0,window.onSpotifyWebPlaybackSDKReady=()=>{this._sdkReady=!0,e()},document.body.appendChild(n)})}async initPlaybackPlayer(e,n){if(!await this.getStoredUserToken()){n?.("Nicht mit Spotify angemeldet.");return}if(await this.loadSpotifySDK(),!window.Spotify){n?.("Spotify SDK konnte nicht geladen werden.");return}const o=new window.Spotify.Player({name:"Amplify Host",getOAuthToken:c=>{this.getStoredUserToken().then(f=>c(f||""))},volume:.8});o.addListener("ready",({device_id:c})=>{this._deviceId=c,this._player=o,console.log(" Spotify Web Playback bereit, Device ID:",c),e({deviceId:c})}),o.addListener("not_ready",({device_id:c})=>{console.log("Spotify Device offline:",c)}),o.addListener("authentication_error",({message:c})=>{console.error("Spotify Auth-Fehler:",c),n?.(c)}),o.addListener("initialization_error",({message:c})=>{console.error("Spotify Init-Fehler:",c),n?.(c)}),o.connect()}getDeviceId(){return this._deviceId}async getDevices(){const e=await this.getStoredUserToken();if(!e)return[];const n=await fetch(`${Ws}/me/player/devices`,{headers:{Authorization:`Bearer ${e}`}});return n.ok?((await n.json()).devices||[]).map(c=>({id:c.id,name:c.name||"Unbekannt",type:c.type||"unknown",is_active:!!c.is_active})):[]}async playOnDevice(e,n){const s=await this.getStoredUserToken();if(!s)throw new Error("Nicht mit Spotify verbunden.");const o=n==="active",c=o?null:n||this._deviceId;if(!o&&!c)throw new Error("Whle ein Gert aus oder warte, bis Amplify Host erscheint.");const f=`${Ws}/me/player/play${c?`?device_id=${c}`:""}`,m=await fetch(f,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({uris:e})});if(!m.ok){const b=await m.json().catch(()=>({}));throw m.status===404?new Error('Kein aktiver Player. Bitte "Mit Spotify verbinden" und in Amplify starten.'):new Error(b.error?.message||"Wiedergabe fehlgeschlagen")}}async pausePlayback(){const e=await this.getStoredUserToken();e&&await fetch(`${Ws}/me/player/pause`,{method:"PUT",headers:{Authorization:`Bearer ${e}`}})}async resumePlayback(){const e=await this.getStoredUserToken();e&&await fetch(`${Ws}/me/player/play`,{method:"PUT",headers:{Authorization:`Bearer ${e}`}})}async nextTrack(){const e=await this.getStoredUserToken();e&&await fetch(`${Ws}/me/player/next`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}async getPlaybackState(){const e=await this.getStoredUserToken();if(!e)return null;const n=await fetch(`${Ws}/me/player`,{headers:{Authorization:`Bearer ${e}`}});if(n.status===204||!n.ok)return null;const s=await n.json(),o=s.item;return o?{trackId:o.id,trackName:o.name,artist:o.artists?.map(c=>c.name).join(", ")||"",imageUrl:o.album?.images?.[0]?.url||null,positionMs:s.progress_ms??0,durationMs:o.duration_ms??0,isPlaying:!!s.is_playing,updatedAt:Date.now()}:null}disconnectPlayer(){this._player&&(this._player.disconnect(),this._player=null),this._deviceId=null}}const Ts=new ex,tx="_musicVoter_g5b4n_1",nx="_backgroundOverlay_g5b4n_17",ix="_roomContainer_g5b4n_41",sx="_header_g5b4n_85",rx="_headerLeft_g5b4n_101",ax="_roomTitle_g5b4n_109",ox="_emoji_g5b4n_131",lx="_leaveButton_g5b4n_165",cx="_playersSection_g5b4n_201",ux="_sectionTitle_g5b4n_219",hx="_playersList_g5b4n_233",dx="_playerChip_g5b4n_245",fx="_playerEmoji_g5b4n_267",mx="_playerName_g5b4n_275",gx="_hostBadge_g5b4n_285",px="_addSection_g5b4n_297",yx="_addButton_g5b4n_309",_x="_playlistSection_g5b4n_347",bx="_emptyPlaylist_g5b4n_363",vx="_emptyIcon_g5b4n_375",Tx="_emptyHint_g5b4n_387",Sx="_playlistItems_g5b4n_399",Ex="_playlistItem_g5b4n_399",wx="_itemRank_g5b4n_471",Ax="_itemInfo_g5b4n_497",Rx="_itemTitle_g5b4n_507",Ix="_itemArtist_g5b4n_527",Cx="_itemMeta_g5b4n_539",kx="_itemVoting_g5b4n_551",Nx="_voteButton_g5b4n_563",Dx="_voted_g5b4n_601",Mx="_voteScore_g5b4n_613",xx="_removeButton_g5b4n_629",Ox="_modalOverlay_g5b4n_679",Lx="_modal_g5b4n_679",Vx="_modalHeader_g5b4n_751",jx="_modalTitle_g5b4n_767",Px="_modalCloseButton_g5b4n_785",zx="_addModeButtons_g5b4n_831",Bx="_addModeButton_g5b4n_831",Ux="_addModeIcon_g5b4n_885",qx="_addModeDesc_g5b4n_893",Hx="_manualForm_g5b4n_907",Fx="_input_g5b4n_921",Gx="_spotifySearch_g5b4n_955",Kx="_searchBox_g5b4n_963",$x="_searchButton_g5b4n_991",Qx="_searchLoading_g5b4n_1037",Wx="_spinner_g5b4n_1055",Yx="_searchResults_g5b4n_1081",Xx="_searchResultItem_g5b4n_1103",Zx="_resultImage_g5b4n_1139",Jx="_resultInfo_g5b4n_1155",eO="_resultTitle_g5b4n_1165",tO="_resultArtist_g5b4n_1183",nO="_resultAlbum_g5b4n_1199",iO="_addResultButton_g5b4n_1217",sO="_addResultButtonAdded_g5b4n_1263",rO="_noResults_g5b4n_1289",aO="_noResultsHint_g5b4n_1301",oO="_spotifyNote_g5b4n_1313",lO="_nowPlayingSection_g5b4n_1335",cO="_nowPlayingCard_g5b4n_1343",uO="_nowPlayingImage_g5b4n_1363",hO="_nowPlayingInfo_g5b4n_1379",dO="_nowPlayingTrack_g5b4n_1389",fO="_nowPlayingArtist_g5b4n_1407",mO="_nowPlayingTime_g5b4n_1425",gO="_nowPlayingBadge_g5b4n_1437",pO="_spotifySection_g5b4n_1451",yO="_spotifyError_g5b4n_1467",_O="_spotifyConnectBlock_g5b4n_1479",bO="_spotifyConnectButton_g5b4n_1501",vO="_spotifyPlaybackBlock_g5b4n_1537",TO="_spotifyDeviceSelect_g5b4n_1549",SO="_spotifyDeviceLabel_g5b4n_1561",EO="_spotifyDeviceSelectEl_g5b4n_1571",wO="_spotifyResendButton_g5b4n_1601",AO="_spotifyConnected_g5b4n_1635",RO="_spotifyPlaybackButtons_g5b4n_1645",IO="_spotifyPlayButton_g5b4n_1659",CO="_spotifyPauseButton_g5b4n_1703",kO="_spotifyDisconnectButton_g5b4n_1735",NO="_modalButtons_g5b4n_1767",DO="_btnFertig_g5b4n_1779",MO="_btnPrimary_g5b4n_1817",xO="_lobbyStartScreen_g5b4n_1999",OO="_lobbyStartCard_g5b4n_2021",LO="_lobbyStartTitle_g5b4n_2045",VO="_lobbyStartSlogan_g5b4n_2071",jO="_lobbyStartButtons_g5b4n_2089",PO="_lobbyStartButton_g5b4n_2089",zO="_lobbyStartIcon_g5b4n_2145",BO="_browseLoading_g5b4n_2217",UO="_browseEmpty_g5b4n_2235",qO="_browseEmptyIcon_g5b4n_2253",HO="_lobbyList_g5b4n_2285",FO="_lobbyCard_g5b4n_2299",GO="_lobbyCardDelete_g5b4n_2335",KO="_lobbyCardHeader_g5b4n_2387",$O="_lobbyCardTitle_g5b4n_2403",QO="_lobbyCardIcon_g5b4n_2421",WO="_lobbyCardInfo_g5b4n_2447",YO="_lobbyCardStat_g5b4n_2457",XO="_refreshButton_g5b4n_2473",ZO="_headerButtons_g5b4n_2521",JO="_closeButton_g5b4n_2531",e4="_lobbySystem_g5b4n_2593",t4="_screen_g5b4n_2601",n4="_emojiCard_g5b4n_2609",i4="_emojiCharacter_g5b4n_2619",s4="_backButtonBottom_g5b4n_2653",r4="_title_g5b4n_2721",a4="_nameInput_g5b4n_2739",o4="_emojiGalleryWrapper_g5b4n_2775",l4="_emojiGallery_g5b4n_2775",c4="_emojiSpacer_g5b4n_2819",u4="_selected_g5b4n_2859",h4="_buttonGroup_g5b4n_2897",d4="_lobbyListSection_g5b4n_2911",f4="_lobbyListTitle_g5b4n_2923",m4="_deleteAllButton_g5b4n_2939",ee={musicVoter:tx,backgroundOverlay:nx,roomContainer:ix,header:sx,headerLeft:rx,roomTitle:ax,emoji:ox,leaveButton:lx,playersSection:cx,sectionTitle:ux,playersList:hx,playerChip:dx,playerEmoji:fx,playerName:mx,hostBadge:gx,addSection:px,addButton:yx,playlistSection:_x,emptyPlaylist:bx,emptyIcon:vx,emptyHint:Tx,playlistItems:Sx,playlistItem:Ex,itemRank:wx,itemInfo:Ax,itemTitle:Rx,itemArtist:Ix,itemMeta:Cx,itemVoting:kx,voteButton:Nx,voted:Dx,voteScore:Mx,removeButton:xx,modalOverlay:Ox,modal:Lx,modalHeader:Vx,modalTitle:jx,modalCloseButton:Px,addModeButtons:zx,addModeButton:Bx,addModeIcon:Ux,addModeDesc:qx,manualForm:Hx,input:Fx,spotifySearch:Gx,searchBox:Kx,searchButton:$x,searchLoading:Qx,spinner:Wx,searchResults:Yx,searchResultItem:Xx,resultImage:Zx,resultInfo:Jx,resultTitle:eO,resultArtist:tO,resultAlbum:nO,addResultButton:iO,addResultButtonAdded:sO,noResults:rO,noResultsHint:aO,spotifyNote:oO,nowPlayingSection:lO,nowPlayingCard:cO,nowPlayingImage:uO,nowPlayingInfo:hO,nowPlayingTrack:dO,nowPlayingArtist:fO,nowPlayingTime:mO,nowPlayingBadge:gO,spotifySection:pO,spotifyError:yO,spotifyConnectBlock:_O,spotifyConnectButton:bO,spotifyPlaybackBlock:vO,spotifyDeviceSelect:TO,spotifyDeviceLabel:SO,spotifyDeviceSelectEl:EO,spotifyResendButton:wO,spotifyConnected:AO,spotifyPlaybackButtons:RO,spotifyPlayButton:IO,spotifyPauseButton:CO,spotifyDisconnectButton:kO,modalButtons:NO,btnFertig:DO,btnPrimary:MO,lobbyStartScreen:xO,lobbyStartCard:OO,lobbyStartTitle:LO,lobbyStartSlogan:VO,lobbyStartButtons:jO,lobbyStartButton:PO,lobbyStartIcon:zO,browseLoading:BO,browseEmpty:UO,browseEmptyIcon:qO,lobbyList:HO,lobbyCard:FO,lobbyCardDelete:GO,lobbyCardHeader:KO,lobbyCardTitle:$O,lobbyCardIcon:QO,lobbyCardInfo:WO,lobbyCardStat:YO,refreshButton:XO,headerButtons:ZO,closeButton:JO,lobbySystem:e4,screen:t4,emojiCard:n4,emojiCharacter:i4,backButtonBottom:s4,title:r4,nameInput:a4,emojiGalleryWrapper:o4,emojiGallery:l4,emojiSpacer:c4,selected:u4,buttonGroup:h4,lobbyListSection:d4,lobbyListTitle:f4,deleteAllButton:m4},g4=["","","","","","","","","","","","","","",""],vs=(()=>{const r=[...g4];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})(),p4={apiKey:"AIzaSyBQ7c9JkZ3zWlyIjZLl1O1sJJOrKfYJbmA",authDomain:"hitzkopf-f0ea6.firebaseapp.com",projectId:"hitzkopf-f0ea6",storageBucket:"hitzkopf-f0ea6.firebasestorage.app",messagingSenderId:"828164655874",appId:"1:828164655874:web:1cab759bdb03bfb736101b"},y4=({onBack:r,spotifyCallbackDone:e})=>{const[n,s]=Z.useState(null),[o,c]=Z.useState(null),[f,m]=Z.useState(null),[b,_]=Z.useState("lobby"),[S,A]=Z.useState(sessionStorage.getItem("mv_name")||""),[V,O]=Z.useState(()=>{const P=sessionStorage.getItem("mv_emoji");if(P)return P;const ne=Math.floor(vs.length/2);return vs[ne]}),[pe,de]=Z.useState(()=>{const P=sessionStorage.getItem("mv_emoji");if(P){const ne=vs.indexOf(P);return ne!==-1?ne:Math.floor(vs.length/2)}return Math.floor(vs.length/2)}),[he,I]=Z.useState(sessionStorage.getItem("mv_roomId")||""),[Ae,xe]=Z.useState(!1),[ct,zt]=Z.useState(null),[qe,D]=Z.useState([]),[R,N]=Z.useState(!1),[B,L]=Z.useState([]),[U,C]=Z.useState(""),[$t,wn]=Z.useState([]),[te,ve]=Z.useState(!1),[Ve,yt]=Z.useState(null),[Ut,j]=Z.useState(!1),[re,ye]=Z.useState(""),[Se,je]=Z.useState(""),[it,ut]=Z.useState("song"),[un,We]=Z.useState(()=>new Set),[hn,ss]=Z.useState(!1),[Js,Yn]=Z.useState(!1),[jn,qs]=Z.useState(!1),[Ki,Oi]=Z.useState(null),[br,dn]=Z.useState([]),[Yt,As]=Z.useState("active"),rs=Z.useRef(null);Z.useRef(null);const $i=Z.useRef(null),vn=Z.useRef(!1),ci=Z.useRef({x:0,y:0,time:0}),Qi=Z.useRef(null),Rs=Z.useRef(S);Z.useEffect(()=>{Rs.current=S},[S]),Z.useEffect(()=>{const P=tg(p4),ne=$T(P),_e=mE(P);return s(P),m(ne),c(_e),LT(ne).catch(console.error),()=>{rs.current&&rs.current()}},[]),Z.useEffect(()=>{const P=$i.current;if(!P)return;const ne=()=>{vn.current=!0;const we=P.scrollLeft,He=P.scrollWidth/(vs.length+2),_t=Math.round(we/He),tn=Math.max(0,Math.min(_t,vs.length-1));de(tn),O(vs[tn]),setTimeout(()=>{vn.current=!1},100)};return P.addEventListener("scroll",ne),setTimeout(()=>{const we=P.scrollWidth/(vs.length+2);P.scrollLeft=pe*we},100),()=>P.removeEventListener("scroll",ne)},[pe]),Z.useEffect(()=>{if(b==="browse"&&$i.current){const P=$i.current;setTimeout(()=>{const ne=P.scrollWidth/(vs.length+2);P.scrollLeft=pe*ne},150)}},[b]);const as=P=>{const ne=P.target.value.slice(0,20);A(ne),sessionStorage.setItem("mv_name",ne)},os=P=>{const ne=vs.indexOf(P);de(ne),O(P),sessionStorage.setItem("mv_emoji",P);const _e=$i.current;if(_e){const we=_e.scrollWidth/(vs.length+2);_e.scrollTo({left:ne*we,behavior:"smooth"})}},er=P=>{if(!S.trim()){alert("Bitte gib einen Namen ein!");return}sessionStorage.setItem("mv_name",S),sessionStorage.setItem("mv_emoji",V),vr({name:S,emoji:V,roomId:P})},ls=async({name:P,emoji:ne})=>{if(!o)return;const _e=Mn(),we=Ue(o,"musicVoterLobbies",_e);try{await CE(we,{host:P,createdAt:Fi(),players:{[P]:{emoji:ne,joinedAt:Fi()}},playlist:[],status:"active"}),A(P),O(ne),I(_e),xe(!0),sessionStorage.setItem("mv_roomId",_e),_("room"),Is(_e)}catch(He){console.error("Fehler beim Erstellen der Playlist:",He),alert("Fehler beim Erstellen der Playlist")}},vr=async({name:P,emoji:ne,roomId:_e})=>{if(!o)return;const we=Ue(o,"musicVoterLobbies",_e);try{const He=await ai(we);if(!He.exists()){alert("Playlist nicht gefunden!");return}const _t=He.data();if(_t.players&&_t.players[P]){alert("Dieser Name ist bereits vergeben!");return}await lt(we,{[`players.${P}`]:{emoji:ne,joinedAt:Fi()}}),A(P),O(ne),I(_e),xe(!1),sessionStorage.setItem("mv_roomId",_e),_("room"),Is(_e)}catch(He){console.error("Fehler beim Beitreten:",He),alert("Fehler beim Beitreten der Playlist")}},ui=async()=>{if(o){N(!0);try{const P=Km(o,"musicVoterLobbies"),ne=Qm(P,Wm("status","==","active")),_e=await Ym(ne),we=[];_e.forEach(He=>{const _t=He.data();we.push({id:He.id,host:_t.host,playerCount:Object.keys(_t.players||{}).length,createdAt:_t.createdAt,playlist:_t.playlist||[]})}),we.sort((He,_t)=>He.createdAt?_t.createdAt?_t.createdAt.toMillis()-He.createdAt.toMillis():-1:1),D(we),console.log(` ${we.length} offene Lobbies geladen`)}catch(P){console.error("Fehler beim Laden der Lobbies:",P),D([])}finally{N(!1)}}},An=async(P,ne,_e)=>{if(_e.stopPropagation(),!window.confirm(`Playlist von ${ne} (${P}) wirklich lschen?

Diese Aktion kann nicht rckgngig gemacht werden!`)||!o)return;const He=Ue(o,"musicVoterLobbies",P);try{await pl(He),console.log(` Playlist ${P} gelscht`),D(_t=>_t.filter(tn=>tn.id!==P))}catch(_t){console.error("Fehler beim Lschen:",_t),alert("Fehler beim Lschen der Playlist: "+(_t.message||"Unbekannter Fehler"))}},hi=async()=>{if(!(!window.confirm(`ALLE ${qe.length} Playlists wirklich lschen?

 WARNUNG: Diese Aktion kann NICHT rckgngig gemacht werden!
Alle Zuhrer werden entfernt!`)||!window.confirm(`Bist du dir WIRKLICH sicher?

Dies wird alle Playlists unwiderruflich lschen!`))&&o)try{const _e=qe.map(we=>pl(Ue(o,"musicVoterLobbies",we.id)));await Promise.all(_e),console.log(` Alle ${qe.length} Playlists gelscht`),D([]),alert("Alle Playlists wurden gelscht!")}catch(_e){console.error("Fehler beim Lschen aller Playlists:",_e),alert("Fehler beim Lschen: "+(_e.message||"Unbekannter Fehler")),ui()}},on=async()=>{if(!Ae||!o||!he){alert("Nur der Host kann die Playlist schlieen!");return}if(!window.confirm("Playlist wirklich schlieen? Alle Zuhrer werden entfernt!"))return;const ne=Ue(o,"musicVoterLobbies",he);try{await pl(ne),console.log(" Playlist geschlossen"),rs.current&&rs.current(),_("lobby"),I(""),A(""),O(""),xe(!1),zt(null),L([]),sessionStorage.removeItem("mv_roomId")}catch(_e){console.error("Fehler beim Schlieen:",_e),alert("Fehler beim Schlieen der Playlist")}},Is=P=>{if(!o)return;const ne=Ue(o,"musicVoterLobbies",P),_e=kE(ne,we=>{if(we.exists()){const He=we.data();zt(He),L(He.playlist||[]),xe(He.host===Rs.current)}else alert("Playlist wurde geschlossen"),cs()});rs.current=_e},cs=async()=>{if(rs.current&&rs.current(),o&&he&&S){const P=Ue(o,"musicVoterLobbies",he);try{await lt(P,{[`players.${S}`]:Ti()}),console.log(` ${S} hat die Lobby verlassen`)}catch(ne){console.error("Fehler beim Verlassen:",ne)}}_("lobby"),I(""),A(""),O(""),xe(!1),zt(null),L([]),sessionStorage.removeItem("mv_roomId")};Z.useEffect(()=>{const P=sessionStorage.getItem("mv_roomId"),ne=sessionStorage.getItem("mv_name");if(!o||!P||!ne?.trim())return;let _e=!1;const we=Ue(o,"musicVoterLobbies",P);return ai(we).then(He=>{if(_e)return;if(!He.exists()){sessionStorage.removeItem("mv_roomId");return}const _t=He.data();if(!_t.players?.[ne]){sessionStorage.removeItem("mv_roomId");return}I(P),A(ne),O(sessionStorage.getItem("mv_emoji")||""),xe(_t.host===ne),_("room"),Is(P)}).catch(()=>{_e||sessionStorage.removeItem("mv_roomId")}),()=>{_e=!0}},[o]);const Pn=async()=>{if(!re.trim()){alert("Bitte gib einen Titel ein!");return}const P={id:`manual_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:re,artist:Se||"Unbekannt",type:it,source:"manual",votes:{},addedBy:S,addedAt:Date.now()};await di(P),ye(""),je(""),j(!1)},di=async P=>{if(!o||!he){console.error(" Hinzufgen fehlgeschlagen: DB oder RoomID fehlt",{db:!!o,roomId:he}),alert("Fehler: Nicht mit Lobby verbunden");return}console.log(" Versuche Song hinzuzufgen:",P.title);const ne=Object.keys(P).reduce((we,He)=>(P[He]!==void 0&&(we[He]=P[He]),we),{});console.log(" Bereinigtes Item:",ne);const _e=Ue(o,"musicVoterLobbies",he);try{await lt(_e,{playlist:cl(ne)}),console.log(" Song erfolgreich hinzugefgt:",P.title)}catch(we){console.error(" Fehler beim Hinzufgen:",we),console.error("Fehler Details:",{code:we.code,message:we.message,roomId:he,item:P.title}),alert("Fehler beim Hinzufgen: "+(we.message||"Unbekannter Fehler"))}},us=async(P,ne)=>{if(!o||!he||!S)return;const _e=Ue(o,"musicVoterLobbies",he);try{const _t=((await ai(_e)).data().playlist||[]).map(tn=>{if(tn.id===P){const mi=tn.votes?.[S]||0,Hs=ne==="up"?1:ne==="down"?-1:0;return{...tn,votes:{...tn.votes,[S]:mi===Hs?0:Hs}}}return tn});await lt(_e,{playlist:_t})}catch(we){console.error("Fehler beim Voten:",we)}},Zt=async P=>{if(!o||!he)return;const ne=B.find(He=>He.id===P);if(!ne)return;if(!Ae&&ne.addedBy!==S){alert("Nur der Host oder der Ersteller kann diesen Eintrag lschen!");return}if(!window.confirm(`"${ne.title}" wirklich aus der Playlist entfernen?`))return;const we=Ue(o,"musicVoterLobbies",he);try{const He=B.filter(_t=>_t.id!==P);await lt(we,{playlist:He})}catch(He){console.error("Fehler beim Entfernen:",He)}},ni=async()=>{if(U.trim()){ve(!0);try{const P=await Ts.search(U,10);wn(P),P.length===0&&console.log("Keine Ergebnisse fr:",U)}catch(P){console.error("Spotify Suche fehlgeschlagen:",P);let ne=`Spotify Suche fehlgeschlagen.

`;P.message?.includes("Failed to get")?(ne+=`Credentials Problem:
`,ne+=`1. berprfe .env.local Datei
`,ne+=`2. Dev-Server neu starten (wichtig!)
`,ne+="3. Spotify Developer Dashboard prfen"):P.message?.includes("network")?ne+="Netzwerkproblem - Internetverbindung prfen":ne+="Fehler: "+P.message,alert(ne),wn([])}finally{ve(!1)}}},Mn=()=>{const P="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let ne="";for(let _e=0;_e<6;_e++)ne+=P.charAt(Math.floor(Math.random()*P.length));return ne},fn=P=>P.votes?Object.values(P.votes).reduce((ne,_e)=>ne+_e,0):0,Tr=[...B].sort((P,ne)=>{const _e=fn(P),we=fn(ne);return we!==_e?we-_e:(P.addedAt||0)-(ne.addedAt||0)}),tr=P=>P===1?"#51cf66":P===-1?"#ff6b6b":"transparent",Li=P=>{if(P==null||Number.isNaN(P))return"0:00";const ne=Math.floor(Number(P)/1e3),_e=Math.floor(ne/60),we=ne%60;return`${_e}:${we.toString().padStart(2,"0")}`},[Cs,Fa]=Z.useState(0),Mt=ct?.nowPlaying,wt=Mt?Mt.isPlaying?Math.min((Mt.positionMs||0)+(Date.now()-(Mt.updatedAt||0)),Mt.durationMs||0):Mt.positionMs||0:0;Z.useEffect(()=>{if(!Mt?.isPlaying)return;const P=setInterval(()=>Fa(ne=>ne+1),1e3);return()=>clearInterval(P)},[Mt?.isPlaying]),Z.useEffect(()=>{if(!Ae||!hn||!o||!he)return;const P=Ue(o,"musicVoterLobbies",he),ne=setInterval(async()=>{try{const _e=await Ts.getPlaybackState();if(await lt(P,{nowPlaying:_e?{trackId:_e.trackId,trackName:_e.trackName,artist:_e.artist,imageUrl:_e.imageUrl,positionMs:_e.positionMs,durationMs:_e.durationMs,isPlaying:_e.isPlaying,updatedAt:_e.updatedAt}:null}),_e?.trackId&&Qi.current!==null&&Qi.current!==_e.trackId)try{const He=(await ai(P)).data()?.playlist||[];if(He.some(tn=>tn.spotifyId===Qi.current)){const tn=He.filter(mi=>mi.spotifyId!==Qi.current);await lt(P,{playlist:tn})}}catch{}_e?.trackId&&(Qi.current=_e.trackId)}catch{}},2e3);return()=>clearInterval(ne)},[Ae,hn,o,he]),Z.useEffect(()=>{Ae&&Ts.isUserLoggedIn().then(ss)},[Ae,e]),Z.useEffect(()=>{if(!(!Ae||!hn||Js))return Oi(null),Ts.initPlaybackPlayer(()=>Yn(!0),P=>Oi(P||"Spotify-Fehler")),()=>{Ts.disconnectPlayer(),Yn(!1)}},[Ae,hn]),Z.useEffect(()=>{if(!Ae||!hn)return;const P=async()=>{try{const _e=await Ts.getDevices();dn(_e)}catch{}};P();const ne=setInterval(P,1e4);return()=>clearInterval(ne)},[Ae,hn]);const Vi=async()=>{try{sessionStorage.setItem("spotify_return_to","musicvoter");const P=await Ts.getAuthUrlWithPKCE();window.location.href=P}catch(P){alert("Spotify-Verbindung starten fehlgeschlagen: "+(P.message||"Unbekannter Fehler"))}},fi=async()=>{if(o&&he&&Ae)try{await lt(Ue(o,"musicVoterLobbies",he),{nowPlaying:null})}catch{}Ts.clearUserTokens(),Ts.disconnectPlayer(),ss(!1),Yn(!1),qs(!1),Oi(null)},kn=()=>Tr.filter(P=>P.source==="spotify"&&P.spotifyId&&P.type==="song").map(P=>`spotify:track:${P.spotifyId}`),nr=async()=>{const P=kn();if(P.length===0){alert("In der Playlist sind keine Spotify-Songs. Fge zuerst Songs ber die Spotify-Suche hinzu.");return}Oi(null);try{await Ts.playOnDevice(P,Yt==="active"?"active":Yt),qs(!0)}catch(ne){Oi(ne.message||"Abspielen fehlgeschlagen"),alert("Spotify abspielen: "+(ne.message||"Fehler"))}},xn=async()=>{const P=kn();if(P.length!==0){Oi(null);try{await Ts.playOnDevice(P,Yt==="active"?"active":Yt),qs(!0)}catch(ne){Oi(ne.message||"Fehler")}}},ji=async()=>{try{await Ts.pausePlayback(),qs(!1)}catch(P){console.error("Pause fehlgeschlagen:",P)}};return p.jsxs("div",{className:ee.musicVoter,children:[p.jsx("div",{className:ee.backgroundOverlay}),b==="lobby"&&p.jsxs("div",{className:ee.lobbyStartScreen,children:[p.jsxs("div",{className:ee.lobbyStartCard,children:[p.jsxs("h1",{className:ee.lobbyStartTitle,children:[p.jsx("span",{className:ee.emoji,children:""}),"Amplify"]}),p.jsx("p",{className:ee.lobbyStartSlogan,children:"Gemeinsam den Ton angeben"}),p.jsxs("div",{className:ee.lobbyStartButtons,children:[p.jsxs("button",{className:ee.lobbyStartButton,onClick:()=>_("create"),children:[p.jsx("span",{className:ee.lobbyStartIcon,children:""}),p.jsx("span",{children:"Playlist erstellen"})]}),p.jsxs("button",{className:ee.lobbyStartButton,onClick:()=>{_("browse"),ui()},children:[p.jsx("span",{className:ee.lobbyStartIcon,children:""}),p.jsx("span",{children:"Playlist beitreten"})]})]})]}),p.jsx("button",{onClick:r,className:ee.backButtonBottom,children:" Zurck"})]}),b==="create"&&p.jsx(JM,{onCreateLobby:ls,onJoinLobby:()=>{},storagePrefix:"mv",title:"Playlist erstellen",buttonText:"Playlist erstellen",accentColor:"#4ecdc4",onBack:()=>_("lobby")}),b==="browse"&&p.jsxs("div",{className:ee.lobbySystem,style:{"--accent-color":"#4ecdc4"},children:[p.jsxs("div",{className:ee.screen,children:[p.jsx("h1",{className:ee.title,children:"Playlist beitreten"}),p.jsx("input",{type:"text",value:S,onChange:as,placeholder:"Dein Name",maxLength:20,autoComplete:"name",className:ee.nameInput}),p.jsx("div",{className:ee.emojiGalleryWrapper,children:p.jsxs("div",{ref:$i,className:ee.emojiGallery,children:[p.jsx("div",{className:ee.emojiSpacer}),vs.map((P,ne)=>{const _e=ne===pe;return p.jsx("div",{className:`${ee.emojiCard} ${_e?ee.selected:""}`,onClick:()=>{vn.current||os(P)},onTouchStart:we=>{ci.current={x:we.touches[0].clientX,y:we.touches[0].clientY,time:Date.now()}},onTouchMove:we=>{if(ci.current.x!==0){const He=Math.abs(we.touches[0].clientX-ci.current.x),_t=Math.abs(we.touches[0].clientY-ci.current.y);(He>10||_t>10)&&(vn.current=!0)}},onTouchEnd:()=>{setTimeout(()=>{ci.current={x:0,y:0,time:0}},50)},children:p.jsx("div",{className:ee.emojiCharacter,children:P})},`${P}-${ne}`)}),p.jsx("div",{className:ee.emojiSpacer})]})}),p.jsxs("div",{className:ee.lobbyListSection,children:[p.jsx("h2",{className:ee.lobbyListTitle,children:"Offene Playlists"}),R&&p.jsxs("div",{className:ee.browseLoading,children:[p.jsx("div",{className:ee.spinner}),p.jsx("p",{children:"Lade Playlists..."})]}),!R&&qe.length===0&&p.jsxs("div",{className:ee.browseEmpty,children:[p.jsx("div",{className:ee.browseEmptyIcon,children:""}),p.jsx("p",{children:"Keine Playlists gefunden"})]}),!R&&qe.length>0&&p.jsx("div",{className:ee.lobbyList,children:qe.map(P=>p.jsxs("div",{className:ee.lobbyCard,onClick:()=>er(P.id),children:[p.jsx("button",{className:ee.lobbyCardDelete,onClick:ne=>An(P.id,P.host,ne),title:"Playlist lschen",children:""}),p.jsx("div",{className:ee.lobbyCardHeader,children:p.jsxs("div",{className:ee.lobbyCardTitle,children:[p.jsx("span",{className:ee.lobbyCardIcon,children:""}),p.jsxs("span",{children:["Playlist von ",P.host]})]})}),p.jsxs("div",{className:ee.lobbyCardInfo,children:[p.jsxs("div",{className:ee.lobbyCardStat,children:[p.jsx("span",{children:""}),p.jsxs("span",{children:[P.playerCount," Zuhrer"]})]}),p.jsxs("div",{className:ee.lobbyCardStat,children:[p.jsx("span",{children:""}),p.jsxs("span",{children:[P.playlist.length," Songs"]})]})]})]},P.id))})]}),p.jsxs("div",{className:ee.buttonGroup,children:[p.jsx("button",{className:ee.refreshButton,onClick:ui,disabled:R,children:" Aktualisieren"}),qe.length>0&&p.jsx("button",{className:ee.deleteAllButton,onClick:hi,children:" Alle Playlists lschen"})]})]}),p.jsx("button",{onClick:()=>_("lobby"),className:ee.backButtonBottom,children:" Zurck"})]}),b==="room"&&ct&&p.jsxs("div",{className:ee.roomContainer,children:[p.jsxs("div",{className:ee.header,children:[p.jsx("div",{className:ee.headerLeft,children:p.jsxs("h1",{className:ee.roomTitle,children:[p.jsx("span",{className:ee.emoji,children:""}),"Amplify"]})}),p.jsxs("div",{className:ee.headerButtons,children:[Ae&&p.jsx("button",{className:ee.closeButton,onClick:on,title:"Playlist schlieen",children:"Schlieen"}),p.jsx("button",{className:ee.leaveButton,onClick:cs,children:"Verlassen"})]})]}),p.jsxs("div",{className:ee.playersSection,children:[p.jsxs("h3",{className:ee.sectionTitle,children:["Zuhrer (",Object.keys(ct.players||{}).length,")"]}),p.jsx("div",{className:ee.playersList,children:Object.entries(ct.players||{}).map(([P,ne])=>p.jsxs("div",{className:ee.playerChip,children:[p.jsx("span",{className:ee.playerEmoji,children:ne.emoji}),p.jsx("span",{className:ee.playerName,children:P}),P===ct.host&&p.jsx("span",{className:ee.hostBadge,children:""})]},P))})]}),Ae&&p.jsxs("div",{className:ee.spotifySection,children:[p.jsx("h3",{className:ee.sectionTitle,children:"Spotify abspielen"}),Ki&&p.jsx("p",{className:ee.spotifyError,children:Ki}),hn?p.jsxs("div",{className:ee.spotifyPlaybackBlock,children:[p.jsxs("p",{className:ee.spotifyConnected,children:[" Mit Spotify verbunden",Js&&"  Player bereit"]}),p.jsxs("div",{className:ee.spotifyDeviceSelect,children:[p.jsx("label",{className:ee.spotifyDeviceLabel,children:"Wiedergabe auf:"}),p.jsxs("select",{className:ee.spotifyDeviceSelectEl,value:Yt,onChange:P=>As(P.target.value),children:[p.jsx("option",{value:"active",children:"Aktives Gert (z.B. Alexa)"}),br.map(P=>p.jsxs("option",{value:P.id,children:[P.name,P.is_active?"  aktiv":""]},P.id))]})]}),p.jsxs("div",{className:ee.spotifyPlaybackButtons,children:[jn?p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",className:ee.spotifyPauseButton,onClick:ji,children:" Pause"}),p.jsx("button",{type:"button",className:ee.spotifyResendButton,onClick:xn,title:"Interaktive Playlist erneut auf das gewhlte Gert senden (z.B. nach Wechsel per Spotify Connect)",children:" Playlist erneut senden"})]}):p.jsx("button",{type:"button",className:ee.spotifyPlayButton,onClick:nr,disabled:Tr.filter(P=>P.source==="spotify"&&P.type==="song").length===0,children:" Playlist abspielen"}),p.jsx("button",{type:"button",className:ee.spotifyDisconnectButton,onClick:fi,children:"Verbindung trennen"})]})]}):p.jsxs("div",{className:ee.spotifyConnectBlock,children:[p.jsx("p",{className:ee.spotifyNote,children:"Verbinde dich mit Spotify, damit die Playlist im Browser abspielt (Spotify Premium ntig)."}),p.jsx("button",{type:"button",className:ee.spotifyConnectButton,onClick:Vi,children:"Mit Spotify verbinden"})]})]}),Mt&&p.jsxs("div",{className:ee.nowPlayingSection,children:[p.jsx("h3",{className:ee.sectionTitle,children:"Now Playing"}),p.jsxs("div",{className:ee.nowPlayingCard,children:[Mt.imageUrl&&p.jsx("img",{src:Mt.imageUrl,alt:"",className:ee.nowPlayingImage}),p.jsxs("div",{className:ee.nowPlayingInfo,children:[p.jsx("div",{className:ee.nowPlayingTrack,children:Mt.trackName}),p.jsx("div",{className:ee.nowPlayingArtist,children:Mt.artist}),p.jsxs("div",{className:ee.nowPlayingTime,children:[Li(wt)," / ",Li(Mt.durationMs)]})]}),Mt.isPlaying&&p.jsx("span",{className:ee.nowPlayingBadge,title:"Luft",children:""})]})]}),p.jsx("div",{className:ee.addSection,children:p.jsx("button",{className:ee.addButton,onClick:()=>j(!0),children:"+ Song/Album hinzufgen"})}),(()=>{const P=Tr.filter(ne=>ne.spotifyId!==Mt?.trackId);return p.jsxs("div",{className:ee.playlistSection,children:[p.jsxs("h3",{className:ee.sectionTitle,children:["Playlist (",P.length,Mt?.trackId?" + 1 luft":"",")"]}),P.length===0?p.jsxs("div",{className:ee.emptyPlaylist,children:[p.jsx("div",{className:ee.emptyIcon,children:""}),p.jsx("p",{children:Mt?.trackId?"Keine weiteren Songs in der Warteschlange":"Noch keine Songs in der Playlist"}),p.jsx("p",{className:ee.emptyHint,children:Mt?.trackId?"Der aktuelle Song luft oben bei Now Playing.":"Fge Songs hinzu, um abzustimmen!"})]}):p.jsx("div",{className:ee.playlistItems,children:P.map((ne,_e)=>{const we=fn(ne),He=ne.votes?.[S]||0;return p.jsxs("div",{className:ee.playlistItem,style:{"--item-color":tr(He)},children:[(Ae||ne.addedBy===S)&&p.jsx("button",{className:ee.removeButton,onClick:()=>Zt(ne.id),title:"Entfernen",children:""}),p.jsxs("div",{className:ee.itemRank,children:["#",_e+1]}),p.jsxs("div",{className:ee.itemInfo,children:[p.jsxs("div",{className:ee.itemTitle,children:[ne.type==="album"&&" ",ne.title]}),p.jsx("div",{className:ee.itemArtist,children:ne.artist}),p.jsxs("div",{className:ee.itemMeta,children:["von ",ne.addedBy,ne.source==="spotify"&&"  Spotify"]})]}),p.jsxs("div",{className:ee.itemVoting,children:[p.jsx("button",{className:`${ee.voteButton} ${He===1?ee.voted:""}`,onClick:()=>us(ne.id,"up"),children:""}),p.jsxs("div",{className:ee.voteScore,children:[we>0?"+":"",we]}),p.jsx("button",{className:`${ee.voteButton} ${He===-1?ee.voted:""}`,onClick:()=>us(ne.id,"down"),children:""})]})]},ne.id)})})]})})()]}),Ut&&p.jsx("div",{className:ee.modalOverlay,onClick:()=>{We(new Set),j(!1)},children:p.jsxs("div",{className:ee.modal,onClick:P=>P.stopPropagation(),children:[p.jsxs("div",{className:ee.modalHeader,children:[p.jsx("h2",{className:ee.modalTitle,children:"Hinzufgen"}),p.jsx("button",{type:"button",className:ee.modalCloseButton,onClick:()=>{We(new Set),j(!1),yt(null),ye(""),je("")},title:"Schlieen","aria-label":"Schlieen",children:""})]}),!Ve&&p.jsxs("div",{className:ee.addModeButtons,children:[p.jsxs("button",{className:ee.addModeButton,onClick:()=>yt("spotify"),children:[p.jsx("span",{className:ee.addModeIcon,children:""}),p.jsx("span",{children:"Spotify"}),p.jsx("p",{className:ee.addModeDesc,children:"Suche nach Songs auf Spotify"})]}),p.jsxs("button",{className:ee.addModeButton,onClick:()=>yt("manual"),children:[p.jsx("span",{className:ee.addModeIcon,children:""}),p.jsx("span",{children:"Manuell"}),p.jsx("p",{className:ee.addModeDesc,children:"Eigenen Song eingeben"})]})]}),Ve==="manual"&&p.jsxs("div",{className:ee.manualForm,children:[p.jsxs("select",{value:it,onChange:P=>ut(P.target.value),className:ee.input,children:[p.jsx("option",{value:"song",children:"Song"}),p.jsx("option",{value:"album",children:"Album"})]}),p.jsx("input",{type:"text",value:re,onChange:P=>ye(P.target.value),placeholder:"Titel",className:ee.input}),p.jsx("input",{type:"text",value:Se,onChange:P=>je(P.target.value),placeholder:"Knstler (optional)",className:ee.input}),p.jsx("button",{className:ee.btnPrimary,onClick:Pn,children:"Hinzufgen"})]}),Ve==="spotify"&&p.jsxs("div",{className:ee.spotifySearch,children:[p.jsxs("div",{className:ee.searchBox,children:[p.jsx("input",{type:"text",value:U,onChange:P=>C(P.target.value),onKeyPress:P=>{P.key==="Enter"&&ni()},placeholder:"Song oder Album suchen...",className:ee.input}),p.jsx("button",{className:ee.searchButton,onClick:ni,disabled:te||!U.trim(),children:te?" Suche...":" Suchen"})]}),te&&p.jsxs("div",{className:ee.searchLoading,children:[p.jsx("div",{className:ee.spinner}),p.jsx("p",{children:"Durchsuche Spotify..."})]}),!te&&$t.length>0&&p.jsx("div",{className:ee.searchResults,children:$t.map(P=>{const ne=un.has(P.id);return p.jsxs("div",{className:ee.searchResultItem,onClick:async _e=>{if(!ne&&!_e.target.closest("button"))try{const we={...P,addedBy:S,votes:{}};console.log(" Fge hinzu:",P.title),await di(we),We(He=>new Set(He).add(P.id))}catch(we){console.error("Fehler beim Klick:",we)}},children:[P.imageUrl&&p.jsx("img",{src:P.imageUrl,alt:P.title,className:ee.resultImage}),p.jsxs("div",{className:ee.resultInfo,children:[p.jsxs("div",{className:ee.resultTitle,children:[P.type==="album"&&" ",P.title]}),p.jsx("div",{className:ee.resultArtist,children:P.artist}),P.album&&P.type==="song"&&p.jsx("div",{className:ee.resultAlbum,children:P.album})]}),p.jsx("button",{type:"button",className:`${ee.addResultButton} ${ne?ee.addResultButtonAdded:""}`,onClick:async _e=>{if(_e.stopPropagation(),!ne)try{const we={...P,addedBy:S,votes:{}};await di(we),We(He=>new Set(He).add(P.id))}catch(we){console.error("Fehler beim Hinzufgen:",we)}},disabled:ne,title:ne?"Bereits hinzugefgt":"Zur Playlist hinzufgen",children:ne?"":"+"})]},P.id)})}),!te&&U&&$t.length===0&&p.jsxs("div",{className:ee.noResults,children:[p.jsx("p",{children:"Keine Ergebnisse gefunden"}),p.jsx("p",{className:ee.noResultsHint,children:"Versuche einen anderen Suchbegriff"})]})]}),p.jsx("div",{className:ee.modalButtons,children:p.jsx("button",{className:ee.btnFertig,onClick:()=>{We(new Set),j(!1),yt(null),ye(""),je("")},children:"Fertig"})})]})})]})};function _4(){const[r,e]=Z.useState(()=>new URLSearchParams(typeof window<"u"?window.location.search:"").get("code")?"musicvoter":null),[n,s]=Z.useState(!1);Z.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("code");if(!m||n)return;let b=!1;return(async()=>{try{if(await Ts.exchangeCodeForToken(m),b)return;window.history.replaceState({},"",window.location.pathname||"/"),e("musicvoter")}catch(_){console.error("Spotify Callback Fehler:",_),b||alert("Spotify-Verbindung fehlgeschlagen: "+(_.message||"Unbekannter Fehler"))}finally{b||s(!0)}})(),()=>{b=!0}},[n]);const o=f=>{e(f)},c=()=>{e(null)};return p.jsxs("div",{className:"App",children:[!r&&p.jsx(jw,{onSelectProject:o}),r==="hitzkopf"&&p.jsx(VM,{onBack:c}),r==="musicvoter"&&p.jsx(y4,{onBack:c,spotifyCallbackDone:n})]})}yw.createRoot(document.getElementById("root")).render(p.jsx(Z.StrictMode,{children:p.jsx(_4,{})}));
