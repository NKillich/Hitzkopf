(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var em={exports:{}},hc={};var fb;function a1(){if(fb)return hc;fb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:u}}return hc.Fragment=e,hc.jsx=n,hc.jsxs=n,hc}var mb;function o1(){return mb||(mb=1,em.exports=a1()),em.exports}var _=o1(),tm={exports:{}},ct={};var gb;function l1(){if(gb)return ct;gb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),V=Symbol.iterator;function O(j){return j===null||typeof j!="object"?null:(j=V&&j[V]||j["@@iterator"],typeof j=="function"?j:null)}var me={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ae=Object.assign,ge={};function I(j,ie,pe){this.props=j,this.context=ie,this.refs=ge,this.updater=pe||me}I.prototype.isReactComponent={},I.prototype.setState=function(j,ie){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ie,"setState")},I.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function xe(){}xe.prototype=I.prototype;function Ve(j,ie,pe){this.props=j,this.context=ie,this.refs=ge,this.updater=pe||me}var mt=Ve.prototype=new xe;mt.constructor=Ve,ae(mt,I.prototype),mt.isPureReactComponent=!0;var vt=Array.isArray;function Qe(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(j,ie,pe){var ve=pe.ref;return{$$typeof:r,type:j,key:ie,ref:ve!==void 0?ve:null,props:pe}}function z(j,ie){return N(j.type,ie,j.props)}function L(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function U(j){var ie={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(pe){return ie[pe]})}var C=/\/+/g;function Kt(j,ie){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):ie.toString(36)}function ln(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Qe,Qe):(j.status="pending",j.then(function(ie){j.status==="pending"&&(j.status="fulfilled",j.value=ie)},function(ie){j.status==="pending"&&(j.status="rejected",j.reason=ie)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function J(j,ie,pe,ve,Be){var at=typeof j;(at==="undefined"||at==="boolean")&&(j=null);var Je=!1;if(j===null)Je=!0;else switch(at){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(j.$$typeof){case r:case e:Je=!0;break;case E:return Je=j._init,J(Je(j._payload),ie,pe,ve,Be)}}if(Je)return Be=Be(j),Je=ve===""?"."+Kt(j,0):ve,vt(Be)?(pe="",Je!=null&&(pe=Je.replace(C,"$&/")+"/"),J(Be,ie,pe,"",function(pn){return pn})):Be!=null&&(L(Be)&&(Be=z(Be,pe+(Be.key==null||j&&j.key===Be.key?"":(""+Be.key).replace(C,"$&/")+"/")+Je)),ie.push(Be)),1;Je=0;var $t=ve===""?".":ve+":";if(vt(j))for(var Xe=0;Xe<j.length;Xe++)ve=j[Xe],at=$t+Kt(ve,Xe),Je+=J(ve,ie,pe,at,Be);else if(Xe=O(j),typeof Xe=="function")for(j=Xe.call(j),Xe=0;!(ve=j.next()).done;)ve=ve.value,at=$t+Kt(ve,Xe++),Je+=J(ve,ie,pe,at,Be);else if(at==="object"){if(typeof j.then=="function")return J(ln(j),ie,pe,ve,Be);throw ie=String(j),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Je}function _e(j,ie,pe){if(j==null)return j;var ve=[],Be=0;return J(j,ve,"","",function(at){return ie.call(pe,at,Be++)}),ve}function De(j){if(j._status===-1){var ie=j._result;ie=ie(),ie.then(function(pe){(j._status===0||j._status===-1)&&(j._status=1,j._result=pe)},function(pe){(j._status===0||j._status===-1)&&(j._status=2,j._result=pe)}),j._status===-1&&(j._status=0,j._result=ie)}if(j._status===1)return j._result.default;throw j._result}var wt=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},At={map:_e,forEach:function(j,ie,pe){_e(j,function(){ie.apply(this,arguments)},pe)},count:function(j){var ie=0;return _e(j,function(){ie++}),ie},toArray:function(j){return _e(j,function(ie){return ie})||[]},only:function(j){if(!L(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ct.Activity=A,ct.Children=At,ct.Component=I,ct.Fragment=n,ct.Profiler=l,ct.PureComponent=Ve,ct.StrictMode=s,ct.Suspense=b,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ct.__COMPILER_RUNTIME={__proto__:null,c:function(j){return D.H.useMemoCache(j)}},ct.cache=function(j){return function(){return j.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(j,ie,pe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ve=ae({},j.props),Be=j.key;if(ie!=null)for(at in ie.key!==void 0&&(Be=""+ie.key),ie)!R.call(ie,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&ie.ref===void 0||(ve[at]=ie[at]);var at=arguments.length-2;if(at===1)ve.children=pe;else if(1<at){for(var Je=Array(at),$t=0;$t<at;$t++)Je[$t]=arguments[$t+2];ve.children=Je}return N(j.type,Be,ve)},ct.createContext=function(j){return j={$$typeof:f,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},ct.createElement=function(j,ie,pe){var ve,Be={},at=null;if(ie!=null)for(ve in ie.key!==void 0&&(at=""+ie.key),ie)R.call(ie,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Be[ve]=ie[ve]);var Je=arguments.length-2;if(Je===1)Be.children=pe;else if(1<Je){for(var $t=Array(Je),Xe=0;Xe<Je;Xe++)$t[Xe]=arguments[Xe+2];Be.children=$t}if(j&&j.defaultProps)for(ve in Je=j.defaultProps,Je)Be[ve]===void 0&&(Be[ve]=Je[ve]);return N(j,at,Be)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(j){return{$$typeof:m,render:j}},ct.isValidElement=L,ct.lazy=function(j){return{$$typeof:E,_payload:{_status:-1,_result:j},_init:De}},ct.memo=function(j,ie){return{$$typeof:y,type:j,compare:ie===void 0?null:ie}},ct.startTransition=function(j){var ie=D.T,pe={};D.T=pe;try{var ve=j(),Be=D.S;Be!==null&&Be(pe,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Qe,wt)}catch(at){wt(at)}finally{ie!==null&&pe.types!==null&&(ie.types=pe.types),D.T=ie}},ct.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ct.use=function(j){return D.H.use(j)},ct.useActionState=function(j,ie,pe){return D.H.useActionState(j,ie,pe)},ct.useCallback=function(j,ie){return D.H.useCallback(j,ie)},ct.useContext=function(j){return D.H.useContext(j)},ct.useDebugValue=function(){},ct.useDeferredValue=function(j,ie){return D.H.useDeferredValue(j,ie)},ct.useEffect=function(j,ie){return D.H.useEffect(j,ie)},ct.useEffectEvent=function(j){return D.H.useEffectEvent(j)},ct.useId=function(){return D.H.useId()},ct.useImperativeHandle=function(j,ie,pe){return D.H.useImperativeHandle(j,ie,pe)},ct.useInsertionEffect=function(j,ie){return D.H.useInsertionEffect(j,ie)},ct.useLayoutEffect=function(j,ie){return D.H.useLayoutEffect(j,ie)},ct.useMemo=function(j,ie){return D.H.useMemo(j,ie)},ct.useOptimistic=function(j,ie){return D.H.useOptimistic(j,ie)},ct.useReducer=function(j,ie,pe){return D.H.useReducer(j,ie,pe)},ct.useRef=function(j){return D.H.useRef(j)},ct.useState=function(j){return D.H.useState(j)},ct.useSyncExternalStore=function(j,ie,pe){return D.H.useSyncExternalStore(j,ie,pe)},ct.useTransition=function(){return D.H.useTransition()},ct.version="19.2.0",ct}var pb;function $m(){return pb||(pb=1,tm.exports=l1()),tm.exports}var te=$m(),nm={exports:{}},dc={},im={exports:{}},sm={};var yb;function c1(){return yb||(yb=1,(function(r){function e(J,_e){var De=J.length;J.push(_e);e:for(;0<De;){var wt=De-1>>>1,At=J[wt];if(0<l(At,_e))J[wt]=_e,J[De]=At,De=wt;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var _e=J[0],De=J.pop();if(De!==_e){J[0]=De;e:for(var wt=0,At=J.length,j=At>>>1;wt<j;){var ie=2*(wt+1)-1,pe=J[ie],ve=ie+1,Be=J[ve];if(0>l(pe,De))ve<At&&0>l(Be,pe)?(J[wt]=Be,J[ve]=De,wt=ve):(J[wt]=pe,J[ie]=De,wt=ie);else if(ve<At&&0>l(Be,De))J[wt]=Be,J[ve]=De,wt=ve;else break e}}return _e}function l(J,_e){var De=J.sortIndex-_e.sortIndex;return De!==0?De:J.id-_e.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var b=[],y=[],E=1,A=null,V=3,O=!1,me=!1,ae=!1,ge=!1,I=typeof setTimeout=="function"?setTimeout:null,xe=typeof clearTimeout=="function"?clearTimeout:null,Ve=typeof setImmediate<"u"?setImmediate:null;function mt(J){for(var _e=n(y);_e!==null;){if(_e.callback===null)s(y);else if(_e.startTime<=J)s(y),_e.sortIndex=_e.expirationTime,e(b,_e);else break;_e=n(y)}}function vt(J){if(ae=!1,mt(J),!me)if(n(b)!==null)me=!0,Qe||(Qe=!0,U());else{var _e=n(y);_e!==null&&ln(vt,_e.startTime-J)}}var Qe=!1,D=-1,R=5,N=-1;function z(){return ge?!0:!(r.unstable_now()-N<R)}function L(){if(ge=!1,Qe){var J=r.unstable_now();N=J;var _e=!0;try{e:{me=!1,ae&&(ae=!1,xe(D),D=-1),O=!0;var De=V;try{t:{for(mt(J),A=n(b);A!==null&&!(A.expirationTime>J&&z());){var wt=A.callback;if(typeof wt=="function"){A.callback=null,V=A.priorityLevel;var At=wt(A.expirationTime<=J);if(J=r.unstable_now(),typeof At=="function"){A.callback=At,mt(J),_e=!0;break t}A===n(b)&&s(b),mt(J)}else s(b);A=n(b)}if(A!==null)_e=!0;else{var j=n(y);j!==null&&ln(vt,j.startTime-J),_e=!1}}break e}finally{A=null,V=De,O=!1}_e=void 0}}finally{_e?U():Qe=!1}}}var U;if(typeof Ve=="function")U=function(){Ve(L)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Kt=C.port2;C.port1.onmessage=L,U=function(){Kt.postMessage(null)}}else U=function(){I(L,0)};function ln(J,_e){D=I(function(){J(r.unstable_now())},_e)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return V},r.unstable_next=function(J){switch(V){case 1:case 2:case 3:var _e=3;break;default:_e=V}var De=V;V=_e;try{return J()}finally{V=De}},r.unstable_requestPaint=function(){ge=!0},r.unstable_runWithPriority=function(J,_e){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var De=V;V=J;try{return _e()}finally{V=De}},r.unstable_scheduleCallback=function(J,_e,De){var wt=r.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?wt+De:wt):De=wt,J){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=De+At,J={id:E++,callback:_e,priorityLevel:J,startTime:De,expirationTime:At,sortIndex:-1},De>wt?(J.sortIndex=De,e(y,J),n(b)===null&&J===n(y)&&(ae?(xe(D),D=-1):ae=!0,ln(vt,De-wt))):(J.sortIndex=At,e(b,J),me||O||(me=!0,Qe||(Qe=!0,U()))),J},r.unstable_shouldYield=z,r.unstable_wrapCallback=function(J){var _e=V;return function(){var De=V;V=_e;try{return J.apply(this,arguments)}finally{V=De}}}})(sm)),sm}var _b;function u1(){return _b||(_b=1,im.exports=c1()),im.exports}var rm={exports:{}},vi={};var bb;function h1(){if(bb)return vi;bb=1;var r=$m();function e(b){var y="https://react.dev/errors/"+b;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+b+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(b,y,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:b,containerInfo:y,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(b,y){if(b==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vi.createPortal=function(b,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(b,y,null,E)},vi.flushSync=function(b){var y=f.T,E=s.p;try{if(f.T=null,s.p=2,b)return b()}finally{f.T=y,s.p=E,s.d.f()}},vi.preconnect=function(b,y){typeof b=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(b,y))},vi.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},vi.preinit=function(b,y){if(typeof b=="string"&&y&&typeof y.as=="string"){var E=y.as,A=m(E,y.crossOrigin),V=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(b,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:V,fetchPriority:O}):E==="script"&&s.d.X(b,{crossOrigin:A,integrity:V,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},vi.preinitModule=function(b,y){if(typeof b=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);s.d.M(b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(b)},vi.preload=function(b,y){if(typeof b=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,A=m(E,y.crossOrigin);s.d.L(b,E,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},vi.preloadModule=function(b,y){if(typeof b=="string")if(y){var E=m(y.as,y.crossOrigin);s.d.m(b,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(b)},vi.requestFormReset=function(b){s.d.r(b)},vi.unstable_batchedUpdates=function(b,y){return b(y)},vi.useFormState=function(b,y,E){return f.H.useFormState(b,y,E)},vi.useFormStatus=function(){return f.H.useHostTransitionStatus()},vi.version="19.2.0",vi}var vb;function d1(){if(vb)return rm.exports;vb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=h1(),rm.exports}var Tb;function f1(){if(Tb)return dc;Tb=1;var r=u1(),e=$m(),n=d1();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function b(t){if(u(t)!==t)throw Error(s(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return b(h),t;if(d===o)return b(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var p=!1,T=h.child;T;){if(T===a){p=!0,a=h,o=d;break}if(T===o){p=!0,o=h,a=d;break}T=T.sibling}if(!p){for(T=d.child;T;){if(T===a){p=!0,a=d,o=h;break}if(T===o){p=!0,o=d,a=h;break}T=T.sibling}if(!p)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,V=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),me=Symbol.for("react.portal"),ae=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),xe=Symbol.for("react.consumer"),Ve=Symbol.for("react.context"),mt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Kt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ae:return"Fragment";case I:return"Profiler";case ge:return"StrictMode";case vt:return"Suspense";case Qe:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case me:return"Portal";case Ve:return t.displayName||"Context";case xe:return(t._context.displayName||"Context")+".Consumer";case mt:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Kt(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return Kt(t(i))}catch{}}return null}var ln=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},wt=[],At=-1;function j(t){return{current:t}}function ie(t){0>At||(t.current=wt[At],wt[At]=null,At--)}function pe(t,i){At++,wt[At]=t.current,t.current=i}var ve=j(null),Be=j(null),at=j(null),Je=j(null);function $t(t,i){switch(pe(at,i),pe(Be,t),pe(ve,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?V_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=V_(i),t=j_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ie(ve),pe(ve,t)}function Xe(){ie(ve),ie(Be),ie(at)}function pn(t){t.memoizedState!==null&&pe(Je,t);var i=ve.current,a=j_(i,t.type);i!==a&&(pe(Be,t),pe(ve,a))}function gs(t){Be.current===t&&(ie(ve),ie(Be)),Je.current===t&&(ie(Je),oc._currentValue=De)}var cr,ri;function Mn(t){if(cr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);cr=i&&i[1]||"",ri=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cr+t+ri}var qr=!1;function Ii(t,i){if(!t||qr)return"";qr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var K=Z}Reflect.construct(t,[],oe)}else{try{oe.call()}catch(Z){K=Z}t.call(oe.prototype)}}else{try{throw Error()}catch(Z){K=Z}(oe=t())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),p=d[0],T=d[1];if(p&&T){var x=p.split(`
`),G=T.split(`
`);for(h=o=0;o<x.length&&!x[o].includes("DetermineComponentFrameRoot");)o++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(o===x.length||h===G.length)for(o=x.length-1,h=G.length-1;1<=o&&0<=h&&x[o]!==G[h];)h--;for(;1<=o&&0<=h;o--,h--)if(x[o]!==G[h]){if(o!==1||h!==1)do if(o--,h--,0>h||x[o]!==G[h]){var ee=`
`+x[o].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=o&&0<=h);break}}}finally{qr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Mn(a):""}function ur(t,i){switch(t.tag){case 26:case 27:case 5:return Mn(t.type);case 16:return Mn("Lazy");case 13:return t.child!==i&&i!==null?Mn("Suspense Fallback"):Mn("Suspense");case 19:return Mn("SuspenseList");case 0:case 15:return Ii(t.type,!1);case 11:return Ii(t.type.render,!1);case 1:return Ii(t.type,!0);case 31:return Mn("Activity");default:return""}}function hr(t){try{var i="",a=null;do i+=ur(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var cn=Object.prototype.hasOwnProperty,sn=r.unstable_scheduleCallback,Yi=r.unstable_cancelCallback,za=r.unstable_shouldYield,Ms=r.unstable_requestPaint,Sn=r.unstable_now,Xi=r.unstable_getCurrentPriorityLevel,xs=r.unstable_ImmediatePriority,Os=r.unstable_UserBlockingPriority,Ci=r.unstable_NormalPriority,ki=r.unstable_LowPriority,Gs=r.unstable_IdlePriority,Q=r.log,be=r.unstable_setDisableYieldValue,Oe=null,Se=null;function nt(t){if(typeof Q=="function"&&be(t),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(Oe,t)}catch{}}var et=Math.clz32?Math.clz32:Cn,Gn=Math.log,ps=Math.LN2;function Cn(t){return t>>>=0,t===0?32:31-(Gn(t)/ps|0)|0}var Zi=256,Ks=262144,rn=4194304;function Ni(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Kn(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,p=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=Ni(o):(p&=T,p!==0?h=Ni(p):a||(a=T&~t,a!==0&&(h=Ni(a))))):(T=o&~d,T!==0?h=Ni(T):p!==0?h=Ni(p):a||(a=o&~t,a!==0&&(h=Ni(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function wn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Il(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(){var t=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),t}function ys(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ls(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Cl(t,i,a,o,h,d){var p=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,x=t.expirationTimes,G=t.hiddenUpdates;for(a=p&~a;0<a;){var ee=31-et(a),oe=1<<ee;T[ee]=0,x[ee]=-1;var K=G[ee];if(K!==null)for(G[ee]=null,ee=0;ee<K.length;ee++){var Z=K[ee];Z!==null&&(Z.lane&=-536870913)}a&=~oe}o!==0&&Di(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(p&~i))}function Di(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-et(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Vt(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-et(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function Ji(t,i){var a=i&-i;return a=(a&42)!==0?1:Mi(a),(a&(t.suspendedLanes|i))!==0?0:a}function Mi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Qn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Fr(){var t=_e.p;return t!==0?t:(t=window.event,t===void 0?32:ab(t.type))}function Wn(t,i){var a=_e.p;try{return _e.p=t,i()}finally{_e.p=a}}var es=Math.random().toString(36).slice(2),An="__reactFiber$"+es,xn="__reactProps$"+es,yi="__reactContainer$"+es,_s="__reactEvents$"+es,dr="__reactListeners$"+es,Vs="__reactHandles$"+es,ts="__reactResources$"+es,ns="__reactMarker$"+es;function Gr(t){delete t[An],delete t[xn],delete t[_s],delete t[dr],delete t[Vs]}function xi(t){var i=t[An];if(i)return i;for(var a=t.parentNode;a;){if(i=a[yi]||a[An]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=F_(t);t!==null;){if(a=t[An])return a;t=F_(t)}return i}t=a,a=t.parentNode}return null}function Ui(t){if(t=t[An]||t[yi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Oi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function bs(t){var i=t[ts];return i||(i=t[ts]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function vn(t){t[ns]=!0}var Kr=new Set,Ba={};function is(t,i){vs(t,i),vs(t+"Capture",i)}function vs(t,i){for(Ba[t]=i,t=0;t<i.length;t++)Kr.add(i[t])}var Qr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ua={},qa={};function Wr(t){return cn.call(qa,t)?!0:cn.call(Ua,t)?!1:Qr.test(t)?qa[t]=!0:(Ua[t]=!0,!1)}function fr(t,i,a){if(Wr(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function yn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function an(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ts(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ha(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(p){a=""+p,d.call(this,p)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ut(t){if(!t._valueTracker){var i=Ts(t)?"checked":"value";t._valueTracker=Ha(t,i,""+t[i])}}function Qs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=Ts(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function Es(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var mr=/[\n"\\]/g;function ai(t){return t.replace(mr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function gr(t,i,a,o,h,d,p,T){t.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?t.type=p:t.removeAttribute("type"),i!=null?p==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+un(i)):t.value!==""+un(i)&&(t.value=""+un(i)):p!=="submit"&&p!=="reset"||t.removeAttribute("value"),i!=null?Ga(t,p,un(i)):a!=null?Ga(t,p,un(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+un(T):t.removeAttribute("name")}function Fa(t,i,a,o,h,d,p,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Ut(t);return}a=a!=null?""+un(a):"",i=i!=null?""+un(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.name=p),Ut(t)}function Ga(t,i,a){i==="number"&&Es(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ws(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+un(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function To(t,i,a){if(i!=null&&(i=""+un(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+un(a):""}function $s(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(ln(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=un(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),Ut(t)}function _i(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var M=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function B(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||M.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function X(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&B(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&B(t,d,i[d])}function de(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),S=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ne(t){return S.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Y(){}var Ae=null;function Ie(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Re=null,Ee=null;function ke(t){var i=Ui(t);if(i&&(t=i.stateNode)){var a=t[xn]||null;e:switch(t=i.stateNode,i.type){case"input":if(gr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ai(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[xn]||null;if(!h)throw Error(s(90));gr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&Qs(o)}break e;case"textarea":To(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ws(t,!!a.multiple,i,!1)}}}var ut=!1;function je(t,i,a){if(ut)return t(i,a);ut=!0;try{var o=t(i);return o}finally{if(ut=!1,(Re!==null||Ee!==null)&&(Du(),Re&&(i=Re,t=Ee,Ee=Re=null,ke(i),t)))for(i=0;i<t.length;i++)ke(t[i])}}function Pe(t,i){var a=t.stateNode;if(a===null)return null;var o=a[xn]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xt=!1;if(Rt)try{var We={};Object.defineProperty(We,"passive",{get:function(){xt=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{xt=!1}var ot=null,he=null,dn=null;function yt(){if(dn)return dn;var t,i=he,a=i.length,o,h="value"in ot?ot.value:ot.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var p=a-t;for(o=1;o<=p&&i[a-o]===h[d-o];o++);return dn=h.slice(t,1<o?1-o:void 0)}function _t(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ze(){return!0}function it(){return!1}function $e(t){function i(a,o,h,d,p){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ze:it,this.isPropagationStopped=it,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ze)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ze)},persist:function(){},isPersistent:ze}),i}var Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jt=$e(Yt),lt=A({},Yt,{view:0,detail:0}),qt=$e(lt),Qt,Tt,fe,qe=A({},lt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fe&&(fe&&t.type==="mousemove"?(Qt=t.screenX-fe.screenX,Tt=t.screenY-fe.screenY):Tt=Qt=0,fe=t),Qt)},movementY:function(t){return"movementY"in t?t.movementY:Tt}}),Ue=$e(qe),Ne=A({},qe,{dataTransfer:0}),ht=$e(Ne),hn=A({},lt,{relatedTarget:0}),It=$e(hn),dt=A({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0}),$n=$e(dt),Yn=A({},Yt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ei=$e(Yn),ti=A({},Yt,{data:0}),_n=$e(ti),Li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ss={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ys(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ss[t])?!!i[t]:!1}function Vi(){return Ys}var Ot=A({},lt,{key:function(t){if(t.key){var i=Li[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=_t(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vi,charCode:function(t){return t.type==="keypress"?_t(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_t(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ji=$e(Ot),oi=A({},qe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),On=$e(oi),c=A({},lt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vi}),g=$e(c),v=A({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=$e(v),H=A({},qe,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),W=$e(H),ye=A({},Yt,{newState:0,oldState:0}),Le=$e(ye),Ht=[9,13,27,32],bt=Rt&&"CompositionEvent"in window,He=null;Rt&&"documentMode"in document&&(He=document.documentMode);var Bt=Rt&&"TextEvent"in window&&!He,Ln=Rt&&(!bt||He&&8<He&&11>=He),bi=" ",js=!1;function Ka(t,i){switch(t){case"keyup":return Ht.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var So=!1;function NE(t,i){switch(t){case"compositionend":return Eo(i);case"keypress":return i.which!==32?null:(js=!0,bi);case"textInput":return t=i.data,t===bi&&js?null:t;default:return null}}function DE(t,i){if(So)return t==="compositionend"||!bt&&Ka(t,i)?(t=yt(),dn=he=ot=null,So=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ln&&i.locale!=="ko"?null:i.data;default:return null}}var ME={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!ME[t.type]:i==="textarea"}function Wg(t,i,a,o){Re?Ee?Ee.push(o):Ee=[o]:Re=o,i=Pu(i,"onChange"),0<i.length&&(a=new jt("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var kl=null,Nl=null;function xE(t){N_(t,0)}function Yc(t){var i=Oi(t);if(Qs(i))return t}function $g(t,i){if(t==="change")return i}var Yg=!1;if(Rt){var ad;if(Rt){var od="oninput"in document;if(!od){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),od=typeof Xg.oninput=="function"}ad=od}else ad=!1;Yg=ad&&(!document.documentMode||9<document.documentMode)}function Zg(){kl&&(kl.detachEvent("onpropertychange",Jg),Nl=kl=null)}function Jg(t){if(t.propertyName==="value"&&Yc(Nl)){var i=[];Wg(i,Nl,t,Ie(t)),je(xE,i)}}function OE(t,i,a){t==="focusin"?(Zg(),kl=i,Nl=a,kl.attachEvent("onpropertychange",Jg)):t==="focusout"&&Zg()}function LE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yc(Nl)}function VE(t,i){if(t==="click")return Yc(i)}function jE(t,i){if(t==="input"||t==="change")return Yc(i)}function PE(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ss=typeof Object.is=="function"?Object.is:PE;function Dl(t,i){if(ss(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!cn.call(i,h)||!ss(t[h],i[h]))return!1}return!0}function ep(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tp(t,i){var a=ep(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ep(a)}}function np(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?np(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function ip(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Es(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Es(t.document)}return i}function ld(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var zE=Rt&&"documentMode"in document&&11>=document.documentMode,wo=null,cd=null,Ml=null,ud=!1;function sp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ud||wo==null||wo!==Es(o)||(o=wo,"selectionStart"in o&&ld(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ml&&Dl(Ml,o)||(Ml=o,o=Pu(cd,"onSelect"),0<o.length&&(i=new jt("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=wo)))}function Qa(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ao={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},hd={},rp={};Rt&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Wa(t){if(hd[t])return hd[t];if(!Ao[t])return t;var i=Ao[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in rp)return hd[t]=i[a];return t}var ap=Wa("animationend"),op=Wa("animationiteration"),lp=Wa("animationstart"),BE=Wa("transitionrun"),UE=Wa("transitionstart"),qE=Wa("transitioncancel"),cp=Wa("transitionend"),up=new Map,dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dd.push("scrollEnd");function Ps(t,i){up.set(t,i),is(i,[t])}var Xc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ws=[],Ro=0,fd=0;function Zc(){for(var t=Ro,i=fd=Ro=0;i<t;){var a=ws[i];ws[i++]=null;var o=ws[i];ws[i++]=null;var h=ws[i];ws[i++]=null;var d=ws[i];if(ws[i++]=null,o!==null&&h!==null){var p=o.pending;p===null?h.next=h:(h.next=p.next,p.next=h),o.pending=h}d!==0&&hp(a,h,d)}}function Jc(t,i,a,o){ws[Ro++]=t,ws[Ro++]=i,ws[Ro++]=a,ws[Ro++]=o,fd|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function md(t,i,a,o){return Jc(t,i,a,o),eu(t)}function $a(t,i){return Jc(t,null,null,i),eu(t)}function hp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-et(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function eu(t){if(50<ec)throw ec=0,wf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Io={};function HE(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(t,i,a,o){return new HE(t,i,a,o)}function gd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pr(t,i){var a=t.alternate;return a===null?(a=rs(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function dp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function tu(t,i,a,o,h,d){var p=0;if(o=t,typeof t=="function")gd(t)&&(p=1);else if(typeof t=="string")p=WS(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=rs(31,a,i,h),t.elementType=N,t.lanes=d,t;case ae:return Ya(a.children,h,d,i);case ge:p=8,h|=24;break;case I:return t=rs(12,a,i,h|2),t.elementType=I,t.lanes=d,t;case vt:return t=rs(13,a,i,h),t.elementType=vt,t.lanes=d,t;case Qe:return t=rs(19,a,i,h),t.elementType=Qe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ve:p=10;break e;case xe:p=9;break e;case mt:p=11;break e;case D:p=14;break e;case R:p=16,o=null;break e}p=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=rs(p,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Ya(t,i,a,o){return t=rs(7,t,o,i),t.lanes=a,t}function pd(t,i,a){return t=rs(6,t,null,i),t.lanes=a,t}function fp(t){var i=rs(18,null,null,0);return i.stateNode=t,i}function yd(t,i,a){return i=rs(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var mp=new WeakMap;function As(t,i){if(typeof t=="object"&&t!==null){var a=mp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:hr(i)},mp.set(t,i),i)}return{value:t,source:i,stack:hr(i)}}var Co=[],ko=0,nu=null,xl=0,Rs=[],Is=0,$r=null,Xs=1,Zs="";function yr(t,i){Co[ko++]=xl,Co[ko++]=nu,nu=t,xl=i}function gp(t,i,a){Rs[Is++]=Xs,Rs[Is++]=Zs,Rs[Is++]=$r,$r=t;var o=Xs;t=Zs;var h=32-et(o)-1;o&=~(1<<h),a+=1;var d=32-et(i)+h;if(30<d){var p=h-h%5;d=(o&(1<<p)-1).toString(32),o>>=p,h-=p,Xs=1<<32-et(i)+h|a<<h|o,Zs=d+t}else Xs=1<<d|a<<h|o,Zs=t}function _d(t){t.return!==null&&(yr(t,1),gp(t,1,0))}function bd(t){for(;t===nu;)nu=Co[--ko],Co[ko]=null,xl=Co[--ko],Co[ko]=null;for(;t===$r;)$r=Rs[--Is],Rs[Is]=null,Zs=Rs[--Is],Rs[Is]=null,Xs=Rs[--Is],Rs[Is]=null}function pp(t,i){Rs[Is++]=Xs,Rs[Is++]=Zs,Rs[Is++]=$r,Xs=i.id,Zs=i.overflow,$r=t}var li=null,fn=null,Lt=!1,Yr=null,Cs=!1,vd=Error(s(519));function Xr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ol(As(i,t)),vd}function yp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[An]=t,i[xn]=o,a){case"dialog":St("cancel",i),St("close",i);break;case"iframe":case"object":case"embed":St("load",i);break;case"video":case"audio":for(a=0;a<nc.length;a++)St(nc[a],i);break;case"source":St("error",i);break;case"img":case"image":case"link":St("error",i),St("load",i);break;case"details":St("toggle",i);break;case"input":St("invalid",i),Fa(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":St("invalid",i);break;case"textarea":St("invalid",i),$s(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||O_(i.textContent,a)?(o.popover!=null&&(St("beforetoggle",i),St("toggle",i)),o.onScroll!=null&&St("scroll",i),o.onScrollEnd!=null&&St("scrollend",i),o.onClick!=null&&(i.onclick=Y),i=!0):i=!1,i||Xr(t,!0)}function _p(t){for(li=t.return;li;)switch(li.tag){case 5:case 31:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:li=li.return}}function No(t){if(t!==li)return!1;if(!Lt)return _p(t),Lt=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||zf(t.type,t.memoizedProps)),a=!a),a&&fn&&Xr(t),_p(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));fn=H_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));fn=H_(t)}else i===27?(i=fn,ha(t.type)?(t=Ff,Ff=null,fn=t):fn=i):fn=li?Ns(t.stateNode.nextSibling):null;return!0}function Xa(){fn=li=null,Lt=!1}function Td(){var t=Yr;return t!==null&&(Ki===null?Ki=t:Ki.push.apply(Ki,t),Yr=null),t}function Ol(t){Yr===null?Yr=[t]:Yr.push(t)}var Ed=j(null),Za=null,_r=null;function Zr(t,i,a){pe(Ed,i._currentValue),i._currentValue=a}function br(t){t._currentValue=Ed.current,ie(Ed)}function Sd(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function wd(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var p=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var x=0;x<i.length;x++)if(T.context===i[x]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Sd(d.return,a,t),o||(p=null);break e}d=T.next}}else if(h.tag===18){if(p=h.return,p===null)throw Error(s(341));p.lanes|=a,d=p.alternate,d!==null&&(d.lanes|=a),Sd(p,a,t),p=null}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===t){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}}function Do(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var p=h.alternate;if(p===null)throw Error(s(387));if(p=p.memoizedProps,p!==null){var T=h.type;ss(h.pendingProps.value,p.value)||(t!==null?t.push(T):t=[T])}}else if(h===Je.current){if(p=h.alternate,p===null)throw Error(s(387));p.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(oc):t=[oc])}h=h.return}t!==null&&wd(i,t,a,o),i.flags|=262144}function iu(t){for(t=t.firstContext;t!==null;){if(!ss(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ja(t){Za=t,_r=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ci(t){return bp(Za,t)}function su(t,i){return Za===null&&Ja(t),bp(t,i)}function bp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},_r===null){if(t===null)throw Error(s(308));_r=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else _r=_r.next=i;return a}var FE=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},GE=r.unstable_scheduleCallback,KE=r.unstable_NormalPriority,Vn={$$typeof:Ve,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ad(){return{controller:new FE,data:new Map,refCount:0}}function Ll(t){t.refCount--,t.refCount===0&&GE(KE,function(){t.controller.abort()})}var Vl=null,Rd=0,Mo=0,xo=null;function QE(t,i){if(Vl===null){var a=Vl=[];Rd=0,Mo=Nf(),xo={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Rd++,i.then(vp,vp),i}function vp(){if(--Rd===0&&Vl!==null){xo!==null&&(xo.status="fulfilled");var t=Vl;Vl=null,Mo=0,xo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function WE(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Tp=J.S;J.S=function(t,i){s_=Sn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&QE(t,i),Tp!==null&&Tp(t,i)};var eo=j(null);function Id(){var t=eo.current;return t!==null?t:on.pooledCache}function ru(t,i){i===null?pe(eo,eo.current):pe(eo,i.pool)}function Ep(){var t=Id();return t===null?null:{parent:Vn._currentValue,pool:t}}var Oo=Error(s(460)),Cd=Error(s(474)),au=Error(s(542)),ou={then:function(){}};function Sp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function wp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Y,Y),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Rp(t),t;default:if(typeof i.status=="string")i.then(Y,Y);else{if(t=on,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Rp(t),t}throw no=i,Oo}}function to(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(no=a,Oo):a}}var no=null;function Ap(){if(no===null)throw Error(s(459));var t=no;return no=null,t}function Rp(t){if(t===Oo||t===au)throw Error(s(483))}var Lo=null,jl=0;function lu(t){var i=jl;return jl+=1,Lo===null&&(Lo=[]),wp(Lo,t,i)}function Pl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function cu(t,i){throw i.$$typeof===V?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ip(t){function i(q,P){if(t){var F=q.deletions;F===null?(q.deletions=[P],q.flags|=16):F.push(P)}}function a(q,P){if(!t)return null;for(;P!==null;)i(q,P),P=P.sibling;return null}function o(q){for(var P=new Map;q!==null;)q.key!==null?P.set(q.key,q):P.set(q.index,q),q=q.sibling;return P}function h(q,P){return q=pr(q,P),q.index=0,q.sibling=null,q}function d(q,P,F){return q.index=F,t?(F=q.alternate,F!==null?(F=F.index,F<P?(q.flags|=67108866,P):F):(q.flags|=67108866,P)):(q.flags|=1048576,P)}function p(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function T(q,P,F,re){return P===null||P.tag!==6?(P=pd(F,q.mode,re),P.return=q,P):(P=h(P,F),P.return=q,P)}function x(q,P,F,re){var Ke=F.type;return Ke===ae?ee(q,P,F.props.children,re,F.key):P!==null&&(P.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===R&&to(Ke)===P.type)?(P=h(P,F.props),Pl(P,F),P.return=q,P):(P=tu(F.type,F.key,F.props,null,q.mode,re),Pl(P,F),P.return=q,P)}function G(q,P,F,re){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=yd(F,q.mode,re),P.return=q,P):(P=h(P,F.children||[]),P.return=q,P)}function ee(q,P,F,re,Ke){return P===null||P.tag!==7?(P=Ya(F,q.mode,re,Ke),P.return=q,P):(P=h(P,F),P.return=q,P)}function oe(q,P,F){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=pd(""+P,q.mode,F),P.return=q,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case O:return F=tu(P.type,P.key,P.props,null,q.mode,F),Pl(F,P),F.return=q,F;case me:return P=yd(P,q.mode,F),P.return=q,P;case R:return P=to(P),oe(q,P,F)}if(ln(P)||U(P))return P=Ya(P,q.mode,F,null),P.return=q,P;if(typeof P.then=="function")return oe(q,lu(P),F);if(P.$$typeof===Ve)return oe(q,su(q,P),F);cu(q,P)}return null}function K(q,P,F,re){var Ke=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ke!==null?null:T(q,P,""+F,re);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return F.key===Ke?x(q,P,F,re):null;case me:return F.key===Ke?G(q,P,F,re):null;case R:return F=to(F),K(q,P,F,re)}if(ln(F)||U(F))return Ke!==null?null:ee(q,P,F,re,null);if(typeof F.then=="function")return K(q,P,lu(F),re);if(F.$$typeof===Ve)return K(q,P,su(q,F),re);cu(q,F)}return null}function Z(q,P,F,re,Ke){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return q=q.get(F)||null,T(P,q,""+re,Ke);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case O:return q=q.get(re.key===null?F:re.key)||null,x(P,q,re,Ke);case me:return q=q.get(re.key===null?F:re.key)||null,G(P,q,re,Ke);case R:return re=to(re),Z(q,P,F,re,Ke)}if(ln(re)||U(re))return q=q.get(F)||null,ee(P,q,re,Ke,null);if(typeof re.then=="function")return Z(q,P,F,lu(re),Ke);if(re.$$typeof===Ve)return Z(q,P,F,su(P,re),Ke);cu(P,re)}return null}function Ce(q,P,F,re){for(var Ke=null,Ft=null,Me=P,gt=P=0,kt=null;Me!==null&&gt<F.length;gt++){Me.index>gt?(kt=Me,Me=null):kt=Me.sibling;var Gt=K(q,Me,F[gt],re);if(Gt===null){Me===null&&(Me=kt);break}t&&Me&&Gt.alternate===null&&i(q,Me),P=d(Gt,P,gt),Ft===null?Ke=Gt:Ft.sibling=Gt,Ft=Gt,Me=kt}if(gt===F.length)return a(q,Me),Lt&&yr(q,gt),Ke;if(Me===null){for(;gt<F.length;gt++)Me=oe(q,F[gt],re),Me!==null&&(P=d(Me,P,gt),Ft===null?Ke=Me:Ft.sibling=Me,Ft=Me);return Lt&&yr(q,gt),Ke}for(Me=o(Me);gt<F.length;gt++)kt=Z(Me,q,gt,F[gt],re),kt!==null&&(t&&kt.alternate!==null&&Me.delete(kt.key===null?gt:kt.key),P=d(kt,P,gt),Ft===null?Ke=kt:Ft.sibling=kt,Ft=kt);return t&&Me.forEach(function(pa){return i(q,pa)}),Lt&&yr(q,gt),Ke}function Ze(q,P,F,re){if(F==null)throw Error(s(151));for(var Ke=null,Ft=null,Me=P,gt=P=0,kt=null,Gt=F.next();Me!==null&&!Gt.done;gt++,Gt=F.next()){Me.index>gt?(kt=Me,Me=null):kt=Me.sibling;var pa=K(q,Me,Gt.value,re);if(pa===null){Me===null&&(Me=kt);break}t&&Me&&pa.alternate===null&&i(q,Me),P=d(pa,P,gt),Ft===null?Ke=pa:Ft.sibling=pa,Ft=pa,Me=kt}if(Gt.done)return a(q,Me),Lt&&yr(q,gt),Ke;if(Me===null){for(;!Gt.done;gt++,Gt=F.next())Gt=oe(q,Gt.value,re),Gt!==null&&(P=d(Gt,P,gt),Ft===null?Ke=Gt:Ft.sibling=Gt,Ft=Gt);return Lt&&yr(q,gt),Ke}for(Me=o(Me);!Gt.done;gt++,Gt=F.next())Gt=Z(Me,q,gt,Gt.value,re),Gt!==null&&(t&&Gt.alternate!==null&&Me.delete(Gt.key===null?gt:Gt.key),P=d(Gt,P,gt),Ft===null?Ke=Gt:Ft.sibling=Gt,Ft=Gt);return t&&Me.forEach(function(r1){return i(q,r1)}),Lt&&yr(q,gt),Ke}function tn(q,P,F,re){if(typeof F=="object"&&F!==null&&F.type===ae&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case O:e:{for(var Ke=F.key;P!==null;){if(P.key===Ke){if(Ke=F.type,Ke===ae){if(P.tag===7){a(q,P.sibling),re=h(P,F.props.children),re.return=q,q=re;break e}}else if(P.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===R&&to(Ke)===P.type){a(q,P.sibling),re=h(P,F.props),Pl(re,F),re.return=q,q=re;break e}a(q,P);break}else i(q,P);P=P.sibling}F.type===ae?(re=Ya(F.props.children,q.mode,re,F.key),re.return=q,q=re):(re=tu(F.type,F.key,F.props,null,q.mode,re),Pl(re,F),re.return=q,q=re)}return p(q);case me:e:{for(Ke=F.key;P!==null;){if(P.key===Ke)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){a(q,P.sibling),re=h(P,F.children||[]),re.return=q,q=re;break e}else{a(q,P);break}else i(q,P);P=P.sibling}re=yd(F,q.mode,re),re.return=q,q=re}return p(q);case R:return F=to(F),tn(q,P,F,re)}if(ln(F))return Ce(q,P,F,re);if(U(F)){if(Ke=U(F),typeof Ke!="function")throw Error(s(150));return F=Ke.call(F),Ze(q,P,F,re)}if(typeof F.then=="function")return tn(q,P,lu(F),re);if(F.$$typeof===Ve)return tn(q,P,su(q,F),re);cu(q,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,P!==null&&P.tag===6?(a(q,P.sibling),re=h(P,F),re.return=q,q=re):(a(q,P),re=pd(F,q.mode,re),re.return=q,q=re),p(q)):a(q,P)}return function(q,P,F,re){try{jl=0;var Ke=tn(q,P,F,re);return Lo=null,Ke}catch(Me){if(Me===Oo||Me===au)throw Me;var Ft=rs(29,Me,null,q.mode);return Ft.lanes=re,Ft.return=q,Ft}finally{}}}var io=Ip(!0),Cp=Ip(!1),Jr=!1;function kd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ea(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ta(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Wt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=eu(t),hp(t,null,a),i}return Jc(t,o,i,a),eu(t)}function zl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Vt(t,a)}}function Dd(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=p:d=d.next=p,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Md=!1;function Bl(){if(Md){var t=xo;if(t!==null)throw t}}function Ul(t,i,a,o){Md=!1;var h=t.updateQueue;Jr=!1;var d=h.firstBaseUpdate,p=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var x=T,G=x.next;x.next=null,p===null?d=G:p.next=G,p=x;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,T=ee.lastBaseUpdate,T!==p&&(T===null?ee.firstBaseUpdate=G:T.next=G,ee.lastBaseUpdate=x))}if(d!==null){var oe=h.baseState;p=0,ee=G=x=null,T=d;do{var K=T.lane&-536870913,Z=K!==T.lane;if(Z?(Ct&K)===K:(o&K)===K){K!==0&&K===Mo&&(Md=!0),ee!==null&&(ee=ee.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ce=t,Ze=T;K=i;var tn=a;switch(Ze.tag){case 1:if(Ce=Ze.payload,typeof Ce=="function"){oe=Ce.call(tn,oe,K);break e}oe=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ze.payload,K=typeof Ce=="function"?Ce.call(tn,oe,K):Ce,K==null)break e;oe=A({},oe,K);break e;case 2:Jr=!0}}K=T.callback,K!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=h.callbacks,Z===null?h.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ee===null?(G=ee=Z,x=oe):ee=ee.next=Z,p|=K;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Z=T,T=Z.next,Z.next=null,h.lastBaseUpdate=Z,h.shared.pending=null}}while(!0);ee===null&&(x=oe),h.baseState=x,h.firstBaseUpdate=G,h.lastBaseUpdate=ee,d===null&&(h.shared.lanes=0),aa|=p,t.lanes=p,t.memoizedState=oe}}function kp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Np(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)kp(a[t],i)}var Vo=j(null),uu=j(0);function Dp(t,i){t=Cr,pe(uu,t),pe(Vo,i),Cr=t|i.baseLanes}function xd(){pe(uu,Cr),pe(Vo,Vo.current)}function Od(){Cr=uu.current,ie(Vo),ie(uu)}var as=j(null),ks=null;function na(t){var i=t.alternate;pe(kn,kn.current&1),pe(as,t),ks===null&&(i===null||Vo.current!==null||i.memoizedState!==null)&&(ks=t)}function Ld(t){pe(kn,kn.current),pe(as,t),ks===null&&(ks=t)}function Mp(t){t.tag===22?(pe(kn,kn.current),pe(as,t),ks===null&&(ks=t)):ia()}function ia(){pe(kn,kn.current),pe(as,as.current)}function os(t){ie(as),ks===t&&(ks=null),ie(kn)}var kn=j(0);function hu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||qf(a)||Hf(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var vr=0,ft=null,Jt=null,jn=null,du=!1,jo=!1,so=!1,fu=0,ql=0,Po=null,$E=0;function Rn(){throw Error(s(321))}function Vd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!ss(t[a],i[a]))return!1;return!0}function jd(t,i,a,o,h,d){return vr=d,ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=t===null||t.memoizedState===null?gy:Zd,so=!1,d=a(o,h),so=!1,jo&&(d=Op(i,a,o,h)),xp(t),d}function xp(t){J.H=Gl;var i=Jt!==null&&Jt.next!==null;if(vr=0,jn=Jt=ft=null,du=!1,ql=0,Po=null,i)throw Error(s(300));t===null||Pn||(t=t.dependencies,t!==null&&iu(t)&&(Pn=!0))}function Op(t,i,a,o){ft=t;var h=0;do{if(jo&&(Po=null),ql=0,jo=!1,25<=h)throw Error(s(301));if(h+=1,jn=Jt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}J.H=py,d=i(a,o)}while(jo);return d}function YE(){var t=J.H,i=t.useState()[0];return i=typeof i.then=="function"?Hl(i):i,t=t.useState()[0],(Jt!==null?Jt.memoizedState:null)!==t&&(ft.flags|=1024),i}function Pd(){var t=fu!==0;return fu=0,t}function zd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Bd(t){if(du){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}du=!1}vr=0,jn=Jt=ft=null,jo=!1,ql=fu=0,Po=null}function Pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?ft.memoizedState=jn=t:jn=jn.next=t,jn}function Nn(){if(Jt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=Jt.next;var i=jn===null?ft.memoizedState:jn.next;if(i!==null)jn=i,Jt=t;else{if(t===null)throw ft.alternate===null?Error(s(467)):Error(s(310));Jt=t,t={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},jn===null?ft.memoizedState=jn=t:jn=jn.next=t}return jn}function mu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(t){var i=ql;return ql+=1,Po===null&&(Po=[]),t=wp(Po,t,i),i=ft,(jn===null?i.memoizedState:jn.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?gy:Zd),t}function gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Hl(t);if(t.$$typeof===Ve)return ci(t)}throw Error(s(438,String(t)))}function Ud(t){var i=null,a=ft.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=ft.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=mu(),ft.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=z;return i.index++,a}function Tr(t,i){return typeof i=="function"?i(t):i}function pu(t){var i=Nn();return qd(i,Jt,t)}function qd(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var p=h.next;h.next=d.next,d.next=p}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=p=null,x=null,G=i,ee=!1;do{var oe=G.lane&-536870913;if(oe!==G.lane?(Ct&oe)===oe:(vr&oe)===oe){var K=G.revertLane;if(K===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),oe===Mo&&(ee=!0);else if((vr&K)===K){G=G.next,K===Mo&&(ee=!0);continue}else oe={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},x===null?(T=x=oe,p=d):x=x.next=oe,ft.lanes|=K,aa|=K;oe=G.action,so&&a(d,oe),d=G.hasEagerState?G.eagerState:a(d,oe)}else K={lane:oe,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},x===null?(T=x=K,p=d):x=x.next=K,ft.lanes|=oe,aa|=oe;G=G.next}while(G!==null&&G!==i);if(x===null?p=d:x.next=T,!ss(d,t.memoizedState)&&(Pn=!0,ee&&(a=xo,a!==null)))throw a;t.memoizedState=d,t.baseState=p,t.baseQueue=x,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Hd(t){var i=Nn(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var p=h=h.next;do d=t(d,p.action),p=p.next;while(p!==h);ss(d,i.memoizedState)||(Pn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Lp(t,i,a){var o=ft,h=Nn(),d=Lt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var p=!ss((Jt||h).memoizedState,a);if(p&&(h.memoizedState=a,Pn=!0),h=h.queue,Kd(Pp.bind(null,o,h,t),[t]),h.getSnapshot!==i||p||jn!==null&&jn.memoizedState.tag&1){if(o.flags|=2048,zo(9,{destroy:void 0},jp.bind(null,o,h,a,i),null),on===null)throw Error(s(349));d||(vr&127)!==0||Vp(o,i,a)}return a}function Vp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=ft.updateQueue,i===null?(i=mu(),ft.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function jp(t,i,a,o){i.value=a,i.getSnapshot=o,zp(i)&&Bp(t)}function Pp(t,i,a){return a(function(){zp(i)&&Bp(t)})}function zp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!ss(t,a)}catch{return!0}}function Bp(t){var i=$a(t,2);i!==null&&Qi(i,t,2)}function Fd(t){var i=Pi();if(typeof t=="function"){var a=t;if(t=a(),so){nt(!0);try{a()}finally{nt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:t},i}function Up(t,i,a,o){return t.baseState=a,qd(t,Jt,typeof o=="function"?o:Tr)}function XE(t,i,a,o,h){if(bu(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){d.listeners.push(p)}};J.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,qp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function qp(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=J.T,p={};J.T=p;try{var T=a(h,o),x=J.S;x!==null&&x(p,T),Hp(t,i,T)}catch(G){Gd(t,i,G)}finally{d!==null&&p.types!==null&&(d.types=p.types),J.T=d}}else try{d=a(h,o),Hp(t,i,d)}catch(G){Gd(t,i,G)}}function Hp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Fp(t,i,o)},function(o){return Gd(t,i,o)}):Fp(t,i,a)}function Fp(t,i,a){i.status="fulfilled",i.value=a,Gp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,qp(t,a)))}function Gd(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Gp(i),i=i.next;while(i!==o)}t.action=null}function Gp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Kp(t,i){return i}function Qp(t,i){if(Lt){var a=on.formState;if(a!==null){e:{var o=ft;if(Lt){if(fn){t:{for(var h=fn,d=Cs;h.nodeType!==8;){if(!d){h=null;break t}if(h=Ns(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){fn=Ns(h.nextSibling),o=h.data==="F!";break e}}Xr(o)}o=!1}o&&(i=a[0])}}return a=Pi(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kp,lastRenderedState:i},a.queue=o,a=dy.bind(null,ft,o),o.dispatch=a,o=Fd(!1),d=Xd.bind(null,ft,!1,o.queue),o=Pi(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=XE.bind(null,ft,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Wp(t){var i=Nn();return $p(i,Jt,t)}function $p(t,i,a){if(i=qd(t,i,Kp)[0],t=pu(Tr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Hl(i)}catch(p){throw p===Oo?au:p}else o=i;i=Nn();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(ft.flags|=2048,zo(9,{destroy:void 0},ZE.bind(null,h,a),null)),[o,d,t]}function ZE(t,i){t.action=i}function Yp(t){var i=Nn(),a=Jt;if(a!==null)return $p(i,a,t);Nn(),i=i.memoizedState,a=Nn();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function zo(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=ft.updateQueue,i===null&&(i=mu(),ft.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Xp(){return Nn().memoizedState}function yu(t,i,a,o){var h=Pi();ft.flags|=t,h.memoizedState=zo(1|i,{destroy:void 0},a,o===void 0?null:o)}function _u(t,i,a,o){var h=Nn();o=o===void 0?null:o;var d=h.memoizedState.inst;Jt!==null&&o!==null&&Vd(o,Jt.memoizedState.deps)?h.memoizedState=zo(i,d,a,o):(ft.flags|=t,h.memoizedState=zo(1|i,d,a,o))}function Zp(t,i){yu(8390656,8,t,i)}function Kd(t,i){_u(2048,8,t,i)}function JE(t){ft.flags|=4;var i=ft.updateQueue;if(i===null)i=mu(),ft.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Jp(t){var i=Nn().memoizedState;return JE({ref:i,nextImpl:t}),function(){if((Wt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ey(t,i){return _u(4,2,t,i)}function ty(t,i){return _u(4,4,t,i)}function ny(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function iy(t,i,a){a=a!=null?a.concat([t]):null,_u(4,4,ny.bind(null,i,t),a)}function Qd(){}function sy(t,i){var a=Nn();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Vd(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function ry(t,i){var a=Nn();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Vd(i,o[1]))return o[0];if(o=t(),so){nt(!0);try{t()}finally{nt(!1)}}return a.memoizedState=[o,i],o}function Wd(t,i,a){return a===void 0||(vr&1073741824)!==0&&(Ct&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=a_(),ft.lanes|=t,aa|=t,a)}function ay(t,i,a,o){return ss(a,i)?a:Vo.current!==null?(t=Wd(t,a,o),ss(t,i)||(Pn=!0),t):(vr&42)===0||(vr&1073741824)!==0&&(Ct&261930)===0?(Pn=!0,t.memoizedState=a):(t=a_(),ft.lanes|=t,aa|=t,i)}function oy(t,i,a,o,h){var d=_e.p;_e.p=d!==0&&8>d?d:8;var p=J.T,T={};J.T=T,Xd(t,!1,i,a);try{var x=h(),G=J.S;if(G!==null&&G(T,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var ee=WE(x,o);Fl(t,i,ee,us(t))}else Fl(t,i,o,us(t))}catch(oe){Fl(t,i,{then:function(){},status:"rejected",reason:oe},us())}finally{_e.p=d,p!==null&&T.types!==null&&(p.types=T.types),J.T=p}}function eS(){}function $d(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=ly(t).queue;oy(t,h,i,De,a===null?eS:function(){return cy(t),a(o)})}function ly(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:De},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function cy(t){var i=ly(t);i.next===null&&(i=t.alternate.memoizedState),Fl(t,i.next.queue,{},us())}function Yd(){return ci(oc)}function uy(){return Nn().memoizedState}function hy(){return Nn().memoizedState}function tS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=us();t=ea(a);var o=ta(i,t,a);o!==null&&(Qi(o,i,a),zl(o,i,a)),i={cache:Ad()},t.payload=i;return}i=i.return}}function nS(t,i,a){var o=us();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bu(t)?fy(i,a):(a=md(t,i,a,o),a!==null&&(Qi(a,t,o),my(a,i,o)))}function dy(t,i,a){var o=us();Fl(t,i,a,o)}function Fl(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bu(t))fy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var p=i.lastRenderedState,T=d(p,a);if(h.hasEagerState=!0,h.eagerState=T,ss(T,p))return Jc(t,i,h,0),on===null&&Zc(),!1}catch{}finally{}if(a=md(t,i,h,o),a!==null)return Qi(a,t,o),my(a,i,o),!0}return!1}function Xd(t,i,a,o){if(o={lane:2,revertLane:Nf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},bu(t)){if(i)throw Error(s(479))}else i=md(t,a,o,2),i!==null&&Qi(i,t,2)}function bu(t){var i=t.alternate;return t===ft||i!==null&&i===ft}function fy(t,i){jo=du=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function my(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Vt(t,a)}}var Gl={readContext:ci,use:gu,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useLayoutEffect:Rn,useInsertionEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useSyncExternalStore:Rn,useId:Rn,useHostTransitionStatus:Rn,useFormState:Rn,useActionState:Rn,useOptimistic:Rn,useMemoCache:Rn,useCacheRefresh:Rn};Gl.useEffectEvent=Rn;var gy={readContext:ci,use:gu,useCallback:function(t,i){return Pi().memoizedState=[t,i===void 0?null:i],t},useContext:ci,useEffect:Zp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,yu(4194308,4,ny.bind(null,i,t),a)},useLayoutEffect:function(t,i){return yu(4194308,4,t,i)},useInsertionEffect:function(t,i){yu(4,2,t,i)},useMemo:function(t,i){var a=Pi();i=i===void 0?null:i;var o=t();if(so){nt(!0);try{t()}finally{nt(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=Pi();if(a!==void 0){var h=a(i);if(so){nt(!0);try{a(i)}finally{nt(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=nS.bind(null,ft,t),[o.memoizedState,t]},useRef:function(t){var i=Pi();return t={current:t},i.memoizedState=t},useState:function(t){t=Fd(t);var i=t.queue,a=dy.bind(null,ft,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Qd,useDeferredValue:function(t,i){var a=Pi();return Wd(a,t,i)},useTransition:function(){var t=Fd(!1);return t=oy.bind(null,ft,t.queue,!0,!1),Pi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=ft,h=Pi();if(Lt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),on===null)throw Error(s(349));(Ct&127)!==0||Vp(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Zp(Pp.bind(null,o,d,t),[t]),o.flags|=2048,zo(9,{destroy:void 0},jp.bind(null,o,d,a,i),null),a},useId:function(){var t=Pi(),i=on.identifierPrefix;if(Lt){var a=Zs,o=Xs;a=(o&~(1<<32-et(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=fu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=$E++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Yd,useFormState:Qp,useActionState:Qp,useOptimistic:function(t){var i=Pi();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Xd.bind(null,ft,!0,a),a.dispatch=i,[t,i]},useMemoCache:Ud,useCacheRefresh:function(){return Pi().memoizedState=tS.bind(null,ft)},useEffectEvent:function(t){var i=Pi(),a={impl:t};return i.memoizedState=a,function(){if((Wt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Zd={readContext:ci,use:gu,useCallback:sy,useContext:ci,useEffect:Kd,useImperativeHandle:iy,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:ry,useReducer:pu,useRef:Xp,useState:function(){return pu(Tr)},useDebugValue:Qd,useDeferredValue:function(t,i){var a=Nn();return ay(a,Jt.memoizedState,t,i)},useTransition:function(){var t=pu(Tr)[0],i=Nn().memoizedState;return[typeof t=="boolean"?t:Hl(t),i]},useSyncExternalStore:Lp,useId:uy,useHostTransitionStatus:Yd,useFormState:Wp,useActionState:Wp,useOptimistic:function(t,i){var a=Nn();return Up(a,Jt,t,i)},useMemoCache:Ud,useCacheRefresh:hy};Zd.useEffectEvent=Jp;var py={readContext:ci,use:gu,useCallback:sy,useContext:ci,useEffect:Kd,useImperativeHandle:iy,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:ry,useReducer:Hd,useRef:Xp,useState:function(){return Hd(Tr)},useDebugValue:Qd,useDeferredValue:function(t,i){var a=Nn();return Jt===null?Wd(a,t,i):ay(a,Jt.memoizedState,t,i)},useTransition:function(){var t=Hd(Tr)[0],i=Nn().memoizedState;return[typeof t=="boolean"?t:Hl(t),i]},useSyncExternalStore:Lp,useId:uy,useHostTransitionStatus:Yd,useFormState:Yp,useActionState:Yp,useOptimistic:function(t,i){var a=Nn();return Jt!==null?Up(a,Jt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:hy};py.useEffectEvent=Jp;function Jd(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ef={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=us(),h=ea(o);h.payload=i,a!=null&&(h.callback=a),i=ta(t,h,o),i!==null&&(Qi(i,t,o),zl(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=us(),h=ea(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ta(t,h,o),i!==null&&(Qi(i,t,o),zl(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=us(),o=ea(a);o.tag=2,i!=null&&(o.callback=i),i=ta(t,o,a),i!==null&&(Qi(i,t,a),zl(i,t,a))}};function yy(t,i,a,o,h,d,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,p):i.prototype&&i.prototype.isPureReactComponent?!Dl(a,o)||!Dl(h,d):!0}function _y(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&ef.enqueueReplaceState(i,i.state,null)}function ro(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function by(t){Xc(t)}function vy(t){console.error(t)}function Ty(t){Xc(t)}function vu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Ey(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function tf(t,i,a){return a=ea(a),a.tag=3,a.payload={element:null},a.callback=function(){vu(t,i)},a}function Sy(t){return t=ea(t),t.tag=3,t}function wy(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){Ey(i,a,o)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(t.callback=function(){Ey(i,a,o),typeof h!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function iS(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Do(i,a,h,!0),a=as.current,a!==null){switch(a.tag){case 31:case 13:return ks===null?Mu():a.alternate===null&&In===0&&(In=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===ou?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),If(t,o,h)),!1;case 22:return a.flags|=65536,o===ou?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),If(t,o,h)),!1}throw Error(s(435,a.tag))}return If(t,o,h),Mu(),!1}if(Lt)return i=as.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==vd&&(t=Error(s(422),{cause:o}),Ol(As(t,a)))):(o!==vd&&(i=Error(s(423),{cause:o}),Ol(As(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=As(o,a),h=tf(t.stateNode,o,h),Dd(t,h),In!==4&&(In=2)),!1;var d=Error(s(520),{cause:o});if(d=As(d,a),Jl===null?Jl=[d]:Jl.push(d),In!==4&&(In=2),i===null)return!0;o=As(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=tf(a.stateNode,o,t),Dd(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(oa===null||!oa.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Sy(h),wy(h,t,a,o),Dd(a,h),!1}a=a.return}while(a!==null);return!1}var nf=Error(s(461)),Pn=!1;function ui(t,i,a,o){i.child=t===null?Cp(i,null,a,o):io(i,t.child,a,o)}function Ay(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var p={};for(var T in o)T!=="ref"&&(p[T]=o[T])}else p=o;return Ja(i),o=jd(t,i,a,p,d,h),T=Pd(),t!==null&&!Pn?(zd(t,i,h),Er(t,i,h)):(Lt&&T&&_d(i),i.flags|=1,ui(t,i,o,h),i.child)}function Ry(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!gd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Iy(t,i,d,o,h)):(t=tu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!hf(t,h)){var p=d.memoizedProps;if(a=a.compare,a=a!==null?a:Dl,a(p,o)&&t.ref===i.ref)return Er(t,i,h)}return i.flags|=1,t=pr(d,o),t.ref=i.ref,t.return=i,i.child=t}function Iy(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Dl(d,o)&&t.ref===i.ref)if(Pn=!1,i.pendingProps=o=d,hf(t,h))(t.flags&131072)!==0&&(Pn=!0);else return i.lanes=t.lanes,Er(t,i,h)}return sf(t,i,a,o,h)}function Cy(t,i,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return ky(t,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ru(i,d!==null?d.cachePool:null),d!==null?Dp(i,d):xd(),Mp(i);else return o=i.lanes=536870912,ky(t,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(ru(i,d.cachePool),Dp(i,d),ia(),i.memoizedState=null):(t!==null&&ru(i,null),xd(),ia());return ui(t,i,h,a),i.child}function Kl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function ky(t,i,a,o,h){var d=Id();return d=d===null?null:{parent:Vn._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&ru(i,null),xd(),Mp(i),t!==null&&Do(t,i,o,!0),i.childLanes=h,null}function Tu(t,i){return i=Su({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Ny(t,i,a){return io(i,t.child,null,a),t=Tu(i,i.pendingProps),t.flags|=2,os(i),i.memoizedState=null,t}function sS(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Lt){if(o.mode==="hidden")return t=Tu(i,o),i.lanes=536870912,Kl(null,t);if(Ld(i),(t=fn)?(t=q_(t,Cs),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:$r!==null?{id:Xs,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},a=fp(t),a.return=i,i.child=a,li=i,fn=null)):t=null,t===null)throw Xr(i);return i.lanes=536870912,null}return Tu(i,o)}var d=t.memoizedState;if(d!==null){var p=d.dehydrated;if(Ld(i),h)if(i.flags&256)i.flags&=-257,i=Ny(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Pn||Do(t,i,a,!1),h=(a&t.childLanes)!==0,Pn||h){if(o=on,o!==null&&(p=Ji(o,a),p!==0&&p!==d.retryLane))throw d.retryLane=p,$a(t,p),Qi(o,t,p),nf;Mu(),i=Ny(t,i,a)}else t=d.treeContext,fn=Ns(p.nextSibling),li=i,Lt=!0,Yr=null,Cs=!1,t!==null&&pp(i,t),i=Tu(i,o),i.flags|=4096;return i}return t=pr(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Eu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function sf(t,i,a,o,h){return Ja(i),a=jd(t,i,a,o,void 0,h),o=Pd(),t!==null&&!Pn?(zd(t,i,h),Er(t,i,h)):(Lt&&o&&_d(i),i.flags|=1,ui(t,i,a,h),i.child)}function Dy(t,i,a,o,h,d){return Ja(i),i.updateQueue=null,a=Op(i,o,a,h),xp(t),o=Pd(),t!==null&&!Pn?(zd(t,i,d),Er(t,i,d)):(Lt&&o&&_d(i),i.flags|=1,ui(t,i,a,d),i.child)}function My(t,i,a,o,h){if(Ja(i),i.stateNode===null){var d=Io,p=a.contextType;typeof p=="object"&&p!==null&&(d=ci(p)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ef,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},kd(i),p=a.contextType,d.context=typeof p=="object"&&p!==null?ci(p):Io,d.state=i.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Jd(i,a,p,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(p=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),p!==d.state&&ef.enqueueReplaceState(d,d.state,null),Ul(i,o,d,h),Bl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,x=ro(a,T);d.props=x;var G=d.context,ee=a.contextType;p=Io,typeof ee=="object"&&ee!==null&&(p=ci(ee));var oe=a.getDerivedStateFromProps;ee=typeof oe=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,ee||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||G!==p)&&_y(i,d,o,p),Jr=!1;var K=i.memoizedState;d.state=K,Ul(i,o,d,h),Bl(),G=i.memoizedState,T||K!==G||Jr?(typeof oe=="function"&&(Jd(i,a,oe,o),G=i.memoizedState),(x=Jr||yy(i,a,x,o,K,G,p))?(ee||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=G),d.props=o,d.state=G,d.context=p,o=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Nd(t,i),p=i.memoizedProps,ee=ro(a,p),d.props=ee,oe=i.pendingProps,K=d.context,G=a.contextType,x=Io,typeof G=="object"&&G!==null&&(x=ci(G)),T=a.getDerivedStateFromProps,(G=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==oe||K!==x)&&_y(i,d,o,x),Jr=!1,K=i.memoizedState,d.state=K,Ul(i,o,d,h),Bl();var Z=i.memoizedState;p!==oe||K!==Z||Jr||t!==null&&t.dependencies!==null&&iu(t.dependencies)?(typeof T=="function"&&(Jd(i,a,T,o),Z=i.memoizedState),(ee=Jr||yy(i,a,ee,o,K,Z,x)||t!==null&&t.dependencies!==null&&iu(t.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Z,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Z,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===t.memoizedProps&&K===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&K===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=Z),d.props=o,d.state=Z,d.context=x,o=ee):(typeof d.componentDidUpdate!="function"||p===t.memoizedProps&&K===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&K===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,Eu(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=io(i,t.child,null,h),i.child=io(i,null,a,h)):ui(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Er(t,i,h),t}function xy(t,i,a,o){return Xa(),i.flags|=256,ui(t,i,a,o),i.child}var rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function af(t){return{baseLanes:t,cachePool:Ep()}}function of(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=cs),t}function Oy(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,p;if((p=d)||(p=t!==null&&t.memoizedState===null?!1:(kn.current&2)!==0),p&&(h=!0,i.flags&=-129),p=(i.flags&32)!==0,i.flags&=-33,t===null){if(Lt){if(h?na(i):ia(),(t=fn)?(t=q_(t,Cs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:$r!==null?{id:Xs,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},a=fp(t),a.return=i,i.child=a,li=i,fn=null)):t=null,t===null)throw Xr(i);return Hf(t)?i.lanes=32:i.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(ia(),h=i.mode,T=Su({mode:"hidden",children:T},h),o=Ya(o,h,a,null),T.return=i,o.return=i,T.sibling=o,i.child=T,o=i.child,o.memoizedState=af(a),o.childLanes=of(t,p,a),i.memoizedState=rf,Kl(null,o)):(na(i),lf(i,T))}var x=t.memoizedState;if(x!==null&&(T=x.dehydrated,T!==null)){if(d)i.flags&256?(na(i),i.flags&=-257,i=cf(t,i,a)):i.memoizedState!==null?(ia(),i.child=t.child,i.flags|=128,i=null):(ia(),T=o.fallback,h=i.mode,o=Su({mode:"visible",children:o.children},h),T=Ya(T,h,a,null),T.flags|=2,o.return=i,T.return=i,o.sibling=T,i.child=o,io(i,t.child,null,a),o=i.child,o.memoizedState=af(a),o.childLanes=of(t,p,a),i.memoizedState=rf,i=Kl(null,o));else if(na(i),Hf(T)){if(p=T.nextSibling&&T.nextSibling.dataset,p)var G=p.dgst;p=G,o=Error(s(419)),o.stack="",o.digest=p,Ol({value:o,source:null,stack:null}),i=cf(t,i,a)}else if(Pn||Do(t,i,a,!1),p=(a&t.childLanes)!==0,Pn||p){if(p=on,p!==null&&(o=Ji(p,a),o!==0&&o!==x.retryLane))throw x.retryLane=o,$a(t,o),Qi(p,t,o),nf;qf(T)||Mu(),i=cf(t,i,a)}else qf(T)?(i.flags|=192,i.child=t.child,i=null):(t=x.treeContext,fn=Ns(T.nextSibling),li=i,Lt=!0,Yr=null,Cs=!1,t!==null&&pp(i,t),i=lf(i,o.children),i.flags|=4096);return i}return h?(ia(),T=o.fallback,h=i.mode,x=t.child,G=x.sibling,o=pr(x,{mode:"hidden",children:o.children}),o.subtreeFlags=x.subtreeFlags&65011712,G!==null?T=pr(G,T):(T=Ya(T,h,a,null),T.flags|=2),T.return=i,o.return=i,o.sibling=T,i.child=o,Kl(null,o),o=i.child,T=t.child.memoizedState,T===null?T=af(a):(h=T.cachePool,h!==null?(x=Vn._currentValue,h=h.parent!==x?{parent:x,pool:x}:h):h=Ep(),T={baseLanes:T.baseLanes|a,cachePool:h}),o.memoizedState=T,o.childLanes=of(t,p,a),i.memoizedState=rf,Kl(t.child,o)):(na(i),a=t.child,t=a.sibling,a=pr(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(p=i.deletions,p===null?(i.deletions=[t],i.flags|=16):p.push(t)),i.child=a,i.memoizedState=null,a)}function lf(t,i){return i=Su({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Su(t,i){return t=rs(22,t,null,i),t.lanes=0,t}function cf(t,i,a){return io(i,t.child,null,a),t=lf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ly(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),Sd(t.return,i,a)}function uf(t,i,a,o,h,d){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=a,p.tailMode=h,p.treeForkCount=d)}function Vy(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var p=kn.current,T=(p&2)!==0;if(T?(p=p&1|2,i.flags|=128):p&=1,pe(kn,p),ui(t,i,o,a),o=Lt?xl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ly(t,a,i);else if(t.tag===19)Ly(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&hu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),uf(i,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&hu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}uf(i,!0,a,null,d,o);break;case"together":uf(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function Er(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),aa|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Do(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=pr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=pr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function hf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&iu(t)))}function rS(t,i,a){switch(i.tag){case 3:$t(i,i.stateNode.containerInfo),Zr(i,Vn,t.memoizedState.cache),Xa();break;case 27:case 5:pn(i);break;case 4:$t(i,i.stateNode.containerInfo);break;case 10:Zr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ld(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(na(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Oy(t,i,a):(na(i),t=Er(t,i,a),t!==null?t.sibling:null);na(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Do(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Vy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),pe(kn,kn.current),o)break;return null;case 22:return i.lanes=0,Cy(t,i,a,i.pendingProps);case 24:Zr(i,Vn,t.memoizedState.cache)}return Er(t,i,a)}function jy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Pn=!0;else{if(!hf(t,a)&&(i.flags&128)===0)return Pn=!1,rS(t,i,a);Pn=(t.flags&131072)!==0}else Pn=!1,Lt&&(i.flags&1048576)!==0&&gp(i,xl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=to(i.elementType),i.type=t,typeof t=="function")gd(t)?(o=ro(t,o),i.tag=1,i=My(null,i,t,o,a)):(i.tag=0,i=sf(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===mt){i.tag=11,i=Ay(null,i,t,o,a);break e}else if(h===D){i.tag=14,i=Ry(null,i,t,o,a);break e}}throw i=Kt(t)||t,Error(s(306,i,""))}}return i;case 0:return sf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ro(o,i.pendingProps),My(t,i,o,h,a);case 3:e:{if($t(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Nd(t,i),Ul(i,o,null,a);var p=i.memoizedState;if(o=p.cache,Zr(i,Vn,o),o!==d.cache&&wd(i,[Vn],a,!0),Bl(),o=p.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:p.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=xy(t,i,o,a);break e}else if(o!==h){h=As(Error(s(424)),i),Ol(h),i=xy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(fn=Ns(t.firstChild),li=i,Lt=!0,Yr=null,Cs=!0,a=Cp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Xa(),o===h){i=Er(t,i,a);break e}ui(t,i,o,a)}i=i.child}return i;case 26:return Eu(t,i),t===null?(a=W_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Lt||(a=i.type,t=i.pendingProps,o=zu(at.current).createElement(a),o[An]=i,o[xn]=t,hi(o,a,t),vn(o),i.stateNode=o):i.memoizedState=W_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return pn(i),t===null&&Lt&&(o=i.stateNode=G_(i.type,i.pendingProps,at.current),li=i,Cs=!0,h=fn,ha(i.type)?(Ff=h,fn=Ns(o.firstChild)):fn=h),ui(t,i,i.pendingProps.children,a),Eu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Lt&&((h=o=fn)&&(o=LS(o,i.type,i.pendingProps,Cs),o!==null?(i.stateNode=o,li=i,fn=Ns(o.firstChild),Cs=!1,h=!0):h=!1),h||Xr(i)),pn(i),h=i.type,d=i.pendingProps,p=t!==null?t.memoizedProps:null,o=d.children,zf(h,d)?o=null:p!==null&&zf(h,p)&&(i.flags|=32),i.memoizedState!==null&&(h=jd(t,i,YE,null,null,a),oc._currentValue=h),Eu(t,i),ui(t,i,o,a),i.child;case 6:return t===null&&Lt&&((t=a=fn)&&(a=VS(a,i.pendingProps,Cs),a!==null?(i.stateNode=a,li=i,fn=null,t=!0):t=!1),t||Xr(i)),null;case 13:return Oy(t,i,a);case 4:return $t(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=io(i,null,o,a):ui(t,i,o,a),i.child;case 11:return Ay(t,i,i.type,i.pendingProps,a);case 7:return ui(t,i,i.pendingProps,a),i.child;case 8:return ui(t,i,i.pendingProps.children,a),i.child;case 12:return ui(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Zr(i,i.type,o.value),ui(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ja(i),h=ci(h),o=o(h),i.flags|=1,ui(t,i,o,a),i.child;case 14:return Ry(t,i,i.type,i.pendingProps,a);case 15:return Iy(t,i,i.type,i.pendingProps,a);case 19:return Vy(t,i,a);case 31:return sS(t,i,a);case 22:return Cy(t,i,a,i.pendingProps);case 24:return Ja(i),o=ci(Vn),t===null?(h=Id(),h===null&&(h=on,d=Ad(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},kd(i),Zr(i,Vn,h)):((t.lanes&a)!==0&&(Nd(t,i),Ul(i,null,null,a),Bl()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Zr(i,Vn,o)):(o=d.cache,Zr(i,Vn,o),o!==h.cache&&wd(i,[Vn],a,!0))),ui(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Sr(t){t.flags|=4}function df(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(u_())t.flags|=8192;else throw no=ou,Cd}else t.flags&=-16777217}function Py(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!J_(i))if(u_())t.flags|=8192;else throw no=ou,Cd}function wu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Hr():536870912,t.lanes|=i,Ho|=i)}function Ql(t,i){if(!Lt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function mn(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function aS(t,i,a){var o=i.pendingProps;switch(bd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(i),null;case 1:return mn(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),br(Vn),Xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(No(i)?Sr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Td())),mn(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(Sr(i),d!==null?(mn(i),Py(i,d)):(mn(i),df(i,h,null,o,a))):d?d!==t.memoizedState?(Sr(i),mn(i),Py(i,d)):(mn(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&Sr(i),mn(i),df(i,h,t,o,a)),null;case 27:if(gs(i),a=at.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Sr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return mn(i),null}t=ve.current,No(i)?yp(i):(t=G_(h,o,a),i.stateNode=t,Sr(i))}return mn(i),null;case 5:if(gs(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Sr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return mn(i),null}if(d=ve.current,No(i))yp(i);else{var p=zu(at.current);switch(d){case 1:d=p.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=p.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=p.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?p.createElement("select",{is:o.is}):p.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?p.createElement(h,{is:o.is}):p.createElement(h)}}d[An]=i,d[xn]=o;e:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)d.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break e;for(;p.sibling===null;){if(p.return===null||p.return===i)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=d;e:switch(hi(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Sr(i)}}return mn(i),df(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&Sr(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=at.current,No(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=li,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[An]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||O_(t.nodeValue,a)),t||Xr(i,!0)}else t=zu(t).createTextNode(o),t[An]=i,i.stateNode=t}return mn(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=No(i),a!==null){if(t===null){if(!o)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[An]=i}else Xa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mn(i),t=!1}else a=Td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(os(i),i):(os(i),null);if((i.flags&128)!==0)throw Error(s(558))}return mn(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=No(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[An]=i}else Xa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mn(i),h=!1}else h=Td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(os(i),i):(os(i),null)}return os(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),wu(i,i.updateQueue),mn(i),null);case 4:return Xe(),t===null&&Of(i.stateNode.containerInfo),mn(i),null;case 10:return br(i.type),mn(i),null;case 19:if(ie(kn),o=i.memoizedState,o===null)return mn(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)Ql(o,!1);else{if(In!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=hu(t),d!==null){for(i.flags|=128,Ql(o,!1),t=d.updateQueue,i.updateQueue=t,wu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)dp(a,t),a=a.sibling;return pe(kn,kn.current&1|2),Lt&&yr(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&Sn()>ku&&(i.flags|=128,h=!0,Ql(o,!1),i.lanes=4194304)}else{if(!h)if(t=hu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,wu(i,t),Ql(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Lt)return mn(i),null}else 2*Sn()-o.renderingStartTime>ku&&a!==536870912&&(i.flags|=128,h=!0,Ql(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(t=o.last,t!==null?t.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Sn(),t.sibling=null,a=kn.current,pe(kn,h?a&1|2:a&1),Lt&&yr(i,o.treeForkCount),t):(mn(i),null);case 22:case 23:return os(i),Od(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(mn(i),i.subtreeFlags&6&&(i.flags|=8192)):mn(i),a=i.updateQueue,a!==null&&wu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&ie(eo),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),br(Vn),mn(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function oS(t,i){switch(bd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return br(Vn),Xe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return gs(i),null;case 31:if(i.memoizedState!==null){if(os(i),i.alternate===null)throw Error(s(340));Xa()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(os(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Xa()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ie(kn),null;case 4:return Xe(),null;case 10:return br(i.type),null;case 22:case 23:return os(i),Od(),t!==null&&ie(eo),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return br(Vn),null;case 25:return null;default:return null}}function zy(t,i){switch(bd(i),i.tag){case 3:br(Vn),Xe();break;case 26:case 27:case 5:gs(i);break;case 4:Xe();break;case 31:i.memoizedState!==null&&os(i);break;case 13:os(i);break;case 19:ie(kn);break;case 10:br(i.type);break;case 22:case 23:os(i),Od(),t!==null&&ie(eo);break;case 24:br(Vn)}}function Wl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,p=a.inst;o=d(),p.destroy=o}a=a.next}while(a!==h)}}catch(T){Zt(i,i.return,T)}}function sa(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var p=o.inst,T=p.destroy;if(T!==void 0){p.destroy=void 0,h=i;var x=a,G=T;try{G()}catch(ee){Zt(h,x,ee)}}}o=o.next}while(o!==d)}}catch(ee){Zt(i,i.return,ee)}}function By(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Np(i,a)}catch(o){Zt(t,t.return,o)}}}function Uy(t,i,a){a.props=ro(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Zt(t,i,o)}}function $l(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Zt(t,i,h)}}function Js(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Zt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Zt(t,i,h)}else a.current=null}function qy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Zt(t,t.return,h)}}function ff(t,i,a){try{var o=t.stateNode;kS(o,t.type,a,i),o[xn]=i}catch(h){Zt(t,t.return,h)}}function Hy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ha(t.type)||t.tag===4}function mf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ha(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gf(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Y));else if(o!==4&&(o===27&&ha(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(gf(t,i,a),t=t.sibling;t!==null;)gf(t,i,a),t=t.sibling}function Au(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&ha(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Au(t,i,a),t=t.sibling;t!==null;)Au(t,i,a),t=t.sibling}function Fy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);hi(i,o,a),i[An]=t,i[xn]=a}catch(d){Zt(t,t.return,d)}}var wr=!1,zn=!1,pf=!1,Gy=typeof WeakSet=="function"?WeakSet:Set,ni=null;function lS(t,i){if(t=t.containerInfo,jf=Ku,t=ip(t),ld(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var p=0,T=-1,x=-1,G=0,ee=0,oe=t,K=null;t:for(;;){for(var Z;oe!==a||h!==0&&oe.nodeType!==3||(T=p+h),oe!==d||o!==0&&oe.nodeType!==3||(x=p+o),oe.nodeType===3&&(p+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)K=oe,oe=Z;for(;;){if(oe===t)break t;if(K===a&&++G===h&&(T=p),K===d&&++ee===o&&(x=p),(Z=oe.nextSibling)!==null)break;oe=K,K=oe.parentNode}oe=Z}a=T===-1||x===-1?null:{start:T,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Pf={focusedElem:t,selectionRange:a},Ku=!1,ni=i;ni!==null;)if(i=ni,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,ni=t;else for(;ni!==null;){switch(i=ni,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Ce=ro(a.type,h);t=o.getSnapshotBeforeUpdate(Ce,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ze){Zt(a,a.return,Ze)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Uf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Uf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,ni=t;break}ni=i.return}}function Ky(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Rr(t,a),o&4&&Wl(5,a);break;case 1:if(Rr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(p){Zt(a,a.return,p)}else{var h=ro(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(p){Zt(a,a.return,p)}}o&64&&By(a),o&512&&$l(a,a.return);break;case 3:if(Rr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Np(t,i)}catch(p){Zt(a,a.return,p)}}break;case 27:i===null&&o&4&&Fy(a);case 26:case 5:Rr(t,a),i===null&&o&4&&qy(a),o&512&&$l(a,a.return);break;case 12:Rr(t,a);break;case 31:Rr(t,a),o&4&&$y(t,a);break;case 13:Rr(t,a),o&4&&Yy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=yS.bind(null,a),jS(t,a))));break;case 22:if(o=a.memoizedState!==null||wr,!o){i=i!==null&&i.memoizedState!==null||zn,h=wr;var d=zn;wr=o,(zn=i)&&!d?Ir(t,a,(a.subtreeFlags&8772)!==0):Rr(t,a),wr=h,zn=d}break;case 30:break;default:Rr(t,a)}}function Qy(t){var i=t.alternate;i!==null&&(t.alternate=null,Qy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Gr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var bn=null,Hi=!1;function Ar(t,i,a){for(a=a.child;a!==null;)Wy(t,i,a),a=a.sibling}function Wy(t,i,a){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(Oe,a)}catch{}switch(a.tag){case 26:zn||Js(a,i),Ar(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zn||Js(a,i);var o=bn,h=Hi;ha(a.type)&&(bn=a.stateNode,Hi=!1),Ar(t,i,a),sc(a.stateNode),bn=o,Hi=h;break;case 5:zn||Js(a,i);case 6:if(o=bn,h=Hi,bn=null,Ar(t,i,a),bn=o,Hi=h,bn!==null)if(Hi)try{(bn.nodeType===9?bn.body:bn.nodeName==="HTML"?bn.ownerDocument.body:bn).removeChild(a.stateNode)}catch(d){Zt(a,i,d)}else try{bn.removeChild(a.stateNode)}catch(d){Zt(a,i,d)}break;case 18:bn!==null&&(Hi?(t=bn,B_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Xo(t)):B_(bn,a.stateNode));break;case 4:o=bn,h=Hi,bn=a.stateNode.containerInfo,Hi=!0,Ar(t,i,a),bn=o,Hi=h;break;case 0:case 11:case 14:case 15:sa(2,a,i),zn||sa(4,a,i),Ar(t,i,a);break;case 1:zn||(Js(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Uy(a,i,o)),Ar(t,i,a);break;case 21:Ar(t,i,a);break;case 22:zn=(o=zn)||a.memoizedState!==null,Ar(t,i,a),zn=o;break;default:Ar(t,i,a)}}function $y(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Xo(t)}catch(a){Zt(i,i.return,a)}}}function Yy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Xo(t)}catch(a){Zt(i,i.return,a)}}function cS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Gy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Gy),i;default:throw Error(s(435,t.tag))}}function Ru(t,i){var a=cS(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=_S.bind(null,t,o);o.then(h,h)}})}function Fi(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,p=i,T=p;e:for(;T!==null;){switch(T.tag){case 27:if(ha(T.type)){bn=T.stateNode,Hi=!1;break e}break;case 5:bn=T.stateNode,Hi=!1;break e;case 3:case 4:bn=T.stateNode.containerInfo,Hi=!0;break e}T=T.return}if(bn===null)throw Error(s(160));Wy(d,p,h),bn=null,Hi=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Xy(i,t),i=i.sibling}var zs=null;function Xy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fi(i,t),Gi(t),o&4&&(sa(3,t,t.return),Wl(3,t),sa(5,t,t.return));break;case 1:Fi(i,t),Gi(t),o&512&&(zn||a===null||Js(a,a.return)),o&64&&wr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=zs;if(Fi(i,t),Gi(t),o&512&&(zn||a===null||Js(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ns]||d[An]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),hi(d,o,a),d[An]=t,vn(d),o=d;break e;case"link":var p=X_("link","href",h).get(o+(a.href||""));if(p){for(var T=0;T<p.length;T++)if(d=p[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(T,1);break t}}d=h.createElement(o),hi(d,o,a),h.head.appendChild(d);break;case"meta":if(p=X_("meta","content",h).get(o+(a.content||""))){for(T=0;T<p.length;T++)if(d=p[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(T,1);break t}}d=h.createElement(o),hi(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[An]=t,vn(d),o=d}t.stateNode=o}else Z_(h,t.type,t.stateNode);else t.stateNode=Y_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?Z_(h,t.type,t.stateNode):Y_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&ff(t,t.memoizedProps,a.memoizedProps)}break;case 27:Fi(i,t),Gi(t),o&512&&(zn||a===null||Js(a,a.return)),a!==null&&o&4&&ff(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Fi(i,t),Gi(t),o&512&&(zn||a===null||Js(a,a.return)),t.flags&32){h=t.stateNode;try{_i(h,"")}catch(Ce){Zt(t,t.return,Ce)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,ff(t,h,a!==null?a.memoizedProps:h)),o&1024&&(pf=!0);break;case 6:if(Fi(i,t),Gi(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(Ce){Zt(t,t.return,Ce)}}break;case 3:if(qu=null,h=zs,zs=Bu(i.containerInfo),Fi(i,t),zs=h,Gi(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Xo(i.containerInfo)}catch(Ce){Zt(t,t.return,Ce)}pf&&(pf=!1,Zy(t));break;case 4:o=zs,zs=Bu(t.stateNode.containerInfo),Fi(i,t),Gi(t),zs=o;break;case 12:Fi(i,t),Gi(t);break;case 31:Fi(i,t),Gi(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 13:Fi(i,t),Gi(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Cu=Sn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 22:h=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,G=wr,ee=zn;if(wr=G||h,zn=ee||x,Fi(i,t),zn=ee,wr=G,Gi(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||x||wr||zn||ao(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,h)p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{T=x.stateNode;var oe=x.memoizedProps.style,K=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ce){Zt(x,x.return,Ce)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(Ce){Zt(x,x.return,Ce)}}}else if(i.tag===18){if(a===null){x=i;try{var Z=x.stateNode;h?U_(Z,!0):U_(x.stateNode,!1)}catch(Ce){Zt(x,x.return,Ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Ru(t,a))));break;case 19:Fi(i,t),Gi(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 30:break;case 21:break;default:Fi(i,t),Gi(t)}}function Gi(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Hy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=mf(t);Au(t,d,h);break;case 5:var p=a.stateNode;a.flags&32&&(_i(p,""),a.flags&=-33);var T=mf(t);Au(t,T,p);break;case 3:case 4:var x=a.stateNode.containerInfo,G=mf(t);gf(t,G,x);break;default:throw Error(s(161))}}catch(ee){Zt(t,t.return,ee)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Zy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Zy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Rr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ky(t,i.alternate,i),i=i.sibling}function ao(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:sa(4,i,i.return),ao(i);break;case 1:Js(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Uy(i,i.return,a),ao(i);break;case 27:sc(i.stateNode);case 26:case 5:Js(i,i.return),ao(i);break;case 22:i.memoizedState===null&&ao(i);break;case 30:ao(i);break;default:ao(i)}t=t.sibling}}function Ir(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,p=d.flags;switch(d.tag){case 0:case 11:case 15:Ir(h,d,a),Wl(4,d);break;case 1:if(Ir(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){Zt(o,o.return,G)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)kp(x[h],T)}catch(G){Zt(o,o.return,G)}}a&&p&64&&By(d),$l(d,d.return);break;case 27:Fy(d);case 26:case 5:Ir(h,d,a),a&&o===null&&p&4&&qy(d),$l(d,d.return);break;case 12:Ir(h,d,a);break;case 31:Ir(h,d,a),a&&p&4&&$y(h,d);break;case 13:Ir(h,d,a),a&&p&4&&Yy(h,d);break;case 22:d.memoizedState===null&&Ir(h,d,a),$l(d,d.return);break;case 30:break;default:Ir(h,d,a)}i=i.sibling}}function yf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ll(a))}function _f(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ll(t))}function Bs(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Jy(t,i,a,o),i=i.sibling}function Jy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Bs(t,i,a,o),h&2048&&Wl(9,i);break;case 1:Bs(t,i,a,o);break;case 3:Bs(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ll(t)));break;case 12:if(h&2048){Bs(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,p=d.id,T=d.onPostCommit;typeof T=="function"&&T(p,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){Zt(i,i.return,x)}}else Bs(t,i,a,o);break;case 31:Bs(t,i,a,o);break;case 13:Bs(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,p=i.alternate,i.memoizedState!==null?d._visibility&2?Bs(t,i,a,o):Yl(t,i):d._visibility&2?Bs(t,i,a,o):(d._visibility|=2,Bo(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&yf(p,i);break;case 24:Bs(t,i,a,o),h&2048&&_f(i.alternate,i);break;default:Bs(t,i,a,o)}}function Bo(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,p=i,T=a,x=o,G=p.flags;switch(p.tag){case 0:case 11:case 15:Bo(d,p,T,x,h),Wl(8,p);break;case 23:break;case 22:var ee=p.stateNode;p.memoizedState!==null?ee._visibility&2?Bo(d,p,T,x,h):Yl(d,p):(ee._visibility|=2,Bo(d,p,T,x,h)),h&&G&2048&&yf(p.alternate,p);break;case 24:Bo(d,p,T,x,h),h&&G&2048&&_f(p.alternate,p);break;default:Bo(d,p,T,x,h)}i=i.sibling}}function Yl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:Yl(a,o),h&2048&&yf(o.alternate,o);break;case 24:Yl(a,o),h&2048&&_f(o.alternate,o);break;default:Yl(a,o)}i=i.sibling}}var Xl=8192;function Uo(t,i,a){if(t.subtreeFlags&Xl)for(t=t.child;t!==null;)e_(t,i,a),t=t.sibling}function e_(t,i,a){switch(t.tag){case 26:Uo(t,i,a),t.flags&Xl&&t.memoizedState!==null&&$S(a,zs,t.memoizedState,t.memoizedProps);break;case 5:Uo(t,i,a);break;case 3:case 4:var o=zs;zs=Bu(t.stateNode.containerInfo),Uo(t,i,a),zs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Xl,Xl=16777216,Uo(t,i,a),Xl=o):Uo(t,i,a));break;default:Uo(t,i,a)}}function t_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Zl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];ni=o,i_(o,t)}t_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)n_(t),t=t.sibling}function n_(t){switch(t.tag){case 0:case 11:case 15:Zl(t),t.flags&2048&&sa(9,t,t.return);break;case 3:Zl(t);break;case 12:Zl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Iu(t)):Zl(t);break;default:Zl(t)}}function Iu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];ni=o,i_(o,t)}t_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:sa(8,i,i.return),Iu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Iu(i));break;default:Iu(i)}t=t.sibling}}function i_(t,i){for(;ni!==null;){var a=ni;switch(a.tag){case 0:case 11:case 15:sa(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ll(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ni=o;else e:for(a=t;ni!==null;){o=ni;var h=o.sibling,d=o.return;if(Qy(o),o===a){ni=null;break e}if(h!==null){h.return=d,ni=h;break e}ni=d}}}var uS={getCacheForType:function(t){var i=ci(Vn),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return ci(Vn).controller.signal}},hS=typeof WeakMap=="function"?WeakMap:Map,Wt=0,on=null,Et=null,Ct=0,Xt=0,ls=null,ra=!1,qo=!1,bf=!1,Cr=0,In=0,aa=0,oo=0,vf=0,cs=0,Ho=0,Jl=null,Ki=null,Tf=!1,Cu=0,s_=0,ku=1/0,Nu=null,oa=null,Xn=0,la=null,Fo=null,kr=0,Ef=0,Sf=null,r_=null,ec=0,wf=null;function us(){return(Wt&2)!==0&&Ct!==0?Ct&-Ct:J.T!==null?Nf():Fr()}function a_(){if(cs===0)if((Ct&536870912)===0||Lt){var t=Ks;Ks<<=1,(Ks&3932160)===0&&(Ks=262144),cs=t}else cs=536870912;return t=as.current,t!==null&&(t.flags|=32),cs}function Qi(t,i,a){(t===on&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)&&(Go(t,0),ca(t,Ct,cs,!1)),Ls(t,a),((Wt&2)===0||t!==on)&&(t===on&&((Wt&2)===0&&(oo|=a),In===4&&ca(t,Ct,cs,!1)),er(t))}function o_(t,i,a){if((Wt&6)!==0)throw Error(s(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||wn(t,i),h=o?mS(t,i):Rf(t,i,!0),d=o;do{if(h===0){qo&&!o&&ca(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!dS(a)){h=Rf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var p=0;else p=t.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){i=p;e:{var T=t;h=Jl;var x=T.current.memoizedState.isDehydrated;if(x&&(Go(T,p).flags|=256),p=Rf(T,p,!1),p!==2){if(bf&&!x){T.errorRecoveryDisabledLanes|=d,oo|=d,h=4;break e}d=Ki,Ki=h,d!==null&&(Ki===null?Ki=d:Ki.push.apply(Ki,d))}h=p}if(d=!1,h!==2)continue}}if(h===1){Go(t,0),ca(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ca(o,i,cs,!ra);break e;case 2:Ki=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Cu+300-Sn(),10<h)){if(ca(o,i,cs,!ra),Kn(o,0,!0)!==0)break e;kr=i,o.timeoutHandle=P_(l_.bind(null,o,a,Ki,Nu,Tf,i,cs,oo,Ho,ra,d,"Throttled",-0,0),h);break e}l_(o,a,Ki,Nu,Tf,i,cs,oo,Ho,ra,d,null,-0,0)}}break}while(!0);er(t)}function l_(t,i,a,o,h,d,p,T,x,G,ee,oe,K,Z){if(t.timeoutHandle=-1,oe=i.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Y},e_(i,d,oe);var Ce=(d&62914560)===d?Cu-Sn():(d&4194048)===d?s_-Sn():0;if(Ce=YS(oe,Ce),Ce!==null){kr=d,t.cancelPendingCommit=Ce(p_.bind(null,t,i,d,a,o,h,p,T,x,ee,oe,null,K,Z)),ca(t,d,p,!G);return}}p_(t,i,d,a,o,h,p,T,x)}function dS(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!ss(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ca(t,i,a,o){i&=~vf,i&=~oo,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-et(h),p=1<<d;o[d]=-1,h&=~p}a!==0&&Di(t,a,i)}function Du(){return(Wt&6)===0?(tc(0),!1):!0}function Af(){if(Et!==null){if(Xt===0)var t=Et.return;else t=Et,_r=Za=null,Bd(t),Lo=null,jl=0,t=Et;for(;t!==null;)zy(t.alternate,t),t=t.return;Et=null}}function Go(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,MS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),kr=0,Af(),on=t,Et=a=pr(t.current,null),Ct=i,Xt=0,ls=null,ra=!1,qo=wn(t,i),bf=!1,Ho=cs=vf=oo=aa=In=0,Ki=Jl=null,Tf=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-et(o),d=1<<h;i|=t[h],o&=~d}return Cr=i,Zc(),a}function c_(t,i){ft=null,J.H=Gl,i===Oo||i===au?(i=Ap(),Xt=3):i===Cd?(i=Ap(),Xt=4):Xt=i===nf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ls=i,Et===null&&(In=1,vu(t,As(i,t.current)))}function u_(){var t=as.current;return t===null?!0:(Ct&4194048)===Ct?ks===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?t===ks:!1}function h_(){var t=J.H;return J.H=Gl,t===null?Gl:t}function d_(){var t=J.A;return J.A=uS,t}function Mu(){In=4,ra||(Ct&4194048)!==Ct&&as.current!==null||(qo=!0),(aa&134217727)===0&&(oo&134217727)===0||on===null||ca(on,Ct,cs,!1)}function Rf(t,i,a){var o=Wt;Wt|=2;var h=h_(),d=d_();(on!==t||Ct!==i)&&(Nu=null,Go(t,i)),i=!1;var p=In;e:do try{if(Xt!==0&&Et!==null){var T=Et,x=ls;switch(Xt){case 8:Af(),p=6;break e;case 3:case 2:case 9:case 6:as.current===null&&(i=!0);var G=Xt;if(Xt=0,ls=null,Ko(t,T,x,G),a&&qo){p=0;break e}break;default:G=Xt,Xt=0,ls=null,Ko(t,T,x,G)}}fS(),p=In;break}catch(ee){c_(t,ee)}while(!0);return i&&t.shellSuspendCounter++,_r=Za=null,Wt=o,J.H=h,J.A=d,Et===null&&(on=null,Ct=0,Zc()),p}function fS(){for(;Et!==null;)f_(Et)}function mS(t,i){var a=Wt;Wt|=2;var o=h_(),h=d_();on!==t||Ct!==i?(Nu=null,ku=Sn()+500,Go(t,i)):qo=wn(t,i);e:do try{if(Xt!==0&&Et!==null){i=Et;var d=ls;t:switch(Xt){case 1:Xt=0,ls=null,Ko(t,i,d,1);break;case 2:case 9:if(Sp(d)){Xt=0,ls=null,m_(i);break}i=function(){Xt!==2&&Xt!==9||on!==t||(Xt=7),er(t)},d.then(i,i);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:Sp(d)?(Xt=0,ls=null,m_(i)):(Xt=0,ls=null,Ko(t,i,d,7));break;case 5:var p=null;switch(Et.tag){case 26:p=Et.memoizedState;case 5:case 27:var T=Et;if(p?J_(p):T.stateNode.complete){Xt=0,ls=null;var x=T.sibling;if(x!==null)Et=x;else{var G=T.return;G!==null?(Et=G,xu(G)):Et=null}break t}}Xt=0,ls=null,Ko(t,i,d,5);break;case 6:Xt=0,ls=null,Ko(t,i,d,6);break;case 8:Af(),In=6;break e;default:throw Error(s(462))}}gS();break}catch(ee){c_(t,ee)}while(!0);return _r=Za=null,J.H=o,J.A=h,Wt=a,Et!==null?0:(on=null,Ct=0,Zc(),In)}function gS(){for(;Et!==null&&!za();)f_(Et)}function f_(t){var i=jy(t.alternate,t,Cr);t.memoizedProps=t.pendingProps,i===null?xu(t):Et=i}function m_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Dy(a,i,i.pendingProps,i.type,void 0,Ct);break;case 11:i=Dy(a,i,i.pendingProps,i.type.render,i.ref,Ct);break;case 5:Bd(i);default:zy(a,i),i=Et=dp(i,Cr),i=jy(a,i,Cr)}t.memoizedProps=t.pendingProps,i===null?xu(t):Et=i}function Ko(t,i,a,o){_r=Za=null,Bd(i),Lo=null,jl=0;var h=i.return;try{if(iS(t,h,i,a,Ct)){In=1,vu(t,As(a,t.current)),Et=null;return}}catch(d){if(h!==null)throw Et=h,d;In=1,vu(t,As(a,t.current)),Et=null;return}i.flags&32768?(Lt||o===1?t=!0:qo||(Ct&536870912)!==0?t=!1:(ra=t=!0,(o===2||o===9||o===3||o===6)&&(o=as.current,o!==null&&o.tag===13&&(o.flags|=16384))),g_(i,t)):xu(i)}function xu(t){var i=t;do{if((i.flags&32768)!==0){g_(i,ra);return}t=i.return;var a=aS(i.alternate,i,Cr);if(a!==null){Et=a;return}if(i=i.sibling,i!==null){Et=i;return}Et=i=t}while(i!==null);In===0&&(In=5)}function g_(t,i){do{var a=oS(t.alternate,t);if(a!==null){a.flags&=32767,Et=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Et=t;return}Et=t=a}while(t!==null);In=6,Et=null}function p_(t,i,a,o,h,d,p,T,x){t.cancelPendingCommit=null;do Ou();while(Xn!==0);if((Wt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=fd,Cl(t,a,d,p,T,x),t===on&&(Et=on=null,Ct=0),Fo=i,la=t,kr=a,Ef=d,Sf=h,r_=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,bS(Ci,function(){return T_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=J.T,J.T=null,h=_e.p,_e.p=2,p=Wt,Wt|=4;try{lS(t,i,a)}finally{Wt=p,_e.p=h,J.T=o}}Xn=1,y_(),__(),b_()}}function y_(){if(Xn===1){Xn=0;var t=la,i=Fo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var o=_e.p;_e.p=2;var h=Wt;Wt|=4;try{Xy(i,t);var d=Pf,p=ip(t.containerInfo),T=d.focusedElem,x=d.selectionRange;if(p!==T&&T&&T.ownerDocument&&np(T.ownerDocument.documentElement,T)){if(x!==null&&ld(T)){var G=x.start,ee=x.end;if(ee===void 0&&(ee=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(ee,T.value.length);else{var oe=T.ownerDocument||document,K=oe&&oe.defaultView||window;if(K.getSelection){var Z=K.getSelection(),Ce=T.textContent.length,Ze=Math.min(x.start,Ce),tn=x.end===void 0?Ze:Math.min(x.end,Ce);!Z.extend&&Ze>tn&&(p=tn,tn=Ze,Ze=p);var q=tp(T,Ze),P=tp(T,tn);if(q&&P&&(Z.rangeCount!==1||Z.anchorNode!==q.node||Z.anchorOffset!==q.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var F=oe.createRange();F.setStart(q.node,q.offset),Z.removeAllRanges(),Ze>tn?(Z.addRange(F),Z.extend(P.node,P.offset)):(F.setEnd(P.node,P.offset),Z.addRange(F))}}}}for(oe=[],Z=T;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<oe.length;T++){var re=oe[T];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Ku=!!jf,Pf=jf=null}finally{Wt=h,_e.p=o,J.T=a}}t.current=i,Xn=2}}function __(){if(Xn===2){Xn=0;var t=la,i=Fo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var o=_e.p;_e.p=2;var h=Wt;Wt|=4;try{Ky(t,i.alternate,i)}finally{Wt=h,_e.p=o,J.T=a}}Xn=3}}function b_(){if(Xn===4||Xn===3){Xn=0,Ms();var t=la,i=Fo,a=kr,o=r_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xn=5:(Xn=0,Fo=la=null,v_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(oa=null),Qn(a),i=i.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(Oe,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=J.T,h=_e.p,_e.p=2,J.T=null;try{for(var d=t.onRecoverableError,p=0;p<o.length;p++){var T=o[p];d(T.value,{componentStack:T.stack})}}finally{J.T=i,_e.p=h}}(kr&3)!==0&&Ou(),er(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===wf?ec++:(ec=0,wf=t):ec=0,tc(0)}}function v_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ll(i)))}function Ou(){return y_(),__(),b_(),T_()}function T_(){if(Xn!==5)return!1;var t=la,i=Ef;Ef=0;var a=Qn(kr),o=J.T,h=_e.p;try{_e.p=32>a?32:a,J.T=null,a=Sf,Sf=null;var d=la,p=kr;if(Xn=0,Fo=la=null,kr=0,(Wt&6)!==0)throw Error(s(331));var T=Wt;if(Wt|=4,n_(d.current),Jy(d,d.current,p,a),Wt=T,tc(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(Oe,d)}catch{}return!0}finally{_e.p=h,J.T=o,v_(t,i)}}function E_(t,i,a){i=As(a,i),i=tf(t.stateNode,i,2),t=ta(t,i,2),t!==null&&(Ls(t,2),er(t))}function Zt(t,i,a){if(t.tag===3)E_(t,t,a);else for(;i!==null;){if(i.tag===3){E_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(oa===null||!oa.has(o))){t=As(a,t),a=Sy(2),o=ta(i,a,2),o!==null&&(wy(a,o,i,t),Ls(o,2),er(o));break}}i=i.return}}function If(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new hS;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(bf=!0,h.add(a),t=pS.bind(null,t,i,a),i.then(t,t))}function pS(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,on===t&&(Ct&a)===a&&(In===4||In===3&&(Ct&62914560)===Ct&&300>Sn()-Cu?(Wt&2)===0&&Go(t,0):vf|=a,Ho===Ct&&(Ho=0)),er(t)}function S_(t,i){i===0&&(i=Hr()),t=$a(t,i),t!==null&&(Ls(t,i),er(t))}function yS(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),S_(t,a)}function _S(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),S_(t,a)}function bS(t,i){return sn(t,i)}var Lu=null,Qo=null,Cf=!1,Vu=!1,kf=!1,ua=0;function er(t){t!==Qo&&t.next===null&&(Qo===null?Lu=Qo=t:Qo=Qo.next=t),Vu=!0,Cf||(Cf=!0,TS())}function tc(t,i){if(!kf&&Vu){kf=!0;do for(var a=!1,o=Lu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var p=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-et(42|t)+1)-1,d&=h&~(p&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,I_(o,d))}else d=Ct,d=Kn(o,o===on?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||wn(o,d)||(a=!0,I_(o,d));o=o.next}while(a);kf=!1}}function vS(){w_()}function w_(){Vu=Cf=!1;var t=0;ua!==0&&DS()&&(t=ua);for(var i=Sn(),a=null,o=Lu;o!==null;){var h=o.next,d=A_(o,i);d===0?(o.next=null,a===null?Lu=h:a.next=h,h===null&&(Qo=a)):(a=o,(t!==0||(d&3)!==0)&&(Vu=!0)),o=h}Xn!==0&&Xn!==5||tc(t),ua!==0&&(ua=0)}function A_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var p=31-et(d),T=1<<p,x=h[p];x===-1?((T&a)===0||(T&o)!==0)&&(h[p]=Il(T,i)):x<=i&&(t.expiredLanes|=T),d&=~T}if(i=on,a=Ct,a=Kn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Yi(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||wn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&Yi(o),Qn(a)){case 2:case 8:a=Os;break;case 32:a=Ci;break;case 268435456:a=Gs;break;default:a=Ci}return o=R_.bind(null,t),a=sn(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&Yi(o),t.callbackPriority=2,t.callbackNode=null,2}function R_(t,i){if(Xn!==0&&Xn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ou()&&t.callbackNode!==a)return null;var o=Ct;return o=Kn(t,t===on?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(o_(t,o,i),A_(t,Sn()),t.callbackNode!=null&&t.callbackNode===a?R_.bind(null,t):null)}function I_(t,i){if(Ou())return null;o_(t,i,!0)}function TS(){xS(function(){(Wt&6)!==0?sn(xs,vS):w_()})}function Nf(){if(ua===0){var t=Mo;t===0&&(t=Zi,Zi<<=1,(Zi&261888)===0&&(Zi=256)),ua=t}return ua}function C_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ne(""+t)}function k_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function ES(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=C_((h[xn]||null).action),p=o.submitter;p&&(i=(i=p[xn]||null)?C_(i.formAction):p.getAttribute("formAction"),i!==null&&(d=i,p=null));var T=new jt("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ua!==0){var x=p?k_(h,p):new FormData(h);$d(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(T.preventDefault(),x=p?k_(h,p):new FormData(h),$d(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var Df=0;Df<dd.length;Df++){var Mf=dd[Df],SS=Mf.toLowerCase(),wS=Mf[0].toUpperCase()+Mf.slice(1);Ps(SS,"on"+wS)}Ps(ap,"onAnimationEnd"),Ps(op,"onAnimationIteration"),Ps(lp,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(BE,"onTransitionRun"),Ps(UE,"onTransitionStart"),Ps(qE,"onTransitionCancel"),Ps(cp,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),is("onBeforeInput",["compositionend","keypress","textInput","paste"]),is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function N_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var p=o.length-1;0<=p;p--){var T=o[p],x=T.instance,G=T.currentTarget;if(T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=G;try{d(h)}catch(ee){Xc(ee)}h.currentTarget=null,d=x}else for(p=0;p<o.length;p++){if(T=o[p],x=T.instance,G=T.currentTarget,T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=G;try{d(h)}catch(ee){Xc(ee)}h.currentTarget=null,d=x}}}}function St(t,i){var a=i[_s];a===void 0&&(a=i[_s]=new Set);var o=t+"__bubble";a.has(o)||(D_(i,t,2,!1),a.add(o))}function xf(t,i,a){var o=0;i&&(o|=4),D_(a,t,o,i)}var ju="_reactListening"+Math.random().toString(36).slice(2);function Of(t){if(!t[ju]){t[ju]=!0,Kr.forEach(function(a){a!=="selectionchange"&&(AS.has(a)||xf(a,!1,t),xf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[ju]||(i[ju]=!0,xf("selectionchange",!1,i))}}function D_(t,i,a,o){switch(ab(i)){case 2:var h=JS;break;case 8:h=e1;break;default:h=$f}a=h.bind(null,i,a,t),h=void 0,!xt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Lf(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var T=o.stateNode.containerInfo;if(T===h)break;if(p===4)for(p=o.return;p!==null;){var x=p.tag;if((x===3||x===4)&&p.stateNode.containerInfo===h)return;p=p.return}for(;T!==null;){if(p=xi(T),p===null)return;if(x=p.tag,x===5||x===6||x===26||x===27){o=d=p;continue e}T=T.parentNode}}o=o.return}je(function(){var G=d,ee=Ie(a),oe=[];e:{var K=up.get(t);if(K!==void 0){var Z=jt,Ce=t;switch(t){case"keypress":if(_t(a)===0)break e;case"keydown":case"keyup":Z=ji;break;case"focusin":Ce="focus",Z=It;break;case"focusout":Ce="blur",Z=It;break;case"beforeblur":case"afterblur":Z=It;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ue;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=ht;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=g;break;case ap:case op:case lp:Z=$n;break;case cp:Z=w;break;case"scroll":case"scrollend":Z=qt;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=ei;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=On;break;case"toggle":case"beforetoggle":Z=Le}var Ze=(i&4)!==0,tn=!Ze&&(t==="scroll"||t==="scrollend"),q=Ze?K!==null?K+"Capture":null:K;Ze=[];for(var P=G,F;P!==null;){var re=P;if(F=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||F===null||q===null||(re=Pe(P,q),re!=null&&Ze.push(ic(P,re,F))),tn)break;P=P.return}0<Ze.length&&(K=new Z(K,Ce,null,a,ee),oe.push({event:K,listeners:Ze}))}}if((i&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",K&&a!==Ae&&(Ce=a.relatedTarget||a.fromElement)&&(xi(Ce)||Ce[yi]))break e;if((Z||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(Ce=a.relatedTarget||a.toElement,Z=G,Ce=Ce?xi(Ce):null,Ce!==null&&(tn=u(Ce),Ze=Ce.tag,Ce!==tn||Ze!==5&&Ze!==27&&Ze!==6)&&(Ce=null)):(Z=null,Ce=G),Z!==Ce)){if(Ze=Ue,re="onMouseLeave",q="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Ze=On,re="onPointerLeave",q="onPointerEnter",P="pointer"),tn=Z==null?K:Oi(Z),F=Ce==null?K:Oi(Ce),K=new Ze(re,P+"leave",Z,a,ee),K.target=tn,K.relatedTarget=F,re=null,xi(ee)===G&&(Ze=new Ze(q,P+"enter",Ce,a,ee),Ze.target=F,Ze.relatedTarget=tn,re=Ze),tn=re,Z&&Ce)t:{for(Ze=RS,q=Z,P=Ce,F=0,re=q;re;re=Ze(re))F++;re=0;for(var Ke=P;Ke;Ke=Ze(Ke))re++;for(;0<F-re;)q=Ze(q),F--;for(;0<re-F;)P=Ze(P),re--;for(;F--;){if(q===P||P!==null&&q===P.alternate){Ze=q;break t}q=Ze(q),P=Ze(P)}Ze=null}else Ze=null;Z!==null&&M_(oe,K,Z,Ze,!1),Ce!==null&&tn!==null&&M_(oe,tn,Ce,Ze,!0)}}e:{if(K=G?Oi(G):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var Ft=$g;else if(Qg(K))if(Yg)Ft=jE;else{Ft=LE;var Me=OE}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&de(G.elementType)&&(Ft=$g):Ft=VE;if(Ft&&(Ft=Ft(t,G))){Wg(oe,Ft,a,ee);break e}Me&&Me(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Ga(K,"number",K.value)}switch(Me=G?Oi(G):window,t){case"focusin":(Qg(Me)||Me.contentEditable==="true")&&(wo=Me,cd=G,Ml=null);break;case"focusout":Ml=cd=wo=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,sp(oe,a,ee);break;case"selectionchange":if(zE)break;case"keydown":case"keyup":sp(oe,a,ee)}var gt;if(bt)e:{switch(t){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else So?Ka(t,a)&&(kt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(kt="onCompositionStart");kt&&(Ln&&a.locale!=="ko"&&(So||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&So&&(gt=yt()):(ot=ee,he="value"in ot?ot.value:ot.textContent,So=!0)),Me=Pu(G,kt),0<Me.length&&(kt=new _n(kt,t,null,a,ee),oe.push({event:kt,listeners:Me}),gt?kt.data=gt:(gt=Eo(a),gt!==null&&(kt.data=gt)))),(gt=Bt?NE(t,a):DE(t,a))&&(kt=Pu(G,"onBeforeInput"),0<kt.length&&(Me=new _n("onBeforeInput","beforeinput",null,a,ee),oe.push({event:Me,listeners:kt}),Me.data=gt)),ES(oe,t,G,a,ee)}N_(oe,i)})}function ic(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Pu(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Pe(t,a),h!=null&&o.unshift(ic(t,h,d)),h=Pe(t,i),h!=null&&o.push(ic(t,h,d))),t.tag===3)return o;t=t.return}return[]}function RS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function M_(t,i,a,o,h){for(var d=i._reactName,p=[];a!==null&&a!==o;){var T=a,x=T.alternate,G=T.stateNode;if(T=T.tag,x!==null&&x===o)break;T!==5&&T!==26&&T!==27||G===null||(x=G,h?(G=Pe(a,d),G!=null&&p.unshift(ic(a,G,x))):h||(G=Pe(a,d),G!=null&&p.push(ic(a,G,x)))),a=a.return}p.length!==0&&t.push({event:i,listeners:p})}var IS=/\r\n?/g,CS=/\u0000|\uFFFD/g;function x_(t){return(typeof t=="string"?t:""+t).replace(IS,`
`).replace(CS,"")}function O_(t,i){return i=x_(i),x_(t)===i}function en(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||_i(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&_i(t,""+o);break;case"className":yn(t,"class",o);break;case"tabIndex":yn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":yn(t,a,o);break;case"style":X(t,o,d);break;case"data":if(i!=="object"){yn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ne(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&en(t,i,"name",h.name,h,null),en(t,i,"formEncType",h.formEncType,h,null),en(t,i,"formMethod",h.formMethod,h,null),en(t,i,"formTarget",h.formTarget,h,null)):(en(t,i,"encType",h.encType,h,null),en(t,i,"method",h.method,h,null),en(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ne(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Y);break;case"onScroll":o!=null&&St("scroll",t);break;case"onScrollEnd":o!=null&&St("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=ne(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":St("beforetoggle",t),St("toggle",t),fr(t,"popover",o);break;case"xlinkActuate":an(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":an(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":an(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":an(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":an(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":an(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":an(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":an(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":an(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":fr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$.get(a)||a,fr(t,a,o))}}function Vf(t,i,a,o,h,d){switch(a){case"style":X(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?_i(t,o):(typeof o=="number"||typeof o=="bigint")&&_i(t,""+o);break;case"onScroll":o!=null&&St("scroll",t);break;case"onScrollEnd":o!=null&&St("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Y);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ba.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[xn]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):fr(t,a,o)}}}function hi(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",t),St("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var p=a[d];if(p!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:en(t,i,d,p,a,null)}}h&&en(t,i,"srcSet",a.srcSet,a,null),o&&en(t,i,"src",a.src,a,null);return;case"input":St("invalid",t);var T=d=p=h=null,x=null,G=null;for(o in a)if(a.hasOwnProperty(o)){var ee=a[o];if(ee!=null)switch(o){case"name":h=ee;break;case"type":p=ee;break;case"checked":x=ee;break;case"defaultChecked":G=ee;break;case"value":d=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:en(t,i,o,ee,a,null)}}Fa(t,d,T,x,G,p,h,!1);return;case"select":St("invalid",t),o=p=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":p=T;break;case"multiple":o=T;default:en(t,i,h,T,a,null)}i=d,a=p,t.multiple=!!o,i!=null?Ws(t,!!o,i,!1):a!=null&&Ws(t,!!o,a,!0);return;case"textarea":St("invalid",t),d=h=o=null;for(p in a)if(a.hasOwnProperty(p)&&(T=a[p],T!=null))switch(p){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:en(t,i,p,T,a,null)}$s(t,o,h,d);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(o=a[x],o!=null))switch(x){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:en(t,i,x,o,a,null)}return;case"dialog":St("beforetoggle",t),St("toggle",t),St("cancel",t),St("close",t);break;case"iframe":case"object":St("load",t);break;case"video":case"audio":for(o=0;o<nc.length;o++)St(nc[o],t);break;case"image":St("error",t),St("load",t);break;case"details":St("toggle",t);break;case"embed":case"source":case"link":St("error",t),St("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(o=a[G],o!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:en(t,i,G,o,a,null)}return;default:if(de(i)){for(ee in a)a.hasOwnProperty(ee)&&(o=a[ee],o!==void 0&&Vf(t,i,ee,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&en(t,i,T,o,a,null))}function kS(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,p=null,T=null,x=null,G=null,ee=null;for(Z in a){var oe=a[Z];if(a.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":x=oe;default:o.hasOwnProperty(Z)||en(t,i,Z,null,o,oe)}}for(var K in o){var Z=o[K];if(oe=a[K],o.hasOwnProperty(K)&&(Z!=null||oe!=null))switch(K){case"type":d=Z;break;case"name":h=Z;break;case"checked":G=Z;break;case"defaultChecked":ee=Z;break;case"value":p=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:Z!==oe&&en(t,i,K,Z,o,oe)}}gr(t,p,T,x,G,ee,d,h);return;case"select":Z=p=T=K=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":Z=x;default:o.hasOwnProperty(d)||en(t,i,d,null,o,x)}for(h in o)if(d=o[h],x=a[h],o.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":K=d;break;case"defaultValue":T=d;break;case"multiple":p=d;default:d!==x&&en(t,i,h,d,o,x)}i=T,a=p,o=Z,K!=null?Ws(t,!!a,K,!1):!!o!=!!a&&(i!=null?Ws(t,!!a,i,!0):Ws(t,!!a,a?[]:"",!1));return;case"textarea":Z=K=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:en(t,i,T,null,o,h)}for(p in o)if(h=o[p],d=a[p],o.hasOwnProperty(p)&&(h!=null||d!=null))switch(p){case"value":K=h;break;case"defaultValue":Z=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&en(t,i,p,h,o,d)}To(t,K,Z);return;case"option":for(var Ce in a)if(K=a[Ce],a.hasOwnProperty(Ce)&&K!=null&&!o.hasOwnProperty(Ce))switch(Ce){case"selected":t.selected=!1;break;default:en(t,i,Ce,null,o,K)}for(x in o)if(K=o[x],Z=a[x],o.hasOwnProperty(x)&&K!==Z&&(K!=null||Z!=null))switch(x){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:en(t,i,x,K,o,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in a)K=a[Ze],a.hasOwnProperty(Ze)&&K!=null&&!o.hasOwnProperty(Ze)&&en(t,i,Ze,null,o,K);for(G in o)if(K=o[G],Z=a[G],o.hasOwnProperty(G)&&K!==Z&&(K!=null||Z!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:en(t,i,G,K,o,Z)}return;default:if(de(i)){for(var tn in a)K=a[tn],a.hasOwnProperty(tn)&&K!==void 0&&!o.hasOwnProperty(tn)&&Vf(t,i,tn,void 0,o,K);for(ee in o)K=o[ee],Z=a[ee],!o.hasOwnProperty(ee)||K===Z||K===void 0&&Z===void 0||Vf(t,i,ee,K,o,Z);return}}for(var q in a)K=a[q],a.hasOwnProperty(q)&&K!=null&&!o.hasOwnProperty(q)&&en(t,i,q,null,o,K);for(oe in o)K=o[oe],Z=a[oe],!o.hasOwnProperty(oe)||K===Z||K==null&&Z==null||en(t,i,oe,K,o,Z)}function L_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,p=h.initiatorType,T=h.duration;if(d&&T&&L_(p)){for(p=0,T=h.responseEnd,o+=1;o<a.length;o++){var x=a[o],G=x.startTime;if(G>T)break;var ee=x.transferSize,oe=x.initiatorType;ee&&L_(oe)&&(x=x.responseEnd,p+=ee*(x<T?1:(T-G)/(x-G)))}if(--o,i+=8*(d+p)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var jf=null,Pf=null;function zu(t){return t.nodeType===9?t:t.ownerDocument}function V_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function zf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Bf=null;function DS(){var t=window.event;return t&&t.type==="popstate"?t===Bf?!1:(Bf=t,!0):(Bf=null,!1)}var P_=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,z_=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof z_<"u"?function(t){return z_.resolve(null).then(t).catch(OS)}:P_;function OS(t){setTimeout(function(){throw t})}function ha(t){return t==="head"}function B_(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),Xo(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")sc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,sc(a);for(var d=a.firstChild;d;){var p=d.nextSibling,T=d.nodeName;d[ns]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=p}}else a==="body"&&sc(t.ownerDocument.body);a=h}while(a);Xo(i)}function U_(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Uf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uf(a),Gr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function LS(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ns])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Ns(t.nextSibling),t===null)break}return null}function VS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ns(t.nextSibling),t===null))return null;return t}function q_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Ns(t.nextSibling),t===null))return null;return t}function qf(t){return t.data==="$?"||t.data==="$~"}function Hf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function jS(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Ns(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Ff=null;function H_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Ns(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function F_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function G_(t,i,a){switch(i=zu(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function sc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Gr(t)}var Ds=new Map,K_=new Set;function Bu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Nr=_e.d;_e.d={f:PS,r:zS,D:BS,C:US,L:qS,m:HS,X:GS,S:FS,M:KS};function PS(){var t=Nr.f(),i=Du();return t||i}function zS(t){var i=Ui(t);i!==null&&i.tag===5&&i.type==="form"?cy(i):Nr.r(t)}var Wo=typeof document>"u"?null:document;function Q_(t,i,a){var o=Wo;if(o&&typeof i=="string"&&i){var h=ai(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),K_.has(h)||(K_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),hi(i,"link",t),vn(i),o.head.appendChild(i)))}}function BS(t){Nr.D(t),Q_("dns-prefetch",t,null)}function US(t,i){Nr.C(t,i),Q_("preconnect",t,i)}function qS(t,i,a){Nr.L(t,i,a);var o=Wo;if(o&&t&&i){var h='link[rel="preload"][as="'+ai(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ai(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ai(a.imageSizes)+'"]')):h+='[href="'+ai(t)+'"]';var d=h;switch(i){case"style":d=$o(t);break;case"script":d=Yo(t)}Ds.has(d)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Ds.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(rc(d))||i==="script"&&o.querySelector(ac(d))||(i=o.createElement("link"),hi(i,"link",t),vn(i),o.head.appendChild(i)))}}function HS(t,i){Nr.m(t,i);var a=Wo;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ai(o)+'"][href="'+ai(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Yo(t)}if(!Ds.has(d)&&(t=A({rel:"modulepreload",href:t},i),Ds.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ac(d)))return}o=a.createElement("link"),hi(o,"link",t),vn(o),a.head.appendChild(o)}}}function FS(t,i,a){Nr.S(t,i,a);var o=Wo;if(o&&t){var h=bs(o).hoistableStyles,d=$o(t);i=i||"default";var p=h.get(d);if(!p){var T={loading:0,preload:null};if(p=o.querySelector(rc(d)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Ds.get(d))&&Gf(t,a);var x=p=o.createElement("link");vn(x),hi(x,"link",t),x._p=new Promise(function(G,ee){x.onload=G,x.onerror=ee}),x.addEventListener("load",function(){T.loading|=1}),x.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Uu(p,i,o)}p={type:"stylesheet",instance:p,count:1,state:T},h.set(d,p)}}}function GS(t,i){Nr.X(t,i);var a=Wo;if(a&&t){var o=bs(a).hoistableScripts,h=Yo(t),d=o.get(h);d||(d=a.querySelector(ac(h)),d||(t=A({src:t,async:!0},i),(i=Ds.get(h))&&Kf(t,i),d=a.createElement("script"),vn(d),hi(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function KS(t,i){Nr.M(t,i);var a=Wo;if(a&&t){var o=bs(a).hoistableScripts,h=Yo(t),d=o.get(h);d||(d=a.querySelector(ac(h)),d||(t=A({src:t,async:!0,type:"module"},i),(i=Ds.get(h))&&Kf(t,i),d=a.createElement("script"),vn(d),hi(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function W_(t,i,a,o){var h=(h=at.current)?Bu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=$o(a.href),a=bs(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=$o(a.href);var d=bs(h).hoistableStyles,p=d.get(t);if(p||(h=h.ownerDocument||h,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,p),(d=h.querySelector(rc(t)))&&!d._p&&(p.instance=d,p.state.loading=5),Ds.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ds.set(t,a),d||QS(h,t,a,p.state))),i&&o===null)throw Error(s(528,""));return p}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Yo(a),a=bs(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function $o(t){return'href="'+ai(t)+'"'}function rc(t){return'link[rel="stylesheet"]['+t+"]"}function $_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function QS(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),hi(i,"link",a),vn(i),t.head.appendChild(i))}function Yo(t){return'[src="'+ai(t)+'"]'}function ac(t){return"script[async]"+t}function Y_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+ai(a.href)+'"]');if(o)return i.instance=o,vn(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),vn(o),hi(o,"style",h),Uu(o,a.precedence,t),i.instance=o;case"stylesheet":h=$o(a.href);var d=t.querySelector(rc(h));if(d)return i.state.loading|=4,i.instance=d,vn(d),d;o=$_(a),(h=Ds.get(h))&&Gf(o,h),d=(t.ownerDocument||t).createElement("link"),vn(d);var p=d;return p._p=new Promise(function(T,x){p.onload=T,p.onerror=x}),hi(d,"link",o),i.state.loading|=4,Uu(d,a.precedence,t),i.instance=d;case"script":return d=Yo(a.src),(h=t.querySelector(ac(d)))?(i.instance=h,vn(h),h):(o=a,(h=Ds.get(d))&&(o=A({},a),Kf(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),vn(h),hi(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Uu(o,a.precedence,t));return i.instance}function Uu(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,p=0;p<o.length;p++){var T=o[p];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Gf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Kf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var qu=null;function X_(t,i,a){if(qu===null){var o=new Map,h=qu=new Map;h.set(a,o)}else h=qu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ns]||d[An]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var p=d.getAttribute(i)||"";p=t+p;var T=o.get(p);T?T.push(d):o.set(p,[d])}}return o}function Z_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function WS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function J_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function $S(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=$o(o.href),d=i.querySelector(rc(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Hu.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,vn(d);return}d=i.ownerDocument||i,o=$_(o),(h=Ds.get(h))&&Gf(o,h),d=d.createElement("link"),vn(d);var p=d;p._p=new Promise(function(T,x){p.onload=T,p.onerror=x}),hi(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Hu.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Qf=0;function YS(t,i){return t.stylesheets&&t.count===0&&Gu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Gu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Qf===0&&(Qf=62500*NS());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Gu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Qf?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Hu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Fu=null;function Gu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Fu=new Map,i.forEach(XS,t),Fu=null,Hu.call(t))}function XS(t,i){if(!(i.state.loading&4)){var a=Fu.get(t);if(a)var o=a.get(null);else{a=new Map,Fu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var p=h[d];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),o=p)}o&&a.set(null,o)}h=i.instance,p=h.getAttribute("data-precedence"),d=a.get(p)||o,d===o&&a.set(null,h),a.set(p,h),this.count++,o=Hu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var oc={$$typeof:Ve,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function ZS(t,i,a,o,h,d,p,T,x){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ys(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ys(0),this.hiddenUpdates=ys(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function eb(t,i,a,o,h,d,p,T,x,G,ee,oe){return t=new ZS(t,i,a,p,x,G,ee,oe,T),i=1,d===!0&&(i|=24),d=rs(3,null,null,i),t.current=d,d.stateNode=t,i=Ad(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},kd(d),t}function tb(t){return t?(t=Io,t):Io}function nb(t,i,a,o,h,d){h=tb(h),o.context===null?o.context=h:o.pendingContext=h,o=ea(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=ta(t,o,i),a!==null&&(Qi(a,t,i),zl(a,t,i))}function ib(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Wf(t,i){ib(t,i),(t=t.alternate)&&ib(t,i)}function sb(t){if(t.tag===13||t.tag===31){var i=$a(t,67108864);i!==null&&Qi(i,t,67108864),Wf(t,67108864)}}function rb(t){if(t.tag===13||t.tag===31){var i=us();i=Mi(i);var a=$a(t,i);a!==null&&Qi(a,t,i),Wf(t,i)}}var Ku=!0;function JS(t,i,a,o){var h=J.T;J.T=null;var d=_e.p;try{_e.p=2,$f(t,i,a,o)}finally{_e.p=d,J.T=h}}function e1(t,i,a,o){var h=J.T;J.T=null;var d=_e.p;try{_e.p=8,$f(t,i,a,o)}finally{_e.p=d,J.T=h}}function $f(t,i,a,o){if(Ku){var h=Yf(o);if(h===null)Lf(t,i,o,Qu,a),ob(t,o);else if(n1(h,t,i,a,o))o.stopPropagation();else if(ob(t,o),i&4&&-1<t1.indexOf(t)){for(;h!==null;){var d=Ui(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var p=Ni(d.pendingLanes);if(p!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;p;){var x=1<<31-et(p);T.entanglements[1]|=x,p&=~x}er(d),(Wt&6)===0&&(ku=Sn()+500,tc(0))}}break;case 31:case 13:T=$a(d,2),T!==null&&Qi(T,d,2),Du(),Wf(d,2)}if(d=Yf(o),d===null&&Lf(t,i,o,Qu,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Lf(t,i,o,null,a)}}function Yf(t){return t=Ie(t),Xf(t)}var Qu=null;function Xf(t){if(Qu=null,t=xi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Qu=t,null}function ab(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xi()){case xs:return 2;case Os:return 8;case Ci:case ki:return 32;case Gs:return 268435456;default:return 32}default:return 32}}var Zf=!1,da=null,fa=null,ma=null,lc=new Map,cc=new Map,ga=[],t1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ob(t,i){switch(t){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":lc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(i.pointerId)}}function uc(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Ui(i),i!==null&&sb(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function n1(t,i,a,o,h){switch(i){case"focusin":return da=uc(da,t,i,a,o,h),!0;case"dragenter":return fa=uc(fa,t,i,a,o,h),!0;case"mouseover":return ma=uc(ma,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return lc.set(d,uc(lc.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,cc.set(d,uc(cc.get(d)||null,t,i,a,o,h)),!0}return!1}function lb(t){var i=xi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Wn(t.priority,function(){rb(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,Wn(t.priority,function(){rb(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Yf(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Ae=o,a.target.dispatchEvent(o),Ae=null}else return i=Ui(a),i!==null&&sb(i),t.blockedOn=a,!1;i.shift()}return!0}function cb(t,i,a){Wu(t)&&a.delete(i)}function i1(){Zf=!1,da!==null&&Wu(da)&&(da=null),fa!==null&&Wu(fa)&&(fa=null),ma!==null&&Wu(ma)&&(ma=null),lc.forEach(cb),cc.forEach(cb)}function $u(t,i){t.blockedOn===i&&(t.blockedOn=null,Zf||(Zf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,i1)))}var Yu=null;function ub(t){Yu!==t&&(Yu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Yu===t&&(Yu=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Xf(o||a)===null)continue;break}var d=Ui(a);d!==null&&(t.splice(i,3),i-=3,$d(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Xo(t){function i(x){return $u(x,t)}da!==null&&$u(da,t),fa!==null&&$u(fa,t),ma!==null&&$u(ma,t),lc.forEach(i),cc.forEach(i);for(var a=0;a<ga.length;a++){var o=ga[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<ga.length&&(a=ga[0],a.blockedOn===null);)lb(a),a.blockedOn===null&&ga.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],p=h[xn]||null;if(typeof d=="function")p||ub(a);else if(p){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,p=d[xn]||null)T=p.formAction;else if(Xf(h)!==null)continue}else T=p.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),ub(a)}}}function hb(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(p){return h=p})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Jf(t){this._internalRoot=t}Xu.prototype.render=Jf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=us();nb(a,o,t,i,null,null)},Xu.prototype.unmount=Jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;nb(t.current,2,null,t,null,null),Du(),i[yi]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var i=Fr();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ga.length&&i!==0&&i<ga[a].priority;a++);ga.splice(a,0,t),a===0&&lb(t)}};var db=e.version;if(db!=="19.2.0")throw Error(s(527,db,"19.2.0"));_e.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var s1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{Oe=Zu.inject(s1),Se=Zu}catch{}}return dc.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=by,d=vy,p=Ty;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=eb(t,1,!1,null,null,a,o,null,h,d,p,hb),t[yi]=i.current,Of(t),new Jf(i)},dc.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",d=by,p=vy,T=Ty,x=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),i=eb(t,1,!0,i,a??null,o,h,x,d,p,T,hb),i.context=tb(null),a=i.current,o=us(),o=Mi(o),h=ea(o),h.callback=null,ta(a,h,o),a=o,i.current.lanes=a,Ls(i,a),er(i),t[yi]=i.current,Of(t),new Xu(i)},dc.version="19.2.0",dc}var Eb;function m1(){if(Eb)return nm.exports;Eb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),nm.exports=f1(),nm.exports}var g1=m1();const p1="_projectHub_bg565_1",y1="_backgroundOverlay_bg565_23",_1="_content_bg565_53",b1="_header_bg565_77",v1="_logoContainer_bg565_109",T1="_title_bg565_123",E1="_titleGradient_bg565_137",S1="_subtitle_bg565_173",w1="_projectGrid_bg565_189",A1="_projectCard_bg565_229",R1="_cardGlow_bg565_291",I1="_cardContent_bg565_329",C1="_projectEmoji_bg565_347",k1="_projectName_bg565_369",N1="_projectDescription_bg565_397",D1="_comingSoon_bg565_411",M1="_cardBorder_bg565_431",x1="_footer_bg565_471",O1="_footerText_bg565_491",Bn={projectHub:p1,backgroundOverlay:y1,content:_1,header:b1,logoContainer:v1,title:T1,titleGradient:E1,subtitle:S1,projectGrid:w1,projectCard:A1,cardGlow:R1,cardContent:I1,projectEmoji:C1,projectName:k1,projectDescription:N1,comingSoon:D1,cardBorder:M1,footer:x1,footerText:O1},Sb="/Hitzkopf/assets/hk_logo_horizontal-EzCfu4m-.png",L1=({onSelectProject:r})=>{const[e,n]=te.useState(null),s=[{id:"hitzkopf",name:"Hitzkopf",description:"Das explosive Partyspiel",color:"#ff6b35",emoji:"",available:!0},{id:"musicvoter",name:"Amplify",description:"Gemeinsam den Ton angeben",color:"#4ecdc4",emoji:"",available:!0}];return _.jsxs("div",{className:Bn.projectHub,children:[_.jsx("div",{className:Bn.backgroundOverlay}),_.jsxs("div",{className:Bn.content,children:[_.jsx("div",{className:Bn.header,children:_.jsxs("div",{className:Bn.logoContainer,children:[_.jsx("h1",{className:Bn.title,children:_.jsx("span",{className:Bn.titleGradient,children:"Party Games"})}),_.jsx("p",{className:Bn.subtitle,children:"Whle dein Spiel"})]})}),_.jsx("div",{className:Bn.projectGrid,children:s.map(l=>_.jsxs("button",{className:`${Bn.projectCard} ${e===l.id?Bn.hovered:""}`,onClick:()=>l.available&&r(l.id),onMouseEnter:()=>n(l.id),onMouseLeave:()=>n(null),disabled:!l.available,style:{"--project-color":l.color,"--project-glow":`${l.color}40`},children:[_.jsx("div",{className:Bn.cardGlow}),_.jsxs("div",{className:Bn.cardContent,children:[_.jsx("div",{className:Bn.projectEmoji,children:l.emoji}),_.jsx("h2",{className:Bn.projectName,children:l.name}),_.jsx("p",{className:Bn.projectDescription,children:l.description}),!l.available&&_.jsx("div",{className:Bn.comingSoon,children:"Bald verfgbar"})]}),_.jsx("div",{className:Bn.cardBorder})]},l.id))}),_.jsx("div",{className:Bn.footer,children:_.jsx("p",{className:Bn.footerText,children:"Made with  by Niklas"})})]})]})},V1=()=>{};var wb={};const Jv=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},j1=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=r[n++];e[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=r[n++],f=r[n++],m=r[n++],b=((l&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(b>>10)),e[s++]=String.fromCharCode(56320+(b&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},eT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const u=r[l],f=l+1<r.length,m=f?r[l+1]:0,b=l+2<r.length,y=b?r[l+2]:0,E=u>>2,A=(u&3)<<4|m>>4;let V=(m&15)<<2|y>>6,O=y&63;b||(O=64,f||(V=64)),s.push(n[E],n[A],n[V],n[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Jv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):j1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const u=n[r.charAt(l++)],m=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const A=l<r.length?n[r.charAt(l)]:64;if(++l,u==null||m==null||y==null||A==null)throw new P1;const V=u<<2|m>>4;if(s.push(V),y!==64){const O=m<<4&240|y>>2;if(s.push(O),A!==64){const me=y<<6&192|A;s.push(me)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class P1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z1=function(r){const e=Jv(r);return eT.encodeByteArray(e,!0)},gh=function(r){return z1(r).replace(/\./g,"")},tT=function(r){try{return eT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function B1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const U1=()=>B1().__FIREBASE_DEFAULTS__,q1=()=>{if(typeof process>"u"||typeof wb>"u")return;const r=wb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},H1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&tT(r[1]);return e&&JSON.parse(e)},Vh=()=>{try{return V1()||U1()||q1()||H1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},nT=r=>Vh()?.emulatorHosts?.[r],F1=r=>{const e=nT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},iT=()=>Vh()?.config,sT=r=>Vh()?.[`_${r}`];class G1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function vl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rT(r){return(await fetch(r,{credentials:"include"})).ok}function K1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gh(JSON.stringify(n)),gh(JSON.stringify(f)),""].join(".")}const vc={};function Q1(){const r={prod:[],emulator:[]};for(const e of Object.keys(vc))vc[e]?r.emulator.push(e):r.prod.push(e);return r}function W1(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Ab=!1;function aT(r,e){if(typeof window>"u"||typeof document>"u"||!vl(window.location.host)||vc[r]===e||vc[r]||Ab)return;vc[r]=e;function n(V){return`__firebase__banner__${V}`}const s="__firebase__banner",u=Q1().prod.length>0;function f(){const V=document.getElementById(s);V&&V.remove()}function m(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function b(V,O){V.setAttribute("width","24"),V.setAttribute("id",O),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function y(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{Ab=!0,f()},V}function E(V,O){V.setAttribute("id",O),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function A(){const V=W1(s),O=n("text"),me=document.getElementById(O)||document.createElement("span"),ae=n("learnmore"),ge=document.getElementById(ae)||document.createElement("a"),I=n("preprendIcon"),xe=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const Ve=V.element;m(Ve),E(ge,ae);const mt=y();b(xe,I),Ve.append(xe,me,ge,mt),document.body.appendChild(Ve)}u?(me.innerText="Preview backend disconnected.",xe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(xe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,me.innerText="Preview backend running in this workspace."),me.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function Ri(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ri())}function Y1(){const r=Vh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function J1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ew(){const r=Ri();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function tw(){return!Y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nw(){try{return typeof indexedDB=="object"}catch{return!1}}function iw(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const sw="FirebaseError";class Ur extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=sw,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lc.prototype.create)}}class Lc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?rw(u,s):"Error",m=`${this.serviceName}: ${f} (${l}).`;return new Ur(l,m,s)}}function rw(r,e){return r.replace(aw,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const aw=/\{\$([^}]+)}/g;function ow(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Or(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const u=r[l],f=e[l];if(Rb(u)&&Rb(f)){if(!Or(u,f))return!1}else if(u!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Rb(r){return r!==null&&typeof r=="object"}function Vc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function lw(r,e){const n=new cw(r,e);return n.subscribe.bind(n)}class cw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");uw(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=am),l.error===void 0&&(l.error=am),l.complete===void 0&&(l.complete=am);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function am(){}function Jn(r){return r&&r._delegate?r._delegate:r}class ho{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lo="[DEFAULT]";class hw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new G1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fw(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:dw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dw(r){return r===lo?void 0:r}function fw(r){return r.instantiationMode==="EAGER"}class mw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Nt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Nt||(Nt={}));const gw={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},pw=Nt.INFO,yw={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},_w=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=yw[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ym{constructor(e){this.name=e,this._logLevel=pw,this._logHandler=_w,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...e),this._logHandler(this,Nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...e),this._logHandler(this,Nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...e),this._logHandler(this,Nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...e),this._logHandler(this,Nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...e),this._logHandler(this,Nt.ERROR,...e)}}const bw=(r,e)=>e.some(n=>r instanceof n);let Ib,Cb;function vw(){return Ib||(Ib=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tw(){return Cb||(Cb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oT=new WeakMap,vm=new WeakMap,lT=new WeakMap,om=new WeakMap,Xm=new WeakMap;function Ew(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Sa(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&oT.set(n,r)}).catch(()=>{}),Xm.set(e,r),e}function Sw(r){if(vm.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});vm.set(r,e)}let Tm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return vm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||lT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sa(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ww(r){Tm=r(Tm)}function Aw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(lm(this),e,...n);return lT.set(s,e.sort?e.sort():[e]),Sa(s)}:Tw().includes(r)?function(...e){return r.apply(lm(this),e),Sa(oT.get(this))}:function(...e){return Sa(r.apply(lm(this),e))}}function Rw(r){return typeof r=="function"?Aw(r):(r instanceof IDBTransaction&&Sw(r),bw(r,vw())?new Proxy(r,Tm):r)}function Sa(r){if(r instanceof IDBRequest)return Ew(r);if(om.has(r))return om.get(r);const e=Rw(r);return e!==r&&(om.set(r,e),Xm.set(e,r)),e}const lm=r=>Xm.get(r);function Iw(r,e,{blocked:n,upgrade:s,blocking:l,terminated:u}={}){const f=indexedDB.open(r,e),m=Sa(f);return s&&f.addEventListener("upgradeneeded",b=>{s(Sa(f.result),b.oldVersion,b.newVersion,Sa(f.transaction),b)}),n&&f.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),m.then(b=>{u&&b.addEventListener("close",()=>u()),l&&b.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const Cw=["get","getKey","getAll","getAllKeys","count"],kw=["put","add","delete","clear"],cm=new Map;function kb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(cm.get(e))return cm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=kw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Cw.includes(n)))return;const u=async function(f,...m){const b=this.transaction(f,l?"readwrite":"readonly");let y=b.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),l&&b.done]))[0]};return cm.set(e,u),u}ww(r=>({...r,get:(e,n,s)=>kb(e,n)||r.get(e,n,s),has:(e,n)=>!!kb(e,n)||r.has(e,n)}));class Nw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Dw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Dw(r){return r.getComponent()?.type==="VERSION"}const Em="@firebase/app",Nb="0.14.6";const Lr=new Ym("@firebase/app"),Mw="@firebase/app-compat",xw="@firebase/analytics-compat",Ow="@firebase/analytics",Lw="@firebase/app-check-compat",Vw="@firebase/app-check",jw="@firebase/auth",Pw="@firebase/auth-compat",zw="@firebase/database",Bw="@firebase/data-connect",Uw="@firebase/database-compat",qw="@firebase/functions",Hw="@firebase/functions-compat",Fw="@firebase/installations",Gw="@firebase/installations-compat",Kw="@firebase/messaging",Qw="@firebase/messaging-compat",Ww="@firebase/performance",$w="@firebase/performance-compat",Yw="@firebase/remote-config",Xw="@firebase/remote-config-compat",Zw="@firebase/storage",Jw="@firebase/storage-compat",eA="@firebase/firestore",tA="@firebase/ai",nA="@firebase/firestore-compat",iA="firebase",sA="12.6.0";const Sm="[DEFAULT]",rA={[Em]:"fire-core",[Mw]:"fire-core-compat",[Ow]:"fire-analytics",[xw]:"fire-analytics-compat",[Vw]:"fire-app-check",[Lw]:"fire-app-check-compat",[jw]:"fire-auth",[Pw]:"fire-auth-compat",[zw]:"fire-rtdb",[Bw]:"fire-data-connect",[Uw]:"fire-rtdb-compat",[qw]:"fire-fn",[Hw]:"fire-fn-compat",[Fw]:"fire-iid",[Gw]:"fire-iid-compat",[Kw]:"fire-fcm",[Qw]:"fire-fcm-compat",[Ww]:"fire-perf",[$w]:"fire-perf-compat",[Yw]:"fire-rc",[Xw]:"fire-rc-compat",[Zw]:"fire-gcs",[Jw]:"fire-gcs-compat",[eA]:"fire-fst",[nA]:"fire-fst-compat",[tA]:"fire-vertex","fire-js":"fire-js",[iA]:"fire-js-all"};const ph=new Map,aA=new Map,wm=new Map;function Db(r,e){try{r.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function hl(r){const e=r.name;if(wm.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;wm.set(e,r);for(const n of ph.values())Db(n,r);for(const n of aA.values())Db(n,r);return!0}function Zm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function qs(r){return r==null?!1:r.settings!==void 0}const oA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wa=new Lc("app","Firebase",oA);class lA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wa.create("app-deleted",{appName:this._name})}}const Tl=sA;function Jm(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Sm,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw wa.create("bad-app-name",{appName:String(l)});if(n||(n=iT()),!n)throw wa.create("no-options");const u=ph.get(l);if(u){if(Or(n,u.options)&&Or(s,u.config))return u;throw wa.create("duplicate-app",{appName:l})}const f=new mw(l);for(const b of wm.values())f.addComponent(b);const m=new lA(n,s,f);return ph.set(l,m),m}function cT(r=Sm){const e=ph.get(r);if(!e&&r===Sm&&iT())return Jm();if(!e)throw wa.create("no-app",{appName:r});return e}function Aa(r,e,n){let s=rA[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${s}" with version "${e}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(f.join(" "));return}hl(new ho(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const cA="firebase-heartbeat-database",uA=1,Ic="firebase-heartbeat-store";let um=null;function uT(){return um||(um=Iw(cA,uA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ic)}catch(n){console.warn(n)}}}}).catch(r=>{throw wa.create("idb-open",{originalErrorMessage:r.message})})),um}async function hA(r){try{const n=(await uT()).transaction(Ic),s=await n.objectStore(Ic).get(hT(r));return await n.done,s}catch(e){if(e instanceof Ur)Lr.warn(e.message);else{const n=wa.create("idb-get",{originalErrorMessage:e?.message});Lr.warn(n.message)}}}async function Mb(r,e){try{const s=(await uT()).transaction(Ic,"readwrite");await s.objectStore(Ic).put(e,hT(r)),await s.done}catch(n){if(n instanceof Ur)Lr.warn(n.message);else{const s=wa.create("idb-set",{originalErrorMessage:n?.message});Lr.warn(s.message)}}}function hT(r){return`${r.name}!${r.options.appId}`}const dA=1024,fA=30;class mA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>fA){const l=yA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Lr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=xb(),{heartbeatsToSend:n,unsentEntries:s}=gA(this._heartbeatsCache.heartbeats),l=gh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Lr.warn(e),""}}}function xb(){return new Date().toISOString().substring(0,10)}function gA(r,e=dA){const n=[];let s=r.slice();for(const l of r){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Ob(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Ob(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class pA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nw()?iw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Mb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Mb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ob(r){return gh(JSON.stringify({version:2,heartbeats:r})).length}function yA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function _A(r){hl(new ho("platform-logger",e=>new Nw(e),"PRIVATE")),hl(new ho("heartbeat",e=>new mA(e),"PRIVATE")),Aa(Em,Nb,r),Aa(Em,Nb,"esm2020"),Aa("fire-js","")}_A("");var bA="firebase",vA="12.6.0";Aa(bA,vA,"app");function dT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TA=dT,fT=new Lc("auth","Firebase",dT());const yh=new Ym("@firebase/auth");function EA(r,...e){yh.logLevel<=Nt.WARN&&yh.warn(`Auth (${Tl}): ${r}`,...e)}function rh(r,...e){yh.logLevel<=Nt.ERROR&&yh.error(`Auth (${Tl}): ${r}`,...e)}function Vr(r,...e){throw eg(r,...e)}function nr(r,...e){return eg(r,...e)}function mT(r,e,n){const s={...TA(),[e]:n};return new Lc("auth","Firebase",s).create(e,{appName:r.name})}function Ra(r){return mT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return fT.create(r,...e)}function st(r,e,...n){if(!r)throw eg(e,...n)}function Mr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw rh(e),new Error(e)}function jr(r,e){r||Mr(e)}function Am(){return typeof self<"u"&&self.location?.href||""}function SA(){return Lb()==="http:"||Lb()==="https:"}function Lb(){return typeof self<"u"&&self.location?.protocol||null}function wA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SA()||Z1()||"connection"in navigator)?navigator.onLine:!0}function AA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,jr(n>e,"Short delay should be less than long delay!"),this.isMobile=$1()||J1()}get(){return wA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tg(r,e){jr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class gT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const RA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const IA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CA=new jc(3e4,6e4);function jh(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function El(r,e,n,s,l={}){return pT(r,l,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=Vc({key:r.config.apiKey,...f}).slice(1),b=await r._getAdditionalHeaders();b["Content-Type"]="application/json",r.languageCode&&(b["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:b,...u};return X1()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&vl(r.emulatorConfig.host)&&(y.credentials="include"),gT.fetch()(await _T(r,r.config.apiHost,n,m),y)})}async function pT(r,e,n){r._canInitEmulator=!1;const s={...RA,...e};try{const l=new kA(r),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Ju(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[b,y]=m.split(" : ");if(b==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ju(r,"credential-already-in-use",f);if(b==="EMAIL_EXISTS")throw Ju(r,"email-already-in-use",f);if(b==="USER_DISABLED")throw Ju(r,"user-disabled",f);const E=s[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw mT(r,E,y);Vr(r,E)}}catch(l){if(l instanceof Ur)throw l;Vr(r,"network-request-failed",{message:String(l)})}}async function yT(r,e,n,s,l={}){const u=await El(r,e,n,s,l);return"mfaPendingCredential"in u&&Vr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function _T(r,e,n,s){const l=`${e}${n}?${s}`,u=r,f=u.config.emulator?tg(r.config,l):`${r.config.apiScheme}://${l}`;return IA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class kA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(nr(this.auth,"network-request-failed")),CA.get())})}}function Ju(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=nr(r,e,s);return l.customData._tokenResponse=n,l}async function NA(r,e){return El(r,"POST","/v1/accounts:delete",e)}async function _h(r,e){return El(r,"POST","/v1/accounts:lookup",e)}function Tc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DA(r,e=!1){const n=Jn(r),s=await n.getIdToken(e),l=ng(s);st(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:s,authTime:Tc(hm(l.auth_time)),issuedAtTime:Tc(hm(l.iat)),expirationTime:Tc(hm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function hm(r){return Number(r)*1e3}function ng(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{const l=tT(n);return l?JSON.parse(l):(rh("Failed to decode base64 JWT payload"),null)}catch(l){return rh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Vb(r){const e=ng(r);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Cc(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ur&&MA(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function MA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class xA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bh(r){const e=r.auth,n=await r.getIdToken(),s=await Cc(r,_h(e,{idToken:n}));st(s?.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const u=l.providerUserInfo?.length?bT(l.providerUserInfo):[],f=LA(r.providerData,u),m=r.isAnonymous,b=!(r.email&&l.passwordHash)&&!f?.length,y=m?b:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Rm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,E)}async function OA(r){const e=Jn(r);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LA(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function bT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function VA(r,e){const n=await pT(r,{},async()=>{const s=Vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=r.config,f=await _T(r,l,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const b={method:"POST",headers:m,body:s};return r.emulatorConfig&&vl(r.emulatorConfig.host)&&(b.credentials="include"),gT.fetch()(f,b)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jA(r,e){return El(r,"POST","/v2/accounts:revokeToken",jh(r,e))}class al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){st(e.length!==0,"internal-error");const n=Vb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:u}=await VA(e,n);this.updateTokensAndExpiration(s,l,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:u}=n,f=new al;return s&&(st(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(st(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(st(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new al,this.toJSON())}_performRefresh(){return Mr("not implemented")}}function ya(r,e){st(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Hs{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new xA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Rm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return st(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DA(this,e)}reload(){return OA(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await bh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qs(this.auth.app))return Promise.reject(Ra(this.auth));const e=await this.getIdToken();return await Cc(this,NA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,b=n._redirectEventId??void 0,y=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:A,emailVerified:V,isAnonymous:O,providerData:me,stsTokenManager:ae}=n;st(A&&ae,e,"internal-error");const ge=al.fromJSON(this.name,ae);st(typeof A=="string",e,"internal-error"),ya(s,e.name),ya(l,e.name),st(typeof V=="boolean",e,"internal-error"),st(typeof O=="boolean",e,"internal-error"),ya(u,e.name),ya(f,e.name),ya(m,e.name),ya(b,e.name),ya(y,e.name),ya(E,e.name);const I=new Hs({uid:A,auth:e,email:l,emailVerified:V,displayName:s,isAnonymous:O,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:ge,createdAt:y,lastLoginAt:E});return me&&Array.isArray(me)&&(I.providerData=me.map(xe=>({...xe}))),b&&(I._redirectEventId=b),I}static async _fromIdTokenResponse(e,n,s=!1){const l=new al;l.updateFromServerResponse(n);const u=new Hs({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await bh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];st(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?bT(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,m=new al;m.updateFromIdToken(s);const b=new Hs({uid:l.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Rm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(b,y),b}}const jb=new Map;function xr(r){jr(r instanceof Function,"Expected a class definition");let e=jb.get(r);return e?(jr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,jb.set(r,e),e)}class vT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vT.type="NONE";const Pb=vT;function ah(r,e,n){return`firebase:${r}:${e}:${n}`}class ol{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:u}=this.auth;this.fullUserKey=ah(this.userKey,l.apiKey,u),this.fullPersistenceKey=ah("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _h(this.auth,{idToken:e}).catch(()=>{});return n?Hs._fromGetAccountInfoResponse(this.auth,n,e):null}return Hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ol(xr(Pb),e,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||xr(Pb);const f=ah(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const E=await y._get(f);if(E){let A;if(typeof E=="string"){const V=await _h(e,{idToken:E}).catch(()=>{});if(!V)break;A=await Hs._fromGetAccountInfoResponse(e,V,E)}else A=Hs._fromJSON(e,E);y!==u&&(m=A),u=y;break}}catch{}const b=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!b.length?new ol(u,e,s):(u=b[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new ol(u,e,s))}}function zb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RT(e))return"Blackberry";if(IT(e))return"Webos";if(ET(e))return"Safari";if((e.includes("chrome/")||ST(e))&&!e.includes("edge/"))return"Chrome";if(AT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function TT(r=Ri()){return/firefox\//i.test(r)}function ET(r=Ri()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ST(r=Ri()){return/crios\//i.test(r)}function wT(r=Ri()){return/iemobile/i.test(r)}function AT(r=Ri()){return/android/i.test(r)}function RT(r=Ri()){return/blackberry/i.test(r)}function IT(r=Ri()){return/webos/i.test(r)}function ig(r=Ri()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function PA(r=Ri()){return ig(r)&&!!window.navigator?.standalone}function zA(){return ew()&&document.documentMode===10}function CT(r=Ri()){return ig(r)||AT(r)||IT(r)||RT(r)||/windows phone/i.test(r)||wT(r)}function kT(r,e=[]){let n;switch(r){case"Browser":n=zb(Ri());break;case"Worker":n=`${zb(Ri())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tl}/${s}`}class BA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const b=e(u);f(b)}catch(b){m(b)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function UA(r,e={}){return El(r,"GET","/v2/passwordPolicy",jh(r,e))}const qA=6;class HA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??qA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class FA{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bb(this),this.idTokenSubscription=new Bb(this),this.beforeStateQueue=new BA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ol.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _h(this,{idToken:e}),s=await Hs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qs(this.app))return Promise.reject(Ra(this));const n=e?Jn(e):null;return n&&st(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qs(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qs(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UA(this),n=new HA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await jA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xr(e)||this._popupRedirectResolver;st(n,this,"argument-error"),this.redirectPersistenceManager=await ol.create(this,[xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const b=e.addObserver(n,s,l);return()=>{f=!0,b()}}else{const b=e.addObserver(n);return()=>{f=!0,b()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(qs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&EA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ph(r){return Jn(r)}class Bb{constructor(e){this.auth=e,this.observer=null,this.addObserver=lw(n=>this.observer=n)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GA(r){sg=r}function KA(r){return sg.loadJS(r)}function QA(){return sg.gapiScript}function WA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function $A(r,e){const n=Zm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Or(u,e??{}))return l;Vr(l,"already-initialized")}return n.initialize({options:e})}function YA(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(xr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function XA(r,e,n){const s=Ph(r);st(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,u=NT(e),{host:f,port:m}=ZA(e),b=m===null?"":`:${m}`,y={url:`${u}//${f}${b}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){st(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),st(Or(y,s.config.emulator)&&Or(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,vl(f)?(rT(`${u}//${f}${b}`),aT("Auth",!0)):JA()}function NT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ZA(r){const e=NT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const u=l[1];return{host:u,port:Ub(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Ub(f)}}}function Ub(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function JA(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class DT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,n){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function ll(r,e){return yT(r,"POST","/v1/accounts:signInWithIdp",jh(r,e))}const eR="http://localhost";class fo extends DT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...u}=n;if(!s||!l)return null;const f=new fo(s,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ll(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ll(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ll(e,n)}buildRequest(){const e={requestUri:eR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vc(n)}return e}}class MT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Pc extends MT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _a extends Pc{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";class ba extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fo._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ba.credential(n,s)}catch{return null}}}ba.GOOGLE_SIGN_IN_METHOD="google.com";ba.PROVIDER_ID="google.com";class va extends Pc{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return va.credential(e.oauthAccessToken)}catch{return null}}}va.GITHUB_SIGN_IN_METHOD="github.com";va.PROVIDER_ID="github.com";class Ta extends Pc{constructor(){super("twitter.com")}static credential(e,n){return fo._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ta.credential(n,s)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";async function tR(r,e){return yT(r,"POST","/v1/accounts:signUp",jh(r,e))}class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const u=await Hs._fromIdTokenResponse(e,s,l),f=qb(s);return new Na({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=qb(s);return new Na({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function qb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function xT(r){if(qs(r.app))return Promise.reject(Ra(r));const e=Ph(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Na({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await tR(e,{returnSecureToken:!0}),s=await Na._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}class vh extends Ur{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new vh(e,n,s,l)}}function OT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(r,u,e,s):u})}async function nR(r,e,n=!1){const s=await Cc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Na._forOperation(r,"link",s)}async function iR(r,e,n=!1){const{auth:s}=r;if(qs(s.app))return Promise.reject(Ra(s));const l="reauthenticate";try{const u=await Cc(r,OT(s,l,e,r),n);st(u.idToken,s,"internal-error");const f=ng(u.idToken);st(f,s,"internal-error");const{sub:m}=f;return st(r.uid===m,s,"user-mismatch"),Na._forOperation(r,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Vr(s,"user-mismatch"),u}}async function sR(r,e,n=!1){if(qs(r.app))return Promise.reject(Ra(r));const s="signIn",l=await OT(r,s,e),u=await Na._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(u.user),u}function rR(r,e,n,s){return Jn(r).onIdTokenChanged(e,n,s)}function aR(r,e,n){return Jn(r).beforeAuthStateChanged(e,n)}function oR(r,e,n,s){return Jn(r).onAuthStateChanged(e,n,s)}const Th="__sak";class LT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const lR=1e3,cR=10;class VT extends LT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,b)=>{this.notifyListeners(f,b)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);zA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,cR):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},lR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VT.type="LOCAL";const uR=VT;class jT extends LT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jT.type="SESSION";const PT=jT;function hR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new zh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const m=Array.from(f).map(async y=>y(n.origin,u)),b=await hR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:b})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zh.receivers=[];function rg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class dR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((m,b)=>{const y=rg("",20);l.port1.start();const E=setTimeout(()=>{b(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(A){const V=A;if(V.data.eventId===y)switch(V.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{b(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(V.data.response);break;default:clearTimeout(E),clearTimeout(u),b(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function ir(){return window}function fR(r){ir().location.href=r}function zT(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function mR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gR(){return navigator?.serviceWorker?.controller||null}function pR(){return zT()?self:null}const BT="firebaseLocalStorageDb",yR=1,Eh="firebaseLocalStorage",UT="fbase_key";class zc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bh(r,e){return r.transaction([Eh],e?"readwrite":"readonly").objectStore(Eh)}function _R(){const r=indexedDB.deleteDatabase(BT);return new zc(r).toPromise()}function Im(){const r=indexedDB.open(BT,yR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Eh,{keyPath:UT})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Eh)?e(s):(s.close(),await _R(),e(await Im()))})})}async function Hb(r,e,n){const s=Bh(r,!0).put({[UT]:e,value:n});return new zc(s).toPromise()}async function bR(r,e){const n=Bh(r,!1).get(e),s=await new zc(n).toPromise();return s===void 0?null:s.value}function Fb(r,e){const n=Bh(r,!0).delete(e);return new zc(n).toPromise()}const vR=800,TR=3;class qT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>TR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zh._getInstance(pR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mR(),!this.activeServiceWorker)return;this.sender=new dR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Im();return await Hb(e,Th,"1"),await Fb(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>bR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Bh(l,!1).getAll();return new zc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qT.type="LOCAL";const ER=qT;new jc(3e4,6e4);function SR(r,e){return e?xr(e):(st(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class ag extends DT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ll(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ll(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wR(r){return sR(r.auth,new ag(r),r.bypassAuthState)}function AR(r){const{auth:e,user:n}=r;return st(n,e,"internal-error"),iR(n,new ag(r),r.bypassAuthState)}async function RR(r){const{auth:e,user:n}=r;return st(n,e,"internal-error"),nR(n,new ag(r),r.bypassAuthState)}class HT{constructor(e,n,s,l,u=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const b={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(b))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wR;case"linkViaPopup":case"linkViaRedirect":return RR;case"reauthViaPopup":case"reauthViaRedirect":return AR;default:Vr(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const IR=new jc(2e3,1e4);class sl extends HT{constructor(e,n,s,l,u){super(e,n,l,u),this.provider=s,this.authWindow=null,this.pollId=null,sl.currentPopupAction&&sl.currentPopupAction.cancel(),sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IR.get())};e()}}sl.currentPopupAction=null;const CR="pendingRedirect",oh=new Map;class kR extends HT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=oh.get(this.auth._key());if(!e){try{const s=await NR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}oh.set(this.auth._key(),e)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NR(r,e){const n=xR(e),s=MR(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function DR(r,e){oh.set(r._key(),e)}function MR(r){return xr(r._redirectPersistence)}function xR(r){return ah(CR,r.config.apiKey,r.name)}async function OR(r,e,n=!1){if(qs(r.app))return Promise.reject(Ra(r));const s=Ph(r),l=SR(s,e),f=await new kR(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const LR=600*1e3;class VR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!FT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gb(e))}saveEventToCache(e){this.cachedEventUids.add(Gb(e)),this.lastProcessedEventTime=Date.now()}}function Gb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function FT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function jR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FT(r);default:return!1}}async function PR(r,e={}){return El(r,"GET","/v1/projects",e)}const zR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BR=/^https?/;async function UR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await PR(r);for(const n of e)try{if(qR(n))return}catch{}Vr(r,"unauthorized-domain")}function qR(r){const e=Am(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!BR.test(n))return!1;if(zR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}const HR=new jc(3e4,6e4);function Kb(){const r=ir().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function FR(r){return new Promise((e,n)=>{function s(){Kb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kb(),n(nr(r,"network-request-failed"))},timeout:HR.get()})}if(ir().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ir().gapi?.load)s();else{const l=WA("iframefcb");return ir()[l]=()=>{gapi.load?s():n(nr(r,"network-request-failed"))},KA(`${QA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw lh=null,e})}let lh=null;function GR(r){return lh=lh||FR(r),lh}const KR=new jc(5e3,15e3),QR="__/auth/iframe",WR="emulator/auth/iframe",$R={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XR(r){const e=r.config;st(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?tg(e,WR):`https://${r.config.authDomain}/${QR}`,s={apiKey:e.apiKey,appName:r.name,v:Tl},l=YR.get(r.config.apiHost);l&&(s.eid=l);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Vc(s).slice(1)}`}async function ZR(r){const e=await GR(r),n=ir().gapi;return st(n,r,"internal-error"),e.open({where:document.body,url:XR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$R,dontclear:!0},s=>new Promise(async(l,u)=>{await s.restyle({setHideOnLeave:!1});const f=nr(r,"network-request-failed"),m=ir().setTimeout(()=>{u(f)},KR.get());function b(){ir().clearTimeout(m),l(s)}s.ping(b).then(b,()=>{u(f)})}))}const JR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eI=500,tI=600,nI="_blank",iI="http://localhost";class Qb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sI(r,e,n,s=eI,l=tI){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const b={...JR,width:s.toString(),height:l.toString(),top:u,left:f},y=Ri().toLowerCase();n&&(m=ST(y)?nI:n),TT(y)&&(e=e||iI,b.scrollbars="yes");const E=Object.entries(b).reduce((V,[O,me])=>`${V}${O}=${me},`,"");if(PA(y)&&m!=="_self")return rI(e||"",m),new Qb(null);const A=window.open(e||"",m,E);st(A,r,"popup-blocked");try{A.focus()}catch{}return new Qb(A)}function rI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const aI="__/auth/handler",oI="emulator/auth/handler",lI=encodeURIComponent("fac");async function Wb(r,e,n,s,l,u){st(r.config.authDomain,r,"auth-domain-config-required"),st(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Tl,eventId:l};if(e instanceof MT){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",ow(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,A]of Object.entries({}))f[E]=A}if(e instanceof Pc){const E=e.getScopes().filter(A=>A!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const b=await r._getAppCheckToken(),y=b?`#${lI}=${encodeURIComponent(b)}`:"";return`${cI(r)}?${Vc(m).slice(1)}${y}`}function cI({config:r}){return r.emulator?tg(r,oI):`https://${r.authDomain}/${aI}`}const dm="webStorageSupport";class uI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PT,this._completeRedirectFn=OR,this._overrideRedirectResult=DR}async _openPopup(e,n,s,l){jr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Wb(e,n,s,Am(),l);return sI(e,u,rg())}async _openRedirect(e,n,s,l){await this._originValidation(e);const u=await Wb(e,n,s,Am(),l);return fR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(jr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await ZR(e),s=new VR(e);return n.register("authEvent",l=>(st(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dm,{type:dm},l=>{const u=l?.[0]?.[dm];u!==void 0&&n(!!u),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CT()||ET()||ig()}}const hI=uI;var $b="@firebase/auth",Yb="1.11.1";class dI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mI(r){hl(new ho("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;st(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const b={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kT(r)},y=new FA(s,l,u,b);return YA(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),hl(new ho("auth-internal",e=>{const n=Ph(e.getProvider("auth").getImmediate());return(s=>new dI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Aa($b,Yb,fI(r)),Aa($b,Yb,"esm2020")}const gI=300,pI=sT("authIdTokenMaxAge")||gI;let Xb=null;const yI=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>pI)return;const l=n?.token;Xb!==l&&(Xb=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function GT(r=cT()){const e=Zm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=$A(r,{popupRedirectResolver:hI,persistence:[ER,uR,PT]}),s=sT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=yI(u.toString());aR(n,f,()=>f(n.currentUser)),rR(n,m=>f(m))}}const l=nT("auth");return l&&XA(n,`http://${l}`),n}function _I(){return document.getElementsByTagName("head")?.[0]??document}GA({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const u=nr("internal-error");u.customData=l,n(u)},s.type="text/javascript",s.charset="UTF-8",_I().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mI("Browser");var Zb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ia,KT;(function(){var r;function e(D,R){function N(){}N.prototype=R.prototype,D.F=R.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(z,L,U){for(var C=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)C[Kt-2]=arguments[Kt];return R.prototype[L].apply(z,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,R,N){N||(N=0);const z=Array(16);if(typeof R=="string")for(var L=0;L<16;++L)z[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;L<16;++L)z[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=D.g[0],N=D.g[1],L=D.g[2];let U=D.g[3],C;C=R+(U^N&(L^U))+z[0]+3614090360&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+z[1]+3905402710&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+z[2]+606105819&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+z[3]+3250441966&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+z[4]+4118548399&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+z[5]+1200080426&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+z[6]+2821735955&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+z[7]+4249261313&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+z[8]+1770035416&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+z[9]+2336552879&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+z[10]+4294925233&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+z[11]+2304563134&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+z[12]+1804603682&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+z[13]+4254626195&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+z[14]+2792965006&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+z[15]+1236535329&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(L^U&(N^L))+z[1]+4129170786&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+z[6]+3225465664&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+z[11]+643717713&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+z[0]+3921069994&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+z[5]+3593408605&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+z[10]+38016083&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+z[15]+3634488961&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+z[4]+3889429448&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+z[9]+568446438&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+z[14]+3275163606&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+z[3]+4107603335&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+z[8]+1163531501&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+z[13]+2850285829&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+z[2]+4243563512&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+z[7]+1735328473&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+z[12]+2368359562&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(N^L^U)+z[5]+4294588738&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+z[8]+2272392833&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+z[11]+1839030562&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+z[14]+4259657740&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+z[1]+2763975236&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+z[4]+1272893353&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+z[7]+4139469664&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+z[10]+3200236656&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+z[13]+681279174&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+z[0]+3936430074&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+z[3]+3572445317&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+z[6]+76029189&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+z[9]+3654602809&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+z[12]+3873151461&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+z[15]+530742520&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+z[2]+3299628645&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(L^(N|~U))+z[0]+4096336452&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+z[7]+1126891415&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+z[14]+2878612391&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+z[5]+4237533241&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+z[12]+1700485571&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+z[3]+2399980690&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+z[10]+4293915773&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+z[1]+2240044497&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+z[8]+1873313359&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+z[15]+4264355552&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+z[6]+2734768916&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+z[13]+1309151649&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+z[4]+4149444226&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+z[11]+3174756917&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+z[2]+718787259&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+z[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+U&4294967295}s.prototype.v=function(D,R){R===void 0&&(R=D.length);const N=R-this.blockSize,z=this.C;let L=this.h,U=0;for(;U<R;){if(L==0)for(;U<=N;)l(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<R;)if(z[L++]=D.charCodeAt(U++),L==this.blockSize){l(this,z),L=0;break}}else for(;U<R;)if(z[L++]=D[U++],L==this.blockSize){l(this,z),L=0;break}}this.h=L,this.o+=R},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,N=0;N<4;++N)for(let z=0;z<32;z+=8)D[R++]=this.g[N]>>>z&255;return D};function u(D,R){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=R(D)}function f(D,R){this.h=R;const N=[];let z=!0;for(let L=D.length-1;L>=0;L--){const U=D[L]|0;z&&U==R||(N[L]=U,z=!1)}this.g=N}var m={};function b(D){return-128<=D&&D<128?u(D,function(R){return new f([R|0],R<0?-1:0)}):new f([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return A;if(D<0)return ge(y(-D));const R=[];let N=1;for(let z=0;D>=N;z++)R[z]=D/N|0,N*=4294967296;return new f(R,0)}function E(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return ge(E(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(R,8));let z=A;for(let U=0;U<D.length;U+=8){var L=Math.min(8,D.length-U);const C=parseInt(D.substring(U,U+L),R);L<8?(L=y(Math.pow(R,L)),z=z.j(L).add(y(C))):(z=z.j(N),z=z.add(y(C)))}return z}var A=b(0),V=b(1),O=b(16777216);r=f.prototype,r.m=function(){if(ae(this))return-ge(this).m();let D=0,R=1;for(let N=0;N<this.g.length;N++){const z=this.i(N);D+=(z>=0?z:4294967296+z)*R,R*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(me(this))return"0";if(ae(this))return"-"+ge(this).toString(D);const R=y(Math.pow(D,6));var N=this;let z="";for(;;){const L=mt(N,R).g;N=I(N,L.j(R));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=L,me(N))return U+z;for(;U.length<6;)U="0"+U;z=U+z}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function me(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function ae(D){return D.h==-1}r.l=function(D){return D=I(this,D),ae(D)?-1:me(D)?0:1};function ge(D){const R=D.g.length,N=[];for(let z=0;z<R;z++)N[z]=~D.g[z];return new f(N,~D.h).add(V)}r.abs=function(){return ae(this)?ge(this):this},r.add=function(D){const R=Math.max(this.g.length,D.g.length),N=[];let z=0;for(let L=0;L<=R;L++){let U=z+(this.i(L)&65535)+(D.i(L)&65535),C=(U>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);z=C>>>16,U&=65535,C&=65535,N[L]=C<<16|U}return new f(N,N[N.length-1]&-2147483648?-1:0)};function I(D,R){return D.add(ge(R))}r.j=function(D){if(me(this)||me(D))return A;if(ae(this))return ae(D)?ge(this).j(ge(D)):ge(ge(this).j(D));if(ae(D))return ge(this.j(ge(D)));if(this.l(O)<0&&D.l(O)<0)return y(this.m()*D.m());const R=this.g.length+D.g.length,N=[];for(var z=0;z<2*R;z++)N[z]=0;for(z=0;z<this.g.length;z++)for(let L=0;L<D.g.length;L++){const U=this.i(z)>>>16,C=this.i(z)&65535,Kt=D.i(L)>>>16,ln=D.i(L)&65535;N[2*z+2*L]+=C*ln,xe(N,2*z+2*L),N[2*z+2*L+1]+=U*ln,xe(N,2*z+2*L+1),N[2*z+2*L+1]+=C*Kt,xe(N,2*z+2*L+1),N[2*z+2*L+2]+=U*Kt,xe(N,2*z+2*L+2)}for(D=0;D<R;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=R;D<2*R;D++)N[D]=0;return new f(N,0)};function xe(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function Ve(D,R){this.g=D,this.h=R}function mt(D,R){if(me(R))throw Error("division by zero");if(me(D))return new Ve(A,A);if(ae(D))return R=mt(ge(D),R),new Ve(ge(R.g),ge(R.h));if(ae(R))return R=mt(D,ge(R)),new Ve(ge(R.g),R.h);if(D.g.length>30){if(ae(D)||ae(R))throw Error("slowDivide_ only works with positive integers.");for(var N=V,z=R;z.l(D)<=0;)N=vt(N),z=vt(z);var L=Qe(N,1),U=Qe(z,1);for(z=Qe(z,2),N=Qe(N,2);!me(z);){var C=U.add(z);C.l(D)<=0&&(L=L.add(N),U=C),z=Qe(z,1),N=Qe(N,1)}return R=I(D,L.j(R)),new Ve(L,R)}for(L=A;D.l(R)>=0;){for(N=Math.max(1,Math.floor(D.m()/R.m())),z=Math.ceil(Math.log(N)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),U=y(N),C=U.j(R);ae(C)||C.l(D)>0;)N-=z,U=y(N),C=U.j(R);me(U)&&(U=V),L=L.add(U),D=I(D,C)}return new Ve(L,D)}r.B=function(D){return mt(this,D).h},r.and=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)&D.i(z);return new f(N,this.h&D.h)},r.or=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)|D.i(z);return new f(N,this.h|D.h)},r.xor=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)^D.i(z);return new f(N,this.h^D.h)};function vt(D){const R=D.g.length+1,N=[];for(let z=0;z<R;z++)N[z]=D.i(z)<<1|D.i(z-1)>>>31;return new f(N,D.h)}function Qe(D,R){const N=R>>5;R%=32;const z=D.g.length-N,L=[];for(let U=0;U<z;U++)L[U]=R>0?D.i(U+N)>>>R|D.i(U+N+1)<<32-R:D.i(U+N);return new f(L,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,KT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=E,Ia=f}).apply(typeof Zb<"u"?Zb:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var QT,pc,WT,ch,Cm,$T,YT,XT;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function l(c,g){if(g)e:{var v=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var H=c[w];if(!(H in v))break e;v=v[H]}c=c[c.length-1],w=v[c],g=g(w),g!=w&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(g){var v=[],w;for(w in g)Object.prototype.hasOwnProperty.call(g,w)&&v.push([w,g[w]]);return v}});var u=u||{},f=this||self;function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function b(c,g,v){return c.call.apply(c.bind,arguments)}function y(c,g,v){return y=b,y.apply(null,arguments)}function E(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function A(c,g){function v(){}v.prototype=g.prototype,c.Z=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(w,H,W){for(var ye=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ye[Le-2]=arguments[Le];return g.prototype[H].apply(w,ye)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function O(c){const g=c.length;if(g>0){const v=Array(g);for(let w=0;w<g;w++)v[w]=c[w];return v}return[]}function me(c,g){for(let w=1;w<arguments.length;w++){const H=arguments[w];var v=typeof H;if(v=v!="object"?v:H?Array.isArray(H)?"array":v:"null",v=="array"||v=="object"&&typeof H.length=="number"){v=c.length||0;const W=H.length||0;c.length=v+W;for(let ye=0;ye<W;ye++)c[v+ye]=H[ye]}else c.push(H)}}class ae{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ge(c){f.setTimeout(()=>{throw c},0)}function I(){var c=D;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class xe{constructor(){this.h=this.g=null}add(g,v){const w=Ve.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Ve=new ae(()=>new mt,c=>c.reset());class mt{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,Qe=!1,D=new xe,R=()=>{const c=Promise.resolve(void 0);vt=()=>{c.then(N)}};function N(){for(var c;c=I();){try{c.h.call(c.g)}catch(v){ge(v)}var g=Ve;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}Qe=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return c})();function C(c){return/^[\s\xa0]*$/.test(c)}function Kt(c,g){L.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}A(Kt,L),Kt.prototype.init=function(c,g){const v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Kt.Z.h.call(this)},Kt.prototype.h=function(){Kt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ln="closure_listenable_"+(Math.random()*1e6|0),J=0;function _e(c,g,v,w,H){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=H,this.key=++J,this.da=this.fa=!1}function De(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function wt(c,g,v){for(const w in c)g.call(v,c[w],w,c)}function At(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function j(c){const g={};for(const v in c)g[v]=c[v];return g}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(c,g){let v,w;for(let H=1;H<arguments.length;H++){w=arguments[H];for(v in w)c[v]=w[v];for(let W=0;W<ie.length;W++)v=ie[W],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function ve(c){this.src=c,this.g={},this.h=0}ve.prototype.add=function(c,g,v,w,H){const W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);const ye=at(c,g,w,H);return ye>-1?(g=c[ye],v||(g.fa=!1)):(g=new _e(g,this.src,W,!!w,H),g.fa=v,c.push(g)),g};function Be(c,g){const v=g.type;if(v in c.g){var w=c.g[v],H=Array.prototype.indexOf.call(w,g,void 0),W;(W=H>=0)&&Array.prototype.splice.call(w,H,1),W&&(De(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function at(c,g,v,w){for(let H=0;H<c.length;++H){const W=c[H];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==w)return H}return-1}var Je="closure_lm_"+(Math.random()*1e6|0),$t={};function Xe(c,g,v,w,H){if(Array.isArray(g)){for(let W=0;W<g.length;W++)Xe(c,g[W],v,w,H);return null}return v=hr(v),c&&c[ln]?c.J(g,v,m(w)?!!w.capture:!1,H):pn(c,g,v,!1,w,H)}function pn(c,g,v,w,H,W){if(!g)throw Error("Invalid event type");const ye=m(H)?!!H.capture:!!H;let Le=Ii(c);if(Le||(c[Je]=Le=new ve(c)),v=Le.add(g,v,w,ye,W),v.proxy)return v;if(w=gs(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)U||(H=ye),H===void 0&&(H=!1),c.addEventListener(g.toString(),w,H);else if(c.attachEvent)c.attachEvent(Mn(g.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function gs(){function c(v){return g.call(c.src,c.listener,v)}const g=qr;return c}function cr(c,g,v,w,H){if(Array.isArray(g))for(var W=0;W<g.length;W++)cr(c,g[W],v,w,H);else w=m(w)?!!w.capture:!!w,v=hr(v),c&&c[ln]?(c=c.i,W=String(g).toString(),W in c.g&&(g=c.g[W],v=at(g,v,w,H),v>-1&&(De(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete c.g[W],c.h--)))):c&&(c=Ii(c))&&(g=c.g[g.toString()],c=-1,g&&(c=at(g,v,w,H)),(v=c>-1?g[c]:null)&&ri(v))}function ri(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ln])Be(g.i,c);else{var v=c.type,w=c.proxy;g.removeEventListener?g.removeEventListener(v,w,c.capture):g.detachEvent?g.detachEvent(Mn(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=Ii(g))?(Be(v,c),v.h==0&&(v.src=null,g[Je]=null)):De(c)}}}function Mn(c){return c in $t?$t[c]:$t[c]="on"+c}function qr(c,g){if(c.da)c=!0;else{g=new Kt(g,this);const v=c.listener,w=c.ha||c.src;c.fa&&ri(c),c=v.call(w,g)}return c}function Ii(c){return c=c[Je],c instanceof ve?c:null}var ur="__closure_events_fn_"+(Math.random()*1e9>>>0);function hr(c){return typeof c=="function"?c:(c[ur]||(c[ur]=function(g){return c.handleEvent(g)}),c[ur])}function cn(){z.call(this),this.i=new ve(this),this.M=this,this.G=null}A(cn,z),cn.prototype[ln]=!0,cn.prototype.removeEventListener=function(c,g,v,w){cr(this,c,g,v,w)};function sn(c,g){var v,w=c.G;if(w)for(v=[];w;w=w.G)v.push(w);if(c=c.M,w=g.type||g,typeof g=="string")g=new L(g,c);else if(g instanceof L)g.target=g.target||c;else{var H=g;g=new L(w,c),pe(g,H)}H=!0;let W,ye;if(v)for(ye=v.length-1;ye>=0;ye--)W=g.g=v[ye],H=Yi(W,w,!0,g)&&H;if(W=g.g=c,H=Yi(W,w,!0,g)&&H,H=Yi(W,w,!1,g)&&H,v)for(ye=0;ye<v.length;ye++)W=g.g=v[ye],H=Yi(W,w,!1,g)&&H}cn.prototype.N=function(){if(cn.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const v=c.g[g];for(let w=0;w<v.length;w++)De(v[w]);delete c.g[g],c.h--}}this.G=null},cn.prototype.J=function(c,g,v,w){return this.i.add(String(c),g,!1,v,w)},cn.prototype.K=function(c,g,v,w){return this.i.add(String(c),g,!0,v,w)};function Yi(c,g,v,w){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let H=!0;for(let W=0;W<g.length;++W){const ye=g[W];if(ye&&!ye.da&&ye.capture==v){const Le=ye.listener,Ht=ye.ha||ye.src;ye.fa&&Be(c.i,ye),H=Le.call(Ht,w)!==!1&&H}}return H&&!w.defaultPrevented}function za(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(c,g||0)}function Ms(c){c.g=za(()=>{c.g=null,c.i&&(c.i=!1,Ms(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Sn extends z{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(c){z.call(this),this.h=c,this.g={}}A(Xi,z);var xs=[];function Os(c){wt(c.g,function(g,v){this.g.hasOwnProperty(v)&&ri(g)},c),c.g={}}Xi.prototype.N=function(){Xi.Z.N.call(this),Os(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ci=f.JSON.stringify,ki=f.JSON.parse,Gs=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Q(){}function be(){}var Oe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Se(){L.call(this,"d")}A(Se,L);function nt(){L.call(this,"c")}A(nt,L);var et={},Gn=null;function ps(){return Gn=Gn||new cn}et.Ia="serverreachability";function Cn(c){L.call(this,et.Ia,c)}A(Cn,L);function Zi(c){const g=ps();sn(g,new Cn(g))}et.STAT_EVENT="statevent";function Ks(c,g){L.call(this,et.STAT_EVENT,c),this.stat=g}A(Ks,L);function rn(c){const g=ps();sn(g,new Ks(g,c))}et.Ja="timingevent";function Ni(c,g){L.call(this,et.Ja,c),this.size=g}A(Ni,L);function Kn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},g)}function wn(){this.g=!0}wn.prototype.ua=function(){this.g=!1};function Il(c,g,v,w,H,W){c.info(function(){if(c.g)if(W){var ye="",Le=W.split("&");for(let bt=0;bt<Le.length;bt++){var Ht=Le[bt].split("=");if(Ht.length>1){const He=Ht[0];Ht=Ht[1];const Bt=He.split("_");ye=Bt.length>=2&&Bt[1]=="type"?ye+(He+"="+Ht+"&"):ye+(He+"=redacted&")}}}else ye=null;else ye=W;return"XMLHTTP REQ ("+w+") [attempt "+H+"]: "+g+`
`+v+`
`+ye})}function Hr(c,g,v,w,H,W,ye){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+H+"]: "+g+`
`+v+`
`+W+" "+ye})}function ys(c,g,v,w){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Cl(c,v)+(w?" "+w:"")})}function Ls(c,g){c.info(function(){return"TIMEOUT: "+g})}wn.prototype.info=function(){};function Cl(c,g){if(!c.g)return g;if(!g)return null;try{const W=JSON.parse(g);if(W){for(c=0;c<W.length;c++)if(Array.isArray(W[c])){var v=W[c];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var H=w[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ye=1;ye<w.length;ye++)w[ye]=""}}}}return Ci(W)}catch{return g}}var Di={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ji;function Mi(){}A(Mi,Q),Mi.prototype.g=function(){return new XMLHttpRequest},Ji=new Mi;function Qn(c){return encodeURIComponent(String(c))}function Fr(c){var g=1;c=c.split(":");const v=[];for(;g>0&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function Wn(c,g,v,w){this.j=c,this.i=g,this.l=v,this.S=w||1,this.V=new Xi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}var An={},xn={};function yi(c,g,v){c.M=1,c.A=Qs(an(g)),c.u=v,c.R=!0,_s(c,null)}function _s(c,g){c.F=Date.now(),ns(c),c.B=an(c.A);var v=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),de(v.i,"t",w),c.C=0,v=c.j.L,c.h=new es,c.g=Ss(c.j,v?g:null,!c.u),c.P>0&&(c.O=new Sn(y(c.Y,c,c.g),c.P)),g=c.V,v=c.g,w=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(xs[0]=H.toString()),H=xs);for(let W=0;W<H.length;W++){const ye=Xe(v,H[W],w||g.handleEvent,!1,g.h||g);if(!ye)break;g.g[ye.key]=ye}g=c.J?j(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),Zi(),Il(c.i,c.v,c.B,c.l,c.S,c.u)}Wn.prototype.ba=function(c){c=c.target;const g=this.O;g&&it(c)==3?g.j():this.Y(c)},Wn.prototype.Y=function(c){try{if(c==this.g)e:{const Le=it(this.g),Ht=this.g.ya(),bt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||$e(this.g)))){this.K||Le!=4||Ht==7||(Ht==8||bt<=0?Zi(3):Zi(2)),xi(this);var g=this.g.ca();this.X=g;var v=dr(this);if(this.o=g==200,Hr(this.i,this.v,this.B,this.l,this.S,Le,g),this.o){if(this.U&&!this.L){t:{if(this.g){var w,H=this.g;if((w=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(w)){var W=w;break t}}W=null}if(c=W)ys(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bs(this,c);else{this.o=!1,this.m=3,rn(12),Oi(this),Ui(this);break e}}if(this.R){c=!0;let He;for(;!this.K&&this.C<v.length;)if(He=ts(this,v),He==xn){Le==4&&(this.m=4,rn(14),c=!1),ys(this.i,this.l,null,"[Incomplete Response]");break}else if(He==An){this.m=4,rn(15),ys(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else ys(this.i,this.l,He,null),bs(this,He);if(Vs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||v.length!=0||this.h.h||(this.m=1,rn(16),c=!1),this.o=this.o&&c,!c)ys(this.i,this.l,v,"[Invalid Chunked Response]"),Oi(this),Ui(this);else if(v.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),dt(ye),ye.P=!0,rn(11))}}else ys(this.i,this.l,v,null),bs(this,v);Le==4&&Oi(this),this.o&&!this.K&&(Le==4?ei(this.j,this):(this.o=!1,ns(this)))}else Yt(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Oi(this),Ui(this)}}}catch{}finally{}};function dr(c){if(!Vs(c))return c.g.la();const g=$e(c.g);if(g==="")return"";let v="";const w=g.length,H=it(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Oi(c),Ui(c),"";c.h.i=new f.TextDecoder}for(let W=0;W<w;W++)c.h.h=!0,v+=c.h.i.decode(g[W],{stream:!(H&&W==w-1)});return g.length=0,c.h.g+=v,c.C=0,c.h.g}function Vs(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ts(c,g){var v=c.C,w=g.indexOf(`
`,v);return w==-1?xn:(v=Number(g.substring(v,w)),isNaN(v)?An:(w+=1,w+v>g.length?xn:(g=g.slice(w,w+v),c.C=w+v,g)))}Wn.prototype.cancel=function(){this.K=!0,Oi(this)};function ns(c){c.T=Date.now()+c.H,Gr(c,c.H)}function Gr(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Kn(y(c.aa,c),g)}function xi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Wn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ls(this.i,this.B),this.M!=2&&(Zi(),rn(17)),Oi(this),this.m=2,Ui(this)):Gr(this,this.T-c)};function Ui(c){c.j.I==0||c.K||ei(c.j,c)}function Oi(c){xi(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,Os(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function bs(c,g){try{var v=c.j;if(v.I!=0&&(v.g==c||vs(v.h,c))){if(!c.L&&vs(v.h,c)&&v.I==3){try{var w=v.Ba.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var H=w;if(H[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Yn(v),Qt(v);else break e;It(v),rn(18)}}else v.xa=H[1],0<v.xa-v.K&&H[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Kn(y(v.Va,v),6e3));is(v.h)<=1&&v.ta&&(v.ta=void 0)}else _n(v,11)}else if((c.L||v.g==c)&&Yn(v),!C(g))for(H=v.Ba.g.parse(g),g=0;g<H.length;g++){let bt=H[g];const He=bt[0];if(!(He<=v.K))if(v.K=He,bt=bt[1],v.I==2)if(bt[0]=="c"){v.M=bt[1],v.ba=bt[2];const Bt=bt[3];Bt!=null&&(v.ka=Bt,v.j.info("VER="+v.ka));const Ln=bt[4];Ln!=null&&(v.za=Ln,v.j.info("SVER="+v.za));const bi=bt[5];bi!=null&&typeof bi=="number"&&bi>0&&(w=1.5*bi,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const js=c.g;if(js){const Ka=js.g?js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var W=w.h;W.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Qr(W,W.h),W.h=null))}if(w.G){const Eo=js.g?js.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(w.wa=Eo,Ut(w.J,w.G,Eo))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var ye=c;if(w.na=qi(w,w.L?w.ba:null,w.W),ye.L){Ua(w.h,ye);var Le=ye,Ht=w.O;Ht&&(Le.H=Ht),Le.D&&(xi(Le),ns(Le)),w.g=ye}else hn(w);v.i.length>0&&fe(v)}else bt[0]!="stop"&&bt[0]!="close"||_n(v,7);else v.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?_n(v,7):qt(v):bt[0]!="noop"&&v.l&&v.l.qa(bt),v.A=0)}}Zi(4)}catch{}}var vn=class{constructor(c,g){this.g=c,this.map=g}};function Kr(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ba(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function is(c){return c.h?1:c.g?c.g.size:0}function vs(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Qr(c,g){c.g?c.g.add(g):c.h=g}function Ua(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Kr.prototype.cancel=function(){if(this.i=qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function qa(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.G);return g}return O(c.i)}var Wr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fr(c,g){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const w=c[v].indexOf("=");let H,W=null;w>=0?(H=c[v].substring(0,w),W=c[v].substring(w+1)):H=c[v],g(H,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function yn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof yn?(this.l=c.l,un(this,c.j),this.o=c.o,this.g=c.g,Ts(this,c.u),this.h=c.h,Ha(this,$(c.i)),this.m=c.m):c&&(g=String(c).match(Wr))?(this.l=!1,un(this,g[1]||"",!0),this.o=Es(g[2]||""),this.g=Es(g[3]||"",!0),Ts(this,g[4]),this.h=Es(g[5]||"",!0),Ha(this,g[6]||"",!0),this.m=Es(g[7]||"")):(this.l=!1,this.i=new $s(null,this.l))}yn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(mr(g,gr,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(mr(g,gr,!0),"@"),c.push(Qn(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(mr(v,v.charAt(0)=="/"?Ga:Fa,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",mr(v,To)),c.join("")},yn.prototype.resolve=function(c){const g=an(this);let v=!!c.j;v?un(g,c.j):v=!!c.o,v?g.o=c.o:v=!!c.g,v?g.g=c.g:v=c.u!=null;var w=c.h;if(v)Ts(g,c.u);else if(v=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var H=g.h.lastIndexOf("/");H!=-1&&(w=g.h.slice(0,H+1)+w)}if(H=w,H==".."||H==".")w="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){w=H.lastIndexOf("/",0)==0,H=H.split("/");const W=[];for(let ye=0;ye<H.length;){const Le=H[ye++];Le=="."?w&&ye==H.length&&W.push(""):Le==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),w&&ye==H.length&&W.push("")):(W.push(Le),w=!0)}w=W.join("/")}else w=H}return v?g.h=w:v=c.i.toString()!=="",v?Ha(g,$(c.i)):v=!!c.m,v&&(g.m=c.m),g};function an(c){return new yn(c)}function un(c,g,v){c.j=v?Es(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ts(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function Ha(c,g,v){g instanceof $s?(c.i=g,ne(c.i,c.l)):(v||(g=mr(g,Ws)),c.i=new $s(g,c.l))}function Ut(c,g,v){c.i.set(g,v)}function Qs(c){return Ut(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Es(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function mr(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,ai),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ai(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var gr=/[#\/\?@]/g,Fa=/[#\?:]/g,Ga=/[#\?]/g,Ws=/[#\?@]/g,To=/#/g;function $s(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function _i(c){c.g||(c.g=new Map,c.h=0,c.i&&fr(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=$s.prototype,r.add=function(c,g){_i(this),this.i=null,c=S(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function M(c,g){_i(c),g=S(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function B(c,g){return _i(c),g=S(c,g),c.g.has(g)}r.forEach=function(c,g){_i(this),this.g.forEach(function(v,w){v.forEach(function(H){c.call(g,H,w,this)},this)},this)};function X(c,g){_i(c);let v=[];if(typeof g=="string")B(c,g)&&(v=v.concat(c.g.get(S(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)v=v.concat(c[g]);return v}r.set=function(c,g){return _i(this),this.i=null,c=S(this,c),B(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=X(this,c),c.length>0?String(c[0]):g):g};function de(c,g,v){M(c,g),v.length>0&&(c.i=null,c.g.set(S(c,g),O(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let w=0;w<g.length;w++){var v=g[w];const H=Qn(v);v=X(this,v);for(let W=0;W<v.length;W++){let ye=H;v[W]!==""&&(ye+="="+Qn(v[W])),c.push(ye)}}return this.i=c.join("&")};function $(c){const g=new $s;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function S(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function ne(c,g){g&&!c.j&&(_i(c),c.i=null,c.g.forEach(function(v,w){const H=w.toLowerCase();w!=H&&(M(this,w),de(this,H,v))},c)),c.j=g}function Y(c,g){const v=new wn;if(f.Image){const w=new Image;w.onload=E(Ie,v,"TestLoadImage: loaded",!0,g,w),w.onerror=E(Ie,v,"TestLoadImage: error",!1,g,w),w.onabort=E(Ie,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=E(Ie,v,"TestLoadImage: timeout",!1,g,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else g(!1)}function Ae(c,g){const v=new wn,w=new AbortController,H=setTimeout(()=>{w.abort(),Ie(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:w.signal}).then(W=>{clearTimeout(H),W.ok?Ie(v,"TestPingServer: ok",!0,g):Ie(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),Ie(v,"TestPingServer: error",!1,g)})}function Ie(c,g,v,w,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),w(v)}catch{}}function Re(){this.g=new Gs}function Ee(c){this.i=c.Sb||null,this.h=c.ab||!1}A(Ee,Q),Ee.prototype.g=function(){return new ke(this.i,this.h)};function ke(c,g){cn.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(ke,cn),r=ke.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,Pe(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,je(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Pe(this)),this.g&&(this.readyState=3,Pe(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ut(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ut(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?je(this):Pe(this),this.readyState==3&&ut(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,je(this))},r.Na=function(c){this.g&&(this.response=c,je(this))},r.ga=function(){this.g&&je(this)};function je(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Pe(c)}r.setRequestHeader=function(c,g){this.A.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Pe(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ke.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Rt(c){let g="";return wt(c,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function xt(c,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Rt(v),typeof c=="string"?v!=null&&Qn(v):Ut(c,g,v))}function We(c){cn.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(We,cn);var ot=/^https?$/i,he=["POST","PUT"];r=We.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ji.g(),this.g.onreadystatechange=V(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){dn(this,W);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var H in w)v.set(H,w[H]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())v.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),H=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(he,g,void 0)>=0)||w||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ye]of v)this.g.setRequestHeader(W,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(W){dn(this,W)}};function dn(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,yt(c),ze(c)}function yt(c){c.A||(c.A=!0,sn(c,"complete"),sn(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,sn(this,"complete"),sn(this,"abort"),ze(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ze(this,!0)),We.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?_t(this):this.Xa())},r.Xa=function(){_t(this)};function _t(c){if(c.h&&typeof u<"u"){if(c.v&&it(c)==4)setTimeout(c.Ca.bind(c),0);else if(sn(c,"readystatechange"),it(c)==4){c.h=!1;try{const W=c.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=W===0){let ye=String(c.D).match(Wr)[1]||null;!ye&&f.self&&f.self.location&&(ye=f.self.location.protocol.slice(0,-1)),w=!ot.test(ye?ye.toLowerCase():"")}v=w}if(v)sn(c,"complete"),sn(c,"success");else{c.o=6;try{var H=it(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",yt(c)}}finally{ze(c)}}}}function ze(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,g||sn(c,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function it(c){return c.g?c.g.readyState:0}r.ca=function(){try{return it(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ki(g)}};function $e(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Yt(c){const g={};c=(c.g&&it(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(C(c[w]))continue;var v=Fr(c[w]);const H=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[H]||[];g[H]=W,W.push(v)}At(g,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function jt(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function lt(c){this.za=0,this.i=[],this.j=new wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jt("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jt("baseRetryDelayMs",5e3,c),this.Za=jt("retryDelaySeedMs",1e4,c),this.Ta=jt("forwardChannelMaxRetries",2,c),this.va=jt("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Kr(c&&c.concurrentRequestLimit),this.Ba=new Re,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=lt.prototype,r.ka=8,r.I=1,r.connect=function(c,g,v,w){rn(0),this.W=c,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=qi(this,null,this.W),fe(this)};function qt(c){if(Tt(c),c.I==3){var g=c.V++,v=an(c.J);if(Ut(v,"SID",c.M),Ut(v,"RID",g),Ut(v,"TYPE","terminate"),Ne(c,v),g=new Wn(c,c.j,g),g.M=2,g.A=Qs(an(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=Ss(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ns(g)}Li(c)}function Qt(c){c.g&&(dt(c),c.g.cancel(),c.g=null)}function Tt(c){Qt(c),c.v&&(f.clearTimeout(c.v),c.v=null),Yn(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function fe(c){if(!Ba(c.h)&&!c.m){c.m=!0;var g=c.Ea;vt||R(),Qe||(vt(),Qe=!0),D.add(g,c),c.D=0}}function qe(c,g){return is(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Kn(y(c.Ea,c,g),ti(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new Wn(this,this.j,c);let W=this.o;if(this.U&&(W?(W=j(W),pe(W,this.U)):W=this.U),this.u!==null||this.R||(H.J=W,W=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=ht(this,H,g),v=an(this.J),Ut(v,"RID",c),Ut(v,"CVER",22),this.G&&Ut(v,"X-HTTP-Session-Id",this.G),Ne(this,v),W&&(this.R?g="headers="+Qn(Rt(W))+"&"+g:this.u&&xt(v,this.u,W)),Qr(this.h,H),this.Ra&&Ut(v,"TYPE","init"),this.S?(Ut(v,"$req",g),Ut(v,"SID","null"),H.U=!0,yi(H,v,null)):yi(H,v,g),this.I=2}}else this.I==3&&(c?Ue(this,c):this.i.length==0||Ba(this.h)||Ue(this))};function Ue(c,g){var v;g?v=g.l:v=c.V++;const w=an(c.J);Ut(w,"SID",c.M),Ut(w,"RID",v),Ut(w,"AID",c.K),Ne(c,w),c.u&&c.o&&xt(w,c.u,c.o),v=new Wn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),g&&(c.i=g.G.concat(c.i)),g=ht(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Qr(c.h,v),yi(v,w,g)}function Ne(c,g){c.H&&wt(c.H,function(v,w){Ut(g,w,v)}),c.l&&wt({},function(v,w){Ut(g,w,v)})}function ht(c,g,v){v=Math.min(c.i.length,v);const w=c.l?y(c.l.Ka,c.l,c):null;e:{var H=c.i;let Le=-1;for(;;){const Ht=["count="+v];Le==-1?v>0?(Le=H[0].g,Ht.push("ofs="+Le)):Le=0:Ht.push("ofs="+Le);let bt=!0;for(let He=0;He<v;He++){var W=H[He].g;const Bt=H[He].map;if(W-=Le,W<0)Le=Math.max(0,H[He].g-100),bt=!1;else try{W="req"+W+"_"||"";try{var ye=Bt instanceof Map?Bt:Object.entries(Bt);for(const[Ln,bi]of ye){let js=bi;m(bi)&&(js=Ci(bi)),Ht.push(W+Ln+"="+encodeURIComponent(js))}}catch(Ln){throw Ht.push(W+"type="+encodeURIComponent("_badmap")),Ln}}catch{w&&w(Bt)}}if(bt){ye=Ht.join("&");break e}}ye=void 0}return c=c.i.splice(0,v),g.G=c,ye}function hn(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;vt||R(),Qe||(vt(),Qe=!0),D.add(g,c),c.A=0}}function It(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Kn(y(c.Da,c),ti(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,$n(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Kn(y(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Qt(this),$n(this))};function dt(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function $n(c){c.g=new Wn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=an(c.na);Ut(g,"RID","rpc"),Ut(g,"SID",c.M),Ut(g,"AID",c.K),Ut(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ut(g,"TO",c.ia),Ut(g,"TYPE","xmlhttp"),Ne(c,g),c.u&&c.o&&xt(g,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Qs(an(g)),v.u=null,v.R=!0,_s(v,c)}r.Va=function(){this.C!=null&&(this.C=null,Qt(this),It(this),rn(19))};function Yn(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function ei(c,g){var v=null;if(c.g==g){Yn(c),dt(c),c.g=null;var w=2}else if(vs(c.h,g))v=g.G,Ua(c.h,g),w=1;else return;if(c.I!=0){if(g.o)if(w==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var H=c.D;w=ps(),sn(w,new Ni(w,v)),fe(c)}else hn(c);else if(H=g.m,H==3||H==0&&g.X>0||!(w==1&&qe(c,g)||w==2&&It(c)))switch(v&&v.length>0&&(g=c.h,g.i=g.i.concat(v)),H){case 1:_n(c,5);break;case 4:_n(c,10);break;case 3:_n(c,6);break;default:_n(c,2)}}}function ti(c,g){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*g}function _n(c,g){if(c.j.info("Error code "+g),g==2){var v=y(c.bb,c),w=c.Ua;const H=!w;w=new yn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||un(w,"https"),Qs(w),H?Y(w.toString(),v):Ae(w.toString(),v)}else rn(2);c.I=0,c.l&&c.l.pa(g),Li(c),Tt(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Li(c){if(c.I=0,c.ja=[],c.l){const g=qa(c.h);(g.length!=0||c.i.length!=0)&&(me(c.ja,g),me(c.ja,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.oa()}}function qi(c,g,v){var w=v instanceof yn?an(v):new yn(v);if(w.g!="")g&&(w.g=g+"."+w.g),Ts(w,w.u);else{var H=f.location;w=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;const W=new yn(null);w&&un(W,w),g&&(W.g=g),H&&Ts(W,H),v&&(W.h=v),w=W}return v=c.G,g=c.wa,v&&g&&Ut(w,v,g),Ut(w,"VER",c.ka),Ne(c,w),w}function Ss(c,g,v){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new We(new Ee({ab:v})):new We(c.ma),g.Fa(c.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ys(){}r=Ys.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Vi(){}Vi.prototype.g=function(c,g){return new Ot(c,g)};function Ot(c,g){cn.call(this),this.g=new lt(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!C(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new On(this)}A(Ot,cn),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){qt(this.g)},Ot.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Ci(c),c=v);g.i.push(new vn(g.Ya++,c)),g.I==3&&fe(g)},Ot.prototype.N=function(){this.g.l=null,delete this.j,qt(this.g),delete this.g,Ot.Z.N.call(this)};function ji(c){Se.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}A(ji,Se);function oi(){nt.call(this),this.status=1}A(oi,nt);function On(c){this.g=c}A(On,Ys),On.prototype.ra=function(){sn(this.g,"a")},On.prototype.qa=function(c){sn(this.g,new ji(c))},On.prototype.pa=function(c){sn(this.g,new oi)},On.prototype.oa=function(){sn(this.g,"b")},Vi.prototype.createWebChannel=Vi.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,XT=function(){return new Vi},YT=function(){return ps()},$T=et,Cm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Di.NO_ERROR=0,Di.TIMEOUT=8,Di.HTTP_ERROR=6,ch=Di,Vt.COMPLETE="complete",WT=Vt,be.EventType=Oe,Oe.OPEN="a",Oe.CLOSE="b",Oe.ERROR="c",Oe.MESSAGE="d",cn.prototype.listen=cn.prototype.J,pc=be,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,QT=We}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const Jb="@firebase/firestore",ev="4.9.2";class wi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wi.UNAUTHENTICATED=new wi(null),wi.GOOGLE_CREDENTIALS=new wi("google-credentials-uid"),wi.FIRST_PARTY=new wi("first-party-uid"),wi.MOCK_USER=new wi("mock-user");let Sl="12.3.0";const mo=new Ym("@firebase/firestore");function Jo(){return mo.logLevel}function we(r,...e){if(mo.logLevel<=Nt.DEBUG){const n=e.map(og);mo.debug(`Firestore (${Sl}): ${r}`,...n)}}function Pr(r,...e){if(mo.logLevel<=Nt.ERROR){const n=e.map(og);mo.error(`Firestore (${Sl}): ${r}`,...n)}}function dl(r,...e){if(mo.logLevel<=Nt.WARN){const n=e.map(og);mo.warn(`Firestore (${Sl}): ${r}`,...n)}}function og(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ye(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,ZT(r,s,n)}function ZT(r,e,n){let s=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Pr(s),new Error(s)}function zt(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||ZT(e,l,s)}function rt(r,e){return r}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class JT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(wi.UNAUTHENTICATED)))}shutdown(){}}class vI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class TI{constructor(e){this.t=e,this.currentUser=wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){zt(this.o===void 0,42304);let s=this.i;const l=b=>this.i!==s?(s=this.i,n(b)):Promise.resolve();let u=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new sr,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const b=u;e.enqueueRetryable((async()=>{await b.promise,await l(this.currentUser)}))},m=b=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((b=>m(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new sr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(zt(typeof s.accessToken=="string",31837,{l:s}),new JT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zt(e===null||typeof e=="string",2055,{h:e}),new wi(e)}}class EI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=wi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new EI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(wi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){zt(this.o===void 0,3512);const s=u=>{u.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,we("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const l=u=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(zt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new tv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function AI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class lg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=AI(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<n&&(s+=e.charAt(l[u]%62))}return s}}function Dt(r,e){return r<e?-1:r>e?1:0}function km(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),u=e.charAt(s);if(l!==u)return fm(l)===fm(u)?Dt(l,u):fm(l)?1:-1}return Dt(r.length,e.length)}const RI=55296,II=57343;function fm(r){const e=r.charCodeAt(0);return e>=RI&&e<=II}function fl(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}const nv="__name__";class tr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ye(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ye(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const u=tr.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Dt(e.length,n.length)}static compareSegments(e,n){const s=tr.isNumericId(e),l=tr.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?tr.extractNumericId(e).compare(tr.extractNumericId(n)):km(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ia.fromString(e.substring(4,e.length-2))}}class nn extends tr{construct(e,n,s){return new nn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Te(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new nn(n)}static emptyPath(){return new nn([])}}const CI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gi extends tr{construct(e,n,s){return new gi(e,n,s)}static isValidIdentifier(e){return CI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new gi([nv])}static fromServerFormat(e){const n=[];let s="",l=0;const u=()=>{if(s.length===0)throw new Te(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const m=e[l];if(m==="\\"){if(l+1===e.length)throw new Te(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[l+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new Te(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,l+=2}else m==="`"?(f=!f,l++):m!=="."||f?(s+=m,l++):(u(),l++)}if(u(),f)throw new Te(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gi(n)}static emptyPath(){return new gi([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(nn.fromString(e))}static fromName(e){return new Ge(nn.fromString(e).popFirst(5))}static empty(){return new Ge(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new nn(e.slice()))}}function e0(r,e,n){if(!n)throw new Te(se.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kI(r,e,n,s){if(e===!0&&s===!0)throw new Te(se.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function iv(r){if(!Ge.isDocumentKey(r))throw new Te(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function sv(r){if(Ge.isDocumentKey(r))throw new Te(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function t0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Uh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ye(12329,{type:typeof r})}function $i(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Te(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uh(r);throw new Te(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function Fn(r,e){const n={typeString:r};return e&&(n.value=e),n}function Bc(r,e){if(!t0(r))throw new Te(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Te(se.INVALID_ARGUMENT,n);return!0}const rv=-62135596800,av=1e6;class gn{static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*av);return new gn(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rv)throw new Te(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bc(e,gn._jsonSchema))return new gn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gn._jsonSchemaVersion="firestore/timestamp/1.0",gn._jsonSchema={type:Fn("string",gn._jsonSchemaVersion),seconds:Fn("number"),nanoseconds:Fn("number")};class tt{static fromTimestamp(e){return new tt(e)}static min(){return new tt(new gn(0,0))}static max(){return new tt(new gn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const kc=-1;function NI(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=tt.fromTimestamp(s===1e9?new gn(n+1,0):new gn(n,s));return new Da(l,Ge.empty(),e)}function DI(r){return new Da(r.readTime,r.key,kc)}class Da{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Da(tt.min(),Ge.empty(),kc)}static max(){return new Da(tt.max(),Ge.empty(),kc)}}function MI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ge.comparator(r.documentKey,e.documentKey),n!==0?n:Dt(r.largestBatchId,e.largestBatchId))}const xI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function wl(r){if(r.code!==se.FAILED_PRECONDITION||r.message!==xI)throw r;we("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,s)=>{n(e)}))}static reject(e){return new ue(((n,s)=>{s(e)}))}static waitFor(e){return new ue(((n,s)=>{let l=0,u=0,f=!1;e.forEach((m=>{++l,m.next((()=>{++u,f&&u===l&&n()}),(b=>s(b)))})),f=!0,u===l&&n()}))}static or(e){let n=ue.resolve(!1);for(const s of e)n=n.next((l=>l?ue.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,u)=>{s.push(n.call(this,l,u))})),this.waitFor(s)}static mapArray(e,n){return new ue(((s,l)=>{const u=e.length,f=new Array(u);let m=0;for(let b=0;b<u;b++){const y=b;n(e[y]).next((E=>{f[y]=E,++m,m===u&&s(f)}),(E=>l(E)))}}))}static doWhile(e,n){return new ue(((s,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):s()};u()}))}}function LI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Al(r){return r.name==="IndexedDbTransactionError"}class qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qh.ce=-1;const cg=-1;function Uc(r){return r==null}function Sh(r){return r===0&&1/r==-1/0}function VI(r){return typeof r=="number"&&Number.isInteger(r)&&!Sh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const n0="";function jI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=ov(e)),e=PI(r.get(n),e);return ov(e)}function PI(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const u=r.charAt(l);switch(u){case"\0":n+="";break;case n0:n+="";break;default:n+=u}}return n}function ov(r){return r+n0+""}function lv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ja(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function i0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class En{constructor(e,n){this.comparator=e,this.root=n||mi.EMPTY}insert(e,n){return new En(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new En(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}}class th{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mi{constructor(e,n,s,l,u){this.key=e,this.value=n,this.color=s??mi.RED,this.left=l??mi.EMPTY,this.right=u??mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,u){return new mi(e??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const u=s(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,s),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return mi.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1;mi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,n,s,l,u){return this}insert(e,n,s){return new mi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(e){this.comparator=e,this.data=new En(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cv(this.data.getIterator())}getIteratorFrom(e){return new cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Zn(this.comparator);return n.data=e,n}}class cv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fs{constructor(e){this.fields=e,e.sort(gi.comparator)}static empty(){return new fs([])}unionWith(e){let n=new Zn(gi.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new fs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class s0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new s0("Invalid base64 string: "+u):u}})(e);return new pi(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new pi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const zI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(r){if(zt(!!r,39018),typeof r=="string"){let e=0;const n=zI.exec(r);if(zt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Dn(r.seconds),nanos:Dn(r.nanos)}}function Dn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function xa(r){return typeof r=="string"?pi.fromBase64String(r):pi.fromUint8Array(r)}const r0="server_timestamp",a0="__type__",o0="__previous_value__",l0="__local_write_time__";function ug(r){return(r?.mapValue?.fields||{})[a0]?.stringValue===r0}function Hh(r){const e=r.mapValue.fields[o0];return ug(e)?Hh(e):e}function Nc(r){const e=Ma(r.mapValue.fields[l0].timestampValue);return new gn(e.seconds,e.nanos)}class BI{constructor(e,n,s,l,u,f,m,b,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=b,this.useFetchStreams=y,this.isUsingEmulator=E}}const wh="(default)";class Dc{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new Dc("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Dc&&e.projectId===this.projectId&&e.database===this.database}}const c0="__type__",UI="__max__",nh={mapValue:{}},u0="__vector__",Ah="value";function Oa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ug(r)?4:HI(r)?9007199254740991:qI(r)?10:11:Ye(28295,{value:r})}function lr(r,e){if(r===e)return!0;const n=Oa(r);if(n!==Oa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Nc(r).isEqual(Nc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Ma(l.timestampValue),m=Ma(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,u){return xa(l.bytesValue).isEqual(xa(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,u){return Dn(l.geoPointValue.latitude)===Dn(u.geoPointValue.latitude)&&Dn(l.geoPointValue.longitude)===Dn(u.geoPointValue.longitude)})(r,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Dn(l.integerValue)===Dn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=Dn(l.doubleValue),m=Dn(u.doubleValue);return f===m?Sh(f)===Sh(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return fl(r.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},m=u.mapValue.fields||{};if(lv(f)!==lv(m))return!1;for(const b in f)if(f.hasOwnProperty(b)&&(m[b]===void 0||!lr(f[b],m[b])))return!1;return!0})(r,e);default:return Ye(52216,{left:r})}}function Mc(r,e){return(r.values||[]).find((n=>lr(n,e)))!==void 0}function ml(r,e){if(r===e)return 0;const n=Oa(r),s=Oa(e);if(n!==s)return Dt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dt(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=Dn(u.integerValue||u.doubleValue),b=Dn(f.integerValue||f.doubleValue);return m<b?-1:m>b?1:m===b?0:isNaN(m)?isNaN(b)?0:-1:1})(r,e);case 3:return uv(r.timestampValue,e.timestampValue);case 4:return uv(Nc(r),Nc(e));case 5:return km(r.stringValue,e.stringValue);case 6:return(function(u,f){const m=xa(u),b=xa(f);return m.compareTo(b)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),b=f.split("/");for(let y=0;y<m.length&&y<b.length;y++){const E=Dt(m[y],b[y]);if(E!==0)return E}return Dt(m.length,b.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Dt(Dn(u.latitude),Dn(f.latitude));return m!==0?m:Dt(Dn(u.longitude),Dn(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return hv(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},b=f.fields||{},y=m[Ah]?.arrayValue,E=b[Ah]?.arrayValue,A=Dt(y?.values?.length||0,E?.values?.length||0);return A!==0?A:hv(y,E)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===nh.mapValue&&f===nh.mapValue)return 0;if(u===nh.mapValue)return 1;if(f===nh.mapValue)return-1;const m=u.fields||{},b=Object.keys(m),y=f.fields||{},E=Object.keys(y);b.sort(),E.sort();for(let A=0;A<b.length&&A<E.length;++A){const V=km(b[A],E[A]);if(V!==0)return V;const O=ml(m[b[A]],y[E[A]]);if(O!==0)return O}return Dt(b.length,E.length)})(r.mapValue,e.mapValue);default:throw Ye(23264,{he:n})}}function uv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Dt(r,e);const n=Ma(r),s=Ma(e),l=Dt(n.seconds,s.seconds);return l!==0?l:Dt(n.nanos,s.nanos)}function hv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const u=ml(n[l],s[l]);if(u)return u}return Dt(n.length,s.length)}function gl(r){return Nm(r)}function Nm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Ma(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return xa(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ge.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const u of n.values||[])l?l=!1:s+=",",s+=Nm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of s)u?u=!1:l+=",",l+=`${f}:${Nm(n.fields[f])}`;return l+"}"})(r.mapValue):Ye(61005,{value:r})}function uh(r){switch(Oa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hh(r);return e?16+uh(e):16;case 5:return 2*r.stringValue.length;case 6:return xa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,u)=>l+uh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return ja(s.fields,((u,f)=>{l+=u.length+uh(f)})),l})(r.mapValue);default:throw Ye(13486,{value:r})}}function dv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Dm(r){return!!r&&"integerValue"in r}function hg(r){return!!r&&"arrayValue"in r}function fv(r){return!!r&&"nullValue"in r}function mv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hh(r){return!!r&&"mapValue"in r}function qI(r){return(r?.mapValue?.fields||{})[c0]?.stringValue===u0}function Ec(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ja(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ec(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ec(r.arrayValue.values[n]);return e}return{...r}}function HI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===UI}class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(n)}setAll(e){let n=gi.emptyPath(),s={},l=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const b=this.getFieldsMap(n);this.applyChanges(b,s,l),s={},l=[],n=m.popLast()}f?s[m.lastSegment()]=Ec(f):l.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,l)}delete(e){const n=this.field(e.popLast());hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];hh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){ja(n,((l,u)=>e[l]=u));for(const l of s)delete e[l]}clone(){return new Bi(Ec(this.value))}}function h0(r){const e=[];return ja(r.fields,((n,s)=>{const l=new gi([n]);if(hh(s)){const u=h0(s.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new fs(e)}class si{constructor(e,n,s,l,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new si(e,0,tt.min(),tt.min(),tt.min(),Bi.empty(),0)}static newFoundDocument(e,n,s,l){return new si(e,1,n,tt.min(),s,l,0)}static newNoDocument(e,n){return new si(e,2,n,tt.min(),tt.min(),Bi.empty(),0)}static newUnknownDocument(e,n){return new si(e,3,n,tt.min(),tt.min(),Bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function gv(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const u=e[l],f=r.position[l];if(u.field.isKeyField()?s=Ge.comparator(Ge.fromName(f.referenceValue),n.key):s=ml(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function pv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!lr(r.position[n],e.position[n]))return!1;return!0}class Ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function FI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class d0{}class Hn extends d0{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new KI(e,n,s):n==="array-contains"?new $I(e,s):n==="in"?new YI(e,s):n==="not-in"?new XI(e,s):n==="array-contains-any"?new ZI(e,s):new Hn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new QI(e,s):new WI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ml(n,this.value)):n!==null&&Oa(this.value)===Oa(n)&&this.matchesComparison(ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fs extends d0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Fs(e,n)}matches(e){return f0(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function f0(r){return r.op==="and"}function m0(r){return GI(r)&&f0(r)}function GI(r){for(const e of r.filters)if(e instanceof Fs)return!1;return!0}function Mm(r){if(r instanceof Hn)return r.field.canonicalString()+r.op.toString()+gl(r.value);if(m0(r))return r.filters.map((e=>Mm(e))).join(",");{const e=r.filters.map((n=>Mm(n))).join(",");return`${r.op}(${e})`}}function g0(r,e){return r instanceof Hn?(function(s,l){return l instanceof Hn&&s.op===l.op&&s.field.isEqual(l.field)&&lr(s.value,l.value)})(r,e):r instanceof Fs?(function(s,l){return l instanceof Fs&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((u,f,m)=>u&&g0(f,l.filters[m])),!0):!1})(r,e):void Ye(19439)}function p0(r){return r instanceof Hn?(function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`})(r):r instanceof Fs?(function(n){return n.op.toString()+" {"+n.getFilters().map(p0).join(" ,")+"}"})(r):"Filter"}class KI extends Hn{constructor(e,n,s){super(e,n,s),this.key=Ge.fromName(s.referenceValue)}matches(e){const n=Ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class QI extends Hn{constructor(e,n){super(e,"in",n),this.keys=y0("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class WI extends Hn{constructor(e,n){super(e,"not-in",n),this.keys=y0("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function y0(r,e){return(e.arrayValue?.values||[]).map((n=>Ge.fromName(n.referenceValue)))}class $I extends Hn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hg(n)&&Mc(n.arrayValue,this.value)}}class YI extends Hn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mc(this.value.arrayValue,n)}}class XI extends Hn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mc(this.value.arrayValue,n)}}class ZI extends Hn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Mc(this.value.arrayValue,s)))}}class JI{constructor(e,n=null,s=[],l=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function yv(r,e=null,n=[],s=[],l=null,u=null,f=null){return new JI(r,e,n,s,l,u,f)}function dg(r){const e=rt(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Mm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Uc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>gl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>gl(s))).join(",")),e.Te=n}return e.Te}function fg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!FI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!g0(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!pv(r.startAt,e.startAt)&&pv(r.endAt,e.endAt)}function xm(r){return Ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class qc{constructor(e,n=null,s=[],l=[],u=null,f="F",m=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eC(r,e,n,s,l,u,f,m){return new qc(r,e,n,s,l,u,f,m)}function Fh(r){return new qc(r)}function _v(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function _0(r){return r.collectionGroup!==null}function Sc(r){const e=rt(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Zn(gi.comparator);return f.filters.forEach((b=>{b.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Ih(u,s))})),n.has(gi.keyField().canonicalString())||e.Ie.push(new Ih(gi.keyField(),s))}return e.Ie}function rr(r){const e=rt(r);return e.Ee||(e.Ee=tC(e,Sc(r))),e.Ee}function tC(r,e){if(r.limitType==="F")return yv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Ih(l.field,u)}));const n=r.endAt?new Rh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Rh(r.startAt.position,r.startAt.inclusive):null;return yv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Om(r,e){const n=r.filters.concat([e]);return new qc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Lm(r,e,n){return new qc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Gh(r,e){return fg(rr(r),rr(e))&&r.limitType===e.limitType}function b0(r){return`${dg(rr(r))}|lt:${r.limitType}`}function el(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>p0(l))).join(", ")}]`),Uc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>gl(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>gl(l))).join(",")),`Target(${s})`})(rr(r))}; limitType=${r.limitType})`}function Kh(r,e){return e.isFoundDocument()&&(function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ge.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,l){for(const u of Sc(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(f,m,b){const y=gv(f,m,b);return f.inclusive?y<=0:y<0})(s.startAt,Sc(s),l)||s.endAt&&!(function(f,m,b){const y=gv(f,m,b);return f.inclusive?y>=0:y>0})(s.endAt,Sc(s),l))})(r,e)}function nC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function v0(r){return(e,n)=>{let s=!1;for(const l of Sc(r)){const u=iC(l,e,n);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function iC(r,e,n){const s=r.field.isKeyField()?Ge.comparator(e.key,n.key):(function(u,f,m){const b=f.data.field(u),y=m.data.field(u);return b!==null&&y!==null?ml(b,y):Ye(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ye(19790,{direction:r.dir})}}class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,((n,s)=>{for(const[l,u]of s)e(l,u)}))}isEmpty(){return i0(this.inner)}size(){return this.innerSize}}const sC=new En(Ge.comparator);function zr(){return sC}const T0=new En(Ge.comparator);function yc(...r){let e=T0;for(const n of r)e=e.insert(n.key,n);return e}function E0(r){let e=T0;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function co(){return wc()}function S0(){return wc()}function wc(){return new po((r=>r.toString()),((r,e)=>r.isEqual(e)))}const rC=new En(Ge.comparator),aC=new Zn(Ge.comparator);function Mt(...r){let e=aC;for(const n of r)e=e.add(n);return e}const oC=new Zn(Dt);function lC(){return oC}function mg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function w0(r){return{integerValue:""+r}}function A0(r,e){return VI(e)?w0(e):mg(r,e)}class Qh{constructor(){this._=void 0}}function cC(r,e,n){return r instanceof xc?(function(l,u){const f={fields:{[a0]:{stringValue:r0},[l0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&ug(u)&&(u=Hh(u)),u&&(f.fields[o0]=u),{mapValue:f}})(n,e):r instanceof pl?I0(r,e):r instanceof yl?C0(r,e):(function(l,u){const f=R0(l,u),m=bv(f)+bv(l.Ae);return Dm(f)&&Dm(l.Ae)?w0(m):mg(l.serializer,m)})(r,e)}function uC(r,e,n){return r instanceof pl?I0(r,e):r instanceof yl?C0(r,e):n}function R0(r,e){return r instanceof Oc?(function(s){return Dm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class xc extends Qh{}class pl extends Qh{constructor(e){super(),this.elements=e}}function I0(r,e){const n=k0(e);for(const s of r.elements)n.some((l=>lr(l,s)))||n.push(s);return{arrayValue:{values:n}}}class yl extends Qh{constructor(e){super(),this.elements=e}}function C0(r,e){let n=k0(e);for(const s of r.elements)n=n.filter((l=>!lr(l,s)));return{arrayValue:{values:n}}}class Oc extends Qh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bv(r){return Dn(r.integerValue||r.doubleValue)}function k0(r){return hg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Wh{constructor(e,n){this.field=e,this.transform=n}}function hC(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof pl&&l instanceof pl||s instanceof yl&&l instanceof yl?fl(s.elements,l.elements,lr):s instanceof Oc&&l instanceof Oc?lr(s.Ae,l.Ae):s instanceof xc&&l instanceof xc})(r.transform,e.transform)}class dC{constructor(e,n){this.version=e,this.transformResults=n}}class Ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class $h{}function N0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Yh(r.key,Ai.none()):new Hc(r.key,r.data,Ai.none());{const n=r.data,s=Bi.empty();let l=new Zn(gi.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),l=l.add(u)}return new Pa(r.key,s,new fs(l.toArray()),Ai.none())}}function fC(r,e,n){r instanceof Hc?(function(l,u,f){const m=l.value.clone(),b=Tv(l.fieldTransforms,u,f.transformResults);m.setAll(b),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Pa?(function(l,u,f){if(!dh(l.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Tv(l.fieldTransforms,u,f.transformResults),b=u.data;b.setAll(D0(l)),b.setAll(m),u.convertToFoundDocument(f.version,b).setHasCommittedMutations()})(r,e,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Ac(r,e,n,s){return r instanceof Hc?(function(u,f,m,b){if(!dh(u.precondition,f))return m;const y=u.value.clone(),E=Ev(u.fieldTransforms,b,f);return y.setAll(E),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof Pa?(function(u,f,m,b){if(!dh(u.precondition,f))return m;const y=Ev(u.fieldTransforms,b,f),E=f.data;return E.setAll(D0(u)),E.setAll(y),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(r,e,n,s):(function(u,f,m){return dh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function mC(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),u=R0(s.transform,l||null);u!=null&&(n===null&&(n=Bi.empty()),n.set(s.field,u))}return n||null}function vv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&fl(s,l,((u,f)=>hC(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Hc extends $h{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Pa extends $h{constructor(e,n,s,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function D0(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Tv(r,e,n){const s=new Map;zt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const u=r[l],f=u.transform,m=e.data.field(u.field);s.set(u.field,uC(f,m,n[l]))}return s}function Ev(r,e,n){const s=new Map;for(const l of r){const u=l.transform,f=n.data.field(l.field);s.set(l.field,cC(u,f,e))}return s}class Yh extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M0 extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gC{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&fC(u,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ac(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ac(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=S0();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(l.key)?null:m;const b=N0(f,m);b!==null&&s.set(l.key,b),f.isValidDocument()||f.convertToNoDocument(tt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Mt())}isEqual(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,((n,s)=>vv(n,s)))&&fl(this.baseMutations,e.baseMutations,((n,s)=>vv(n,s)))}}class gg{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){zt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return rC})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,s[f].version);return new gg(e,n,s,l)}}class pC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yC{constructor(e,n){this.count=e,this.unchangedNames=n}}var qn,Pt;function x0(r){switch(r){case se.OK:return Ye(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ye(15467,{code:r})}}function O0(r){if(r===void 0)return Pr("GRPC error has no .code"),se.UNKNOWN;switch(r){case qn.OK:return se.OK;case qn.CANCELLED:return se.CANCELLED;case qn.UNKNOWN:return se.UNKNOWN;case qn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case qn.INTERNAL:return se.INTERNAL;case qn.UNAVAILABLE:return se.UNAVAILABLE;case qn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case qn.NOT_FOUND:return se.NOT_FOUND;case qn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case qn.ABORTED:return se.ABORTED;case qn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case qn.DATA_LOSS:return se.DATA_LOSS;default:return Ye(39323,{code:r})}}(Pt=qn||(qn={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";function _C(){return new TextEncoder}const bC=new Ia([4294967295,4294967295],0);function Sv(r){const e=_C().encode(r),n=new KT;return n.update(e),new Uint8Array(n.digest())}function wv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ia([n,s],0),new Ia([l,u],0)]}class pg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new _c(`Invalid padding: ${n}`);if(s<0)throw new _c(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new _c(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ia.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(Ia.fromNumber(s)));return l.compare(bC)===1&&(l=new Ia([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sv(e),[s,l]=wv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,l,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new pg(u,l,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Sv(e),[s,l]=wv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xh{constructor(e,n,s,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,Fc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Xh(tt.min(),l,new En(Dt),zr(),Mt())}}class Fc{constructor(e,n,s,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Fc(s,n,Mt(),Mt(),Mt())}}class fh{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class L0{constructor(e,n){this.targetId=e,this.Ce=n}}class V0{constructor(e,n,s=pi.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Av{constructor(){this.ve=0,this.Fe=Rv(),this.Me=pi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Mt(),n=Mt(),s=Mt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ye(38017,{changeType:u})}})),new Fc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Rv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vC{constructor(e){this.Ge=e,this.ze=new Map,this.je=zr(),this.Je=ih(),this.He=ih(),this.Ye=new En(Dt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ye(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(xm(u))if(s===0){const f=new Ge(u.path);this.et(n,f,si.newNoDocument(f,tt.min()))}else zt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),b=m?this.ct(m,e,f):1;if(b!==0){this.it(n);const y=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=n;let f,m;try{f=xa(s).toUint8Array()}catch(b){if(b instanceof s0)return dl("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{m=new pg(f,l,u)}catch(b){return dl(b instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&xm(m.target)){const b=new Ge(m.target.path);this.It(b).has(f)||this.Et(f,b)||this.et(f,b,si.newNoDocument(b,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Mt();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((b=>{const y=this.ot(b);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new Xh(e,n,this.Ye,this.je,s);return this.je=zr(),this.Je=ih(),this.He=ih(),this.Ye=new En(Dt),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Av,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Zn(Dt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Zn(Dt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Av),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ih(){return new En(Ge.comparator)}function Rv(){return new En(Ge.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},EC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SC={and:"AND",or:"OR"};class wC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vm(r,e){return r.useProto3Json||Uc(e)?e:{value:e}}function Ch(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function AC(r,e){return Ch(r,e.toTimestamp())}function ms(r){return zt(!!r,49232),tt.fromTimestamp((function(n){const s=Ma(n);return new gn(s.seconds,s.nanos)})(r))}function yg(r,e){return jm(r,e).canonicalString()}function jm(r,e){const n=(function(l){return new nn(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function P0(r){const e=nn.fromString(r);return zt(F0(e),10190,{key:e.toString()}),e}function kh(r,e){return yg(r.databaseId,e.path)}function Rc(r,e){const n=P0(e);if(n.get(1)!==r.databaseId.projectId)throw new Te(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Te(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ge(B0(n))}function z0(r,e){return yg(r.databaseId,e)}function RC(r){const e=P0(r);return e.length===4?nn.emptyPath():B0(e)}function Pm(r){return new nn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function B0(r){return zt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Iv(r,e,n){return{name:kh(r,e),fields:n.value.mapValue.fields}}function IC(r,e){return"found"in e?(function(s,l){zt(!!l.found,43571),l.found.name,l.found.updateTime;const u=Rc(s,l.found.name),f=ms(l.found.updateTime),m=l.found.createTime?ms(l.found.createTime):tt.min(),b=new Bi({mapValue:{fields:l.found.fields}});return si.newFoundDocument(u,f,m,b)})(r,e):"missing"in e?(function(s,l){zt(!!l.missing,3894),zt(!!l.readTime,22933);const u=Rc(s,l.missing),f=ms(l.readTime);return si.newNoDocument(u,f)})(r,e):Ye(7234,{result:e})}function CC(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ye(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(zt(E===void 0||typeof E=="string",58123),pi.fromBase64String(E||"")):(zt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),pi.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const E=y.code===void 0?se.UNKNOWN:O0(y.code);return new Te(E,y.message||"")})(f);n=new V0(s,l,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Rc(r,s.document.name),u=ms(s.document.updateTime),f=s.document.createTime?ms(s.document.createTime):tt.min(),m=new Bi({mapValue:{fields:s.document.fields}}),b=si.newFoundDocument(l,u,f,m),y=s.targetIds||[],E=s.removedTargetIds||[];n=new fh(y,E,b.key,b)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Rc(r,s.document),u=s.readTime?ms(s.readTime):tt.min(),f=si.newNoDocument(l,u),m=s.removedTargetIds||[];n=new fh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Rc(r,s.document),u=s.removedTargetIds||[];n=new fh([],u,l,null)}else{if(!("filter"in e))return Ye(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,f=new yC(l,u),m=s.targetId;n=new L0(m,f)}}return n}function U0(r,e){let n;if(e instanceof Hc)n={update:Iv(r,e.key,e.value)};else if(e instanceof Yh)n={delete:kh(r,e.key)};else if(e instanceof Pa)n={update:Iv(r,e.key,e.data),updateMask:jC(e.fieldMask)};else{if(!(e instanceof M0))return Ye(16599,{Vt:e.type});n={verify:kh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof xc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof pl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof yl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Oc)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ye(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:AC(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ye(27497)})(r,e.precondition)),n}function kC(r,e){return r&&r.length>0?(zt(e!==void 0,14353),r.map((n=>(function(l,u){let f=l.updateTime?ms(l.updateTime):ms(u);return f.isEqual(tt.min())&&(f=ms(u)),new dC(f,l.transformResults||[])})(n,e)))):[]}function NC(r,e){return{documents:[z0(r,e.path)]}}function DC(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=z0(r,l);const u=(function(y){if(y.length!==0)return H0(Fs.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((E=>(function(V){return{field:tl(V.field),direction:OC(V.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Vm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function MC(r){let e=RC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){zt(s===1,65062);const E=n.from[0];E.allDescendants?l=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(A){const V=q0(A);return V instanceof Fs&&m0(V)?V.getFilters():[V]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((V=>(function(me){return new Ih(nl(me.field),(function(ge){switch(ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(me.direction))})(V)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let V;return V=typeof A=="object"?A.value:A,Uc(V)?null:V})(n.limit));let b=null;n.startAt&&(b=(function(A){const V=!!A.before,O=A.values||[];return new Rh(O,V)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const V=!A.before,O=A.values||[];return new Rh(O,V)})(n.endAt)),eC(e,l,f,u,m,"F",b,y)}function xC(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function q0(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=nl(n.unaryFilter.field);return Hn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=nl(n.unaryFilter.field);return Hn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=nl(n.unaryFilter.field);return Hn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=nl(n.unaryFilter.field);return Hn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Hn.create(nl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Fs.create(n.compositeFilter.filters.map((s=>q0(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}})(n.compositeFilter.op))})(r):Ye(30097,{filter:r})}function OC(r){return TC[r]}function LC(r){return EC[r]}function VC(r){return SC[r]}function tl(r){return{fieldPath:r.canonicalString()}}function nl(r){return gi.fromServerFormat(r.fieldPath)}function H0(r){return r instanceof Hn?(function(n){if(n.op==="=="){if(mv(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NAN"}};if(fv(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mv(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NAN"}};if(fv(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tl(n.field),op:LC(n.op),value:n.value}}})(r):r instanceof Fs?(function(n){const s=n.getFilters().map((l=>H0(l)));return s.length===1?s[0]:{compositeFilter:{op:VC(n.op),filters:s}}})(r):Ye(54877,{filter:r})}function jC(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function F0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ea{constructor(e,n,s,l,u=tt.min(),f=tt.min(),m=pi.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=b}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class PC{constructor(e){this.yt=e}}function zC(r){const e=MC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Lm(e,e.limit,"L"):e}class BC{constructor(){this.Cn=new UC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Da.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Da.min())}updateCollectionGroup(e,n,s){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class UC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Zn(nn.comparator),u=!l.has(s);return this.index[n]=l.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Zn(nn.comparator)).toArray()}}const Cv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G0=41943040;class Wi{static withCacheSize(e){return new Wi(e,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Wi.DEFAULT_COLLECTION_PERCENTILE=10,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wi.DEFAULT=new Wi(G0,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wi.DISABLED=new Wi(-1,0,0);class _l{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _l(0)}static cr(){return new _l(-1)}}const kv="LruGarbageCollector",qC=1048576;function Nv([r,e],[n,s]){const l=Dt(r,n);return l===0?Dt(e,s):l}class HC{constructor(e){this.Ir=e,this.buffer=new Zn(Nv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Nv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(kv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Al(n)?we(kv,"Ignoring IndexedDB error during garbage collection: ",n):await wl(n)}await this.Vr(3e5)}))}}class GC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(qh.ce);const s=new HC(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Cv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,u,f,m,b,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,f=Date.now(),this.nthSequenceNumber(e,l)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,n)))).next((A=>(u=A,b=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(y=Date.now(),Jo()<=Nt.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${l} in `+(m-f)+`ms
	Removed ${u} targets in `+(b-m)+`ms
	Removed ${A} documents in `+(y-b)+`ms
Total Duration: ${y-E}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:A}))))}}function KC(r,e){return new GC(r,e)}class QC{constructor(){this.changes=new po((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ue.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class $C{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&Ac(s.mutation,l,fs.empty(),gn.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Mt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Mt()){const l=co();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((u=>{let f=yc();return u.forEach(((m,b)=>{f=f.insert(m,b.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=co();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Mt())))}populateOverlays(e,n,s){const l=[];return s.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,l){let u=zr();const f=wc(),m=(function(){return wc()})();return n.forEach(((b,y)=>{const E=s.get(y.key);l.has(y.key)&&(E===void 0||E.mutation instanceof Pa)?u=u.insert(y.key,y):E!==void 0?(f.set(y.key,E.mutation.getFieldMask()),Ac(E.mutation,y,E.mutation.getFieldMask(),gn.now())):f.set(y.key,fs.empty())})),this.recalculateAndSaveOverlays(e,u).next((b=>(b.forEach(((y,E)=>f.set(y,E))),n.forEach(((y,E)=>m.set(y,new WC(E,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=wc();let l=new En(((f,m)=>f-m)),u=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((b=>{const y=n.get(b);if(y===null)return;let E=s.get(b)||fs.empty();E=m.applyToLocalView(y,E),s.set(b,E);const A=(l.get(m.batchId)||Mt()).add(b);l=l.insert(m.batchId,A)}))})).next((()=>{const f=[],m=l.getReverseIterator();for(;m.hasNext();){const b=m.getNext(),y=b.key,E=b.value,A=S0();E.forEach((V=>{if(!u.has(V)){const O=N0(n.get(V),s.get(V));O!==null&&A.set(V,O),u=u.add(V)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,A))}return ue.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(f){return Ge.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-u.size):ue.resolve(co());let m=kc,b=u;return f.next((y=>ue.forEach(y,((E,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(E)?ue.resolve():this.remoteDocumentCache.getEntry(e,E).next((V=>{b=b.insert(E,V)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,b,y,Mt()))).next((E=>({batchId:m,changes:E0(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ge(n)).next((s=>{let l=yc();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const u=n.collectionGroup;let f=yc();return this.indexManager.getCollectionParents(e,u).next((m=>ue.forEach(m,(b=>{const y=(function(A,V){return new qc(V,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,b.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,l).next((E=>{E.forEach(((A,V)=>{f=f.insert(A,V)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,l)))).next((f=>{u.forEach(((b,y)=>{const E=y.getKey();f.get(E)===null&&(f=f.insert(E,si.newInvalidDocument(E)))}));let m=yc();return f.forEach(((b,y)=>{const E=u.get(b);E!==void 0&&Ac(E.mutation,y,fs.empty(),gn.now()),Kh(n,y)&&(m=m.insert(b,y))})),m}))}}class YC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ms(l.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:zC(l.bundledQuery),readTime:ms(l.readTime)}})(n)),ue.resolve()}}class XC{constructor(){this.overlays=new En(Ge.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const s=co();return ue.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&s.set(l,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,u)=>{this.St(e,n,u)})),ue.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,n,s){const l=co(),u=n.length+1,f=new Ge(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const b=m.getNext().value,y=b.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&b.largestBatchId>s&&l.set(b.getKey(),b)}return ue.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let u=new En(((y,E)=>y-E));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=co(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=co(),b=u.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=l)););return ue.resolve(m)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new pC(n,s));let u=this.qr.get(n);u===void 0&&(u=Mt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class ZC{constructor(){this.sessionToken=pi.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}class _g{constructor(){this.Qr=new Zn(ii.$r),this.Ur=new Zn(ii.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new ii(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new ii(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ge(new nn([])),s=new ii(n,e),l=new ii(n,e+1),u=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ge(new nn([])),s=new ii(n,e),l=new ii(n,e+1);let u=Mt();return this.Ur.forEachInRange([s,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new ii(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ii{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ge.comparator(e.key,n.key)||Dt(e.Yr,n.Yr)}static Kr(e,n){return Dt(e.Yr,n.Yr)||Ge.comparator(e.key,n.key)}}class JC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Zn(ii.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new gC(u,n,s,l);this.mutationQueue.push(f);for(const m of l)this.Zr=this.Zr.add(new ii(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),u=l<0?0:l;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?cg:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ii(n,0),l=new ii(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,l],(f=>{const m=this.Xr(f.Yr);u.push(m)})),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Zn(Dt);return n.forEach((l=>{const u=new ii(l,0),f=new ii(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let u=s;Ge.isDocumentKey(u)||(u=u.child(""));const f=new ii(new Ge(u),0);let m=new Zn(Dt);return this.Zr.forEachWhile((b=>{const y=b.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(m=m.add(b.Yr)),!0)}),f),ue.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){zt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(n.mutations,(l=>{const u=new ii(l.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new ii(n,0),l=this.Zr.firstAfterOrEqual(s);return ue.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class ek{constructor(e){this.ri=e,this.docs=(function(){return new En(Ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ue.resolve(s?s.document.mutableCopy():si.newInvalidDocument(n))}getEntries(e,n){let s=zr();return n.forEach((l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():si.newInvalidDocument(l))})),ue.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let u=zr();const f=n.path,m=new Ge(f.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(m);for(;b.hasNext();){const{key:y,value:{document:E}}=b.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||MI(DI(E),s)<=0||(l.has(E.key)||Kh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,n,s,l){Ye(9500)}ii(e,n){return ue.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new tk(this)}getSize(e){return ue.resolve(this.size)}}class tk extends QC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class nk{constructor(e){this.persistence=e,this.si=new po((n=>dg(n)),fg),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.oi=0,this._i=new _g,this.targetCount=0,this.ai=_l.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new _l(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,s){let l=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),l++)})),ue.waitFor(u).next((()=>l))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ue.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ue.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),ue.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ue.resolve(s)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}class K0{constructor(e,n){this.ui={},this.overlays={},this.ci=new qh(0),this.li=!1,this.li=!0,this.hi=new ZC,this.referenceDelegate=e(this),this.Pi=new nk(this),this.indexManager=new BC,this.remoteDocumentCache=(function(l){return new ek(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new PC(n),this.Ii=new YC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new JC(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){we("MemoryPersistence","Starting transaction:",e);const l=new ik(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class ik extends OI{constructor(e){super(),this.currentSequenceNumber=e}}class bg{constructor(e){this.persistence=e,this.Ri=new _g,this.Vi=null}static mi(e){return new bg(e)}get fi(){if(this.Vi)return this.Vi;throw Ye(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const l=Ge.fromPath(s);return this.gi(e,l).next((u=>{u||n.removeEntry(l,tt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Nh{constructor(e,n){this.persistence=e,this.pi=new po((s=>jI(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=KC(this,n)}static mi(e,n){return new Nh(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ue.forEach(this.pi,((s,l)=>this.br(e,s,l).next((u=>u?ue.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,tt.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uh(e.data.value)),n}br(e,n,s){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return ue.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class vg{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=Mt(),l=Mt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new vg(e,n.fromCache,s,l)}}class sk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tw()?8:LI(Ri())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,l,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new sk;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(Jo()<=Nt.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",el(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Jo()<=Nt.DEBUG&&we("QueryEngine","Query:",el(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Jo()<=Nt.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",el(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):ue.resolve())}ys(e,n){if(_v(n))return ue.resolve(null);let s=rr(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Lm(n,null,"F"),s=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Mt(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((b=>{const y=this.Ds(n,m);return this.Cs(n,y,f,b.readTime)?this.ys(e,Lm(n,null,"F")):this.vs(e,y,n,b)}))))})))))}ws(e,n,s,l){return _v(n)||l.isEqual(tt.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,l)?ue.resolve(null):(Jo()<=Nt.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),el(n)),this.vs(e,f,n,NI(l,kc)).next((m=>m)))}))}Ds(e,n){let s=new Zn(v0(e));return n.forEach(((l,u)=>{Kh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,s){return Jo()<=Nt.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",el(n)),this.ps.getDocumentsMatchingQuery(e,n,Da.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const Tg="LocalStore",ak=3e8;class ok{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new En(Dt),this.xs=new po((u=>dg(u)),fg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $C(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function lk(r,e,n,s){return new ok(r,e,n,s)}async function Q0(r,e){const n=rt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let b=Mt();for(const y of l){f.push(y.batchId);for(const E of y.mutations)b=b.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)b=b.add(E.key)}return n.localDocuments.getDocuments(s,b).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function ck(r,e){const n=rt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,b,y,E){const A=y.batch,V=A.keys();let O=ue.resolve();return V.forEach((me=>{O=O.next((()=>E.getEntry(b,me))).next((ae=>{const ge=y.docVersions.get(me);zt(ge!==null,48541),ae.version.compareTo(ge)<0&&(A.applyToRemoteDocument(ae,y),ae.isValidDocument()&&(ae.setReadTime(y.commitVersion),E.addEntry(ae)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(b,A)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let b=Mt();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(b=b.add(m.batch.mutations[y].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function W0(r){const e=rt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function uk(r,e){const n=rt(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const m=[];e.targetChanges.forEach(((E,A)=>{const V=l.get(A);if(!V)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,A))));let O=V.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?O=O.withResumeToken(pi.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),l=l.insert(A,O),(function(ae,ge,I){return ae.resumeToken.approximateByteSize()===0||ge.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=ak?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(V,O,E)&&m.push(n.Pi.updateTargetData(u,O))}));let b=zr(),y=Mt();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(hk(u,f,e.documentUpdates).next((E=>{b=E.ks,y=E.qs}))),!s.isEqual(tt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((A=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return ue.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,b,y))).next((()=>b))})).then((u=>(n.Ms=l,u)))}function hk(r,e,n){let s=Mt(),l=Mt();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=zr();return n.forEach(((m,b)=>{const y=u.get(m);b.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(m)),b.isNoDocument()&&b.version.isEqual(tt.min())?(e.removeEntry(m,b.readTime),f=f.insert(m,b)):!y.isValidDocument()||b.version.compareTo(y.version)>0||b.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(b),f=f.insert(m,b)):we(Tg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",b.version)})),{ks:f,qs:l}}))}function dk(r,e){const n=rt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=cg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function fk(r,e){const n=rt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((u=>u?(l=u,ue.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new Ea(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function zm(r,e,n){const s=rt(r),l=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Al(f))throw f;we(Tg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function Dv(r,e,n){const s=rt(r);let l=tt.min(),u=Mt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(b,y,E){const A=rt(b),V=A.xs.get(E);return V!==void 0?ue.resolve(A.Ms.get(V)):A.Pi.getTargetData(y,E)})(s,f,rr(e)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((b=>{u=b}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?l:tt.min(),n?u:Mt()))).next((m=>(mk(s,nC(e),m),{documents:m,Qs:u})))))}function mk(r,e,n){let s=r.Os.get(e)||tt.min();n.forEach(((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class Mv{constructor(){this.activeTargetIds=lC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gk{constructor(){this.Mo=new Mv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pk{Oo(e){}shutdown(){}}const xv="ConnectivityMonitor";class Ov{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(xv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(xv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let sh=null;function Bm(){return sh===null?sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():sh++,"0x"+sh.toString(16)}const mm="RestConnection",yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _k{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,u){const f=Bm(),m=this.zo(e,n.toUriEncodedString());we(mm,`Sending RPC '${e}' ${f}:`,m,s);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,l,u);const{host:y}=new URL(m),E=vl(y);return this.Jo(e,m,b,s,E).then((A=>(we(mm,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw dl(mm,`RPC '${e}' ${f} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,n,s,l,u,f){return this.Go(e,n,s,l,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),s&&s.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const s=yk[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class bk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ti="WebChannelConnection";class vk extends _k{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,u){const f=Bm();return new Promise(((m,b)=>{const y=new QT;y.setWithCredentials(!0),y.listenOnce(WT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ch.NO_ERROR:const A=y.getResponseJson();we(Ti,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),m(A);break;case ch.TIMEOUT:we(Ti,`RPC '${e}' ${f} timed out`),b(new Te(se.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const V=y.getStatus();if(we(Ti,`RPC '${e}' ${f} failed with status:`,V,"response text:",y.getResponseText()),V>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const me=O?.error;if(me&&me.status&&me.message){const ae=(function(I){const xe=I.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(xe)>=0?xe:se.UNKNOWN})(me.status);b(new Te(ae,me.message))}else b(new Te(se.UNKNOWN,"Server responded with status "+y.getStatus()))}else b(new Te(se.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{we(Ti,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(l);we(Ti,`RPC '${e}' ${f} sending request:`,l),y.send(n,"POST",E,s,15)}))}T_(e,n,s){const l=Bm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=XT(),m=YT(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(b.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,s),b.encodeInitMessageHeaders=!0;const E=u.join("");we(Ti,`Creating RPC '${e}' stream ${l}: ${E}`,b);const A=f.createWebChannel(E,b);this.I_(A);let V=!1,O=!1;const me=new bk({Yo:ge=>{O?we(Ti,`Not sending because RPC '${e}' stream ${l} is closed:`,ge):(V||(we(Ti,`Opening RPC '${e}' stream ${l} transport.`),A.open(),V=!0),we(Ti,`RPC '${e}' stream ${l} sending:`,ge),A.send(ge))},Zo:()=>A.close()}),ae=(ge,I,xe)=>{ge.listen(I,(Ve=>{try{xe(Ve)}catch(mt){setTimeout((()=>{throw mt}),0)}}))};return ae(A,pc.EventType.OPEN,(()=>{O||(we(Ti,`RPC '${e}' stream ${l} transport opened.`),me.o_())})),ae(A,pc.EventType.CLOSE,(()=>{O||(O=!0,we(Ti,`RPC '${e}' stream ${l} transport closed`),me.a_(),this.E_(A))})),ae(A,pc.EventType.ERROR,(ge=>{O||(O=!0,dl(Ti,`RPC '${e}' stream ${l} transport errored. Name:`,ge.name,"Message:",ge.message),me.a_(new Te(se.UNAVAILABLE,"The operation could not be completed")))})),ae(A,pc.EventType.MESSAGE,(ge=>{if(!O){const I=ge.data[0];zt(!!I,16349);const xe=I,Ve=xe?.error||xe[0]?.error;if(Ve){we(Ti,`RPC '${e}' stream ${l} received error:`,Ve);const mt=Ve.status;let vt=(function(R){const N=qn[R];if(N!==void 0)return O0(N)})(mt),Qe=Ve.message;vt===void 0&&(vt=se.INTERNAL,Qe="Unknown error status: "+mt+" with message "+Ve.message),O=!0,me.a_(new Te(vt,Qe)),A.close()}else we(Ti,`RPC '${e}' stream ${l} received:`,I),me.u_(I)}})),ae(m,$T.STAT_EVENT,(ge=>{ge.stat===Cm.PROXY?we(Ti,`RPC '${e}' stream ${l} detected buffering proxy`):ge.stat===Cm.NOPROXY&&we(Ti,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{me.__()}),0),me}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function gm(){return typeof document<"u"?document:null}function Zh(r){return new wC(r,!0)}class Eg{constructor(e,n,s=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&we("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Lv="PersistentStream";class $0{constructor(e,n,s,l,u,f,m,b){this.Mi=e,this.S_=s,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Eg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Pr(n.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new Te(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(Lv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(we(Lv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tk extends $0{constructor(e,n,s,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=CC(this.serializer,e),s=(function(u){if(!("targetChange"in u))return tt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?tt.min():f.readTime?ms(f.readTime):tt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Pm(this.serializer),n.addTarget=(function(u,f){let m;const b=f.target;if(m=xm(b)?{documents:NC(u,b)}:{query:DC(u,b).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=j0(u,f.resumeToken);const y=Vm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(tt.min())>0){m.readTime=Ch(u,f.snapshotVersion.toTimestamp());const y=Vm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=xC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Pm(this.serializer),n.removeTarget=e,this.q_(n)}}class Ek extends $0{constructor(e,n,s,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kC(e.writeResults,e.commitTime),s=ms(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Pm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>U0(this.serializer,s)))};this.q_(n)}}class Sk{}class wk extends Sk{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Te(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,jm(n,s),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(se.UNKNOWN,u.toString())}))}Ho(e,n,s,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,jm(n,s),l,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Te(se.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ak{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pr(n),this.aa=!1):we("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const go="RemoteStore";class Rk{constructor(e,n,s,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{yo(this)&&(we(go,"Restarting streams for network reachability change."),await(async function(b){const y=rt(b);y.Ea.add(4),await Gc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Jh(y)})(this))}))})),this.Ra=new Ak(s,l)}}async function Jh(r){if(yo(r))for(const e of r.da)await e(!0)}async function Gc(r){for(const e of r.da)await e(!1)}function Y0(r,e){const n=rt(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Rg(n)?Ag(n):Rl(n).O_()&&wg(n,e))}function Sg(r,e){const n=rt(r),s=Rl(n);n.Ia.delete(e),s.O_()&&X0(n,e),n.Ia.size===0&&(s.O_()?s.L_():yo(n)&&n.Ra.set("Unknown"))}function wg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rl(r).Y_(e)}function X0(r,e){r.Va.Ue(e),Rl(r).Z_(e)}function Ag(r){r.Va=new vC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Rl(r).start(),r.Ra.ua()}function Rg(r){return yo(r)&&!Rl(r).x_()&&r.Ia.size>0}function yo(r){return rt(r).Ea.size===0}function Z0(r){r.Va=void 0}async function Ik(r){r.Ra.set("Online")}async function Ck(r){r.Ia.forEach(((e,n)=>{wg(r,e)}))}async function kk(r,e){Z0(r),Rg(r)?(r.Ra.ha(e),Ag(r)):r.Ra.set("Unknown")}async function Nk(r,e,n){if(r.Ra.set("Online"),e instanceof V0&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const m of u.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,f),l.Ia.delete(m),l.Va.removeTarget(m))})(r,e)}catch(s){we(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Dh(r,s)}else if(e instanceof fh?r.Va.Ze(e):e instanceof L0?r.Va.st(e):r.Va.tt(e),!n.isEqual(tt.min()))try{const s=await W0(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((b,y)=>{if(b.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(b.resumeToken,f))}})),m.targetMismatches.forEach(((b,y)=>{const E=u.Ia.get(b);if(!E)return;u.Ia.set(b,E.withResumeToken(pi.EMPTY_BYTE_STRING,E.snapshotVersion)),X0(u,b);const A=new Ea(E.target,b,y,E.sequenceNumber);wg(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){we(go,"Failed to raise snapshot:",s),await Dh(r,s)}}async function Dh(r,e,n){if(!Al(e))throw e;r.Ea.add(1),await Gc(r),r.Ra.set("Offline"),n||(n=()=>W0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{we(go,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Jh(r)}))}function J0(r,e){return e().catch((n=>Dh(r,n,e)))}async function ed(r){const e=rt(r),n=La(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cg;for(;Dk(e);)try{const l=await dk(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,Mk(e,l)}catch(l){await Dh(e,l)}eE(e)&&tE(e)}function Dk(r){return yo(r)&&r.Ta.length<10}function Mk(r,e){r.Ta.push(e);const n=La(r);n.O_()&&n.X_&&n.ea(e.mutations)}function eE(r){return yo(r)&&!La(r).x_()&&r.Ta.length>0}function tE(r){La(r).start()}async function xk(r){La(r).ra()}async function Ok(r){const e=La(r);for(const n of r.Ta)e.ea(n.mutations)}async function Lk(r,e,n){const s=r.Ta.shift(),l=gg.from(s,e,n);await J0(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await ed(r)}async function Vk(r,e){e&&La(r).X_&&await(async function(s,l){if((function(f){return x0(f)&&f!==se.ABORTED})(l.code)){const u=s.Ta.shift();La(s).B_(),await J0(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l))),await ed(s)}})(r,e),eE(r)&&tE(r)}async function Vv(r,e){const n=rt(r);n.asyncQueue.verifyOperationInProgress(),we(go,"RemoteStore received new credentials");const s=yo(n);n.Ea.add(3),await Gc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jh(n)}async function jk(r,e){const n=rt(r);e?(n.Ea.delete(2),await Jh(n)):e||(n.Ea.add(2),await Gc(n),n.Ra.set("Unknown"))}function Rl(r){return r.ma||(r.ma=(function(n,s,l){const u=rt(n);return u.sa(),new Tk(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Xo:Ik.bind(null,r),t_:Ck.bind(null,r),r_:kk.bind(null,r),H_:Nk.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Rg(r)?Ag(r):r.Ra.set("Unknown")):(await r.ma.stop(),Z0(r))}))),r.ma}function La(r){return r.fa||(r.fa=(function(n,s,l){const u=rt(n);return u.sa(),new Ek(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:xk.bind(null,r),r_:Vk.bind(null,r),ta:Ok.bind(null,r),na:Lk.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await ed(r)):(await r.fa.stop(),r.Ta.length>0&&(we(go,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Ig{constructor(e,n,s,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,u){const f=Date.now()+s,m=new Ig(e,n,f,l,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(r,e){if(Pr("AsyncQueue",`${e}: ${r}`),Al(r))return new Te(se.UNAVAILABLE,`${e}: ${r}`);throw r}class cl{static emptySet(e){return new cl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ge.comparator(n.key,s.key):(n,s)=>Ge.comparator(n.key,s.key),this.keyedMap=yc(),this.sortedSet=new En(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new cl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class jv{constructor(){this.ga=new En(Ge.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ye(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class bl{constructor(e,n,s,l,u,f,m,b,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=b,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,l,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new bl(e,n,cl.emptySet(n),f,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}class Pk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zk{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=rt(n),u=l.queries;l.queries=Pv(),u.forEach(((f,m)=>{for(const b of m.Sa)b.onError(s)}))})(this,new Te(se.ABORTED,"Firestore shutting down"))}}function Pv(){return new po((r=>b0(r)),Gh)}async function kg(r,e){const n=rt(r);let s=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(s=2):(u=new Pk,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const m=Cg(f,`Initialization of query '${el(e.query)}' failed`);return void e.onError(m)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Dg(n)}async function Ng(r,e){const n=rt(r),s=e.query;let l=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Bk(r,e){const n=rt(r);let s=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(l)&&(s=!0);f.wa=l}}s&&Dg(n)}function Uk(r,e,n){const s=rt(r),l=s.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);s.queries.delete(e)}function Dg(r){r.Ca.forEach((e=>{e.next()}))}var Um,zv;(zv=Um||(Um={})).Ma="default",zv.Cache="cache";class Mg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new bl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Um.Cache}}class nE{constructor(e){this.key=e}}class iE{constructor(e){this.key=e}}class qk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=v0(e),this.tu=new cl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new jv,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,m=!1;const b=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((E,A)=>{const V=l.get(E),O=Kh(this.query,A)?A:null,me=!!V&&this.mutatedKeys.has(V.key),ae=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let ge=!1;V&&O?V.data.isEqual(O.data)?me!==ae&&(s.track({type:3,doc:O}),ge=!0):this.su(V,O)||(s.track({type:2,doc:O}),ge=!0,(b&&this.eu(O,b)>0||y&&this.eu(O,y)<0)&&(m=!0)):!V&&O?(s.track({type:0,doc:O}),ge=!0):V&&!O&&(s.track({type:1,doc:V}),ge=!0,(b||y)&&(m=!0)),ge&&(O?(f=f.add(O),u=ae?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,A)=>(function(O,me){const ae=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Rt:ge})}};return ae(O)-ae(me)})(E.type,A.type)||this.eu(E.doc,A.doc))),this.ou(s),l=l??!1;const m=n&&!l?this._u():[],b=this.Xa.size===0&&this.current&&!l?1:0,y=b!==this.Za;return this.Za=b,f.length!==0||y?{snapshot:new bl(this.query,e.tu,u,f,e.mutatedKeys,b===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Mt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new iE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new nE(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Mt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xg="SyncEngine";class Hk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Fk{constructor(e){this.key=e,this.hu=!1}}class Gk{constructor(e,n,s,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new po((m=>b0(m)),Gh),this.Iu=new Map,this.Eu=new Set,this.du=new En(Ge.comparator),this.Au=new Map,this.Ru=new _g,this.Vu={},this.mu=new Map,this.fu=_l.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Kk(r,e,n=!0){const s=cE(r);let l;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await sE(s,e,n,!0),l}async function Qk(r,e){const n=cE(r);await sE(n,e,!0,!1)}async function sE(r,e,n,s){const l=await fk(r.localStore,rr(e)),u=l.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await Wk(r,e,u,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&Y0(r.remoteStore,l),m}async function Wk(r,e,n,s,l){r.pu=(A,V,O)=>(async function(ae,ge,I,xe){let Ve=ge.view.ru(I);Ve.Cs&&(Ve=await Dv(ae.localStore,ge.query,!1).then((({documents:D})=>ge.view.ru(D,Ve))));const mt=xe&&xe.targetChanges.get(ge.targetId),vt=xe&&xe.targetMismatches.get(ge.targetId)!=null,Qe=ge.view.applyChanges(Ve,ae.isPrimaryClient,mt,vt);return Uv(ae,ge.targetId,Qe.au),Qe.snapshot})(r,A,V,O);const u=await Dv(r.localStore,e,!0),f=new qk(e,u.Qs),m=f.ru(u.documents),b=Fc.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=f.applyChanges(m,r.isPrimaryClient,b);Uv(r,n,y.au);const E=new Hk(e,n,f);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function $k(r,e,n){const s=rt(r),l=s.Tu.get(e),u=s.Iu.get(l.targetId);if(u.length>1)return s.Iu.set(l.targetId,u.filter((f=>!Gh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await zm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Sg(s.remoteStore,l.targetId),qm(s,l.targetId)})).catch(wl)):(qm(s,l.targetId),await zm(s.localStore,l.targetId,!0))}async function Yk(r,e){const n=rt(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Sg(n.remoteStore,s.targetId))}async function Xk(r,e,n){const s=sN(r);try{const l=await(function(f,m){const b=rt(f),y=gn.now(),E=m.reduce(((O,me)=>O.add(me.key)),Mt());let A,V;return b.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let me=zr(),ae=Mt();return b.Ns.getEntries(O,E).next((ge=>{me=ge,me.forEach(((I,xe)=>{xe.isValidDocument()||(ae=ae.add(I))}))})).next((()=>b.localDocuments.getOverlayedDocuments(O,me))).next((ge=>{A=ge;const I=[];for(const xe of m){const Ve=mC(xe,A.get(xe.key).overlayedDocument);Ve!=null&&I.push(new Pa(xe.key,Ve,h0(Ve.value.mapValue),Ai.exists(!0)))}return b.mutationQueue.addMutationBatch(O,y,I,m)})).next((ge=>{V=ge;const I=ge.applyToLocalDocumentSet(A,ae);return b.documentOverlayCache.saveOverlays(O,ge.batchId,I)}))})).then((()=>({batchId:V.batchId,changes:E0(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(f,m,b){let y=f.Vu[f.currentUser.toKey()];y||(y=new En(Dt)),y=y.insert(m,b),f.Vu[f.currentUser.toKey()]=y})(s,l.batchId,n),await Kc(s,l.changes),await ed(s.remoteStore)}catch(l){const u=Cg(l,"Failed to persist write");n.reject(u)}}async function rE(r,e){const n=rt(r);try{const s=await uk(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(zt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?zt(f.hu,14607):l.removedDocuments.size>0&&(zt(f.hu,42227),f.hu=!1))})),await Kc(n,s,e)}catch(s){await wl(s)}}function Bv(r,e,n){const s=rt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&l.push(m.snapshot)})),(function(f,m){const b=rt(f);b.onlineState=m;let y=!1;b.queries.forEach(((E,A)=>{for(const V of A.Sa)V.va(m)&&(y=!0)})),y&&Dg(b)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Zk(r,e,n){const s=rt(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),u=l&&l.key;if(u){let f=new En(Ge.comparator);f=f.insert(u,si.newNoDocument(u,tt.min()));const m=Mt().add(u),b=new Xh(tt.min(),new Map,new En(Dt),f,m);await rE(s,b),s.du=s.du.remove(u),s.Au.delete(e),Og(s)}else await zm(s.localStore,e,!1).then((()=>qm(s,e,n))).catch(wl)}async function Jk(r,e){const n=rt(r),s=e.batch.batchId;try{const l=await ck(n.localStore,e);oE(n,s,null),aE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Kc(n,l)}catch(l){await wl(l)}}async function eN(r,e,n){const s=rt(r);try{const l=await(function(f,m){const b=rt(f);return b.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return b.mutationQueue.lookupMutationBatch(y,m).next((A=>(zt(A!==null,37113),E=A.keys(),b.mutationQueue.removeMutationBatch(y,A)))).next((()=>b.mutationQueue.performConsistencyCheck(y))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(y,E,m))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>b.localDocuments.getDocuments(y,E)))}))})(s.localStore,e);oE(s,e,n),aE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Kc(s,l)}catch(l){await wl(l)}}function aE(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function oE(r,e,n){const s=rt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function qm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||lE(r,s)}))}function lE(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Sg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Og(r))}function Uv(r,e,n){for(const s of n)s instanceof nE?(r.Ru.addReference(s.key,e),tN(r,s)):s instanceof iE?(we(xg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||lE(r,s.key)):Ye(19791,{wu:s})}function tN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(we(xg,"New document in limbo: "+n),r.Eu.add(s),Og(r))}function Og(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Ge(nn.fromString(e)),s=r.fu.next();r.Au.set(s,new Fk(n)),r.du=r.du.insert(n,s),Y0(r.remoteStore,new Ea(rr(Fh(n.path)),s,"TargetPurposeLimboResolution",qh.ce))}}async function Kc(r,e,n){const s=rt(r),l=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,b)=>{f.push(s.pu(b,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const E=y?!y.fromCache:n?.targetChanges.get(b.targetId)?.current;s.sharedClientState.updateQueryState(b.targetId,E?"current":"not-current")}if(y){l.push(y);const E=vg.As(b.targetId,y);u.push(E)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(b,y){const E=rt(b);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ue.forEach(y,(V=>ue.forEach(V.Es,(O=>E.persistence.referenceDelegate.addReference(A,V.targetId,O))).next((()=>ue.forEach(V.ds,(O=>E.persistence.referenceDelegate.removeReference(A,V.targetId,O)))))))))}catch(A){if(!Al(A))throw A;we(Tg,"Failed to update sequence numbers: "+A)}for(const A of y){const V=A.targetId;if(!A.fromCache){const O=E.Ms.get(V),me=O.snapshotVersion,ae=O.withLastLimboFreeSnapshotVersion(me);E.Ms=E.Ms.insert(V,ae)}}})(s.localStore,u))}async function nN(r,e){const n=rt(r);if(!n.currentUser.isEqual(e)){we(xg,"User change. New user:",e.toKey());const s=await Q0(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((b=>{b.reject(new Te(se.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Kc(n,s.Ls)}}function iN(r,e){const n=rt(r),s=n.Au.get(e);if(s&&s.hu)return Mt().add(s.key);{let l=Mt();const u=n.Iu.get(e);if(!u)return l;for(const f of u){const m=n.Tu.get(f);l=l.unionWith(m.view.nu)}return l}}function cE(r){const e=rt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=rE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zk.bind(null,e),e.Pu.H_=Bk.bind(null,e.eventManager),e.Pu.yu=Uk.bind(null,e.eventManager),e}function sN(r){const e=rt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eN.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lk(this.persistence,new rk,e.initialUser,this.serializer)}Cu(e){return new K0(bg.mi,this.serializer)}Du(e){return new gk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class rN extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){zt(this.persistence.referenceDelegate instanceof Nh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new FC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wi.withCacheSize(this.cacheSizeBytes):Wi.DEFAULT;return new K0((s=>Nh.mi(s,n)),this.serializer)}}class Hm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Bv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nN.bind(null,this.syncEngine),await jk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zk})()}createDatastore(e){const n=Zh(e.databaseInfo.databaseId),s=(function(u){return new vk(u)})(e.databaseInfo);return(function(u,f,m,b){return new wk(u,f,m,b)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,u,f,m){return new Rk(s,l,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>Bv(this.syncEngine,n,0)),(function(){return Ov.v()?new Ov:new pk})())}createSyncEngine(e,n){return(function(l,u,f,m,b,y,E){const A=new Gk(l,u,f,m,b,y);return E&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=rt(n);we(go,"RemoteStore shutting down."),s.Ea.add(5),await Gc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hm.provider={build:()=>new Hm};class Lg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class aN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Te(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(l,u){const f=rt(l),m={documents:u.map((A=>kh(f.serializer,A)))},b=await f.Ho("BatchGetDocuments",f.serializer.databaseId,nn.emptyPath(),m,u.length),y=new Map;b.forEach((A=>{const V=IC(f.serializer,A);y.set(V.key.toString(),V)}));const E=[];return u.forEach((A=>{const V=y.get(A.toString());zt(!!V,55234,{key:A}),E.push(V)})),E})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const l=Ge.fromPath(s);this.mutations.push(new M0(l,this.precondition(l)))})),await(async function(s,l){const u=rt(s),f={writes:l.map((m=>U0(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,nn.emptyPath(),f)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ye(50498,{Gu:e.constructor.name});n=tt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new Te(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(tt.min())?Ai.exists(!1):Ai.updateTime(n):Ai.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(tt.min()))throw new Te(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ai.updateTime(n)}return Ai.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oN{constructor(e,n,s,l,u){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=l,this.deferred=u,this.zu=s.maxAttempts,this.M_=new Eg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new aN(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((l=>{this.Yu(l)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Uc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!x0(n)}return!1}}const Va="FirestoreClient";class lN{constructor(e,n,s,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=wi.UNAUTHENTICATED,this.clientId=lg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{we(Va,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(we(Va,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Cg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function pm(r,e){r.asyncQueue.verifyOperationInProgress(),we(Va,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await Q0(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function qv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await cN(r);we(Va,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Vv(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>Vv(e.remoteStore,l))),r._onlineComponents=e}async function cN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){we(Va,"Using user provided OfflineComponentProvider");try{await pm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===se.FAILED_PRECONDITION||l.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;dl("Error using user provided cache. Falling back to memory cache: "+n),await pm(r,new Mh)}}else we(Va,"Using default OfflineComponentProvider"),await pm(r,new rN(void 0));return r._offlineComponents}async function Vg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(we(Va,"Using user provided OnlineComponentProvider"),await qv(r,r._uninitializedComponentsProvider._online)):(we(Va,"Using default OnlineComponentProvider"),await qv(r,new Hm))),r._onlineComponents}function uN(r){return Vg(r).then((e=>e.syncEngine))}function hN(r){return Vg(r).then((e=>e.datastore))}async function xh(r){const e=await Vg(r),n=e.eventManager;return n.onListen=Kk.bind(null,e.syncEngine),n.onUnlisten=$k.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Qk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yk.bind(null,e.syncEngine),n}function dN(r,e,n={}){const s=new sr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,b,y){const E=new Lg({next:V=>{E.Nu(),f.enqueueAndForget((()=>Ng(u,A)));const O=V.docs.has(m);!O&&V.fromCache?y.reject(new Te(se.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&V.fromCache&&b&&b.source==="server"?y.reject(new Te(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(V)},error:V=>y.reject(V)}),A=new Mg(Fh(m.path),E,{includeMetadataChanges:!0,qa:!0});return kg(u,A)})(await xh(r),r.asyncQueue,e,n,s))),s.promise}function fN(r,e,n={}){const s=new sr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,b,y){const E=new Lg({next:V=>{E.Nu(),f.enqueueAndForget((()=>Ng(u,A))),V.fromCache&&b.source==="server"?y.reject(new Te(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(V)},error:V=>y.reject(V)}),A=new Mg(m,E,{includeMetadataChanges:!0,qa:!0});return kg(u,A)})(await xh(r),r.asyncQueue,e,n,s))),s.promise}function uE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Hv=new Map;const hE="firestore.googleapis.com",Fv=!0;class Gv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hE,this.ssl=Fv}else this.host=e.host,this.ssl=e.ssl??Fv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new Te(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class td{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new bI;switch(s.type){case"firstParty":return new SI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Te(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Hv.get(n);s&&(we("ComponentProvider","Removing Datastore"),Hv.delete(n),s.terminate())})(this),Promise.resolve()}}function mN(r,e,n,s={}){r=$i(r,td);const l=vl(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;l&&(rT(`https://${m}`),aT("Firestore",!0)),u.host!==hE&&u.host!==m&&dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...u,host:m,ssl:l,emulatorOptions:s};if(!Or(b,f)&&(r._setSettings(b),s.mockUserToken)){let y,E;if(typeof s.mockUserToken=="string")y=s.mockUserToken,E=wi.MOCK_USER;else{y=K1(s.mockUserToken,r._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Te(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new wi(A)}r._authCredentials=new vI(new JT(y,E))}}class _o{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class Tn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}toJSON(){return{type:Tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Bc(n,Tn._jsonSchema))return new Tn(e,s||null,new Ge(nn.fromString(n.referencePath)))}}Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:Fn("string",Tn._jsonSchemaVersion),referencePath:Fn("string")};class Ca extends _o{constructor(e,n,s){super(e,n,Fh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Ge(e))}withConverter(e){return new Ca(this.firestore,e,this._path)}}function Fm(r,e,...n){if(r=Jn(r),e0("collection","path",e),r instanceof td){const s=nn.fromString(e,...n);return sv(s),new Ca(r,null,s)}{if(!(r instanceof Tn||r instanceof Ca))throw new Te(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nn.fromString(e,...n));return sv(s),new Ca(r.firestore,null,s)}}function Fe(r,e,...n){if(r=Jn(r),arguments.length===1&&(e=lg.newId()),e0("doc","path",e),r instanceof td){const s=nn.fromString(e,...n);return iv(s),new Tn(r,null,new Ge(s))}{if(!(r instanceof Tn||r instanceof Ca))throw new Te(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nn.fromString(e,...n));return iv(s),new Tn(r.firestore,r instanceof Ca?r.converter:null,new Ge(s))}}const Kv="AsyncQueue";class Qv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Eg(this,"async_queue_retry"),this._c=()=>{const s=gm();s&&we(Kv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Al(e))throw e;we(Kv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Pr("INTERNAL UNHANDLED ERROR: ",Wv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Ig.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Ye(47125,{Pc:Wv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Wv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function $v(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of s)if(u in l&&typeof l[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Br extends td{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new Qv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qv(e),this._firestoreClient=void 0,await e}}}function dE(r,e){const n=typeof r=="object"?r:cT(),s=typeof r=="string"?r:wh,l=Zm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=F1("firestore");u&&mN(l,...u)}return l}function Qc(r){if(r._terminated)throw new Te(se.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||gN(r),r._firestoreClient}function gN(r){const e=r._freezeSettings(),n=(function(l,u,f,m){return new BI(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,uE(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new lN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(r._componentsProvider))}class ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ds(pi.fromBase64String(e))}catch(n){throw new Te(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ds(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ds._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bc(e,ds._jsonSchema))return ds.fromBase64String(e.bytes)}}ds._jsonSchemaVersion="firestore/bytes/1.0",ds._jsonSchema={type:Fn("string",ds._jsonSchemaVersion),bytes:Fn("string")};class Wc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bo{constructor(e){this._methodName=e}}class ar{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ar._jsonSchemaVersion}}static fromJSON(e){if(Bc(e,ar._jsonSchema))return new ar(e.latitude,e.longitude)}}ar._jsonSchemaVersion="firestore/geoPoint/1.0",ar._jsonSchema={type:Fn("string",ar._jsonSchemaVersion),latitude:Fn("number"),longitude:Fn("number")};class or{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bc(e,or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new or(e.vectorValues);throw new Te(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:Fn("string",or._jsonSchemaVersion),vectorValues:Fn("object")};const pN=/^__.*__$/;class yN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Pa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hc(e,this.data,n,this.fieldTransforms)}}class fE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Pa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{Ac:r})}}class nd{constructor(e,n,s,l,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Oh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mE(this.Ac)&&pN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _N{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Zh(e)}Cc(e,n,s,l=!1){return new nd({Ac:e,methodName:n,Dc:s,path:gi.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function id(r){const e=r._freezeSettings(),n=Zh(r._databaseId);return new _N(r._databaseId,!!e.ignoreUndefinedProperties,n)}function gE(r,e,n,s,l,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,l);Ug("Data must be an object, but it was:",f,s);const m=bE(s,f);let b,y;if(u.merge)b=new fs(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const A of u.mergeFields){const V=Gm(e,A,n);if(!f.contains(V))throw new Te(se.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);TE(E,V)||E.push(V)}b=new fs(E),y=f.fieldTransforms.filter((A=>b.covers(A.field)))}else b=null,y=f.fieldTransforms;return new yN(new Bi(m),b,y)}class $c extends bo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $c}}function pE(r,e,n){return new nd({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jg extends bo{_toFieldTransform(e){return new Wh(e.path,new xc)}isEqual(e){return e instanceof jg}}class Pg extends bo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=pE(this,e,!0),s=this.vc.map((u=>vo(u,n))),l=new pl(s);return new Wh(e.path,l)}isEqual(e){return e instanceof Pg&&Or(this.vc,e.vc)}}class zg extends bo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=pE(this,e,!0),s=this.vc.map((u=>vo(u,n))),l=new yl(s);return new Wh(e.path,l)}isEqual(e){return e instanceof zg&&Or(this.vc,e.vc)}}class Bg extends bo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Oc(e.serializer,A0(e.serializer,this.Fc));return new Wh(e.path,n)}isEqual(e){return e instanceof Bg&&this.Fc===e.Fc}}function yE(r,e,n,s){const l=r.Cc(1,e,n);Ug("Data must be an object, but it was:",l,s);const u=[],f=Bi.empty();ja(s,((b,y)=>{const E=qg(e,b,n);y=Jn(y);const A=l.yc(E);if(y instanceof $c)u.push(E);else{const V=vo(y,A);V!=null&&(u.push(E),f.set(E,V))}}));const m=new fs(u);return new fE(f,m,l.fieldTransforms)}function _E(r,e,n,s,l,u){const f=r.Cc(1,e,n),m=[Gm(e,s,n)],b=[l];if(u.length%2!=0)throw new Te(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(Gm(e,u[V])),b.push(u[V+1]);const y=[],E=Bi.empty();for(let V=m.length-1;V>=0;--V)if(!TE(y,m[V])){const O=m[V];let me=b[V];me=Jn(me);const ae=f.yc(O);if(me instanceof $c)y.push(O);else{const ge=vo(me,ae);ge!=null&&(y.push(O),E.set(O,ge))}}const A=new fs(y);return new fE(E,A,f.fieldTransforms)}function bN(r,e,n,s=!1){return vo(n,r.Cc(s?4:3,e))}function vo(r,e){if(vE(r=Jn(r)))return Ug("Unsupported field value:",e,r),bE(r,e);if(r instanceof bo)return(function(s,l){if(!mE(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const u=[];let f=0;for(const m of s){let b=vo(m,l.wc(f));b==null&&(b={nullValue:"NULL_VALUE"}),u.push(b),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,l){if((s=Jn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return A0(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=gn.fromDate(s);return{timestampValue:Ch(l.serializer,u)}}if(s instanceof gn){const u=new gn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ch(l.serializer,u)}}if(s instanceof ar)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ds)return{bytesValue:j0(l.serializer,s._byteString)};if(s instanceof Tn){const u=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:yg(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof or)return(function(f,m){return{mapValue:{fields:{[c0]:{stringValue:u0},[Ah]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return mg(m.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Uh(s)}`)})(r,e)}function bE(r,e){const n={};return i0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(r,((s,l)=>{const u=vo(l,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function vE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gn||r instanceof ar||r instanceof ds||r instanceof Tn||r instanceof bo||r instanceof or)}function Ug(r,e,n){if(!vE(n)||!t0(n)){const s=Uh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Gm(r,e,n){if((e=Jn(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return qg(r,e);throw Oh("Field path arguments must be of type string or ",r,!1,void 0,n)}const vN=new RegExp("[~\\*/\\[\\]]");function qg(r,e,n){if(e.search(vN)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Wc(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Oh(r,e,n,s,l){const u=s&&!s.isEmpty(),f=l!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let b="";return(u||f)&&(b+=" (found",u&&(b+=` in field ${s}`),f&&(b+=` in document ${l}`),b+=")"),new Te(se.INVALID_ARGUMENT,m+r+b)}function TE(r,e){return r.some((n=>n.isEqual(e)))}class Lh{constructor(e,n,s,l,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TN extends Lh{data(){return super.data()}}function Hg(r,e){return typeof e=="string"?qg(r,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}function EE(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Te(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fg{}class EN extends Fg{}function Km(r,e,...n){let s=[];e instanceof Fg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((b=>b instanceof Gg)).length,m=u.filter((b=>b instanceof sd)).length;if(f>1||f>0&&m>0)throw new Te(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class sd extends EN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new sd(e,n,s)}_apply(e){const n=this._parse(e);return SE(e._query,n),new _o(e.firestore,e.converter,Om(e._query,n))}_parse(e){const n=id(e.firestore);return(function(u,f,m,b,y,E,A){let V;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Te(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Xv(A,E);const me=[];for(const ae of A)me.push(Yv(b,u,ae));V={arrayValue:{values:me}}}else V=Yv(b,u,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Xv(A,E),V=bN(m,f,A,E==="in"||E==="not-in");return Hn.create(y,E,V)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qm(r,e,n){const s=e,l=Hg("where",r);return sd._create(l,s,n)}class Gg extends Fg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Fs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let f=l;const m=u.getFlattenedFilters();for(const b of m)SE(f,b),f=Om(f,b)})(e._query,n),new _o(e.firestore,e.converter,Om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Yv(r,e,n){if(typeof(n=Jn(n))=="string"){if(n==="")throw new Te(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_0(e)&&n.indexOf("/")!==-1)throw new Te(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(nn.fromString(n));if(!Ge.isDocumentKey(s))throw new Te(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return dv(r,new Ge(s))}if(n instanceof Tn)return dv(r,n._key);throw new Te(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uh(n)}.`)}function Xv(r,e){if(!Array.isArray(r)||r.length===0)throw new Te(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SE(r,e){const n=(function(l,u){for(const f of l)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Te(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wE{convertValue(e,n="none"){switch(Oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ja(e,((l,u)=>{s[l]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Ah].arrayValue?.values?.map((s=>Dn(s.doubleValue)));return new or(n)}convertGeoPoint(e){return new ar(Dn(e.latitude),Dn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Hh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){const n=Ma(e);return new gn(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=nn.fromString(e);zt(F0(s),9688,{name:e});const l=new Dc(s.get(1),s.get(3)),u=new Ge(s.popFirst(5));return l.isEqual(n)||Pr(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function AE(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class SN extends wE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}class rl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends Lh{constructor(e,n,s,l,u,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Hg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ka._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:Fn("string",ka._jsonSchemaVersion),bundleSource:Fn("string","DocumentSnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class mh extends ka{data(e={}){return super.data(e)}}class uo{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new rl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new mh(this._firestore,this._userDataWriter,s.key,s,new rl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((m=>{const b=new mh(l._firestore,l._userDataWriter,m.doc.key,m.doc,new rl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:b,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const b=new mh(l._firestore,l._userDataWriter,m.doc.key,m.doc,new rl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,E=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:wN(m.type),doc:b,oldIndex:y,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:r})}}function Si(r){r=$i(r,Tn);const e=$i(r.firestore,Br);return dN(Qc(e),r._key).then((n=>CE(e,r,n)))}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:Fn("string",uo._jsonSchemaVersion),bundleSource:Fn("string","QuerySnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class rd extends wE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function Wm(r){r=$i(r,_o);const e=$i(r.firestore,Br),n=Qc(e),s=new rd(e);return EE(r._query),fN(n,r._query).then((l=>new uo(e,s,r,l)))}function RE(r,e,n){r=$i(r,Tn);const s=$i(r.firestore,Br),l=AE(r.converter,e,n);return Kg(s,[gE(id(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Ai.none())])}function pt(r,e,n,...s){r=$i(r,Tn);const l=$i(r.firestore,Br),u=id(l);let f;return f=typeof(e=Jn(e))=="string"||e instanceof Wc?_E(u,"updateDoc",r._key,e,n,s):yE(u,"updateDoc",r._key,e),Kg(l,[f.toMutation(r._key,Ai.exists(!0))])}function ul(r){return Kg($i(r.firestore,Br),[new Yh(r._key,Ai.none())])}function IE(r,...e){r=Jn(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$v(e[s])||(n=e[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if($v(e[s])){const b=e[s];e[s]=b.next?.bind(b),e[s+1]=b.error?.bind(b),e[s+2]=b.complete?.bind(b)}let u,f,m;if(r instanceof Tn)f=$i(r.firestore,Br),m=Fh(r._key.path),u={next:b=>{e[s]&&e[s](CE(f,r,b))},error:e[s+1],complete:e[s+2]};else{const b=$i(r,_o);f=$i(b.firestore,Br),m=b._query;const y=new rd(f);u={next:E=>{e[s]&&e[s](new uo(f,y,b,E))},error:e[s+1],complete:e[s+2]},EE(r._query)}return(function(y,E,A,V){const O=new Lg(V),me=new Mg(E,O,A);return y.asyncQueue.enqueueAndForget((async()=>kg(await xh(y),me))),()=>{O.Nu(),y.asyncQueue.enqueueAndForget((async()=>Ng(await xh(y),me)))}})(Qc(f),m,l,u)}function Kg(r,e){return(function(s,l){const u=new sr;return s.asyncQueue.enqueueAndForget((async()=>Xk(await uN(s),l,u))),u.promise})(Qc(r),e)}function CE(r,e,n){const s=n.docs.get(e._key),l=new rd(r);return new ka(r,l,e._key,s,new rl(n.hasPendingWrites,n.fromCache),e.converter)}const AN={maxAttempts:5};function bc(r,e){if((r=Jn(r)).firestore!==e)throw new Te(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class RN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=id(e)}get(e){const n=bc(e,this._firestore),s=new SN(this._firestore);return this._transaction.lookup([n._key]).then((l=>{if(!l||l.length!==1)return Ye(24041);const u=l[0];if(u.isFoundDocument())return new Lh(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new Lh(this._firestore,s,n._key,null,n.converter);throw Ye(18433,{doc:u})}))}set(e,n,s){const l=bc(e,this._firestore),u=AE(l.converter,n,s),f=gE(this._dataReader,"Transaction.set",l._key,u,l.converter!==null,s);return this._transaction.set(l._key,f),this}update(e,n,s,...l){const u=bc(e,this._firestore);let f;return f=typeof(n=Jn(n))=="string"||n instanceof Wc?_E(this._dataReader,"Transaction.update",u._key,n,s,l):yE(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,f),this}delete(e){const n=bc(e,this._firestore);return this._transaction.delete(n._key),this}}class IN extends RN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=bc(e,this._firestore),s=new rd(this._firestore);return super.get(e).then((l=>new ka(this._firestore,s,n._key,l._document,new rl(!1,!1),n.converter)))}}function Zv(r,e,n){r=$i(r,Br);const s={...AN,...n};return(function(u){if(u.maxAttempts<1)throw new Te(se.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,f,m){const b=new sr;return u.asyncQueue.enqueueAndForget((async()=>{const y=await hN(u);new oN(u.asyncQueue,y,m,f,b).ju()})),b.promise})(Qc(r),(l=>e(new IN(r,l))),s)}function di(){return new $c("deleteField")}function zi(){return new jg("serverTimestamp")}function il(...r){return new Pg("arrayUnion",r)}function fc(...r){return new zg("arrayRemove",r)}function ym(r){return new Bg("increment",r)}(function(e,n=!0){(function(l){Sl=l})(Tl),hl(new ho("firestore",((s,{instanceIdentifier:l,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Br(new TI(s.getProvider("auth-internal")),new wI(f,s.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Te(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dc(y.options.projectId,E)})(f,l),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Aa(Jb,ev,e),Aa(Jb,ev,"esm2020")})();const fi={astronomie_geographie:{name:"Astronomie & Geographie",emoji:"",questions:[{id:"ag_1",q:"Lieber am Tag oder in der Nacht aktiv sein?",a:"Tag ",b:"Nacht "},{id:"ag_2",q:"Lieber im Regenwald oder in der Wste stranden?",a:"Regenwald ",b:"Wste "},{id:"ag_3",q:"Lieber den Ozean oder riesige Gebirge bestaunen?",a:"Ozean ",b:"Gebirge "},{id:"ag_4",q:"Lieber ewiges Eis oder ewige Hitze ertragen?",a:"Eis ",b:"Hitze "},{id:"ag_5",q:"Lieber eine Stdtereise oder einen Natururlaub machen?",a:"Stadt ",b:"Natur "},{id:"ag_6",q:"Lieber auf einer Insel oder auf dem Festland leben?",a:"Insel ",b:"Festland "},{id:"ag_7",q:"Lieber ein Gewitter oder Sonnenschein beobachten?",a:"Gewitter ",b:"Sonne "},{id:"ag_8",q:"Lieber Schnee zu Weihnachten oder 30 Grad am Strand?",a:"Schnee ",b:"30 Grad "},{id:"ag_9",q:"Lieber zum Mond fliegen oder die Tiefsee erforschen?",a:"Mond ",b:"Tiefsee "},{id:"ag_10",q:"Lieber im Flachland oder in den Bergen wohnen?",a:"Flachland ",b:"Berge "},{id:"ag_11",q:"Lieber im Fluss oder im See schwimmen?",a:"Fluss ",b:"See "},{id:"ag_12",q:"Lieber durch den Dschungel oder durch den Nadelwald spazieren?",a:"Dschungel ",b:"Nadelwald "},{id:"ag_13",q:"Lieber einen Vulkan oder einen Geysir sehen?",a:"Vulkan ",b:"Geysir "},{id:"ag_14",q:"Lieber Polarlichter oder eine Sonnenfinsternis sehen?",a:"Polarlicht ",b:"Sonnenfinsternis "},{id:"ag_15",q:"Lieber den Mars besiedeln oder die Erde retten?",a:"Mars ",b:"Erde "},{id:"ag_16",q:"Lieber Urlaub im Camper oder auf dem Kreuzfahrtschiff machen?",a:"Camper ",b:"Schiff "},{id:"ag_17",q:"Lieber dnne Hhenluft oder salzige Meeresbrise atmen?",a:"Berge ",b:"Meer "},{id:"ag_18",q:"Lieber fliegen knnen oder die Zeit anhalten?",a:"Fliegen ",b:"Zeitstopp "}]},essen_trinken:{name:"Essen & Trinken",emoji:"",questions:[{id:"et_1",q:"Lieber Nutella mit oder ohne Butter essen?",a:"Mit Butter ",b:"Ohne Butter "},{id:"et_2",q:"Lieber Kaffee oder Tee am Morgen trinken?",a:"Kaffee ",b:"Tee "},{id:"et_3",q:"Lieber nie wieder Pizza oder nie wieder Pasta essen?",a:"Keine Pizza ",b:"Keine Pasta "},{id:"et_4",q:"Lieber Schokolade oder Gummibrchen naschen?",a:"Schokolade ",b:"Gummibrchen "},{id:"et_5",q:"Lieber einen Burger oder einen Dner essen?",a:"Burger ",b:"Dner "},{id:"et_6",q:"Lieber selbst kochen oder Essen bestellen?",a:"Kochen ",b:"Bestellen "},{id:"et_7",q:"Lieber Vanille- oder Schokoeis essen?",a:"Vanille ",b:"Schoko "},{id:"et_8",q:"Lieber ses oder salziges Popcorn essen?",a:"S ",b:"Salzig "},{id:"et_9",q:"Lieber Wein oder Bier am Abend trinken?",a:"Wein ",b:"Bier "},{id:"et_10",q:"Lieber Ksebrot oder Wurstbrot essen?",a:"Kse ",b:"Wurst "},{id:"et_11",q:"Lieber frhstcken oder zu Abend essen?",a:"Frhstck ",b:"Abendessen "},{id:"et_12",q:"Lieber Cola oder Saft trinken?",a:"Cola ",b:"Saft "},{id:"et_13",q:"Lieber Sahnetorte oder trockenen Kuchen essen?",a:"Torte ",b:"Kuchen "},{id:"et_14",q:"Lieber Pommes mit Ketchup oder Mayo essen?",a:"Ketchup ",b:"Mayo "},{id:"et_15",q:"Lieber eine Vorspeise oder ein Dessert bestellen?",a:"Vorspeise ",b:"Dessert "},{id:"et_16",q:"Lieber stilles Wasser oder Wasser mit Sprudel trinken?",a:"Still ",b:"Sprudel "},{id:"et_17",q:"Lieber Kartoffeln oder Reis als Beilage?",a:"Kartoffeln ",b:"Reis "},{id:"et_18",q:"Lieber s oder herzhaft frhstcken?",a:"S ",b:"Herzhaft "},{id:"et_19",q:"Lieber scharf oder mild essen?",a:"Scharf ",b:"Mild "},{id:"et_20",q:"Lieber Pizza Hawaii oder Pizza Salami essen?",a:"Hawaii ",b:"Salami "}]},flora_fauna:{name:"Flora & Fauna",emoji:"",questions:[{id:"ff_1",q:"Lieber einen Hund oder eine Katze haben?",a:"Hund ",b:"Katze "},{id:"ff_2",q:"Lieber Topfpflanzen oder Schnittblumen kaufen?",a:"Topf ",b:"Strau "},{id:"ff_3",q:"Lieber Vgel oder Fische beobachten?",a:"Vgel ",b:"Fische "},{id:"ff_4",q:"Lieber Kakteen oder Orchideen pflegen?",a:"Kaktus ",b:"Orchidee "},{id:"ff_5",q:"Lieber ein Pferd oder einen Delfin besitzen?",a:"Pferd ",b:"Delfin "},{id:"ff_6",q:"Lieber im Garten oder im Wald sein?",a:"Garten ",b:"Wald "},{id:"ff_7",q:"Lieber die Spinne fangen oder wegrennen?",a:"Fangen ",b:"Wegrennen "},{id:"ff_8",q:"Lieber einen Dino oder einen Drachen zhmen?",a:"Dino ",b:"Drache "},{id:"ff_9",q:"Lieber Nadelbume oder Laubbume im Garten?",a:"Nadel ",b:"Laub "},{id:"ff_10",q:"Lieber Sugetiere oder Reptilien?",a:"Suger ",b:"Reptil "},{id:"ff_11",q:"Lieber Obst oder Gemse anbauen?",a:"Obst ",b:"Gemse "},{id:"ff_12",q:"Lieber mit Haien schwimmen oder Lwen begegnen?",a:"Hai ",b:"Lwe "},{id:"ff_13",q:"Lieber Wespen oder Mcken ertragen?",a:"Wespe ",b:"Mcke "},{id:"ff_14",q:"Lieber Elefanten oder Wale sehen?",a:"Elefant ",b:"Wal "},{id:"ff_15",q:"Lieber duftende oder bunte Blumen?",a:"Duft ",b:"Farbe "},{id:"ff_16",q:"Lieber einem Wolf oder einem Bren begegnen?",a:"Wolf ",b:"Br "},{id:"ff_17",q:"Lieber in den Zoo oder in einen Wildpark gehen?",a:"Zoo ",b:"Wildpark "},{id:"ff_18",q:"Lieber Insekten essen oder hungern mssen?",a:"Insekten ",b:"Hungern "}]},forschung_wissenschaft:{name:"Forschung & Wissenschaft",emoji:"",questions:[{id:"fw_1",q:"Lieber Biologie- oder Physikunterricht?",a:"Bio ",b:"Physik "},{id:"fw_2",q:"Lieber im Labor oder drauen im Feld arbeiten?",a:"Labor ",b:"Drauen "},{id:"fw_3",q:"Lieber die Weltformel finden oder unsterblich sein?",a:"Formel ",b:"Unsterblich "},{id:"fw_4",q:"Lieber durch ein Mikroskop oder ein Teleskop schauen?",a:"Mikroskop ",b:"Teleskop "},{id:"fw_5",q:"Lieber Chemie oder Mathe verstehen?",a:"Chemie ",b:"Mathe "},{id:"fw_6",q:"Lieber in die Zukunft oder Vergangenheit reisen?",a:"Zukunft ",b:"Vergangenheit "},{id:"fw_7",q:"Lieber Aliens oder eine Super-KI entdecken?",a:"Aliens ",b:"KI "},{id:"fw_8",q:"Lieber wissen WANN oder WIE du stirbst?",a:"Wann ",b:"Wie "},{id:"fw_9",q:"Lieber die Tiefsee oder das Weltall erforschen?",a:"Tiefsee ",b:"Weltall "},{id:"fw_10",q:"Lieber Elon Musk oder Albert Einstein treffen?",a:"Musk ",b:"Einstein "},{id:"fw_11",q:"Lieber Genetik oder Informatik studieren?",a:"Genetik ",b:"Informatik "},{id:"fw_12",q:"Lieber auf Fakten oder auf Intuition vertrauen?",a:"Fakten ",b:"Bauchgefhl "},{id:"fw_13",q:"Lieber einen Roboter oder einen Klon haben?",a:"Roboter ",b:"Klon "},{id:"fw_14",q:"Lieber ein Entdecker oder ein Erfinder sein?",a:"Entdecker ",b:"Erfinder "},{id:"fw_15",q:"Lieber den Nobelpreis oder ein Patent erhalten?",a:"Nobelpreis ",b:"Patent "}]},geschichte_politik:{name:"Geschichte & Politik",emoji:"",questions:[{id:"gp_1",q:"Lieber in der Antike oder Zukunft leben?",a:"Antike ",b:"Zukunft "},{id:"gp_2",q:"Lieber Knig oder gewhlter Prsident sein?",a:"Knig ",b:"Prsident "},{id:"gp_3",q:"Lieber ein Ritter oder ein Pirat sein?",a:"Ritter ",b:"Pirat "},{id:"gp_4",q:"Lieber Revolutionr oder Stratege sein?",a:"Revolutionr ",b:"Stratege "},{id:"gp_5",q:"Lieber im Mittelalter oder in einem Sci-Fi Szenario leben?",a:"Mittelalter ",b:"Sci-Fi "},{id:"gp_6",q:"Lieber in einer Demokratie oder Monarchie leben?",a:"Demokratie ",b:"Monarchie "},{id:"gp_7",q:"Lieber reformieren oder eine Revolution starten?",a:"Reform ",b:"Revolution "},{id:"gp_8",q:"Lieber in einem Imperium oder Stadtstaat leben?",a:"Imperium ",b:"Stadtstaat "},{id:"gp_9",q:"Lieber echte Dinos oder den Pyramidenbau sehen?",a:"Dinos ",b:"Pyramiden "},{id:"gp_10",q:"Lieber Wirtschaft oder Umwelt priorisieren?",a:"Wirtschaft ",b:"Umwelt "},{id:"gp_11",q:"Lieber global oder national denken?",a:"Global ",b:"National "},{id:"gp_12",q:"Lieber Tradition oder Fortschritt bewahren?",a:"Tradition ",b:"Fortschritt "},{id:"gp_13",q:"Lieber Napoleon oder Caesar interviewen?",a:"Napoleon ",b:"Caesar "},{id:"gp_14",q:"Lieber auf Innenpolitik oder Auenpolitik konzentrieren?",a:"Innen ",b:"Auen "},{id:"gp_15",q:"Lieber Wahlpflicht oder Wahlrecht haben?",a:"Pflicht ",b:"Recht "},{id:"gp_16",q:"Lieber 100 Jahre in die Vergangenheit oder Zukunft reisen?",a:"Vergangenheit ",b:"Zukunft "}]},medien_unterhaltung:{name:"Medien & Unterhaltung",emoji:"",questions:[{id:"mu_1",q:"Lieber einen Film oder eine Serie schauen?",a:"Film ",b:"Serie "},{id:"mu_2",q:"Lieber Netflix oder YouTube nutzen?",a:"Netflix ",b:"YouTube "},{id:"mu_3",q:"Lieber ins Kino gehen oder auf der Couch bleiben?",a:"Kino ",b:"Couch "},{id:"mu_4",q:"Lieber Marvel oder DC schauen?",a:"Marvel ",b:"DC "},{id:"mu_5",q:"Lieber Comedy oder Horror schauen?",a:"Comedy ",b:"Horror "},{id:"mu_6",q:"Lieber Star Wars oder Star Trek Fan sein?",a:"Star Wars ",b:"Star Trek "},{id:"mu_7",q:"Lieber eine Doku oder einen Actionfilm sehen?",a:"Doku ",b:"Action "},{id:"mu_8",q:"Lieber im Originalton oder mit Synchro schauen?",a:"Original ",b:"Synchro "},{id:"mu_9",q:"Lieber Harry Potter oder Herr der Ringe schauen?",a:"Potter ",b:"HdR "},{id:"mu_10",q:"Lieber Spotify oder Radio hren?",a:"Spotify ",b:"Radio "},{id:"mu_11",q:"Lieber das Buch lesen oder den Film schauen?",a:"Buch ",b:"Film "},{id:"mu_12",q:"Lieber der Bsewicht oder der Held sein?",a:"Bsewicht ",b:"Held "},{id:"mu_13",q:"Lieber Game of Thrones Anfang oder Ende?",a:"Anfang ",b:"Ende "},{id:"mu_14",q:"Lieber Spoiler wissen oder berrascht werden?",a:"Spoiler ",b:"berraschung "},{id:"mu_15",q:"Lieber Trash-TV oder Arte schauen?",a:"Trash ",b:"Arte "},{id:"mu_16",q:"Lieber E-Books oder Papierbcher lesen?",a:"E-Book ",b:"Papier "}]},musik:{name:"Musik",emoji:"",questions:[{id:"mk_1",q:"Lieber Rock oder Hip-Hop hren?",a:"Rock ",b:"Hip-Hop "},{id:"mk_2",q:"Lieber zu Techno oder Schlager feiern?",a:"Techno ",b:"Schlager "},{id:"mk_3",q:"Lieber Musik mit Gesang oder Instrumental hren?",a:"Gesang ",b:"Instrumental "},{id:"mk_4",q:"Lieber auf ein Festival oder ein Konzert gehen?",a:"Festival ",b:"Konzert "},{id:"mk_5",q:"Lieber Snger oder Gitarrist sein?",a:"Snger ",b:"Gitarrist "},{id:"mk_6",q:"Lieber 80er oder 2000er Musik hren?",a:"80er ",b:"2000er "},{id:"mk_7",q:"Lieber Gitarre oder Klavier spielen knnen?",a:"Gitarre ",b:"Klavier "},{id:"mk_8",q:"Lieber Boybands oder Solo-Knstler hren?",a:"Boyband ",b:"Solo "},{id:"mk_9",q:"Lieber In-Ear oder Over-Ear Kopfhrer tragen?",a:"In-Ear ",b:"Over-Ear "},{id:"mk_10",q:"Lieber Vinyl oder Streaming nutzen?",a:"Vinyl ",b:"Streaming "},{id:"mk_11",q:"Lieber traurige oder frhliche Musik hren?",a:"Traurig ",b:"Frhlich "},{id:"mk_12",q:"Lieber Jazz oder Metal hren?",a:"Jazz ",b:"Metal "},{id:"mk_13",q:"Lieber im Club tanzen oder trinken?",a:"Tanzen ",b:"Trinken "},{id:"mk_14",q:"Lieber nur noch eine Band hren oder gar keine Musik mehr?",a:"Eine Band ",b:"Keine Musik "},{id:"mk_15",q:"Lieber Musik selber machen oder nur hren?",a:"Machen ",b:"Hren "}]},sport:{name:"Sport",emoji:"",questions:[{id:"sp_1",q:"Lieber Teamsport oder Einzelsport machen?",a:"Team ",b:"Einzel "},{id:"sp_2",q:"Lieber Sport gucken oder selbst machen?",a:"Gucken ",b:"Machen "},{id:"sp_3",q:"Lieber morgens oder abends trainieren?",a:"Morgens ",b:"Abends "},{id:"sp_4",q:"Lieber Cardio oder Krafttraining machen?",a:"Cardio ",b:"Kraft "},{id:"sp_5",q:"Lieber Fuball oder Formel 1 schauen?",a:"Fuball ",b:"Formel 1 "},{id:"sp_6",q:"Lieber Yoga oder Boxen machen?",a:"Yoga ",b:"Boxen "},{id:"sp_7",q:"Lieber Olympia oder die WM gewinnen?",a:"Olympia ",b:"WM "},{id:"sp_8",q:"Lieber siegen oder Spa haben?",a:"Siegen ",b:"Spa "},{id:"sp_9",q:"Lieber Schwimmen oder Joggen gehen?",a:"Schwimmen ",b:"Joggen "},{id:"sp_10",q:"Lieber Tennis oder Tischtennis spielen?",a:"Tennis ",b:"Tischtennis "},{id:"sp_11",q:"Lieber Fahrrad oder E-Bike fahren?",a:"Rad ",b:"E-Bike "},{id:"sp_12",q:"Lieber im Gym oder im Wald trainieren?",a:"Gym ",b:"Wald "},{id:"sp_13",q:"Lieber Fallschirm springen oder wandern gehen?",a:"Fallschirm ",b:"Wandern "},{id:"sp_14",q:"Lieber Ski oder Snowboard fahren?",a:"Ski ",b:"Snowboard "},{id:"sp_15",q:"Lieber Muskelkater haben oder faul sein?",a:"Muskelkater ",b:"Faul sein "}]},technik_wirtschaft:{name:"Technik & Wirtschaft",emoji:"",questions:[{id:"tw_1",q:"Lieber Apple oder Android nutzen?",a:"Apple ",b:"Android "},{id:"tw_2",q:"Lieber Windows oder Mac nutzen?",a:"Windows ",b:"Mac "},{id:"tw_3",q:"Lieber bar oder mit Karte zahlen?",a:"Bar ",b:"Karte "},{id:"tw_4",q:"Lieber Chef oder Angestellter sein?",a:"Chef ",b:"Angestellter "},{id:"tw_5",q:"Lieber im Homeoffice oder im Bro arbeiten?",a:"Homeoffice ",b:"Bro "},{id:"tw_6",q:"Lieber Sprachnachricht oder Text senden?",a:"Audio ",b:"Text "},{id:"tw_7",q:"Lieber Online oder im Laden einkaufen?",a:"Online ",b:"Laden "},{id:"tw_8",q:"Lieber in Aktien oder ins Sparbuch investieren?",a:"Aktien ",b:"Sparbuch "},{id:"tw_9",q:"Lieber auf Krypto oder Gold setzen?",a:"Krypto ",b:"Gold "},{id:"tw_10",q:"Lieber fliegen oder beamen knnen?",a:"Fliegen ",b:"Beamen "},{id:"tw_11",q:"Lieber Instagram oder TikTok nutzen?",a:"Insta ",b:"TikTok "},{id:"tw_12",q:"Lieber Elektro oder Verbrenner fahren?",a:"Elektro ",b:"Verbrenner "},{id:"tw_13",q:"Lieber per Sprache oder mit Knpfen steuern?",a:"Sprache ",b:"Knpfe "},{id:"tw_14",q:"Lieber Karriere machen oder viel Freizeit haben?",a:"Karriere ",b:"Freizeit "},{id:"tw_15",q:"Lieber reich oder berhmt sein?",a:"Reich ",b:"Berhmt "},{id:"tw_16",q:"Lieber leeres Postfach oder Chaos haben?",a:"Zero ",b:"Chaos "}]},gaming:{name:"Gaming",emoji:"",questions:[{id:"gm_1",q:"Lieber hohen Ping (Lag) oder Ruckeln (FPS) haben?",a:"Lag ",b:"Ruckeln "},{id:"gm_2",q:"Lieber Spielstand verlieren oder gebannt werden?",a:"Spielstand weg ",b:"Bann "},{id:"gm_3",q:"Lieber ein glcklicher Noob oder ein gestresster Pro sein?",a:"Noob ",b:"Pro "},{id:"gm_4",q:"Lieber Open World oder lineare Story spielen?",a:"Open World ",b:"Story "},{id:"gm_5",q:"Lieber am PC oder an der Konsole zocken?",a:"PC ",b:"Konsole "},{id:"gm_6",q:"Lieber mit Controller oder Maus spielen?",a:"Controller ",b:"Maus "},{id:"gm_7",q:"Lieber Survival oder Creative Modus spielen?",a:"Survival ",b:"Creative "},{id:"gm_8",q:"Lieber gute Grafik oder gute Story haben?",a:"Grafik ",b:"Story "},{id:"gm_9",q:"Lieber toxisch gewinnen oder nett verlieren?",a:"Gewinnen ",b:"Verlieren "},{id:"gm_10",q:"Lieber Singleplayer oder Multiplayer spielen?",a:"Single ",b:"Multi "},{id:"gm_11",q:"Lieber kostenlos (mit Werbung) oder Vollpreis spielen?",a:"Kostenlos ",b:"Vollpreis "},{id:"gm_12",q:"Lieber campen oder rushen?",a:"Campen ",b:"Rushen "},{id:"gm_13",q:"Lieber 100x versuchen oder beim ersten Mal schaffen?",a:"Tryhard ",b:"First Try "},{id:"gm_14",q:"Lieber Healer oder Damage Dealer spielen?",a:"Healer ",b:"Damage "},{id:"gm_15",q:"Lieber Retro-Games oder moderne Spiele zocken?",a:"Retro ",b:"Modern "}]},diverses:{name:"Diverses / Persnlichkeit",emoji:"",questions:[{id:"div_1",q:"Lieber unsichtbar sein oder fliegen knnen?",a:"Unsichtbar ",b:"Fliegen "},{id:"div_2",q:"Lieber immer die Wahrheit sagen oder immer lgen mssen?",a:"Wahrheit ",b:"Lge "},{id:"div_3",q:"Lieber frh aufstehen oder lange wach bleiben?",a:"Frh ",b:"Spt "},{id:"div_4",q:"Lieber nie wieder Musik hren oder nie wieder Filme sehen?",a:"Keine Musik ",b:"Keine Filme "},{id:"div_5",q:"Lieber mehr Zeit oder mehr Geld haben?",a:"Zeit ",b:"Geld "},{id:"div_6",q:"Lieber mit Socken oder barfu schlafen?",a:"An ",b:"Aus "},{id:"div_7",q:"Lieber in die Vergangenheit oder Zukunft reisen?",a:"Vergangenheit ",b:"Zukunft "},{id:"div_8",q:"Lieber chaotisch oder ordentlich sein?",a:"Chaos ",b:"Ordnung "},{id:"div_9",q:"Lieber Gedanken lesen oder mit Tieren sprechen knnen?",a:"Gedanken ",b:"Tiere "},{id:"div_10",q:"Lieber Tattoos oder Piercings haben?",a:"Tattoo ",b:"Piercing "},{id:"div_11",q:"Lieber weich oder hart liegen?",a:"Weich ",b:"Hart "},{id:"div_12",q:"Lieber auf das Handy oder das Auto verzichten?",a:"Kein Handy ",b:"Kein Auto "},{id:"div_13",q:"Lieber morgens oder abends duschen?",a:"Morgens ",b:"Abends "},{id:"div_14",q:"Lieber im Lotto gewinnen oder den Traumjob finden?",a:"Lotto ",b:"Traumjob "},{id:"div_15",q:"Lieber offene Hose oder Zahnlcke haben?",a:"Hose offen ",b:"Zahnlcke "},{id:"div_16",q:"Lieber an Geister oder an Aliens glauben?",a:"Geister ",b:"Aliens "}]},brettspiel:{name:"Brettspiel",emoji:"",questions:[{id:"bs_1",q:"Wenn ich ein Parfm kreieren msste, wonach wrde es am ehesten riechen?",a:"Frisch gemhter Rasen & Benzin",b:"Warme Pizza & Knoblauch",c:"Verbranntes Toast & Verzweiflung",d:"Neues Auto & alter Dachboden"},{id:"bs_2",q:"Was wre am ehesten meine erste Amtshandlung, wenn ich fr einen Tag Gott wre?",a:"Mcken ausrotten (ersatzlos!)",b:"Festlegen, dass Pizza gesund ist und Brokkoli dick macht",c:"Jedem Menschen ein Einhorn schenken",d:"Montags das Aufstehen verbieten"},{id:"bs_3",q:"Wie wrde ich am ehesten versuchen, ein Alien von der Menschheit zu berzeugen?",a:"Ich zeige ihnen se Katzenvideos",b:"Ich lade sie auf einen Dner ein",c:"Ich zeige ihnen Memes ber das Ende der Welt",d:"Wir sind verloren  ich helfe ihnen beim Zerstren"},{id:"bs_4",q:"Was ist am ehesten mein unntigstes Talent?",a:"Mit der Zunge die Nasenspitze berhren",b:"Extrem laut mit den Fingern schnippen",c:"Die Namen aller Pokmon auswendig wissen",d:"So tun, als wrde ich eine unsichtbare Treppe runtergehen"},{id:"bs_5",q:"In welcher Reality-Show wrde ich am ehesten landen?",a:"Shopping Queen (wegen meines fragwrdigen Stils)",b:"Das Sommerhaus der Stars (Drama ist mein Vorname)",c:"Bares fr Rares (um meinen alten Schrott zu verkaufen)",d:"Naked Survival (und ich wrde nach 5 Minuten weinen)"},{id:"bs_6",q:"Wie wrde mein eigener Freizeitpark am ehesten heien?",a:"Nickerchen-Land (berall stehen Sofas)",b:"Chaos-Canyon (nichts funktioniert, aber es macht Spa)",c:"Frittier-Paradies (alles ist aus Teig)",d:"Prokrastinations-World (Erffnung ist auf morgen verschoben)"},{id:"bs_7",q:"Was ist am ehesten der Song, bei dem ich sofort die Party verlasse?",a:"Atemlos durch die Nacht (Helene Fischer)",b:"Last Christmas (im Oktober)",c:"Baby Shark in Dauerschleife",d:"Den Ententanz"},{id:"bs_8",q:"Welches Objekt wrde ich am ehesten bei einer Zombie-Apokalypse als Waffe whlen?",a:"Eine elektrische Zahnbrste",b:"Eine gefrorene Salami",c:"Den Selfie-Stick (fr den letzten Post)",d:"Eine Pfanne (der Klassiker)"},{id:"bs_9",q:"Was ist am ehesten die merkwrdigste Sache, die ich je gegessen habe?",a:"Eine Mutprobe aus dem Garten (Regenwurm & Co.)",b:"Etwas, das 3 Monate ber dem MHD war",c:"Eine Kombination wie Nutella mit Salami",d:"Kreide in der Grundschule"},{id:"bs_10",q:"Wie wrde ich am ehesten eine Bank ausrauben?",a:"Mit einer Wasserpistole und einer Socke ber dem Kopf",b:"Ich wrde hflich nach dem Geld fragen",c:"Mit einem extrem komplizierten Plan, der sofort scheitert",d:"Gar nicht, ich wrde mich im Fluchtauto verfahren"},{id:"bs_11",q:"Wenn ich ein Mbelstck wre, welches wre ich am ehesten?",a:"Ein wackeliger Hocker",b:"Eine gemtliche, aber leicht fleckige Couch",c:"Ein Design-Regal, das niemand anfassen darf",d:"Die Minibar (immer gut gefllt)"},{id:"bs_12",q:"Was ist am ehesten mein Move auf der Tanzflche?",a:"Der betrunkene Onkel (rhythmisches Wippen)",b:"Der DNA-Test / Staubsauger (extrem tief am Boden)",c:"Ich stehe nur am Rand und halte mein Getrnk fest",d:"Ich bin der King/die Queen  Breakdance-Einlage inklusive"},{id:"bs_13",q:"Was wre am ehesten die Schlagzeile nach meiner Verhaftung?",a:"Person versuchte, Eichhrnchen zu hypnotisieren",b:"Wegen zu lauten Singens unter der Dusche festgenommen",c:"Versuchter Diebstahl von Gratis-Proben im Drogeriemarkt",d:"Aus Versehen ins falsche Haus eingebrochen und dort eingeschlafen"},{id:"bs_14",q:"Was wrde ich am ehesten tun, wenn ich eine dritte Hand am Rcken htte?",a:"Mich endlich berall selbst kratzen knnen",b:"Profi-Jongleur werden",c:"Sie unter einem weiten Pulli verstecken und Leute erschrecken",d:"Damit beim Zocken gleichzeitig Pizza essen"},{id:"bs_15",q:"Wie viele Tage wrde ich am ehesten im Dschungelcamp berleben?",a:"Ich wrde schon beim Helikopterflug aussteigen",b:"Genau 3 Tage, bis das erste Insekt mich ansieht",c:"Ich wrde gewinnen, weil ich alles esse",d:"Ich wrde wegen Regelversten rausgeworfen"},{id:"bs_16",q:"Was ist am ehesten meine peinlichste Google-Suche der letzten Zeit?",a:"Wie koche ich Wasser?",b:"Ab wann ist man ein Erwachsener?",c:"Warum guckt mich meine Katze so wertend an?",d:"Promi XY nackt"},{id:"bs_17",q:"Wenn mein Leben eine Sitcom wre, wie wrde der Titelsong am ehesten klingen?",a:"Ein trauriges Saxophon-Solo",b:"Aggressiver Heavy Metal",c:"Eine frhliche Pfeif-Melodie (die nervt)",d:"Der Sound eines abstrzenden Computers"},{id:"bs_18",q:"Was wrde ich am ehesten tun, wenn ich unsichtbar wre?",a:"Leute im Supermarkt erschrecken",b:"In geheime Meetings der Regierung schleichen",c:"Kostenlos ins Kino gehen",d:"Den ganzen Tag nackt drauen rumlaufen"},{id:"bs_19",q:"Welche fiktive Figur wre am ehesten mein idealer bester Freund?",a:"Patrick Star (SpongeBob)",b:"Sherlock Holmes (fr die Rtsel)",c:"Yoda (fr die Lebensweisheiten)",d:"Der Grinch"},{id:"bs_20",q:"Was ist am ehesten mein Endgegner im Haushalt?",a:"Das Beziehen der Bettdecke",b:"Die Steuererklrung",c:"Das Ausrumen der Splmaschine",d:"Socken, die nach dem Waschen keine Partner mehr haben"},{id:"bs_21",q:"Wie wrde ich am ehesten heien, wenn ich ein Rapper wre?",a:"MC Mdigkeit",b:"Lil' Verpeilt",c:"Dr. Dner",d:"Money Schmutz"},{id:"bs_22",q:"Was wre am ehesten das Schlimmste, was auf meinem Grabstein stehen knnte?",a:"Er/Sie hat das WLAN-Passwort mit ins Grab genommen.",b:"Er/Sie war stets bemht.",c:"Habe ich den Herd ausgemacht?",d:"Ladebalken bei 99% stehen geblieben."},{id:"bs_23",q:"Wenn ich eine neue Sportart erfinden msste, was wre das am ehesten?",a:"Extrem-Couch-Chilling",b:"Synchron-Ghnen",c:"Wett-Einkaufswagen-Rennen",d:"Weitwurf mit nassen Socken"},{id:"bs_24",q:"Was wre am ehesten mein letztes Abendmahl?",a:"Ein Eimer voll mit Pommes",b:"Ein 20-Gnge-Men, um die Hinrichtung hinauszuzgern",c:"Eine Schssel Msli (mit Wasser, weil keine Milch da ist)",d:"Ein Glckskeks ohne Zettel"},{id:"bs_25",q:"Wie reagiere ich am ehesten, wenn ich im Fahrstuhl mit einer fremden Person stecke?",a:"Ich fange sofort an, meine ganze Lebensgeschichte zu erzhlen",b:"Ich drcke panisch alle Knpfe",c:"Ich lege mich schlafen, bis Hilfe kommt",d:"Ich tue so, als wre ich der Techniker"},{id:"bs_26",q:"Welche App auf meinem Handy ist am ehesten peinlich?",a:"Eine App zum Kalorienzhlen (die ich nie nutze)",b:"Ein Talking Tom Abklatsch",c:"Eine Dating-App fr Haustierbesitzer",d:"Ein Spiel, fr das ich schon echtes Geld ausgegeben habe"},{id:"bs_27",q:"Was wrde ich am ehesten tun, wenn ich im Lotto gewinne (aber nur 1 Euro)?",a:"Ihn stolz einrahmen",b:"Eine einzige Kaugummi-Kugel kaufen",c:"Ihn jemandem schenken und so tun, als wre ich grozgig",d:"Mich ber die Steuer beschweren"},{id:"bs_28",q:"Wenn ich eine historische Person treffen knnte, wer wre es am ehesten?",a:"Einstein (um ihn zu fragen, ob er meine Hausaufgaben macht)",b:"Cleopatra (um Schmink-Tipps zu bekommen)",c:"Napoleon (um zu sehen, wie klein er wirklich war)",d:"Der Erfinder des Rades (um ihn zu fragen: Warum nicht quadratisch?)"},{id:"bs_29",q:"Was ist am ehesten meine geheime Superkraft?",a:"Ich finde immer die langsamste Schlange an der Kasse",b:"Ich kann Dinge aufrumen, sodass sie nie wieder auftauchen",c:"Ich erkenne Schauspieler in Filmen, wei aber nie ihren Namen",d:"Ich kann 12 Stunden am Stck schlafen und trotzdem mde sein"},{id:"bs_30",q:"Was ist am ehesten mein Spirit Animal beim Feiern?",a:"Die Grille (macht viel Lrm, man sieht sie aber nicht)",b:"Der Goldfisch (vergisst nach 3 Sekunden, welches Getrnk er hat)",c:"Der Pfau (muss im Mittelpunkt stehen)",d:"Der Waschbr (sucht am Ende nur was zu essen)"},{id:"bs_31",q:"Wie wrde ich am ehesten reagieren, wenn ich im falschen Zug sitze?",a:"Panisch bei der nchsten Station rausspringen",b:"So tun, als wre das mein Plan gewesen",c:"Den Schaffner bestechen",d:"Einfach sitzen bleiben und ein neues Leben in der Zielstadt anfangen"},{id:"bs_32",q:"Was war am ehesten mein dmmster Kaufrausch?",a:"Ein Fitnessgert, das jetzt als Kleiderstnder dient",b:"50 Rollen Klopapier (nur zur Sicherheit)",c:"Ein aufblasbares Kostm",d:"Eine DVD-Box einer Serie, die ich hasse"},{id:"bs_33",q:"Was ist am ehesten mein Lieblings-Schimpfwort?",a:"Ein klassisches Mist!",b:"Etwas sehr Kreatives wie Evolutionsbremse",c:"Nur wildes Gestikulieren",d:"Ein ganzer Schwall an Flchen, die keinen Sinn ergeben"},{id:"bs_34",q:"Welches Klischee erflle ich am ehesten voll und ganz?",a:"Der typische Deutsche (Handtuch auf die Liege)",b:"Das Chaos-Genie",c:"Der Frher war alles besser-Sager",d:"Der digitale Junkie (ohne WLAN kein Leben)"},{id:"bs_35",q:"Wenn ich eine Verschwrungstheorie starten msste, welche wre das am ehesten?",a:"Tauben sind eigentlich Kameras der Regierung",b:"Socken verschwinden in der Waschmaschine in eine andere Dimension",c:"Spiegel sind Fenster in eine Parallelwelt, aber die anderen sind schchtern",d:"Avocados wurden erfunden, um Hipster zu kontrollieren"},{id:"bs_36",q:"Wie wrde ich mein eigenes Land am ehesten nennen?",a:"Prokrastinationien",b:"Absurdistan",c:"Pommes-Land",d:"[Mein Name]-City"},{id:"bs_37",q:"Welche Art von kriminellem Mastermind wre ich am ehesten?",a:"Der charmante Hochstapler",b:"Der Hacker, der im Keller Pizza isst",c:"Der Fluchtwagenfahrer, der stndig falsch abbiegt",d:"Derjenige, der aus Versehen den falschen Tresor knackt"},{id:"bs_38",q:"Wenn ich ein Emoji wre, welches wre ich am ehesten?",a:" (Der Dauerlacher)",b:" (Der Klassenclown)",c:" (Der Sarkastische)",d:" (Der, der mit dem Alltag berfordert ist)"},{id:"bs_39",q:"Was wrde ich am ehesten tun, wenn ich in der Wildnis ausgesetzt werde?",a:"Versuchen, ein Feuer mit zwei Stcken zu machen (und scheitern)",b:"Beeren essen, die mich am Ende halluzinieren lassen",c:"Versuchen, Freundschaft mit einem Bren zu schlieen",d:"Nach 10 Minuten nach dem WLAN-Passwort suchen"},{id:"bs_40",q:"Was wre am ehesten mein Beruf in einer mittelalterlichen Fantasy-Welt?",a:"Der tollpatschige Zauberlehrling",b:"Der Dorflteste, der nur Rtsel spricht",c:"Der betrunkene Barde in der Taverne",d:"Der Drachenftterer (mit sehr kurzer Lebenserwartung)"},{id:"bs_41",q:"Wie wrde ich am ehesten reagieren, wenn ich ein Haar in meinem Essen im Restaurant finde?",a:"Den Manager verlangen und eine Szene machen",b:"Es diskret entfernen und einfach weiteressen",c:"Die ganze Zeit angewidert draufstarren, aber nichts sagen",d:"So tun, als wre es mein eigenes, um niemanden zu belstigen"},{id:"bs_42",q:"Was wrde ich am ehesten tun, wenn ich erfahre, dass mein Leben eine Truman Show ist?",a:"Direkt in die Kamera winken und Werbung fr Eistee machen",b:"Versuchen, aus dem Set auszubrechen",c:"Mich ber meine schlechte Gage beschweren",d:"Einfach weitermachen wie bisher, Hauptsache die Einschaltquoten stimmen"},{id:"bs_43",q:"Was ist am ehesten mein Verhalten bei einer Zombie-Invasion?",a:"Ich bin der Erste, der gebissen wird, weil ich den Zombie streicheln wollte",b:"Ich verbarrikadiere mich im nchsten Supermarkt in der Swarenabteilung",c:"Ich grnde eine neue Zivilisation in meinem Garten",d:"Ich versuche, die Zombies mit schlechten Witzen zu vertreiben"},{id:"bs_44",q:"Welches ungewhnliche Haustier htte ich am ehesten?",a:"Ein Alpaka (weil sie so flauschig sind)",b:"Ein Faultier (als Spiegelbild meiner Seele)",c:"Einen Pinguin, der im Khlschrank wohnt",d:"Einen Waschbren, der mir beim Mllsortieren hilft"},{id:"bs_45",q:"Was wrde ich am ehesten tun, wenn ich 24 Stunden lang die Zeit anhalten knnte?",a:"In Ruhe ausschlafen (endlich!)",b:"Leuten im Supermarkt die Einkaufswagen vertauschen",c:"In die Umkleidekabine von Promis schleichen",d:"Alle Hausarbeiten erledigen, um danach nie wieder was tun zu mssen"},{id:"bs_46",q:"Wie wrde ich am ehesten reagieren, wenn ich eine peinliche Nachricht an die falsche Person schicke?",a:"Mein Handy sofort in den nchsten Fluss werfen",b:"So tun, als wre mein Account gehackt worden",c:"Sofort 50 weitere Nachrichten schicken, um die erste zu berdecken",d:"Mit Ups, falscher Chat lol locker drber weggehen"},{id:"bs_47",q:"Was wre am ehesten meine Rolle in einer Zirkus-Show?",a:"Der Dompteur, der Angst vor Katzen hat",b:"Derjenige, der aus der Kanone geschossen wird",c:"Der tollpatschige Akrobat, der vom Seil fllt",d:"Die Person, die die Popcorn-Maschine bewacht"},{id:"bs_48",q:"Was wrde ich am ehesten tun, wenn ich im Fahrstuhl mit meinem absoluten Idol feststecke?",a:"Ohnmchtig werden",b:"Die ganze Zeit ber das Wetter reden, weil mir nichts Besseres einfllt",c:"Ein extrem verwackeltes Selfie machen",d:"Ihn/Sie fragen, ob ich mal am Parfum riechen darf"},{id:"bs_49",q:"Welche Sache wrde ich am ehesten mit auf eine einsame Insel nehmen?",a:"Eine unendliche Vorratspackung Kaffee",b:"Meinen Laptop (auch ohne Internet)",c:"Eine riesige aufblasbare Badeinsel",d:"Ein Buch ber Wie man ein Boot aus Sand baut"},{id:"bs_50",q:"Was wrde ich am ehesten tun, wenn ich pltzlich fliegen knnte?",a:"Den Stau auf dem Weg zur Arbeit ignorieren",b:"Tauben jagen und sie erschrecken",c:"Fenster putzen in schwindelerregender Hhe",d:"Nach 5 Minuten feststellen, dass ich Hhenangst habe und wieder landen"},{id:"bs_51",q:"In welcher Epoche htte ich am ehesten berlebt?",a:"Steinzeit (Beeren sammeln und Hhlen bemalen)",b:"Mittelalter (als Hofnarr)",c:"In der Zukunft (als Museumsstck fr 'Primitivitt')",d:"In den 80ern (wegen der Frisuren)"},{id:"bs_52",q:"Was wre am ehesten mein Markenzeichen als Superheld?",a:"Ein Umhang aus einer alten Bettdecke",b:"Dass ich immer 15 Minuten zu spt zur Rettung komme",c:"Ein extrem unpassender Kampfschrei",d:"Dass ich meine Geheimidentitt sofort aus Versehen verrate"},{id:"bs_53",q:"Was wrde ich am ehesten in einer Zeitkapsel fr die Nachwelt hinterlassen?",a:"Einen USB-Stick mit Memes",b:"Eine halbe Packung Tiefkhlpizza",c:"Eine Anleitung, wie man ein Blatt Papier faltet",d:"Einen Zettel, auf dem 'Ich war hier und es war okay' steht"},{id:"bs_54",q:"Wie wrde ich am ehesten versuchen, ein Feuer ohne Streichhlzer zu machen?",a:"Den Stein ganz fest bse angucken",b:"Zwei Stcke reiben, bis ich Blasen an den Hnden habe",c:"Auf ein Gewitter warten",d:"Eine App dafr herunterladen"},{id:"bs_55",q:"Was wre am ehesten mein Beitrag zu einem Potluck-Buffet?",a:"Eine Tte Chips (lieblos in eine Schssel geschttet)",b:"Etwas extrem Aufwendiges, das leider verbrannt ist",c:"Nudelsalat (der Klassiker, den schon 5 andere mitbringen)",d:"Nur Servietten und gute Laune"},{id:"bs_56",q:"Welche Sache wrde ich am ehesten im Weltraum vergessen?",a:"Meinen Helm",b:"Das Ladekabel fr mein Handy",c:"Die Koordinaten der Erde",d:"Dass ich die Katze noch fttern wollte"},{id:"bs_57",q:"Was wre am ehesten mein Job in einem Zirkus?",a:"Die Person, die die Elefantenpfel aufsammelt",b:"Der Typ, der die Messer wirft (aber immer daneben)",c:"Die menschliche Kanonenkugel (aber nur fr kurze Strecken)",d:"Der Wahrsager, der nur das Wetter von gestern vorhersagt"},{id:"bs_58",q:"Wie wrde ich am ehesten reagieren, wenn ich eine Million Euro geschenkt bekomme?",a:"Sofort alles fr Quatsch ausgeben",b:"Meinen Job kndigen und dann merken, dass es nicht reicht",c:"Erstmal drei Tage lang schlafen, um drber nachzudenken",d:"Fragen, ob das auch in bar geht"},{id:"bs_59",q:"Was ist am ehesten mein Problem beim Campen?",a:"Ich bekomme das Zelt nicht aufgebaut",b:"Ich werde von einer einzigen Mcke die ganze Nacht terrorisiert",c:"Ich vermisse meine Matratze nach 10 Minuten",d:"Ich finde den Weg zum Klo im Dunkeln nicht"},{id:"bs_60",q:"Was wre am ehesten mein Name in einem Western-Film?",a:"Der mde Joe",b:"Schleim-Sattel Sam",c:"Piano-Peter (der gar nicht spielen kann)",d:"Desperado ohne Plan"},{id:"bs_61",q:"Welches Kchengert wre ich am ehesten?",a:"Ein Toaster (macht viel Lrm fr wenig Ergebnis)",b:"Ein Eierkocher (kann nur eine Sache, die aber gut)",c:"Ein Sandwichmaker, der vllig verkrustet im Schrank steht",d:"Eine Kaffeemaschine (ohne mich luft nichts)"},{id:"bs_62",q:"Was wrde ich am ehesten tun, wenn ich Knig/Knigin von England wre?",a:"Die Corgis mit Burgern fttern",b:"Die Krone bei eBay verkaufen",c:"Jeden Tag im Pyjama regieren",d:"Den Tee durch Eiskaffee ersetzen"},{id:"bs_63",q:"Was ist am ehesten mein Talent bei einer Talentshow?",a:"Gerusche mit der Achselhhle machen",b:"Ein Glas Wasser in Rekordzeit austrinken",c:"Meinen eigenen Namen rckwrts rlpsen",d:"So lange stillstehen, bis die Jury mich vergisst"},{id:"bs_64",q:"Welche Disney-Figur wre ich am ehesten im echten Leben?",a:"Goofy (wegen der Tollpatschigkeit)",b:"Schneewittchen (weil ich viel schlafe)",c:"Einer der sieben Zwerge (wahrscheinlich 'Mde')",d:"Die bse Hexe (vor meinem ersten Kaffee)"},{id:"bs_65",q:"Was wre am ehesten mein Grund fr eine Anzeige bei der Polizei?",a:"Zu langsames Gehen auf dem Brgersteig",b:"Illegales Streamen von Kinderfilmen",c:"Bestechung eines Parkautomaten mit Knpfen",d:"Das Singen falscher Songtexte in der ffentlichkeit"},{id:"bs_66",q:"Wie wrde ich am ehesten reagieren, wenn ich einen Geist sehe?",a:"Ihm versuchen, eine Versicherung zu verkaufen",b:"Sofort ein Selfie machen (#GhostVibes)",c:"Ihn fragen, ob er die Miete mitbezahlt",d:"Einfach wegrennen und nie wieder zurckblicken"},{id:"bs_67",q:"Was wre am ehesten mein 'Signature Move' beim Kochen?",a:"Den Rauchmelder als Kurzzeitwecker nutzen",b:"Alles mit so viel Kse berbacken, dass man es nicht mehr erkennt",c:"Viel zu viel Salz benutzen",d:"Bestellen und behaupten, es sei selbstgemacht"},{id:"bs_68",q:"Welches Tier wrde ich am ehesten im Garten zhmen?",a:"Einen betrunkenen Igel",b:"Eine sehr aggressive Taube",c:"Einen Regenwurm namens Hans",d:"Einen Maulwurf, der meinen Rasen ruiniert"},{id:"bs_69",q:"Was wrde ich am ehesten machen, wenn ich eine Zeitmaschine htte?",a:"Lottozahlen von letzter Woche nachschauen",b:"Meinem jngeren Ich sagen: 'Schneid dir die Haare nicht so!'",c:"Dinosaurier streicheln (und wahrscheinlich gefressen werden)",d:"Die Erfindung der Hausaufgaben verhindern"},{id:"bs_70",q:"Was ist am ehesten mein grter Fail im Fitnessstudio?",a:"Vom Laufband fallen, weil ich auf mein Handy geguckt habe",b:"Nicht wissen, wie die Gerte funktionieren und einfach irgendwas machen",c:"Nach 5 Minuten Training ein Foto machen und nach Hause gehen",d:"Sich im Spiegel selbst bewundern und dabei gegen eine Hantelbank laufen"},{id:"bs_71",q:"In welcher Horrorfilm-Situation wrde ich am ehesten sterben?",a:"Ich stolpere ber eine ebene Flche",b:"Ich gehe nachsehen, was das Gerusch im Keller war",c:"Ich versuche, mich im Khlschrank zu verstecken",d:"Ich vertraue dem Mrder, weil er nett aussieht"},{id:"bs_72",q:"Was wre am ehesten meine Rolle in einer Boyband/Girlgroup?",a:"Der/Die Se (die eigentlich nichts kann)",b:"Der/Die Rebellische (der/die stndig Hausverbot hat)",c:"Der/Die Schchterne, die immer im Hintergrund tanzt",d:"Der/Diejenige, die nach zwei Wochen fr eine Solokarriere aussteigt"},{id:"bs_73",q:"Wie wrde ich am ehesten versuchen, ein Date zu beeindrucken?",a:"Mit unntigen Fakten ber Haie",b:"Indem ich sage, dass ich fast mal berhmt war",c:"Mit einem sehr schlechten Zaubertrick",d:"Indem ich die ganze Speisekarte auswendig lerne"},{id:"bs_74",q:"Was ist am ehesten mein 'Guilty Pleasure' im Fernsehen?",a:"Sendungen ber extrem fette Katzen",b:"Trash-TV, bei dem sich Leute anschreien",c:"Teleshopping mitten in der Nacht",d:"Zeichentrickserien fr Dreijhrige"},{id:"bs_75",q:"Was wrde ich am ehesten tun, wenn ich eine Ameise wre?",a:"Versuchen, einen ganzen Krmel Pizza alleine zu tragen",b:"In das Haus eines Promis einbrechen",c:"Die Ameisenknigin strzen und selbst regieren",d:"Mich in einem Picknickkorb verstecken"},{id:"bs_76",q:"Wie wrde mein eigenes Parfm am ehesten heien?",a:"Eau de Couch Potato",b:"Duft des Chaos",c:"Vergessenes Pausenbrot",d:"Frische Wsche (die noch nass ist)"},{id:"bs_77",q:"Was wre am ehesten meine Taktik bei einer Schneeballschlacht?",a:"Hinter einem Baum verstecken und hoffen, dass mich niemand sieht",b:"Haufenweise Schneeblle vorbereiten, die dann schmelzen",c:"Weglaufen und schreien: 'Nicht ins Gesicht!'",d:"Den Schnee essen statt werfen"},{id:"bs_78",q:"Welches Auto wrde ich am ehesten fahren, wenn Geld keine Rolle spielte?",a:"Einen Panzer (fr den Berufsverkehr)",b:"Ein Einhorn-Mobil mit Glitzerlack",c:"Ein Batmobil (ohne die Gadgets)",d:"Einen Oldtimer, der alle 2 km liegen bleibt"},{id:"bs_79",q:"Was ist am ehesten meine nervigste Eigenschaft?",a:"Dass ich Stze nicht zu Ende...",b:"Stndiges Besserwissen (auch wenn ich falsch liege)",c:"Zu laut kauen",d:"Immer zu spt kommen"},{id:"bs_80",q:"Wie wrde ich am ehesten auf eine einsame Insel gelangen?",a:"Vom Kreuzfahrtschiff gefallen, weil ich ein Selfie machen wollte",b:"Mit dem Tretboot verfahren",c:"Fallschirmabsprung an der falschen Stelle",d:"Freiwillig, um mal meine Ruhe zu haben"},{id:"bs_81",q:"Was wre am ehesten mein Wunsch-Superkraft-Nachteil?",a:"Fliegen knnen, aber nur 10 cm ber dem Boden",b:"Gedanken lesen, aber nur die schlechten ber mich",c:"Unsichtbar sein, aber nur wenn niemand hinguckt",d:"Superschnell rennen, aber sofort auer Puste sein"},{id:"bs_82",q:"Welche Frucht wre ich am ehesten?",a:"Eine Zitrone (sauer, aber erfrischend)",b:"Eine Banane (krumm und wird schnell braun)",c:"Eine Kokosnuss (harte Schale, weicher Kern)",d:"Eine Weintraube (nur in der Gruppe stark)"},{id:"bs_83",q:"Was wrde ich am ehesten tun, wenn mein Handy in die Toilette fllt?",a:"Hinterhergreifen ohne nachzudenken",b:"Davor stehen und weinen",c:"In Reis einlegen und beten",d:"Einfach splen und ein neues Leben anfangen"},{id:"bs_84",q:"Was ist am ehesten mein Lieblings-Smalltalk-Thema?",a:"Das Wetter (typisch deutsch)",b:"Wie mde ich heute wieder bin",c:"Was ich gestern gegessen habe",d:"Verschwrungstheorien ber Tauben"},{id:"bs_85",q:"Wie wrde ich am ehesten einen Streit gewinnen?",a:"Indem ich einfach so lange 'Warum?' frage, bis der andere aufgibt",b:"Mit vllig unlogischen Argumenten",c:"Indem ich anfange zu weinen",d:"Gar nicht, ich ziehe mich beleidigt zurck"},{id:"bs_86",q:"Was wre am ehesten mein Job in einer Weltraum-Kolonie?",a:"Sauerstoff-Tester (sehr riskant)",b:"Weltraum-Grtner fr Plastikblumen",c:"Unterhalter fr gelangweilte Roboter",d:"Mllschlucker-Bediener"},{id:"bs_87",q:"Was wrde ich am ehesten tun, wenn ich eine Million Follower htte?",a:"Nur noch Fotos von meinem Essen posten",b:"Versuchen, eine eigene Sekte zu grnden",c:"Meinen Account aus Versehen lschen",d:"Leuten dubiose Vitamin-Gummis verkaufen"},{id:"bs_88",q:"Welcher Wochentag wre ich am ehesten?",a:"Montag (niemand mag mich)",b:"Mittwoch (ich wei nicht, wo ich hingehre)",c:"Freitagabend (voller Energie, die schnell verpufft)",d:"Sonntag (nur am Faulenzen)"},{id:"bs_89",q:"Was wre am ehesten meine Reaktion auf einen Heiratsantrag in der ffentlichkeit?",a:"Wegrennen vor lauter Panik",b:"Ja sagen, nur damit die Leute aufhren zu gucken",c:"Fragen, ob das ein Prank fr YouTube ist",d:"Ohnmchtig werden und in die Torte fallen"},{id:"bs_90",q:"Was wrde ich am ehesten tun, wenn ich fr 5 Minuten der Prsident wre?",a:"Gratis Pizza fr alle befehlen",b:"Den Rasen vor dem Weien Haus mhen",c:"Geheime Akten ber Aliens lesen",d:"Ein Nickerchen im Oval Office machen"},{id:"bs_91",q:"Was ist am ehesten mein Verhalten im Kino?",a:"Nach 10 Minuten einschlafen",b:"Die ganze Zeit lautstark Popcorn essen",c:"Den Film kommentieren, als wre ich der Regisseur",d:"Nach der Hlfte fragen, worum es eigentlich geht"},{id:"bs_92",q:"Welches Brettspiel bringt mich am ehesten zum Ausrasten?",a:"Monopoly (ich lande immer im Gefngnis)",b:"Mensch rgere dich nicht (der Name ist Programm)",c:"Scrabble (weil ich keine Wrter kenne)",d:"Activity (niemand versteht meine Zeichnungen)"},{id:"bs_93",q:"Was wrde ich am ehesten tun, wenn ich ein Gespenst wre?",a:"Nur die Socken der Leute verstecken",b:"Das WLAN immer im spannendsten Moment ausschalten",c:"Nachts leise Witze flstern",d:"Leuten im Schlaf die Haare kmmen"},{id:"bs_94",q:"Wie wrde ich am ehesten auf eine Dit reagieren?",a:"Nach zwei Stunden eine Pizza bestellen",b:"Nur noch ber Essen reden",c:"Behaupten, dass Kekse eigentlich Gemse sind",d:"Einfach mehr Sport machen (hahaha, nein)"},{id:"bs_95",q:"Was wre am ehesten mein Name als Pirat?",a:"Einbein-Ede",b:"Kpt'n Chaos",c:"Scurvy-Susi",d:"Der Schrecken der Badewanne"},{id:"bs_96",q:"Was wrde ich am ehesten tun, wenn ich in einer Zeitschleife feststecke?",a:"Jeden Tag etwas anderes Dummes essen",b:"Endlich mal alle Serien zu Ende schauen",c:"Versuchen, den perfekten Tag zu erleben (und scheitern)",d:"Einfach nur schlafen, weil es eh egal ist"},{id:"bs_97",q:"Welche Art von Museum wrde ich am ehesten erffnen?",a:"Das Museum der gescheiterten Trume",b:"Eine Ausstellung ber hssliche Teppiche",c:"Das Museum fr Dinge, die ich mal verloren habe",d:"Eine Galerie fr schlechte Selfies"},{id:"bs_98",q:"Was wre am ehesten meine Strategie bei einer Talentshow?",a:"Mitleid erregen",b:"Die Jury bestechen",c:"Etwas so Schlechtes machen, dass es wieder gut ist",d:"Einfach nicht erscheinen"},{id:"bs_99",q:"Was wrde ich am ehesten tun, wenn ich einen Roboter-Zwilling htte?",a:"Ihn zur Arbeit schicken",b:"Ihn meine Wohnung aufrumen lassen",c:"Mich mit ihm streiten, wer das Original ist",d:"Ihn als Kleiderstnder benutzen"},{id:"bs_100",q:"Was ist am ehesten das Letzte, was ich vor meinem Tod sagen wrde?",a:"Ich habe das Gold vergraben bei...",b:"War das Fleisch noch gut?",c:"Ich wusste, dass das eine schlechte Idee war.",d:"Lscht meinen Browserverlauf!"}]}};function mc(r=[]){let e=[];return r.length===0&&(r=Object.keys(fi)),r.forEach(n=>{fi[n]&&fi[n].questions&&fi[n].questions.forEach(s=>{e.push({...s,category:n})})}),e}const _m=new Map,kE=r=>{if(_m.has(r))return _m.get(r);try{const e="/Hitzkopf/",n=new Audio(`${e}sounds/${r}.mp3`);return n.addEventListener("error",s=>{console.warn(` Audio-Datei nicht gefunden: ${r}.mp3`,s)}),_m.set(r,n),n}catch(e){return console.warn(` Fehler beim Erstellen des Audio-Objekts fr ${r}:`,e),null}},CN=(r,e=.5)=>{const n=kE(r);if(n)try{n.volume=e,n.currentTime=0,n.play().catch(s=>{})}catch(s){console.warn(` Fehler beim Abspielen von ${r}:`,s)}},kN=()=>kE("background_music"),NN="_menuModal_1ubl0_2",DN="_menuHeader_1ubl0_23",MN="_menuTitle_1ubl0_30",xN="_menuCloseButton_1ubl0_35",ON="_menuButton_1ubl0_49",LN="_menuBackButton_1ubl0_67",VN="_menuSection_1ubl0_81",jN="_menuSectionTitle_1ubl0_87",PN="_menuLogContainer_1ubl0_94",zN="_menuLogEntry_1ubl0_104",BN="_menuLogEmpty_1ubl0_110",UN="_landingContainer_1ubl0_115",qN="_landingLogoContainer_1ubl0_128",HN="_landingLogo_1ubl0_128",FN="_landingButton_1ubl0_144",GN="_backToProjectsButton_1ubl0_175",KN="_logoContainer_1ubl0_200",QN="_logoHorizontal_1ubl0_208",WN="_emojiGalleryWrapper_1ubl0_217",$N="_emojiGallery_1ubl0_217",YN="_emojiSpacer_1ubl0_252",XN="_eliminatedText_1ubl0_270",ZN="_eliminatedSubtext_1ubl0_276",JN="_thermoTop_1ubl0_296",eD="_thermoTopLeft_1ubl0_303",tD="_thermoTemp_1ubl0_309",nD="_thermoBar_1ubl0_318",iD="_thermoFill_1ubl0_326",sD="_attackSelectionGrid_1ubl0_344",rD="_volumeTitle_1ubl0_440",aD="_volumeIcon_1ubl0_452",oD="_waitText_1ubl0_514",lD="_buttonMarginTop_1ubl0_521",cD="_helpButtonLeft_1ubl0_526",uD="_spacer_1ubl0_539",hD="_settingsButton_1ubl0_544",dD="_settingsButtonGray_1ubl0_555",fD="_settingsButtonRed_1ubl0_559",mD="_settingsButtonDarkRed_1ubl0_564",gD="_settingsButtonDanger_1ubl0_569",pD="_settingsButtonMusic_1ubl0_575",yD="_settingsButtonMusicEnabled_1ubl0_582",_D="_settingsButtonMusicDisabled_1ubl0_586",bD="_volumeSliderContainer_1ubl0_591",vD="_volumeSliderWrapper_1ubl0_595",TD="_volumeSliderInput_1ubl0_601",ED="_correctGuessContainer_1ubl0_642",SD="_correctGuessTitle_1ubl0_646",wD="_correctGuessSubtitle_1ubl0_653",AD="_attackSelectionWrapper_1ubl0_665",RD="_attackSelectionHeader_1ubl0_673",ID="_attackSelectionHeaderIcon_1ubl0_682",CD="_attackPlayerCardLarge_1ubl0_692",kD="_attackPlayerEmojiLarge_1ubl0_711",ND="_attackPlayerNameLarge_1ubl0_716",DD="_attackPlayerDmgLarge_1ubl0_723",MD="_attackNoPlayersLarge_1ubl0_729",xD="_hotseatModalOverlay_1ubl0_737",OD="_hotseatModalContent_1ubl0_750",LD="_hotseatModalIcon_1ubl0_763",VD="_hotseatModalTitle_1ubl0_768",jD="_hotseatModalText_1ubl0_778",PD="_hotseatModalHeader_1ubl0_784",zD="_hotseatModalEmoji_1ubl0_792",BD="_hotseatModalButton_1ubl0_796",UD="_labelWithMargin_1ubl0_833",qD="_grid2Cols_1ubl0_842",HD="_grid3Cols_1ubl0_850",FD="_backButton_1ubl0_862",GD="_joinScreenTitle_1ubl0_870",KD="_refreshButton_1ubl0_875",QD="_noRoomsText_1ubl0_881",WD="_roomCard_1ubl0_887",$D="_categoryEmojiLarge_1ubl0_898",YD="_categoryNameLarge_1ubl0_903",XD="_lobbyTitle_1ubl0_910",ZD="_myPlayerCard_1ubl0_915",JD="_ready_1ubl0_932",e2="_notReady_1ubl0_936",t2="_eliminated_1ubl0_258",n2="_myPlayerEmoji_1ubl0_944",i2="_myPlayerInfo_1ubl0_949",s2="_myPlayerName_1ubl0_956",r2="_crownIcon_1ubl0_965",a2="_readyToggle_1ubl0_969",o2="_readyLabel_1ubl0_975",l2="_toggleSwitch_1ubl0_981",c2="_toggleThumb_1ubl0_1006",u2="_toggleCheck_1ubl0_1026",h2="_toggleCross_1ubl0_1032",d2="_gameQuestion_1ubl0_1103",f2="_gameCategory_1ubl0_1112",m2="_voteSubmitted_1ubl0_1121",g2="_voteSubmittedTitle_1ubl0_1128",p2="_voteSubmittedText_1ubl0_1133",y2="_submitButtonMargin_1ubl0_1139",_2="_resultTitle_1ubl0_1144",b2="_resultThermoItem_1ubl0_1149",v2="_eliminatedTitle_1ubl0_1157",T2="_eliminatedInfoBox_1ubl0_1162",E2="_thermoItemAnswered_1ubl0_1180",S2="_thermoItemNotAnswered_1ubl0_1186",w2="_thermoTempMax_1ubl0_1203",A2="_rewardDecisionMade_1ubl0_1261",R2="_rewardDecisionTitle_1ubl0_1268",I2="_rewardDecisionText_1ubl0_1273",C2="_wrongAnswerContainer_1ubl0_1279",k2="_wrongAnswerIcon_1ubl0_1288",N2="_attackModalOverlay_1ubl0_1306",D2="_attackModalContent_1ubl0_1319",M2="_attackModalNoDamage_1ubl0_1347",x2="_attackModalDetails_1ubl0_1353",O2="_attackModalDetailsTitle_1ubl0_1365",L2="_attackModalDetailItem_1ubl0_1369",V2="_attackModalBar_1ubl0_1374",j2="_attackModalTemp_1ubl0_1384",P2="_attackModalTempDamage_1ubl0_1390",z2="_attackModalTempNoDamage_1ubl0_1394",B2="_attackModalButton_1ubl0_1398",U2="_eliminationModalOverlay_1ubl0_1412",q2="_eliminationModalContent_1ubl0_1425",H2="_eliminationModalLogoContainer_1ubl0_1437",F2="_eliminationModalLogo_1ubl0_1437",G2="_eliminationModalTitle_1ubl0_1451",K2="_eliminationModalText_1ubl0_1457",Q2="_eliminationModalButton_1ubl0_1463",W2="_rulesModalOverlay_1ubl0_1477",$2="_rulesModalContent_1ubl0_1490",Y2="_rulesModalSectionTitle_1ubl0_1518",X2="_rulesModalButton_1ubl0_1531",Z2="_rulesModalHeader_1ubl0_1548",J2="_rulesModalHeaderIcon_1ubl0_1557",eM="_rulesModalBody_1ubl0_1561",tM="_rulesModalSectionBox_1ubl0_1567",nM="_rulesModalSectionHeader_1ubl0_1574",iM="_rulesModalSectionIcon_1ubl0_1581",sM="_rulesModalSectionText_1ubl0_1590",rM="_attackModalContentDamage_1ubl0_1596",aM="_attackModalContentNoDamage_1ubl0_1601",oM="_attackModalIcon_1ubl0_1606",lM="_attackModalName_1ubl0_1611",cM="_attackModalNameDamage_1ubl0_1617",uM="_attackModalNameNoDamage_1ubl0_1622",hM="_attackModalMessage_1ubl0_1627",dM="_attackModalBarFill_1ubl0_1633",fM="_attackModalBarFillDamage_1ubl0_1639",mM="_attackModalBarFillNoDamage_1ubl0_1644",gM="_hotseatWaitContainer_1ubl0_1657",pM="_hotseatWaitBox_1ubl0_1663",yM="_hotseatWaitTitle_1ubl0_1671",_M="_hotseatWaitSubtitle_1ubl0_1678",bM="_guessOverviewContainer_1ubl0_1685",vM="_guessOverviewSection_1ubl0_1691",TM="_guessOverviewTitle_1ubl0_1698",EM="_guessOverviewList_1ubl0_1704",SM="_guessOverviewItem_1ubl0_1710",wM="_playerReadyList_1ubl0_1721",AM="_playerReadyText_1ubl0_1725",RM="_fullWidthButton_1ubl0_1733",k={menuModal:NN,menuHeader:DN,menuTitle:MN,menuCloseButton:xN,menuButton:ON,menuBackButton:LN,menuSection:VN,menuSectionTitle:jN,menuLogContainer:PN,menuLogEntry:zN,menuLogEmpty:BN,landingContainer:UN,landingLogoContainer:qN,landingLogo:HN,landingButton:FN,backToProjectsButton:GN,logoContainer:KN,logoHorizontal:QN,emojiGalleryWrapper:WN,emojiGallery:$N,emojiSpacer:YN,eliminatedText:XN,eliminatedSubtext:ZN,thermoTop:JN,thermoTopLeft:eD,thermoTemp:tD,thermoBar:nD,thermoFill:iD,attackSelectionGrid:sD,volumeTitle:rD,volumeIcon:aD,waitText:oD,buttonMarginTop:lD,helpButtonLeft:cD,spacer:uD,settingsButton:hD,settingsButtonGray:dD,settingsButtonRed:fD,settingsButtonDarkRed:mD,settingsButtonDanger:gD,settingsButtonMusic:pD,settingsButtonMusicEnabled:yD,settingsButtonMusicDisabled:_D,volumeSliderContainer:bD,volumeSliderWrapper:vD,volumeSliderInput:TD,correctGuessContainer:ED,correctGuessTitle:SD,correctGuessSubtitle:wD,attackSelectionWrapper:AD,attackSelectionHeader:RD,attackSelectionHeaderIcon:ID,attackPlayerCardLarge:CD,attackPlayerEmojiLarge:kD,attackPlayerNameLarge:ND,attackPlayerDmgLarge:DD,attackNoPlayersLarge:MD,hotseatModalOverlay:xD,hotseatModalContent:OD,hotseatModalIcon:LD,hotseatModalTitle:VD,hotseatModalText:jD,hotseatModalHeader:PD,hotseatModalEmoji:zD,hotseatModalButton:BD,labelWithMargin:UD,grid2Cols:qD,grid3Cols:HD,backButton:FD,joinScreenTitle:GD,refreshButton:KD,noRoomsText:QD,roomCard:WD,categoryEmojiLarge:$D,categoryNameLarge:YD,lobbyTitle:XD,myPlayerCard:ZD,ready:JD,notReady:e2,eliminated:t2,myPlayerEmoji:n2,myPlayerInfo:i2,myPlayerName:s2,crownIcon:r2,readyToggle:a2,readyLabel:o2,toggleSwitch:l2,toggleThumb:c2,toggleCheck:u2,toggleCross:h2,gameQuestion:d2,gameCategory:f2,voteSubmitted:m2,voteSubmittedTitle:g2,voteSubmittedText:p2,submitButtonMargin:y2,resultTitle:_2,resultThermoItem:b2,eliminatedTitle:v2,eliminatedInfoBox:T2,thermoItemAnswered:E2,thermoItemNotAnswered:S2,thermoTempMax:w2,rewardDecisionMade:A2,rewardDecisionTitle:R2,rewardDecisionText:I2,wrongAnswerContainer:C2,wrongAnswerIcon:k2,attackModalOverlay:N2,attackModalContent:D2,attackModalNoDamage:M2,attackModalDetails:x2,attackModalDetailsTitle:O2,attackModalDetailItem:L2,attackModalBar:V2,attackModalTemp:j2,attackModalTempDamage:P2,attackModalTempNoDamage:z2,attackModalButton:B2,eliminationModalOverlay:U2,eliminationModalContent:q2,eliminationModalLogoContainer:H2,eliminationModalLogo:F2,eliminationModalTitle:G2,eliminationModalText:K2,eliminationModalButton:Q2,rulesModalOverlay:W2,rulesModalContent:$2,rulesModalSectionTitle:Y2,rulesModalButton:X2,rulesModalHeader:Z2,rulesModalHeaderIcon:J2,rulesModalBody:eM,rulesModalSectionBox:tM,rulesModalSectionHeader:nM,rulesModalSectionIcon:iM,rulesModalSectionText:sM,attackModalContentDamage:rM,attackModalContentNoDamage:aM,attackModalIcon:oM,attackModalName:lM,attackModalNameDamage:cM,attackModalNameNoDamage:uM,attackModalMessage:hM,attackModalBarFill:dM,attackModalBarFillDamage:fM,attackModalBarFillNoDamage:mM,hotseatWaitContainer:gM,hotseatWaitBox:pM,hotseatWaitTitle:yM,hotseatWaitSubtitle:_M,guessOverviewContainer:bM,guessOverviewSection:vM,guessOverviewTitle:TM,guessOverviewList:EM,guessOverviewItem:SM,playerReadyList:wM,playerReadyText:AM,fullWidthButton:RM},IM="/Hitzkopf/assets/hk_logo_vertical-B1yR7l9I.png",Ei={MAX_TEMP_DEFAULT:100,ATTACK_DMG_PARTY:20,PENALTY_DMG:10,CONNECTION_CHECK_INTERVAL:2e3,HOST_INACTIVE_THRESHOLD:5e3,CONNECTION_SLOW_THRESHOLD:5e3,CONNECTION_OFFLINE_THRESHOLD:1e4},le={log:()=>{},warn:()=>{},error:()=>{},debug:()=>{}},Zo=(r,e=Ei.MAX_TEMP_DEFAULT,n=[])=>Object.keys(r||{}).filter(s=>(r?.[s]?.temp||0)<e&&!n.includes(s)).sort(),CM=r=>typeof r=="string"?r:r?.name||String(r||""),kM=(r,e)=>{const n=Object.keys(r||{}),s=Object.keys(e||{});return n.length!==s.length?!1:n.every(l=>r[l]?.choice===e[l]?.choice)},NM=(r,e,n)=>{const s=e.attackDetails?.length||0,l=e.attackDetails?.some(u=>u.hasOil)||!1;return`${r}-${e.totalDmg}-${s}-${l}-${n}`},DM=(r="op")=>`${r}_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,MM={apiKey:"AIzaSyBQ7c9JkZ3zWlyIjZLl1O1sJJOrKfYJbmA",authDomain:"hitzkopf-f0ea6.firebaseapp.com",projectId:"hitzkopf-f0ea6",storageBucket:"hitzkopf-f0ea6.firebasestorage.app",messagingSenderId:"828164655874",appId:"1:828164655874:web:1cab759bdb03bfb736101b"},xM=["","","","","","","","","","","","","","",""],Dr=(()=>{const r=[...xM];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})();function OM({onBack:r}){const[e,n]=te.useState(null),[s,l]=te.useState(null),[u,f]=te.useState("landing"),[m,b]=te.useState(sessionStorage.getItem("hk_name")||""),y=Math.floor(Dr.length/2),E=Dr[y],[A,V]=te.useState(E),[O,me]=te.useState(sessionStorage.getItem("hk_room")||""),[ae,ge]=te.useState(!1),[I,xe]=te.useState(null);te.useMemo(()=>{if(!I?.players)return[];const M=I.config?.maxTemp||Ei.MAX_TEMP_DEFAULT;return Zo(I.players,M)},[I?.players,I?.config?.maxTemp]),te.useMemo(()=>I?.players?Object.keys(I.players).sort():[],[I?.players]),te.useMemo(()=>Object.keys(I?.players||{}).length,[I?.players]);const[Ve,mt]=te.useState("online"),vt=te.useRef(Date.now()),Qe=te.useRef(new Set),D=te.useRef([]),R=te.useRef(null),[N,z]=te.useState(!1),[L,U]=te.useState(!1),[C,Kt]=te.useState([]),[ln,J]=te.useState(""),[_e,De]=te.useState(""),[wt,At]=te.useState(""),[j,ie]=te.useState([]),[pe,ve]=te.useState(null),[Be,at]=te.useState([]),[Je,$t]=te.useState(0),[Xe,pn]=te.useState(null),[gs,cr]=te.useState(null),[ri,Mn]=te.useState(!1),[qr,Ii]=te.useState(null),[ur,hr]=te.useState(null),[cn,sn]=te.useState(!1),[Yi,za]=te.useState(null),[Ms,Sn]=te.useState(!1),[Xi,xs]=te.useState(!1),[Os,Ci]=te.useState(!1),[ki,Gs]=te.useState(!1),[Q,be]=te.useState(!1),[Oe,Se]=te.useState(!1),[nt,et]=te.useState(!1),[Gn,ps]=te.useState(null),[Cn,Zi]=te.useState(null),[Ks,rn]=te.useState(!1),[Ni,Kn]=te.useState("main"),[wn,Il]=te.useState(()=>{const M=localStorage.getItem("hk_music_enabled");return M!==null?M==="true":!0}),[Hr,ys]=te.useState(()=>{const M=localStorage.getItem("hk_music_volume");return M!==null?parseInt(M):10}),[Ls,Cl]=te.useState(()=>{const M=localStorage.getItem("hk_sound_volume");return M!==null?parseInt(M):10}),Di=te.useRef(null),Vt=te.useRef(new Map),Ji=te.useRef(Date.now()),Mi=te.useRef(null),Qn=te.useCallback(async(M,B=null,X=3,de=1e3)=>{const $=B||DM(),S=Date.now();Vt.current.set($,{startTime:S,attempts:0});for(let ne=1;ne<=X;ne++){Vt.current.get($).attempts=ne;try{await M();const Y=Date.now()-S;return Ji.current=Date.now(),Vt.current.delete($),le.log(` [RETRY] Operation erfolgreich (${$}):`,{totalAttempts:ne,totalDuration:Y+"ms",operationId:$}),!0}catch(Y){if(le.warn(` [RETRY] Versuch ${ne}/${X} fehlgeschlagen (${$}):`,{error:Y,code:Y?.code,message:Y?.message,stack:Y?.stack,serverResponse:Y?.serverResponse,operationId:$,attempt:ne,maxRetries:X,roomId:O,hasDb:!!s}),Y?.code==="permission-denied"&&O)try{const Ie=await Si(Fe(s,"lobbies",O));if(!Ie.exists())return le.warn(` [RETRY] Lobby existiert nicht mehr (${$})`),Vt.current.delete($),!1;const Re=Ie.data();if(Re?.status==="deleted")return le.warn(` [RETRY] Lobby wurde gelscht (${$})`),Vt.current.delete($),!1;le.log(" [RETRY] Lobby existiert noch:",{status:Re?.status,roundId:Re?.roundId,host:Re?.host})}catch{}if((Y?.code==="permission-denied"||Y?.code==="unavailable"||Y?.code==="deadline-exceeded"||Y?.code==="failed-precondition"||Y?.message?.includes("network")||Y?.message?.includes("blocked")||Y?.message?.includes("CORS")||Y?.message?.includes("Failed to fetch")||Y?.message?.includes("failed-precondition"))&&ne<X){const Ie=de*ne;le.log(` [RETRY] Warte ${Ie}ms vor nchstem Versuch (${$}):`,{attempt:ne,maxRetries:X,waitTime:Ie,errorCode:Y?.code,errorMessage:Y?.message}),await new Promise(Re=>setTimeout(Re,Ie))}else{if(ne===X)return le.error(` [RETRY] Alle Versuche fehlgeschlagen (${$}):`,{error:Y,code:Y?.code,message:Y?.message,stack:Y?.stack,serverResponse:Y?.serverResponse,operationId:$,totalAttempts:ne,roomId:O,timestamp:new Date().toISOString()}),Vt.current.delete($),!1;throw le.error(` [RETRY] Nicht-retrybarer Fehler (${$}):`,{error:Y,code:Y?.code,message:Y?.message,operationId:$,attempt:ne}),Vt.current.delete($),Y}}}return Vt.current.delete($),!1},[]),Fr=te.useCallback(async()=>{if(!(!s||!O||!I))try{const M=await Si(Fe(s,"lobbies",O));if(!M.exists()){le.log(" [RECOVERY] Lobby existiert nicht mehr");return}const B=M.data(),X=B.status,de=B.roundId;if(le.log(" [RECOVERY] Firebase-Daten geladen:",{status:X,roundId:de,localStatus:I.status,localRoundId:I.roundId}),xe(B),Ji.current=Date.now(),X==="result"&&ae&&B.host===m){const $=B.config?.maxTemp||100,S=B.eliminatedPlayers||[],ne=Object.keys(B.players||{}).filter(ke=>(B.players?.[ke]?.temp||0)<$&&!S.includes(ke)),Y=(B.ready||[]).filter(ke=>(B.players?.[ke]?.temp||0)<$).length,Ae=B.roundRecapShown??!1,Ie=B.attackResults&&Object.keys(B.attackResults).length>0,Re=B.popupConfirmed||{},Ee=!Ie||ne.every(ke=>B.attackResults?.[ke]?Re[ke]===!0:!0);if(Y>=ne.length&&ne.length>0&&Ae&&Ee&&!Vt.current.has("nextRound")){le.log(" [RECOVERY] Spiel hngt - alle bereit, aber keine nchste Runde. Starte Recovery...");try{const ke=`nextRound_recovery_${Date.now()}`;Vt.current.set(ke,{startTime:Date.now(),attempts:0});const ut=B.hotseat||"",je=typeof ut=="string"?ut:ut?.name||String(ut||"");let Pe=ne.indexOf(je);Pe===-1&&(Pe=0),Pe=(Pe+1)%ne.length;const Rt=ne[Pe],xt=B.usedQuestions||[],We=B.config?.categories||Object.keys(fi),ot=mc(We);let he=xt;xt.length>0&&typeof xt[0]=="number"&&(he=xt.map($e=>ot[$e]?.id).filter(Boolean));const dn=ot.filter($e=>$e.id&&!he.includes($e.id)),yt=dn[Math.floor(Math.random()*dn.length)]||ot[0],_t=(B.roundId??0)+1,ze={status:"game",hotseat:Rt,currentQ:yt,roundId:_t,lastQuestionCategory:yt.category,roundRecapShown:!1,votes:di(),ready:[],lobbyReady:{},pendingAttacks:{},attackDecisions:{},attackResults:{},popupConfirmed:{},countdownEnds:di()};yt.id&&!he.includes(yt.id)&&(ze.usedQuestions=[...he,yt.id]),await Qn(async()=>{await pt(Fe(s,"lobbies",O),ze)},ke,3,1e3)?(Vt.current.delete(ke),le.log(" [RECOVERY] Nchste Runde erfolgreich gestartet")):le.error(" [RECOVERY] Nchste Runde fehlgeschlagen")}catch(ke){le.error(" [RECOVERY] Fehler beim Starten der nchsten Runde:",ke)}}}if(X==="result"&&ae&&B.host===m){const $=Object.keys(B.attackDecisions||{}).length>=Object.keys(B.players||{}).length,S=B.roundRecapShown??!1,ne=B.votes?.[B.hotseat]?.choice!==void 0;if($&&!S&&ne&&!Vt.current.has("executeAttacks")){le.log(" [RECOVERY] executePendingAttacks fehlgeschlagen. Versuche erneut...");try{const Y=`executeAttacks_recovery_${B.roundId||Date.now()}`;Vt.current.set(Y,{startTime:Date.now(),attempts:0});const Ae={roundRecapShown:!0};await Qn(async()=>{await pt(Fe(s,"lobbies",O),Ae)},Y,3,1e3)?(Vt.current.delete(Y),le.log(" [RECOVERY] roundRecapShown gesetzt - Spiel sollte weitergehen")):le.error(" [RECOVERY] executePendingAttacks Recovery fehlgeschlagen")}catch(Y){le.error(" [RECOVERY] Fehler bei executePendingAttacks Recovery:",Y)}}}}catch{}},[s,O,I,ae,m]);te.useEffect(()=>{if(!s||!O||!I){Mi.current&&(clearInterval(Mi.current),Mi.current=null);return}return Mi.current=setInterval(()=>{const M=Date.now()-Ji.current,B=Vt.current.size>0;if(M>1e4&&B&&Si(Fe(s,"lobbies",O)).then(()=>{Fr()}).catch(X=>{}),I.status==="result"&&ae){const X=I.config?.maxTemp||100,de=I.eliminatedPlayers||[],$=Object.keys(I.players||{}).filter(Y=>(I.players?.[Y]?.temp||0)<X&&!de.includes(Y)),S=(I.ready||[]).filter(Y=>(I.players?.[Y]?.temp||0)<X).length,ne=I.roundRecapShown??!1;S>=$.length&&$.length>0&&ne&&M>15e3&&Fr()}},5e3),()=>{Mi.current&&(clearInterval(Mi.current),Mi.current=null)}},[s,O,I,ae,Fr]);const Wn=te.useCallback((M,B=.5)=>{CN(M,B*Ls/10)},[Ls]);te.useEffect(()=>{if(!Di.current){const B=kN();B&&(B.loop=!0,Di.current=B)}const M=Di.current;M&&(M.volume=Hr/10,wn?M.play().catch(B=>{}):M.pause())},[wn,Hr]),te.useEffect(()=>{const M=()=>{wn&&Di.current&&Di.current.play().catch(()=>{})};if(wn){const B=["click","touchstart","keydown"];return B.forEach(X=>{document.addEventListener(X,M,{once:!0})}),()=>{B.forEach(X=>{document.removeEventListener(X,M)})}}},[wn]);const es=te.useCallback(()=>{const M=!wn;Il(M),localStorage.setItem("hk_music_enabled",String(M))},[wn]),An=te.useCallback(M=>{ys(M),localStorage.setItem("hk_music_volume",String(M)),Di.current&&(Di.current.volume=M/10)},[]),xn=te.useCallback(M=>{Cl(M),localStorage.setItem("hk_sound_volume",String(M))},[]);te.useEffect(()=>{const M=Jm(MM),B=dE(M),X=GT(M);n(M),l(B),oR(X,de=>{de?le.log(" [AUTH] Anonyme Authentifizierung erfolgreich:",de.uid):xT(X).then($=>{le.log(" [AUTH] Automatische anonyme Anmeldung erfolgreich:",$.user.uid)}).catch($=>{})})},[]),te.useEffect(()=>{if(!s||!O)return;D.current=[];const M=IE(Fe(s,"lobbies",O),$=>{if(!O)return;if(mt("online"),Ji.current=Date.now(),!$.exists()){sessionStorage.removeItem("hk_room"),me(""),xe(null),f("start"),R.current=null;return}const S=$.data();if(S.status==="deleted"){sessionStorage.removeItem("hk_room"),me(""),xe(null),f("start"),R.current=null,alert("Die Lobby wurde vom Host gelscht.");return}if(!O)return;const ne=S.roundId??0,Y=R.current;if(Y!=null&&ne<Y){(S.status!==I?.status||ne!==I?.roundId)&&le.warn(" [FIREBASE] Update mit niedrigerer roundId ignoriert:",{lastRoundId:Y,currentRoundId:ne,status:S.status,oldStatus:I?.status});return}ne>(Y||0)&&(R.current=ne),$.metadata.hasPendingWrites===!1&&S?.host===m&&(vt.current=Date.now());const Ae=I?.status,Ie=S.status,Re=I?.roundId,Ee=S.roundId,ke=I?.hotseat,ut=S.hotseat,je=Ae!==Ie,Pe=Re!==Ee,Rt=ke!==ut,xt=I?.votes||{},We=S.votes||{},ot=Object.keys(xt),he=Object.keys(We);(ot.length!==he.length||ot.some(ze=>xt[ze]?.choice!==We[ze]?.choice))&&le.log(" [VOTES] Votes gendert:",{roundId:S.roundId,oldVotes:ot,newVotes:he});const yt=S.host===m;if(ge(yt),Re!==Ee){if(Re!=null&&Ee<Re){le.error(" [ROUND] KRITISCH: roundId geht zurck!",{oldRoundId:Re,newRoundId:Ee,status:S.status,roomId:O});return}Xe&&pn(null)}let _t=!1;if(!I)_t=!0;else{_t=["status","roundId","hotseat","roundRecapShown"].some(lt=>I[lt]!==S[lt]);const it=I.lobbyReady||{},$e=S.lobbyReady||{},Yt=Object.keys(it),jt=Object.keys($e);if(Yt.length!==jt.length)le.log(" [LOBBY READY] Anzahl Keys gendert:",{oldCount:Yt.length,newCount:jt.length,oldKeys:Yt,newKeys:jt}),_t=!0;else{const lt=new Set([...Yt,...jt]);let qt=!1;for(const Qt of lt){const Tt=it[Qt],fe=$e[Qt];Tt===!0!==(fe===!0)&&(qt=!0)}qt&&(_t=!0)}if(!_t){const lt=I.votes||{},qt=S.votes||{},Qt=Object.keys(lt),Tt=Object.keys(qt);(Qt.length!==Tt.length||Qt.some(fe=>lt[fe]?.choice!==qt[fe]?.choice))&&(_t=!0)}if(!_t){const lt=I.players||{},qt=S.players||{},Qt=Object.keys(lt),Tt=Object.keys(qt);(Qt.length!==Tt.length||Qt.some(fe=>{const qe=lt[fe],Ue=qt[fe];return qe?.temp!==Ue?.temp||qe?.emoji!==Ue?.emoji}))&&(_t=!0)}if(!_t){const lt=I.ready||[],qt=S.ready||[];(lt.length!==qt.length||lt.some((Qt,Tt)=>Qt!==qt[Tt]))&&(_t=!0)}}if(_t||!I){const ze={...S};S.lobbyReady&&(ze.lobbyReady={...S.lobbyReady}),xe(ze),(je||Pe||Rt)&&le.log(" [GLOBAL DATA] globalData aktualisiert:",{statusChanged:je,roundIdChanged:Pe,hotseatChanged:Rt,status:ze.status,roundId:ze.roundId,hotseat:ze.hotseat,playerCount:Object.keys(ze.players||{}).length,voteCount:Object.keys(ze.votes||{}).length,readyCount:Array.isArray(ze.ready)?ze.ready.length:0})}if(S.status==="lobby")u!=="lobby"&&f("lobby");else if(S.status==="game"){u!=="game"?(le.log(" [SCREEN] Wechsel zu Game:",{from:u,to:"game",roundId:S.roundId,hotseat:S.hotseat,timestamp:new Date().toISOString(),hasPendingWrites:$.metadata.hasPendingWrites,fromCache:$.metadata.fromCache}),f("game")):le.log(" [SCREEN] Bereits auf Game-Screen, berspringe Wechsel:",{roundId:S.roundId,hotseat:S.hotseat});const ze=I&&I.status===S.status&&I.roundId===S.roundId&&I.hotseat===S.hotseat&&kM({...I,votes:{}},{...S,votes:{}})&&I.votes?.[m]?.choice===S.votes?.[m]?.choice;Y===null&&S.roundId!==void 0&&(le.log(" [GAME SCREEN] Initialisiere lastRoundId beim ersten Mal:",S.roundId),Ii(S.roundId));const it=Y??I?.roundId,$e=it!=null&&S.roundId!==it;if($e){le.log(" [GAME SCREEN] Neue Runde erkannt - RESET Selection:",{oldRoundId:it,newRoundId:S.roundId,oldSelection:Xe,lastRoundId:Y,globalDataRoundId:I?.roundId}),pn(null),Ii(S.roundId),Mn(!1),Sn(!1),xs(!1),Ci(!1);return}const Yt=!I&&Y===S.roundId&&!$e,jt=S.votes?.[m]?.choice!==void 0,lt=S.votes?.[m]?.roundId,qt=lt!==void 0&&lt===S.roundId,Qt=jt&&qt&&!Xe&&!$e;if(ze||Yt)Qt?(le.log(" [GAME SCREEN] Restore Selection aus Vote:",{oldSelection:Xe,newSelection:S.votes[m].choice,voteRoundId:lt,currentRoundId:S.roundId,isNewRound:$e}),pn(S.votes[m].choice)):jt&&!qt&&Xe?(le.warn(" [GAME SCREEN] Vote aus alter Runde - RESET Selection:",{oldSelection:Xe,voteRoundId:lt,currentRoundId:S.roundId}),pn(null)):$e&&Xe&&(le.warn(" [GAME SCREEN] Neue Runde erkannt, aber Selection noch gesetzt - RESET:",{oldSelection:Xe,currentRoundId:S.roundId,oldRoundId:it}),pn(null));else if(le.log(" [GAME SCREEN] Game-Screen Update:",{roundId:S.roundId,oldRoundId:I?.roundId,hotseat:S.hotseat,myVote:S.votes?.[m],allVotes:Object.keys(S.votes||{}),mySelection:Xe,localActionDone:ri}),!$e&&(!I&&S.roundId!==Y&&(le.log(" [GAME SCREEN] Initialisiere lastRoundId:",S.roundId),Ii(S.roundId)),Y===S.roundId&&S.votes?.[m])){const fe=S.votes[m]?.roundId;fe!==void 0&&fe===S.roundId?Xe?Xe!==S.votes[m].choice&&(le.log(" [GAME SCREEN] Synchronisiere Selection mit Vote (gleiche Runde):",{oldSelection:Xe,newSelection:S.votes[m].choice,voteRoundId:fe,currentRoundId:S.roundId,reason:"Selection stimmt nicht mit Vote berein"}),pn(S.votes[m].choice)):(le.log(" [GAME SCREEN] Restore Selection aus Vote (gleiche Runde):",{oldSelection:Xe,newSelection:S.votes[m].choice,voteRoundId:fe,currentRoundId:S.roundId,reason:"Selection fehlt, Vote existiert"}),pn(S.votes[m].choice)):Xe&&(le.warn(" [GAME SCREEN] Vote aus alter Runde - RESET Selection:",{mySelection:Xe,voteRoundId:fe,currentRoundId:S.roundId}),pn(null))}const Tt=S.roundId||0;if(S.hotseat&&S.players&&Tt!==an.current&&!ki){an.current=Tt;const fe=m===S.hotseat;le.log(" [HOTSEAT MODAL] Neue Runde erkannt:",{roundId:Tt,hotseat:S.hotseat,isMeHotseat:fe,myName:m,players:Object.keys(S.players||{}),showHotseatModal:ki}),setTimeout(()=>{ki||Ha(S.hotseat,S.players)},100)}else S.hotseat&&Tt===an.current?le.log(" [HOTSEAT MODAL] Bereits fr diese Runde angezeigt, berspringe:",{roundId:Tt,hotseatModalShownRef:an.current,showHotseatModal:ki}):ki&&Tt!==an.current&&(Gs(!1),an.current=null)}else if(S.status==="result"){u!=="result"&&(le.log(" [SCREEN] Wechsel zu Result:",{from:u,to:"result",roundId:S.roundId}),f("result"));const ze=!0,it=m===S.hotseat,$e=S.votes?.[m],Yt=typeof S.hotseat=="string"?S.hotseat:S.hotseat?.name||String(S.hotseat||""),jt=S.votes?.[Yt],lt=jt?.roundId,qt=S.roundId,Tt=lt!==void 0&&lt===qt?jt?.choice:void 0,fe=Tt!=null,qe=fe&&$e&&String($e.choice)===String(Tt),Ue=fe&&$e&&String($e.choice)!==String(Tt),Ne=S.attackDecisions||{},ht=S.roundRecapShown??!1;if(le.log(" [RESULT] Result-Screen Analyse:",{roundId:S.roundId,isHotseat:it,isPartyMode:ze,myVote:$e?.choice,hotseat:S.hotseat,hotseatVote:jt,truth:Tt,hasTruth:fe,guessedCorrectly:qe,guessedWrong:Ue,attackDecisions:Ne,myAttackDecision:Ne[m],roundRecapShown:ht,allVotes:Object.keys(S.votes||{}),localActionDone:ri,showRewardChoice:Ms,showAttackSelection:Xi,showJokerShop:Os,pendingAttacks:S.pendingAttacks||{},attackResults:S.attackResults?Object.keys(S.attackResults):[]}),!fe&&!it)le.warn(" [RESULT] Hotseat hat noch keine Antwort abgegeben, warte...",{hotseat:S.hotseat,hotseatVote:jt,allVotes:Object.keys(S.votes||{}),votes:S.votes});else if(it&&!Ne[m]&&s&&O)Mn(!0),pt(Fe(s,"lobbies",O),{[`attackDecisions.${m}`]:!0}).catch(le.error);else if(!(!it&&Ue&&!Ne[m]&&!ze)){if(!it&&Ue&&!Ne[m]&&ze&&s&&O){const He=`${S.roundId}-${m}`;Ts.current!==He&&(Ts.current=He,Es().catch(le.error),Mn(!0))}}const hn=Y!==S.roundId;hn&&(Sn(!1),xs(!1),Ci(!1),Ts.current=null),!it&&qe&&!Ne[m]&&!Ms&&!Xi&&!Os&&(le.log(" [ATTACK] Zeige Angriffsauswahl",{roundId:S.roundId,lastRoundId:Y,isNewRound:hn,attackDecisions:Ne[m],isPartyMode:ze}),Sn(!0));const It=S.popupConfirmed?.[m]===!0,dt=S.config?.maxTemp||100,$n=S.eliminatedPlayers||[],Yn=Object.keys(S.players||{}).filter(He=>(S.players?.[He]?.temp||0)<dt&&!$n.includes(He)),ei=Yn.length,ti=Object.keys(Ne).filter(He=>Ne[He]===!0),_n=S.hotseat&&S.votes?.[S.hotseat]?.choice!==void 0,Li=ti.length+(_n&&!Ne[S.hotseat]?1:0);if(S.attackResults&&S.attackResults[m]!==void 0&&ht&&!It){const He=S.attackResults[m],Bt=NM(S.roundId,He,ht);le.log(" [ATTACK MODAL] Attack-Result gefunden:",{roundId:S.roundId,result:He,resultKey:Bt,lastAttackResultKey:ur,attackModalShownRef:un.current,isOpeningAttackModal:cn,showAttackModal:Q,roundRecapShown:ht,popupConfirmed:It,totalDmg:He.totalDmg,attackDetails:He.attackDetails});const Ln=Bt!==un.current&&!cn&&!Q&&!It;if(Ln){le.log(" [ATTACK MODAL] Modal wird angezeigt fr Runde:",S.roundId,"| Schaden:",He.totalDmg,"C"),un.current=Bt,hr(Bt),sn(!0),Zi(He);const bi=setTimeout(()=>{!Q&&un.current===Bt&&!It?(be(!0),sn(!1)):(le.log(" [ATTACK MODAL] Modal wird bereits angezeigt, Ref gendert oder Popup besttigt, berspringe setShowAttackModal:",{showAttackModal:Q,refMatches:un.current===Bt,popupConfirmed:It}),sn(!1))},300);D.current.push(bi)}else le.log(" [ATTACK MODAL] Modal wird NICHT angezeigt:",{resultKeyMatches:Bt===un.current,isOpening:cn,alreadyShown:Q,popupConfirmed:It,resultKey:Bt,attackModalShownRef:un.current,shouldShow:Ln})}if(S.eliminationInfo&&S.eliminationInfo.player&&!nt){const He=S.eliminationInfo.player,Bt=S.config?.maxTemp||100,Ln=S.players?.[He]?.temp||0,bi=`${S.roundId}-${He}`;Ln>=Bt&&Yi!==bi&&(ps(He),et(!0),za(bi))}else le.log(" [ATTACK MODAL] Kein Modal:",{hasAttackResults:!!S.attackResults,hasMyResult:S.attackResults?.[m]!==void 0,roundRecapShown:ht,popupConfirmed:It,roundId:S.roundId});const qi=Li>=ei,Ss=!ht,Ys=S.votes||{},Vi=Yn.filter(He=>{const Bt=Ys[He];if(!Bt||Bt.choice===void 0)return!1;const Ln=Bt.roundId;return Ln!==void 0&&Ln===S.roundId}).length,Ot=Vi>=ei&&ei>0;le.log(" [EXECUTE ATTACKS] Prfung:",{roundId:S.roundId,playerCount:ei,playersWithDecision:ti.length,effectiveDecidedCount:Li,allDecided:qi,allVoted:Ot,voteCount:Vi,totalVotesInFirebase:Object.keys(Ys).length,recapNotShown:Ss,hasTruth:fe,hotseat:S.hotseat,hotseatVote:jt,isHost:ae,isMeHost:S.host===m,attackDecisions:Ne,hotseatShouldBeDecided:_n,hotseatInDecisions:Ne[S.hotseat]});const ji=S.lastHostActivity,oi=ji&&ji.toMillis?Date.now()-ji.toMillis()>Ei.HOST_INACTIVE_THRESHOLD:!0,On=S.host,c=!oi&&On===m,g=S.eliminatedPlayers||[],v=Object.keys(S.players||{}).filter(He=>(S.players?.[He]?.temp||0)<(S.config?.maxTemp||100)&&!g.includes(He)).sort(),H=v.indexOf(m)===0&&v.length>0&&v[0]!==On,W=qi||Ot,ye=Ss,Le=fe,Ht=c||oi&&H,bt=W&&ye&&Le&&Ht;if(!bt&&(qi||Ot)&&le.log(" [EXECUTE ATTACKS] Prfung fehlgeschlagen - Details:",{roundId:S.roundId,condition1_allDecidedOrVoted:W,allDecided:qi,allVoted:Ot,condition2_recapNotShown:ye,roundRecapShown:S.roundRecapShown,condition3_hasTruth:Le,hotseatVote:S.votes?.[S.hotseat],condition4_hostActive:Ht,isHostActive:c,hostInactive:oi,isFirstBackupHost:H,myName:m,host:S.host}),bt){const He=`executeAttacks_${S.roundId}`;if(!Qe.current.has(He)){Qe.current.add(He);const Bt=setTimeout(()=>{gr(S).catch(Ln=>{}),Qe.current.delete(He)},500);D.current.push(Bt)}}else if(!(qi&&Ss&&!fe&&ae&&S.host===m)){if(qi&&Ss&&fe&&!bt&&(le.warn(" [EXECUTE ATTACKS] FALLBACK: Alle Bedingungen erfllt, aber canExecuteAttacks ist false. Versuche trotzdem...",{condition1:W,condition2:ye,condition3:Le,condition4:Ht,isHost:ae,myName:m,host:S.host}),H||v[0]===m)){const He=`executeAttacks_fallback_${S.roundId}`;if(!Qe.current.has(He)){Qe.current.add(He);const Bt=setTimeout(()=>{gr(S).catch(Ln=>{}),Qe.current.delete(He)},1e3);D.current.push(Bt)}}}}else S.status==="winner"&&u!=="winner"&&f("winner");if(S.status==="game"){const ze=S.lastHostActivity,it=ze&&ze.toMillis?Date.now()-ze.toMillis()>Ei.HOST_INACTIVE_THRESHOLD:!1,$e=S.host,Yt=S.config?.maxTemp||Ei.MAX_TEMP_DEFAULT,jt=S.eliminatedPlayers||[],lt=Zo(S.players,Yt,jt),Qt=lt.indexOf(m)===0&&lt.length>0&&lt[0]!==$e,Tt=!it&&$e===m,fe=Zo(S.players,Yt,jt),qe=fe.length,Ue=fe.filter(Yn=>{const ei=S.votes?.[Yn];if(!ei||ei.choice===void 0)return!1;const ti=ei?.roundId;return ti!==void 0&&ti===S.roundId}).length,Ne=CM(S.hotseat),ht=Ne?S.votes?.[Ne]:null,hn=ht?.roundId;!(Ne&&fe.includes(Ne)&&ht?.choice!==void 0&&hn!==void 0&&hn===S.roundId)&&Ne&&le.warn(" [AUTO-ADVANCE] Hotseat hat noch nicht (gltig) abgestimmt:",{hotseat:Ne,hasVote:!!ht,choice:ht?.choice,voteRoundId:hn,currentRoundId:S.roundId,isActive:fe.includes(Ne)});const dt=Ue>=qe&&qe>0;if(S.votes&&(dt||Tt||it&&Qt||$e===m&&!ze)){const Yn=S.config?.maxTemp||Ei.MAX_TEMP_DEFAULT;if(Zo(S.players,Yn).length,dt){const _n=`autoAdvance_${S.roundId}`;if(!Qe.current.has(_n)){Qe.current.add(_n);const Li=setTimeout(async()=>{try{await Qn(()=>pt(Fe(s,"lobbies",O),{status:"result",lastHostActivity:zi()}),`autoAdvance_${S.roundId}`,5,1e3)}catch{mt("slow"),Qe.current.delete(_n)}},500);D.current.push(Li)}}}}if(S.status==="result"){let ze=S.roundRecapShown??!1;const it=S.lastHostActivity,$e=it&&it.toMillis?Date.now()-it.toMillis()>Ei.HOST_INACTIVE_THRESHOLD:!0,Yt=S.host,jt=S.config?.maxTemp||Ei.MAX_TEMP_DEFAULT,lt=Zo(S.players,jt),Qt=lt.indexOf(m)===0&&lt.length>0&&lt[0]!==Yt,Tt=!$e&&Yt===m,fe=S.config?.maxTemp||100,qe=S.eliminatedPlayers||[],Ue=Object.keys(S.players||{}).filter(Ot=>(S.players?.[Ot]?.temp||0)<fe&&!qe.includes(Ot)),Ne=Ue.length,ht=Ue.filter(Ot=>{const ji=S.votes?.[Ot];if(!ji||ji.choice===void 0)return!1;const oi=ji.roundId;return oi!==void 0&&oi===S.roundId}).length,hn=S.ready||[],It=Ue.filter(Ot=>hn.includes(Ot)).length,dt=It>=Ne&&Ne>0,$n=ht>=Ne&&Ne>0,Yn=S.popupConfirmed||{},ti=!(S.attackResults&&Object.keys(S.attackResults).length>0)||Ue.every(Ot=>S.attackResults?.[Ot]?Yn[Ot]===!0:!0),_n=S.attackDecisions||{},Li=Object.keys(_n).filter(Ot=>_n[Ot]===!0),qi=S.hotseat&&S.votes?.[S.hotseat]?.choice!==void 0,Ss=Li.length+(qi&&!_n[S.hotseat]?1:0),Ys=Ss>=Ne&&Ne>0;S.status==="result"&&!ze&&dt&&($n||Ys)&&ti&&(Tt||$e&&Qt)&&s&&O&&(le.log(" [AUTO-NEXT] FALLBACK: Setze roundRecapShown auf true, weil alle bereit sind:",{roundId:S.roundId,allReady:dt,allVoted:$n,allDecided:Ys,allPopupConfirmed:ti,readyCount:It,playerCount:Ne,effectiveDecidedCount:Ss}),pt(Fe(s,"lobbies",O),{roundRecapShown:!0}).catch(Ot=>{}),ze=!0);const Vi=S.status==="result"&&ze&&(Tt||$e&&Qt||dt&&$n&&ti&&lt.includes(m));if(!Vi&&S.status==="result"&&le.log(" [AUTO-NEXT] canAutoNext ist false - Details:",{roundId:S.roundId,status:S.status,roundRecapShown:S.roundRecapShown,roundRecapShownForNext:ze,allReadyCheck:dt,allVotedCheck:$n,allPopupConfirmedCheck:ti,isHostActiveNext:Tt,hostInactiveNext:$e,isFirstBackupHostNext:Qt,myName:m,host:S.host}),Vi){const Ot=S.config?.maxTemp||100,ji=S.eliminatedPlayers||[],oi=Object.keys(S.players||{}).filter(Le=>(S.players?.[Le]?.temp||0)<Ot&&!ji.includes(Le)),On=oi.length,c=oi.filter(Le=>{const Ht=S.votes?.[Le];if(!Ht||Ht.choice===void 0)return!1;const bt=Ht.roundId;return bt!==void 0&&bt===S.roundId}).length,g=S.popupConfirmed||{};!(S.attackResults&&Object.keys(S.attackResults).length>0)||oi.every(Le=>S.attackResults?.[Le]?g[Le]===!0:!0);const w=S.ready||[],H=oi.filter(Le=>w.includes(Le)).length,W=H>=On&&On>0,ye=c>=On&&On>0&&W;if(!ye&&Vi&&le.log(" [AUTO-NEXT] shouldNext ist false - Details:",{roundId:S.roundId,voteCount:c,playerCount:On,readyCount:H,allReady:W,hasEnoughVotes:c>=On,hasEnoughPlayers:On>0,readyList:w,activePlayers:oi}),ye){const Le=`autoNext_${S.roundId}`;if(!Qe.current.has(Le)){Qe.current.add(Le);const Ht=setTimeout(async()=>{try{await Qn(()=>ai(),`autoNext_${S.roundId}`,5,2e3)}catch{mt("slow")}Qe.current.delete(Le)},1e3);D.current.push(Ht)}}}}},{includeMetadataChanges:!0}),B=setInterval(()=>{const $=Date.now()-Ji.current;$>Ei.CONNECTION_OFFLINE_THRESHOLD?mt("offline"):$>Ei.CONNECTION_SLOW_THRESHOLD?mt("slow"):mt("online")},Ei.CONNECTION_CHECK_INTERVAL),X=setInterval(async()=>{if(!(!s||!O||!m))try{const $=await Si(Fe(s,"lobbies",O));if(!$.exists()){le.debug(" [PRESENCE] Lobby existiert nicht mehr, stoppe Heartbeat");return}if($.data()?.status==="deleted"){le.debug(" [PRESENCE] Lobby wurde gelscht, stoppe Heartbeat");return}await pt(Fe(s,"lobbies",O),{[`players.${m}.lastSeen`]:zi()})}catch($){if($?.code==="permission-denied"||$?.code==="not-found")return}},5e3),de=setInterval(async()=>{if(!(!ae||!s||!O||!I?.players))try{const $=Date.now(),S=15e3,ne=[];for(const[Y,Ae]of Object.entries(I.players)){const Ie=Ae?.lastSeen;if(Ie&&Ie.toMillis){const Re=$-Ie.toMillis();Re>S&&(ne.push(Y),le.warn(` [PRESENCE] Spieler ${Y} ist inaktiv (${Math.round(Re/1e3)}s)`))}}ne.length>0&&le.warn(" [PRESENCE] Inaktive Spieler erkannt:",ne)}catch{}},1e4);return()=>{M(),clearInterval(B),clearInterval(X),clearInterval(de),D.current.forEach($=>clearTimeout($)),D.current=[],Qe.current.clear()}},[s,O,m,ae]);const yi=te.useRef(null),[_s,dr]=te.useState(Math.floor(Dr.length/2)),Vs=te.useRef(!1),ts=te.useRef({x:0,y:0,time:0});te.useEffect(()=>{const M=Math.floor(Dr.length/2),B=Dr[M];if(u==="start")(A!==B||_s!==M)&&(V(B),dr(M),sessionStorage.setItem("hk_emoji",B));else if(!A||!Dr.includes(A))V(B),dr(M),sessionStorage.setItem("hk_emoji",B);else{const X=Dr.indexOf(A);X>=0?dr(X):(dr(M),V(B))}},[u]),te.useEffect(()=>{if(yi.current&&_s>=0&&u==="start"){const M=yi.current,X=M.querySelectorAll(".emoji-card")[_s];X&&(Vs.current=!0,setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{const de=M.clientWidth,$=X.offsetWidth||80,ne=X.offsetLeft-de/2+$/2,Y=Math.max(0,Math.min(ne,M.scrollWidth-M.clientWidth));M.scrollLeft=Y,setTimeout(()=>{Math.abs(M.scrollLeft-Y)>10&&(M.scrollLeft=Y),setTimeout(()=>{Vs.current=!1},100)},50)})})},150))}},[_s,u]);const ns=M=>{const B=Dr.indexOf(M);B>=0&&(dr(B),V(M),sessionStorage.setItem("hk_emoji",M),yi.current&&yi.current.querySelectorAll(".emoji-card").forEach((de,$)=>{$===B?de.classList.add("selected"):de.classList.remove("selected")}))},Gr=te.useCallback(M=>{const B=M.target.value.trim().substring(0,20);b(B),sessionStorage.setItem("hk_name",B)},[]),xi=te.useCallback(M=>{Kt(M==="all"?B=>B.length===Object.keys(fi).length?[]:Object.keys(fi):B=>B.includes(M)?B.filter(X=>X!==M):[...B,M])},[]);te.useCallback(M=>{const B=[...M];for(let X=B.length-1;X>0;X--){const de=Math.floor(Math.random()*(X+1));[B[X],B[de]]=[B[de],B[X]]}return B},[]);const Ui=te.useCallback(()=>{if(Be.length===0)return;const M=Je+1;M>=Be.length?($t(0),ve(Be[0])):($t(M),ve(Be[M]))},[Be,Je]),Oi=te.useCallback(()=>{if(Je===0)return;const M=Je-1;$t(M),ve(Be[M])},[Be,Je]),bs=async()=>{if(!m.trim()){alert("Bitte gib deinen Namen ein!");return}if(C.length===0){alert("Bitte whle mindestens eine Kategorie aus!");return}if(!s){alert("Fehler: Firebase ist noch nicht initialisiert. Bitte warte einen Moment und versuche es erneut.");return}const M=Ei.ATTACK_DMG_PARTY,B=1.5,X=Ei.MAX_TEMP_DEFAULT,de=Math.random().toString(36).substring(2,6).toUpperCase();try{const S=mc(C)[0]||{q:"Willkommen zu Hitzkopf!",a:"A",b:"B"},ne=S.category||null;le.log(" [CREATE GAME] Versuche Lobby zu erstellen:",{code:de,host:m,categories:C.length});const Y={host:m,hostName:m,status:"lobby",createdAt:zi(),players:{[m]:{temp:0,inventory:[],emoji:A,lastSeen:zi()}},config:{dmg:M,speed:B,startTemp:0,maxTemp:X,categories:C},votes:{},ready:[],log:[],hotseat:"",currentQ:S,roundId:0,lobbyReady:{}};ne&&(Y.lastQuestionCategory=ne),await RE(Fe(s,"lobbies",de),Y),me(de),sessionStorage.setItem("hk_room",de),ge(!0),f("lobby"),R.current=null,le.log(" [CREATE GAME] Lobby erfolgreich erstellt:",de)}catch($){le.error(" [CREATE GAME] Fehler beim Erstellen der Lobby:",{error:$,code:$.code,message:$.message,stack:$.stack}),me(""),sessionStorage.removeItem("hk_room"),ge(!1),$.code==="permission-denied"?alert("Fehler: Keine Berechtigung zum Erstellen einer Lobby. Bitte berprfe deine Firebase-Berechtigungen."):$.code==="unavailable"?alert("Fehler: Firebase ist nicht verfgbar. Bitte berprfe deine Internetverbindung."):alert(`Fehler beim Erstellen des Spiels: ${$.message||"Unbekannter Fehler"}`)}},vn=async(M=null)=>{if(!m.trim()){alert("Bitte gib deinen Namen ein!");return}const B=(M||_e).toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,6);if(!B||B.length<4){alert("Bitte whle einen Raum aus der Liste!");return}const X=Fe(s,"lobbies",B),de=await Si(X);if(!de.exists()){alert("Lobby nicht gefunden!");return}const $=de.data();$.players&&$.players[m]&&alert("Du bist bereits in diesem Raum!"),me(B),sessionStorage.setItem("hk_room",B),ge(!1),R.current=null,await pt(X,{[`players.${m}`]:{temp:0,inventory:[],emoji:A},[`players.${m}.lastSeen`]:zi()})},Kr=async()=>{if(!s)return;const M=Fm(s,"lobbies"),B=Km(M,Qm("status","==","lobby")),X=await Wm(B),de=[];X.forEach($=>{const S=$.data();if(S.hostName&&S.status==="lobby"){const ne=S.players?.[S.hostName]?.emoji||"";de.push({id:$.id,hostName:S.hostName,hostEmoji:ne,playerCount:Object.keys(S.players||{}).length})}}),ie(de),X.forEach($=>{const S=$.data();S.hostName==="Host"&&S.status==="lobby"&&(le.log(' [CLEANUP] Lsche alten Raum von "Host":',$.id),ul($.ref).catch(ne=>{}))})},Ba=async M=>{De(M),await vn(M)},is=async()=>{if(Wn("toggle",.4),!s||!O)return;const M=I?.config?.maxTemp||100;if((I?.players?.[m]?.temp||0)>=M){alert("Du bist ausgeschieden und kannst nicht mehr mitspielen!");return}const $=!!!I?.lobbyReady?.[m];I&&xe({...I,lobbyReady:{...I.lobbyReady||{},[m]:$}}),await pt(Fe(s,"lobbies",O),{[`lobbyReady.${m}`]:$})},vs=async()=>{if(!s||!O||!ae)return;const M=I?.config?.maxTemp||100,B=Object.keys(I?.players||{}),X=B.filter(ke=>(I?.players?.[ke]?.temp||0)<M),de=I?.lobbyReady||{},$=X.filter(ke=>de[ke]).length;if(le.log(" [START GAME] Prfung:",{allPlayers:B,activePlayers:X,readyCount:$,totalActivePlayers:X.length,lobbyReady:de}),$<X.length||X.length<2){le.warn(" [START GAME] Nicht alle aktiven Spieler bereit:",$,"/",X.length),alert(`Alle aktiven Spieler mssen bereit sein! (${$}/${X.length})`);return}await Fa(I.players);const S=I?.usedQuestions||[],ne=I?.config?.categories||Object.keys(fi),Y=mc(ne);let Ae=S;S.length>0&&typeof S[0]=="number"&&(Ae=S.map(ke=>Y[ke]?.id).filter(Boolean));const Ie=Y.filter(ke=>ke.id&&!Ae.includes(ke.id)),Re=Ie[Math.floor(Math.random()*Ie.length)]||Y[0],Ee=(I?.roundId??0)+1;le.log(" [START GAME] Starte erste Runde:",{hotseat:X[0],question:Re.q,roundId:Ee,questionId:Re.id}),Wn("game_start",.7),await pt(Fe(s,"lobbies",O),{status:"game",hotseat:X[0],currentQ:Re,votes:{},ready:[],roundId:Ee,lobbyReady:{},usedQuestions:Re.id&&!Ae.includes(Re.id)?[...Ae,Re.id]:Ae,lastQuestionCategory:Re.category,pendingAttacks:{},attackDecisions:{},attackResults:{},roundRecapShown:!1,popupConfirmed:{}})},Qr=te.useCallback(M=>{if(I){const B=I.config?.maxTemp||100;if((I.players?.[m]?.temp||0)>=B){alert("Du bist ausgeschieden und kannst nicht mehr abstimmen!");return}}pn(M),Wn("click",.3)},[Wn,I,m]),Ua=te.useCallback(async()=>{if(ri)return;if(!s||!O){alert("Fehler: Datenbank-Verbindung fehlt!");return}const M=await Si(Fe(s,"lobbies",O));if(!M.exists()){alert("Lobby existiert nicht mehr!");return}const B=M.data(),X=B?.config?.maxTemp||100;if((B?.players?.[m]?.temp||0)>=X){alert("Du bist ausgeschieden und kannst nicht mehr abstimmen!");return}const $=B?.votes?.[m],S=B?.roundId||0;le.log(" [SUBMIT VOTE] Prfe bestehende Votes:",{existingVote:$,allVotes:Object.keys(B?.votes||{}),roundId:S,myName:m,mySelection:Xe});const ne=$?.roundId;if($&&ne!==void 0&&ne===S){alert("Du hast bereits abgestimmt!");return}if(!Xe)if($?.choice)le.log(" [SUBMIT VOTE] Restore mySelection aus existingVote:",$.choice),pn($.choice),$.choice;else{alert("Bitte whle zuerst eine Antwort!");return}const Ae=Xe||$?.choice;if(!Ae){alert("Bitte whle zuerst eine Antwort!");return}const Ie=`submitVote_${m}_${S}_${Date.now()}`;let Re=!1;try{Re=await Qn(async()=>{await Zv(s,async Ee=>{const ke=Fe(s,"lobbies",O),ut=await Ee.get(ke);if(!ut.exists())throw new Error("Lobby existiert nicht mehr!");const je=ut.data(),Pe=je?.roundId||0;if(Pe!==S)throw le.warn(" [SUBMIT VOTE] RoundId hat sich gendert whrend Transaction:",{expectedRoundId:S,actualRoundId:Pe}),new Error("Runde hat sich gendert!");const Rt=je?.votes?.[m],xt=Rt?.roundId;if(Rt&&(xt!==void 0&&xt===Pe||xt===void 0&&Pe===S))throw le.warn(" [SUBMIT VOTE] Bereits in dieser Runde abgestimmt (Transaction):",{existingVote:Rt,currentRoundIdInTransaction:Pe,existingVoteRoundId:xt,currentRoundId:S}),new Error("Du hast bereits abgestimmt!");Ee.update(ke,{[`votes.${m}`]:{choice:String(Ae),strategy:gs||"none",roundId:Pe,timestamp:zi()}})})},Ie,3,500)}catch(Ee){if(Ee?.code==="failed-precondition"||Ee?.message?.includes("failed-precondition"))try{const ke=await Si(Fe(s,"lobbies",O));if(!ke.exists())throw new Error("Lobby existiert nicht mehr!");const ut=ke.data(),je=ut?.roundId||0;if(je!==S)throw le.warn(" [SUBMIT VOTE] RoundId hat sich gendert:",{expectedRoundId:S,actualRoundId:je}),new Error("Runde hat sich gendert!");const Pe=ut?.votes?.[m],Rt=Pe?.roundId;if(Pe&&(Rt!==void 0&&Rt===je||Rt===void 0&&je===S))throw le.warn(" [SUBMIT VOTE] Bereits in dieser Runde abgestimmt (Fallback):",{existingVote:Pe,currentRoundIdInFallback:je}),new Error("Du hast bereits abgestimmt!");Re=await Qn(async()=>{await pt(Fe(s,"lobbies",O),{[`votes.${m}`]:{choice:String(Ae),strategy:gs||"none",roundId:je,timestamp:zi()}})},`${Ie}_fallback`,3,500)}catch{Re=!1}else Re=!1}Re?(Mn(!0),Wn("click",.3)):I?.votes?.[m]?.roundId===S?alert("Du hast bereits abgestimmt!"):alert("Fehler beim Absenden der Antwort! Bitte versuche es erneut.")},[Wn,I,m,Xe,gs,s,O]),qa=async()=>{if(!s||!O)return;const M=Fe(s,"lobbies",O),X=(I?.ready||[]).includes(m);try{X?(await pt(M,{ready:fc(m)}),le.log(" [SET READY] Nicht mehr bereit gesetzt")):(await pt(M,{ready:il(m)}),le.log(" [SET READY] Bereit gesetzt"))}catch{try{const $=await Si(M);if(!$.exists()){le.error(" [SET READY] Lobby existiert nicht mehr");return}const Y=($.data()?.ready||[]).includes(m);Y!==X&&(Y?await pt(M,{ready:fc(m)}):await pt(M,{ready:il(m)}),le.log(" [SET READY] Retry erfolgreich"))}catch{}}},Wr=te.useCallback(()=>{me(""),xe(null),f("start"),sessionStorage.removeItem("hk_room"),R.current=null},[]),fr=te.useMemo(()=>{if(!I?.players)return[];const M=I.host,B=Object.entries(I.players),X=B.find(([S])=>S===M),de=B.filter(([S])=>S!==M);return(X?[X,...de]:de).map(([S,ne])=>({name:S,temp:ne.temp||0,emoji:ne.emoji||""}))},[I?.players,I?.host]),yn=te.useCallback(()=>fr,[fr]),an=te.useRef(null),un=te.useRef(null),Ts=te.useRef(null),Ha=(M,B)=>{if(M&&B){if(ki)return;Gs(!0)}},Ut=()=>{Gs(!1)},Qs=async()=>{if(be(!1),sn(!1),Zi(null),O&&m&&s)try{await Qn(async()=>{const M=Fe(s,"lobbies",O);((await Si(M)).data()?.popupConfirmed||{})[m]||(le.log(" [ATTACK MODAL] Markiere Popup als besttigt fr",m),await pt(M,{[`popupConfirmed.${m}`]:!0}),le.log(" [ATTACK MODAL] Popup erfolgreich als besttigt markiert"))},`confirmPopup_${m}`,3,500)}catch{}},Es=async()=>{if(!s||!O)return;const M=10,B=Fe(s,"lobbies",O),$={...(await Si(B)).data()?.attackDecisions||{},[m]:!0};await pt(B,{[`players.${m}.temp`]:ym(M),log:il(` ${m} hat falsch geraten und sich selbst aufgeheizt (+${M}C)`),attackDecisions:$}).then(()=>{if(I&&I.players&&I.players[m]){const S=I.players[m].temp||0;xe({...I,players:{...I.players,[m]:{...I.players[m],temp:S+M}}})}}).catch(S=>{})},mr=async M=>{if(Wn("attack",.6),!s||!O)return;const B=Ei.ATTACK_DMG_PARTY,de=(I?.players?.[m]||{}).inventory?.includes("card_oil"),$=B*(de?2:1);try{await Zv(s,async S=>{const ne=Fe(s,"lobbies",O),Y=await S.get(ne);if(!Y.exists())throw new Error("Lobby existiert nicht mehr!");const Ae=Y.data(),Ie=Ae?.pendingAttacks||{},Re=Ae?.attackDecisions||{};if(Re[m]===!0)throw new Error("Du hast bereits eine Angriffsentscheidung getroffen!");const Ee=Ie[M]||[];Ee.push({attacker:m,dmg:$,hasOil:de});const ke={...Ie,[M]:Ee},ut={...Re,[m]:!0};S.update(ne,{pendingAttacks:ke,attackDecisions:ut}),de&&(S.update(ne,{[`players.${m}.inventory`]:fc("card_oil")}),le.log(" [ATTACK] lfass wird verbraucht"))}),le.log(" [ATTACK] Angriff erfolgreich gesendet (Transaction)"),Mn(!0)}catch(S){S.message==="Du hast bereits eine Angriffsentscheidung getroffen!"?(Mn(!0),alert("Du hast bereits eine Angriffsentscheidung getroffen!")):alert("Fehler beim Senden des Angriffs: "+S.message)}},ai=async()=>{if(!ae)return;const M=`nextRound_${Date.now()}`;if(Vt.current.set(M,{startTime:Date.now(),attempts:0}),!s||!O)return;const B=await Si(Fe(s,"lobbies",O));if(!B.exists())return;const X=B.data();if(X.status==="deleted"||!O)return;const de=X.host===m;if(!de&&!ae){const yt=X.config?.maxTemp||100,_t=X.eliminatedPlayers||[],ze=Object.keys(X.players||{}).filter(Ue=>(X.players?.[Ue]?.temp||0)<yt&&!_t.includes(Ue)),it=ze.length,$e=ze.filter(Ue=>{const Ne=X.votes?.[Ue];if(!Ne||Ne.choice===void 0)return!1;const ht=Ne.roundId;return ht!==void 0&&ht===X.roundId}).length,Yt=X.ready||[],jt=ze.filter(Ue=>Yt.includes(Ue)).length,lt=jt>=it&&it>0,qt=$e>=it&&it>0,Qt=X.popupConfirmed||{},fe=!(X.attackResults&&Object.keys(X.attackResults).length>0)||ze.every(Ue=>X.attackResults?.[Ue]?Qt[Ue]===!0:!0),qe=X.roundRecapShown??!1;if(!(lt&&qt&&fe&&qe&&X.status==="result")){const Ue=ze.map(Ne=>{const ht=X.votes?.[Ne];return{player:Ne,hasVote:!!ht,choice:ht?.choice,roundId:ht?.roundId,currentRoundId:X.roundId,isValid:ht?.roundId===X.roundId}});le.warn(" [NEXT ROUND] Nicht der Host und Failover-Bedingungen nicht erfllt:",{roundId:X.roundId,allReady:lt,allVoted:qt,allPopupConfirmed:fe,roundRecapShown:qe,status:X.status,voteCount:$e,playerCount:it,readyCount:jt,voteDetails:Ue,readyList:Yt});return}}else if(!de){le.warn(" [NEXT ROUND] Host-Check fehlgeschlagen:",{host:X.host,myName:m});return}le.log(" [NEXT ROUND] Aktuelle Daten:",{roundId:X.roundId,status:X.status,players:Object.keys(X.players||{})});const $=X?.players||{},S=Object.keys($),ne=X?.config?.maxTemp||Ei.MAX_TEMP_DEFAULT,Y=Zo($,ne);if(le.log(" [NEXT ROUND] Aktive Spieler:",{allPlayers:S,activePlayers:Y,maxTemp:ne,playerTemps:S.map(yt=>({name:yt,temp:X?.players[yt]?.temp||0}))}),Y.length<=1){const yt=Y.length===1?Y[0]:null;le.log(" [NEXT ROUND] Spielende erkannt:",{activePlayers:Y.length,winner:yt,allPlayers:S.map(_t=>({name:_t,temp:X?.players[_t]?.temp||0}))}),await pt(Fe(s,"lobbies",O),{status:"winner"});return}const Ae=X?.hotseat||"",Ie=typeof Ae=="string"?Ae:Ae?.name||String(Ae||"");let Re=Y.indexOf(Ie);Re===-1&&(Re=0),Re=(Re+1)%Y.length;const Ee=Y[Re],ke=X?.usedQuestions||[],ut=X?.config?.categories||Object.keys(fi),je=mc(ut);let Pe=ke;ke.length>0&&typeof ke[0]=="number"&&(Pe=ke.map(yt=>je[yt]?.id).filter(Boolean));const Rt=je.filter(yt=>yt.id&&!Pe.includes(yt.id)),xt=(X?.roundId??0)+1,We=Rt.length>0?xt%Rt.length:0,ot=Rt[We]||je[0];le.log(" [NEXT ROUND] Runden-Details:",{currentHotseat:Ie,nextHotseat:Ee,nextHotseatIndex:Re,question:ot.q,nextRoundId:xt}),await Fa(X.players),le.log(" [NEXT ROUND] Bereite nchste Runde vor:",{nextRoundId:xt,hotseat:Ee,question:ot.q,activePlayers:Y}),le.log(" [NEXT ROUND] Erstelle updateData Objekt:",{currentRoundId:X?.roundId,nextRoundId:xt,currentStatus:X?.status,nextHotseat:Ee,hasRandomQ:!!ot,randomQId:ot?.id,randomQCategory:ot?.category});const he={status:"game",hotseat:Ee,currentQ:ot,roundId:xt,lastQuestionCategory:ot.category,roundRecapShown:!1,lastHostActivity:zi()};if(le.log(" [NEXT ROUND] Basis-updateData erstellt:",{keys:Object.keys(he),status:he.status,roundId:he.roundId,hotseat:he.hotseat,hasCurrentQ:!!he.currentQ}),he.votes=di(),he.ready=[],he.lobbyReady={},he.pendingAttacks={},he.attackDecisions={},he.attackResults={},he.popupConfirmed={},le.log(" [NEXT ROUND] updateData vollstndig erstellt:",{totalKeys:Object.keys(he).length,hasDeleteFields:he.votes===di(),arrayFields:{ready:Array.isArray(he.ready),usedQuestions:Array.isArray(he.usedQuestions)},objectFields:{lobbyReady:typeof he.lobbyReady=="object",pendingAttacks:typeof he.pendingAttacks=="object",attackDecisions:typeof he.attackDecisions=="object",attackResults:typeof he.attackResults=="object",popupConfirmed:typeof he.popupConfirmed=="object"}}),ot.id&&!Pe.includes(ot.id)?he.usedQuestions=[...Pe,ot.id]:he.usedQuestions=Pe,le.log(" [NEXT ROUND] Update Firebase mit:",{roomId:O,roundId:he.roundId,status:he.status,hotseat:he.hotseat,currentQ:he.currentQ?{q:he.currentQ.q?.substring(0,50),category:he.currentQ.category}:null,lastQuestionCategory:he.lastQuestionCategory,roundRecapShown:he.roundRecapShown,hasLastHostActivity:!!he.lastHostActivity,votes:"[deleteField]",ready:Array.isArray(he.ready)?he.ready:"not array",lobbyReady:he.lobbyReady?Object.keys(he.lobbyReady).length:0,pendingAttacks:he.pendingAttacks?Object.keys(he.pendingAttacks).length:0,attackDecisions:he.attackDecisions?Object.keys(he.attackDecisions).length:0,attackResults:he.attackResults?Object.keys(he.attackResults).length:0,popupConfirmed:he.popupConfirmed?Object.keys(he.popupConfirmed).length:0,usedQuestions:Array.isArray(he.usedQuestions)?he.usedQuestions.length:"not array"}),!O){Vt.current.delete(M);return}if(le.log(" [NEXT ROUND] Starte Firebase-Update:",{roomId:O,updateDataKeys:Object.keys(he),roundId:he.roundId,status:he.status,hasDeleteFields:he.votes===di(),updateDataSize:JSON.stringify(he).length}),await Qn(async()=>{if(!O)throw new Error("roomId wurde gelscht");le.log(" [NEXT ROUND] Versuche updateDoc:",{roomId:O,timestamp:Date.now(),updateData:{status:he.status,roundId:he.roundId,hotseat:he.hotseat,hasVotes:he.votes!==void 0,readyLength:Array.isArray(he.ready)?he.ready.length:"not array",lobbyReadyKeys:he.lobbyReady?Object.keys(he.lobbyReady).length:0,pendingAttacksKeys:he.pendingAttacks?Object.keys(he.pendingAttacks).length:0,attackDecisionsKeys:he.attackDecisions?Object.keys(he.attackDecisions).length:0,attackResultsKeys:he.attackResults?Object.keys(he.attackResults).length:0,popupConfirmedKeys:he.popupConfirmed?Object.keys(he.popupConfirmed).length:0,usedQuestionsLength:Array.isArray(he.usedQuestions)?he.usedQuestions.length:"not array",hasCurrentQ:!!he.currentQ,lastQuestionCategory:he.lastQuestionCategory,roundRecapShown:he.roundRecapShown,hasLastHostActivity:!!he.lastHostActivity}});const yt=Date.now();await pt(Fe(s,"lobbies",O),he);const _t=Date.now()-yt;le.log(" [NEXT ROUND] updateDoc erfolgreich:",{duration:_t+"ms",roomId:O,roundId:he.roundId,timestamp:new Date().toISOString()})},M,3,1e3))Vt.current.delete(M);else{if(!O){Vt.current.delete(M);return}setTimeout(async()=>{if(!O||!s){Vt.current.delete(M);return}try{const yt=await Si(Fe(s,"lobbies",O));if(!yt.exists()||yt.data()?.status==="deleted"){le.warn(" [NEXT ROUND] Lobby existiert nicht mehr, kein Retry"),Vt.current.delete(M);return}await pt(Fe(s,"lobbies",O),he),Ji.current=Date.now(),Vt.current.delete(M),le.log(" [NEXT ROUND] Retry erfolgreich")}catch{Vt.current.delete(M)}},3e3)}},gr=async M=>{const B=`executeAttacks_${M?.roundId||Date.now()}`;Vt.current.set(B,{startTime:Date.now(),attempts:0});const X=M?.config?.maxTemp||100,de=Object.keys(M?.players||{}).filter(fe=>(M.players?.[fe]?.temp||0)<X).sort(),$=M?.host,S=$===m,Y=de.indexOf(m)===0&&de.length>0,Ae=S||Y||ae;if(le.log(" [EXECUTE ATTACKS] Starte executePendingAttacks:",{roundId:M?.roundId,myName:m,hostName:$,isCurrentHost:S,isFirstBackupHost:Y,isHost:ae,canExecute:Ae,hasDb:!!s,roomId:O}),!Ae){Vt.current.delete(B);return}if(!s||!O){Vt.current.delete(B);return}const Ie=await Si(Fe(s,"lobbies",O));if(!Ie.exists())return;const Re=Ie.data();if(Re.status==="deleted"||Re.host!==m||!O)return;const Ee=Ie.data(),ke=Ee.pendingAttacks||{},ut=Ee.players||{},je=Ee.attackDecisions||{},Pe=typeof Ee.hotseat=="string"?Ee.hotseat:Ee.hotseat?.name||String(Ee.hotseat||""),Rt=Ee?.config?.maxTemp||100,xt=Ee?.eliminatedPlayers||[],We=Object.keys(ut).filter(fe=>(ut[fe]?.temp||0)<Rt&&!xt.includes(fe)),ot=We.filter(fe=>{if(fe===Pe)return!1;const qe=Ee.votes||{},Ue=qe[Pe],Ne=qe[fe];if(Ue&&Ne){const ht=String(Ue.choice||"");if(String(Ne.choice||"")!==ht)return!1}return!0}),he=ot.every(fe=>je[fe]===!0),dn=We.filter(fe=>{if(fe===Pe)return!1;const qe=Ee.votes||{},Ue=qe[Pe],Ne=qe[fe];if(Ue&&Ne){const ht=String(Ue.choice||"");if(String(Ne.choice||"")!==ht)return!0}return!1}),yt=dn.every(fe=>je[fe]===!0);if(le.log(" [EXECUTE ATTACKS] Verarbeite Angriffe:",{roundId:Ee.roundId,pendingAttacks:ke,players:Object.keys(ut),playersWhoCanAttack:ot,playersWhoCannotAttack:dn,allAttackersDecided:he,allNonAttackersDecided:yt,attackDecisions:je}),!he&&ot.length>0){const fe=ot.filter(qe=>!je[qe]);le.warn(" [EXECUTE ATTACKS]  Nicht alle Angreifer haben entschieden, warte noch...",{roundId:Ee.roundId,playersWhoCanAttack:ot,missing:fe,attackDecisions:je,pendingAttacks:ke,allAttackersDecided:he});return}if(ot.length===0&&!yt&&dn.length>0){const fe=dn.filter(Ue=>!je[Ue]);if(le.warn(" [EXECUTE ATTACKS]  Nicht alle Nicht-Angreifer haben entschieden, warte noch...",{roundId:Ee.roundId,playersWhoCannotAttack:dn,missing:fe,attackDecisions:je,allNonAttackersDecided:yt,totalPlayers:We.length,hotseatName:Pe}),We.length===dn.length+1){await pt(Fe(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}return}if(ot.length===0&&yt){await pt(Fe(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}if(ot.length===0&&dn.length===0){await pt(Fe(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}le.log(" [EXECUTE ATTACKS]  Alle Entscheidungen getroffen, verarbeite Angriffe...",{roundId:Ee.roundId,playersWhoCanAttack:ot,playersWhoCannotAttack:dn,allAttackersDecided:he,allNonAttackersDecided:yt,pendingAttacks:ke});const _t={},ze={},it=[];for(const[fe,qe]of Object.entries(ke)){if(!ut[fe]||!Array.isArray(qe)||qe.length===0)continue;const Ne=ut[fe].inventory?.includes("card_mirror");let ht=0;const hn=[];if(qe.forEach(It=>{ht+=It.dmg||0,hn.push(It.attacker),It.hasOil?it.push(` ${It.attacker} greift ${fe} mit dem lfass an (+${It.dmg}C)`):it.push(` ${It.attacker} greift ${fe} an (+${It.dmg}C)`)}),Ne){await pt(Fe(s,"lobbies",O),{[`players.${fe}.inventory`]:fc("card_mirror")}),qe.forEach(dt=>{_t[`players.${dt.attacker}.temp`]||(_t[`players.${dt.attacker}.temp`]=0),_t[`players.${dt.attacker}.temp`]+=dt.dmg||0});const It=hn.join(" und ");it.push(` ${fe} spiegelt die Angriffe von ${It} zurck! (+${ht}C)`),ze[fe]={attackers:hn,totalDmg:0,attackDetails:qe.map(dt=>({attacker:dt.attacker,dmg:dt.dmg||0,mirrored:!0}))}}else _t[`players.${fe}.temp`]||(_t[`players.${fe}.temp`]=0),_t[`players.${fe}.temp`]+=ht,ze[fe]={attackers:[...hn],totalDmg:ht,attackDetails:qe.map(It=>({attacker:It.attacker,dmg:It.dmg||0}))}}const $e=Ee.votes||{},Yt=typeof Ee.hotseat=="string"?Ee.hotseat:Ee.hotseat?.name||String(Ee.hotseat||""),jt=$e?.[Yt]?.choice,lt=Object.keys(ut);lt.forEach(fe=>{if(fe===Yt)return;const qe=$e[fe],Ue=String(qe?.choice||""),Ne=String(jt||"");if(qe&&Ue!==Ne){let ht=Ei.PENALTY_DMG;ht=0,ht>0&&(_t[`players.${fe}.temp`]||(_t[`players.${fe}.temp`]=0),_t[`players.${fe}.temp`]+=ht),ze[fe]||(ze[fe]={attackers:[],totalDmg:0,attackDetails:[]});const hn=10;ze[fe].totalDmg+=hn,ze[fe].attackDetails.push({attacker:"Strafhitze",dmg:hn,isPenalty:!0})}}),lt.forEach(fe=>{ze[fe]||(ze[fe]={attackers:[],totalDmg:0,attackDetails:[]})});const qt={pendingAttacks:{},attackResults:ze,roundRecapShown:!0,lastHostActivity:zi()};if(it.length>0){const Ue=[...Ee.log||[],...it].slice(-50);qt.log=Ue}for(const[fe,qe]of Object.entries(_t)){const Ue=fe.split(".");if(Ue.length===3&&Ue[0]==="players"&&Ue[2]==="temp"){const Ne=Ue[1];qt[`players.${Ne}.temp`]=ym(qe)}}await Qn(async()=>{await pt(Fe(s,"lobbies",O),qt)},B,3,1e3)?Vt.current.delete(B):setTimeout(async()=>{try{await pt(Fe(s,"lobbies",O),qt),Ji.current=Date.now(),Vt.current.delete(B),le.log(" [EXECUTE ATTACKS] Retry erfolgreich")}catch{}},3e3);const Tt=await Si(Fe(s,"lobbies",O));if(Tt.exists()){const fe=Tt.data(),qe=fe.players||{},Ue=fe.config?.maxTemp||100,Ne=Object.keys(qe).filter(dt=>(qe[dt]?.temp||0)<Ue),ht=Object.keys(qe).filter(dt=>(qe[dt]?.temp||0)>=Ue),hn=Ee.players||{},It=ht.filter(dt=>{const $n=hn[dt]?.temp||0,Yn=qe[dt]?.temp||0;return $n<Ue&&Yn>=Ue});if(le.log(" [WINNER CHECK] Prfe auf Gewinner nach Angriffen:",{roundId:fe.roundId,allPlayers:Object.keys(qe),activePlayers:Ne,newlyEliminated:ht,justEliminated:It,playerTemps:Object.keys(qe).map(dt=>({name:dt,temp:qe[dt]?.temp||0,beforeTemp:hn[dt]?.temp||0,isEliminated:(qe[dt]?.temp||0)>=Ue})),maxTemp:Ue}),It.length>0){const dt=It[0],$n=fe.eliminatedPlayers||[],Yn=$n.includes(dt)?$n:[...$n,dt],ei={eliminationInfo:{player:dt,roundId:fe.roundId,timestamp:Date.now()},eliminatedPlayers:Yn,[`lobbyReady.${dt}`]:di()},ti=fe.host;if(dt===ti){const _n=Ne.filter(Li=>Li!==dt);if(_n.length>0){const Li=_n[0];ei.host=Li}}await pt(Fe(s,"lobbies",O),ei)}Ne.length===1?(Ne[0],await pt(Fe(s,"lobbies",O),{status:"winner"})):Ne.length===0&&await pt(Fe(s,"lobbies",O),{status:"winner"})}},Fa=async M=>{if(!ae||!M||!s||!O)return;const B=I?.config?.dmg||10,X=Fe(s,"lobbies",O);for(const de of Object.keys(M))if(M[de].inventory?.includes("card_ice")){const $=Math.min(B,M[de].temp||0);$>0&&await pt(X,{[`players.${de}.temp`]:ym(-$),[`players.${de}.inventory`]:fc("card_ice"),log:il(` ${de} khlt sich ab (-${$}C)`)})}},Ga=async()=>{!ae||!s||!O||window.confirm("Mchtest du wirklich zur nchsten Runde springen?")&&(await ai(),rn(!1))},Ws=async()=>{if(!ae||!s||!O||!window.confirm("Mchtest du das Spiel wirklich neustarten? Alle Temperaturen werden zurckgesetzt."))return;const M={};Object.keys(I?.players||{}).forEach(B=>{M[B]={temp:0,inventory:[],emoji:I?.players[B]?.emoji||""}}),await pt(Fe(s,"lobbies",O),{status:"lobby",players:M,votes:di(),ready:[],log:[],hotseat:"",roundId:0,lobbyReady:{},usedQuestions:[],pendingAttacks:di(),attackResults:di(),popupConfirmed:di(),eliminatedPlayers:[]}),rn(!1)},To=async()=>{if(!(!ae||!s||!O)&&window.confirm("Lobby wirklich lschen? Alle Spieler werden ausgeworfen und die Lobby ist danach nicht mehr verfgbar!"))try{const M=Fe(s,"lobbies",O);await pt(M,{status:"deleted",deletedAt:zi()}).catch(B=>{le.warn(" [KILL LOBBY] Konnte Status nicht setzen, lsche direkt:",B)}),await new Promise(B=>setTimeout(B,500)),await ul(M),le.log(" [KILL LOBBY] Lobby gelscht:",O),rn(!1),Wr()}catch(M){alert(`Fehler beim Lschen der Lobby: ${M.message}`)}},$s=async()=>{if(!s){alert("Fehler: Firebase ist nicht verfgbar.");return}if(window.confirm(" WARNUNG: Alle offenen Lobbies werden gelscht! Dies kann nicht rckgngig gemacht werden. Fortfahren?")&&window.confirm("Bist du wirklich sicher? Alle Spieler werden ausgeworfen!"))try{le.log(" [ADMIN] Starte Lschung aller Lobbies...");const M=Fm(s,"lobbies"),B=Km(M,Qm("status","in",["lobby","game","result"])),X=await Wm(B);let de=0,$=0;for(const S of X.docs)try{const ne=S.data();await pt(S.ref,{status:"deleted",deletedAt:zi()}).catch(()=>{}),await ul(S.ref),de++,le.log(` [ADMIN] Lobby gelscht: ${S.id} (Host: ${ne.hostName||ne.host})`)}catch(ne){$++,le.error(` [ADMIN] Fehler beim Lschen von ${S.id}:`,ne)}alert(` ${de} Lobby(s) gelscht.${$>0?`
 ${$} Fehler aufgetreten.`:""}`),le.log(` [ADMIN] Lschung abgeschlossen: ${de} gelscht, ${$} Fehler`)}catch(M){alert(`Fehler beim Lschen: ${M.message}`)}},_i=async()=>{if(!I||!s||!O)return;if(I.host!==m){alert("Nur der Host kann eine Revanche starten.");return}if(!window.confirm("Mchtest du eine Revanche starten? Alle Temperaturen werden zurckgesetzt."))return;const M={};Object.keys(I.players||{}).forEach(B=>{M[B]={temp:0,inventory:[],emoji:I.players[B]?.emoji||""}}),await pt(Fe(s,"lobbies",O),{status:"lobby",players:M,votes:di(),ready:[],log:il(" Revanche gestartet! Alle Temperaturen wurden zurckgesetzt."),hotseat:"",roundId:(I.roundId??0)+1,lobbyReady:{},usedQuestions:[],pendingAttacks:di(),attackResults:di(),popupConfirmed:di(),eliminatedPlayers:[]}),alert("Revanche gestartet! Alle zurck in die Lobby.")};return _.jsxs("div",{className:"App",children:[u!=="landing"&&_.jsx("div",{className:"menu-btn",onClick:()=>rn(!Ks),children:""}),u==="create"&&_.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("start"),children:""}),u==="questionGeneratorCategories"&&_.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("start"),children:""}),u==="questionGenerator"&&_.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("questionGeneratorCategories"),children:""}),u!=="landing"&&u!=="create"&&u!=="questionGeneratorCategories"&&u!=="questionGenerator"&&_.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>Se(!0),children:"?"}),Ks&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"overlay open",onClick:()=>{rn(!1),Kn("main")}}),_.jsxs("div",{className:k.menuModal,children:[Ni==="main"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:k.menuHeader,children:[_.jsx("h3",{className:k.menuTitle,children:" Men"}),_.jsx("button",{onClick:()=>{rn(!1),Kn("main")},className:k.menuCloseButton,children:""})]}),_.jsx("button",{onClick:()=>Kn("settings"),className:k.menuButton,children:" Einstellungen"}),_.jsx("button",{onClick:()=>Kn("volume"),className:k.menuButton,children:" Lautstrke"}),_.jsx("button",{onClick:()=>Kn("log"),className:k.menuButton,children:" Spielverlauf"}),_.jsx("div",{className:k.spacer}),_.jsx("button",{onClick:Wr,className:k.leaveButton,children:" Spiel verlassen"})]}),Ni==="settings"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:k.menuHeader,children:[_.jsx("h3",{className:k.menuTitle,children:" Einstellungen"}),_.jsx("button",{onClick:()=>Kn("main"),className:k.menuBackButton,children:""})]}),ae&&_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:Ga,className:`${k.settingsButton} ${k.settingsButtonGray}`,children:" Runde erzwingen"}),_.jsx("button",{onClick:Ws,className:`${k.settingsButton} ${k.settingsButtonRed}`,children:" Spiel neustarten"}),_.jsx("button",{onClick:To,className:`${k.settingsButton} ${k.settingsButtonDarkRed}`,children:" Lobby lschen"})]}),_.jsxs("div",{className:k.menuSection,children:[_.jsx("h4",{className:k.menuSectionTitle,children:" Admin-Funktionen"}),_.jsx("button",{onClick:$s,className:`${k.settingsButton} ${k.settingsButtonDanger}`,children:" Alle Lobbies lschen (Test)"})]}),_.jsxs("button",{onClick:es,className:`${k.settingsButton} ${k.settingsButtonMusic} ${wn?k.settingsButtonMusicEnabled:k.settingsButtonMusicDisabled}`,children:[wn?"":""," Hintergrundmusik ",wn?"an":"aus"]})]}),Ni==="volume"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:k.menuHeader,children:[_.jsx("h3",{className:k.menuTitle,children:" Lautstrke"}),_.jsx("button",{onClick:()=>Kn("main"),className:k.menuBackButton,children:""})]}),_.jsxs("div",{className:k.volumeSliderContainer,children:[_.jsx("h4",{className:k.volumeTitle,children:"Hintergrundmusik"}),_.jsxs("div",{className:k.volumeSliderWrapper,children:[_.jsx("span",{className:k.volumeIcon,children:""}),_.jsx("input",{type:"range",min:"0",max:"10",value:Hr,onChange:M=>An(parseInt(M.target.value)),className:k.volumeSliderInput}),_.jsx("span",{className:k.volumeIcon,children:""})]})]}),_.jsxs("div",{className:k.volumeSliderContainer,children:[_.jsx("h4",{className:k.volumeTitle,children:"Soundeffekte"}),_.jsxs("div",{className:k.volumeSliderWrapper,children:[_.jsx("span",{className:k.volumeIcon,children:""}),_.jsx("input",{type:"range",min:"0",max:"10",value:Ls,onChange:M=>xn(parseInt(M.target.value)),className:k.volumeSliderInput}),_.jsx("span",{className:k.volumeIcon,children:""})]})]})]}),Ni==="log"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:k.menuHeader,children:[_.jsx("h3",{className:k.menuTitle,children:" Spielverlauf"}),_.jsx("button",{onClick:()=>Kn("main"),className:k.menuBackButton,children:""})]}),_.jsx("div",{className:k.menuLogContainer,children:I?.log&&I.log.length>0?I.log.slice(-20).map((M,B)=>_.jsx("div",{className:k.menuLogEntry,children:M},B)):_.jsx("div",{className:k.menuLogEmpty,children:"Keine Eintrge"})})]})]})]}),u!=="landing"&&_.jsx("div",{className:k.logoContainer,children:_.jsx("img",{src:Sb,alt:"Hitzkopf Logo",className:k.logoHorizontal})}),u==="landing"&&_.jsxs("div",{className:k.landingContainer,children:[r&&_.jsx("button",{onClick:r,className:k.backToProjectsButton,title:"Zurck zur Projektauswahl",children:" Zurck"}),_.jsx("div",{className:k.landingLogoContainer,children:_.jsx("img",{src:IM,alt:"Hitzkopf Logo",className:k.landingLogo})}),_.jsx("button",{onClick:()=>f("start"),className:k.landingButton,children:"SPIELEN"})]}),u==="start"&&_.jsxs("div",{className:"screen active card",children:[_.jsx("input",{id:"playerName",name:"playerName",type:"text",value:m,onChange:Gr,placeholder:"Dein Name",maxLength:20,autoComplete:"name"}),_.jsx("div",{className:`emoji-gallery-wrapper ${k.emojiGalleryWrapper}`,children:_.jsxs("div",{ref:yi,id:"emojiGallery",className:k.emojiGallery,children:[_.jsx("div",{className:`emoji-spacer ${k.emojiSpacer}`}),Dr.map((M,B)=>{const X=B===_s;return _.jsx("div",{className:`emoji-card ${X?"selected":""}`,onClick:de=>{Vs.current||ns(M)},onTouchStart:de=>{ts.current={x:de.touches[0].clientX,y:de.touches[0].clientY,time:Date.now()}},onTouchMove:de=>{if(ts.current.x!==0){const $=Math.abs(de.touches[0].clientX-ts.current.x),S=Math.abs(de.touches[0].clientY-ts.current.y);($>10||S>10)&&(Vs.current=!0)}},onTouchEnd:de=>{const $=Math.abs(de.changedTouches[0].clientX-ts.current.x),S=Math.abs(de.changedTouches[0].clientY-ts.current.y),ne=Date.now()-ts.current.time;!($>10||S>10)&&ne<300&&!Vs.current&&(de.preventDefault(),de.stopPropagation(),ns(M)),setTimeout(()=>{Vs.current=!1,ts.current={x:0,y:0,time:0}},100)},"data-emoji":M,"data-index":B,children:M},`${M}-${B}`)}),_.jsx("div",{className:`emoji-spacer ${k.emojiSpacer}`})]})}),_.jsxs("div",{className:"start-actions",children:[_.jsx("button",{className:"btn-secondary",onClick:()=>f("create"),disabled:!m.trim(),children:" Spiel erstellen"}),_.jsx("button",{className:"btn-secondary",onClick:()=>{f("join"),Kr()},disabled:!m.trim(),children:" Spiel beitreten"})]})]}),u==="start"&&_.jsx("button",{className:k.fullWidthButton,onClick:()=>f("questionGeneratorCategories"),style:{opacity:1},children:" Fragengenerator"}),u==="create"&&_.jsxs("div",{className:"screen active card",children:[_.jsx("label",{className:k.labelWithMargin,children:"Whle Fragenkategorien:"}),_.jsxs("div",{className:k.grid3Cols,children:[_.jsxs("div",{className:`category-card ${C.length===Object.keys(fi).length?"selected":""}`,onClick:()=>xi("all"),children:[_.jsx("div",{className:"category-emoji",children:""}),_.jsx("div",{className:"category-name",children:"Alle"})]}),Object.entries(fi).map(([M,B])=>_.jsxs("div",{className:`category-card ${C.includes(M)?"selected":""}`,onClick:()=>xi(M),children:[_.jsx("div",{className:"category-emoji",children:B.emoji}),_.jsx("div",{className:"category-name",children:B.name.split(" ")[0]})]},M))]}),_.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:bs,disabled:!m.trim()||C.length===0,children:" Spiel erstellen"}),_.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),u==="questionGeneratorCategories"&&_.jsxs("div",{className:"screen active card",children:[_.jsx("label",{className:k.labelWithMargin,children:"Whle Fragenkategorien:"}),_.jsxs("div",{className:k.grid3Cols,children:[_.jsxs("div",{className:`category-card ${C.length===Object.keys(fi).length?"selected":""}`,onClick:()=>xi("all"),children:[_.jsx("div",{className:"category-emoji",children:""}),_.jsx("div",{className:"category-name",children:"Alle"})]}),Object.entries(fi).map(([M,B])=>_.jsxs("div",{className:`category-card ${C.includes(M)?"selected":""}`,onClick:()=>xi(M),children:[_.jsx("div",{className:"category-emoji",children:B.emoji}),_.jsx("div",{className:"category-name",children:B.name.split(" ")[0]})]},M))]}),_.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:()=>{if(C.length===0){alert("Bitte whle mindestens eine Kategorie aus!");return}const M=mc().filter(X=>C.includes(X.category));if(M.length===0){alert("Keine Fragen in den ausgewhlten Kategorien gefunden!");return}const B=[...M];for(let X=B.length-1;X>0;X--){const de=Math.floor(Math.random()*(X+1));[B[X],B[de]]=[B[de],B[X]]}at(B),$t(0),ve(B[0]),f("questionGenerator")},disabled:C.length===0,children:" Fragen generieren"}),_.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),u==="questionGenerator"&&pe&&_.jsxs("div",{className:"screen active card",children:[pe.category&&_.jsxs("div",{className:k.gameCategory,style:{marginBottom:"20px"},children:[fi[pe.category]?.emoji," ",fi[pe.category]?.name]}),_.jsx("h3",{className:k.gameQuestion,children:pe.q||"Lade Frage..."}),_.jsxs("div",{className:"option-row",children:[_.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["a) ",pe.a||"A"]}),_.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["b) ",pe.b||"B"]})]}),(pe.c||pe.d)&&_.jsxs("div",{className:"option-row",children:[pe.c&&_.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["c) ",pe.c]}),pe.d&&_.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["d) ",pe.d]})]}),_.jsx("button",{className:`btn-primary ${k.submitButtonMargin}`,onClick:Ui,style:{background:"linear-gradient(135deg, #ff8c00 0%, #ff6b00 100%)",marginTop:"30px"},children:" Nchste Frage"}),_.jsx("button",{onClick:Oi,className:`btn-secondary ${k.backButton}`,disabled:Je===0,children:" Vorherige Frage"})]}),u==="join"&&_.jsxs("div",{className:"screen active card",children:[_.jsx("h3",{className:k.joinScreenTitle,children:" Spiel beitreten"}),_.jsx("button",{className:`btn-secondary ${k.refreshButton}`,onClick:Kr,children:" Rume aktualisieren"}),j.length>0?_.jsx("div",{className:k.grid2Cols,children:j.map(M=>_.jsxs("div",{className:`category-card ${_e===M.id?"selected":""} ${k.roomCard}`,onClick:()=>Ba(M.id,M.hasPassword),children:[_.jsx("div",{className:`category-emoji ${k.categoryEmojiLarge}`,children:M.hostEmoji||""}),_.jsxs("div",{className:`category-name ${k.categoryNameLarge}`,children:["Spiel von ",M.hostName]})]},M.id))}):_.jsx("p",{className:k.noRoomsText,children:"Keine Rume verfgbar"}),_e&&_.jsx("button",{className:"btn-secondary",onClick:()=>vn(_e),disabled:!m.trim()||!_e,children:" Beitreten"}),_.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),u==="lobby"&&I&&(()=>{const M=yn(),B=M.find(ne=>ne.name===m),X=M.filter(ne=>ne.name!==m),de=I.lobbyReady?.[m]===!0,$=I.config?.maxTemp||100,S=(B?.temp||0)>=$;return _.jsxs("div",{className:"screen active card",children:[_.jsxs("h3",{className:k.lobbyTitle,children:[" Spiel von ",I.hostName||I.host||"Unbekannt"]}),B&&_.jsxs("div",{onClick:is,className:`${k.myPlayerCard} ${S?k.eliminated:de?k.ready:k.notReady}`,children:[_.jsx("div",{className:k.myPlayerEmoji,children:B.emoji}),_.jsxs("div",{className:k.myPlayerInfo,children:[_.jsxs("div",{className:k.myPlayerName,children:[B.name," (Du)",I.host===B.name&&_.jsx("span",{className:k.crownIcon,children:""})]}),_.jsxs("div",{className:k.readyToggle,children:[_.jsx("span",{className:k.readyLabel,children:"Bereit"}),_.jsx("div",{onClick:ne=>{ne.stopPropagation(),is()},className:`${k.toggleSwitch} ${de?k.ready:k.notReady}`,children:_.jsx("div",{className:`${k.toggleThumb} ${de?k.ready:k.notReady}`,children:de?_.jsx("span",{className:k.toggleCheck,children:""}):_.jsx("span",{className:k.toggleCross,children:""})})})]})]})]}),X.length>0&&_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginTop:"20px"},children:X.map(ne=>{const Y=I.lobbyReady?.[ne.name]===!0,Ae=(ne.temp||0)>=$;return _.jsxs("div",{style:{padding:"16px",background:"rgba(22, 27, 34, 0.6)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",opacity:Ae?.5:Y?1:.4,transition:"opacity 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",cursor:"default"},children:[_.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"4px"},children:ne.emoji}),_.jsxs("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#fff",textAlign:"center",display:"flex",alignItems:"center",gap:"6px"},children:[ne.name,I.host===ne.name&&_.jsx("span",{style:{fontSize:"1.2rem"},children:""})]}),_.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",background:Y?"#22c55e":"#d1d5db",cursor:"default",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",padding:"2px",opacity:.8,marginTop:"4px"},children:_.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"12px",background:"#fff",transition:"transform 0.3s ease",transform:Y?"translateX(22px)":"translateX(0)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:Y?_.jsx("span",{style:{color:"#22c55e",fontSize:"14px",fontWeight:"bold"},children:""}):_.jsx("span",{style:{color:"#9ca3af",fontSize:"12px",fontWeight:"bold"},children:""})})})]},ne.name)})}),ae&&_.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:vs,disabled:(()=>{const ne=I.config?.maxTemp||100,Y=yn().filter(Ie=>(Ie.temp||0)<ne);return Y.filter(Ie=>I.lobbyReady?.[Ie.name]===!0).length<Y.length||Y.length<2})(),children:" Spiel starten"}),!ae&&(()=>{const ne=I.config?.maxTemp||100,Y=yn().filter(Re=>(Re.temp||0)<ne),Ie=Y.filter(Re=>I.lobbyReady?.[Re.name]===!0).length>=Y.length&&Y.length>=2;return _.jsx("p",{className:k.waitText,children:Ie?" Warten bis der Host das Spiel startet":" Warten bis alle bereit sind"})})()]})})(),u==="game"&&I&&(()=>{const M=I.hotseat,B=I.config?.maxTemp||100,X=I.players?.[m]?.temp||0,de=X>=B;return de?_.jsxs("div",{className:"screen active card",children:[_.jsx("h3",{className:k.eliminatedTitle,children:" Du bist ausgeschieden!"}),_.jsxs("div",{className:k.eliminatedInfoBox,children:[_.jsxs("p",{className:k.eliminatedText,children:["Du hast ",X,"C erreicht und bist ausgeschieden."]}),_.jsx("p",{className:k.eliminatedSubtext,children:"Du kannst dem Spiel als Zuschauer folgen."})]}),_.jsx("div",{className:"thermo-grid",style:{display:"none"},children:yn().map($=>{const S=Math.min($.temp/B*100,100),ne=$.name===M,Y=!!I.votes?.[$.name];return _.jsxs("div",{className:`thermo-item ${ne?"is-hotseat":""} ${Y?k.thermoItemAnswered:k.thermoItemNotAnswered}`,children:[_.jsxs("div",{className:k.thermoTop,children:[_.jsxs("span",{className:k.thermoTopLeft,children:[ne&&_.jsx("span",{children:""}),_.jsxs("span",{children:[$.emoji," ",$.name,$.name===m?" (Du)":""]})]}),_.jsxs("span",{className:`${k.thermoTemp} ${S>=100?k.thermoTempMax:""}`,children:[$.temp,"C"]})]}),_.jsx("div",{className:k.thermoBar,children:_.jsx("div",{className:k.thermoFill,style:{width:`${S}%`,height:"100%",background:S>=100?"linear-gradient(90deg, #ff0000, #ff4500)":S>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":S>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":S>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out"}})})]},$.name)})}),_.jsxs("div",{className:k.currentQuestionBox,children:[_.jsx("h4",{className:k.currentQuestionTitle,children:"Aktuelle Frage:"}),_.jsx("p",{className:k.currentQuestionText,children:I.currentQ?.q||"Lade Frage..."})]})]}):_.jsxs("div",{className:"screen active card",children:[_.jsx("div",{className:"thermo-grid",style:{display:"none"},children:yn().map($=>{const S=Math.min($.temp/B*100,100),ne=$.name===M,Y=!!I.votes?.[$.name];return _.jsxs("div",{className:`thermo-item ${ne?"is-hotseat":""}`,style:{border:Y?"2px solid #22c55e":"1px solid #333",borderRadius:"10px",padding:"12px",background:Y?"rgba(34, 197, 94, 0.2)":"rgba(22, 27, 34, 0.6)",opacity:Y?1:.5,transition:"opacity 0.3s ease"},children:[_.jsxs("div",{className:"thermo-top",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[_.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[ne&&_.jsx("span",{children:""}),_.jsxs("span",{children:[$.emoji," ",$.name]})]}),_.jsxs("span",{style:{fontWeight:"bold",color:S>=100?"#ff0000":"#fff"},children:[$.temp,"C"]})]}),_.jsx("div",{className:"thermo-bar",style:{width:"100%",height:"20px",background:"#333",borderRadius:"10px",overflow:"hidden",position:"relative"},children:_.jsx("div",{className:"thermo-fill",style:{width:`${S}%`,height:"100%",background:S>=100?"linear-gradient(90deg, #ff0000, #ff4500)":S>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":S>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":S>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out",boxShadow:S>=100?"0 0 10px rgba(255, 0, 0, 0.5)":"none"}})})]},$.name)})}),(()=>{const $=typeof M=="string"?M:M?.name||String(M||""),S=m===$,ne=$?yn().find(Ie=>Ie.name===$):null,Y=ne?.name||$||"Hotseat",Ae=ne?.emoji||"";return _.jsx("div",{style:{marginBottom:"15px",padding:"10px 15px",background:"rgba(22, 27, 34, 0.6)",border:"1px solid #333",borderRadius:"10px",textAlign:"center"},children:_.jsx("p",{style:{margin:0,color:"#aaa",fontSize:"0.95rem",fontWeight:S?"bold":"normal"},children:S?_.jsxs(_.Fragment,{children:[" Du bist gefragt! ",_.jsx("br",{}),"Antworte ehrlich - die anderen versuchen deine Wahl zu erraten."]}):_.jsxs(_.Fragment,{children:["Rate, was ",Ae," ",_.jsx("strong",{children:Y})," gewhlt hat."]})})})})(),_.jsx("h3",{className:k.gameQuestion,children:I.currentQ?.q||"Lade Frage..."}),I.currentQ?.category&&_.jsxs("div",{className:k.gameCategory,children:[fi[I.currentQ.category]?.emoji," ",fi[I.currentQ.category]?.name]}),I.votes?.[m]?_.jsxs("div",{className:k.voteSubmitted,children:[_.jsx("p",{className:k.voteSubmittedTitle,children:" Antwort abgesendet!"}),_.jsx("p",{className:k.voteSubmittedText,children:"Warte auf andere Spieler..."})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"option-row",children:[_.jsx("button",{className:`btn-option ${Xe==="A"?"selected":""}`,onClick:()=>Qr("A"),disabled:de,children:I.currentQ?.a||"A"}),_.jsx("button",{className:`btn-option ${Xe==="B"?"selected":""}`,onClick:()=>Qr("B"),disabled:de,children:I.currentQ?.b||"B"})]}),_.jsx("button",{className:`btn-primary ${k.submitButtonMargin}`,onClick:Ua,disabled:!Xe||de,children:" Antwort absenden"})]}),ae&&_.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:_.jsx("button",{className:"btn-text",style:{fontSize:"0.8em",color:"#ff4d4d",opacity:.8},onClick:async()=>{confirm("Wirklich zur Auswertung springen? Dies sollte nur genutzt werden, wenn das Spiel hngt.")&&await pt(Fe(s,"lobbies",O),{status:"result",lastHostActivity:zi()})},children:" Hngt? Weiter zur Auswertung"})})]})})(),u==="result"&&I&&(()=>{I.hotseat;const M=I.roundRecapShown??!1,B=I.config?.maxTemp||100,X=Object.keys(I.players||{}).filter(ne=>(I.players?.[ne]?.temp||0)<B),de=I.popupConfirmed||{};!(I.attackResults&&Object.keys(I.attackResults).length>0)||X.every(ne=>I.attackResults?.[ne]?de[ne]===!0:!0);const S=M;return _.jsxs("div",{className:"screen active card",children:[S&&_.jsx("h3",{className:k.resultTitle,children:" Zwischenergebnis"}),_.jsx("div",{className:"thermo-grid",style:{display:S?"grid":"none"},children:yn().sort((ne,Y)=>Y.temp-ne.temp).map(ne=>{const Y=I.config?.maxTemp||100,Ae=Math.min(ne.temp/Y*100,100);return _.jsxs("div",{className:`thermo-item ${k.resultThermoItem}`,children:[_.jsxs("div",{className:k.thermoTop,children:[_.jsxs("span",{children:[ne.emoji," ",ne.name,ne.name===m?" (Du)":""]}),_.jsxs("span",{className:`${k.thermoTemp} ${Ae>=100?k.thermoTempMax:""}`,children:[ne.temp,"C"]})]}),_.jsx("div",{className:k.thermoBar,children:_.jsx("div",{className:k.thermoFill,style:{width:`${Ae}%`,height:"100%",background:Ae>=100?"linear-gradient(90deg, #ff0000, #ff4500)":Ae>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":Ae>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":Ae>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out"}})})]},ne.name)})}),!S&&(()=>{const ne=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Y=I.votes?.[ne]?.choice,Ae=I.votes?.[m],Ie=!0,Re=m===ne;if(Re){const Ee=yn().filter(je=>je.name!==ne),ke=Ee.filter(je=>{const Pe=I.votes?.[je.name];return Pe&&String(Pe.choice)===String(Y)}).sort((je,Pe)=>je.name.localeCompare(Pe.name)),ut=Ee.filter(je=>{const Pe=I.votes?.[je.name];return!Pe||String(Pe.choice)!==String(Y)}).sort((je,Pe)=>je.name.localeCompare(Pe.name));return _.jsxs("div",{className:k.hotseatWaitContainer,children:[_.jsxs("div",{className:k.hotseatWaitBox,children:[_.jsx("p",{className:k.hotseatWaitTitle,children:" Warte bis alle Spieler ihre Hitze verteilt haben"}),_.jsx("p",{className:k.hotseatWaitSubtitle,children:"Die anderen Spieler greifen gerade an..."})]}),_.jsxs("div",{className:k.guessOverviewContainer,children:[ke.length>0&&_.jsxs("div",{className:k.guessOverviewSection,children:[_.jsx("h4",{className:k.guessOverviewTitle,style:{color:"#22c55e"},children:" Richtig geraten:"}),_.jsx("div",{className:k.guessOverviewList,children:ke.map(je=>_.jsx("div",{className:k.guessOverviewItem,style:{background:"rgba(34, 197, 94, 0.2)",border:"1px solid #22c55e"},children:_.jsxs("span",{children:[je.emoji," ",je.name]})},je.name))})]}),ut.length>0&&_.jsxs("div",{className:k.guessOverviewSection,children:[_.jsx("h4",{className:k.guessOverviewTitle,style:{color:"#ef4444"},children:" Falsch geraten:"}),_.jsx("div",{className:k.guessOverviewList,children:ut.map(je=>_.jsx("div",{className:k.guessOverviewItem,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid #ef4444"},children:_.jsxs("span",{children:[je.emoji," ",je.name]})},je.name))})]})]})]})}else if(Ae&&Y!==void 0&&Y!==null&&String(Ae.choice)===String(Y)){const Ee=I.attackDecisions||{},ke=Ee[m]===!0,ut=!ke&&Ie;return le.log(" [ATTACK SELECTION] Richtig geraten - Prfe Angriffsauswahl:",{roundId:I.roundId,myName:m,isPartyMode:Ie,localActionDone:ri,attackDecisions:Ee,myAttackDecision:Ee[m],hasAttackDecision:ke,showRewardChoice:Ms,showAttackSelection:Xi,showJokerShop:Os,isHotseat:Re,shouldShowAttackSelection:ut,shouldShowReward:!ke&&!Ie}),ut?_.jsxs("div",{className:k.correctGuessContainer,children:[_.jsx("p",{className:k.correctGuessTitle,children:" RICHTIG GERATEN!"}),_.jsx("p",{className:k.correctGuessSubtitle,children:"Zur Belohnung darfst du einen Spieler aufheizen"}),_.jsxs("div",{className:k.attackSelectionWrapper,children:[_.jsxs("div",{className:k.attackSelectionHeader,children:[_.jsx("span",{className:k.attackSelectionHeaderIcon,children:""}),_.jsx("span",{children:"Wen aufheizen?"})]}),_.jsx("div",{className:k.attackSelectionGrid,children:(()=>{typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");const je=I?.config?.maxTemp||100,Pe=yn();Pe.filter(We=>(I?.players?.[We.name]?.temp||0)<je).length;const xt=Pe.filter(We=>!(We.name===m||(I?.players?.[We.name]?.temp||0)>=je));return xt.length===0?_.jsx("div",{className:k.attackNoPlayersLarge,children:"Keine Spieler zum Angreifen verfgbar"},"no-players"):xt.map(We=>{const yt=20*((I.players?.[m]||{}).inventory?.includes("card_oil")?2:1);return _.jsxs("div",{onClick:()=>mr(We.name),className:k.attackPlayerCardLarge,children:[_.jsx("div",{className:k.attackPlayerEmojiLarge,children:We.emoji}),_.jsx("div",{className:k.attackPlayerNameLarge,children:We.name}),_.jsxs("div",{className:k.attackPlayerDmgLarge,children:["+",yt,""]})]},We.name)})})()})]})]}):_.jsxs("div",{className:k.rewardDecisionMade,children:[_.jsx("p",{className:k.rewardDecisionTitle,children:" RICHTIG GERATEN!"}),_.jsx("p",{className:k.rewardDecisionText,children:"Entscheidung getroffen. Warte auf andere Spieler..."})]})}else if(Ae&&Y!==void 0&&Y!==null&&String(Ae.choice)!==String(Y)){const Ee=I?.attackDecisions||{};return le.log(" [RESULT UI] Falsch geraten erkannt:",{myChoice:Ae.choice,truth:Y,isPartyMode:Ie,localActionDone:ri,hasAttackDecision:Ee[m]}),!ri&&Ee[m]&&Mn(!0),_.jsxs("div",{className:k.hotseatWaitContainer,children:[_.jsxs("div",{className:k.wrongAnswerContainer,children:[_.jsx("div",{className:k.wrongAnswerIcon,children:""}),_.jsx("p",{className:k.wrongAnswerTitleRed,children:"FALSCH GERATEN"}),_.jsx("p",{className:k.wrongAnswerTextWhite,children:"Du erhltst 10C Strafhitze."})]}),_.jsxs("div",{className:k.hotseatWaitBox,children:[_.jsx("p",{className:k.hotseatWaitTitle,children:" Warte bis alle Spieler ihre Hitze verteilt haben"}),_.jsx("p",{className:k.hotseatWaitSubtitle,children:"Die anderen Spieler greifen gerade an..."})]})]})}else return Ae&&Y==null?_.jsx("div",{className:k.resultStatusBox,children:_.jsx("p",{className:k.resultStatusText,children:"Du hast die Frage beantwortet. Warte auf die anderen Spieler..."})}):_.jsx("div",{className:k.resultStatusBox,children:_.jsx("p",{className:k.resultStatusTextAlt,children:" Keine Antwort abgegeben."})})})(),(()=>{const ne=I.players?.[m],Y=I.config?.maxTemp||100,Ae=(ne?.temp||0)>=Y,Ie=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Re=m===Ie,Ee=I.votes?.[Ie]?.choice,ke=I.votes?.[m],ut=ke&&Ee!==void 0&&String(ke.choice)===String(Ee),je=ke&&Ee!==void 0&&String(ke.choice)!==String(Ee),Rt=(I.attackDecisions||{})[m]===!0;if(!(S?ri||Re||Ae:(ri||Ae)&&!(!S&&ut&&!Rt&&!Re)&&!je&&!Re))return null;const ot=S?(I.ready||[]).includes(m)?" Bereit fr nchste Frage":" Nchste Frage":(I.ready||[]).includes(m)?" Nicht bereit":" Bereit";return _.jsx("button",{className:(I.ready||[]).includes(m)?"btn-secondary":"btn-primary",onClick:qa,disabled:Ae,style:{marginTop:"20px"},children:Ae?" Hitzkopf - Ausgeschieden":ot})})(),(()=>{const ne=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Y=m===ne,Ae=I.votes?.[ne]?.choice,Ie=I.votes?.[m],Re=Ie&&Ae!==void 0&&String(Ie.choice)===String(Ae),Ee=Ie&&Ae!==void 0&&String(Ie.choice)!==String(Ae),ut=(I.attackDecisions||{})[m]===!0;return!S&&Re&&!ut&&!Y||!S&&Ee||!S&&Y?null:_.jsx("div",{className:k.playerReadyList,children:(()=>{const Pe=I.config?.maxTemp||100,Rt=yn().filter(he=>(I.players?.[he.name]?.temp||0)<Pe),xt=I.ready||[],ot=[...Rt].sort((he,dn)=>he.name.localeCompare(dn.name)).map(he=>`${xt.includes(he.name)?"":""} ${he.emoji} ${he.name}`).join(", ");return _.jsx("div",{className:k.playerReadyText,children:ot})})()})})()]})})(),u==="winner"&&I&&_.jsxs("div",{className:`screen active card ${k.winnerScreen}`,children:[[...Array(50)].map((M,B)=>_.jsx("div",{style:{position:"absolute",width:"10px",height:"10px",background:["#ff4500","#ff8c00","#ffd700","#ff6b35","#ffa500"][Math.floor(Math.random()*5)],left:`${Math.random()*100}%`,top:"-10px",animation:`confettiFall ${2+Math.random()*3}s linear infinite`,animationDelay:`${Math.random()*2}s`,borderRadius:"50%",zIndex:1}},B)),_.jsx("h2",{className:k.winnerTitle,children:" Gewinner!"}),(()=>{const M=I.config?.maxTemp||100,B=Object.entries(I.players||{}).find(([X,de])=>(de.temp||0)<M);if(B){const[X,de]=B;return _.jsxs("div",{className:k.winnerCard,children:[_.jsx("div",{className:k.winnerEmoji,children:de.emoji||""}),_.jsx("p",{className:k.winnerName,children:X}),_.jsx("p",{className:k.winnerText,children:"ist cool geblieben und gewinnt diese Runde Hitzkopf! "}),_.jsxs("p",{className:k.winnerTemp,children:[de.temp||0,"C"]})]})}return null})(),_.jsxs("div",{className:k.winnerActions,children:[ae&&_.jsx("button",{onClick:_i,className:`btn-primary ${k.winnerButton}`,children:" Revanche starten"}),_.jsx("button",{onClick:Wr,className:`btn-secondary ${k.winnerButton}`,children:" Lobby verlassen"})]})]}),ki&&I&&I.hotseat&&_.jsx("div",{className:k.hotseatModalOverlay,onClick:Ut,children:_.jsxs("div",{className:k.hotseatModalContent,onClick:M=>M.stopPropagation(),children:[_.jsx("div",{className:k.hotseatModalIcon,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");return m===M?"":""})()}),m===I.hotseat?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:k.hotseatModalTitle,children:"Du bist gefragt!"}),_.jsx("div",{className:k.hotseatModalText,children:"Alle anderen mssen deine Antwort erraten."})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{className:k.hotseatModalHeader,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),B=I.players?.[M]?.emoji||"";return _.jsxs(_.Fragment,{children:[_.jsx("span",{className:k.hotseatModalEmoji,children:B}),_.jsx("span",{className:k.hotseatModalTitle,children:M})]})})()}),_.jsx("div",{className:k.hotseatModalText,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");return _.jsxs(_.Fragment,{children:["ist gefragt. Versuche ",M,"'s Antwort zu erraten."]})})()})]}),_.jsx("button",{className:`btn-primary ${k.hotseatModalButton}`,onClick:Ut,children:"Los geht's"})]})}),Q&&Cn&&I&&_.jsx("div",{className:k.attackModalOverlay,onClick:Qs,children:_.jsxs("div",{className:`${k.attackModalContent} ${Cn.totalDmg>0?k.attackModalContentDamage:k.attackModalContentNoDamage}`,onClick:M=>M.stopPropagation(),children:[_.jsx("div",{className:k.attackModalIcon,children:Cn.totalDmg>0?"":""}),_.jsx("div",{className:`${k.attackModalName} ${Cn.totalDmg>0?k.attackModalNameDamage:k.attackModalNameNoDamage}`,children:m}),_.jsx("div",{className:k.attackModalMessage,children:Cn.totalDmg>0?`Du wurdest aufgeheizt! Insgesamt ${Cn.totalDmg}C`:"Cool geblieben - Keiner hat dich aufgeheizt"}),Cn.totalDmg===0&&_.jsx("div",{className:k.attackModalNoDamage,children:"Du hast diese Runde keine Hitze erhalten"}),Cn.attackDetails&&Cn.attackDetails.length>0&&Cn.totalDmg>0&&_.jsxs("div",{className:k.attackModalDetails,children:[_.jsx("strong",{className:k.attackModalDetailsTitle,children:"Angriffe:"}),_.jsx("br",{}),Cn.attackDetails.filter(M=>!M.mirrored).map((M,B)=>_.jsxs("div",{className:k.attackModalDetailItem,children:[" ",M.attacker,": +",M.dmg,"C"]},B))]}),_.jsx("div",{className:k.attackModalBar,children:(()=>{const M=I.config?.maxTemp||100,B=I.players?.[m]?.temp||0,X=Math.min(B/M*100,100);return _.jsx("div",{className:`${k.attackModalBarFill} ${Cn.totalDmg>0?k.attackModalBarFillDamage:k.attackModalBarFillNoDamage}`,ref:de=>{de&&setTimeout(()=>{de.style.width=`${X}%`},100)}})})()}),_.jsxs("div",{className:`${k.attackModalTemp} ${Cn.totalDmg>0?k.attackModalTempDamage:k.attackModalTempNoDamage}`,children:[I.players?.[m]?.temp||0,"C"]}),_.jsx("button",{className:`btn-primary ${k.attackModalButton}`,onClick:Qs,children:"Verstanden"})]})}),nt&&Gn&&I&&_.jsx("div",{className:k.eliminationModalOverlay,onClick:()=>{et(!1),ps(null),s&&O&&pt(Fe(s,"lobbies",O),{eliminationInfo:di()}).catch(console.error)},children:_.jsxs("div",{className:k.eliminationModalContent,onClick:M=>M.stopPropagation(),children:[_.jsx("div",{className:k.eliminationModalLogoContainer,children:_.jsx("img",{src:Sb,alt:"Hitzkopf Logo",className:k.eliminationModalLogo})}),Gn===m?_.jsxs(_.Fragment,{children:[_.jsx("h2",{className:k.eliminationModalTitle,children:"Oh nein!"}),_.jsx("p",{className:k.eliminationModalText,children:"Du bist ein Hitzkopf und somit ab sofort raus!"})]}):_.jsxs(_.Fragment,{children:[_.jsx("h2",{className:k.eliminationModalTitle,children:Gn}),_.jsx("p",{className:k.eliminationModalText,children:"ist ein Hitzkopf und somit raus!"})]}),_.jsx("button",{className:`btn-primary ${k.eliminationModalButton}`,onClick:()=>{et(!1),ps(null),s&&O&&pt(Fe(s,"lobbies",O),{eliminationInfo:di()}).catch(console.error)},children:"Verstanden"})]})}),Oe&&_.jsx("div",{className:k.rulesModalOverlay,onClick:()=>Se(!1),children:_.jsxs("div",{className:k.rulesModalContent,onClick:M=>M.stopPropagation(),children:[_.jsxs("h2",{className:k.rulesModalHeader,children:[_.jsx("span",{className:k.rulesModalHeaderIcon,children:""}),_.jsx("span",{children:"Anleitung"})]}),_.jsxs("div",{className:k.rulesModalBody,children:[_.jsxs("div",{className:k.rulesModalSectionBox,children:[_.jsxs("div",{className:k.rulesModalSectionHeader,children:[_.jsx("span",{className:k.rulesModalSectionIcon,children:""}),_.jsx("strong",{className:k.rulesModalSectionTitle,children:"Ziel:"})]}),_.jsxs("p",{className:k.rulesModalSectionText,children:["Errate die Antworten deiner Freunde und bringe sie zum Kochen! ",_.jsx("br",{}),"Rtst du richtig, darfst du Hitze verteilen, liegst du falsch, erhltst du Strafhitze."]})]}),_.jsxs("div",{className:k.rulesModalSectionBox,children:[_.jsxs("div",{className:k.rulesModalSectionHeader,children:[_.jsx("span",{className:k.rulesModalSectionIcon,children:""}),_.jsx("strong",{className:k.rulesModalSectionTitle,children:"Verlierer:"})]}),_.jsx("p",{className:k.rulesModalSectionText,children:"Wer als erstes 100 erreicht ist ein Hitzkopf und fliegt raus."})]}),_.jsxs("div",{className:k.rulesModalSectionBox,children:[_.jsxs("div",{className:k.rulesModalSectionHeader,children:[_.jsx("span",{className:k.rulesModalSectionIcon,children:""}),_.jsx("strong",{className:k.rulesModalSectionTitle,children:"Gewinner:"})]}),_.jsx("p",{className:k.rulesModalSectionText,children:"Bewahrst du einen khlen Kopf, entscheidest du das Spiel fr dich."})]})]}),_.jsxs("button",{className:`btn-primary ${k.rulesModalButton}`,onClick:()=>Se(!1),children:[_.jsx("span",{children:"Verstanden"}),_.jsx("span",{children:""})]})]})})]})}const LM="_lobbySystem_1gg27_1",VM="_backButtonBottom_1gg27_23",jM="_screen_1gg27_67",PM="_title_1gg27_113",zM="_nameInput_1gg27_131",BM="_roomInput_1gg27_133",UM="_emojiGalleryWrapper_1gg27_185",qM="_emojiGallery_1gg27_185",HM="_emojiSpacer_1gg27_229",FM="_emojiCard_1gg27_239",GM="_selected_1gg27_269",KM="_emojiCharacter_1gg27_295",QM="_buttonGroup_1gg27_307",WM="_btnPrimary_1gg27_319",$M="_btnSecondary_1gg27_321",Un={lobbySystem:LM,backButtonBottom:VM,screen:jM,title:PM,nameInput:zM,roomInput:BM,emojiGalleryWrapper:UM,emojiGallery:qM,emojiSpacer:HM,emojiCard:FM,selected:GM,emojiCharacter:KM,buttonGroup:QM,btnPrimary:WM,btnSecondary:$M},YM=["","","","","","","","","","","","","","",""],Us=(()=>{const r=[...YM];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})(),XM=({onCreateLobby:r,onJoinLobby:e,storagePrefix:n="lobby",title:s="Lobby System",buttonText:l="Lobby erstellen",accentColor:u="#4ecdc4",onBack:f=null})=>{const[m,b]=te.useState("start"),[y,E]=te.useState(sessionStorage.getItem(`${n}_name`)||""),[A,V]=te.useState(()=>{const R=Math.floor(Us.length/2);return Us[R]}),[O,me]=te.useState(""),[ae,ge]=te.useState(Math.floor(Us.length/2)),I=te.useRef(null),xe=te.useRef(!1),Ve=te.useRef({x:0,y:0,time:0});te.useEffect(()=>{const R=I.current;if(!R)return;const N=()=>{xe.current=!0;const L=R.scrollLeft,U=R.scrollWidth/(Us.length+2),C=Math.round(L/U);ge(Math.max(0,Math.min(C,Us.length-1))),V(Us[Math.max(0,Math.min(C,Us.length-1))]),setTimeout(()=>{xe.current=!1},100)};return R.addEventListener("scroll",N),setTimeout(()=>{const L=R.scrollWidth/(Us.length+2);R.scrollLeft=ae*L},100),()=>R.removeEventListener("scroll",N)},[ae]);const mt=R=>{const N=R.target.value.slice(0,20);E(N),sessionStorage.setItem(`${n}_name`,N)},vt=R=>{const N=Us.indexOf(R);ge(N),V(R);const z=I.current;if(z){const L=z.scrollWidth/(Us.length+2);z.scrollTo({left:N*L,behavior:"smooth"})}},Qe=()=>{if(!y.trim()){alert("Bitte gib einen Namen ein!");return}sessionStorage.setItem(`${n}_name`,y),sessionStorage.setItem(`${n}_emoji`,A),r({name:y,emoji:A})},D=()=>{if(!y.trim()){alert("Bitte gib einen Namen ein!");return}if(!O.trim()){alert("Bitte gib einen Lobby-Code ein!");return}sessionStorage.setItem(`${n}_name`,y),sessionStorage.setItem(`${n}_emoji`,A),e({name:y,emoji:A,roomId:O.toUpperCase()})};return _.jsxs("div",{className:Un.lobbySystem,style:{"--accent-color":u},children:[m==="start"&&_.jsxs("div",{className:Un.screen,children:[_.jsx("h1",{className:Un.title,children:s}),_.jsx("input",{type:"text",value:y,onChange:mt,placeholder:"Dein Name",maxLength:20,autoComplete:"name",className:Un.nameInput}),_.jsx("div",{className:Un.emojiGalleryWrapper,children:_.jsxs("div",{ref:I,className:Un.emojiGallery,children:[_.jsx("div",{className:Un.emojiSpacer}),Us.map((R,N)=>{const z=N===ae;return _.jsx("div",{className:`${Un.emojiCard} ${z?Un.selected:""}`,onClick:()=>{xe.current||vt(R)},onTouchStart:L=>{Ve.current={x:L.touches[0].clientX,y:L.touches[0].clientY,time:Date.now()}},onTouchMove:L=>{if(Ve.current.x!==0){const U=Math.abs(L.touches[0].clientX-Ve.current.x),C=Math.abs(L.touches[0].clientY-Ve.current.y);(U>10||C>10)&&(xe.current=!0)}},onTouchEnd:()=>{setTimeout(()=>{Ve.current={x:0,y:0,time:0}},50)},children:_.jsx("div",{className:Un.emojiCharacter,children:R})},`${R}-${N}`)}),_.jsx("div",{className:Un.emojiSpacer})]})}),_.jsx("div",{className:Un.buttonGroup,children:_.jsx("button",{className:Un.btnPrimary,onClick:Qe,children:l})})]}),m==="join"&&_.jsxs("div",{className:Un.screen,children:[_.jsx("h1",{className:Un.title,children:"Lobby beitreten"}),_.jsx("input",{type:"text",value:O,onChange:R=>me(R.target.value.toUpperCase()),placeholder:"Lobby-Code",maxLength:6,className:Un.roomInput}),_.jsxs("div",{className:Un.buttonGroup,children:[_.jsx("button",{className:Un.btnPrimary,onClick:D,children:"Beitreten"}),_.jsx("button",{className:Un.btnSecondary,onClick:()=>b("start"),children:"Zurck"})]})]}),f&&_.jsx("button",{onClick:f,className:Un.backButtonBottom,children:" Zurck"})]})},gc="https://api.spotify.com/v1",bm="https://accounts.spotify.com";class ZM{constructor(){this.clientId="2d9c122237af4b2391ab504f72edfd70",this.clientSecret="dce2d4bdae5b4afc8f9c3e24b309bb72",this.redirectUri="http://localhost:5176/callback",this.accessToken=null,this.tokenExpiry=null,!this.clientId||!this.clientSecret?(console.warn(" Spotify Credentials fehlen! berprfe .env.local"),console.log("Client ID vorhanden:",!!this.clientId),console.log("Client Secret vorhanden:",!!this.clientSecret)):console.log(" Spotify Credentials geladen")}getAuthUrl(){const e=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative"].join(" "),n=new URLSearchParams({client_id:this.clientId,response_type:"code",redirect_uri:this.redirectUri,scope:e,show_dialog:"false"});return`${bm}/authorize?${n.toString()}`}async getAccessToken(e){const n=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:this.redirectUri}),s=await fetch(`${bm}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${this.clientId}:${this.clientSecret}`)},body:n.toString()});if(!s.ok)throw new Error("Failed to get access token");const l=await s.json();return this.accessToken=l.access_token,this.tokenExpiry=Date.now()+l.expires_in*1e3,l}async getClientCredentialsToken(){if(!this.clientId||!this.clientSecret){const n=new Error("Spotify Credentials fehlen! berprfe .env.local und starte Dev-Server neu.");throw n.code="MISSING_CREDENTIALS",n}const e=new URLSearchParams({grant_type:"client_credentials"});try{const n=await fetch(`${bm}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${this.clientId}:${this.clientSecret}`)},body:e.toString()});if(!n.ok){const l=await n.json().catch(()=>({}));console.error("Spotify API Fehler:",l);const u=new Error(`Spotify API Fehler (${n.status}): ${l.error_description||l.error||"Unbekannter Fehler"}`);throw u.code="SPOTIFY_API_ERROR",u.status=n.status,u}const s=await n.json();return this.accessToken=s.access_token,this.tokenExpiry=Date.now()+s.expires_in*1e3,console.log(" Spotify Token erfolgreich abgerufen"),s}catch(n){if(n.code==="MISSING_CREDENTIALS"||n.code==="SPOTIFY_API_ERROR")throw n;const s=new Error("Netzwerkfehler beim Abrufen des Spotify Tokens: "+n.message);throw s.code="NETWORK_ERROR",s}}async ensureValidToken(){(!this.accessToken||Date.now()>=this.tokenExpiry)&&await this.getClientCredentialsToken()}async searchTracks(e,n=10){await this.ensureValidToken();const s=new URLSearchParams({q:e,type:"track",limit:n.toString()}),l=await fetch(`${gc}/search?${s.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!l.ok)throw new Error("Failed to search tracks");return(await l.json()).tracks.items.map(f=>({id:`spotify_track_${f.id}`,spotifyId:f.id,title:f.name,artist:f.artists.map(m=>m.name).join(", "),album:f.album.name,type:"song",source:"spotify",spotifyUrl:f.external_urls.spotify,previewUrl:f.preview_url,imageUrl:f.album.images[0]?.url,duration:f.duration_ms,votes:{},addedAt:Date.now()}))}async searchAlbums(e,n=10){await this.ensureValidToken();const s=new URLSearchParams({q:e,type:"album",limit:n.toString()}),l=await fetch(`${gc}/search?${s.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!l.ok)throw new Error("Failed to search albums");return(await l.json()).albums.items.map(f=>({id:`spotify_album_${f.id}`,spotifyId:f.id,title:f.name,artist:f.artists.map(m=>m.name).join(", "),type:"album",source:"spotify",spotifyUrl:f.external_urls.spotify,imageUrl:f.images[0]?.url,releaseDate:f.release_date,totalTracks:f.total_tracks,votes:{},addedAt:Date.now()}))}async search(e,n=10){try{await this.ensureValidToken();const s=Math.min(Math.floor(n/2),10),l=new URLSearchParams({q:e,type:"track,album",limit:s.toString()}),u=await fetch(`${gc}/search?${l.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!u.ok){const E=await u.json().catch(()=>({}));console.error("Spotify Search Fehler:",E);const A=new Error(`Spotify Search Fehler (${u.status}): ${E.error?.message||"Unbekannter Fehler"}`);throw A.code="SEARCH_FAILED",A}const f=await u.json(),m=(f.tracks?.items||[]).map(E=>({id:`spotify_track_${E.id}`,spotifyId:E.id,title:E.name,artist:E.artists.map(A=>A.name).join(", "),album:E.album.name,type:"song",source:"spotify",spotifyUrl:E.external_urls.spotify,previewUrl:E.preview_url,imageUrl:E.album.images[0]?.url,duration:E.duration_ms,votes:{},addedAt:Date.now()})),b=(f.albums?.items||[]).map(E=>({id:`spotify_album_${E.id}`,spotifyId:E.id,title:E.name,artist:E.artists.map(A=>A.name).join(", "),type:"album",source:"spotify",spotifyUrl:E.external_urls.spotify,imageUrl:E.images[0]?.url,releaseDate:E.release_date,totalTracks:E.total_tracks,votes:{},addedAt:Date.now()})),y=[...m,...b];return console.log(` Spotify Suche erfolgreich: ${y.length} Ergebnisse fr "${e}"`),y}catch(s){throw console.error(" Spotify Suche fehlgeschlagen:",s),s}}async getTrack(e){await this.ensureValidToken();const n=await fetch(`${gc}/tracks/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to get track");return await n.json()}async getAlbum(e){await this.ensureValidToken();const n=await fetch(`${gc}/albums/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to get album");return await n.json()}}const JM=new ZM,ex="_musicVoter_1ffhk_1",tx="_backgroundOverlay_1ffhk_17",nx="_roomContainer_1ffhk_41",ix="_header_1ffhk_85",sx="_headerLeft_1ffhk_101",rx="_roomTitle_1ffhk_109",ax="_emoji_1ffhk_131",ox="_leaveButton_1ffhk_165",lx="_playersSection_1ffhk_201",cx="_sectionTitle_1ffhk_219",ux="_playersList_1ffhk_233",hx="_playerChip_1ffhk_245",dx="_playerEmoji_1ffhk_267",fx="_playerName_1ffhk_275",mx="_hostBadge_1ffhk_285",gx="_addSection_1ffhk_297",px="_addButton_1ffhk_309",yx="_playlistSection_1ffhk_347",_x="_emptyPlaylist_1ffhk_363",bx="_emptyIcon_1ffhk_375",vx="_emptyHint_1ffhk_387",Tx="_playlistItems_1ffhk_399",Ex="_playlistItem_1ffhk_399",Sx="_itemRank_1ffhk_445",wx="_itemInfo_1ffhk_471",Ax="_itemTitle_1ffhk_481",Rx="_itemArtist_1ffhk_501",Ix="_itemMeta_1ffhk_513",Cx="_itemVoting_1ffhk_525",kx="_voteButton_1ffhk_537",Nx="_voted_1ffhk_575",Dx="_voteScore_1ffhk_587",Mx="_removeButton_1ffhk_603",xx="_modalOverlay_1ffhk_653",Ox="_modal_1ffhk_653",Lx="_modalTitle_1ffhk_725",Vx="_addModeButtons_1ffhk_741",jx="_addModeButton_1ffhk_741",Px="_addModeIcon_1ffhk_795",zx="_addModeDesc_1ffhk_803",Bx="_manualForm_1ffhk_817",Ux="_input_1ffhk_831",qx="_spotifySearch_1ffhk_865",Hx="_searchBox_1ffhk_873",Fx="_searchButton_1ffhk_901",Gx="_searchLoading_1ffhk_947",Kx="_spinner_1ffhk_965",Qx="_searchResults_1ffhk_991",Wx="_searchResultItem_1ffhk_1013",$x="_resultImage_1ffhk_1049",Yx="_resultInfo_1ffhk_1065",Xx="_resultTitle_1ffhk_1075",Zx="_resultArtist_1ffhk_1093",Jx="_resultAlbum_1ffhk_1109",eO="_addResultButton_1ffhk_1127",tO="_noResults_1ffhk_1173",nO="_noResultsHint_1ffhk_1185",iO="_modalButtons_1ffhk_1217",sO="_btnPrimary_1ffhk_1227",rO="_btnSecondary_1ffhk_1229",aO="_lobbyStartScreen_1ffhk_1409",oO="_lobbyStartCard_1ffhk_1431",lO="_lobbyStartTitle_1ffhk_1455",cO="_lobbyStartSlogan_1ffhk_1481",uO="_lobbyStartButtons_1ffhk_1499",hO="_lobbyStartButton_1ffhk_1499",dO="_lobbyStartIcon_1ffhk_1555",fO="_browseLoading_1ffhk_1627",mO="_browseEmpty_1ffhk_1645",gO="_browseEmptyIcon_1ffhk_1663",pO="_lobbyList_1ffhk_1695",yO="_lobbyCard_1ffhk_1709",_O="_lobbyCardDelete_1ffhk_1745",bO="_lobbyCardHeader_1ffhk_1797",vO="_lobbyCardTitle_1ffhk_1813",TO="_lobbyCardIcon_1ffhk_1831",EO="_lobbyCardInfo_1ffhk_1857",SO="_lobbyCardStat_1ffhk_1867",wO="_refreshButton_1ffhk_1883",AO="_headerButtons_1ffhk_1931",RO="_closeButton_1ffhk_1941",IO="_lobbySystem_1ffhk_2003",CO="_screen_1ffhk_2011",kO="_emojiCard_1ffhk_2019",NO="_emojiCharacter_1ffhk_2029",DO="_backButtonBottom_1ffhk_2063",MO="_title_1ffhk_2131",xO="_nameInput_1ffhk_2149",OO="_emojiGalleryWrapper_1ffhk_2185",LO="_emojiGallery_1ffhk_2185",VO="_emojiSpacer_1ffhk_2229",jO="_selected_1ffhk_2269",PO="_buttonGroup_1ffhk_2307",zO="_lobbyListSection_1ffhk_2321",BO="_lobbyListTitle_1ffhk_2333",UO="_deleteAllButton_1ffhk_2349",ce={musicVoter:ex,backgroundOverlay:tx,roomContainer:nx,header:ix,headerLeft:sx,roomTitle:rx,emoji:ax,leaveButton:ox,playersSection:lx,sectionTitle:cx,playersList:ux,playerChip:hx,playerEmoji:dx,playerName:fx,hostBadge:mx,addSection:gx,addButton:px,playlistSection:yx,emptyPlaylist:_x,emptyIcon:bx,emptyHint:vx,playlistItems:Tx,playlistItem:Ex,itemRank:Sx,itemInfo:wx,itemTitle:Ax,itemArtist:Rx,itemMeta:Ix,itemVoting:Cx,voteButton:kx,voted:Nx,voteScore:Dx,removeButton:Mx,modalOverlay:xx,modal:Ox,modalTitle:Lx,addModeButtons:Vx,addModeButton:jx,addModeIcon:Px,addModeDesc:zx,manualForm:Bx,input:Ux,spotifySearch:qx,searchBox:Hx,searchButton:Fx,searchLoading:Gx,spinner:Kx,searchResults:Qx,searchResultItem:Wx,resultImage:$x,resultInfo:Yx,resultTitle:Xx,resultArtist:Zx,resultAlbum:Jx,addResultButton:eO,noResults:tO,noResultsHint:nO,modalButtons:iO,btnPrimary:sO,btnSecondary:rO,lobbyStartScreen:aO,lobbyStartCard:oO,lobbyStartTitle:lO,lobbyStartSlogan:cO,lobbyStartButtons:uO,lobbyStartButton:hO,lobbyStartIcon:dO,browseLoading:fO,browseEmpty:mO,browseEmptyIcon:gO,lobbyList:pO,lobbyCard:yO,lobbyCardDelete:_O,lobbyCardHeader:bO,lobbyCardTitle:vO,lobbyCardIcon:TO,lobbyCardInfo:EO,lobbyCardStat:SO,refreshButton:wO,headerButtons:AO,closeButton:RO,lobbySystem:IO,screen:CO,emojiCard:kO,emojiCharacter:NO,backButtonBottom:DO,title:MO,nameInput:xO,emojiGalleryWrapper:OO,emojiGallery:LO,emojiSpacer:VO,selected:jO,buttonGroup:PO,lobbyListSection:zO,lobbyListTitle:BO,deleteAllButton:UO},qO=["","","","","","","","","","","","","","",""],hs=(()=>{const r=[...qO];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})(),HO={apiKey:"AIzaSyBQ7c9JkZ3zWlyIjZLl1O1sJJOrKfYJbmA",authDomain:"hitzkopf-f0ea6.firebaseapp.com",projectId:"hitzkopf-f0ea6",storageBucket:"hitzkopf-f0ea6.firebasestorage.app",messagingSenderId:"828164655874",appId:"1:828164655874:web:1cab759bdb03bfb736101b"},FO=({onBack:r})=>{const[e,n]=te.useState(null),[s,l]=te.useState(null),[u,f]=te.useState(null),[m,b]=te.useState("lobby"),[y,E]=te.useState(sessionStorage.getItem("mv_name")||""),[A,V]=te.useState(()=>{const Q=sessionStorage.getItem("mv_emoji");if(Q)return Q;const be=Math.floor(hs.length/2);return hs[be]}),[O,me]=te.useState(()=>{const Q=sessionStorage.getItem("mv_emoji");if(Q){const be=hs.indexOf(Q);return be!==-1?be:Math.floor(hs.length/2)}return Math.floor(hs.length/2)}),[ae,ge]=te.useState(""),[I,xe]=te.useState(!1),[Ve,mt]=te.useState(null),[vt,Qe]=te.useState([]),[D,R]=te.useState(!1),[N,z]=te.useState([]),[L,U]=te.useState(""),[C,Kt]=te.useState([]),[ln,J]=te.useState(!1),[_e,De]=te.useState(null),[wt,At]=te.useState(!1),[j,ie]=te.useState(""),[pe,ve]=te.useState(""),[Be,at]=te.useState("song"),Je=te.useRef(null);te.useRef(null);const $t=te.useRef(null),Xe=te.useRef(!1),pn=te.useRef({x:0,y:0,time:0});te.useEffect(()=>{const Q=Jm(HO),be=GT(Q),Oe=dE(Q);return n(Q),f(be),l(Oe),xT(be).catch(console.error),()=>{Je.current&&Je.current()}},[]),te.useEffect(()=>{const Q=$t.current;if(!Q)return;const be=()=>{Xe.current=!0;const Se=Q.scrollLeft,nt=Q.scrollWidth/(hs.length+2),et=Math.round(Se/nt),Gn=Math.max(0,Math.min(et,hs.length-1));me(Gn),V(hs[Gn]),setTimeout(()=>{Xe.current=!1},100)};return Q.addEventListener("scroll",be),setTimeout(()=>{const Se=Q.scrollWidth/(hs.length+2);Q.scrollLeft=O*Se},100),()=>Q.removeEventListener("scroll",be)},[O]),te.useEffect(()=>{if(m==="browse"&&$t.current){const Q=$t.current;setTimeout(()=>{const be=Q.scrollWidth/(hs.length+2);Q.scrollLeft=O*be},150)}},[m]);const gs=Q=>{const be=Q.target.value.slice(0,20);E(be),sessionStorage.setItem("mv_name",be)},cr=Q=>{const be=hs.indexOf(Q);me(be),V(Q),sessionStorage.setItem("mv_emoji",Q);const Oe=$t.current;if(Oe){const Se=Oe.scrollWidth/(hs.length+2);Oe.scrollTo({left:be*Se,behavior:"smooth"})}},ri=Q=>{if(!y.trim()){alert("Bitte gib einen Namen ein!");return}sessionStorage.setItem("mv_name",y),sessionStorage.setItem("mv_emoji",A),qr({name:y,emoji:A,roomId:Q})},Mn=async({name:Q,emoji:be})=>{if(!s)return;const Oe=Os(),Se=Fe(s,"musicVoterLobbies",Oe);try{await RE(Se,{host:Q,createdAt:zi(),players:{[Q]:{emoji:be,joinedAt:zi()}},playlist:[],status:"active"}),E(Q),V(be),ge(Oe),xe(!0),b("room"),sn(Oe)}catch(nt){console.error("Fehler beim Erstellen der Playlist:",nt),alert("Fehler beim Erstellen der Playlist")}},qr=async({name:Q,emoji:be,roomId:Oe})=>{if(!s)return;const Se=Fe(s,"musicVoterLobbies",Oe);try{const nt=await Si(Se);if(!nt.exists()){alert("Playlist nicht gefunden!");return}const et=nt.data();if(et.players&&et.players[Q]){alert("Dieser Name ist bereits vergeben!");return}await pt(Se,{[`players.${Q}`]:{emoji:be,joinedAt:zi()}}),E(Q),V(be),ge(Oe),xe(!1),b("room"),sn(Oe)}catch(nt){console.error("Fehler beim Beitreten:",nt),alert("Fehler beim Beitreten der Playlist")}},Ii=async()=>{if(s){R(!0);try{const Q=Fm(s,"musicVoterLobbies"),be=Km(Q,Qm("status","==","active")),Oe=await Wm(be),Se=[];Oe.forEach(nt=>{const et=nt.data();Se.push({id:nt.id,host:et.host,playerCount:Object.keys(et.players||{}).length,createdAt:et.createdAt,playlist:et.playlist||[]})}),Se.sort((nt,et)=>nt.createdAt?et.createdAt?et.createdAt.toMillis()-nt.createdAt.toMillis():-1:1),Qe(Se),console.log(` ${Se.length} offene Lobbies geladen`)}catch(Q){console.error("Fehler beim Laden der Lobbies:",Q),Qe([])}finally{R(!1)}}},ur=async(Q,be,Oe)=>{if(Oe.stopPropagation(),!window.confirm(`Playlist von ${be} (${Q}) wirklich lschen?

Diese Aktion kann nicht rckgngig gemacht werden!`)||!s)return;const nt=Fe(s,"musicVoterLobbies",Q);try{await ul(nt),console.log(` Playlist ${Q} gelscht`),Qe(et=>et.filter(Gn=>Gn.id!==Q))}catch(et){console.error("Fehler beim Lschen:",et),alert("Fehler beim Lschen der Playlist: "+(et.message||"Unbekannter Fehler"))}},hr=async()=>{if(!(!window.confirm(`ALLE ${vt.length} Playlists wirklich lschen?

 WARNUNG: Diese Aktion kann NICHT rckgngig gemacht werden!
Alle Zuhrer werden entfernt!`)||!window.confirm(`Bist du dir WIRKLICH sicher?

Dies wird alle Playlists unwiderruflich lschen!`))&&s)try{const Oe=vt.map(Se=>ul(Fe(s,"musicVoterLobbies",Se.id)));await Promise.all(Oe),console.log(` Alle ${vt.length} Playlists gelscht`),Qe([]),alert("Alle Playlists wurden gelscht!")}catch(Oe){console.error("Fehler beim Lschen aller Playlists:",Oe),alert("Fehler beim Lschen: "+(Oe.message||"Unbekannter Fehler")),Ii()}},cn=async()=>{if(!I||!s||!ae){alert("Nur der Host kann die Playlist schlieen!");return}if(!window.confirm("Playlist wirklich schlieen? Alle Zuhrer werden entfernt!"))return;const be=Fe(s,"musicVoterLobbies",ae);try{await ul(be),console.log(" Playlist geschlossen"),Je.current&&Je.current(),b("lobby"),ge(""),E(""),V(""),xe(!1),mt(null),z([])}catch(Oe){console.error("Fehler beim Schlieen:",Oe),alert("Fehler beim Schlieen der Playlist")}},sn=Q=>{if(!s)return;const be=Fe(s,"musicVoterLobbies",Q),Oe=IE(be,Se=>{if(Se.exists()){const nt=Se.data();mt(nt),z(nt.playlist||[])}else alert("Playlist wurde geschlossen"),Yi()});Je.current=Oe},Yi=async()=>{if(Je.current&&Je.current(),s&&ae&&y){const Q=Fe(s,"musicVoterLobbies",ae);try{await pt(Q,{[`players.${y}`]:di()}),console.log(` ${y} hat die Lobby verlassen`)}catch(be){console.error("Fehler beim Verlassen:",be)}}b("lobby"),ge(""),E(""),V(""),xe(!1),mt(null),z([])},za=async()=>{if(!j.trim()){alert("Bitte gib einen Titel ein!");return}const Q={id:`manual_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:j,artist:pe||"Unbekannt",type:Be,source:"manual",votes:{},addedBy:y,addedAt:Date.now()};await Ms(Q),ie(""),ve(""),At(!1)},Ms=async Q=>{if(!s||!ae){console.error(" Hinzufgen fehlgeschlagen: DB oder RoomID fehlt",{db:!!s,roomId:ae}),alert("Fehler: Nicht mit Lobby verbunden");return}console.log(" Versuche Song hinzuzufgen:",Q.title);const be=Object.keys(Q).reduce((Se,nt)=>(Q[nt]!==void 0&&(Se[nt]=Q[nt]),Se),{});console.log(" Bereinigtes Item:",be);const Oe=Fe(s,"musicVoterLobbies",ae);try{await pt(Oe,{playlist:il(be)}),console.log(" Song erfolgreich hinzugefgt:",Q.title)}catch(Se){console.error(" Fehler beim Hinzufgen:",Se),console.error("Fehler Details:",{code:Se.code,message:Se.message,roomId:ae,item:Q.title}),alert("Fehler beim Hinzufgen: "+(Se.message||"Unbekannter Fehler"))}},Sn=async(Q,be)=>{if(!s||!ae||!y)return;const Oe=Fe(s,"musicVoterLobbies",ae);try{const et=((await Si(Oe)).data().playlist||[]).map(Gn=>{if(Gn.id===Q){const ps=Gn.votes?.[y]||0,Cn=be==="up"?1:be==="down"?-1:0;return{...Gn,votes:{...Gn.votes,[y]:ps===Cn?0:Cn}}}return Gn});await pt(Oe,{playlist:et})}catch(Se){console.error("Fehler beim Voten:",Se)}},Xi=async Q=>{if(!s||!ae)return;const be=N.find(nt=>nt.id===Q);if(!be)return;if(!I&&be.addedBy!==y){alert("Nur der Host oder der Ersteller kann diesen Eintrag lschen!");return}if(!window.confirm(`"${be.title}" wirklich aus der Playlist entfernen?`))return;const Se=Fe(s,"musicVoterLobbies",ae);try{const nt=N.filter(et=>et.id!==Q);await pt(Se,{playlist:nt})}catch(nt){console.error("Fehler beim Entfernen:",nt)}},xs=async()=>{if(L.trim()){J(!0);try{const Q=await JM.search(L,10);Kt(Q),Q.length===0&&console.log("Keine Ergebnisse fr:",L)}catch(Q){console.error("Spotify Suche fehlgeschlagen:",Q);let be=`Spotify Suche fehlgeschlagen.

`;Q.message?.includes("Failed to get")?(be+=`Credentials Problem:
`,be+=`1. berprfe .env.local Datei
`,be+=`2. Dev-Server neu starten (wichtig!)
`,be+="3. Spotify Developer Dashboard prfen"):Q.message?.includes("network")?be+="Netzwerkproblem - Internetverbindung prfen":be+="Fehler: "+Q.message,alert(be),Kt([])}finally{J(!1)}}},Os=()=>{const Q="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let be="";for(let Oe=0;Oe<6;Oe++)be+=Q.charAt(Math.floor(Math.random()*Q.length));return be},Ci=Q=>Q.votes?Object.values(Q.votes).reduce((be,Oe)=>be+Oe,0):0,ki=[...N].sort((Q,be)=>{const Oe=Ci(Q),Se=Ci(be);return Se!==Oe?Se-Oe:(Q.addedAt||0)-(be.addedAt||0)}),Gs=Q=>Q===1?"#51cf66":Q===-1?"#ff6b6b":"transparent";return _.jsxs("div",{className:ce.musicVoter,children:[_.jsx("div",{className:ce.backgroundOverlay}),m==="lobby"&&_.jsxs("div",{className:ce.lobbyStartScreen,children:[_.jsxs("div",{className:ce.lobbyStartCard,children:[_.jsxs("h1",{className:ce.lobbyStartTitle,children:[_.jsx("span",{className:ce.emoji,children:""}),"Amplify"]}),_.jsx("p",{className:ce.lobbyStartSlogan,children:"Gemeinsam den Ton angeben"}),_.jsxs("div",{className:ce.lobbyStartButtons,children:[_.jsxs("button",{className:ce.lobbyStartButton,onClick:()=>b("create"),children:[_.jsx("span",{className:ce.lobbyStartIcon,children:""}),_.jsx("span",{children:"Playlist erstellen"})]}),_.jsxs("button",{className:ce.lobbyStartButton,onClick:()=>{b("browse"),Ii()},children:[_.jsx("span",{className:ce.lobbyStartIcon,children:""}),_.jsx("span",{children:"Playlist beitreten"})]})]})]}),_.jsx("button",{onClick:r,className:ce.backButtonBottom,children:" Zurck"})]}),m==="create"&&_.jsx(XM,{onCreateLobby:Mn,onJoinLobby:()=>{},storagePrefix:"mv",title:"Playlist erstellen",buttonText:"Playlist erstellen",accentColor:"#4ecdc4",onBack:()=>b("lobby")}),m==="browse"&&_.jsxs("div",{className:ce.lobbySystem,style:{"--accent-color":"#4ecdc4"},children:[_.jsxs("div",{className:ce.screen,children:[_.jsx("h1",{className:ce.title,children:"Playlist beitreten"}),_.jsx("input",{type:"text",value:y,onChange:gs,placeholder:"Dein Name",maxLength:20,autoComplete:"name",className:ce.nameInput}),_.jsx("div",{className:ce.emojiGalleryWrapper,children:_.jsxs("div",{ref:$t,className:ce.emojiGallery,children:[_.jsx("div",{className:ce.emojiSpacer}),hs.map((Q,be)=>{const Oe=be===O;return _.jsx("div",{className:`${ce.emojiCard} ${Oe?ce.selected:""}`,onClick:()=>{Xe.current||cr(Q)},onTouchStart:Se=>{pn.current={x:Se.touches[0].clientX,y:Se.touches[0].clientY,time:Date.now()}},onTouchMove:Se=>{if(pn.current.x!==0){const nt=Math.abs(Se.touches[0].clientX-pn.current.x),et=Math.abs(Se.touches[0].clientY-pn.current.y);(nt>10||et>10)&&(Xe.current=!0)}},onTouchEnd:()=>{setTimeout(()=>{pn.current={x:0,y:0,time:0}},50)},children:_.jsx("div",{className:ce.emojiCharacter,children:Q})},`${Q}-${be}`)}),_.jsx("div",{className:ce.emojiSpacer})]})}),_.jsxs("div",{className:ce.lobbyListSection,children:[_.jsx("h2",{className:ce.lobbyListTitle,children:"Offene Playlists"}),D&&_.jsxs("div",{className:ce.browseLoading,children:[_.jsx("div",{className:ce.spinner}),_.jsx("p",{children:"Lade Playlists..."})]}),!D&&vt.length===0&&_.jsxs("div",{className:ce.browseEmpty,children:[_.jsx("div",{className:ce.browseEmptyIcon,children:""}),_.jsx("p",{children:"Keine Playlists gefunden"})]}),!D&&vt.length>0&&_.jsx("div",{className:ce.lobbyList,children:vt.map(Q=>_.jsxs("div",{className:ce.lobbyCard,onClick:()=>ri(Q.id),children:[_.jsx("button",{className:ce.lobbyCardDelete,onClick:be=>ur(Q.id,Q.host,be),title:"Playlist lschen",children:""}),_.jsx("div",{className:ce.lobbyCardHeader,children:_.jsxs("div",{className:ce.lobbyCardTitle,children:[_.jsx("span",{className:ce.lobbyCardIcon,children:""}),_.jsxs("span",{children:["Playlist von ",Q.host]})]})}),_.jsxs("div",{className:ce.lobbyCardInfo,children:[_.jsxs("div",{className:ce.lobbyCardStat,children:[_.jsx("span",{children:""}),_.jsxs("span",{children:[Q.playerCount," Zuhrer"]})]}),_.jsxs("div",{className:ce.lobbyCardStat,children:[_.jsx("span",{children:""}),_.jsxs("span",{children:[Q.playlist.length," Songs"]})]})]})]},Q.id))})]}),_.jsxs("div",{className:ce.buttonGroup,children:[_.jsx("button",{className:ce.refreshButton,onClick:Ii,disabled:D,children:" Aktualisieren"}),vt.length>0&&_.jsx("button",{className:ce.deleteAllButton,onClick:hr,children:" Alle Playlists lschen"})]})]}),_.jsx("button",{onClick:()=>b("lobby"),className:ce.backButtonBottom,children:" Zurck"})]}),m==="room"&&Ve&&_.jsxs("div",{className:ce.roomContainer,children:[_.jsxs("div",{className:ce.header,children:[_.jsx("div",{className:ce.headerLeft,children:_.jsxs("h1",{className:ce.roomTitle,children:[_.jsx("span",{className:ce.emoji,children:""}),"Amplify"]})}),_.jsxs("div",{className:ce.headerButtons,children:[I&&_.jsx("button",{className:ce.closeButton,onClick:cn,title:"Playlist schlieen",children:"Schlieen"}),_.jsx("button",{className:ce.leaveButton,onClick:Yi,children:"Verlassen"})]})]}),_.jsxs("div",{className:ce.playersSection,children:[_.jsxs("h3",{className:ce.sectionTitle,children:["Zuhrer (",Object.keys(Ve.players||{}).length,")"]}),_.jsx("div",{className:ce.playersList,children:Object.entries(Ve.players||{}).map(([Q,be])=>_.jsxs("div",{className:ce.playerChip,children:[_.jsx("span",{className:ce.playerEmoji,children:be.emoji}),_.jsx("span",{className:ce.playerName,children:Q}),Q===Ve.host&&_.jsx("span",{className:ce.hostBadge,children:""})]},Q))})]}),_.jsx("div",{className:ce.addSection,children:_.jsx("button",{className:ce.addButton,onClick:()=>At(!0),children:"+ Song/Album hinzufgen"})}),_.jsxs("div",{className:ce.playlistSection,children:[_.jsxs("h3",{className:ce.sectionTitle,children:["Playlist (",ki.length,")"]}),ki.length===0?_.jsxs("div",{className:ce.emptyPlaylist,children:[_.jsx("div",{className:ce.emptyIcon,children:""}),_.jsx("p",{children:"Noch keine Songs in der Playlist"}),_.jsx("p",{className:ce.emptyHint,children:"Fge Songs hinzu, um abzustimmen!"})]}):_.jsx("div",{className:ce.playlistItems,children:ki.map((Q,be)=>{const Oe=Ci(Q),Se=Q.votes?.[y]||0;return _.jsxs("div",{className:ce.playlistItem,style:{"--item-color":Gs(Se)},children:[(I||Q.addedBy===y)&&_.jsx("button",{className:ce.removeButton,onClick:()=>Xi(Q.id),title:"Entfernen",children:""}),_.jsxs("div",{className:ce.itemRank,children:["#",be+1]}),_.jsxs("div",{className:ce.itemInfo,children:[_.jsxs("div",{className:ce.itemTitle,children:[Q.type==="album"&&" ",Q.title]}),_.jsx("div",{className:ce.itemArtist,children:Q.artist}),_.jsxs("div",{className:ce.itemMeta,children:["von ",Q.addedBy,Q.source==="spotify"&&"  Spotify"]})]}),_.jsxs("div",{className:ce.itemVoting,children:[_.jsx("button",{className:`${ce.voteButton} ${Se===1?ce.voted:""}`,onClick:()=>Sn(Q.id,"up"),children:""}),_.jsxs("div",{className:ce.voteScore,children:[Oe>0?"+":"",Oe]}),_.jsx("button",{className:`${ce.voteButton} ${Se===-1?ce.voted:""}`,onClick:()=>Sn(Q.id,"down"),children:""})]})]},Q.id)})})]})]}),wt&&_.jsx("div",{className:ce.modalOverlay,onClick:()=>At(!1),children:_.jsxs("div",{className:ce.modal,onClick:Q=>Q.stopPropagation(),children:[_.jsx("h2",{className:ce.modalTitle,children:"Hinzufgen"}),!_e&&_.jsxs("div",{className:ce.addModeButtons,children:[_.jsxs("button",{className:ce.addModeButton,onClick:()=>De("spotify"),children:[_.jsx("span",{className:ce.addModeIcon,children:""}),_.jsx("span",{children:"Spotify"}),_.jsx("p",{className:ce.addModeDesc,children:"Suche nach Songs auf Spotify"})]}),_.jsxs("button",{className:ce.addModeButton,onClick:()=>De("manual"),children:[_.jsx("span",{className:ce.addModeIcon,children:""}),_.jsx("span",{children:"Manuell"}),_.jsx("p",{className:ce.addModeDesc,children:"Eigenen Song eingeben"})]})]}),_e==="manual"&&_.jsxs("div",{className:ce.manualForm,children:[_.jsxs("select",{value:Be,onChange:Q=>at(Q.target.value),className:ce.input,children:[_.jsx("option",{value:"song",children:"Song"}),_.jsx("option",{value:"album",children:"Album"})]}),_.jsx("input",{type:"text",value:j,onChange:Q=>ie(Q.target.value),placeholder:"Titel",className:ce.input}),_.jsx("input",{type:"text",value:pe,onChange:Q=>ve(Q.target.value),placeholder:"Knstler (optional)",className:ce.input}),_.jsx("button",{className:ce.btnPrimary,onClick:za,children:"Hinzufgen"})]}),_e==="spotify"&&_.jsxs("div",{className:ce.spotifySearch,children:[_.jsxs("div",{className:ce.searchBox,children:[_.jsx("input",{type:"text",value:L,onChange:Q=>U(Q.target.value),onKeyPress:Q=>{Q.key==="Enter"&&xs()},placeholder:"Song oder Album suchen...",className:ce.input}),_.jsx("button",{className:ce.searchButton,onClick:xs,disabled:ln||!L.trim(),children:ln?" Suche...":" Suchen"})]}),ln&&_.jsxs("div",{className:ce.searchLoading,children:[_.jsx("div",{className:ce.spinner}),_.jsx("p",{children:"Durchsuche Spotify..."})]}),!ln&&C.length>0&&_.jsx("div",{className:ce.searchResults,children:C.map(Q=>_.jsxs("div",{className:ce.searchResultItem,onClick:async()=>{try{const be={...Q,addedBy:y,votes:{}};console.log(" Fge hinzu:",Q.title),await Ms(be),At(!1),De(null),U(""),Kt([])}catch(be){console.error("Fehler beim Klick:",be)}},children:[Q.imageUrl&&_.jsx("img",{src:Q.imageUrl,alt:Q.title,className:ce.resultImage}),_.jsxs("div",{className:ce.resultInfo,children:[_.jsxs("div",{className:ce.resultTitle,children:[Q.type==="album"&&" ",Q.title]}),_.jsx("div",{className:ce.resultArtist,children:Q.artist}),Q.album&&Q.type==="song"&&_.jsx("div",{className:ce.resultAlbum,children:Q.album})]}),_.jsx("button",{className:ce.addResultButton,children:"+"})]},Q.id))}),!ln&&L&&C.length===0&&_.jsxs("div",{className:ce.noResults,children:[_.jsx("p",{children:"Keine Ergebnisse gefunden"}),_.jsx("p",{className:ce.noResultsHint,children:"Versuche einen anderen Suchbegriff"})]})]}),_.jsxs("div",{className:ce.modalButtons,children:[_e&&_.jsx("button",{className:ce.btnSecondary,onClick:()=>De(null),children:"Zurck"}),_.jsx("button",{className:ce.btnSecondary,onClick:()=>{At(!1),De(null),ie(""),ve("")},children:"Abbrechen"})]})]})})]})};function GO(){const[r,e]=te.useState(null),n=l=>{e(l)},s=()=>{e(null)};return _.jsxs("div",{className:"App",children:[!r&&_.jsx(L1,{onSelectProject:n}),r==="hitzkopf"&&_.jsx(OM,{onBack:s}),r==="musicvoter"&&_.jsx(FO,{onBack:s})]})}g1.createRoot(document.getElementById("root")).render(_.jsx(te.StrictMode,{children:_.jsx(GO,{})}));
