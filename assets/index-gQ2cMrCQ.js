(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var im={exports:{}},gc={};var gb;function lw(){if(gb)return gc;gb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var m in l)m!=="key"&&(c[m]=l[m])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return gc.Fragment=e,gc.jsx=n,gc.jsxs=n,gc}var pb;function cw(){return pb||(pb=1,im.exports=lw()),im.exports}var p=cw(),sm={exports:{}},ot={};var yb;function uw(){if(yb)return ot;yb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),V=Symbol.iterator;function O(j){return j===null||typeof j!="object"?null:(j=V&&j[V]||j["@@iterator"],typeof j=="function"?j:null)}var pe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,he={};function I(j,re,ye){this.props=j,this.context=re,this.refs=he,this.updater=ye||pe}I.prototype.isReactComponent={},I.prototype.setState=function(j,re){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,re,"setState")},I.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Ae(){}Ae.prototype=I.prototype;function Le(j,re,ye){this.props=j,this.context=re,this.refs=he,this.updater=ye||pe}var lt=Le.prototype=new Ae;lt.constructor=Le,de(lt,I.prototype),lt.isPureReactComponent=!0;var jt=Array.isArray;function qe(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(j,re,ye){var Se=ye.ref;return{$$typeof:r,type:j,key:re,ref:Se!==void 0?Se:null,props:ye}}function z(j,re){return N(j.type,re,j.props)}function L(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function B(j){var re={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ye){return re[ye]})}var C=/\/+/g;function Kt(j,re){return typeof j=="object"&&j!==null&&j.key!=null?B(""+j.key):re.toString(36)}function En(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(qe,qe):(j.status="pending",j.then(function(re){j.status==="pending"&&(j.status="fulfilled",j.value=re)},function(re){j.status==="pending"&&(j.status="rejected",j.reason=re)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function te(j,re,ye,Se,je){var it=typeof j;(it==="undefined"||it==="boolean")&&(j=null);var ct=!1;if(j===null)ct=!0;else switch(it){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(j.$$typeof){case r:case e:ct=!0;break;case S:return ct=j._init,te(ct(j._payload),re,ye,Se,je)}}if(ct)return je=je(j),ct=Se===""?"."+Kt(j,0):Se,jt(je)?(ye="",ct!=null&&(ye=ct.replace(C,"$&/")+"/"),te(je,re,ye,"",function(bn){return bn})):je!=null&&(L(je)&&(je=z(je,ye+(je.key==null||j&&j.key===je.key?"":(""+je.key).replace(C,"$&/")+"/")+ct)),re.push(je)),1;ct=0;var un=Se===""?".":Se+":";if(jt(j))for(var We=0;We<j.length;We++)Se=j[We],it=un+Kt(Se,We),ct+=te(Se,re,ye,it,je);else if(We=O(j),typeof We=="function")for(j=We.call(j),We=0;!(Se=j.next()).done;)Se=Se.value,it=un+Kt(Se,We++),ct+=te(Se,re,ye,it,je);else if(it==="object"){if(typeof j.then=="function")return te(En(j),re,ye,Se,je);throw re=String(j),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ct}function be(j,re,ye){if(j==null)return j;var Se=[],je=0;return te(j,Se,"","",function(it){return re.call(ye,it,je++)}),Se}function Ve(j){if(j._status===-1){var re=j._result;re=re(),re.then(function(ye){(j._status===0||j._status===-1)&&(j._status=1,j._result=ye)},function(ye){(j._status===0||j._status===-1)&&(j._status=2,j._result=ye)}),j._status===-1&&(j._status=0,j._result=re)}if(j._status===1)return j._result.default;throw j._result}var yt=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},zt={map:be,forEach:function(j,re,ye){be(j,function(){re.apply(this,arguments)},ye)},count:function(j){var re=0;return be(j,function(){re++}),re},toArray:function(j){return be(j,function(re){return re})||[]},only:function(j){if(!L(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ot.Activity=A,ot.Children=zt,ot.Component=I,ot.Fragment=n,ot.Profiler=l,ot.PureComponent=Le,ot.StrictMode=s,ot.Suspense=b,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ot.__COMPILER_RUNTIME={__proto__:null,c:function(j){return D.H.useMemoCache(j)}},ot.cache=function(j){return function(){return j.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(j,re,ye){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Se=de({},j.props),je=j.key;if(re!=null)for(it in re.key!==void 0&&(je=""+re.key),re)!R.call(re,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&re.ref===void 0||(Se[it]=re[it]);var it=arguments.length-2;if(it===1)Se.children=ye;else if(1<it){for(var ct=Array(it),un=0;un<it;un++)ct[un]=arguments[un+2];Se.children=ct}return N(j.type,je,Se)},ot.createContext=function(j){return j={$$typeof:f,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},ot.createElement=function(j,re,ye){var Se,je={},it=null;if(re!=null)for(Se in re.key!==void 0&&(it=""+re.key),re)R.call(re,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(je[Se]=re[Se]);var ct=arguments.length-2;if(ct===1)je.children=ye;else if(1<ct){for(var un=Array(ct),We=0;We<ct;We++)un[We]=arguments[We+2];je.children=un}if(j&&j.defaultProps)for(Se in ct=j.defaultProps,ct)je[Se]===void 0&&(je[Se]=ct[Se]);return N(j,it,je)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(j){return{$$typeof:m,render:j}},ot.isValidElement=L,ot.lazy=function(j){return{$$typeof:S,_payload:{_status:-1,_result:j},_init:Ve}},ot.memo=function(j,re){return{$$typeof:_,type:j,compare:re===void 0?null:re}},ot.startTransition=function(j){var re=D.T,ye={};D.T=ye;try{var Se=j(),je=D.S;je!==null&&je(ye,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(qe,yt)}catch(it){yt(it)}finally{re!==null&&ye.types!==null&&(re.types=ye.types),D.T=re}},ot.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ot.use=function(j){return D.H.use(j)},ot.useActionState=function(j,re,ye){return D.H.useActionState(j,re,ye)},ot.useCallback=function(j,re){return D.H.useCallback(j,re)},ot.useContext=function(j){return D.H.useContext(j)},ot.useDebugValue=function(){},ot.useDeferredValue=function(j,re){return D.H.useDeferredValue(j,re)},ot.useEffect=function(j,re){return D.H.useEffect(j,re)},ot.useEffectEvent=function(j){return D.H.useEffectEvent(j)},ot.useId=function(){return D.H.useId()},ot.useImperativeHandle=function(j,re,ye){return D.H.useImperativeHandle(j,re,ye)},ot.useInsertionEffect=function(j,re){return D.H.useInsertionEffect(j,re)},ot.useLayoutEffect=function(j,re){return D.H.useLayoutEffect(j,re)},ot.useMemo=function(j,re){return D.H.useMemo(j,re)},ot.useOptimistic=function(j,re){return D.H.useOptimistic(j,re)},ot.useReducer=function(j,re,ye){return D.H.useReducer(j,re,ye)},ot.useRef=function(j){return D.H.useRef(j)},ot.useState=function(j){return D.H.useState(j)},ot.useSyncExternalStore=function(j,re,ye){return D.H.useSyncExternalStore(j,re,ye)},ot.useTransition=function(){return D.H.useTransition()},ot.version="19.2.0",ot}var _b;function Xm(){return _b||(_b=1,sm.exports=uw()),sm.exports}var ee=Xm(),rm={exports:{}},pc={},am={exports:{}},om={};var bb;function hw(){return bb||(bb=1,(function(r){function e(te,be){var Ve=te.length;te.push(be);e:for(;0<Ve;){var yt=Ve-1>>>1,zt=te[yt];if(0<l(zt,be))te[yt]=be,te[Ve]=zt,Ve=yt;else break e}}function n(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var be=te[0],Ve=te.pop();if(Ve!==be){te[0]=Ve;e:for(var yt=0,zt=te.length,j=zt>>>1;yt<j;){var re=2*(yt+1)-1,ye=te[re],Se=re+1,je=te[Se];if(0>l(ye,Ve))Se<zt&&0>l(je,ye)?(te[yt]=je,te[Se]=Ve,yt=Se):(te[yt]=ye,te[re]=Ve,yt=re);else if(Se<zt&&0>l(je,Ve))te[yt]=je,te[Se]=Ve,yt=Se;else break e}}return be}function l(te,be){var Ve=te.sortIndex-be.sortIndex;return Ve!==0?Ve:te.id-be.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var b=[],_=[],S=1,A=null,V=3,O=!1,pe=!1,de=!1,he=!1,I=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,Le=typeof setImmediate<"u"?setImmediate:null;function lt(te){for(var be=n(_);be!==null;){if(be.callback===null)s(_);else if(be.startTime<=te)s(_),be.sortIndex=be.expirationTime,e(b,be);else break;be=n(_)}}function jt(te){if(de=!1,lt(te),!pe)if(n(b)!==null)pe=!0,qe||(qe=!0,B());else{var be=n(_);be!==null&&En(jt,be.startTime-te)}}var qe=!1,D=-1,R=5,N=-1;function z(){return he?!0:!(r.unstable_now()-N<R)}function L(){if(he=!1,qe){var te=r.unstable_now();N=te;var be=!0;try{e:{pe=!1,de&&(de=!1,Ae(D),D=-1),O=!0;var Ve=V;try{t:{for(lt(te),A=n(b);A!==null&&!(A.expirationTime>te&&z());){var yt=A.callback;if(typeof yt=="function"){A.callback=null,V=A.priorityLevel;var zt=yt(A.expirationTime<=te);if(te=r.unstable_now(),typeof zt=="function"){A.callback=zt,lt(te),be=!0;break t}A===n(b)&&s(b),lt(te)}else s(b);A=n(b)}if(A!==null)be=!0;else{var j=n(_);j!==null&&En(jt,j.startTime-te),be=!1}}break e}finally{A=null,V=Ve,O=!1}be=void 0}}finally{be?B():qe=!1}}}var B;if(typeof Le=="function")B=function(){Le(L)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Kt=C.port2;C.port1.onmessage=L,B=function(){Kt.postMessage(null)}}else B=function(){I(L,0)};function En(te,be){D=I(function(){te(r.unstable_now())},be)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return V},r.unstable_next=function(te){switch(V){case 1:case 2:case 3:var be=3;break;default:be=V}var Ve=V;V=be;try{return te()}finally{V=Ve}},r.unstable_requestPaint=function(){he=!0},r.unstable_runWithPriority=function(te,be){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ve=V;V=te;try{return be()}finally{V=Ve}},r.unstable_scheduleCallback=function(te,be,Ve){var yt=r.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?yt+Ve:yt):Ve=yt,te){case 1:var zt=-1;break;case 2:zt=250;break;case 5:zt=1073741823;break;case 4:zt=1e4;break;default:zt=5e3}return zt=Ve+zt,te={id:S++,callback:be,priorityLevel:te,startTime:Ve,expirationTime:zt,sortIndex:-1},Ve>yt?(te.sortIndex=Ve,e(_,te),n(b)===null&&te===n(_)&&(de?(Ae(D),D=-1):de=!0,En(jt,Ve-yt))):(te.sortIndex=zt,e(b,te),pe||O||(pe=!0,qe||(qe=!0,B()))),te},r.unstable_shouldYield=z,r.unstable_wrapCallback=function(te){var be=V;return function(){var Ve=V;V=be;try{return te.apply(this,arguments)}finally{V=Ve}}}})(om)),om}var vb;function dw(){return vb||(vb=1,am.exports=hw()),am.exports}var lm={exports:{}},Ei={};var Tb;function fw(){if(Tb)return Ei;Tb=1;var r=Xm();function e(b){var _="https://react.dev/errors/"+b;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(b,_,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:b,containerInfo:_,implementation:S}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(b,_){if(b==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ei.createPortal=function(b,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(b,_,null,S)},Ei.flushSync=function(b){var _=f.T,S=s.p;try{if(f.T=null,s.p=2,b)return b()}finally{f.T=_,s.p=S,s.d.f()}},Ei.preconnect=function(b,_){typeof b=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(b,_))},Ei.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},Ei.preinit=function(b,_){if(typeof b=="string"&&_&&typeof _.as=="string"){var S=_.as,A=m(S,_.crossOrigin),V=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?s.d.S(b,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:V,fetchPriority:O}):S==="script"&&s.d.X(b,{crossOrigin:A,integrity:V,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ei.preinitModule=function(b,_){if(typeof b=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=m(_.as,_.crossOrigin);s.d.M(b,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(b)},Ei.preload=function(b,_){if(typeof b=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,A=m(S,_.crossOrigin);s.d.L(b,S,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ei.preloadModule=function(b,_){if(typeof b=="string")if(_){var S=m(_.as,_.crossOrigin);s.d.m(b,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(b)},Ei.requestFormReset=function(b){s.d.r(b)},Ei.unstable_batchedUpdates=function(b,_){return b(_)},Ei.useFormState=function(b,_,S){return f.H.useFormState(b,_,S)},Ei.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ei.version="19.2.0",Ei}var Sb;function mw(){if(Sb)return lm.exports;Sb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=fw(),lm.exports}var Eb;function gw(){if(Eb)return pc;Eb=1;var r=dw(),e=Xm(),n=mw();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function b(t){if(c(t)!==t)throw Error(s(188))}function _(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return b(h),t;if(d===o)return b(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var y=!1,T=h.child;T;){if(T===a){y=!0,a=h,o=d;break}if(T===o){y=!0,o=h,a=d;break}T=T.sibling}if(!y){for(T=d.child;T;){if(T===a){y=!0,a=d,o=h;break}if(T===o){y=!0,o=d,a=h;break}T=T.sibling}if(!y)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,V=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),pe=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),Ae=Symbol.for("react.consumer"),Le=Symbol.for("react.context"),lt=Symbol.for("react.forward_ref"),jt=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Kt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case de:return"Fragment";case I:return"Profiler";case he:return"StrictMode";case jt:return"Suspense";case qe:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case pe:return"Portal";case Le:return t.displayName||"Context";case Ae:return(t._context.displayName||"Context")+".Consumer";case lt:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Kt(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return Kt(t(i))}catch{}}return null}var En=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve={pending:!1,data:null,method:null,action:null},yt=[],zt=-1;function j(t){return{current:t}}function re(t){0>zt||(t.current=yt[zt],yt[zt]=null,zt--)}function ye(t,i){zt++,yt[zt]=t.current,t.current=i}var Se=j(null),je=j(null),it=j(null),ct=j(null);function un(t,i){switch(ye(it,i),ye(je,t),ye(Se,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?P_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=P_(i),t=z_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}re(Se),ye(Se,t)}function We(){re(Se),re(je),re(it)}function bn(t){t.memoizedState!==null&&ye(ct,t);var i=Se.current,a=z_(i,t.type);i!==a&&(ye(je,t),ye(Se,a))}function Ji(t){je.current===t&&(re(Se),re(je)),ct.current===t&&(re(ct),hc._currentValue=Ve)}var js,Qn;function Ln(t){if(js===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);js=i&&i[1]||"",Qn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+t+Qn}var Ws=!1;function Ui(t,i){if(!t||Ws)return"";Ws=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Z){var $=Z}Reflect.construct(t,[],le)}else{try{le.call()}catch(Z){$=Z}t.call(le.prototype)}}else{try{throw Error()}catch(Z){$=Z}(le=t())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(Z){if(Z&&$&&typeof Z.stack=="string")return[Z.stack,$.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),y=d[0],T=d[1];if(y&&T){var x=y.split(`
`),K=T.split(`
`);for(h=o=0;o<x.length&&!x[o].includes("DetermineComponentFrameRoot");)o++;for(;h<K.length&&!K[h].includes("DetermineComponentFrameRoot");)h++;if(o===x.length||h===K.length)for(o=x.length-1,h=K.length-1;1<=o&&0<=h&&x[o]!==K[h];)h--;for(;1<=o&&0<=h;o--,h--)if(x[o]!==K[h]){if(o!==1||h!==1)do if(o--,h--,0>h||x[o]!==K[h]){var ie=`
`+x[o].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=o&&0<=h);break}}}finally{Ws=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ln(a):""}function es(t,i){switch(t.tag){case 26:case 27:case 5:return Ln(t.type);case 16:return Ln("Lazy");case 13:return t.child!==i&&i!==null?Ln("Suspense Fallback"):Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 15:return Ui(t.type,!1);case 11:return Ui(t.type.render,!1);case 1:return Ui(t.type,!0);case 31:return Ln("Activity");default:return""}}function Ni(t){try{var i="",a=null;do i+=es(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Wt=Object.prototype.hasOwnProperty,Jt=r.unstable_scheduleCallback,_i=r.unstable_cancelCallback,qa=r.unstable_shouldYield,Ys=r.unstable_requestPaint,Nn=r.unstable_now,ts=r.unstable_getCurrentPriorityLevel,Xs=r.unstable_ImmediatePriority,ns=r.unstable_UserBlockingPriority,is=r.unstable_NormalPriority,ss=r.unstable_LowPriority,Zs=r.unstable_IdlePriority,qi=r.log,Js=r.unstable_setDisableYieldValue,Di=null,fn=null;function ti(t){if(typeof qi=="function"&&Js(t),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(Di,t)}catch{}}var on=Math.clz32?Math.clz32:In,Ps=Math.log,Ts=Math.LN2;function In(t){return t>>>=0,t===0?32:31-(Ps(t)/Ts|0)|0}var Wn=256,Ss=262144,Yt=4194304;function bi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Dn(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=bi(o):(y&=T,y!==0?h=bi(y):a||(a=T&~t,a!==0&&(h=bi(a))))):(T=o&~d,T!==0?h=bi(T):y!==0?h=bi(y):a||(a=o&~t,a!==0&&(h=bi(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function vt(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Ha(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function er(){var t=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),t}function Hi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function rs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Fa(t,i,a,o,h,d){var y=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,x=t.expirationTimes,K=t.hiddenUpdates;for(a=y&~a;0<a;){var ie=31-on(a),le=1<<ie;T[ie]=0,x[ie]=-1;var $=K[ie];if($!==null)for(K[ie]=null,ie=0;ie<$.length;ie++){var Z=$[ie];Z!==null&&(Z.lane&=-536870913)}a&=~le}o!==0&&U(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(y&~i))}function U(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-on(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function ne(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-on(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function ve(t,i){var a=i&-i;return a=(a&42)!==0?1:we(a),(a&(t.suspendedLanes|i))!==0?0:a}function we(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fe(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Bt(){var t=be.p;return t!==0?t:(t=window.event,t===void 0?32:lb(t.type))}function Xt(t,i){var a=be.p;try{return be.p=t,i()}finally{be.p=a}}var Mi=Math.random().toString(36).slice(2),mn="__reactFiber$"+Mi,Vn="__reactProps$"+Mi,vi="__reactContainer$"+Mi,Es="__reactEvents$"+Mi,_r="__reactListeners$"+Mi,zs="__reactHandles$"+Mi,as="__reactResources$"+Mi,os="__reactMarker$"+Mi;function Qr(t){delete t[mn],delete t[Vn],delete t[Es],delete t[_r],delete t[zs]}function xi(t){var i=t[mn];if(i)return i;for(var a=t.parentNode;a;){if(i=a[vi]||a[mn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=K_(t);t!==null;){if(a=t[mn])return a;t=K_(t)}return i}t=a,a=t.parentNode}return null}function Fi(t){if(t=t[mn]||t[vi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Oi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function ws(t){var i=t[as];return i||(i=t[as]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wn(t){t[os]=!0}var Wr=new Set,Ga={};function ls(t,i){As(t,i),As(t+"Capture",i)}function As(t,i){for(Ga[t]=i,t=0;t<i.length;t++)Wr.add(i[t])}var Yr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ka={},$a={};function Xr(t){return Wt.call($a,t)?!0:Wt.call(Ka,t)?!1:Yr.test(t)?$a[t]=!0:(Ka[t]=!0,!1)}function br(t,i,a){if(Xr(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function vn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function ln(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function hn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rs(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qa(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ut(t){if(!t._valueTracker){var i=Rs(t)?"checked":"value";t._valueTracker=Qa(t,i,""+t[i])}}function tr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=Rs(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function Is(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var vr=/[\n"\\]/g;function oi(t){return t.replace(vr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Tr(t,i,a,o,h,d,y,T){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),i!=null?y==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+hn(i)):t.value!==""+hn(i)&&(t.value=""+hn(i)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),i!=null?Ya(t,y,hn(i)):a!=null?Ya(t,y,hn(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+hn(T):t.removeAttribute("name")}function Wa(t,i,a,o,h,d,y,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Ut(t);return}a=a!=null?""+hn(a):"",i=i!=null?""+hn(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),Ut(t)}function Ya(t,i,a){i==="number"&&Is(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function nr(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+hn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ro(t,i,a){if(i!=null&&(i=""+hn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+hn(a):""}function ir(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(En(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=hn(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),Ut(t)}function Ti(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var M=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function q(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||M.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function X(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&q(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&q(t,d,i[d])}function me(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function se(t){return E.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Y(){}var Ie=null;function ke(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ce=null,Ee=null;function De(t){var i=Fi(t);if(i&&(t=i.stateNode)){var a=t[Vn]||null;e:switch(t=i.stateNode,i.type){case"input":if(Tr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+oi(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Vn]||null;if(!h)throw Error(s(90));Tr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&tr(o)}break e;case"textarea":Ro(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&nr(t,!!a.multiple,i,!1)}}}var ut=!1;function Pe(t,i,a){if(ut)return t(i,a);ut=!0;try{var o=t(i);return o}finally{if(ut=!1,(Ce!==null||Ee!==null)&&(Ou(),Ce&&(i=Ce,t=Ee,Ee=Ce=null,De(i),t)))for(i=0;i<t.length;i++)De(t[i])}}function ze(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Vn]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dt=!1;if(wt)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch{Dt=!1}var rt=null,fe=null,gn=null;function pt(){if(gn)return gn;var t,i=fe,a=i.length,o,h="value"in rt?rt.value:rt.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var y=a-t;for(o=1;o<=y&&i[a-o]===h[d-o];o++);return gn=h.slice(t,1<o?1-o:void 0)}function _t(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Be(){return!0}function tt(){return!1}function Xe(t){function i(a,o,h,d,y){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Be:tt,this.isPropagationStopped=tt,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Be)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Be)},persist:function(){},isPersistent:Be}),i}var Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ot=Xe(Zt),at=A({},Zt,{view:0,detail:0}),qt=Xe(at),$t,Tt,ge,Ge=A({},at,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ge&&(ge&&t.type==="mousemove"?($t=t.screenX-ge.screenX,Tt=t.screenY-ge.screenY):Tt=$t=0,ge=t),$t)},movementY:function(t){return"movementY"in t?t.movementY:Tt}}),He=Xe(Ge),Me=A({},Ge,{dataTransfer:0}),dt=Xe(Me),dn=A({},at,{relatedTarget:0}),At=Xe(dn),ft=A({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0}),Yn=Xe(ft),Xn=A({},Zt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ni=Xe(Xn),ii=A({},Zt,{data:0}),Tn=Xe(ii),Li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sr(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Cs[t])?!!i[t]:!1}function Vi(){return sr}var Mt=A({},at,{key:function(t){if(t.key){var i=Li[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=_t(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vi,charCode:function(t){return t.type==="keypress"?_t(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_t(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ji=Xe(Mt),li=A({},Ge,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jn=Xe(li),u=A({},at,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vi}),g=Xe(u),v=A({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Xe(v),F=A({},Ge,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Xe(F),_e=A({},Zt,{newState:0,oldState:0}),Oe=Xe(_e),Ht=[9,13,27,32],bt=wt&&"CompositionEvent"in window,Ke=null;wt&&"documentMode"in document&&(Ke=document.documentMode);var Pt=wt&&"TextEvent"in window&&!Ke,Pn=wt&&(!bt||Ke&&8<Ke&&11>=Ke),Si=" ",Bs=!1;function Xa(t,i){switch(t){case"keyup":return Ht.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Io(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function MS(t,i){switch(t){case"compositionend":return Io(i);case"keypress":return i.which!==32?null:(Bs=!0,Si);case"textInput":return t=i.data,t===Si&&Bs?null:t;default:return null}}function xS(t,i){if(Co)return t==="compositionend"||!bt&&Xa(t,i)?(t=pt(),gn=fe=rt=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Pn&&i.locale!=="ko"?null:i.data;default:return null}}var OS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!OS[t.type]:i==="textarea"}function Yg(t,i,a,o){Ce?Ee?Ee.push(o):Ee=[o]:Ce=o,i=Uu(i,"onChange"),0<i.length&&(a=new Ot("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var xl=null,Ol=null;function LS(t){M_(t,0)}function Jc(t){var i=Oi(t);if(tr(i))return t}function Xg(t,i){if(t==="change")return i}var Zg=!1;if(wt){var cd;if(wt){var ud="oninput"in document;if(!ud){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),ud=typeof Jg.oninput=="function"}cd=ud}else cd=!1;Zg=cd&&(!document.documentMode||9<document.documentMode)}function ep(){xl&&(xl.detachEvent("onpropertychange",tp),Ol=xl=null)}function tp(t){if(t.propertyName==="value"&&Jc(Ol)){var i=[];Yg(i,Ol,t,ke(t)),Pe(LS,i)}}function VS(t,i,a){t==="focusin"?(ep(),xl=i,Ol=a,xl.attachEvent("onpropertychange",tp)):t==="focusout"&&ep()}function jS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jc(Ol)}function PS(t,i){if(t==="click")return Jc(i)}function zS(t,i){if(t==="input"||t==="change")return Jc(i)}function BS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var cs=typeof Object.is=="function"?Object.is:BS;function Ll(t,i){if(cs(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Wt.call(i,h)||!cs(t[h],i[h]))return!1}return!0}function np(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ip(t,i){var a=np(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=np(a)}}function sp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?sp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function rp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Is(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Is(t.document)}return i}function hd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var US=wt&&"documentMode"in document&&11>=document.documentMode,ko=null,dd=null,Vl=null,fd=!1;function ap(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fd||ko==null||ko!==Is(o)||(o=ko,"selectionStart"in o&&hd(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Vl&&Ll(Vl,o)||(Vl=o,o=Uu(dd,"onSelect"),0<o.length&&(i=new Ot("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=ko)))}function Za(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var No={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},md={},op={};wt&&(op=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Ja(t){if(md[t])return md[t];if(!No[t])return t;var i=No[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in op)return md[t]=i[a];return t}var lp=Ja("animationend"),cp=Ja("animationiteration"),up=Ja("animationstart"),qS=Ja("transitionrun"),HS=Ja("transitionstart"),FS=Ja("transitioncancel"),hp=Ja("transitionend"),dp=new Map,gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gd.push("scrollEnd");function Us(t,i){dp.set(t,i),ls(i,[t])}var eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ks=[],Do=0,pd=0;function tu(){for(var t=Do,i=pd=Do=0;i<t;){var a=ks[i];ks[i++]=null;var o=ks[i];ks[i++]=null;var h=ks[i];ks[i++]=null;var d=ks[i];if(ks[i++]=null,o!==null&&h!==null){var y=o.pending;y===null?h.next=h:(h.next=y.next,y.next=h),o.pending=h}d!==0&&fp(a,h,d)}}function nu(t,i,a,o){ks[Do++]=t,ks[Do++]=i,ks[Do++]=a,ks[Do++]=o,pd|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function yd(t,i,a,o){return nu(t,i,a,o),iu(t)}function eo(t,i){return nu(t,null,null,i),iu(t)}function fp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-on(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function iu(t){if(50<sc)throw sc=0,If=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Mo={};function GS(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(t,i,a,o){return new GS(t,i,a,o)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Sr(t,i){var a=t.alternate;return a===null?(a=us(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function mp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function su(t,i,a,o,h,d){var y=0;if(o=t,typeof t=="function")_d(t)&&(y=1);else if(typeof t=="string")y=YE(t,a,Se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=us(31,a,i,h),t.elementType=N,t.lanes=d,t;case de:return to(a.children,h,d,i);case he:y=8,h|=24;break;case I:return t=us(12,a,i,h|2),t.elementType=I,t.lanes=d,t;case jt:return t=us(13,a,i,h),t.elementType=jt,t.lanes=d,t;case qe:return t=us(19,a,i,h),t.elementType=qe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Le:y=10;break e;case Ae:y=9;break e;case lt:y=11;break e;case D:y=14;break e;case R:y=16,o=null;break e}y=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=us(y,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function to(t,i,a,o){return t=us(7,t,o,i),t.lanes=a,t}function bd(t,i,a){return t=us(6,t,null,i),t.lanes=a,t}function gp(t){var i=us(18,null,null,0);return i.stateNode=t,i}function vd(t,i,a){return i=us(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var pp=new WeakMap;function Ns(t,i){if(typeof t=="object"&&t!==null){var a=pp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Ni(i)},pp.set(t,i),i)}return{value:t,source:i,stack:Ni(i)}}var xo=[],Oo=0,ru=null,jl=0,Ds=[],Ms=0,Zr=null,rr=1,ar="";function Er(t,i){xo[Oo++]=jl,xo[Oo++]=ru,ru=t,jl=i}function yp(t,i,a){Ds[Ms++]=rr,Ds[Ms++]=ar,Ds[Ms++]=Zr,Zr=t;var o=rr;t=ar;var h=32-on(o)-1;o&=~(1<<h),a+=1;var d=32-on(i)+h;if(30<d){var y=h-h%5;d=(o&(1<<y)-1).toString(32),o>>=y,h-=y,rr=1<<32-on(i)+h|a<<h|o,ar=d+t}else rr=1<<d|a<<h|o,ar=t}function Td(t){t.return!==null&&(Er(t,1),yp(t,1,0))}function Sd(t){for(;t===ru;)ru=xo[--Oo],xo[Oo]=null,jl=xo[--Oo],xo[Oo]=null;for(;t===Zr;)Zr=Ds[--Ms],Ds[Ms]=null,ar=Ds[--Ms],Ds[Ms]=null,rr=Ds[--Ms],Ds[Ms]=null}function _p(t,i){Ds[Ms++]=rr,Ds[Ms++]=ar,Ds[Ms++]=Zr,rr=i.id,ar=i.overflow,Zr=t}var ci=null,pn=null,xt=!1,Jr=null,xs=!1,Ed=Error(s(519));function ea(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(Ns(i,t)),Ed}function bp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[mn]=t,i[Vn]=o,a){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(a=0;a<ac.length;a++)Et(ac[a],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":Et("invalid",i),Wa(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Et("invalid",i);break;case"textarea":Et("invalid",i),ir(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||V_(i.textContent,a)?(o.popover!=null&&(Et("beforetoggle",i),Et("toggle",i)),o.onScroll!=null&&Et("scroll",i),o.onScrollEnd!=null&&Et("scrollend",i),o.onClick!=null&&(i.onclick=Y),i=!0):i=!1,i||ea(t,!0)}function vp(t){for(ci=t.return;ci;)switch(ci.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:ci=ci.return}}function Lo(t){if(t!==ci)return!1;if(!xt)return vp(t),xt=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||qf(t.type,t.memoizedProps)),a=!a),a&&pn&&ea(t),vp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));pn=G_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));pn=G_(t)}else i===27?(i=pn,ma(t.type)?(t=$f,$f=null,pn=t):pn=i):pn=ci?Ls(t.stateNode.nextSibling):null;return!0}function no(){pn=ci=null,xt=!1}function wd(){var t=Jr;return t!==null&&(Wi===null?Wi=t:Wi.push.apply(Wi,t),Jr=null),t}function Pl(t){Jr===null?Jr=[t]:Jr.push(t)}var Ad=j(null),io=null,wr=null;function ta(t,i,a){ye(Ad,i._currentValue),i._currentValue=a}function Ar(t){t._currentValue=Ad.current,re(Ad)}function Rd(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function Id(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var y=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var x=0;x<i.length;x++)if(T.context===i[x]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Rd(d.return,a,t),o||(y=null);break e}d=T.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(s(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),Rd(y,a,t),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===t){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function Vo(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var T=h.type;cs(h.pendingProps.value,y.value)||(t!==null?t.push(T):t=[T])}}else if(h===ct.current){if(y=h.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(hc):t=[hc])}h=h.return}t!==null&&Id(i,t,a,o),i.flags|=262144}function au(t){for(t=t.firstContext;t!==null;){if(!cs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function so(t){io=t,wr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ui(t){return Tp(io,t)}function ou(t,i){return io===null&&so(t),Tp(t,i)}function Tp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},wr===null){if(t===null)throw Error(s(308));wr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else wr=wr.next=i;return a}var KS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},$S=r.unstable_scheduleCallback,QS=r.unstable_NormalPriority,zn={$$typeof:Le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cd(){return{controller:new KS,data:new Map,refCount:0}}function zl(t){t.refCount--,t.refCount===0&&$S(QS,function(){t.controller.abort()})}var Bl=null,kd=0,jo=0,Po=null;function WS(t,i){if(Bl===null){var a=Bl=[];kd=0,jo=xf(),Po={status:"pending",value:void 0,then:function(o){a.push(o)}}}return kd++,i.then(Sp,Sp),i}function Sp(){if(--kd===0&&Bl!==null){Po!==null&&(Po.status="fulfilled");var t=Bl;Bl=null,jo=0,Po=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function YS(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Ep=te.S;te.S=function(t,i){a_=Nn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&WS(t,i),Ep!==null&&Ep(t,i)};var ro=j(null);function Nd(){var t=ro.current;return t!==null?t:cn.pooledCache}function lu(t,i){i===null?ye(ro,ro.current):ye(ro,i.pool)}function wp(){var t=Nd();return t===null?null:{parent:zn._currentValue,pool:t}}var zo=Error(s(460)),Dd=Error(s(474)),cu=Error(s(542)),uu={then:function(){}};function Ap(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Rp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Y,Y),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Cp(t),t;default:if(typeof i.status=="string")i.then(Y,Y);else{if(t=cn,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Cp(t),t}throw oo=i,zo}}function ao(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oo=a,zo):a}}var oo=null;function Ip(){if(oo===null)throw Error(s(459));var t=oo;return oo=null,t}function Cp(t){if(t===zo||t===cu)throw Error(s(483))}var Bo=null,Ul=0;function hu(t){var i=Ul;return Ul+=1,Bo===null&&(Bo=[]),Rp(Bo,t,i)}function ql(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function du(t,i){throw i.$$typeof===V?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function kp(t){function i(H,P){if(t){var G=H.deletions;G===null?(H.deletions=[P],H.flags|=16):G.push(P)}}function a(H,P){if(!t)return null;for(;P!==null;)i(H,P),P=P.sibling;return null}function o(H){for(var P=new Map;H!==null;)H.key!==null?P.set(H.key,H):P.set(H.index,H),H=H.sibling;return P}function h(H,P){return H=Sr(H,P),H.index=0,H.sibling=null,H}function d(H,P,G){return H.index=G,t?(G=H.alternate,G!==null?(G=G.index,G<P?(H.flags|=67108866,P):G):(H.flags|=67108866,P)):(H.flags|=1048576,P)}function y(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function T(H,P,G,oe){return P===null||P.tag!==6?(P=bd(G,H.mode,oe),P.return=H,P):(P=h(P,G),P.return=H,P)}function x(H,P,G,oe){var Qe=G.type;return Qe===de?ie(H,P,G.props.children,oe,G.key):P!==null&&(P.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===R&&ao(Qe)===P.type)?(P=h(P,G.props),ql(P,G),P.return=H,P):(P=su(G.type,G.key,G.props,null,H.mode,oe),ql(P,G),P.return=H,P)}function K(H,P,G,oe){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=vd(G,H.mode,oe),P.return=H,P):(P=h(P,G.children||[]),P.return=H,P)}function ie(H,P,G,oe,Qe){return P===null||P.tag!==7?(P=to(G,H.mode,oe,Qe),P.return=H,P):(P=h(P,G),P.return=H,P)}function le(H,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=bd(""+P,H.mode,G),P.return=H,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case O:return G=su(P.type,P.key,P.props,null,H.mode,G),ql(G,P),G.return=H,G;case pe:return P=vd(P,H.mode,G),P.return=H,P;case R:return P=ao(P),le(H,P,G)}if(En(P)||B(P))return P=to(P,H.mode,G,null),P.return=H,P;if(typeof P.then=="function")return le(H,hu(P),G);if(P.$$typeof===Le)return le(H,ou(H,P),G);du(H,P)}return null}function $(H,P,G,oe){var Qe=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Qe!==null?null:T(H,P,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case O:return G.key===Qe?x(H,P,G,oe):null;case pe:return G.key===Qe?K(H,P,G,oe):null;case R:return G=ao(G),$(H,P,G,oe)}if(En(G)||B(G))return Qe!==null?null:ie(H,P,G,oe,null);if(typeof G.then=="function")return $(H,P,hu(G),oe);if(G.$$typeof===Le)return $(H,P,ou(H,G),oe);du(H,G)}return null}function Z(H,P,G,oe,Qe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(G)||null,T(P,H,""+oe,Qe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:return H=H.get(oe.key===null?G:oe.key)||null,x(P,H,oe,Qe);case pe:return H=H.get(oe.key===null?G:oe.key)||null,K(P,H,oe,Qe);case R:return oe=ao(oe),Z(H,P,G,oe,Qe)}if(En(oe)||B(oe))return H=H.get(G)||null,ie(P,H,oe,Qe,null);if(typeof oe.then=="function")return Z(H,P,G,hu(oe),Qe);if(oe.$$typeof===Le)return Z(H,P,G,ou(P,oe),Qe);du(P,oe)}return null}function Ne(H,P,G,oe){for(var Qe=null,Ft=null,xe=P,gt=P=0,It=null;xe!==null&&gt<G.length;gt++){xe.index>gt?(It=xe,xe=null):It=xe.sibling;var Gt=$(H,xe,G[gt],oe);if(Gt===null){xe===null&&(xe=It);break}t&&xe&&Gt.alternate===null&&i(H,xe),P=d(Gt,P,gt),Ft===null?Qe=Gt:Ft.sibling=Gt,Ft=Gt,xe=It}if(gt===G.length)return a(H,xe),xt&&Er(H,gt),Qe;if(xe===null){for(;gt<G.length;gt++)xe=le(H,G[gt],oe),xe!==null&&(P=d(xe,P,gt),Ft===null?Qe=xe:Ft.sibling=xe,Ft=xe);return xt&&Er(H,gt),Qe}for(xe=o(xe);gt<G.length;gt++)It=Z(xe,H,gt,G[gt],oe),It!==null&&(t&&It.alternate!==null&&xe.delete(It.key===null?gt:It.key),P=d(It,P,gt),Ft===null?Qe=It:Ft.sibling=It,Ft=It);return t&&xe.forEach(function(ba){return i(H,ba)}),xt&&Er(H,gt),Qe}function Je(H,P,G,oe){if(G==null)throw Error(s(151));for(var Qe=null,Ft=null,xe=P,gt=P=0,It=null,Gt=G.next();xe!==null&&!Gt.done;gt++,Gt=G.next()){xe.index>gt?(It=xe,xe=null):It=xe.sibling;var ba=$(H,xe,Gt.value,oe);if(ba===null){xe===null&&(xe=It);break}t&&xe&&ba.alternate===null&&i(H,xe),P=d(ba,P,gt),Ft===null?Qe=ba:Ft.sibling=ba,Ft=ba,xe=It}if(Gt.done)return a(H,xe),xt&&Er(H,gt),Qe;if(xe===null){for(;!Gt.done;gt++,Gt=G.next())Gt=le(H,Gt.value,oe),Gt!==null&&(P=d(Gt,P,gt),Ft===null?Qe=Gt:Ft.sibling=Gt,Ft=Gt);return xt&&Er(H,gt),Qe}for(xe=o(xe);!Gt.done;gt++,Gt=G.next())Gt=Z(xe,H,gt,Gt.value,oe),Gt!==null&&(t&&Gt.alternate!==null&&xe.delete(Gt.key===null?gt:Gt.key),P=d(Gt,P,gt),Ft===null?Qe=Gt:Ft.sibling=Gt,Ft=Gt);return t&&xe.forEach(function(ow){return i(H,ow)}),xt&&Er(H,gt),Qe}function rn(H,P,G,oe){if(typeof G=="object"&&G!==null&&G.type===de&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case O:e:{for(var Qe=G.key;P!==null;){if(P.key===Qe){if(Qe=G.type,Qe===de){if(P.tag===7){a(H,P.sibling),oe=h(P,G.props.children),oe.return=H,H=oe;break e}}else if(P.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===R&&ao(Qe)===P.type){a(H,P.sibling),oe=h(P,G.props),ql(oe,G),oe.return=H,H=oe;break e}a(H,P);break}else i(H,P);P=P.sibling}G.type===de?(oe=to(G.props.children,H.mode,oe,G.key),oe.return=H,H=oe):(oe=su(G.type,G.key,G.props,null,H.mode,oe),ql(oe,G),oe.return=H,H=oe)}return y(H);case pe:e:{for(Qe=G.key;P!==null;){if(P.key===Qe)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){a(H,P.sibling),oe=h(P,G.children||[]),oe.return=H,H=oe;break e}else{a(H,P);break}else i(H,P);P=P.sibling}oe=vd(G,H.mode,oe),oe.return=H,H=oe}return y(H);case R:return G=ao(G),rn(H,P,G,oe)}if(En(G))return Ne(H,P,G,oe);if(B(G)){if(Qe=B(G),typeof Qe!="function")throw Error(s(150));return G=Qe.call(G),Je(H,P,G,oe)}if(typeof G.then=="function")return rn(H,P,hu(G),oe);if(G.$$typeof===Le)return rn(H,P,ou(H,G),oe);du(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(a(H,P.sibling),oe=h(P,G),oe.return=H,H=oe):(a(H,P),oe=bd(G,H.mode,oe),oe.return=H,H=oe),y(H)):a(H,P)}return function(H,P,G,oe){try{Ul=0;var Qe=rn(H,P,G,oe);return Bo=null,Qe}catch(xe){if(xe===zo||xe===cu)throw xe;var Ft=us(29,xe,null,H.mode);return Ft.lanes=oe,Ft.return=H,Ft}finally{}}}var lo=kp(!0),Np=kp(!1),na=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ia(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function sa(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Qt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=iu(t),fp(t,null,a),i}return nu(t,o,i,a),iu(t)}function Hl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,ne(t,a)}}function Od(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Ld=!1;function Fl(){if(Ld){var t=Po;if(t!==null)throw t}}function Gl(t,i,a,o){Ld=!1;var h=t.updateQueue;na=!1;var d=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var x=T,K=x.next;x.next=null,y===null?d=K:y.next=K,y=x;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==y&&(T===null?ie.firstBaseUpdate=K:T.next=K,ie.lastBaseUpdate=x))}if(d!==null){var le=h.baseState;y=0,ie=K=x=null,T=d;do{var $=T.lane&-536870913,Z=$!==T.lane;if(Z?(Rt&$)===$:(o&$)===$){$!==0&&$===jo&&(Ld=!0),ie!==null&&(ie=ie.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ne=t,Je=T;$=i;var rn=a;switch(Je.tag){case 1:if(Ne=Je.payload,typeof Ne=="function"){le=Ne.call(rn,le,$);break e}le=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Je.payload,$=typeof Ne=="function"?Ne.call(rn,le,$):Ne,$==null)break e;le=A({},le,$);break e;case 2:na=!0}}$=T.callback,$!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=h.callbacks,Z===null?h.callbacks=[$]:Z.push($))}else Z={lane:$,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(K=ie=Z,x=le):ie=ie.next=Z,y|=$;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Z=T,T=Z.next,Z.next=null,h.lastBaseUpdate=Z,h.shared.pending=null}}while(!0);ie===null&&(x=le),h.baseState=x,h.firstBaseUpdate=K,h.lastBaseUpdate=ie,d===null&&(h.shared.lanes=0),ca|=y,t.lanes=y,t.memoizedState=le}}function Dp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Mp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Dp(a[t],i)}var Uo=j(null),fu=j(0);function xp(t,i){t=Or,ye(fu,t),ye(Uo,i),Or=t|i.baseLanes}function Vd(){ye(fu,Or),ye(Uo,Uo.current)}function jd(){Or=fu.current,re(Uo),re(fu)}var hs=j(null),Os=null;function ra(t){var i=t.alternate;ye(Mn,Mn.current&1),ye(hs,t),Os===null&&(i===null||Uo.current!==null||i.memoizedState!==null)&&(Os=t)}function Pd(t){ye(Mn,Mn.current),ye(hs,t),Os===null&&(Os=t)}function Op(t){t.tag===22?(ye(Mn,Mn.current),ye(hs,t),Os===null&&(Os=t)):aa()}function aa(){ye(Mn,Mn.current),ye(hs,hs.current)}function ds(t){re(hs),Os===t&&(Os=null),re(Mn)}var Mn=j(0);function mu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gf(a)||Kf(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Rr=0,mt=null,nn=null,Bn=null,gu=!1,qo=!1,co=!1,pu=0,Kl=0,Ho=null,XS=0;function Cn(){throw Error(s(321))}function zd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!cs(t[a],i[a]))return!1;return!0}function Bd(t,i,a,o,h,d){return Rr=d,mt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,te.H=t===null||t.memoizedState===null?yy:tf,co=!1,d=a(o,h),co=!1,qo&&(d=Vp(i,a,o,h)),Lp(t),d}function Lp(t){te.H=Wl;var i=nn!==null&&nn.next!==null;if(Rr=0,Bn=nn=mt=null,gu=!1,Kl=0,Ho=null,i)throw Error(s(300));t===null||Un||(t=t.dependencies,t!==null&&au(t)&&(Un=!0))}function Vp(t,i,a,o){mt=t;var h=0;do{if(qo&&(Ho=null),Kl=0,qo=!1,25<=h)throw Error(s(301));if(h+=1,Bn=nn=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}te.H=_y,d=i(a,o)}while(qo);return d}function ZS(){var t=te.H,i=t.useState()[0];return i=typeof i.then=="function"?$l(i):i,t=t.useState()[0],(nn!==null?nn.memoizedState:null)!==t&&(mt.flags|=1024),i}function Ud(){var t=pu!==0;return pu=0,t}function qd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Hd(t){if(gu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}gu=!1}Rr=0,Bn=nn=mt=null,qo=!1,Kl=pu=0,Ho=null}function Pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?mt.memoizedState=Bn=t:Bn=Bn.next=t,Bn}function xn(){if(nn===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=nn.next;var i=Bn===null?mt.memoizedState:Bn.next;if(i!==null)Bn=i,nn=t;else{if(t===null)throw mt.alternate===null?Error(s(467)):Error(s(310));nn=t,t={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Bn===null?mt.memoizedState=Bn=t:Bn=Bn.next=t}return Bn}function yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(t){var i=Kl;return Kl+=1,Ho===null&&(Ho=[]),t=Rp(Ho,t,i),i=mt,(Bn===null?i.memoizedState:Bn.next)===null&&(i=i.alternate,te.H=i===null||i.memoizedState===null?yy:tf),t}function _u(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $l(t);if(t.$$typeof===Le)return ui(t)}throw Error(s(438,String(t)))}function Fd(t){var i=null,a=mt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=mt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=yu(),mt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=z;return i.index++,a}function Ir(t,i){return typeof i=="function"?i(t):i}function bu(t){var i=xn();return Gd(i,nn,t)}function Gd(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var y=h.next;h.next=d.next,d.next=y}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=y=null,x=null,K=i,ie=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(Rt&le)===le:(Rr&le)===le){var $=K.revertLane;if($===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===jo&&(ie=!0);else if((Rr&$)===$){K=K.next,$===jo&&(ie=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},x===null?(T=x=le,y=d):x=x.next=le,mt.lanes|=$,ca|=$;le=K.action,co&&a(d,le),d=K.hasEagerState?K.eagerState:a(d,le)}else $={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},x===null?(T=x=$,y=d):x=x.next=$,mt.lanes|=le,ca|=le;K=K.next}while(K!==null&&K!==i);if(x===null?y=d:x.next=T,!cs(d,t.memoizedState)&&(Un=!0,ie&&(a=Po,a!==null)))throw a;t.memoizedState=d,t.baseState=y,t.baseQueue=x,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Kd(t){var i=xn(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var y=h=h.next;do d=t(d,y.action),y=y.next;while(y!==h);cs(d,i.memoizedState)||(Un=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function jp(t,i,a){var o=mt,h=xn(),d=xt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var y=!cs((nn||h).memoizedState,a);if(y&&(h.memoizedState=a,Un=!0),h=h.queue,Wd(Bp.bind(null,o,h,t),[t]),h.getSnapshot!==i||y||Bn!==null&&Bn.memoizedState.tag&1){if(o.flags|=2048,Fo(9,{destroy:void 0},zp.bind(null,o,h,a,i),null),cn===null)throw Error(s(349));d||(Rr&127)!==0||Pp(o,i,a)}return a}function Pp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=mt.updateQueue,i===null?(i=yu(),mt.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function zp(t,i,a,o){i.value=a,i.getSnapshot=o,Up(i)&&qp(t)}function Bp(t,i,a){return a(function(){Up(i)&&qp(t)})}function Up(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!cs(t,a)}catch{return!0}}function qp(t){var i=eo(t,2);i!==null&&Yi(i,t,2)}function $d(t){var i=Pi();if(typeof t=="function"){var a=t;if(t=a(),co){ti(!0);try{a()}finally{ti(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:t},i}function Hp(t,i,a,o){return t.baseState=a,Gd(t,nn,typeof o=="function"?o:Ir)}function JS(t,i,a,o,h){if(Su(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};te.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Fp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Fp(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=te.T,y={};te.T=y;try{var T=a(h,o),x=te.S;x!==null&&x(y,T),Gp(t,i,T)}catch(K){Qd(t,i,K)}finally{d!==null&&y.types!==null&&(d.types=y.types),te.T=d}}else try{d=a(h,o),Gp(t,i,d)}catch(K){Qd(t,i,K)}}function Gp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Kp(t,i,o)},function(o){return Qd(t,i,o)}):Kp(t,i,a)}function Kp(t,i,a){i.status="fulfilled",i.value=a,$p(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Fp(t,a)))}function Qd(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,$p(i),i=i.next;while(i!==o)}t.action=null}function $p(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Qp(t,i){return i}function Wp(t,i){if(xt){var a=cn.formState;if(a!==null){e:{var o=mt;if(xt){if(pn){t:{for(var h=pn,d=xs;h.nodeType!==8;){if(!d){h=null;break t}if(h=Ls(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){pn=Ls(h.nextSibling),o=h.data==="F!";break e}}ea(o)}o=!1}o&&(i=a[0])}}return a=Pi(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qp,lastRenderedState:i},a.queue=o,a=my.bind(null,mt,o),o.dispatch=a,o=$d(!1),d=ef.bind(null,mt,!1,o.queue),o=Pi(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=JS.bind(null,mt,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Yp(t){var i=xn();return Xp(i,nn,t)}function Xp(t,i,a){if(i=Gd(t,i,Qp)[0],t=bu(Ir)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=$l(i)}catch(y){throw y===zo?cu:y}else o=i;i=xn();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(mt.flags|=2048,Fo(9,{destroy:void 0},eE.bind(null,h,a),null)),[o,d,t]}function eE(t,i){t.action=i}function Zp(t){var i=xn(),a=nn;if(a!==null)return Xp(i,a,t);xn(),i=i.memoizedState,a=xn();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Fo(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=mt.updateQueue,i===null&&(i=yu(),mt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Jp(){return xn().memoizedState}function vu(t,i,a,o){var h=Pi();mt.flags|=t,h.memoizedState=Fo(1|i,{destroy:void 0},a,o===void 0?null:o)}function Tu(t,i,a,o){var h=xn();o=o===void 0?null:o;var d=h.memoizedState.inst;nn!==null&&o!==null&&zd(o,nn.memoizedState.deps)?h.memoizedState=Fo(i,d,a,o):(mt.flags|=t,h.memoizedState=Fo(1|i,d,a,o))}function ey(t,i){vu(8390656,8,t,i)}function Wd(t,i){Tu(2048,8,t,i)}function tE(t){mt.flags|=4;var i=mt.updateQueue;if(i===null)i=yu(),mt.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function ty(t){var i=xn().memoizedState;return tE({ref:i,nextImpl:t}),function(){if((Qt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ny(t,i){return Tu(4,2,t,i)}function iy(t,i){return Tu(4,4,t,i)}function sy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ry(t,i,a){a=a!=null?a.concat([t]):null,Tu(4,4,sy.bind(null,i,t),a)}function Yd(){}function ay(t,i){var a=xn();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&zd(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function oy(t,i){var a=xn();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&zd(i,o[1]))return o[0];if(o=t(),co){ti(!0);try{t()}finally{ti(!1)}}return a.memoizedState=[o,i],o}function Xd(t,i,a){return a===void 0||(Rr&1073741824)!==0&&(Rt&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=l_(),mt.lanes|=t,ca|=t,a)}function ly(t,i,a,o){return cs(a,i)?a:Uo.current!==null?(t=Xd(t,a,o),cs(t,i)||(Un=!0),t):(Rr&42)===0||(Rr&1073741824)!==0&&(Rt&261930)===0?(Un=!0,t.memoizedState=a):(t=l_(),mt.lanes|=t,ca|=t,i)}function cy(t,i,a,o,h){var d=be.p;be.p=d!==0&&8>d?d:8;var y=te.T,T={};te.T=T,ef(t,!1,i,a);try{var x=h(),K=te.S;if(K!==null&&K(T,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var ie=YS(x,o);Ql(t,i,ie,gs(t))}else Ql(t,i,o,gs(t))}catch(le){Ql(t,i,{then:function(){},status:"rejected",reason:le},gs())}finally{be.p=d,y!==null&&T.types!==null&&(y.types=T.types),te.T=y}}function nE(){}function Zd(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=uy(t).queue;cy(t,h,i,Ve,a===null?nE:function(){return hy(t),a(o)})}function uy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Ve,baseState:Ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:Ve},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function hy(t){var i=uy(t);i.next===null&&(i=t.alternate.memoizedState),Ql(t,i.next.queue,{},gs())}function Jd(){return ui(hc)}function dy(){return xn().memoizedState}function fy(){return xn().memoizedState}function iE(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=gs();t=ia(a);var o=sa(i,t,a);o!==null&&(Yi(o,i,a),Hl(o,i,a)),i={cache:Cd()},t.payload=i;return}i=i.return}}function sE(t,i,a){var o=gs();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Su(t)?gy(i,a):(a=yd(t,i,a,o),a!==null&&(Yi(a,t,o),py(a,i,o)))}function my(t,i,a){var o=gs();Ql(t,i,a,o)}function Ql(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Su(t))gy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var y=i.lastRenderedState,T=d(y,a);if(h.hasEagerState=!0,h.eagerState=T,cs(T,y))return nu(t,i,h,0),cn===null&&tu(),!1}catch{}finally{}if(a=yd(t,i,h,o),a!==null)return Yi(a,t,o),py(a,i,o),!0}return!1}function ef(t,i,a,o){if(o={lane:2,revertLane:xf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Su(t)){if(i)throw Error(s(479))}else i=yd(t,a,o,2),i!==null&&Yi(i,t,2)}function Su(t){var i=t.alternate;return t===mt||i!==null&&i===mt}function gy(t,i){qo=gu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function py(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,ne(t,a)}}var Wl={readContext:ui,use:_u,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useInsertionEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useSyncExternalStore:Cn,useId:Cn,useHostTransitionStatus:Cn,useFormState:Cn,useActionState:Cn,useOptimistic:Cn,useMemoCache:Cn,useCacheRefresh:Cn};Wl.useEffectEvent=Cn;var yy={readContext:ui,use:_u,useCallback:function(t,i){return Pi().memoizedState=[t,i===void 0?null:i],t},useContext:ui,useEffect:ey,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,vu(4194308,4,sy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return vu(4194308,4,t,i)},useInsertionEffect:function(t,i){vu(4,2,t,i)},useMemo:function(t,i){var a=Pi();i=i===void 0?null:i;var o=t();if(co){ti(!0);try{t()}finally{ti(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=Pi();if(a!==void 0){var h=a(i);if(co){ti(!0);try{a(i)}finally{ti(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=sE.bind(null,mt,t),[o.memoizedState,t]},useRef:function(t){var i=Pi();return t={current:t},i.memoizedState=t},useState:function(t){t=$d(t);var i=t.queue,a=my.bind(null,mt,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Yd,useDeferredValue:function(t,i){var a=Pi();return Xd(a,t,i)},useTransition:function(){var t=$d(!1);return t=cy.bind(null,mt,t.queue,!0,!1),Pi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=mt,h=Pi();if(xt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),cn===null)throw Error(s(349));(Rt&127)!==0||Pp(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,ey(Bp.bind(null,o,d,t),[t]),o.flags|=2048,Fo(9,{destroy:void 0},zp.bind(null,o,d,a,i),null),a},useId:function(){var t=Pi(),i=cn.identifierPrefix;if(xt){var a=ar,o=rr;a=(o&~(1<<32-on(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=pu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=XS++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Jd,useFormState:Wp,useActionState:Wp,useOptimistic:function(t){var i=Pi();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ef.bind(null,mt,!0,a),a.dispatch=i,[t,i]},useMemoCache:Fd,useCacheRefresh:function(){return Pi().memoizedState=iE.bind(null,mt)},useEffectEvent:function(t){var i=Pi(),a={impl:t};return i.memoizedState=a,function(){if((Qt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:ui,use:_u,useCallback:ay,useContext:ui,useEffect:Wd,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:oy,useReducer:bu,useRef:Jp,useState:function(){return bu(Ir)},useDebugValue:Yd,useDeferredValue:function(t,i){var a=xn();return ly(a,nn.memoizedState,t,i)},useTransition:function(){var t=bu(Ir)[0],i=xn().memoizedState;return[typeof t=="boolean"?t:$l(t),i]},useSyncExternalStore:jp,useId:dy,useHostTransitionStatus:Jd,useFormState:Yp,useActionState:Yp,useOptimistic:function(t,i){var a=xn();return Hp(a,nn,t,i)},useMemoCache:Fd,useCacheRefresh:fy};tf.useEffectEvent=ty;var _y={readContext:ui,use:_u,useCallback:ay,useContext:ui,useEffect:Wd,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:oy,useReducer:Kd,useRef:Jp,useState:function(){return Kd(Ir)},useDebugValue:Yd,useDeferredValue:function(t,i){var a=xn();return nn===null?Xd(a,t,i):ly(a,nn.memoizedState,t,i)},useTransition:function(){var t=Kd(Ir)[0],i=xn().memoizedState;return[typeof t=="boolean"?t:$l(t),i]},useSyncExternalStore:jp,useId:dy,useHostTransitionStatus:Jd,useFormState:Zp,useActionState:Zp,useOptimistic:function(t,i){var a=xn();return nn!==null?Hp(a,nn,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Fd,useCacheRefresh:fy};_y.useEffectEvent=ty;function nf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=gs(),h=ia(o);h.payload=i,a!=null&&(h.callback=a),i=sa(t,h,o),i!==null&&(Yi(i,t,o),Hl(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=gs(),h=ia(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=sa(t,h,o),i!==null&&(Yi(i,t,o),Hl(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=gs(),o=ia(a);o.tag=2,i!=null&&(o.callback=i),i=sa(t,o,a),i!==null&&(Yi(i,t,a),Hl(i,t,a))}};function by(t,i,a,o,h,d,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,y):i.prototype&&i.prototype.isPureReactComponent?!Ll(a,o)||!Ll(h,d):!0}function vy(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&sf.enqueueReplaceState(i,i.state,null)}function uo(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Ty(t){eu(t)}function Sy(t){console.error(t)}function Ey(t){eu(t)}function Eu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function wy(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function rf(t,i,a){return a=ia(a),a.tag=3,a.payload={element:null},a.callback=function(){Eu(t,i)},a}function Ay(t){return t=ia(t),t.tag=3,t}function Ry(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){wy(i,a,o)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){wy(i,a,o),typeof h!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function rE(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Vo(i,a,h,!0),a=hs.current,a!==null){switch(a.tag){case 31:case 13:return Os===null?Lu():a.alternate===null&&kn===0&&(kn=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===uu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Nf(t,o,h)),!1;case 22:return a.flags|=65536,o===uu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Nf(t,o,h)),!1}throw Error(s(435,a.tag))}return Nf(t,o,h),Lu(),!1}if(xt)return i=hs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Ed&&(t=Error(s(422),{cause:o}),Pl(Ns(t,a)))):(o!==Ed&&(i=Error(s(423),{cause:o}),Pl(Ns(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Ns(o,a),h=rf(t.stateNode,o,h),Od(t,h),kn!==4&&(kn=2)),!1;var d=Error(s(520),{cause:o});if(d=Ns(d,a),ic===null?ic=[d]:ic.push(d),kn!==4&&(kn=2),i===null)return!0;o=Ns(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=rf(a.stateNode,o,t),Od(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ua===null||!ua.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ay(h),Ry(h,t,a,o),Od(a,h),!1}a=a.return}while(a!==null);return!1}var af=Error(s(461)),Un=!1;function hi(t,i,a,o){i.child=t===null?Np(i,null,a,o):lo(i,t.child,a,o)}function Iy(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var y={};for(var T in o)T!=="ref"&&(y[T]=o[T])}else y=o;return so(i),o=Bd(t,i,a,y,d,h),T=Ud(),t!==null&&!Un?(qd(t,i,h),Cr(t,i,h)):(xt&&T&&Td(i),i.flags|=1,hi(t,i,o,h),i.child)}function Cy(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!_d(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ky(t,i,d,o,h)):(t=su(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!mf(t,h)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ll,a(y,o)&&t.ref===i.ref)return Cr(t,i,h)}return i.flags|=1,t=Sr(d,o),t.ref=i.ref,t.return=i,i.child=t}function ky(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Ll(d,o)&&t.ref===i.ref)if(Un=!1,i.pendingProps=o=d,mf(t,h))(t.flags&131072)!==0&&(Un=!0);else return i.lanes=t.lanes,Cr(t,i,h)}return of(t,i,a,o,h)}function Ny(t,i,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return Dy(t,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&lu(i,d!==null?d.cachePool:null),d!==null?xp(i,d):Vd(),Op(i);else return o=i.lanes=536870912,Dy(t,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(lu(i,d.cachePool),xp(i,d),aa(),i.memoizedState=null):(t!==null&&lu(i,null),Vd(),aa());return hi(t,i,h,a),i.child}function Yl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Dy(t,i,a,o,h){var d=Nd();return d=d===null?null:{parent:zn._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&lu(i,null),Vd(),Op(i),t!==null&&Vo(t,i,o,!0),i.childLanes=h,null}function wu(t,i){return i=Ru({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function My(t,i,a){return lo(i,t.child,null,a),t=wu(i,i.pendingProps),t.flags|=2,ds(i),i.memoizedState=null,t}function aE(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(xt){if(o.mode==="hidden")return t=wu(i,o),i.lanes=536870912,Yl(null,t);if(Pd(i),(t=pn)?(t=F_(t,xs),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Zr!==null?{id:rr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},a=gp(t),a.return=i,i.child=a,ci=i,pn=null)):t=null,t===null)throw ea(i);return i.lanes=536870912,null}return wu(i,o)}var d=t.memoizedState;if(d!==null){var y=d.dehydrated;if(Pd(i),h)if(i.flags&256)i.flags&=-257,i=My(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Un||Vo(t,i,a,!1),h=(a&t.childLanes)!==0,Un||h){if(o=cn,o!==null&&(y=ve(o,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,eo(t,y),Yi(o,t,y),af;Lu(),i=My(t,i,a)}else t=d.treeContext,pn=Ls(y.nextSibling),ci=i,xt=!0,Jr=null,xs=!1,t!==null&&_p(i,t),i=wu(i,o),i.flags|=4096;return i}return t=Sr(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Au(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function of(t,i,a,o,h){return so(i),a=Bd(t,i,a,o,void 0,h),o=Ud(),t!==null&&!Un?(qd(t,i,h),Cr(t,i,h)):(xt&&o&&Td(i),i.flags|=1,hi(t,i,a,h),i.child)}function xy(t,i,a,o,h,d){return so(i),i.updateQueue=null,a=Vp(i,o,a,h),Lp(t),o=Ud(),t!==null&&!Un?(qd(t,i,d),Cr(t,i,d)):(xt&&o&&Td(i),i.flags|=1,hi(t,i,a,d),i.child)}function Oy(t,i,a,o,h){if(so(i),i.stateNode===null){var d=Mo,y=a.contextType;typeof y=="object"&&y!==null&&(d=ui(y)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},Md(i),y=a.contextType,d.context=typeof y=="object"&&y!==null?ui(y):Mo,d.state=i.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(nf(i,a,y,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&sf.enqueueReplaceState(d,d.state,null),Gl(i,o,d,h),Fl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,x=uo(a,T);d.props=x;var K=d.context,ie=a.contextType;y=Mo,typeof ie=="object"&&ie!==null&&(y=ui(ie));var le=a.getDerivedStateFromProps;ie=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,ie||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||K!==y)&&vy(i,d,o,y),na=!1;var $=i.memoizedState;d.state=$,Gl(i,o,d,h),Fl(),K=i.memoizedState,T||$!==K||na?(typeof le=="function"&&(nf(i,a,le,o),K=i.memoizedState),(x=na||by(i,a,x,o,$,K,y))?(ie||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=K),d.props=o,d.state=K,d.context=y,o=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,xd(t,i),y=i.memoizedProps,ie=uo(a,y),d.props=ie,le=i.pendingProps,$=d.context,K=a.contextType,x=Mo,typeof K=="object"&&K!==null&&(x=ui(K)),T=a.getDerivedStateFromProps,(K=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==le||$!==x)&&vy(i,d,o,x),na=!1,$=i.memoizedState,d.state=$,Gl(i,o,d,h),Fl();var Z=i.memoizedState;y!==le||$!==Z||na||t!==null&&t.dependencies!==null&&au(t.dependencies)?(typeof T=="function"&&(nf(i,a,T,o),Z=i.memoizedState),(ie=na||by(i,a,ie,o,$,Z,x)||t!==null&&t.dependencies!==null&&au(t.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Z,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Z,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=Z),d.props=o,d.state=Z,d.context=x,o=ie):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,Au(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=lo(i,t.child,null,h),i.child=lo(i,null,a,h)):hi(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Cr(t,i,h),t}function Ly(t,i,a,o){return no(),i.flags|=256,hi(t,i,a,o),i.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cf(t){return{baseLanes:t,cachePool:wp()}}function uf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ms),t}function Vy(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,y;if((y=d)||(y=t!==null&&t.memoizedState===null?!1:(Mn.current&2)!==0),y&&(h=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,t===null){if(xt){if(h?ra(i):aa(),(t=pn)?(t=F_(t,xs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Zr!==null?{id:rr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},a=gp(t),a.return=i,i.child=a,ci=i,pn=null)):t=null,t===null)throw ea(i);return Kf(t)?i.lanes=32:i.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(aa(),h=i.mode,T=Ru({mode:"hidden",children:T},h),o=to(o,h,a,null),T.return=i,o.return=i,T.sibling=o,i.child=T,o=i.child,o.memoizedState=cf(a),o.childLanes=uf(t,y,a),i.memoizedState=lf,Yl(null,o)):(ra(i),hf(i,T))}var x=t.memoizedState;if(x!==null&&(T=x.dehydrated,T!==null)){if(d)i.flags&256?(ra(i),i.flags&=-257,i=df(t,i,a)):i.memoizedState!==null?(aa(),i.child=t.child,i.flags|=128,i=null):(aa(),T=o.fallback,h=i.mode,o=Ru({mode:"visible",children:o.children},h),T=to(T,h,a,null),T.flags|=2,o.return=i,T.return=i,o.sibling=T,i.child=o,lo(i,t.child,null,a),o=i.child,o.memoizedState=cf(a),o.childLanes=uf(t,y,a),i.memoizedState=lf,i=Yl(null,o));else if(ra(i),Kf(T)){if(y=T.nextSibling&&T.nextSibling.dataset,y)var K=y.dgst;y=K,o=Error(s(419)),o.stack="",o.digest=y,Pl({value:o,source:null,stack:null}),i=df(t,i,a)}else if(Un||Vo(t,i,a,!1),y=(a&t.childLanes)!==0,Un||y){if(y=cn,y!==null&&(o=ve(y,a),o!==0&&o!==x.retryLane))throw x.retryLane=o,eo(t,o),Yi(y,t,o),af;Gf(T)||Lu(),i=df(t,i,a)}else Gf(T)?(i.flags|=192,i.child=t.child,i=null):(t=x.treeContext,pn=Ls(T.nextSibling),ci=i,xt=!0,Jr=null,xs=!1,t!==null&&_p(i,t),i=hf(i,o.children),i.flags|=4096);return i}return h?(aa(),T=o.fallback,h=i.mode,x=t.child,K=x.sibling,o=Sr(x,{mode:"hidden",children:o.children}),o.subtreeFlags=x.subtreeFlags&65011712,K!==null?T=Sr(K,T):(T=to(T,h,a,null),T.flags|=2),T.return=i,o.return=i,o.sibling=T,i.child=o,Yl(null,o),o=i.child,T=t.child.memoizedState,T===null?T=cf(a):(h=T.cachePool,h!==null?(x=zn._currentValue,h=h.parent!==x?{parent:x,pool:x}:h):h=wp(),T={baseLanes:T.baseLanes|a,cachePool:h}),o.memoizedState=T,o.childLanes=uf(t,y,a),i.memoizedState=lf,Yl(t.child,o)):(ra(i),a=t.child,t=a.sibling,a=Sr(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(y=i.deletions,y===null?(i.deletions=[t],i.flags|=16):y.push(t)),i.child=a,i.memoizedState=null,a)}function hf(t,i){return i=Ru({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ru(t,i){return t=us(22,t,null,i),t.lanes=0,t}function df(t,i,a){return lo(i,t.child,null,a),t=hf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function jy(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),Rd(t.return,i,a)}function ff(t,i,a,o,h,d){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=a,y.tailMode=h,y.treeForkCount=d)}function Py(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var y=Mn.current,T=(y&2)!==0;if(T?(y=y&1|2,i.flags|=128):y&=1,ye(Mn,y),hi(t,i,o,a),o=xt?jl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jy(t,a,i);else if(t.tag===19)jy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&mu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),ff(i,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&mu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ff(i,!0,a,null,d,o);break;case"together":ff(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function Cr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),ca|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Vo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Sr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Sr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function mf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&au(t)))}function oE(t,i,a){switch(i.tag){case 3:un(i,i.stateNode.containerInfo),ta(i,zn,t.memoizedState.cache),no();break;case 27:case 5:bn(i);break;case 4:un(i,i.stateNode.containerInfo);break;case 10:ta(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Pd(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(ra(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Vy(t,i,a):(ra(i),t=Cr(t,i,a),t!==null?t.sibling:null);ra(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Vo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Py(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ye(Mn,Mn.current),o)break;return null;case 22:return i.lanes=0,Ny(t,i,a,i.pendingProps);case 24:ta(i,zn,t.memoizedState.cache)}return Cr(t,i,a)}function zy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Un=!0;else{if(!mf(t,a)&&(i.flags&128)===0)return Un=!1,oE(t,i,a);Un=(t.flags&131072)!==0}else Un=!1,xt&&(i.flags&1048576)!==0&&yp(i,jl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=ao(i.elementType),i.type=t,typeof t=="function")_d(t)?(o=uo(t,o),i.tag=1,i=Oy(null,i,t,o,a)):(i.tag=0,i=of(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===lt){i.tag=11,i=Iy(null,i,t,o,a);break e}else if(h===D){i.tag=14,i=Cy(null,i,t,o,a);break e}}throw i=Kt(t)||t,Error(s(306,i,""))}}return i;case 0:return of(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=uo(o,i.pendingProps),Oy(t,i,o,h,a);case 3:e:{if(un(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,xd(t,i),Gl(i,o,null,a);var y=i.memoizedState;if(o=y.cache,ta(i,zn,o),o!==d.cache&&Id(i,[zn],a,!0),Fl(),o=y.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ly(t,i,o,a);break e}else if(o!==h){h=Ns(Error(s(424)),i),Pl(h),i=Ly(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pn=Ls(t.firstChild),ci=i,xt=!0,Jr=null,xs=!0,a=Np(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(no(),o===h){i=Cr(t,i,a);break e}hi(t,i,o,a)}i=i.child}return i;case 26:return Au(t,i),t===null?(a=Y_(i.type,null,i.pendingProps,null))?i.memoizedState=a:xt||(a=i.type,t=i.pendingProps,o=qu(it.current).createElement(a),o[mn]=i,o[Vn]=t,di(o,a,t),wn(o),i.stateNode=o):i.memoizedState=Y_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return bn(i),t===null&&xt&&(o=i.stateNode=$_(i.type,i.pendingProps,it.current),ci=i,xs=!0,h=pn,ma(i.type)?($f=h,pn=Ls(o.firstChild)):pn=h),hi(t,i,i.pendingProps.children,a),Au(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&xt&&((h=o=pn)&&(o=jE(o,i.type,i.pendingProps,xs),o!==null?(i.stateNode=o,ci=i,pn=Ls(o.firstChild),xs=!1,h=!0):h=!1),h||ea(i)),bn(i),h=i.type,d=i.pendingProps,y=t!==null?t.memoizedProps:null,o=d.children,qf(h,d)?o=null:y!==null&&qf(h,y)&&(i.flags|=32),i.memoizedState!==null&&(h=Bd(t,i,ZS,null,null,a),hc._currentValue=h),Au(t,i),hi(t,i,o,a),i.child;case 6:return t===null&&xt&&((t=a=pn)&&(a=PE(a,i.pendingProps,xs),a!==null?(i.stateNode=a,ci=i,pn=null,t=!0):t=!1),t||ea(i)),null;case 13:return Vy(t,i,a);case 4:return un(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=lo(i,null,o,a):hi(t,i,o,a),i.child;case 11:return Iy(t,i,i.type,i.pendingProps,a);case 7:return hi(t,i,i.pendingProps,a),i.child;case 8:return hi(t,i,i.pendingProps.children,a),i.child;case 12:return hi(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ta(i,i.type,o.value),hi(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,so(i),h=ui(h),o=o(h),i.flags|=1,hi(t,i,o,a),i.child;case 14:return Cy(t,i,i.type,i.pendingProps,a);case 15:return ky(t,i,i.type,i.pendingProps,a);case 19:return Py(t,i,a);case 31:return aE(t,i,a);case 22:return Ny(t,i,a,i.pendingProps);case 24:return so(i),o=ui(zn),t===null?(h=Nd(),h===null&&(h=cn,d=Cd(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},Md(i),ta(i,zn,h)):((t.lanes&a)!==0&&(xd(t,i),Gl(i,null,null,a),Fl()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ta(i,zn,o)):(o=d.cache,ta(i,zn,o),o!==h.cache&&Id(i,[zn],a,!0))),hi(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function kr(t){t.flags|=4}function gf(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(d_())t.flags|=8192;else throw oo=uu,Dd}else t.flags&=-16777217}function By(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!tb(i))if(d_())t.flags|=8192;else throw oo=uu,Dd}function Iu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?er():536870912,t.lanes|=i,Qo|=i)}function Xl(t,i){if(!xt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function yn(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function lE(t,i,a){var o=i.pendingProps;switch(Sd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(i),null;case 1:return yn(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ar(zn),We(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Lo(i)?kr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wd())),yn(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(kr(i),d!==null?(yn(i),By(i,d)):(yn(i),gf(i,h,null,o,a))):d?d!==t.memoizedState?(kr(i),yn(i),By(i,d)):(yn(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&kr(i),yn(i),gf(i,h,t,o,a)),null;case 27:if(Ji(i),a=it.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&kr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return yn(i),null}t=Se.current,Lo(i)?bp(i):(t=$_(h,o,a),i.stateNode=t,kr(i))}return yn(i),null;case 5:if(Ji(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&kr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return yn(i),null}if(d=Se.current,Lo(i))bp(i);else{var y=qu(it.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?y.createElement(h,{is:o.is}):y.createElement(h)}}d[mn]=i,d[Vn]=o;e:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=d;e:switch(di(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&kr(i)}}return yn(i),gf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&kr(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=it.current,Lo(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=ci,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[mn]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||V_(t.nodeValue,a)),t||ea(i,!0)}else t=qu(t).createTextNode(o),t[mn]=i,i.stateNode=t}return yn(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=Lo(i),a!==null){if(t===null){if(!o)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[mn]=i}else no(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yn(i),t=!1}else a=wd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(ds(i),i):(ds(i),null);if((i.flags&128)!==0)throw Error(s(558))}return yn(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Lo(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[mn]=i}else no(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yn(i),h=!1}else h=wd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(ds(i),i):(ds(i),null)}return ds(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Iu(i,i.updateQueue),yn(i),null);case 4:return We(),t===null&&jf(i.stateNode.containerInfo),yn(i),null;case 10:return Ar(i.type),yn(i),null;case 19:if(re(Mn),o=i.memoizedState,o===null)return yn(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)Xl(o,!1);else{if(kn!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=mu(t),d!==null){for(i.flags|=128,Xl(o,!1),t=d.updateQueue,i.updateQueue=t,Iu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)mp(a,t),a=a.sibling;return ye(Mn,Mn.current&1|2),xt&&Er(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&Nn()>Mu&&(i.flags|=128,h=!0,Xl(o,!1),i.lanes=4194304)}else{if(!h)if(t=mu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Iu(i,t),Xl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!xt)return yn(i),null}else 2*Nn()-o.renderingStartTime>Mu&&a!==536870912&&(i.flags|=128,h=!0,Xl(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(t=o.last,t!==null?t.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Nn(),t.sibling=null,a=Mn.current,ye(Mn,h?a&1|2:a&1),xt&&Er(i,o.treeForkCount),t):(yn(i),null);case 22:case 23:return ds(i),jd(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(yn(i),i.subtreeFlags&6&&(i.flags|=8192)):yn(i),a=i.updateQueue,a!==null&&Iu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&re(ro),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ar(zn),yn(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function cE(t,i){switch(Sd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ar(zn),We(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ji(i),null;case 31:if(i.memoizedState!==null){if(ds(i),i.alternate===null)throw Error(s(340));no()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(ds(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));no()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return re(Mn),null;case 4:return We(),null;case 10:return Ar(i.type),null;case 22:case 23:return ds(i),jd(),t!==null&&re(ro),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ar(zn),null;case 25:return null;default:return null}}function Uy(t,i){switch(Sd(i),i.tag){case 3:Ar(zn),We();break;case 26:case 27:case 5:Ji(i);break;case 4:We();break;case 31:i.memoizedState!==null&&ds(i);break;case 13:ds(i);break;case 19:re(Mn);break;case 10:Ar(i.type);break;case 22:case 23:ds(i),jd(),t!==null&&re(ro);break;case 24:Ar(zn)}}function Zl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,y=a.inst;o=d(),y.destroy=o}a=a.next}while(a!==h)}}catch(T){tn(i,i.return,T)}}function oa(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var y=o.inst,T=y.destroy;if(T!==void 0){y.destroy=void 0,h=i;var x=a,K=T;try{K()}catch(ie){tn(h,x,ie)}}}o=o.next}while(o!==d)}}catch(ie){tn(i,i.return,ie)}}function qy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Mp(i,a)}catch(o){tn(t,t.return,o)}}}function Hy(t,i,a){a.props=uo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){tn(t,i,o)}}function Jl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){tn(t,i,h)}}function or(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){tn(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){tn(t,i,h)}else a.current=null}function Fy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){tn(t,t.return,h)}}function pf(t,i,a){try{var o=t.stateNode;DE(o,t.type,a,i),o[Vn]=i}catch(h){tn(t,t.return,h)}}function Gy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ma(t.type)||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ma(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _f(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Y));else if(o!==4&&(o===27&&ma(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(_f(t,i,a),t=t.sibling;t!==null;)_f(t,i,a),t=t.sibling}function Cu(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&ma(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cu(t,i,a),t=t.sibling;t!==null;)Cu(t,i,a),t=t.sibling}function Ky(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);di(i,o,a),i[mn]=t,i[Vn]=a}catch(d){tn(t,t.return,d)}}var Nr=!1,qn=!1,bf=!1,$y=typeof WeakSet=="function"?WeakSet:Set,si=null;function uE(t,i){if(t=t.containerInfo,Bf=Wu,t=rp(t),hd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var y=0,T=-1,x=-1,K=0,ie=0,le=t,$=null;t:for(;;){for(var Z;le!==a||h!==0&&le.nodeType!==3||(T=y+h),le!==d||o!==0&&le.nodeType!==3||(x=y+o),le.nodeType===3&&(y+=le.nodeValue.length),(Z=le.firstChild)!==null;)$=le,le=Z;for(;;){if(le===t)break t;if($===a&&++K===h&&(T=y),$===d&&++ie===o&&(x=y),(Z=le.nextSibling)!==null)break;le=$,$=le.parentNode}le=Z}a=T===-1||x===-1?null:{start:T,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Uf={focusedElem:t,selectionRange:a},Wu=!1,si=i;si!==null;)if(i=si,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,si=t;else for(;si!==null;){switch(i=si,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Ne=uo(a.type,h);t=o.getSnapshotBeforeUpdate(Ne,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Je){tn(a,a.return,Je)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,si=t;break}si=i.return}}function Qy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Mr(t,a),o&4&&Zl(5,a);break;case 1:if(Mr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(y){tn(a,a.return,y)}else{var h=uo(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(y){tn(a,a.return,y)}}o&64&&qy(a),o&512&&Jl(a,a.return);break;case 3:if(Mr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Mp(t,i)}catch(y){tn(a,a.return,y)}}break;case 27:i===null&&o&4&&Ky(a);case 26:case 5:Mr(t,a),i===null&&o&4&&Fy(a),o&512&&Jl(a,a.return);break;case 12:Mr(t,a);break;case 31:Mr(t,a),o&4&&Xy(t,a);break;case 13:Mr(t,a),o&4&&Zy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=bE.bind(null,a),zE(t,a))));break;case 22:if(o=a.memoizedState!==null||Nr,!o){i=i!==null&&i.memoizedState!==null||qn,h=Nr;var d=qn;Nr=o,(qn=i)&&!d?xr(t,a,(a.subtreeFlags&8772)!==0):Mr(t,a),Nr=h,qn=d}break;case 30:break;default:Mr(t,a)}}function Wy(t){var i=t.alternate;i!==null&&(t.alternate=null,Wy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Qr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Sn=null,Ki=!1;function Dr(t,i,a){for(a=a.child;a!==null;)Yy(t,i,a),a=a.sibling}function Yy(t,i,a){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Di,a)}catch{}switch(a.tag){case 26:qn||or(a,i),Dr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:qn||or(a,i);var o=Sn,h=Ki;ma(a.type)&&(Sn=a.stateNode,Ki=!1),Dr(t,i,a),lc(a.stateNode),Sn=o,Ki=h;break;case 5:qn||or(a,i);case 6:if(o=Sn,h=Ki,Sn=null,Dr(t,i,a),Sn=o,Ki=h,Sn!==null)if(Ki)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(a.stateNode)}catch(d){tn(a,i,d)}else try{Sn.removeChild(a.stateNode)}catch(d){tn(a,i,d)}break;case 18:Sn!==null&&(Ki?(t=Sn,q_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),nl(t)):q_(Sn,a.stateNode));break;case 4:o=Sn,h=Ki,Sn=a.stateNode.containerInfo,Ki=!0,Dr(t,i,a),Sn=o,Ki=h;break;case 0:case 11:case 14:case 15:oa(2,a,i),qn||oa(4,a,i),Dr(t,i,a);break;case 1:qn||(or(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Hy(a,i,o)),Dr(t,i,a);break;case 21:Dr(t,i,a);break;case 22:qn=(o=qn)||a.memoizedState!==null,Dr(t,i,a),qn=o;break;default:Dr(t,i,a)}}function Xy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{nl(t)}catch(a){tn(i,i.return,a)}}}function Zy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{nl(t)}catch(a){tn(i,i.return,a)}}function hE(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new $y),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new $y),i;default:throw Error(s(435,t.tag))}}function ku(t,i){var a=hE(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=vE.bind(null,t,o);o.then(h,h)}})}function $i(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,y=i,T=y;e:for(;T!==null;){switch(T.tag){case 27:if(ma(T.type)){Sn=T.stateNode,Ki=!1;break e}break;case 5:Sn=T.stateNode,Ki=!1;break e;case 3:case 4:Sn=T.stateNode.containerInfo,Ki=!0;break e}T=T.return}if(Sn===null)throw Error(s(160));Yy(d,y,h),Sn=null,Ki=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Jy(i,t),i=i.sibling}var qs=null;function Jy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:$i(i,t),Qi(t),o&4&&(oa(3,t,t.return),Zl(3,t),oa(5,t,t.return));break;case 1:$i(i,t),Qi(t),o&512&&(qn||a===null||or(a,a.return)),o&64&&Nr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=qs;if($i(i,t),Qi(t),o&512&&(qn||a===null||or(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[os]||d[mn]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),di(d,o,a),d[mn]=t,wn(d),o=d;break e;case"link":var y=J_("link","href",h).get(o+(a.href||""));if(y){for(var T=0;T<y.length;T++)if(d=y[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(T,1);break t}}d=h.createElement(o),di(d,o,a),h.head.appendChild(d);break;case"meta":if(y=J_("meta","content",h).get(o+(a.content||""))){for(T=0;T<y.length;T++)if(d=y[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(T,1);break t}}d=h.createElement(o),di(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[mn]=t,wn(d),o=d}t.stateNode=o}else eb(h,t.type,t.stateNode);else t.stateNode=Z_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?eb(h,t.type,t.stateNode):Z_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&pf(t,t.memoizedProps,a.memoizedProps)}break;case 27:$i(i,t),Qi(t),o&512&&(qn||a===null||or(a,a.return)),a!==null&&o&4&&pf(t,t.memoizedProps,a.memoizedProps);break;case 5:if($i(i,t),Qi(t),o&512&&(qn||a===null||or(a,a.return)),t.flags&32){h=t.stateNode;try{Ti(h,"")}catch(Ne){tn(t,t.return,Ne)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,pf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(bf=!0);break;case 6:if($i(i,t),Qi(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(Ne){tn(t,t.return,Ne)}}break;case 3:if(Gu=null,h=qs,qs=Hu(i.containerInfo),$i(i,t),qs=h,Qi(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{nl(i.containerInfo)}catch(Ne){tn(t,t.return,Ne)}bf&&(bf=!1,e_(t));break;case 4:o=qs,qs=Hu(t.stateNode.containerInfo),$i(i,t),Qi(t),qs=o;break;case 12:$i(i,t),Qi(t);break;case 31:$i(i,t),Qi(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ku(t,o)));break;case 13:$i(i,t),Qi(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Du=Nn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ku(t,o)));break;case 22:h=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,K=Nr,ie=qn;if(Nr=K||h,qn=ie||x,$i(i,t),qn=ie,Nr=K,Qi(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||x||Nr||qn||ho(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,h)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{T=x.stateNode;var le=x.memoizedProps.style,$=le!=null&&le.hasOwnProperty("display")?le.display:null;T.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Ne){tn(x,x.return,Ne)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(Ne){tn(x,x.return,Ne)}}}else if(i.tag===18){if(a===null){x=i;try{var Z=x.stateNode;h?H_(Z,!0):H_(x.stateNode,!1)}catch(Ne){tn(x,x.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,ku(t,a))));break;case 19:$i(i,t),Qi(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ku(t,o)));break;case 30:break;case 21:break;default:$i(i,t),Qi(t)}}function Qi(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Gy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=yf(t);Cu(t,d,h);break;case 5:var y=a.stateNode;a.flags&32&&(Ti(y,""),a.flags&=-33);var T=yf(t);Cu(t,T,y);break;case 3:case 4:var x=a.stateNode.containerInfo,K=yf(t);_f(t,K,x);break;default:throw Error(s(161))}}catch(ie){tn(t,t.return,ie)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function e_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;e_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Mr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Qy(t,i.alternate,i),i=i.sibling}function ho(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:oa(4,i,i.return),ho(i);break;case 1:or(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Hy(i,i.return,a),ho(i);break;case 27:lc(i.stateNode);case 26:case 5:or(i,i.return),ho(i);break;case 22:i.memoizedState===null&&ho(i);break;case 30:ho(i);break;default:ho(i)}t=t.sibling}}function xr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,y=d.flags;switch(d.tag){case 0:case 11:case 15:xr(h,d,a),Zl(4,d);break;case 1:if(xr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(K){tn(o,o.return,K)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)Dp(x[h],T)}catch(K){tn(o,o.return,K)}}a&&y&64&&qy(d),Jl(d,d.return);break;case 27:Ky(d);case 26:case 5:xr(h,d,a),a&&o===null&&y&4&&Fy(d),Jl(d,d.return);break;case 12:xr(h,d,a);break;case 31:xr(h,d,a),a&&y&4&&Xy(h,d);break;case 13:xr(h,d,a),a&&y&4&&Zy(h,d);break;case 22:d.memoizedState===null&&xr(h,d,a),Jl(d,d.return);break;case 30:break;default:xr(h,d,a)}i=i.sibling}}function vf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&zl(a))}function Tf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&zl(t))}function Hs(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)t_(t,i,a,o),i=i.sibling}function t_(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Hs(t,i,a,o),h&2048&&Zl(9,i);break;case 1:Hs(t,i,a,o);break;case 3:Hs(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&zl(t)));break;case 12:if(h&2048){Hs(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,y=d.id,T=d.onPostCommit;typeof T=="function"&&T(y,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){tn(i,i.return,x)}}else Hs(t,i,a,o);break;case 31:Hs(t,i,a,o);break;case 13:Hs(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,y=i.alternate,i.memoizedState!==null?d._visibility&2?Hs(t,i,a,o):ec(t,i):d._visibility&2?Hs(t,i,a,o):(d._visibility|=2,Go(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&vf(y,i);break;case 24:Hs(t,i,a,o),h&2048&&Tf(i.alternate,i);break;default:Hs(t,i,a,o)}}function Go(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,y=i,T=a,x=o,K=y.flags;switch(y.tag){case 0:case 11:case 15:Go(d,y,T,x,h),Zl(8,y);break;case 23:break;case 22:var ie=y.stateNode;y.memoizedState!==null?ie._visibility&2?Go(d,y,T,x,h):ec(d,y):(ie._visibility|=2,Go(d,y,T,x,h)),h&&K&2048&&vf(y.alternate,y);break;case 24:Go(d,y,T,x,h),h&&K&2048&&Tf(y.alternate,y);break;default:Go(d,y,T,x,h)}i=i.sibling}}function ec(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:ec(a,o),h&2048&&vf(o.alternate,o);break;case 24:ec(a,o),h&2048&&Tf(o.alternate,o);break;default:ec(a,o)}i=i.sibling}}var tc=8192;function Ko(t,i,a){if(t.subtreeFlags&tc)for(t=t.child;t!==null;)n_(t,i,a),t=t.sibling}function n_(t,i,a){switch(t.tag){case 26:Ko(t,i,a),t.flags&tc&&t.memoizedState!==null&&XE(a,qs,t.memoizedState,t.memoizedProps);break;case 5:Ko(t,i,a);break;case 3:case 4:var o=qs;qs=Hu(t.stateNode.containerInfo),Ko(t,i,a),qs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=tc,tc=16777216,Ko(t,i,a),tc=o):Ko(t,i,a));break;default:Ko(t,i,a)}}function i_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function nc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];si=o,r_(o,t)}i_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)s_(t),t=t.sibling}function s_(t){switch(t.tag){case 0:case 11:case 15:nc(t),t.flags&2048&&oa(9,t,t.return);break;case 3:nc(t);break;case 12:nc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Nu(t)):nc(t);break;default:nc(t)}}function Nu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];si=o,r_(o,t)}i_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:oa(8,i,i.return),Nu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Nu(i));break;default:Nu(i)}t=t.sibling}}function r_(t,i){for(;si!==null;){var a=si;switch(a.tag){case 0:case 11:case 15:oa(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:zl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,si=o;else e:for(a=t;si!==null;){o=si;var h=o.sibling,d=o.return;if(Wy(o),o===a){si=null;break e}if(h!==null){h.return=d,si=h;break e}si=d}}}var dE={getCacheForType:function(t){var i=ui(zn),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return ui(zn).controller.signal}},fE=typeof WeakMap=="function"?WeakMap:Map,Qt=0,cn=null,St=null,Rt=0,en=0,fs=null,la=!1,$o=!1,Sf=!1,Or=0,kn=0,ca=0,fo=0,Ef=0,ms=0,Qo=0,ic=null,Wi=null,wf=!1,Du=0,a_=0,Mu=1/0,xu=null,ua=null,Zn=0,ha=null,Wo=null,Lr=0,Af=0,Rf=null,o_=null,sc=0,If=null;function gs(){return(Qt&2)!==0&&Rt!==0?Rt&-Rt:te.T!==null?xf():Bt()}function l_(){if(ms===0)if((Rt&536870912)===0||xt){var t=Ss;Ss<<=1,(Ss&3932160)===0&&(Ss=262144),ms=t}else ms=536870912;return t=hs.current,t!==null&&(t.flags|=32),ms}function Yi(t,i,a){(t===cn&&(en===2||en===9)||t.cancelPendingCommit!==null)&&(Yo(t,0),da(t,Rt,ms,!1)),rs(t,a),((Qt&2)===0||t!==cn)&&(t===cn&&((Qt&2)===0&&(fo|=a),kn===4&&da(t,Rt,ms,!1)),lr(t))}function c_(t,i,a){if((Qt&6)!==0)throw Error(s(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||vt(t,i),h=o?pE(t,i):kf(t,i,!0),d=o;do{if(h===0){$o&&!o&&da(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!mE(a)){h=kf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;e:{var T=t;h=ic;var x=T.current.memoizedState.isDehydrated;if(x&&(Yo(T,y).flags|=256),y=kf(T,y,!1),y!==2){if(Sf&&!x){T.errorRecoveryDisabledLanes|=d,fo|=d,h=4;break e}d=Wi,Wi=h,d!==null&&(Wi===null?Wi=d:Wi.push.apply(Wi,d))}h=y}if(d=!1,h!==2)continue}}if(h===1){Yo(t,0),da(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:da(o,i,ms,!la);break e;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Du+300-Nn(),10<h)){if(da(o,i,ms,!la),Dn(o,0,!0)!==0)break e;Lr=i,o.timeoutHandle=B_(u_.bind(null,o,a,Wi,xu,wf,i,ms,fo,Qo,la,d,"Throttled",-0,0),h);break e}u_(o,a,Wi,xu,wf,i,ms,fo,Qo,la,d,null,-0,0)}}break}while(!0);lr(t)}function u_(t,i,a,o,h,d,y,T,x,K,ie,le,$,Z){if(t.timeoutHandle=-1,le=i.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Y},n_(i,d,le);var Ne=(d&62914560)===d?Du-Nn():(d&4194048)===d?a_-Nn():0;if(Ne=ZE(le,Ne),Ne!==null){Lr=d,t.cancelPendingCommit=Ne(__.bind(null,t,i,d,a,o,h,y,T,x,ie,le,null,$,Z)),da(t,d,y,!K);return}}__(t,i,d,a,o,h,y,T,x)}function mE(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!cs(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function da(t,i,a,o){i&=~Ef,i&=~fo,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-on(h),y=1<<d;o[d]=-1,h&=~y}a!==0&&U(t,a,i)}function Ou(){return(Qt&6)===0?(rc(0),!1):!0}function Cf(){if(St!==null){if(en===0)var t=St.return;else t=St,wr=io=null,Hd(t),Bo=null,Ul=0,t=St;for(;t!==null;)Uy(t.alternate,t),t=t.return;St=null}}function Yo(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,OE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Lr=0,Cf(),cn=t,St=a=Sr(t.current,null),Rt=i,en=0,fs=null,la=!1,$o=vt(t,i),Sf=!1,Qo=ms=Ef=fo=ca=kn=0,Wi=ic=null,wf=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-on(o),d=1<<h;i|=t[h],o&=~d}return Or=i,tu(),a}function h_(t,i){mt=null,te.H=Wl,i===zo||i===cu?(i=Ip(),en=3):i===Dd?(i=Ip(),en=4):en=i===af?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fs=i,St===null&&(kn=1,Eu(t,Ns(i,t.current)))}function d_(){var t=hs.current;return t===null?!0:(Rt&4194048)===Rt?Os===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?t===Os:!1}function f_(){var t=te.H;return te.H=Wl,t===null?Wl:t}function m_(){var t=te.A;return te.A=dE,t}function Lu(){kn=4,la||(Rt&4194048)!==Rt&&hs.current!==null||($o=!0),(ca&134217727)===0&&(fo&134217727)===0||cn===null||da(cn,Rt,ms,!1)}function kf(t,i,a){var o=Qt;Qt|=2;var h=f_(),d=m_();(cn!==t||Rt!==i)&&(xu=null,Yo(t,i)),i=!1;var y=kn;e:do try{if(en!==0&&St!==null){var T=St,x=fs;switch(en){case 8:Cf(),y=6;break e;case 3:case 2:case 9:case 6:hs.current===null&&(i=!0);var K=en;if(en=0,fs=null,Xo(t,T,x,K),a&&$o){y=0;break e}break;default:K=en,en=0,fs=null,Xo(t,T,x,K)}}gE(),y=kn;break}catch(ie){h_(t,ie)}while(!0);return i&&t.shellSuspendCounter++,wr=io=null,Qt=o,te.H=h,te.A=d,St===null&&(cn=null,Rt=0,tu()),y}function gE(){for(;St!==null;)g_(St)}function pE(t,i){var a=Qt;Qt|=2;var o=f_(),h=m_();cn!==t||Rt!==i?(xu=null,Mu=Nn()+500,Yo(t,i)):$o=vt(t,i);e:do try{if(en!==0&&St!==null){i=St;var d=fs;t:switch(en){case 1:en=0,fs=null,Xo(t,i,d,1);break;case 2:case 9:if(Ap(d)){en=0,fs=null,p_(i);break}i=function(){en!==2&&en!==9||cn!==t||(en=7),lr(t)},d.then(i,i);break e;case 3:en=7;break e;case 4:en=5;break e;case 7:Ap(d)?(en=0,fs=null,p_(i)):(en=0,fs=null,Xo(t,i,d,7));break;case 5:var y=null;switch(St.tag){case 26:y=St.memoizedState;case 5:case 27:var T=St;if(y?tb(y):T.stateNode.complete){en=0,fs=null;var x=T.sibling;if(x!==null)St=x;else{var K=T.return;K!==null?(St=K,Vu(K)):St=null}break t}}en=0,fs=null,Xo(t,i,d,5);break;case 6:en=0,fs=null,Xo(t,i,d,6);break;case 8:Cf(),kn=6;break e;default:throw Error(s(462))}}yE();break}catch(ie){h_(t,ie)}while(!0);return wr=io=null,te.H=o,te.A=h,Qt=a,St!==null?0:(cn=null,Rt=0,tu(),kn)}function yE(){for(;St!==null&&!qa();)g_(St)}function g_(t){var i=zy(t.alternate,t,Or);t.memoizedProps=t.pendingProps,i===null?Vu(t):St=i}function p_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=xy(a,i,i.pendingProps,i.type,void 0,Rt);break;case 11:i=xy(a,i,i.pendingProps,i.type.render,i.ref,Rt);break;case 5:Hd(i);default:Uy(a,i),i=St=mp(i,Or),i=zy(a,i,Or)}t.memoizedProps=t.pendingProps,i===null?Vu(t):St=i}function Xo(t,i,a,o){wr=io=null,Hd(i),Bo=null,Ul=0;var h=i.return;try{if(rE(t,h,i,a,Rt)){kn=1,Eu(t,Ns(a,t.current)),St=null;return}}catch(d){if(h!==null)throw St=h,d;kn=1,Eu(t,Ns(a,t.current)),St=null;return}i.flags&32768?(xt||o===1?t=!0:$o||(Rt&536870912)!==0?t=!1:(la=t=!0,(o===2||o===9||o===3||o===6)&&(o=hs.current,o!==null&&o.tag===13&&(o.flags|=16384))),y_(i,t)):Vu(i)}function Vu(t){var i=t;do{if((i.flags&32768)!==0){y_(i,la);return}t=i.return;var a=lE(i.alternate,i,Or);if(a!==null){St=a;return}if(i=i.sibling,i!==null){St=i;return}St=i=t}while(i!==null);kn===0&&(kn=5)}function y_(t,i){do{var a=cE(t.alternate,t);if(a!==null){a.flags&=32767,St=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){St=t;return}St=t=a}while(t!==null);kn=6,St=null}function __(t,i,a,o,h,d,y,T,x){t.cancelPendingCommit=null;do ju();while(Zn!==0);if((Qt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=pd,Fa(t,a,d,y,T,x),t===cn&&(St=cn=null,Rt=0),Wo=i,ha=t,Lr=a,Af=d,Rf=h,o_=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,TE(is,function(){return E_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=te.T,te.T=null,h=be.p,be.p=2,y=Qt,Qt|=4;try{uE(t,i,a)}finally{Qt=y,be.p=h,te.T=o}}Zn=1,b_(),v_(),T_()}}function b_(){if(Zn===1){Zn=0;var t=ha,i=Wo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var o=be.p;be.p=2;var h=Qt;Qt|=4;try{Jy(i,t);var d=Uf,y=rp(t.containerInfo),T=d.focusedElem,x=d.selectionRange;if(y!==T&&T&&T.ownerDocument&&sp(T.ownerDocument.documentElement,T)){if(x!==null&&hd(T)){var K=x.start,ie=x.end;if(ie===void 0&&(ie=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(ie,T.value.length);else{var le=T.ownerDocument||document,$=le&&le.defaultView||window;if($.getSelection){var Z=$.getSelection(),Ne=T.textContent.length,Je=Math.min(x.start,Ne),rn=x.end===void 0?Je:Math.min(x.end,Ne);!Z.extend&&Je>rn&&(y=rn,rn=Je,Je=y);var H=ip(T,Je),P=ip(T,rn);if(H&&P&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var G=le.createRange();G.setStart(H.node,H.offset),Z.removeAllRanges(),Je>rn?(Z.addRange(G),Z.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),Z.addRange(G))}}}}for(le=[],Z=T;Z=Z.parentNode;)Z.nodeType===1&&le.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<le.length;T++){var oe=le[T];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Wu=!!Bf,Uf=Bf=null}finally{Qt=h,be.p=o,te.T=a}}t.current=i,Zn=2}}function v_(){if(Zn===2){Zn=0;var t=ha,i=Wo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var o=be.p;be.p=2;var h=Qt;Qt|=4;try{Qy(t,i.alternate,i)}finally{Qt=h,be.p=o,te.T=a}}Zn=3}}function T_(){if(Zn===4||Zn===3){Zn=0,Ys();var t=ha,i=Wo,a=Lr,o=o_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Zn=5:(Zn=0,Wo=ha=null,S_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ua=null),Fe(a),i=i.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Di,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=te.T,h=be.p,be.p=2,te.T=null;try{for(var d=t.onRecoverableError,y=0;y<o.length;y++){var T=o[y];d(T.value,{componentStack:T.stack})}}finally{te.T=i,be.p=h}}(Lr&3)!==0&&ju(),lr(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===If?sc++:(sc=0,If=t):sc=0,rc(0)}}function S_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,zl(i)))}function ju(){return b_(),v_(),T_(),E_()}function E_(){if(Zn!==5)return!1;var t=ha,i=Af;Af=0;var a=Fe(Lr),o=te.T,h=be.p;try{be.p=32>a?32:a,te.T=null,a=Rf,Rf=null;var d=ha,y=Lr;if(Zn=0,Wo=ha=null,Lr=0,(Qt&6)!==0)throw Error(s(331));var T=Qt;if(Qt|=4,s_(d.current),t_(d,d.current,y,a),Qt=T,rc(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Di,d)}catch{}return!0}finally{be.p=h,te.T=o,S_(t,i)}}function w_(t,i,a){i=Ns(a,i),i=rf(t.stateNode,i,2),t=sa(t,i,2),t!==null&&(rs(t,2),lr(t))}function tn(t,i,a){if(t.tag===3)w_(t,t,a);else for(;i!==null;){if(i.tag===3){w_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ua===null||!ua.has(o))){t=Ns(a,t),a=Ay(2),o=sa(i,a,2),o!==null&&(Ry(a,o,i,t),rs(o,2),lr(o));break}}i=i.return}}function Nf(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new fE;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Sf=!0,h.add(a),t=_E.bind(null,t,i,a),i.then(t,t))}function _E(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,cn===t&&(Rt&a)===a&&(kn===4||kn===3&&(Rt&62914560)===Rt&&300>Nn()-Du?(Qt&2)===0&&Yo(t,0):Ef|=a,Qo===Rt&&(Qo=0)),lr(t)}function A_(t,i){i===0&&(i=er()),t=eo(t,i),t!==null&&(rs(t,i),lr(t))}function bE(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),A_(t,a)}function vE(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),A_(t,a)}function TE(t,i){return Jt(t,i)}var Pu=null,Zo=null,Df=!1,zu=!1,Mf=!1,fa=0;function lr(t){t!==Zo&&t.next===null&&(Zo===null?Pu=Zo=t:Zo=Zo.next=t),zu=!0,Df||(Df=!0,EE())}function rc(t,i){if(!Mf&&zu){Mf=!0;do for(var a=!1,o=Pu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var y=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-on(42|t)+1)-1,d&=h&~(y&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,k_(o,d))}else d=Rt,d=Dn(o,o===cn?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||vt(o,d)||(a=!0,k_(o,d));o=o.next}while(a);Mf=!1}}function SE(){R_()}function R_(){zu=Df=!1;var t=0;fa!==0&&xE()&&(t=fa);for(var i=Nn(),a=null,o=Pu;o!==null;){var h=o.next,d=I_(o,i);d===0?(o.next=null,a===null?Pu=h:a.next=h,h===null&&(Zo=a)):(a=o,(t!==0||(d&3)!==0)&&(zu=!0)),o=h}Zn!==0&&Zn!==5||rc(t),fa!==0&&(fa=0)}function I_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var y=31-on(d),T=1<<y,x=h[y];x===-1?((T&a)===0||(T&o)!==0)&&(h[y]=Ha(T,i)):x<=i&&(t.expiredLanes|=T),d&=~T}if(i=cn,a=Rt,a=Dn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(en===2||en===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&_i(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||vt(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&_i(o),Fe(a)){case 2:case 8:a=ns;break;case 32:a=is;break;case 268435456:a=Zs;break;default:a=is}return o=C_.bind(null,t),a=Jt(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&_i(o),t.callbackPriority=2,t.callbackNode=null,2}function C_(t,i){if(Zn!==0&&Zn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ju()&&t.callbackNode!==a)return null;var o=Rt;return o=Dn(t,t===cn?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(c_(t,o,i),I_(t,Nn()),t.callbackNode!=null&&t.callbackNode===a?C_.bind(null,t):null)}function k_(t,i){if(ju())return null;c_(t,i,!0)}function EE(){LE(function(){(Qt&6)!==0?Jt(Xs,SE):R_()})}function xf(){if(fa===0){var t=jo;t===0&&(t=Wn,Wn<<=1,(Wn&261888)===0&&(Wn=256)),fa=t}return fa}function N_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:se(""+t)}function D_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function wE(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=N_((h[Vn]||null).action),y=o.submitter;y&&(i=(i=y[Vn]||null)?N_(i.formAction):y.getAttribute("formAction"),i!==null&&(d=i,y=null));var T=new Ot("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(fa!==0){var x=y?D_(h,y):new FormData(h);Zd(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(T.preventDefault(),x=y?D_(h,y):new FormData(h),Zd(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var Of=0;Of<gd.length;Of++){var Lf=gd[Of],AE=Lf.toLowerCase(),RE=Lf[0].toUpperCase()+Lf.slice(1);Us(AE,"on"+RE)}Us(lp,"onAnimationEnd"),Us(cp,"onAnimationIteration"),Us(up,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(qS,"onTransitionRun"),Us(HS,"onTransitionStart"),Us(FS,"onTransitionCancel"),Us(hp,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function M_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var y=o.length-1;0<=y;y--){var T=o[y],x=T.instance,K=T.currentTarget;if(T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=K;try{d(h)}catch(ie){eu(ie)}h.currentTarget=null,d=x}else for(y=0;y<o.length;y++){if(T=o[y],x=T.instance,K=T.currentTarget,T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=K;try{d(h)}catch(ie){eu(ie)}h.currentTarget=null,d=x}}}}function Et(t,i){var a=i[Es];a===void 0&&(a=i[Es]=new Set);var o=t+"__bubble";a.has(o)||(x_(i,t,2,!1),a.add(o))}function Vf(t,i,a){var o=0;i&&(o|=4),x_(a,t,o,i)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function jf(t){if(!t[Bu]){t[Bu]=!0,Wr.forEach(function(a){a!=="selectionchange"&&(IE.has(a)||Vf(a,!1,t),Vf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Bu]||(i[Bu]=!0,Vf("selectionchange",!1,i))}}function x_(t,i,a,o){switch(lb(i)){case 2:var h=tw;break;case 8:h=nw;break;default:h=Zf}a=h.bind(null,i,a,t),h=void 0,!Dt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Pf(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var T=o.stateNode.containerInfo;if(T===h)break;if(y===4)for(y=o.return;y!==null;){var x=y.tag;if((x===3||x===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;T!==null;){if(y=xi(T),y===null)return;if(x=y.tag,x===5||x===6||x===26||x===27){o=d=y;continue e}T=T.parentNode}}o=o.return}Pe(function(){var K=d,ie=ke(a),le=[];e:{var $=dp.get(t);if($!==void 0){var Z=Ot,Ne=t;switch(t){case"keypress":if(_t(a)===0)break e;case"keydown":case"keyup":Z=ji;break;case"focusin":Ne="focus",Z=At;break;case"focusout":Ne="blur",Z=At;break;case"beforeblur":case"afterblur":Z=At;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=He;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=dt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=g;break;case lp:case cp:case up:Z=Yn;break;case hp:Z=w;break;case"scroll":case"scrollend":Z=qt;break;case"wheel":Z=Q;break;case"copy":case"cut":case"paste":Z=ni;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=jn;break;case"toggle":case"beforetoggle":Z=Oe}var Je=(i&4)!==0,rn=!Je&&(t==="scroll"||t==="scrollend"),H=Je?$!==null?$+"Capture":null:$;Je=[];for(var P=K,G;P!==null;){var oe=P;if(G=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||G===null||H===null||(oe=ze(P,H),oe!=null&&Je.push(oc(P,oe,G))),rn)break;P=P.return}0<Je.length&&($=new Z($,Ne,null,a,ie),le.push({event:$,listeners:Je}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",$&&a!==Ie&&(Ne=a.relatedTarget||a.fromElement)&&(xi(Ne)||Ne[vi]))break e;if((Z||$)&&($=ie.window===ie?ie:($=ie.ownerDocument)?$.defaultView||$.parentWindow:window,Z?(Ne=a.relatedTarget||a.toElement,Z=K,Ne=Ne?xi(Ne):null,Ne!==null&&(rn=c(Ne),Je=Ne.tag,Ne!==rn||Je!==5&&Je!==27&&Je!==6)&&(Ne=null)):(Z=null,Ne=K),Z!==Ne)){if(Je=He,oe="onMouseLeave",H="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Je=jn,oe="onPointerLeave",H="onPointerEnter",P="pointer"),rn=Z==null?$:Oi(Z),G=Ne==null?$:Oi(Ne),$=new Je(oe,P+"leave",Z,a,ie),$.target=rn,$.relatedTarget=G,oe=null,xi(ie)===K&&(Je=new Je(H,P+"enter",Ne,a,ie),Je.target=G,Je.relatedTarget=rn,oe=Je),rn=oe,Z&&Ne)t:{for(Je=CE,H=Z,P=Ne,G=0,oe=H;oe;oe=Je(oe))G++;oe=0;for(var Qe=P;Qe;Qe=Je(Qe))oe++;for(;0<G-oe;)H=Je(H),G--;for(;0<oe-G;)P=Je(P),oe--;for(;G--;){if(H===P||P!==null&&H===P.alternate){Je=H;break t}H=Je(H),P=Je(P)}Je=null}else Je=null;Z!==null&&O_(le,$,Z,Je,!1),Ne!==null&&rn!==null&&O_(le,rn,Ne,Je,!0)}}e:{if($=K?Oi(K):window,Z=$.nodeName&&$.nodeName.toLowerCase(),Z==="select"||Z==="input"&&$.type==="file")var Ft=Xg;else if(Wg($))if(Zg)Ft=zS;else{Ft=jS;var xe=VS}else Z=$.nodeName,!Z||Z.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&me(K.elementType)&&(Ft=Xg):Ft=PS;if(Ft&&(Ft=Ft(t,K))){Yg(le,Ft,a,ie);break e}xe&&xe(t,$,K),t==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Ya($,"number",$.value)}switch(xe=K?Oi(K):window,t){case"focusin":(Wg(xe)||xe.contentEditable==="true")&&(ko=xe,dd=K,Vl=null);break;case"focusout":Vl=dd=ko=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,ap(le,a,ie);break;case"selectionchange":if(US)break;case"keydown":case"keyup":ap(le,a,ie)}var gt;if(bt)e:{switch(t){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else Co?Xa(t,a)&&(It="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(It="onCompositionStart");It&&(Pn&&a.locale!=="ko"&&(Co||It!=="onCompositionStart"?It==="onCompositionEnd"&&Co&&(gt=pt()):(rt=ie,fe="value"in rt?rt.value:rt.textContent,Co=!0)),xe=Uu(K,It),0<xe.length&&(It=new Tn(It,t,null,a,ie),le.push({event:It,listeners:xe}),gt?It.data=gt:(gt=Io(a),gt!==null&&(It.data=gt)))),(gt=Pt?MS(t,a):xS(t,a))&&(It=Uu(K,"onBeforeInput"),0<It.length&&(xe=new Tn("onBeforeInput","beforeinput",null,a,ie),le.push({event:xe,listeners:It}),xe.data=gt)),wE(le,t,K,a,ie)}M_(le,i)})}function oc(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Uu(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ze(t,a),h!=null&&o.unshift(oc(t,h,d)),h=ze(t,i),h!=null&&o.push(oc(t,h,d))),t.tag===3)return o;t=t.return}return[]}function CE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function O_(t,i,a,o,h){for(var d=i._reactName,y=[];a!==null&&a!==o;){var T=a,x=T.alternate,K=T.stateNode;if(T=T.tag,x!==null&&x===o)break;T!==5&&T!==26&&T!==27||K===null||(x=K,h?(K=ze(a,d),K!=null&&y.unshift(oc(a,K,x))):h||(K=ze(a,d),K!=null&&y.push(oc(a,K,x)))),a=a.return}y.length!==0&&t.push({event:i,listeners:y})}var kE=/\r\n?/g,NE=/\u0000|\uFFFD/g;function L_(t){return(typeof t=="string"?t:""+t).replace(kE,`
`).replace(NE,"")}function V_(t,i){return i=L_(i),L_(t)===i}function sn(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Ti(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Ti(t,""+o);break;case"className":vn(t,"class",o);break;case"tabIndex":vn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(t,a,o);break;case"style":X(t,o,d);break;case"data":if(i!=="object"){vn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=se(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&sn(t,i,"name",h.name,h,null),sn(t,i,"formEncType",h.formEncType,h,null),sn(t,i,"formMethod",h.formMethod,h,null),sn(t,i,"formTarget",h.formTarget,h,null)):(sn(t,i,"encType",h.encType,h,null),sn(t,i,"method",h.method,h,null),sn(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=se(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Y);break;case"onScroll":o!=null&&Et("scroll",t);break;case"onScrollEnd":o!=null&&Et("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=se(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Et("beforetoggle",t),Et("toggle",t),br(t,"popover",o);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":br(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=W.get(a)||a,br(t,a,o))}}function zf(t,i,a,o,h,d){switch(a){case"style":X(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?Ti(t,o):(typeof o=="number"||typeof o=="bigint")&&Ti(t,""+o);break;case"onScroll":o!=null&&Et("scroll",t);break;case"onScrollEnd":o!=null&&Et("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Y);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ga.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Vn]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):br(t,a,o)}}}function di(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",t),Et("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:sn(t,i,d,y,a,null)}}h&&sn(t,i,"srcSet",a.srcSet,a,null),o&&sn(t,i,"src",a.src,a,null);return;case"input":Et("invalid",t);var T=d=y=h=null,x=null,K=null;for(o in a)if(a.hasOwnProperty(o)){var ie=a[o];if(ie!=null)switch(o){case"name":h=ie;break;case"type":y=ie;break;case"checked":x=ie;break;case"defaultChecked":K=ie;break;case"value":d=ie;break;case"defaultValue":T=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:sn(t,i,o,ie,a,null)}}Wa(t,d,T,x,K,y,h,!1);return;case"select":Et("invalid",t),o=y=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":y=T;break;case"multiple":o=T;default:sn(t,i,h,T,a,null)}i=d,a=y,t.multiple=!!o,i!=null?nr(t,!!o,i,!1):a!=null&&nr(t,!!o,a,!0);return;case"textarea":Et("invalid",t),d=h=o=null;for(y in a)if(a.hasOwnProperty(y)&&(T=a[y],T!=null))switch(y){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:sn(t,i,y,T,a,null)}ir(t,o,h,d);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(o=a[x],o!=null))switch(x){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:sn(t,i,x,o,a,null)}return;case"dialog":Et("beforetoggle",t),Et("toggle",t),Et("cancel",t),Et("close",t);break;case"iframe":case"object":Et("load",t);break;case"video":case"audio":for(o=0;o<ac.length;o++)Et(ac[o],t);break;case"image":Et("error",t),Et("load",t);break;case"details":Et("toggle",t);break;case"embed":case"source":case"link":Et("error",t),Et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(o=a[K],o!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:sn(t,i,K,o,a,null)}return;default:if(me(i)){for(ie in a)a.hasOwnProperty(ie)&&(o=a[ie],o!==void 0&&zf(t,i,ie,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&sn(t,i,T,o,a,null))}function DE(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,y=null,T=null,x=null,K=null,ie=null;for(Z in a){var le=a[Z];if(a.hasOwnProperty(Z)&&le!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":x=le;default:o.hasOwnProperty(Z)||sn(t,i,Z,null,o,le)}}for(var $ in o){var Z=o[$];if(le=a[$],o.hasOwnProperty($)&&(Z!=null||le!=null))switch($){case"type":d=Z;break;case"name":h=Z;break;case"checked":K=Z;break;case"defaultChecked":ie=Z;break;case"value":y=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:Z!==le&&sn(t,i,$,Z,o,le)}}Tr(t,y,T,x,K,ie,d,h);return;case"select":Z=y=T=$=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":Z=x;default:o.hasOwnProperty(d)||sn(t,i,d,null,o,x)}for(h in o)if(d=o[h],x=a[h],o.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":$=d;break;case"defaultValue":T=d;break;case"multiple":y=d;default:d!==x&&sn(t,i,h,d,o,x)}i=T,a=y,o=Z,$!=null?nr(t,!!a,$,!1):!!o!=!!a&&(i!=null?nr(t,!!a,i,!0):nr(t,!!a,a?[]:"",!1));return;case"textarea":Z=$=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:sn(t,i,T,null,o,h)}for(y in o)if(h=o[y],d=a[y],o.hasOwnProperty(y)&&(h!=null||d!=null))switch(y){case"value":$=h;break;case"defaultValue":Z=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&sn(t,i,y,h,o,d)}Ro(t,$,Z);return;case"option":for(var Ne in a)if($=a[Ne],a.hasOwnProperty(Ne)&&$!=null&&!o.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:sn(t,i,Ne,null,o,$)}for(x in o)if($=o[x],Z=a[x],o.hasOwnProperty(x)&&$!==Z&&($!=null||Z!=null))switch(x){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:sn(t,i,x,$,o,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in a)$=a[Je],a.hasOwnProperty(Je)&&$!=null&&!o.hasOwnProperty(Je)&&sn(t,i,Je,null,o,$);for(K in o)if($=o[K],Z=a[K],o.hasOwnProperty(K)&&$!==Z&&($!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:sn(t,i,K,$,o,Z)}return;default:if(me(i)){for(var rn in a)$=a[rn],a.hasOwnProperty(rn)&&$!==void 0&&!o.hasOwnProperty(rn)&&zf(t,i,rn,void 0,o,$);for(ie in o)$=o[ie],Z=a[ie],!o.hasOwnProperty(ie)||$===Z||$===void 0&&Z===void 0||zf(t,i,ie,$,o,Z);return}}for(var H in a)$=a[H],a.hasOwnProperty(H)&&$!=null&&!o.hasOwnProperty(H)&&sn(t,i,H,null,o,$);for(le in o)$=o[le],Z=a[le],!o.hasOwnProperty(le)||$===Z||$==null&&Z==null||sn(t,i,le,$,o,Z)}function j_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ME(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,y=h.initiatorType,T=h.duration;if(d&&T&&j_(y)){for(y=0,T=h.responseEnd,o+=1;o<a.length;o++){var x=a[o],K=x.startTime;if(K>T)break;var ie=x.transferSize,le=x.initiatorType;ie&&j_(le)&&(x=x.responseEnd,y+=ie*(x<T?1:(T-K)/(x-K)))}if(--o,i+=8*(d+y)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bf=null,Uf=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function P_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function qf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hf=null;function xE(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var B_=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,LE=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(t){return U_.resolve(null).then(t).catch(VE)}:B_;function VE(t){setTimeout(function(){throw t})}function ma(t){return t==="head"}function q_(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),nl(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")lc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,lc(a);for(var d=a.firstChild;d;){var y=d.nextSibling,T=d.nodeName;d[os]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&lc(t.ownerDocument.body);a=h}while(a);nl(i)}function H_(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Ff(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ff(a),Qr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function jE(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[os])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Ls(t.nextSibling),t===null)break}return null}function PE(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ls(t.nextSibling),t===null))return null;return t}function F_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Ls(t.nextSibling),t===null))return null;return t}function Gf(t){return t.data==="$?"||t.data==="$~"}function Kf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function zE(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Ls(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var $f=null;function G_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Ls(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function K_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function $_(t,i,a){switch(i=qu(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function lc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Qr(t)}var Vs=new Map,Q_=new Set;function Hu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Vr=be.d;be.d={f:BE,r:UE,D:qE,C:HE,L:FE,m:GE,X:$E,S:KE,M:QE};function BE(){var t=Vr.f(),i=Ou();return t||i}function UE(t){var i=Fi(t);i!==null&&i.tag===5&&i.type==="form"?hy(i):Vr.r(t)}var Jo=typeof document>"u"?null:document;function W_(t,i,a){var o=Jo;if(o&&typeof i=="string"&&i){var h=oi(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Q_.has(h)||(Q_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),di(i,"link",t),wn(i),o.head.appendChild(i)))}}function qE(t){Vr.D(t),W_("dns-prefetch",t,null)}function HE(t,i){Vr.C(t,i),W_("preconnect",t,i)}function FE(t,i,a){Vr.L(t,i,a);var o=Jo;if(o&&t&&i){var h='link[rel="preload"][as="'+oi(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+oi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+oi(a.imageSizes)+'"]')):h+='[href="'+oi(t)+'"]';var d=h;switch(i){case"style":d=el(t);break;case"script":d=tl(t)}Vs.has(d)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Vs.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(cc(d))||i==="script"&&o.querySelector(uc(d))||(i=o.createElement("link"),di(i,"link",t),wn(i),o.head.appendChild(i)))}}function GE(t,i){Vr.m(t,i);var a=Jo;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+oi(o)+'"][href="'+oi(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=tl(t)}if(!Vs.has(d)&&(t=A({rel:"modulepreload",href:t},i),Vs.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uc(d)))return}o=a.createElement("link"),di(o,"link",t),wn(o),a.head.appendChild(o)}}}function KE(t,i,a){Vr.S(t,i,a);var o=Jo;if(o&&t){var h=ws(o).hoistableStyles,d=el(t);i=i||"default";var y=h.get(d);if(!y){var T={loading:0,preload:null};if(y=o.querySelector(cc(d)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Vs.get(d))&&Qf(t,a);var x=y=o.createElement("link");wn(x),di(x,"link",t),x._p=new Promise(function(K,ie){x.onload=K,x.onerror=ie}),x.addEventListener("load",function(){T.loading|=1}),x.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fu(y,i,o)}y={type:"stylesheet",instance:y,count:1,state:T},h.set(d,y)}}}function $E(t,i){Vr.X(t,i);var a=Jo;if(a&&t){var o=ws(a).hoistableScripts,h=tl(t),d=o.get(h);d||(d=a.querySelector(uc(h)),d||(t=A({src:t,async:!0},i),(i=Vs.get(h))&&Wf(t,i),d=a.createElement("script"),wn(d),di(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function QE(t,i){Vr.M(t,i);var a=Jo;if(a&&t){var o=ws(a).hoistableScripts,h=tl(t),d=o.get(h);d||(d=a.querySelector(uc(h)),d||(t=A({src:t,async:!0,type:"module"},i),(i=Vs.get(h))&&Wf(t,i),d=a.createElement("script"),wn(d),di(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Y_(t,i,a,o){var h=(h=it.current)?Hu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=el(a.href),a=ws(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=el(a.href);var d=ws(h).hoistableStyles,y=d.get(t);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,y),(d=h.querySelector(cc(t)))&&!d._p&&(y.instance=d,y.state.loading=5),Vs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Vs.set(t,a),d||WE(h,t,a,y.state))),i&&o===null)throw Error(s(528,""));return y}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=tl(a),a=ws(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function el(t){return'href="'+oi(t)+'"'}function cc(t){return'link[rel="stylesheet"]['+t+"]"}function X_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function WE(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),di(i,"link",a),wn(i),t.head.appendChild(i))}function tl(t){return'[src="'+oi(t)+'"]'}function uc(t){return"script[async]"+t}function Z_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+oi(a.href)+'"]');if(o)return i.instance=o,wn(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),wn(o),di(o,"style",h),Fu(o,a.precedence,t),i.instance=o;case"stylesheet":h=el(a.href);var d=t.querySelector(cc(h));if(d)return i.state.loading|=4,i.instance=d,wn(d),d;o=X_(a),(h=Vs.get(h))&&Qf(o,h),d=(t.ownerDocument||t).createElement("link"),wn(d);var y=d;return y._p=new Promise(function(T,x){y.onload=T,y.onerror=x}),di(d,"link",o),i.state.loading|=4,Fu(d,a.precedence,t),i.instance=d;case"script":return d=tl(a.src),(h=t.querySelector(uc(d)))?(i.instance=h,wn(h),h):(o=a,(h=Vs.get(d))&&(o=A({},a),Wf(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),wn(h),di(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Fu(o,a.precedence,t));return i.instance}function Fu(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,y=0;y<o.length;y++){var T=o[y];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Qf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Wf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Gu=null;function J_(t,i,a){if(Gu===null){var o=new Map,h=Gu=new Map;h.set(a,o)}else h=Gu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[os]||d[mn]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(i)||"";y=t+y;var T=o.get(y);T?T.push(d):o.set(y,[d])}}return o}function eb(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function YE(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function tb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function XE(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=el(o.href),d=i.querySelector(cc(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ku.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,wn(d);return}d=i.ownerDocument||i,o=X_(o),(h=Vs.get(h))&&Qf(o,h),d=d.createElement("link"),wn(d);var y=d;y._p=new Promise(function(T,x){y.onload=T,y.onerror=x}),di(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ku.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Yf=0;function ZE(t,i){return t.stylesheets&&t.count===0&&Qu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Yf===0&&(Yf=62500*ME());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Yf?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Ku(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function Qu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,i.forEach(JE,t),$u=null,Ku.call(t))}function JE(t,i){if(!(i.state.loading&4)){var a=$u.get(t);if(a)var o=a.get(null);else{a=new Map,$u.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var y=h[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),o=y)}o&&a.set(null,o)}h=i.instance,y=h.getAttribute("data-precedence"),d=a.get(y)||o,d===o&&a.set(null,h),a.set(y,h),this.count++,o=Ku.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var hc={$$typeof:Le,Provider:null,Consumer:null,_currentValue:Ve,_currentValue2:Ve,_threadCount:0};function ew(t,i,a,o,h,d,y,T,x){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function nb(t,i,a,o,h,d,y,T,x,K,ie,le){return t=new ew(t,i,a,y,x,K,ie,le,T),i=1,d===!0&&(i|=24),d=us(3,null,null,i),t.current=d,d.stateNode=t,i=Cd(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},Md(d),t}function ib(t){return t?(t=Mo,t):Mo}function sb(t,i,a,o,h,d){h=ib(h),o.context===null?o.context=h:o.pendingContext=h,o=ia(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=sa(t,o,i),a!==null&&(Yi(a,t,i),Hl(a,t,i))}function rb(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Xf(t,i){rb(t,i),(t=t.alternate)&&rb(t,i)}function ab(t){if(t.tag===13||t.tag===31){var i=eo(t,67108864);i!==null&&Yi(i,t,67108864),Xf(t,67108864)}}function ob(t){if(t.tag===13||t.tag===31){var i=gs();i=we(i);var a=eo(t,i);a!==null&&Yi(a,t,i),Xf(t,i)}}var Wu=!0;function tw(t,i,a,o){var h=te.T;te.T=null;var d=be.p;try{be.p=2,Zf(t,i,a,o)}finally{be.p=d,te.T=h}}function nw(t,i,a,o){var h=te.T;te.T=null;var d=be.p;try{be.p=8,Zf(t,i,a,o)}finally{be.p=d,te.T=h}}function Zf(t,i,a,o){if(Wu){var h=Jf(o);if(h===null)Pf(t,i,o,Yu,a),cb(t,o);else if(sw(h,t,i,a,o))o.stopPropagation();else if(cb(t,o),i&4&&-1<iw.indexOf(t)){for(;h!==null;){var d=Fi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=bi(d.pendingLanes);if(y!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;y;){var x=1<<31-on(y);T.entanglements[1]|=x,y&=~x}lr(d),(Qt&6)===0&&(Mu=Nn()+500,rc(0))}}break;case 31:case 13:T=eo(d,2),T!==null&&Yi(T,d,2),Ou(),Xf(d,2)}if(d=Jf(o),d===null&&Pf(t,i,o,Yu,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Pf(t,i,o,null,a)}}function Jf(t){return t=ke(t),em(t)}var Yu=null;function em(t){if(Yu=null,t=xi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Yu=t,null}function lb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ts()){case Xs:return 2;case ns:return 8;case is:case ss:return 32;case Zs:return 268435456;default:return 32}default:return 32}}var tm=!1,ga=null,pa=null,ya=null,dc=new Map,fc=new Map,_a=[],iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cb(t,i){switch(t){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":dc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(i.pointerId)}}function mc(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Fi(i),i!==null&&ab(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function sw(t,i,a,o,h){switch(i){case"focusin":return ga=mc(ga,t,i,a,o,h),!0;case"dragenter":return pa=mc(pa,t,i,a,o,h),!0;case"mouseover":return ya=mc(ya,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return dc.set(d,mc(dc.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,fc.set(d,mc(fc.get(d)||null,t,i,a,o,h)),!0}return!1}function ub(t){var i=xi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Xt(t.priority,function(){ob(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,Xt(t.priority,function(){ob(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Jf(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Ie=o,a.target.dispatchEvent(o),Ie=null}else return i=Fi(a),i!==null&&ab(i),t.blockedOn=a,!1;i.shift()}return!0}function hb(t,i,a){Xu(t)&&a.delete(i)}function rw(){tm=!1,ga!==null&&Xu(ga)&&(ga=null),pa!==null&&Xu(pa)&&(pa=null),ya!==null&&Xu(ya)&&(ya=null),dc.forEach(hb),fc.forEach(hb)}function Zu(t,i){t.blockedOn===i&&(t.blockedOn=null,tm||(tm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,rw)))}var Ju=null;function db(t){Ju!==t&&(Ju=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ju===t&&(Ju=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(em(o||a)===null)continue;break}var d=Fi(a);d!==null&&(t.splice(i,3),i-=3,Zd(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function nl(t){function i(x){return Zu(x,t)}ga!==null&&Zu(ga,t),pa!==null&&Zu(pa,t),ya!==null&&Zu(ya,t),dc.forEach(i),fc.forEach(i);for(var a=0;a<_a.length;a++){var o=_a[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<_a.length&&(a=_a[0],a.blockedOn===null);)ub(a),a.blockedOn===null&&_a.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],y=h[Vn]||null;if(typeof d=="function")y||db(a);else if(y){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,y=d[Vn]||null)T=y.formAction;else if(em(h)!==null)continue}else T=y.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),db(a)}}}function fb(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function nm(t){this._internalRoot=t}eh.prototype.render=nm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=gs();sb(a,o,t,i,null,null)},eh.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;sb(t.current,2,null,t,null,null),Ou(),i[vi]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Bt();t={blockedOn:null,target:t,priority:i};for(var a=0;a<_a.length&&i!==0&&i<_a[a].priority;a++);_a.splice(a,0,t),a===0&&ub(t)}};var mb=e.version;if(mb!=="19.2.0")throw Error(s(527,mb,"19.2.0"));be.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=_(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var aw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Di=th.inject(aw),fn=th}catch{}}return pc.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=Ty,d=Sy,y=Ey;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=nb(t,1,!1,null,null,a,o,null,h,d,y,fb),t[vi]=i.current,jf(t),new nm(i)},pc.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",d=Ty,y=Sy,T=Ey,x=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),i=nb(t,1,!0,i,a??null,o,h,x,d,y,T,fb),i.context=ib(null),a=i.current,o=gs(),o=we(o),h=ia(o),h.callback=null,sa(a,h,o),a=o,i.current.lanes=a,rs(i,a),lr(i),t[vi]=i.current,jf(t),new eh(i)},pc.version="19.2.0",pc}var wb;function pw(){if(wb)return rm.exports;wb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=gw(),rm.exports}var yw=pw();const _w="_projectHub_bg565_1",bw="_backgroundOverlay_bg565_23",vw="_content_bg565_53",Tw="_header_bg565_77",Sw="_logoContainer_bg565_109",Ew="_title_bg565_123",ww="_titleGradient_bg565_137",Aw="_subtitle_bg565_173",Rw="_projectGrid_bg565_189",Iw="_projectCard_bg565_229",Cw="_cardGlow_bg565_291",kw="_cardContent_bg565_329",Nw="_projectEmoji_bg565_347",Dw="_projectName_bg565_369",Mw="_projectDescription_bg565_397",xw="_comingSoon_bg565_411",Ow="_cardBorder_bg565_431",Lw="_footer_bg565_471",Vw="_footerText_bg565_491",Hn={projectHub:_w,backgroundOverlay:bw,content:vw,header:Tw,logoContainer:Sw,title:Ew,titleGradient:ww,subtitle:Aw,projectGrid:Rw,projectCard:Iw,cardGlow:Cw,cardContent:kw,projectEmoji:Nw,projectName:Dw,projectDescription:Mw,comingSoon:xw,cardBorder:Ow,footer:Lw,footerText:Vw},Ab="/Hitzkopf/assets/hk_logo_horizontal-EzCfu4m-.png",jw=({onSelectProject:r})=>{const[e,n]=ee.useState(null),s=[{id:"hitzkopf",name:"Hitzkopf",description:"Das explosive Partyspiel",color:"#ff6b35",emoji:"",available:!0},{id:"musicvoter",name:"Amplify",description:"Gemeinsam den Ton angeben",color:"#4ecdc4",emoji:"",available:!0}];return p.jsxs("div",{className:Hn.projectHub,children:[p.jsx("div",{className:Hn.backgroundOverlay}),p.jsxs("div",{className:Hn.content,children:[p.jsx("div",{className:Hn.header,children:p.jsxs("div",{className:Hn.logoContainer,children:[p.jsx("h1",{className:Hn.title,children:p.jsx("span",{className:Hn.titleGradient,children:"Party Games"})}),p.jsx("p",{className:Hn.subtitle,children:"Whle dein Spiel"})]})}),p.jsx("div",{className:Hn.projectGrid,children:s.map(l=>p.jsxs("button",{className:`${Hn.projectCard} ${e===l.id?Hn.hovered:""}`,onClick:()=>l.available&&r(l.id),onMouseEnter:()=>n(l.id),onMouseLeave:()=>n(null),disabled:!l.available,style:{"--project-color":l.color,"--project-glow":`${l.color}40`},children:[p.jsx("div",{className:Hn.cardGlow}),p.jsxs("div",{className:Hn.cardContent,children:[p.jsx("div",{className:Hn.projectEmoji,children:l.emoji}),p.jsx("h2",{className:Hn.projectName,children:l.name}),p.jsx("p",{className:Hn.projectDescription,children:l.description}),!l.available&&p.jsx("div",{className:Hn.comingSoon,children:"Bald verfgbar"})]}),p.jsx("div",{className:Hn.cardBorder})]},l.id))}),p.jsx("div",{className:Hn.footer,children:p.jsx("p",{className:Hn.footerText,children:"Made with  by Niklas"})})]})]})},Pw=()=>{};var Rb={};const t0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},zw=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],m=r[n++],b=((l&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(b>>10)),e[s++]=String.fromCharCode(56320+(b&1023))}else{const c=r[n++],f=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},n0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,m=f?r[l+1]:0,b=l+2<r.length,_=b?r[l+2]:0,S=c>>2,A=(c&3)<<4|m>>4;let V=(m&15)<<2|_>>6,O=_&63;b||(O=64,f||(V=64)),s.push(n[S],n[A],n[V],n[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(t0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):zw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],m=l<r.length?n[r.charAt(l)]:0;++l;const _=l<r.length?n[r.charAt(l)]:64;++l;const A=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||m==null||_==null||A==null)throw new Bw;const V=c<<2|m>>4;if(s.push(V),_!==64){const O=m<<4&240|_>>2;if(s.push(O),A!==64){const pe=_<<6&192|A;s.push(pe)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uw=function(r){const e=t0(r);return n0.encodeByteArray(e,!0)},_h=function(r){return Uw(r).replace(/\./g,"")},i0=function(r){try{return n0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Hw=()=>qw().__FIREBASE_DEFAULTS__,Fw=()=>{if(typeof process>"u"||typeof Rb>"u")return;const r=Rb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Gw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&i0(r[1]);return e&&JSON.parse(e)},zh=()=>{try{return Pw()||Hw()||Fw()||Gw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},s0=r=>zh()?.emulatorHosts?.[r],Kw=r=>{const e=s0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},r0=()=>zh()?.config,a0=r=>zh()?.[`_${r}`];class $w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Rl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function o0(r){return(await fetch(r,{credentials:"include"})).ok}function Qw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[_h(JSON.stringify(n)),_h(JSON.stringify(f)),""].join(".")}const Ec={};function Ww(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ec))Ec[e]?r.emulator.push(e):r.prod.push(e);return r}function Yw(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Ib=!1;function l0(r,e){if(typeof window>"u"||typeof document>"u"||!Rl(window.location.host)||Ec[r]===e||Ec[r]||Ib)return;Ec[r]=e;function n(V){return`__firebase__banner__${V}`}const s="__firebase__banner",c=Ww().prod.length>0;function f(){const V=document.getElementById(s);V&&V.remove()}function m(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function b(V,O){V.setAttribute("width","24"),V.setAttribute("id",O),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function _(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{Ib=!0,f()},V}function S(V,O){V.setAttribute("id",O),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function A(){const V=Yw(s),O=n("text"),pe=document.getElementById(O)||document.createElement("span"),de=n("learnmore"),he=document.getElementById(de)||document.createElement("a"),I=n("preprendIcon"),Ae=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const Le=V.element;m(Le),S(he,de);const lt=_();b(Ae,I),Le.append(Ae,pe,he,lt),document.body.appendChild(Le)}c?(pe.innerText="Preview backend disconnected.",Ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,pe.innerText="Preview backend running in this workspace."),pe.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function ki(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ki())}function Zw(){const r=zh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function e1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function t1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function n1(){const r=ki();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function i1(){return!Zw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){try{return typeof indexedDB=="object"}catch{return!1}}function r1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const a1="FirebaseError";class $r extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=a1,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?o1(c,s):"Error",m=`${this.serviceName}: ${f} (${l}).`;return new $r(l,m,s)}}function o1(r,e){return r.replace(l1,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const l1=/\{\$([^}]+)}/g;function c1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Br(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=e[l];if(Cb(c)&&Cb(f)){if(!Br(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Cb(r){return r!==null&&typeof r=="object"}function zc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function u1(r,e){const n=new h1(r,e);return n.subscribe.bind(n)}class h1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");d1(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=cm),l.error===void 0&&(l.error=cm),l.complete===void 0&&(l.complete=cm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function cm(){}function ei(r){return r&&r._delegate?r._delegate:r}class yo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mo="[DEFAULT]";class f1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $w;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g1(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:m1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m1(r){return r===mo?void 0:r}function g1(r){return r.instantiationMode==="EAGER"}class p1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new f1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ct;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ct||(Ct={}));const y1={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},_1=Ct.INFO,b1={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},v1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=b1[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zm{constructor(e){this.name=e,this._logLevel=_1,this._logHandler=v1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?y1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const T1=(r,e)=>e.some(n=>r instanceof n);let kb,Nb;function S1(){return kb||(kb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c0=new WeakMap,Sm=new WeakMap,u0=new WeakMap,um=new WeakMap,Jm=new WeakMap;function w1(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(Ra(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&c0.set(n,r)}).catch(()=>{}),Jm.set(e,r),e}function A1(r){if(Sm.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Sm.set(r,e)}let Em={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Sm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||u0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ra(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function R1(r){Em=r(Em)}function I1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(hm(this),e,...n);return u0.set(s,e.sort?e.sort():[e]),Ra(s)}:E1().includes(r)?function(...e){return r.apply(hm(this),e),Ra(c0.get(this))}:function(...e){return Ra(r.apply(hm(this),e))}}function C1(r){return typeof r=="function"?I1(r):(r instanceof IDBTransaction&&A1(r),T1(r,S1())?new Proxy(r,Em):r)}function Ra(r){if(r instanceof IDBRequest)return w1(r);if(um.has(r))return um.get(r);const e=C1(r);return e!==r&&(um.set(r,e),Jm.set(e,r)),e}const hm=r=>Jm.get(r);function k1(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,e),m=Ra(f);return s&&f.addEventListener("upgradeneeded",b=>{s(Ra(f.result),b.oldVersion,b.newVersion,Ra(f.transaction),b)}),n&&f.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),m.then(b=>{c&&b.addEventListener("close",()=>c()),l&&b.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const N1=["get","getKey","getAll","getAllKeys","count"],D1=["put","add","delete","clear"],dm=new Map;function Db(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=D1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||N1.includes(n)))return;const c=async function(f,...m){const b=this.transaction(f,l?"readwrite":"readonly");let _=b.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),l&&b.done]))[0]};return dm.set(e,c),c}R1(r=>({...r,get:(e,n,s)=>Db(e,n)||r.get(e,n,s),has:(e,n)=>!!Db(e,n)||r.has(e,n)}));class M1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function x1(r){return r.getComponent()?.type==="VERSION"}const wm="@firebase/app",Mb="0.14.6";const Ur=new Zm("@firebase/app"),O1="@firebase/app-compat",L1="@firebase/analytics-compat",V1="@firebase/analytics",j1="@firebase/app-check-compat",P1="@firebase/app-check",z1="@firebase/auth",B1="@firebase/auth-compat",U1="@firebase/database",q1="@firebase/data-connect",H1="@firebase/database-compat",F1="@firebase/functions",G1="@firebase/functions-compat",K1="@firebase/installations",$1="@firebase/installations-compat",Q1="@firebase/messaging",W1="@firebase/messaging-compat",Y1="@firebase/performance",X1="@firebase/performance-compat",Z1="@firebase/remote-config",J1="@firebase/remote-config-compat",eA="@firebase/storage",tA="@firebase/storage-compat",nA="@firebase/firestore",iA="@firebase/ai",sA="@firebase/firestore-compat",rA="firebase",aA="12.6.0";const Am="[DEFAULT]",oA={[wm]:"fire-core",[O1]:"fire-core-compat",[V1]:"fire-analytics",[L1]:"fire-analytics-compat",[P1]:"fire-app-check",[j1]:"fire-app-check-compat",[z1]:"fire-auth",[B1]:"fire-auth-compat",[U1]:"fire-rtdb",[q1]:"fire-data-connect",[H1]:"fire-rtdb-compat",[F1]:"fire-fn",[G1]:"fire-fn-compat",[K1]:"fire-iid",[$1]:"fire-iid-compat",[Q1]:"fire-fcm",[W1]:"fire-fcm-compat",[Y1]:"fire-perf",[X1]:"fire-perf-compat",[Z1]:"fire-rc",[J1]:"fire-rc-compat",[eA]:"fire-gcs",[tA]:"fire-gcs-compat",[nA]:"fire-fst",[sA]:"fire-fst-compat",[iA]:"fire-vertex","fire-js":"fire-js",[rA]:"fire-js-all"};const bh=new Map,lA=new Map,Rm=new Map;function xb(r,e){try{r.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function yl(r){const e=r.name;if(Rm.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;Rm.set(e,r);for(const n of bh.values())xb(n,r);for(const n of lA.values())xb(n,r);return!0}function eg(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Ks(r){return r==null?!1:r.settings!==void 0}const cA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ia=new Pc("app","Firebase",cA);class uA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ia.create("app-deleted",{appName:this._name})}}const Il=aA;function tg(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Am,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw Ia.create("bad-app-name",{appName:String(l)});if(n||(n=r0()),!n)throw Ia.create("no-options");const c=bh.get(l);if(c){if(Br(n,c.options)&&Br(s,c.config))return c;throw Ia.create("duplicate-app",{appName:l})}const f=new p1(l);for(const b of Rm.values())f.addComponent(b);const m=new uA(n,s,f);return bh.set(l,m),m}function h0(r=Am){const e=bh.get(r);if(!e&&r===Am&&r0())return tg();if(!e)throw Ia.create("no-app",{appName:r});return e}function Ca(r,e,n){let s=oA[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${e}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(f.join(" "));return}yl(new yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const hA="firebase-heartbeat-database",dA=1,Nc="firebase-heartbeat-store";let fm=null;function d0(){return fm||(fm=k1(hA,dA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Nc)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ia.create("idb-open",{originalErrorMessage:r.message})})),fm}async function fA(r){try{const n=(await d0()).transaction(Nc),s=await n.objectStore(Nc).get(f0(r));return await n.done,s}catch(e){if(e instanceof $r)Ur.warn(e.message);else{const n=Ia.create("idb-get",{originalErrorMessage:e?.message});Ur.warn(n.message)}}}async function Ob(r,e){try{const s=(await d0()).transaction(Nc,"readwrite");await s.objectStore(Nc).put(e,f0(r)),await s.done}catch(n){if(n instanceof $r)Ur.warn(n.message);else{const s=Ia.create("idb-set",{originalErrorMessage:n?.message});Ur.warn(s.message)}}}function f0(r){return`${r.name}!${r.options.appId}`}const mA=1024,gA=30;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _A(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Lb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>gA){const l=bA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ur.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lb(),{heartbeatsToSend:n,unsentEntries:s}=yA(this._heartbeatsCache.heartbeats),l=_h(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ur.warn(e),""}}}function Lb(){return new Date().toISOString().substring(0,10)}function yA(r,e=mA){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),Vb(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Vb(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _A{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s1()?r1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vb(r){return _h(JSON.stringify({version:2,heartbeats:r})).length}function bA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function vA(r){yl(new yo("platform-logger",e=>new M1(e),"PRIVATE")),yl(new yo("heartbeat",e=>new pA(e),"PRIVATE")),Ca(wm,Mb,r),Ca(wm,Mb,"esm2020"),Ca("fire-js","")}vA("");var TA="firebase",SA="12.6.0";Ca(TA,SA,"app");function m0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EA=m0,g0=new Pc("auth","Firebase",m0());const vh=new Zm("@firebase/auth");function wA(r,...e){vh.logLevel<=Ct.WARN&&vh.warn(`Auth (${Il}): ${r}`,...e)}function lh(r,...e){vh.logLevel<=Ct.ERROR&&vh.error(`Auth (${Il}): ${r}`,...e)}function qr(r,...e){throw ng(r,...e)}function hr(r,...e){return ng(r,...e)}function p0(r,e,n){const s={...EA(),[e]:n};return new Pc("auth","Firebase",s).create(e,{appName:r.name})}function ka(r){return p0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return g0.create(r,...e)}function nt(r,e,...n){if(!r)throw ng(e,...n)}function Pr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw lh(e),new Error(e)}function Hr(r,e){r||Pr(e)}function Im(){return typeof self<"u"&&self.location?.href||""}function AA(){return jb()==="http:"||jb()==="https:"}function jb(){return typeof self<"u"&&self.location?.protocol||null}function RA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AA()||e1()||"connection"in navigator)?navigator.onLine:!0}function IA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=Xw()||t1()}get(){return RA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ig(r,e){Hr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class y0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const CA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NA=new Bc(3e4,6e4);function Bh(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Cl(r,e,n,s,l={}){return _0(r,l,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const m=zc({key:r.config.apiKey,...f}).slice(1),b=await r._getAdditionalHeaders();b["Content-Type"]="application/json",r.languageCode&&(b["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:b,...c};return Jw()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(_.credentials="include"),y0.fetch()(await v0(r,r.config.apiHost,n,m),_)})}async function _0(r,e,n){r._canInitEmulator=!1;const s={...CA,...e};try{const l=new DA(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw nh(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const m=c.ok?f.errorMessage:f.error.message,[b,_]=m.split(" : ");if(b==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(r,"credential-already-in-use",f);if(b==="EMAIL_EXISTS")throw nh(r,"email-already-in-use",f);if(b==="USER_DISABLED")throw nh(r,"user-disabled",f);const S=s[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw p0(r,S,_);qr(r,S)}}catch(l){if(l instanceof $r)throw l;qr(r,"network-request-failed",{message:String(l)})}}async function b0(r,e,n,s,l={}){const c=await Cl(r,e,n,s,l);return"mfaPendingCredential"in c&&qr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function v0(r,e,n,s){const l=`${e}${n}?${s}`,c=r,f=c.config.emulator?ig(r.config,l):`${r.config.apiScheme}://${l}`;return kA.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}class DA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hr(this.auth,"network-request-failed")),NA.get())})}}function nh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=hr(r,e,s);return l.customData._tokenResponse=n,l}async function MA(r,e){return Cl(r,"POST","/v1/accounts:delete",e)}async function Th(r,e){return Cl(r,"POST","/v1/accounts:lookup",e)}function wc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xA(r,e=!1){const n=ei(r),s=await n.getIdToken(e),l=sg(s);nt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:s,authTime:wc(mm(l.auth_time)),issuedAtTime:wc(mm(l.iat)),expirationTime:wc(mm(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function mm(r){return Number(r)*1e3}function sg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const l=i0(n);return l?JSON.parse(l):(lh("Failed to decode base64 JWT payload"),null)}catch(l){return lh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Pb(r){const e=sg(r);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Dc(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof $r&&OA(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function OA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class LA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Cm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wc(this.lastLoginAt),this.creationTime=wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sh(r){const e=r.auth,n=await r.getIdToken(),s=await Dc(r,Th(e,{idToken:n}));nt(s?.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?T0(l.providerUserInfo):[],f=jA(r.providerData,c),m=r.isAnonymous,b=!(r.email&&l.passwordHash)&&!f?.length,_=m?b:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Cm(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,S)}async function VA(r){const e=ei(r);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jA(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function T0(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function PA(r,e){const n=await _0(r,{},async()=>{const s=zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await v0(r,l,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const b={method:"POST",headers:m,body:s};return r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(b.credentials="include"),y0.fetch()(f,b)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zA(r,e){return Cl(r,"POST","/v2/accounts:revokeToken",Bh(r,e))}class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=Pb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await PA(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new dl;return s&&(nt(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(nt(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(nt(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return Pr("not implemented")}}function va(r,e){nt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class $s{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new LA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Cm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xA(this,e)}reload(){return VA(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ks(this.auth.app))return Promise.reject(ka(this.auth));const e=await this.getIdToken();return await Dc(this,MA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,b=n._redirectEventId??void 0,_=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:A,emailVerified:V,isAnonymous:O,providerData:pe,stsTokenManager:de}=n;nt(A&&de,e,"internal-error");const he=dl.fromJSON(this.name,de);nt(typeof A=="string",e,"internal-error"),va(s,e.name),va(l,e.name),nt(typeof V=="boolean",e,"internal-error"),nt(typeof O=="boolean",e,"internal-error"),va(c,e.name),va(f,e.name),va(m,e.name),va(b,e.name),va(_,e.name),va(S,e.name);const I=new $s({uid:A,auth:e,email:l,emailVerified:V,displayName:s,isAnonymous:O,photoURL:f,phoneNumber:c,tenantId:m,stsTokenManager:he,createdAt:_,lastLoginAt:S});return pe&&Array.isArray(pe)&&(I.providerData=pe.map(Ae=>({...Ae}))),b&&(I._redirectEventId=b),I}static async _fromIdTokenResponse(e,n,s=!1){const l=new dl;l.updateFromServerResponse(n);const c=new $s({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Sh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];nt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?T0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,m=new dl;m.updateFromIdToken(s);const b=new $s({uid:l.localId,auth:e,stsTokenManager:m,isAnonymous:f}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Cm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(b,_),b}}const zb=new Map;function zr(r){Hr(r instanceof Function,"Expected a class definition");let e=zb.get(r);return e?(Hr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,zb.set(r,e),e)}class S0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}S0.type="NONE";const Bb=S0;function ch(r,e,n){return`firebase:${r}:${e}:${n}`}class fl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=ch(this.userKey,l.apiKey,c),this.fullPersistenceKey=ch("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Th(this.auth,{idToken:e}).catch(()=>{});return n?$s._fromGetAccountInfoResponse(this.auth,n,e):null}return $s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new fl(zr(Bb),e,s);const l=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||zr(Bb);const f=ch(s,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const S=await _._get(f);if(S){let A;if(typeof S=="string"){const V=await Th(e,{idToken:S}).catch(()=>{});if(!V)break;A=await $s._fromGetAccountInfoResponse(e,V,S)}else A=$s._fromJSON(e,S);_!==c&&(m=A),c=_;break}}catch{}const b=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!b.length?new fl(c,e,s):(c=b[0],m&&await c._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(f)}catch{}})),new fl(c,e,s))}}function Ub(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C0(e))return"Blackberry";if(k0(e))return"Webos";if(w0(e))return"Safari";if((e.includes("chrome/")||A0(e))&&!e.includes("edge/"))return"Chrome";if(I0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function E0(r=ki()){return/firefox\//i.test(r)}function w0(r=ki()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A0(r=ki()){return/crios\//i.test(r)}function R0(r=ki()){return/iemobile/i.test(r)}function I0(r=ki()){return/android/i.test(r)}function C0(r=ki()){return/blackberry/i.test(r)}function k0(r=ki()){return/webos/i.test(r)}function rg(r=ki()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function BA(r=ki()){return rg(r)&&!!window.navigator?.standalone}function UA(){return n1()&&document.documentMode===10}function N0(r=ki()){return rg(r)||I0(r)||k0(r)||C0(r)||/windows phone/i.test(r)||R0(r)}function D0(r,e=[]){let n;switch(r){case"Browser":n=Ub(ki());break;case"Worker":n=`${Ub(ki())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Il}/${s}`}class qA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((f,m)=>{try{const b=e(c);f(b)}catch(b){m(b)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function HA(r,e={}){return Cl(r,"GET","/v2/passwordPolicy",Bh(r,e))}const FA=6;class GA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??FA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class KA{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qb(this),this.idTokenSubscription=new qb(this),this.beforeStateQueue=new qA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Th(this,{idToken:e}),s=await $s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ks(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m?.user&&(s=m.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ks(this.app))return Promise.reject(ka(this));const n=e?ei(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ks(this.app)?Promise.reject(ka(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ks(this.app)?Promise.reject(ka(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HA(this),n=new GA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await zA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zr(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(m,this,"internal-error"),m.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const b=e.addObserver(n,s,l);return()=>{f=!0,b()}}else{const b=e.addObserver(n);return()=>{f=!0,b()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=D0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Uh(r){return ei(r)}class qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=u1(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $A(r){ag=r}function QA(r){return ag.loadJS(r)}function WA(){return ag.gapiScript}function YA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function XA(r,e){const n=eg(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Br(c,e??{}))return l;qr(l,"already-initialized")}return n.initialize({options:e})}function ZA(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(zr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function JA(r,e,n){const s=Uh(r);nt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=M0(e),{host:f,port:m}=eR(e),b=m===null?"":`:${m}`,_={url:`${c}//${f}${b}/`},S=Object.freeze({host:f,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){nt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),nt(Br(_,s.config.emulator)&&Br(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,Rl(f)?(o0(`${c}//${f}${b}`),l0("Auth",!0)):tR()}function M0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function eR(r){const e=M0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Hb(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:Hb(f)}}}function Hb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function tR(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class x0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,n){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}async function ml(r,e){return b0(r,"POST","/v1/accounts:signInWithIdp",Bh(r,e))}const nR="http://localhost";class _o extends x0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const f=new _o(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ml(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ml(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ml(e,n)}buildRequest(){const e={requestUri:nR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zc(n)}return e}}class O0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Uc extends O0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ta extends Uc{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ta.credential(e.oauthAccessToken)}catch{return null}}}Ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ta.PROVIDER_ID="facebook.com";class Sa extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _o._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Sa.credential(n,s)}catch{return null}}}Sa.GOOGLE_SIGN_IN_METHOD="google.com";Sa.PROVIDER_ID="google.com";class Ea extends Uc{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.GITHUB_SIGN_IN_METHOD="github.com";Ea.PROVIDER_ID="github.com";class wa extends Uc{constructor(){super("twitter.com")}static credential(e,n){return _o._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return wa.credential(n,s)}catch{return null}}}wa.TWITTER_SIGN_IN_METHOD="twitter.com";wa.PROVIDER_ID="twitter.com";async function iR(r,e){return b0(r,"POST","/v1/accounts:signUp",Bh(r,e))}class xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await $s._fromIdTokenResponse(e,s,l),f=Fb(s);return new xa({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=Fb(s);return new xa({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function Fb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function L0(r){if(Ks(r.app))return Promise.reject(ka(r));const e=Uh(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new xa({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await iR(e,{returnSecureToken:!0}),s=await xa._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}class Eh extends $r{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new Eh(e,n,s,l)}}function V0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(r,c,e,s):c})}async function sR(r,e,n=!1){const s=await Dc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return xa._forOperation(r,"link",s)}async function rR(r,e,n=!1){const{auth:s}=r;if(Ks(s.app))return Promise.reject(ka(s));const l="reauthenticate";try{const c=await Dc(r,V0(s,l,e,r),n);nt(c.idToken,s,"internal-error");const f=sg(c.idToken);nt(f,s,"internal-error");const{sub:m}=f;return nt(r.uid===m,s,"user-mismatch"),xa._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&qr(s,"user-mismatch"),c}}async function aR(r,e,n=!1){if(Ks(r.app))return Promise.reject(ka(r));const s="signIn",l=await V0(r,s,e),c=await xa._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}function oR(r,e,n,s){return ei(r).onIdTokenChanged(e,n,s)}function lR(r,e,n){return ei(r).beforeAuthStateChanged(e,n)}function cR(r,e,n,s){return ei(r).onAuthStateChanged(e,n,s)}const wh="__sak";class j0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uR=1e3,hR=10;class P0 extends j0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,b)=>{this.notifyListeners(f,b)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);UA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,hR):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},uR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}P0.type="LOCAL";const dR=P0;class z0 extends j0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}z0.type="SESSION";const B0=z0;function fR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new qh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const m=Array.from(f).map(async _=>_(n.origin,c)),b=await fR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:b})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qh.receivers=[];function og(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class mR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((m,b)=>{const _=og("",20);l.port1.start();const S=setTimeout(()=>{b(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(A){const V=A;if(V.data.eventId===_)switch(V.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{b(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(V.data.response);break;default:clearTimeout(S),clearTimeout(c),b(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function dr(){return window}function gR(r){dr().location.href=r}function U0(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function pR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yR(){return navigator?.serviceWorker?.controller||null}function _R(){return U0()?self:null}const q0="firebaseLocalStorageDb",bR=1,Ah="firebaseLocalStorage",H0="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(r,e){return r.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function vR(){const r=indexedDB.deleteDatabase(q0);return new qc(r).toPromise()}function km(){const r=indexedDB.open(q0,bR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Ah,{keyPath:H0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Ah)?e(s):(s.close(),await vR(),e(await km()))})})}async function Gb(r,e,n){const s=Hh(r,!0).put({[H0]:e,value:n});return new qc(s).toPromise()}async function TR(r,e){const n=Hh(r,!1).get(e),s=await new qc(n).toPromise();return s===void 0?null:s.value}function Kb(r,e){const n=Hh(r,!0).delete(e);return new qc(n).toPromise()}const SR=800,ER=3;class F0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ER)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return U0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qh._getInstance(_R()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pR(),!this.activeServiceWorker)return;this.sender=new mR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Gb(e,wh,"1"),await Kb(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>TR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Hh(l,!1).getAll();return new qc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F0.type="LOCAL";const wR=F0;new Bc(3e4,6e4);function AR(r,e){return e?zr(e):(nt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class lg extends x0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ml(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ml(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RR(r){return aR(r.auth,new lg(r),r.bypassAuthState)}function IR(r){const{auth:e,user:n}=r;return nt(n,e,"internal-error"),rR(n,new lg(r),r.bypassAuthState)}async function CR(r){const{auth:e,user:n}=r;return nt(n,e,"internal-error"),sR(n,new lg(r),r.bypassAuthState)}class G0{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:m}=e;if(f){this.reject(f);return}const b={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(b))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RR;case"linkViaPopup":case"linkViaRedirect":return CR;case"reauthViaPopup":case"reauthViaRedirect":return IR;default:qr(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kR=new Bc(2e3,1e4);class ul extends G0{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kR.get())};e()}}ul.currentPopupAction=null;const NR="pendingRedirect",uh=new Map;class DR extends G0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=uh.get(this.auth._key());if(!e){try{const s=await MR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}uh.set(this.auth._key(),e)}return this.bypassAuthState||uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MR(r,e){const n=LR(e),s=OR(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function xR(r,e){uh.set(r._key(),e)}function OR(r){return zr(r._redirectPersistence)}function LR(r){return ch(NR,r.config.apiKey,r.name)}async function VR(r,e,n=!1){if(Ks(r.app))return Promise.reject(ka(r));const s=Uh(r),l=AR(s,e),f=await new DR(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const jR=600*1e3;class PR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!K0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jR&&this.cachedEventUids.clear(),this.cachedEventUids.has($b(e))}saveEventToCache(e){this.cachedEventUids.add($b(e)),this.lastProcessedEventTime=Date.now()}}function $b(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function K0({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K0(r);default:return!1}}async function BR(r,e={}){return Cl(r,"GET","/v1/projects",e)}const UR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qR=/^https?/;async function HR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await BR(r);for(const n of e)try{if(FR(n))return}catch{}qr(r,"unauthorized-domain")}function FR(r){const e=Im(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!qR.test(n))return!1;if(UR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}const GR=new Bc(3e4,6e4);function Qb(){const r=dr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function KR(r){return new Promise((e,n)=>{function s(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),n(hr(r,"network-request-failed"))},timeout:GR.get()})}if(dr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(dr().gapi?.load)s();else{const l=YA("iframefcb");return dr()[l]=()=>{gapi.load?s():n(hr(r,"network-request-failed"))},QA(`${WA()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw hh=null,e})}let hh=null;function $R(r){return hh=hh||KR(r),hh}const QR=new Bc(5e3,15e3),WR="__/auth/iframe",YR="emulator/auth/iframe",XR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JR(r){const e=r.config;nt(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?ig(e,YR):`https://${r.config.authDomain}/${WR}`,s={apiKey:e.apiKey,appName:r.name,v:Il},l=ZR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${zc(s).slice(1)}`}async function eI(r){const e=await $R(r),n=dr().gapi;return nt(n,r,"internal-error"),e.open({where:document.body,url:JR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=hr(r,"network-request-failed"),m=dr().setTimeout(()=>{c(f)},QR.get());function b(){dr().clearTimeout(m),l(s)}s.ping(b).then(b,()=>{c(f)})}))}const tI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nI=500,iI=600,sI="_blank",rI="http://localhost";class Wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aI(r,e,n,s=nI,l=iI){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const b={...tI,width:s.toString(),height:l.toString(),top:c,left:f},_=ki().toLowerCase();n&&(m=A0(_)?sI:n),E0(_)&&(e=e||rI,b.scrollbars="yes");const S=Object.entries(b).reduce((V,[O,pe])=>`${V}${O}=${pe},`,"");if(BA(_)&&m!=="_self")return oI(e||"",m),new Wb(null);const A=window.open(e||"",m,S);nt(A,r,"popup-blocked");try{A.focus()}catch{}return new Wb(A)}function oI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const lI="__/auth/handler",cI="emulator/auth/handler",uI=encodeURIComponent("fac");async function Yb(r,e,n,s,l,c){nt(r.config.authDomain,r,"auth-domain-config-required"),nt(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Il,eventId:l};if(e instanceof O0){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",c1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,A]of Object.entries({}))f[S]=A}if(e instanceof Uc){const S=e.getScopes().filter(A=>A!=="");S.length>0&&(f.scopes=S.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const S of Object.keys(m))m[S]===void 0&&delete m[S];const b=await r._getAppCheckToken(),_=b?`#${uI}=${encodeURIComponent(b)}`:"";return`${hI(r)}?${zc(m).slice(1)}${_}`}function hI({config:r}){return r.emulator?ig(r,cI):`https://${r.authDomain}/${lI}`}const gm="webStorageSupport";class dI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B0,this._completeRedirectFn=VR,this._overrideRedirectResult=xR}async _openPopup(e,n,s,l){Hr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Yb(e,n,s,Im(),l);return aI(e,c,og())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await Yb(e,n,s,Im(),l);return gR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Hr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await eI(e),s=new PR(e);return n.register("authEvent",l=>(nt(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gm,{type:gm},l=>{const c=l?.[0]?.[gm];c!==void 0&&n(!!c),qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return N0()||w0()||rg()}}const fI=dI;var Xb="@firebase/auth",Zb="1.11.1";class mI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pI(r){yl(new yo("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;nt(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const b={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:D0(r)},_=new KA(s,l,c,b);return ZA(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),yl(new yo("auth-internal",e=>{const n=Uh(e.getProvider("auth").getImmediate());return(s=>new mI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ca(Xb,Zb,gI(r)),Ca(Xb,Zb,"esm2020")}const yI=300,_I=a0("authIdTokenMaxAge")||yI;let Jb=null;const bI=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>_I)return;const l=n?.token;Jb!==l&&(Jb=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function $0(r=h0()){const e=eg(r,"auth");if(e.isInitialized())return e.getImmediate();const n=XA(r,{popupRedirectResolver:fI,persistence:[wR,dR,B0]}),s=a0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=bI(c.toString());lR(n,f,()=>f(n.currentUser)),oR(n,m=>f(m))}}const l=s0("auth");return l&&JA(n,`http://${l}`),n}function vI(){return document.getElementsByTagName("head")?.[0]??document}$A({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=hr("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",vI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pI("Browser");var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Na,Q0;(function(){var r;function e(D,R){function N(){}N.prototype=R.prototype,D.F=R.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(z,L,B){for(var C=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)C[Kt-2]=arguments[Kt];return R.prototype[L].apply(z,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,R,N){N||(N=0);const z=Array(16);if(typeof R=="string")for(var L=0;L<16;++L)z[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;L<16;++L)z[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=D.g[0],N=D.g[1],L=D.g[2];let B=D.g[3],C;C=R+(B^N&(L^B))+z[0]+3614090360&4294967295,R=N+(C<<7&4294967295|C>>>25),C=B+(L^R&(N^L))+z[1]+3905402710&4294967295,B=R+(C<<12&4294967295|C>>>20),C=L+(N^B&(R^N))+z[2]+606105819&4294967295,L=B+(C<<17&4294967295|C>>>15),C=N+(R^L&(B^R))+z[3]+3250441966&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(B^N&(L^B))+z[4]+4118548399&4294967295,R=N+(C<<7&4294967295|C>>>25),C=B+(L^R&(N^L))+z[5]+1200080426&4294967295,B=R+(C<<12&4294967295|C>>>20),C=L+(N^B&(R^N))+z[6]+2821735955&4294967295,L=B+(C<<17&4294967295|C>>>15),C=N+(R^L&(B^R))+z[7]+4249261313&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(B^N&(L^B))+z[8]+1770035416&4294967295,R=N+(C<<7&4294967295|C>>>25),C=B+(L^R&(N^L))+z[9]+2336552879&4294967295,B=R+(C<<12&4294967295|C>>>20),C=L+(N^B&(R^N))+z[10]+4294925233&4294967295,L=B+(C<<17&4294967295|C>>>15),C=N+(R^L&(B^R))+z[11]+2304563134&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(B^N&(L^B))+z[12]+1804603682&4294967295,R=N+(C<<7&4294967295|C>>>25),C=B+(L^R&(N^L))+z[13]+4254626195&4294967295,B=R+(C<<12&4294967295|C>>>20),C=L+(N^B&(R^N))+z[14]+2792965006&4294967295,L=B+(C<<17&4294967295|C>>>15),C=N+(R^L&(B^R))+z[15]+1236535329&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(L^B&(N^L))+z[1]+4129170786&4294967295,R=N+(C<<5&4294967295|C>>>27),C=B+(N^L&(R^N))+z[6]+3225465664&4294967295,B=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(B^R))+z[11]+643717713&4294967295,L=B+(C<<14&4294967295|C>>>18),C=N+(B^R&(L^B))+z[0]+3921069994&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^B&(N^L))+z[5]+3593408605&4294967295,R=N+(C<<5&4294967295|C>>>27),C=B+(N^L&(R^N))+z[10]+38016083&4294967295,B=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(B^R))+z[15]+3634488961&4294967295,L=B+(C<<14&4294967295|C>>>18),C=N+(B^R&(L^B))+z[4]+3889429448&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^B&(N^L))+z[9]+568446438&4294967295,R=N+(C<<5&4294967295|C>>>27),C=B+(N^L&(R^N))+z[14]+3275163606&4294967295,B=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(B^R))+z[3]+4107603335&4294967295,L=B+(C<<14&4294967295|C>>>18),C=N+(B^R&(L^B))+z[8]+1163531501&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^B&(N^L))+z[13]+2850285829&4294967295,R=N+(C<<5&4294967295|C>>>27),C=B+(N^L&(R^N))+z[2]+4243563512&4294967295,B=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(B^R))+z[7]+1735328473&4294967295,L=B+(C<<14&4294967295|C>>>18),C=N+(B^R&(L^B))+z[12]+2368359562&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(N^L^B)+z[5]+4294588738&4294967295,R=N+(C<<4&4294967295|C>>>28),C=B+(R^N^L)+z[8]+2272392833&4294967295,B=R+(C<<11&4294967295|C>>>21),C=L+(B^R^N)+z[11]+1839030562&4294967295,L=B+(C<<16&4294967295|C>>>16),C=N+(L^B^R)+z[14]+4259657740&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^B)+z[1]+2763975236&4294967295,R=N+(C<<4&4294967295|C>>>28),C=B+(R^N^L)+z[4]+1272893353&4294967295,B=R+(C<<11&4294967295|C>>>21),C=L+(B^R^N)+z[7]+4139469664&4294967295,L=B+(C<<16&4294967295|C>>>16),C=N+(L^B^R)+z[10]+3200236656&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^B)+z[13]+681279174&4294967295,R=N+(C<<4&4294967295|C>>>28),C=B+(R^N^L)+z[0]+3936430074&4294967295,B=R+(C<<11&4294967295|C>>>21),C=L+(B^R^N)+z[3]+3572445317&4294967295,L=B+(C<<16&4294967295|C>>>16),C=N+(L^B^R)+z[6]+76029189&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^B)+z[9]+3654602809&4294967295,R=N+(C<<4&4294967295|C>>>28),C=B+(R^N^L)+z[12]+3873151461&4294967295,B=R+(C<<11&4294967295|C>>>21),C=L+(B^R^N)+z[15]+530742520&4294967295,L=B+(C<<16&4294967295|C>>>16),C=N+(L^B^R)+z[2]+3299628645&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(L^(N|~B))+z[0]+4096336452&4294967295,R=N+(C<<6&4294967295|C>>>26),C=B+(N^(R|~L))+z[7]+1126891415&4294967295,B=R+(C<<10&4294967295|C>>>22),C=L+(R^(B|~N))+z[14]+2878612391&4294967295,L=B+(C<<15&4294967295|C>>>17),C=N+(B^(L|~R))+z[5]+4237533241&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~B))+z[12]+1700485571&4294967295,R=N+(C<<6&4294967295|C>>>26),C=B+(N^(R|~L))+z[3]+2399980690&4294967295,B=R+(C<<10&4294967295|C>>>22),C=L+(R^(B|~N))+z[10]+4293915773&4294967295,L=B+(C<<15&4294967295|C>>>17),C=N+(B^(L|~R))+z[1]+2240044497&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~B))+z[8]+1873313359&4294967295,R=N+(C<<6&4294967295|C>>>26),C=B+(N^(R|~L))+z[15]+4264355552&4294967295,B=R+(C<<10&4294967295|C>>>22),C=L+(R^(B|~N))+z[6]+2734768916&4294967295,L=B+(C<<15&4294967295|C>>>17),C=N+(B^(L|~R))+z[13]+1309151649&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~B))+z[4]+4149444226&4294967295,R=N+(C<<6&4294967295|C>>>26),C=B+(N^(R|~L))+z[11]+3174756917&4294967295,B=R+(C<<10&4294967295|C>>>22),C=L+(R^(B|~N))+z[2]+718787259&4294967295,L=B+(C<<15&4294967295|C>>>17),C=N+(B^(L|~R))+z[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+B&4294967295}s.prototype.v=function(D,R){R===void 0&&(R=D.length);const N=R-this.blockSize,z=this.C;let L=this.h,B=0;for(;B<R;){if(L==0)for(;B<=N;)l(this,D,B),B+=this.blockSize;if(typeof D=="string"){for(;B<R;)if(z[L++]=D.charCodeAt(B++),L==this.blockSize){l(this,z),L=0;break}}else for(;B<R;)if(z[L++]=D[B++],L==this.blockSize){l(this,z),L=0;break}}this.h=L,this.o+=R},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,N=0;N<4;++N)for(let z=0;z<32;z+=8)D[R++]=this.g[N]>>>z&255;return D};function c(D,R){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=R(D)}function f(D,R){this.h=R;const N=[];let z=!0;for(let L=D.length-1;L>=0;L--){const B=D[L]|0;z&&B==R||(N[L]=B,z=!1)}this.g=N}var m={};function b(D){return-128<=D&&D<128?c(D,function(R){return new f([R|0],R<0?-1:0)}):new f([D|0],D<0?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return A;if(D<0)return he(_(-D));const R=[];let N=1;for(let z=0;D>=N;z++)R[z]=D/N|0,N*=4294967296;return new f(R,0)}function S(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return he(S(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=_(Math.pow(R,8));let z=A;for(let B=0;B<D.length;B+=8){var L=Math.min(8,D.length-B);const C=parseInt(D.substring(B,B+L),R);L<8?(L=_(Math.pow(R,L)),z=z.j(L).add(_(C))):(z=z.j(N),z=z.add(_(C)))}return z}var A=b(0),V=b(1),O=b(16777216);r=f.prototype,r.m=function(){if(de(this))return-he(this).m();let D=0,R=1;for(let N=0;N<this.g.length;N++){const z=this.i(N);D+=(z>=0?z:4294967296+z)*R,R*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(pe(this))return"0";if(de(this))return"-"+he(this).toString(D);const R=_(Math.pow(D,6));var N=this;let z="";for(;;){const L=lt(N,R).g;N=I(N,L.j(R));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=L,pe(N))return B+z;for(;B.length<6;)B="0"+B;z=B+z}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function pe(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function de(D){return D.h==-1}r.l=function(D){return D=I(this,D),de(D)?-1:pe(D)?0:1};function he(D){const R=D.g.length,N=[];for(let z=0;z<R;z++)N[z]=~D.g[z];return new f(N,~D.h).add(V)}r.abs=function(){return de(this)?he(this):this},r.add=function(D){const R=Math.max(this.g.length,D.g.length),N=[];let z=0;for(let L=0;L<=R;L++){let B=z+(this.i(L)&65535)+(D.i(L)&65535),C=(B>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);z=C>>>16,B&=65535,C&=65535,N[L]=C<<16|B}return new f(N,N[N.length-1]&-2147483648?-1:0)};function I(D,R){return D.add(he(R))}r.j=function(D){if(pe(this)||pe(D))return A;if(de(this))return de(D)?he(this).j(he(D)):he(he(this).j(D));if(de(D))return he(this.j(he(D)));if(this.l(O)<0&&D.l(O)<0)return _(this.m()*D.m());const R=this.g.length+D.g.length,N=[];for(var z=0;z<2*R;z++)N[z]=0;for(z=0;z<this.g.length;z++)for(let L=0;L<D.g.length;L++){const B=this.i(z)>>>16,C=this.i(z)&65535,Kt=D.i(L)>>>16,En=D.i(L)&65535;N[2*z+2*L]+=C*En,Ae(N,2*z+2*L),N[2*z+2*L+1]+=B*En,Ae(N,2*z+2*L+1),N[2*z+2*L+1]+=C*Kt,Ae(N,2*z+2*L+1),N[2*z+2*L+2]+=B*Kt,Ae(N,2*z+2*L+2)}for(D=0;D<R;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=R;D<2*R;D++)N[D]=0;return new f(N,0)};function Ae(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function Le(D,R){this.g=D,this.h=R}function lt(D,R){if(pe(R))throw Error("division by zero");if(pe(D))return new Le(A,A);if(de(D))return R=lt(he(D),R),new Le(he(R.g),he(R.h));if(de(R))return R=lt(D,he(R)),new Le(he(R.g),R.h);if(D.g.length>30){if(de(D)||de(R))throw Error("slowDivide_ only works with positive integers.");for(var N=V,z=R;z.l(D)<=0;)N=jt(N),z=jt(z);var L=qe(N,1),B=qe(z,1);for(z=qe(z,2),N=qe(N,2);!pe(z);){var C=B.add(z);C.l(D)<=0&&(L=L.add(N),B=C),z=qe(z,1),N=qe(N,1)}return R=I(D,L.j(R)),new Le(L,R)}for(L=A;D.l(R)>=0;){for(N=Math.max(1,Math.floor(D.m()/R.m())),z=Math.ceil(Math.log(N)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),B=_(N),C=B.j(R);de(C)||C.l(D)>0;)N-=z,B=_(N),C=B.j(R);pe(B)&&(B=V),L=L.add(B),D=I(D,C)}return new Le(L,D)}r.B=function(D){return lt(this,D).h},r.and=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)&D.i(z);return new f(N,this.h&D.h)},r.or=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)|D.i(z);return new f(N,this.h|D.h)},r.xor=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)^D.i(z);return new f(N,this.h^D.h)};function jt(D){const R=D.g.length+1,N=[];for(let z=0;z<R;z++)N[z]=D.i(z)<<1|D.i(z-1)>>>31;return new f(N,D.h)}function qe(D,R){const N=R>>5;R%=32;const z=D.g.length-N,L=[];for(let B=0;B<z;B++)L[B]=R>0?D.i(B+N)>>>R|D.i(B+N+1)<<32-R:D.i(B+N);return new f(L,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Q0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=S,Na=f}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var W0,bc,Y0,dh,Nm,X0,Z0,J0;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function l(u,g){if(g)e:{var v=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var F=u[w];if(!(F in v))break e;v=v[F]}u=u[u.length-1],w=v[u],g=g(w),g!=w&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var v=[],w;for(w in g)Object.prototype.hasOwnProperty.call(g,w)&&v.push([w,g[w]]);return v}});var c=c||{},f=this||self;function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function b(u,g,v){return u.call.apply(u.bind,arguments)}function _(u,g,v){return _=b,_.apply(null,arguments)}function S(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function A(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(w,F,Q){for(var _e=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)_e[Oe-2]=arguments[Oe];return g.prototype[F].apply(w,_e)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const g=u.length;if(g>0){const v=Array(g);for(let w=0;w<g;w++)v[w]=u[w];return v}return[]}function pe(u,g){for(let w=1;w<arguments.length;w++){const F=arguments[w];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=u.length||0;const Q=F.length||0;u.length=v+Q;for(let _e=0;_e<Q;_e++)u[v+_e]=F[_e]}else u.push(F)}}class de{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function he(u){f.setTimeout(()=>{throw u},0)}function I(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ae{constructor(){this.h=this.g=null}add(g,v){const w=Le.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Le=new de(()=>new lt,u=>u.reset());class lt{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,qe=!1,D=new Ae,R=()=>{const u=Promise.resolve(void 0);jt=()=>{u.then(N)}};function N(){for(var u;u=I();){try{u.h.call(u.g)}catch(v){he(v)}var g=Le;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}qe=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Kt(u,g){L.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}A(Kt,L),Kt.prototype.init=function(u,g){const v=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Kt.Z.h.call(this)},Kt.prototype.h=function(){Kt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var En="closure_listenable_"+(Math.random()*1e6|0),te=0;function be(u,g,v,w,F){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=F,this.key=++te,this.da=this.fa=!1}function Ve(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yt(u,g,v){for(const w in u)g.call(v,u[w],w,u)}function zt(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function j(u){const g={};for(const v in u)g[v]=u[v];return g}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(u,g){let v,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(v in w)u[v]=w[v];for(let Q=0;Q<re.length;Q++)v=re[Q],Object.prototype.hasOwnProperty.call(w,v)&&(u[v]=w[v])}}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,g,v,w,F){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const _e=it(u,g,w,F);return _e>-1?(g=u[_e],v||(g.fa=!1)):(g=new be(g,this.src,Q,!!w,F),g.fa=v,u.push(g)),g};function je(u,g){const v=g.type;if(v in u.g){var w=u.g[v],F=Array.prototype.indexOf.call(w,g,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(w,F,1),Q&&(Ve(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function it(u,g,v,w){for(let F=0;F<u.length;++F){const Q=u[F];if(!Q.da&&Q.listener==g&&Q.capture==!!v&&Q.ha==w)return F}return-1}var ct="closure_lm_"+(Math.random()*1e6|0),un={};function We(u,g,v,w,F){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)We(u,g[Q],v,w,F);return null}return v=Ni(v),u&&u[En]?u.J(g,v,m(w)?!!w.capture:!1,F):bn(u,g,v,!1,w,F)}function bn(u,g,v,w,F,Q){if(!g)throw Error("Invalid event type");const _e=m(F)?!!F.capture:!!F;let Oe=Ui(u);if(Oe||(u[ct]=Oe=new Se(u)),v=Oe.add(g,v,w,_e,Q),v.proxy)return v;if(w=Ji(),v.proxy=w,w.src=u,w.listener=v,u.addEventListener)B||(F=_e),F===void 0&&(F=!1),u.addEventListener(g.toString(),w,F);else if(u.attachEvent)u.attachEvent(Ln(g.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ji(){function u(v){return g.call(u.src,u.listener,v)}const g=Ws;return u}function js(u,g,v,w,F){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)js(u,g[Q],v,w,F);else w=m(w)?!!w.capture:!!w,v=Ni(v),u&&u[En]?(u=u.i,Q=String(g).toString(),Q in u.g&&(g=u.g[Q],v=it(g,v,w,F),v>-1&&(Ve(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[Q],u.h--)))):u&&(u=Ui(u))&&(g=u.g[g.toString()],u=-1,g&&(u=it(g,v,w,F)),(v=u>-1?g[u]:null)&&Qn(v))}function Qn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[En])je(g.i,u);else{var v=u.type,w=u.proxy;g.removeEventListener?g.removeEventListener(v,w,u.capture):g.detachEvent?g.detachEvent(Ln(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=Ui(g))?(je(v,u),v.h==0&&(v.src=null,g[ct]=null)):Ve(u)}}}function Ln(u){return u in un?un[u]:un[u]="on"+u}function Ws(u,g){if(u.da)u=!0;else{g=new Kt(g,this);const v=u.listener,w=u.ha||u.src;u.fa&&Qn(u),u=v.call(w,g)}return u}function Ui(u){return u=u[ct],u instanceof Se?u:null}var es="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ni(u){return typeof u=="function"?u:(u[es]||(u[es]=function(g){return u.handleEvent(g)}),u[es])}function Wt(){z.call(this),this.i=new Se(this),this.M=this,this.G=null}A(Wt,z),Wt.prototype[En]=!0,Wt.prototype.removeEventListener=function(u,g,v,w){js(this,u,g,v,w)};function Jt(u,g){var v,w=u.G;if(w)for(v=[];w;w=w.G)v.push(w);if(u=u.M,w=g.type||g,typeof g=="string")g=new L(g,u);else if(g instanceof L)g.target=g.target||u;else{var F=g;g=new L(w,u),ye(g,F)}F=!0;let Q,_e;if(v)for(_e=v.length-1;_e>=0;_e--)Q=g.g=v[_e],F=_i(Q,w,!0,g)&&F;if(Q=g.g=u,F=_i(Q,w,!0,g)&&F,F=_i(Q,w,!1,g)&&F,v)for(_e=0;_e<v.length;_e++)Q=g.g=v[_e],F=_i(Q,w,!1,g)&&F}Wt.prototype.N=function(){if(Wt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let w=0;w<v.length;w++)Ve(v[w]);delete u.g[g],u.h--}}this.G=null},Wt.prototype.J=function(u,g,v,w){return this.i.add(String(u),g,!1,v,w)},Wt.prototype.K=function(u,g,v,w){return this.i.add(String(u),g,!0,v,w)};function _i(u,g,v,w){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let Q=0;Q<g.length;++Q){const _e=g[Q];if(_e&&!_e.da&&_e.capture==v){const Oe=_e.listener,Ht=_e.ha||_e.src;_e.fa&&je(u.i,_e),F=Oe.call(Ht,w)!==!1&&F}}return F&&!w.defaultPrevented}function qa(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function Ys(u){u.g=qa(()=>{u.g=null,u.i&&(u.i=!1,Ys(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Nn extends z{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ys(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(u){z.call(this),this.h=u,this.g={}}A(ts,z);var Xs=[];function ns(u){yt(u.g,function(g,v){this.g.hasOwnProperty(v)&&Qn(g)},u),u.g={}}ts.prototype.N=function(){ts.Z.N.call(this),ns(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var is=f.JSON.stringify,ss=f.JSON.parse,Zs=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function qi(){}function Js(){}var Di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fn(){L.call(this,"d")}A(fn,L);function ti(){L.call(this,"c")}A(ti,L);var on={},Ps=null;function Ts(){return Ps=Ps||new Wt}on.Ia="serverreachability";function In(u){L.call(this,on.Ia,u)}A(In,L);function Wn(u){const g=Ts();Jt(g,new In(g))}on.STAT_EVENT="statevent";function Ss(u,g){L.call(this,on.STAT_EVENT,u),this.stat=g}A(Ss,L);function Yt(u){const g=Ts();Jt(g,new Ss(g,u))}on.Ja="timingevent";function bi(u,g){L.call(this,on.Ja,u),this.size=g}A(bi,L);function Dn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function vt(){this.g=!0}vt.prototype.ua=function(){this.g=!1};function Ha(u,g,v,w,F,Q){u.info(function(){if(u.g)if(Q){var _e="",Oe=Q.split("&");for(let bt=0;bt<Oe.length;bt++){var Ht=Oe[bt].split("=");if(Ht.length>1){const Ke=Ht[0];Ht=Ht[1];const Pt=Ke.split("_");_e=Pt.length>=2&&Pt[1]=="type"?_e+(Ke+"="+Ht+"&"):_e+(Ke+"=redacted&")}}}else _e=null;else _e=Q;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+g+`
`+v+`
`+_e})}function er(u,g,v,w,F,Q,_e){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+g+`
`+v+`
`+Q+" "+_e})}function Hi(u,g,v,w){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Fa(u,v)+(w?" "+w:"")})}function rs(u,g){u.info(function(){return"TIMEOUT: "+g})}vt.prototype.info=function(){};function Fa(u,g){if(!u.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var v=Q[u];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var F=w[0];if(F!="noop"&&F!="stop"&&F!="close")for(let _e=1;_e<w.length;_e++)w[_e]=""}}}}return is(Q)}catch{return g}}var U={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ne={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ve;function we(){}A(we,qi),we.prototype.g=function(){return new XMLHttpRequest},ve=new we;function Fe(u){return encodeURIComponent(String(u))}function Bt(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Xt(u,g,v,w){this.j=u,this.i=g,this.l=v,this.S=w||1,this.V=new ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mi}function Mi(){this.i=null,this.g="",this.h=!1}var mn={},Vn={};function vi(u,g,v){u.M=1,u.A=tr(ln(g)),u.u=v,u.R=!0,Es(u,null)}function Es(u,g){u.F=Date.now(),os(u),u.B=ln(u.A);var v=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),me(v.i,"t",w),u.C=0,v=u.j.L,u.h=new Mi,u.g=Cs(u.j,v?g:null,!u.u),u.P>0&&(u.O=new Nn(_(u.Y,u,u.g),u.P)),g=u.V,v=u.g,w=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Xs[0]=F.toString()),F=Xs);for(let Q=0;Q<F.length;Q++){const _e=We(v,F[Q],w||g.handleEvent,!1,g.h||g);if(!_e)break;g.g[_e.key]=_e}g=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Wn(),Ha(u.i,u.v,u.B,u.l,u.S,u.u)}Xt.prototype.ba=function(u){u=u.target;const g=this.O;g&&tt(u)==3?g.j():this.Y(u)},Xt.prototype.Y=function(u){try{if(u==this.g)e:{const Oe=tt(this.g),Ht=this.g.ya(),bt=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Xe(this.g)))){this.K||Oe!=4||Ht==7||(Ht==8||bt<=0?Wn(3):Wn(2)),xi(this);var g=this.g.ca();this.X=g;var v=_r(this);if(this.o=g==200,er(this.i,this.v,this.B,this.l,this.S,Oe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var w,F=this.g;if((w=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(w)){var Q=w;break t}}Q=null}if(u=Q)Hi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ws(this,u);else{this.o=!1,this.m=3,Yt(12),Oi(this),Fi(this);break e}}if(this.R){u=!0;let Ke;for(;!this.K&&this.C<v.length;)if(Ke=as(this,v),Ke==Vn){Oe==4&&(this.m=4,Yt(14),u=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==mn){this.m=4,Yt(15),Hi(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Hi(this.i,this.l,Ke,null),ws(this,Ke);if(zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||v.length!=0||this.h.h||(this.m=1,Yt(16),u=!1),this.o=this.o&&u,!u)Hi(this.i,this.l,v,"[Invalid Chunked Response]"),Oi(this),Fi(this);else if(v.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ft(_e),_e.P=!0,Yt(11))}}else Hi(this.i,this.l,v,null),ws(this,v);Oe==4&&Oi(this),this.o&&!this.K&&(Oe==4?ni(this.j,this):(this.o=!1,os(this)))}else Zt(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),Oi(this),Fi(this)}}}catch{}finally{}};function _r(u){if(!zs(u))return u.g.la();const g=Xe(u.g);if(g==="")return"";let v="";const w=g.length,F=tt(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Oi(u),Fi(u),"";u.h.i=new f.TextDecoder}for(let Q=0;Q<w;Q++)u.h.h=!0,v+=u.h.i.decode(g[Q],{stream:!(F&&Q==w-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function zs(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function as(u,g){var v=u.C,w=g.indexOf(`
`,v);return w==-1?Vn:(v=Number(g.substring(v,w)),isNaN(v)?mn:(w+=1,w+v>g.length?Vn:(g=g.slice(w,w+v),u.C=w+v,g)))}Xt.prototype.cancel=function(){this.K=!0,Oi(this)};function os(u){u.T=Date.now()+u.H,Qr(u,u.H)}function Qr(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Dn(_(u.aa,u),g)}function xi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Xt.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(rs(this.i,this.B),this.M!=2&&(Wn(),Yt(17)),Oi(this),this.m=2,Fi(this)):Qr(this,this.T-u)};function Fi(u){u.j.I==0||u.K||ni(u.j,u)}function Oi(u){xi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,ns(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function ws(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||As(v.h,u))){if(!u.L&&As(v.h,u)&&v.I==3){try{var w=v.Ba.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Xn(v),$t(v);else break e;At(v),Yt(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Dn(_(v.Va,v),6e3));ls(v.h)<=1&&v.ta&&(v.ta=void 0)}else Tn(v,11)}else if((u.L||v.g==u)&&Xn(v),!C(g))for(F=v.Ba.g.parse(g),g=0;g<F.length;g++){let bt=F[g];const Ke=bt[0];if(!(Ke<=v.K))if(v.K=Ke,bt=bt[1],v.I==2)if(bt[0]=="c"){v.M=bt[1],v.ba=bt[2];const Pt=bt[3];Pt!=null&&(v.ka=Pt,v.j.info("VER="+v.ka));const Pn=bt[4];Pn!=null&&(v.za=Pn,v.j.info("SVER="+v.za));const Si=bt[5];Si!=null&&typeof Si=="number"&&Si>0&&(w=1.5*Si,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Bs=u.g;if(Bs){const Xa=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var Q=w.h;Q.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Yr(Q,Q.h),Q.h=null))}if(w.G){const Io=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(w.wa=Io,Ut(w.J,w.G,Io))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var _e=u;if(w.na=Gi(w,w.L?w.ba:null,w.W),_e.L){Ka(w.h,_e);var Oe=_e,Ht=w.O;Ht&&(Oe.H=Ht),Oe.D&&(xi(Oe),os(Oe)),w.g=_e}else dn(w);v.i.length>0&&ge(v)}else bt[0]!="stop"&&bt[0]!="close"||Tn(v,7);else v.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Tn(v,7):qt(v):bt[0]!="noop"&&v.l&&v.l.qa(bt),v.A=0)}}Wn(4)}catch{}}var wn=class{constructor(u,g){this.g=u,this.map=g}};function Wr(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ga(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ls(u){return u.h?1:u.g?u.g.size:0}function As(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Yr(u,g){u.g?u.g.add(g):u.h=g}function Ka(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Wr.prototype.cancel=function(){if(this.i=$a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $a(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return O(u.i)}var Xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function br(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const w=u[v].indexOf("=");let F,Q=null;w>=0?(F=u[v].substring(0,w),Q=u[v].substring(w+1)):F=u[v],g(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function vn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof vn?(this.l=u.l,hn(this,u.j),this.o=u.o,this.g=u.g,Rs(this,u.u),this.h=u.h,Qa(this,W(u.i)),this.m=u.m):u&&(g=String(u).match(Xr))?(this.l=!1,hn(this,g[1]||"",!0),this.o=Is(g[2]||""),this.g=Is(g[3]||"",!0),Rs(this,g[4]),this.h=Is(g[5]||"",!0),Qa(this,g[6]||"",!0),this.m=Is(g[7]||"")):(this.l=!1,this.i=new ir(null,this.l))}vn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(vr(g,Tr,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(vr(g,Tr,!0),"@"),u.push(Fe(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(vr(v,v.charAt(0)=="/"?Ya:Wa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",vr(v,Ro)),u.join("")},vn.prototype.resolve=function(u){const g=ln(this);let v=!!u.j;v?hn(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var w=u.h;if(v)Rs(g,u.u);else if(v=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var F=g.h.lastIndexOf("/");F!=-1&&(w=g.h.slice(0,F+1)+w)}if(F=w,F==".."||F==".")w="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){w=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let _e=0;_e<F.length;){const Oe=F[_e++];Oe=="."?w&&_e==F.length&&Q.push(""):Oe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&_e==F.length&&Q.push("")):(Q.push(Oe),w=!0)}w=Q.join("/")}else w=F}return v?g.h=w:v=u.i.toString()!=="",v?Qa(g,W(u.i)):v=!!u.m,v&&(g.m=u.m),g};function ln(u){return new vn(u)}function hn(u,g,v){u.j=v?Is(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Rs(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Qa(u,g,v){g instanceof ir?(u.i=g,se(u.i,u.l)):(v||(g=vr(g,nr)),u.i=new ir(g,u.l))}function Ut(u,g,v){u.i.set(g,v)}function tr(u){return Ut(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Is(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vr(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,oi),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function oi(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Tr=/[#\/\?@]/g,Wa=/[#\?:]/g,Ya=/[#\?]/g,nr=/[#\?@]/g,Ro=/#/g;function ir(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Ti(u){u.g||(u.g=new Map,u.h=0,u.i&&br(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=ir.prototype,r.add=function(u,g){Ti(this),this.i=null,u=E(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function M(u,g){Ti(u),g=E(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function q(u,g){return Ti(u),g=E(u,g),u.g.has(g)}r.forEach=function(u,g){Ti(this),this.g.forEach(function(v,w){v.forEach(function(F){u.call(g,F,w,this)},this)},this)};function X(u,g){Ti(u);let v=[];if(typeof g=="string")q(u,g)&&(v=v.concat(u.g.get(E(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}r.set=function(u,g){return Ti(this),this.i=null,u=E(this,u),q(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=X(this,u),u.length>0?String(u[0]):g):g};function me(u,g,v){M(u,g),v.length>0&&(u.i=null,u.g.set(E(u,g),O(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let w=0;w<g.length;w++){var v=g[w];const F=Fe(v);v=X(this,v);for(let Q=0;Q<v.length;Q++){let _e=F;v[Q]!==""&&(_e+="="+Fe(v[Q])),u.push(_e)}}return this.i=u.join("&")};function W(u){const g=new ir;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function E(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function se(u,g){g&&!u.j&&(Ti(u),u.i=null,u.g.forEach(function(v,w){const F=w.toLowerCase();w!=F&&(M(this,w),me(this,F,v))},u)),u.j=g}function Y(u,g){const v=new vt;if(f.Image){const w=new Image;w.onload=S(ke,v,"TestLoadImage: loaded",!0,g,w),w.onerror=S(ke,v,"TestLoadImage: error",!1,g,w),w.onabort=S(ke,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=S(ke,v,"TestLoadImage: timeout",!1,g,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else g(!1)}function Ie(u,g){const v=new vt,w=new AbortController,F=setTimeout(()=>{w.abort(),ke(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:w.signal}).then(Q=>{clearTimeout(F),Q.ok?ke(v,"TestPingServer: ok",!0,g):ke(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),ke(v,"TestPingServer: error",!1,g)})}function ke(u,g,v,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(v)}catch{}}function Ce(){this.g=new Zs}function Ee(u){this.i=u.Sb||null,this.h=u.ab||!1}A(Ee,qi),Ee.prototype.g=function(){return new De(this.i,this.h)};function De(u,g){Wt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(De,Wt),r=De.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,ze(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pe(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ze(this)),this.g&&(this.readyState=3,ze(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ut(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ut(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Pe(this):ze(this),this.readyState==3&&ut(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Pe(this))},r.Na=function(u){this.g&&(this.response=u,Pe(this))},r.ga=function(){this.g&&Pe(this)};function Pe(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ze(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function ze(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(De.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function wt(u){let g="";return yt(u,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function Dt(u,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=wt(v),typeof u=="string"?v!=null&&Fe(v):Ut(u,g,v))}function Ye(u){Wt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Ye,Wt);var rt=/^https?$/i,fe=["POST","PUT"];r=Ye.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ve.g(),this.g.onreadystatechange=V(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){gn(this,Q);return}if(u=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)v.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())v.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(fe,g,void 0)>=0)||w||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,_e]of v)this.g.setRequestHeader(Q,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){gn(this,Q)}};function gn(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,pt(u),Be(u)}function pt(u){u.A||(u.A=!0,Jt(u,"complete"),Jt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Jt(this,"complete"),Jt(this,"abort"),Be(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Be(this,!0)),Ye.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?_t(this):this.Xa())},r.Xa=function(){_t(this)};function _t(u){if(u.h&&typeof c<"u"){if(u.v&&tt(u)==4)setTimeout(u.Ca.bind(u),0);else if(Jt(u,"readystatechange"),tt(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=Q===0){let _e=String(u.D).match(Xr)[1]||null;!_e&&f.self&&f.self.location&&(_e=f.self.location.protocol.slice(0,-1)),w=!rt.test(_e?_e.toLowerCase():"")}v=w}if(v)Jt(u,"complete"),Jt(u,"success");else{u.o=6;try{var F=tt(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",pt(u)}}finally{Be(u)}}}}function Be(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Jt(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function tt(u){return u.g?u.g.readyState:0}r.ca=function(){try{return tt(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ss(g)}};function Xe(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Zt(u){const g={};u=(u.g&&tt(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(C(u[w]))continue;var v=Bt(u[w]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=g[F]||[];g[F]=Q,Q.push(v)}zt(g,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ot(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function at(u){this.za=0,this.i=[],this.j=new vt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ot("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ot("baseRetryDelayMs",5e3,u),this.Za=Ot("retryDelaySeedMs",1e4,u),this.Ta=Ot("forwardChannelMaxRetries",2,u),this.va=Ot("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Wr(u&&u.concurrentRequestLimit),this.Ba=new Ce,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=at.prototype,r.ka=8,r.I=1,r.connect=function(u,g,v,w){Yt(0),this.W=u,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=Gi(this,null,this.W),ge(this)};function qt(u){if(Tt(u),u.I==3){var g=u.V++,v=ln(u.J);if(Ut(v,"SID",u.M),Ut(v,"RID",g),Ut(v,"TYPE","terminate"),Me(u,v),g=new Xt(u,u.j,g),g.M=2,g.A=tr(ln(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=Cs(g.j,null),g.g.ea(g.A)),g.F=Date.now(),os(g)}Li(u)}function $t(u){u.g&&(ft(u),u.g.cancel(),u.g=null)}function Tt(u){$t(u),u.v&&(f.clearTimeout(u.v),u.v=null),Xn(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function ge(u){if(!Ga(u.h)&&!u.m){u.m=!0;var g=u.Ea;jt||R(),qe||(jt(),qe=!0),D.add(g,u),u.D=0}}function Ge(u,g){return ls(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Dn(_(u.Ea,u,g),ii(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Xt(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=j(Q),ye(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=dt(this,F,g),v=ln(this.J),Ut(v,"RID",u),Ut(v,"CVER",22),this.G&&Ut(v,"X-HTTP-Session-Id",this.G),Me(this,v),Q&&(this.R?g="headers="+Fe(wt(Q))+"&"+g:this.u&&Dt(v,this.u,Q)),Yr(this.h,F),this.Ra&&Ut(v,"TYPE","init"),this.S?(Ut(v,"$req",g),Ut(v,"SID","null"),F.U=!0,vi(F,v,null)):vi(F,v,g),this.I=2}}else this.I==3&&(u?He(this,u):this.i.length==0||Ga(this.h)||He(this))};function He(u,g){var v;g?v=g.l:v=u.V++;const w=ln(u.J);Ut(w,"SID",u.M),Ut(w,"RID",v),Ut(w,"AID",u.K),Me(u,w),u.u&&u.o&&Dt(w,u.u,u.o),v=new Xt(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=dt(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Yr(u.h,v),vi(v,w,g)}function Me(u,g){u.H&&yt(u.H,function(v,w){Ut(g,w,v)}),u.l&&yt({},function(v,w){Ut(g,w,v)})}function dt(u,g,v){v=Math.min(u.i.length,v);const w=u.l?_(u.l.Ka,u.l,u):null;e:{var F=u.i;let Oe=-1;for(;;){const Ht=["count="+v];Oe==-1?v>0?(Oe=F[0].g,Ht.push("ofs="+Oe)):Oe=0:Ht.push("ofs="+Oe);let bt=!0;for(let Ke=0;Ke<v;Ke++){var Q=F[Ke].g;const Pt=F[Ke].map;if(Q-=Oe,Q<0)Oe=Math.max(0,F[Ke].g-100),bt=!1;else try{Q="req"+Q+"_"||"";try{var _e=Pt instanceof Map?Pt:Object.entries(Pt);for(const[Pn,Si]of _e){let Bs=Si;m(Si)&&(Bs=is(Si)),Ht.push(Q+Pn+"="+encodeURIComponent(Bs))}}catch(Pn){throw Ht.push(Q+"type="+encodeURIComponent("_badmap")),Pn}}catch{w&&w(Pt)}}if(bt){_e=Ht.join("&");break e}}_e=void 0}return u=u.i.splice(0,v),g.G=u,_e}function dn(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;jt||R(),qe||(jt(),qe=!0),D.add(g,u),u.A=0}}function At(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Dn(_(u.Da,u),ii(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Yn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Dn(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),$t(this),Yn(this))};function ft(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Yn(u){u.g=new Xt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=ln(u.na);Ut(g,"RID","rpc"),Ut(g,"SID",u.M),Ut(g,"AID",u.K),Ut(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ut(g,"TO",u.ia),Ut(g,"TYPE","xmlhttp"),Me(u,g),u.u&&u.o&&Dt(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=tr(ln(g)),v.u=null,v.R=!0,Es(v,u)}r.Va=function(){this.C!=null&&(this.C=null,$t(this),At(this),Yt(19))};function Xn(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function ni(u,g){var v=null;if(u.g==g){Xn(u),ft(u),u.g=null;var w=2}else if(As(u.h,g))v=g.G,Ka(u.h,g),w=1;else return;if(u.I!=0){if(g.o)if(w==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;w=Ts(),Jt(w,new bi(w,v)),ge(u)}else dn(u);else if(F=g.m,F==3||F==0&&g.X>0||!(w==1&&Ge(u,g)||w==2&&At(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),F){case 1:Tn(u,5);break;case 4:Tn(u,10);break;case 3:Tn(u,6);break;default:Tn(u,2)}}}function ii(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function Tn(u,g){if(u.j.info("Error code "+g),g==2){var v=_(u.bb,u),w=u.Ua;const F=!w;w=new vn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||hn(w,"https"),tr(w),F?Y(w.toString(),v):Ie(w.toString(),v)}else Yt(2);u.I=0,u.l&&u.l.pa(g),Li(u),Tt(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Li(u){if(u.I=0,u.ja=[],u.l){const g=$a(u.h);(g.length!=0||u.i.length!=0)&&(pe(u.ja,g),pe(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Gi(u,g,v){var w=v instanceof vn?ln(v):new vn(v);if(w.g!="")g&&(w.g=g+"."+w.g),Rs(w,w.u);else{var F=f.location;w=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const Q=new vn(null);w&&hn(Q,w),g&&(Q.g=g),F&&Rs(Q,F),v&&(Q.h=v),w=Q}return v=u.G,g=u.wa,v&&g&&Ut(w,v,g),Ut(w,"VER",u.ka),Me(u,w),w}function Cs(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Ye(new Ee({ab:v})):new Ye(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function sr(){}r=sr.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Vi(){}Vi.prototype.g=function(u,g){return new Mt(u,g)};function Mt(u,g){Wt.call(this),this.g=new at(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new jn(this)}A(Mt,Wt),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){qt(this.g)},Mt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=is(u),u=v);g.i.push(new wn(g.Ya++,u)),g.I==3&&ge(g)},Mt.prototype.N=function(){this.g.l=null,delete this.j,qt(this.g),delete this.g,Mt.Z.N.call(this)};function ji(u){fn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}A(ji,fn);function li(){ti.call(this),this.status=1}A(li,ti);function jn(u){this.g=u}A(jn,sr),jn.prototype.ra=function(){Jt(this.g,"a")},jn.prototype.qa=function(u){Jt(this.g,new ji(u))},jn.prototype.pa=function(u){Jt(this.g,new li)},jn.prototype.oa=function(){Jt(this.g,"b")},Vi.prototype.createWebChannel=Vi.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,J0=function(){return new Vi},Z0=function(){return Ts()},X0=on,Nm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},U.NO_ERROR=0,U.TIMEOUT=8,U.HTTP_ERROR=6,dh=U,ne.COMPLETE="complete",Y0=ne,Js.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Wt.prototype.listen=Wt.prototype.J,bc=Js,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,W0=Ye}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const tv="@firebase/firestore",nv="4.9.2";class Ii{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");let kl="12.3.0";const bo=new Zm("@firebase/firestore");function rl(){return bo.logLevel}function Re(r,...e){if(bo.logLevel<=Ct.DEBUG){const n=e.map(cg);bo.debug(`Firestore (${kl}): ${r}`,...n)}}function Fr(r,...e){if(bo.logLevel<=Ct.ERROR){const n=e.map(cg);bo.error(`Firestore (${kl}): ${r}`,...n)}}function _l(r,...e){if(bo.logLevel<=Ct.WARN){const n=e.map(cg);bo.warn(`Firestore (${kl}): ${r}`,...n)}}function cg(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ze(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,eT(r,s,n)}function eT(r,e,n){let s=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Fr(s),new Error(s)}function Vt(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||eT(e,l,s)}function st(r,e){return r}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends $r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class tT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ii.UNAUTHENTICATED)))}shutdown(){}}class SI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Vt(this.o===void 0,42304);let s=this.i;const l=b=>this.i!==s?(s=this.i,n(b)):Promise.resolve();let c=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new fr,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const b=c;e.enqueueRetryable((async()=>{await b.promise,await l(this.currentUser)}))},m=b=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((b=>m(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new fr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Vt(typeof s.accessToken=="string",31837,{l:s}),new tT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new Ii(e)}}class wI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new wI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ii.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ks(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Vt(this.o===void 0,3512);const s=c=>{c.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function II(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=II(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function kt(r,e){return r<e?-1:r>e?1:0}function Dm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return pm(l)===pm(c)?kt(l,c):pm(l)?1:-1}return kt(r.length,e.length)}const CI=55296,kI=57343;function pm(r){const e=r.charCodeAt(0);return e>=CI&&e<=kI}function bl(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}const sv="__name__";class ur{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ze(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ur.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ur?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=ur.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return kt(e.length,n.length)}static compareSegments(e,n){const s=ur.isNumericId(e),l=ur.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ur.extractNumericId(e).compare(ur.extractNumericId(n)):Dm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Na.fromString(e.substring(4,e.length-2))}}class an extends ur{construct(e,n,s){return new an(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new an(n)}static emptyPath(){return new an([])}}const NI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends ur{construct(e,n,s){return new pi(e,n,s)}static isValidIdentifier(e){return NI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sv}static keyField(){return new pi([sv])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new Te(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const m=e[l];if(m==="\\"){if(l+1===e.length)throw new Te(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[l+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new Te(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,l+=2}else m==="`"?(f=!f,l++):m!=="."||f?(s+=m,l++):(c(),l++)}if(c(),f)throw new Te(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(n)}static emptyPath(){return new pi([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(an.fromString(e))}static fromName(e){return new $e(an.fromString(e).popFirst(5))}static empty(){return new $e(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&an.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return an.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new an(e.slice()))}}function nT(r,e,n){if(!n)throw new Te(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function DI(r,e,n,s){if(e===!0&&s===!0)throw new Te(ae.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function rv(r){if(!$e.isDocumentKey(r))throw new Te(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function av(r){if($e.isDocumentKey(r))throw new Te(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function iT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ze(12329,{type:typeof r})}function Zi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Te(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fh(r);throw new Te(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function $n(r,e){const n={typeString:r};return e&&(n.value=e),n}function Hc(r,e){if(!iT(r))throw new Te(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new Te(ae.INVALID_ARGUMENT,n);return!0}const ov=-62135596800,lv=1e6;class _n{static now(){return _n.fromMillis(Date.now())}static fromDate(e){return _n.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*lv);return new _n(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ov)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lv}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,_n._jsonSchema))return new _n(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ov;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_n._jsonSchemaVersion="firestore/timestamp/1.0",_n._jsonSchema={type:$n("string",_n._jsonSchemaVersion),seconds:$n("number"),nanoseconds:$n("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new _n(0,0))}static max(){return new et(new _n(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mc=-1;function MI(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=et.fromTimestamp(s===1e9?new _n(n+1,0):new _n(n,s));return new Oa(l,$e.empty(),e)}function xI(r){return new Oa(r.readTime,r.key,Mc)}class Oa{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Oa(et.min(),$e.empty(),Mc)}static max(){return new Oa(et.max(),$e.empty(),Mc)}}function OI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(r.documentKey,e.documentKey),n!==0?n:kt(r.largestBatchId,e.largestBatchId))}const LI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Nl(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==LI)throw r;Re("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,s)=>{n(e)}))}static reject(e){return new ue(((n,s)=>{s(e)}))}static waitFor(e){return new ue(((n,s)=>{let l=0,c=0,f=!1;e.forEach((m=>{++l,m.next((()=>{++c,f&&c===l&&n()}),(b=>s(b)))})),f=!0,c===l&&n()}))}static or(e){let n=ue.resolve(!1);for(const s of e)n=n.next((l=>l?ue.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(e,n){return new ue(((s,l)=>{const c=e.length,f=new Array(c);let m=0;for(let b=0;b<c;b++){const _=b;n(e[_]).next((S=>{f[_]=S,++m,m===c&&s(f)}),(S=>l(S)))}}))}static doWhile(e,n){return new ue(((s,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):s()};c()}))}}function jI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dl(r){return r.name==="IndexedDbTransactionError"}class Gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gh.ce=-1;const hg=-1;function Fc(r){return r==null}function Rh(r){return r===0&&1/r==-1/0}function PI(r){return typeof r=="number"&&Number.isInteger(r)&&!Rh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const sT="";function zI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=cv(e)),e=BI(r.get(n),e);return cv(e)}function BI(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case sT:n+="";break;default:n+=c}}return n}function cv(r){return r+sT+""}function uv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ba(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function rT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Rn{constructor(e,n){this.comparator=e,this.root=n||gi.EMPTY}insert(e,n){return new Rn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new Rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gi{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??gi.RED,this.left=l??gi.EMPTY,this.right=c??gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new gi(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return gi.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1;gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new gi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jn{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jn(this.comparator);return n.data=e,n}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class bs{constructor(e){this.fields=e,e.sort(pi.comparator)}static empty(){return new bs([])}unionWith(e){let n=new Jn(pi.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new bs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class aT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new aT("Invalid base64 string: "+c):c}})(e);return new yi(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new yi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yi.EMPTY_BYTE_STRING=new yi("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(r){if(Vt(!!r,39018),typeof r=="string"){let e=0;const n=UI.exec(r);if(Vt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:On(r.seconds),nanos:On(r.nanos)}}function On(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Va(r){return typeof r=="string"?yi.fromBase64String(r):yi.fromUint8Array(r)}const oT="server_timestamp",lT="__type__",cT="__previous_value__",uT="__local_write_time__";function dg(r){return(r?.mapValue?.fields||{})[lT]?.stringValue===oT}function Kh(r){const e=r.mapValue.fields[cT];return dg(e)?Kh(e):e}function xc(r){const e=La(r.mapValue.fields[uT].timestampValue);return new _n(e.seconds,e.nanos)}class qI{constructor(e,n,s,l,c,f,m,b,_,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=b,this.useFetchStreams=_,this.isUsingEmulator=S}}const Ih="(default)";class Oc{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new Oc("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}const hT="__type__",HI="__max__",rh={mapValue:{}},dT="__vector__",Ch="value";function ja(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?dg(r)?4:GI(r)?9007199254740991:FI(r)?10:11:Ze(28295,{value:r})}function yr(r,e){if(r===e)return!0;const n=ja(r);if(n!==ja(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return xc(r).isEqual(xc(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=La(l.timestampValue),m=La(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Va(l.bytesValue).isEqual(Va(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return On(l.geoPointValue.latitude)===On(c.geoPointValue.latitude)&&On(l.geoPointValue.longitude)===On(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return On(l.integerValue)===On(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=On(l.doubleValue),m=On(c.doubleValue);return f===m?Rh(f)===Rh(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return bl(r.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},m=c.mapValue.fields||{};if(uv(f)!==uv(m))return!1;for(const b in f)if(f.hasOwnProperty(b)&&(m[b]===void 0||!yr(f[b],m[b])))return!1;return!0})(r,e);default:return Ze(52216,{left:r})}}function Lc(r,e){return(r.values||[]).find((n=>yr(n,e)))!==void 0}function vl(r,e){if(r===e)return 0;const n=ja(r),s=ja(e);if(n!==s)return kt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return kt(r.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=On(c.integerValue||c.doubleValue),b=On(f.integerValue||f.doubleValue);return m<b?-1:m>b?1:m===b?0:isNaN(m)?isNaN(b)?0:-1:1})(r,e);case 3:return dv(r.timestampValue,e.timestampValue);case 4:return dv(xc(r),xc(e));case 5:return Dm(r.stringValue,e.stringValue);case 6:return(function(c,f){const m=Va(c),b=Va(f);return m.compareTo(b)})(r.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),b=f.split("/");for(let _=0;_<m.length&&_<b.length;_++){const S=kt(m[_],b[_]);if(S!==0)return S}return kt(m.length,b.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=kt(On(c.latitude),On(f.latitude));return m!==0?m:kt(On(c.longitude),On(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return fv(r.arrayValue,e.arrayValue);case 10:return(function(c,f){const m=c.fields||{},b=f.fields||{},_=m[Ch]?.arrayValue,S=b[Ch]?.arrayValue,A=kt(_?.values?.length||0,S?.values?.length||0);return A!==0?A:fv(_,S)})(r.mapValue,e.mapValue);case 11:return(function(c,f){if(c===rh.mapValue&&f===rh.mapValue)return 0;if(c===rh.mapValue)return 1;if(f===rh.mapValue)return-1;const m=c.fields||{},b=Object.keys(m),_=f.fields||{},S=Object.keys(_);b.sort(),S.sort();for(let A=0;A<b.length&&A<S.length;++A){const V=Dm(b[A],S[A]);if(V!==0)return V;const O=vl(m[b[A]],_[S[A]]);if(O!==0)return O}return kt(b.length,S.length)})(r.mapValue,e.mapValue);default:throw Ze(23264,{he:n})}}function dv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return kt(r,e);const n=La(r),s=La(e),l=kt(n.seconds,s.seconds);return l!==0?l:kt(n.nanos,s.nanos)}function fv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=vl(n[l],s[l]);if(c)return c}return kt(n.length,s.length)}function Tl(r){return Mm(r)}function Mm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=La(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Va(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return $e.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=Mm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${Mm(n.fields[f])}`;return l+"}"})(r.mapValue):Ze(61005,{value:r})}function fh(r){switch(ja(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(r);return e?16+fh(e):16;case 5:return 2*r.stringValue.length;case 6:return Va(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+fh(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Ba(s.fields,((c,f)=>{l+=c.length+fh(f)})),l})(r.mapValue);default:throw Ze(13486,{value:r})}}function mv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function xm(r){return!!r&&"integerValue"in r}function fg(r){return!!r&&"arrayValue"in r}function gv(r){return!!r&&"nullValue"in r}function pv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mh(r){return!!r&&"mapValue"in r}function FI(r){return(r?.mapValue?.fields||{})[hT]?.stringValue===dT}function Ac(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ba(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ac(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ac(r.arrayValue.values[n]);return e}return{...r}}function GI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===HI}class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ac(n)}setAll(e){let n=pi.emptyPath(),s={},l=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const b=this.getFieldsMap(n);this.applyChanges(b,s,l),s={},l=[],n=m.popLast()}f?s[m.lastSegment()]=Ac(f):l.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];mh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){Ba(n,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Bi(Ac(this.value))}}function fT(r){const e=[];return Ba(r.fields,((n,s)=>{const l=new pi([n]);if(mh(s)){const c=fT(s.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new bs(e)}class ai{constructor(e,n,s,l,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new ai(e,0,et.min(),et.min(),et.min(),Bi.empty(),0)}static newFoundDocument(e,n,s,l){return new ai(e,1,n,et.min(),s,l,0)}static newNoDocument(e,n){return new ai(e,2,n,et.min(),et.min(),Bi.empty(),0)}static newUnknownDocument(e,n){return new ai(e,3,n,et.min(),et.min(),Bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ai&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kh{constructor(e,n){this.position=e,this.inclusive=n}}function yv(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],f=r.position[l];if(c.field.isKeyField()?s=$e.comparator($e.fromName(f.referenceValue),n.key):s=vl(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function _v(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!yr(r.position[n],e.position[n]))return!1;return!0}class Nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function KI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class mT{}class Kn extends mT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new QI(e,n,s):n==="array-contains"?new XI(e,s):n==="in"?new ZI(e,s):n==="not-in"?new JI(e,s):n==="array-contains-any"?new eC(e,s):new Kn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new WI(e,s):new YI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vl(n,this.value)):n!==null&&ja(this.value)===ja(n)&&this.matchesComparison(vl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qs extends mT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qs(e,n)}matches(e){return gT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gT(r){return r.op==="and"}function pT(r){return $I(r)&&gT(r)}function $I(r){for(const e of r.filters)if(e instanceof Qs)return!1;return!0}function Om(r){if(r instanceof Kn)return r.field.canonicalString()+r.op.toString()+Tl(r.value);if(pT(r))return r.filters.map((e=>Om(e))).join(",");{const e=r.filters.map((n=>Om(n))).join(",");return`${r.op}(${e})`}}function yT(r,e){return r instanceof Kn?(function(s,l){return l instanceof Kn&&s.op===l.op&&s.field.isEqual(l.field)&&yr(s.value,l.value)})(r,e):r instanceof Qs?(function(s,l){return l instanceof Qs&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,f,m)=>c&&yT(f,l.filters[m])),!0):!1})(r,e):void Ze(19439)}function _T(r){return r instanceof Kn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Tl(n.value)}`})(r):r instanceof Qs?(function(n){return n.op.toString()+" {"+n.getFilters().map(_T).join(" ,")+"}"})(r):"Filter"}class QI extends Kn{constructor(e,n,s){super(e,n,s),this.key=$e.fromName(s.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class WI extends Kn{constructor(e,n){super(e,"in",n),this.keys=bT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class YI extends Kn{constructor(e,n){super(e,"not-in",n),this.keys=bT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bT(r,e){return(e.arrayValue?.values||[]).map((n=>$e.fromName(n.referenceValue)))}class XI extends Kn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fg(n)&&Lc(n.arrayValue,this.value)}}class ZI extends Kn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class JI extends Kn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class eC extends Kn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Lc(this.value.arrayValue,s)))}}class tC{constructor(e,n=null,s=[],l=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function bv(r,e=null,n=[],s=[],l=null,c=null,f=null){return new tC(r,e,n,s,l,c,f)}function mg(r){const e=st(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Om(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Fc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Tl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Tl(s))).join(",")),e.Te=n}return e.Te}function gg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!KI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!yT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!_v(r.startAt,e.startAt)&&_v(r.endAt,e.endAt)}function Lm(r){return $e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Gc{constructor(e,n=null,s=[],l=[],c=null,f="F",m=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nC(r,e,n,s,l,c,f,m){return new Gc(r,e,n,s,l,c,f,m)}function $h(r){return new Gc(r)}function vv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function vT(r){return r.collectionGroup!==null}function Rc(r){const e=st(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Jn(pi.comparator);return f.filters.forEach((b=>{b.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Nh(c,s))})),n.has(pi.keyField().canonicalString())||e.Ie.push(new Nh(pi.keyField(),s))}return e.Ie}function mr(r){const e=st(r);return e.Ee||(e.Ee=iC(e,Rc(r))),e.Ee}function iC(r,e){if(r.limitType==="F")return bv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Nh(l.field,c)}));const n=r.endAt?new kh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new kh(r.startAt.position,r.startAt.inclusive):null;return bv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Vm(r,e){const n=r.filters.concat([e]);return new Gc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function jm(r,e,n){return new Gc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Qh(r,e){return gg(mr(r),mr(e))&&r.limitType===e.limitType}function TT(r){return`${mg(mr(r))}|lt:${r.limitType}`}function al(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>_T(l))).join(", ")}]`),Fc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Tl(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Tl(l))).join(",")),`Target(${s})`})(mr(r))}; limitType=${r.limitType})`}function Wh(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):$e.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Rc(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(f,m,b){const _=yv(f,m,b);return f.inclusive?_<=0:_<0})(s.startAt,Rc(s),l)||s.endAt&&!(function(f,m,b){const _=yv(f,m,b);return f.inclusive?_>=0:_>0})(s.endAt,Rc(s),l))})(r,e)}function sC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ST(r){return(e,n)=>{let s=!1;for(const l of Rc(r)){const c=rC(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function rC(r,e,n){const s=r.field.isKeyField()?$e.comparator(e.key,n.key):(function(c,f,m){const b=f.data.field(c),_=m.data.field(c);return b!==null&&_!==null?vl(b,_):Ze(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ze(19790,{direction:r.dir})}}class To{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ba(this.inner,((n,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return rT(this.inner)}size(){return this.innerSize}}const aC=new Rn($e.comparator);function Gr(){return aC}const ET=new Rn($e.comparator);function vc(...r){let e=ET;for(const n of r)e=e.insert(n.key,n);return e}function wT(r){let e=ET;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function go(){return Ic()}function AT(){return Ic()}function Ic(){return new To((r=>r.toString()),((r,e)=>r.isEqual(e)))}const oC=new Rn($e.comparator),lC=new Jn($e.comparator);function Nt(...r){let e=lC;for(const n of r)e=e.add(n);return e}const cC=new Jn(kt);function uC(){return cC}function pg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function RT(r){return{integerValue:""+r}}function IT(r,e){return PI(e)?RT(e):pg(r,e)}class Yh{constructor(){this._=void 0}}function hC(r,e,n){return r instanceof Vc?(function(l,c){const f={fields:{[lT]:{stringValue:oT},[uT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&dg(c)&&(c=Kh(c)),c&&(f.fields[cT]=c),{mapValue:f}})(n,e):r instanceof Sl?kT(r,e):r instanceof El?NT(r,e):(function(l,c){const f=CT(l,c),m=Tv(f)+Tv(l.Ae);return xm(f)&&xm(l.Ae)?RT(m):pg(l.serializer,m)})(r,e)}function dC(r,e,n){return r instanceof Sl?kT(r,e):r instanceof El?NT(r,e):n}function CT(r,e){return r instanceof jc?(function(s){return xm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Vc extends Yh{}class Sl extends Yh{constructor(e){super(),this.elements=e}}function kT(r,e){const n=DT(e);for(const s of r.elements)n.some((l=>yr(l,s)))||n.push(s);return{arrayValue:{values:n}}}class El extends Yh{constructor(e){super(),this.elements=e}}function NT(r,e){let n=DT(e);for(const s of r.elements)n=n.filter((l=>!yr(l,s)));return{arrayValue:{values:n}}}class jc extends Yh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tv(r){return On(r.integerValue||r.doubleValue)}function DT(r){return fg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Xh{constructor(e,n){this.field=e,this.transform=n}}function fC(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Sl&&l instanceof Sl||s instanceof El&&l instanceof El?bl(s.elements,l.elements,yr):s instanceof jc&&l instanceof jc?yr(s.Ae,l.Ae):s instanceof Vc&&l instanceof Vc})(r.transform,e.transform)}class mC{constructor(e,n){this.version=e,this.transformResults=n}}class Ci{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Zh{}function MT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Jh(r.key,Ci.none()):new Kc(r.key,r.data,Ci.none());{const n=r.data,s=Bi.empty();let l=new Jn(pi.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new Ua(r.key,s,new bs(l.toArray()),Ci.none())}}function gC(r,e,n){r instanceof Kc?(function(l,c,f){const m=l.value.clone(),b=Ev(l.fieldTransforms,c,f.transformResults);m.setAll(b),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Ua?(function(l,c,f){if(!gh(l.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Ev(l.fieldTransforms,c,f.transformResults),b=c.data;b.setAll(xT(l)),b.setAll(m),c.convertToFoundDocument(f.version,b).setHasCommittedMutations()})(r,e,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Cc(r,e,n,s){return r instanceof Kc?(function(c,f,m,b){if(!gh(c.precondition,f))return m;const _=c.value.clone(),S=wv(c.fieldTransforms,b,f);return _.setAll(S),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(r,e,n,s):r instanceof Ua?(function(c,f,m,b){if(!gh(c.precondition,f))return m;const _=wv(c.fieldTransforms,b,f),S=f.data;return S.setAll(xT(c)),S.setAll(_),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(r,e,n,s):(function(c,f,m){return gh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function pC(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=CT(s.transform,l||null);c!=null&&(n===null&&(n=Bi.empty()),n.set(s.field,c))}return n||null}function Sv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&bl(s,l,((c,f)=>fC(c,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Kc extends Zh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ua extends Zh{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function xT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Ev(r,e,n){const s=new Map;Vt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,m=e.data.field(c.field);s.set(c.field,dC(f,m,n[l]))}return s}function wv(r,e,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,hC(c,f,e))}return s}class Jh extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OT extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yC{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&gC(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Cc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Cc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=AT();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(l.key)?null:m;const b=MT(f,m);b!==null&&s.set(l.key,b),f.isValidDocument()||f.convertToNoDocument(et.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Nt())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,((n,s)=>Sv(n,s)))&&bl(this.baseMutations,e.baseMutations,((n,s)=>Sv(n,s)))}}class yg{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){Vt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return oC})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new yg(e,n,s,l)}}class _C{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class bC{constructor(e,n){this.count=e,this.unchangedNames=n}}var Gn,Lt;function LT(r){switch(r){case ae.OK:return Ze(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ze(15467,{code:r})}}function VT(r){if(r===void 0)return Fr("GRPC error has no .code"),ae.UNKNOWN;switch(r){case Gn.OK:return ae.OK;case Gn.CANCELLED:return ae.CANCELLED;case Gn.UNKNOWN:return ae.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return ae.INTERNAL;case Gn.UNAVAILABLE:return ae.UNAVAILABLE;case Gn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Gn.NOT_FOUND:return ae.NOT_FOUND;case Gn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Gn.ABORTED:return ae.ABORTED;case Gn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Gn.DATA_LOSS:return ae.DATA_LOSS;default:return Ze(39323,{code:r})}}(Lt=Gn||(Gn={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";function vC(){return new TextEncoder}const TC=new Na([4294967295,4294967295],0);function Av(r){const e=vC().encode(r),n=new Q0;return n.update(e),new Uint8Array(n.digest())}function Rv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Na([n,s],0),new Na([l,c],0)]}class _g{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Tc(`Invalid padding: ${n}`);if(s<0)throw new Tc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Na.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(Na.fromNumber(s)));return l.compare(TC)===1&&(l=new Na([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Av(e),[s,l]=Rv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new _g(c,l,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Av(e),[s,l]=Rv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ed{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ed(et.min(),l,new Rn(kt),Gr(),Nt())}}class $c{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new $c(s,n,Nt(),Nt(),Nt())}}class ph{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class jT{constructor(e,n){this.targetId=e,this.Ce=n}}class PT{constructor(e,n,s=yi.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Iv{constructor(){this.ve=0,this.Fe=Cv(),this.Me=yi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Nt(),n=Nt(),s=Nt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ze(38017,{changeType:c})}})),new $c(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Cv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gr(),this.Je=ah(),this.He=ah(),this.Ye=new Rn(kt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(Lm(c))if(s===0){const f=new $e(c.path);this.et(n,f,ai.newNoDocument(f,et.min()))}else Vt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),b=m?this.ct(m,e,f):1;if(b!==0){this.it(n);const _=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,m;try{f=Va(s).toUint8Array()}catch(b){if(b instanceof aT)return _l("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{m=new _g(f,l,c)}catch(b){return _l(b instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&Lm(m.target)){const b=new $e(m.target.path);this.It(b).has(f)||this.Et(f,b)||this.et(f,b,ai.newNoDocument(b,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=Nt();this.He.forEach(((c,f)=>{let m=!0;f.forEachWhile((b=>{const _=this.ot(b);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new ed(e,n,this.Ye,this.je,s);return this.je=Gr(),this.Je=ah(),this.He=ah(),this.Ye=new Rn(kt),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Iv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Jn(kt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Jn(kt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ah(){return new Rn($e.comparator)}function Cv(){return new Rn($e.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},wC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AC={and:"AND",or:"OR"};class RC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pm(r,e){return r.useProto3Json||Fc(e)?e:{value:e}}function Dh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IC(r,e){return Dh(r,e.toTimestamp())}function vs(r){return Vt(!!r,49232),et.fromTimestamp((function(n){const s=La(n);return new _n(s.seconds,s.nanos)})(r))}function bg(r,e){return zm(r,e).canonicalString()}function zm(r,e){const n=(function(l){return new an(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function BT(r){const e=an.fromString(r);return Vt(KT(e),10190,{key:e.toString()}),e}function Mh(r,e){return bg(r.databaseId,e.path)}function kc(r,e){const n=BT(e);if(n.get(1)!==r.databaseId.projectId)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new $e(qT(n))}function UT(r,e){return bg(r.databaseId,e)}function CC(r){const e=BT(r);return e.length===4?an.emptyPath():qT(e)}function Bm(r){return new an(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function qT(r){return Vt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function kv(r,e,n){return{name:Mh(r,e),fields:n.value.mapValue.fields}}function kC(r,e){return"found"in e?(function(s,l){Vt(!!l.found,43571),l.found.name,l.found.updateTime;const c=kc(s,l.found.name),f=vs(l.found.updateTime),m=l.found.createTime?vs(l.found.createTime):et.min(),b=new Bi({mapValue:{fields:l.found.fields}});return ai.newFoundDocument(c,f,m,b)})(r,e):"missing"in e?(function(s,l){Vt(!!l.missing,3894),Vt(!!l.readTime,22933);const c=kc(s,l.missing),f=vs(l.readTime);return ai.newNoDocument(c,f)})(r,e):Ze(7234,{result:e})}function NC(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ze(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(_,S){return _.useProto3Json?(Vt(S===void 0||typeof S=="string",58123),yi.fromBase64String(S||"")):(Vt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),yi.fromUint8Array(S||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(_){const S=_.code===void 0?ae.UNKNOWN:VT(_.code);return new Te(S,_.message||"")})(f);n=new PT(s,l,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=kc(r,s.document.name),c=vs(s.document.updateTime),f=s.document.createTime?vs(s.document.createTime):et.min(),m=new Bi({mapValue:{fields:s.document.fields}}),b=ai.newFoundDocument(l,c,f,m),_=s.targetIds||[],S=s.removedTargetIds||[];n=new ph(_,S,b.key,b)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=kc(r,s.document),c=s.readTime?vs(s.readTime):et.min(),f=ai.newNoDocument(l,c),m=s.removedTargetIds||[];n=new ph([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=kc(r,s.document),c=s.removedTargetIds||[];n=new ph([],c,l,null)}else{if(!("filter"in e))return Ze(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new bC(l,c),m=s.targetId;n=new jT(m,f)}}return n}function HT(r,e){let n;if(e instanceof Kc)n={update:kv(r,e.key,e.value)};else if(e instanceof Jh)n={delete:Mh(r,e.key)};else if(e instanceof Ua)n={update:kv(r,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof OT))return Ze(16599,{Vt:e.type});n={verify:Mh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Vc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Sl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof El)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof jc)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ze(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:IC(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ze(27497)})(r,e.precondition)),n}function DC(r,e){return r&&r.length>0?(Vt(e!==void 0,14353),r.map((n=>(function(l,c){let f=l.updateTime?vs(l.updateTime):vs(c);return f.isEqual(et.min())&&(f=vs(c)),new mC(f,l.transformResults||[])})(n,e)))):[]}function MC(r,e){return{documents:[UT(r,e.path)]}}function xC(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=UT(r,l);const c=(function(_){if(_.length!==0)return GT(Qs.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(_){if(_.length!==0)return _.map((S=>(function(V){return{field:ol(V.field),direction:VC(V.dir)}})(S)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Pm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:l}}function OC(r){let e=CC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Vt(s===1,65062);const S=n.from[0];S.allDescendants?l=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=(function(A){const V=FT(A);return V instanceof Qs&&pT(V)?V.getFilters():[V]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((V=>(function(pe){return new Nh(ll(pe.field),(function(he){switch(he){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(pe.direction))})(V)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let V;return V=typeof A=="object"?A.value:A,Fc(V)?null:V})(n.limit));let b=null;n.startAt&&(b=(function(A){const V=!!A.before,O=A.values||[];return new kh(O,V)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const V=!A.before,O=A.values||[];return new kh(O,V)})(n.endAt)),nC(e,l,f,c,m,"F",b,_)}function LC(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ll(n.unaryFilter.field);return Kn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=ll(n.unaryFilter.field);return Kn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ll(n.unaryFilter.field);return Kn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ll(n.unaryFilter.field);return Kn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Kn.create(ll(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Qs.create(n.compositeFilter.filters.map((s=>FT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}})(n.compositeFilter.op))})(r):Ze(30097,{filter:r})}function VC(r){return EC[r]}function jC(r){return wC[r]}function PC(r){return AC[r]}function ol(r){return{fieldPath:r.canonicalString()}}function ll(r){return pi.fromServerFormat(r.fieldPath)}function GT(r){return r instanceof Kn?(function(n){if(n.op==="=="){if(pv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(gv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(gv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:jC(n.op),value:n.value}}})(r):r instanceof Qs?(function(n){const s=n.getFilters().map((l=>GT(l)));return s.length===1?s[0]:{compositeFilter:{op:PC(n.op),filters:s}}})(r):Ze(54877,{filter:r})}function zC(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function KT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Aa{constructor(e,n,s,l,c=et.min(),f=et.min(),m=yi.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=b}withSequenceNumber(e){return new Aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BC{constructor(e){this.yt=e}}function UC(r){const e=OC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?jm(e,e.limit,"L"):e}class qC{constructor(){this.Cn=new HC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Oa.min())}updateCollectionGroup(e,n,s){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class HC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Jn(an.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Jn(an.comparator)).toArray()}}const Nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$T=41943040;class Xi{static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi($T,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class wl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wl(0)}static cr(){return new wl(-1)}}const Dv="LruGarbageCollector",FC=1048576;function Mv([r,e],[n,s]){const l=kt(r,n);return l===0?kt(e,s):l}class GC{constructor(e){this.Ir=e,this.buffer=new Jn(Mv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Mv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(Dv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Dl(n)?Re(Dv,"Ignoring IndexedDB error during garbage collection: ",n):await Nl(n)}await this.Vr(3e5)}))}}class $C{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(Gh.ce);const s=new GC(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Nv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,c,f,m,b,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,f=Date.now(),this.nthSequenceNumber(e,l)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,n)))).next((A=>(c=A,b=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(_=Date.now(),rl()<=Ct.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${l} in `+(m-f)+`ms
	Removed ${c} targets in `+(b-m)+`ms
	Removed ${A} documents in `+(_-b)+`ms
Total Duration: ${_-S}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:A}))))}}function QC(r,e){return new $C(r,e)}class WC{constructor(){this.changes=new To((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ai.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ue.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XC{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&Cc(s.mutation,l,bs.empty(),_n.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Nt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Nt()){const l=go();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((c=>{let f=vc();return c.forEach(((m,b)=>{f=f.insert(m,b.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=go();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Nt())))}populateOverlays(e,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,l){let c=Gr();const f=Ic(),m=(function(){return Ic()})();return n.forEach(((b,_)=>{const S=s.get(_.key);l.has(_.key)&&(S===void 0||S.mutation instanceof Ua)?c=c.insert(_.key,_):S!==void 0?(f.set(_.key,S.mutation.getFieldMask()),Cc(S.mutation,_,S.mutation.getFieldMask(),_n.now())):f.set(_.key,bs.empty())})),this.recalculateAndSaveOverlays(e,c).next((b=>(b.forEach(((_,S)=>f.set(_,S))),n.forEach(((_,S)=>m.set(_,new YC(S,f.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Ic();let l=new Rn(((f,m)=>f-m)),c=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((b=>{const _=n.get(b);if(_===null)return;let S=s.get(b)||bs.empty();S=m.applyToLocalView(_,S),s.set(b,S);const A=(l.get(m.batchId)||Nt()).add(b);l=l.insert(m.batchId,A)}))})).next((()=>{const f=[],m=l.getReverseIterator();for(;m.hasNext();){const b=m.getNext(),_=b.key,S=b.value,A=AT();S.forEach((V=>{if(!c.has(V)){const O=MT(n.get(V),s.get(V));O!==null&&A.set(V,O),c=c.add(V)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,A))}return ue.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(f){return $e.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):ue.resolve(go());let m=Mc,b=c;return f.next((_=>ue.forEach(_,((S,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(S)?ue.resolve():this.remoteDocumentCache.getEntry(e,S).next((V=>{b=b.insert(S,V)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,b,_,Nt()))).next((S=>({batchId:m,changes:wT(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next((s=>{let l=vc();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let f=vc();return this.indexManager.getCollectionParents(e,c).next((m=>ue.forEach(m,(b=>{const _=(function(A,V){return new Gc(V,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,b.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,s,l).next((S=>{S.forEach(((A,V)=>{f=f.insert(A,V)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l)))).next((f=>{c.forEach(((b,_)=>{const S=_.getKey();f.get(S)===null&&(f=f.insert(S,ai.newInvalidDocument(S)))}));let m=vc();return f.forEach(((b,_)=>{const S=c.get(b);S!==void 0&&Cc(S.mutation,_,bs.empty(),_n.now()),Wh(n,_)&&(m=m.insert(b,_))})),m}))}}class ZC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:vs(l.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:UC(l.bundledQuery),readTime:vs(l.readTime)}})(n)),ue.resolve()}}class JC{constructor(){this.overlays=new Rn($e.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const s=go();return ue.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,c)=>{this.St(e,n,c)})),ue.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,n,s){const l=go(),c=n.length+1,f=new $e(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const b=m.getNext().value,_=b.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&b.largestBatchId>s&&l.set(b.getKey(),b)}return ue.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new Rn(((_,S)=>_-S));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let S=c.get(_.largestBatchId);S===null&&(S=go(),c=c.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const m=go(),b=c.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((_,S)=>m.set(_,S))),!(m.size()>=l)););return ue.resolve(m)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new _C(n,s));let c=this.qr.get(n);c===void 0&&(c=Nt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}class ek{constructor(){this.sessionToken=yi.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}class vg{constructor(){this.Qr=new Jn(ri.$r),this.Ur=new Jn(ri.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new ri(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new ri(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new $e(new an([])),s=new ri(n,e),l=new ri(n,e+1),c=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $e(new an([])),s=new ri(n,e),l=new ri(n,e+1);let c=Nt();return this.Ur.forEachInRange([s,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new ri(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ri{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $e.comparator(e.key,n.key)||kt(e.Yr,n.Yr)}static Kr(e,n){return kt(e.Yr,n.Yr)||$e.comparator(e.key,n.key)}}class tk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jn(ri.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new yC(c,n,s,l);this.mutationQueue.push(f);for(const m of l)this.Zr=this.Zr.add(new ri(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return ue.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ri(n,0),l=new ri(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(f=>{const m=this.Xr(f.Yr);c.push(m)})),ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Jn(kt);return n.forEach((l=>{const c=new ri(l,0),f=new ri(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(m=>{s=s.add(m.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;$e.isDocumentKey(c)||(c=c.child(""));const f=new ri(new $e(c),0);let m=new Jn(kt);return this.Zr.forEachWhile((b=>{const _=b.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(m=m.add(b.Yr)),!0)}),f),ue.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Vt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(n.mutations,(l=>{const c=new ri(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new ri(n,0),l=this.Zr.firstAfterOrEqual(s);return ue.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nk{constructor(e){this.ri=e,this.docs=(function(){return new Rn($e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ue.resolve(s?s.document.mutableCopy():ai.newInvalidDocument(n))}getEntries(e,n){let s=Gr();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():ai.newInvalidDocument(l))})),ue.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=Gr();const f=n.path,m=new $e(f.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(m);for(;b.hasNext();){const{key:_,value:{document:S}}=b.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||OI(xI(S),s)<=0||(l.has(S.key)||Wh(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return ue.resolve(c)}getAllFromCollectionGroup(e,n,s,l){Ze(9500)}ii(e,n){return ue.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new ik(this)}getSize(e){return ue.resolve(this.size)}}class ik extends WC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class sk{constructor(e){this.persistence=e,this.si=new To((n=>mg(n)),gg),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.oi=0,this._i=new vg,this.targetCount=0,this.ai=wl.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new wl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),l++)})),ue.waitFor(c).next((()=>l))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ue.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ue.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),ue.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ue.resolve(s)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}class QT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Gh(0),this.li=!1,this.li=!0,this.hi=new ek,this.referenceDelegate=e(this),this.Pi=new sk(this),this.indexManager=new qC,this.remoteDocumentCache=(function(l){return new nk(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BC(n),this.Ii=new ZC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new tk(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Re("MemoryPersistence","Starting transaction:",e);const l=new rk(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class rk extends VI{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Ri=new vg,this.Vi=null}static mi(e){return new Tg(e)}get fi(){if(this.Vi)return this.Vi;throw Ze(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const l=$e.fromPath(s);return this.gi(e,l).next((c=>{c||n.removeEntry(l,et.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class xh{constructor(e,n){this.persistence=e,this.pi=new To((s=>zI(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=QC(this,n)}static mi(e,n){return new xh(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ue.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?ue.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,c.removeEntry(f,et.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fh(e.data.value)),n}br(e,n,s){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return ue.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Sg{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=Nt(),l=Nt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Sg(e,n.fromCache,s,l)}}class ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ok{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return i1()?8:jI(ki())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,l,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new ak;return this.Ss(e,n,f).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>c.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(rl()<=Ct.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(rl()<=Ct.DEBUG&&Re("QueryEngine","Query:",al(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(rl()<=Ct.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):ue.resolve())}ys(e,n){if(vv(n))return ue.resolve(null);let s=mr(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=jm(n,null,"F"),s=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=Nt(...c);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((b=>{const _=this.Ds(n,m);return this.Cs(n,_,f,b.readTime)?this.ys(e,jm(n,null,"F")):this.vs(e,_,n,b)}))))})))))}ws(e,n,s,l){return vv(n)||l.isEqual(et.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,l)?ue.resolve(null):(rl()<=Ct.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),al(n)),this.vs(e,f,n,MI(l,Mc)).next((m=>m)))}))}Ds(e,n){let s=new Jn(ST(e));return n.forEach(((l,c)=>{Wh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return rl()<=Ct.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",al(n)),this.ps.getDocumentsMatchingQuery(e,n,Oa.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const Eg="LocalStore",lk=3e8;class ck{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Rn(kt),this.xs=new To((c=>mg(c)),gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function uk(r,e,n,s){return new ck(r,e,n,s)}async function WT(r,e){const n=st(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let b=Nt();for(const _ of l){f.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}for(const _ of c){m.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}return n.localDocuments.getDocuments(s,b).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:m})))}))}))}function hk(r,e){const n=st(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,b,_,S){const A=_.batch,V=A.keys();let O=ue.resolve();return V.forEach((pe=>{O=O.next((()=>S.getEntry(b,pe))).next((de=>{const he=_.docVersions.get(pe);Vt(he!==null,48541),de.version.compareTo(he)<0&&(A.applyToRemoteDocument(de,_),de.isValidDocument()&&(de.setReadTime(_.commitVersion),S.addEntry(de)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(b,A)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let b=Nt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(b=b.add(m.batch.mutations[_].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function YT(r){const e=st(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function dk(r,e){const n=st(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const m=[];e.targetChanges.forEach(((S,A)=>{const V=l.get(A);if(!V)return;m.push(n.Pi.removeMatchingKeys(c,S.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(c,S.addedDocuments,A))));let O=V.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?O=O.withResumeToken(yi.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):S.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(S.resumeToken,s)),l=l.insert(A,O),(function(de,he,I){return de.resumeToken.approximateByteSize()===0||he.snapshotVersion.toMicroseconds()-de.snapshotVersion.toMicroseconds()>=lk?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(V,O,S)&&m.push(n.Pi.updateTargetData(c,O))}));let b=Gr(),_=Nt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))})),m.push(fk(c,f,e.documentUpdates).next((S=>{b=S.ks,_=S.qs}))),!s.isEqual(et.min())){const S=n.Pi.getLastRemoteSnapshotVersion(c).next((A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(S)}return ue.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,b,_))).next((()=>b))})).then((c=>(n.Ms=l,c)))}function fk(r,e,n){let s=Nt(),l=Nt();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let f=Gr();return n.forEach(((m,b)=>{const _=c.get(m);b.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(m)),b.isNoDocument()&&b.version.isEqual(et.min())?(e.removeEntry(m,b.readTime),f=f.insert(m,b)):!_.isValidDocument()||b.version.compareTo(_.version)>0||b.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(b),f=f.insert(m,b)):Re(Eg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",b.version)})),{ks:f,qs:l}}))}function mk(r,e){const n=st(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=hg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gk(r,e){const n=st(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((c=>c?(l=c,ue.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new Aa(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Um(r,e,n){const s=st(r),l=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Dl(f))throw f;Re(Eg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function xv(r,e,n){const s=st(r);let l=et.min(),c=Nt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(b,_,S){const A=st(b),V=A.xs.get(S);return V!==void 0?ue.resolve(A.Ms.get(V)):A.Pi.getTargetData(_,S)})(s,f,mr(e)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((b=>{c=b}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?l:et.min(),n?c:Nt()))).next((m=>(pk(s,sC(e),m),{documents:m,Qs:c})))))}function pk(r,e,n){let s=r.Os.get(e)||et.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class Ov{constructor(){this.activeTargetIds=uC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yk{constructor(){this.Mo=new Ov,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ov,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _k{Oo(e){}shutdown(){}}const Lv="ConnectivityMonitor";class Vv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(Lv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(Lv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let oh=null;function qm(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}const ym="RestConnection",bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,c){const f=qm(),m=this.zo(e,n.toUriEncodedString());Re(ym,`Sending RPC '${e}' ${f}:`,m,s);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,l,c);const{host:_}=new URL(m),S=Rl(_);return this.Jo(e,m,b,s,S).then((A=>(Re(ym,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw _l(ym,`RPC '${e}' ${f} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,n,s,l,c,f){return this.Go(e,n,s,l,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const s=bk[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class Tk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const wi="WebChannelConnection";class Sk extends vk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const f=qm();return new Promise(((m,b)=>{const _=new W0;_.setWithCredentials(!0),_.listenOnce(Y0.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case dh.NO_ERROR:const A=_.getResponseJson();Re(wi,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),m(A);break;case dh.TIMEOUT:Re(wi,`RPC '${e}' ${f} timed out`),b(new Te(ae.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const V=_.getStatus();if(Re(wi,`RPC '${e}' ${f} failed with status:`,V,"response text:",_.getResponseText()),V>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const pe=O?.error;if(pe&&pe.status&&pe.message){const de=(function(I){const Ae=I.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Ae)>=0?Ae:ae.UNKNOWN})(pe.status);b(new Te(de,pe.message))}else b(new Te(ae.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new Te(ae.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Re(wi,`RPC '${e}' ${f} completed.`)}}));const S=JSON.stringify(l);Re(wi,`RPC '${e}' ${f} sending request:`,l),_.send(n,"POST",S,s,15)}))}T_(e,n,s){const l=qm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=J0(),m=Z0(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(b.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,s),b.encodeInitMessageHeaders=!0;const S=c.join("");Re(wi,`Creating RPC '${e}' stream ${l}: ${S}`,b);const A=f.createWebChannel(S,b);this.I_(A);let V=!1,O=!1;const pe=new Tk({Yo:he=>{O?Re(wi,`Not sending because RPC '${e}' stream ${l} is closed:`,he):(V||(Re(wi,`Opening RPC '${e}' stream ${l} transport.`),A.open(),V=!0),Re(wi,`RPC '${e}' stream ${l} sending:`,he),A.send(he))},Zo:()=>A.close()}),de=(he,I,Ae)=>{he.listen(I,(Le=>{try{Ae(Le)}catch(lt){setTimeout((()=>{throw lt}),0)}}))};return de(A,bc.EventType.OPEN,(()=>{O||(Re(wi,`RPC '${e}' stream ${l} transport opened.`),pe.o_())})),de(A,bc.EventType.CLOSE,(()=>{O||(O=!0,Re(wi,`RPC '${e}' stream ${l} transport closed`),pe.a_(),this.E_(A))})),de(A,bc.EventType.ERROR,(he=>{O||(O=!0,_l(wi,`RPC '${e}' stream ${l} transport errored. Name:`,he.name,"Message:",he.message),pe.a_(new Te(ae.UNAVAILABLE,"The operation could not be completed")))})),de(A,bc.EventType.MESSAGE,(he=>{if(!O){const I=he.data[0];Vt(!!I,16349);const Ae=I,Le=Ae?.error||Ae[0]?.error;if(Le){Re(wi,`RPC '${e}' stream ${l} received error:`,Le);const lt=Le.status;let jt=(function(R){const N=Gn[R];if(N!==void 0)return VT(N)})(lt),qe=Le.message;jt===void 0&&(jt=ae.INTERNAL,qe="Unknown error status: "+lt+" with message "+Le.message),O=!0,pe.a_(new Te(jt,qe)),A.close()}else Re(wi,`RPC '${e}' stream ${l} received:`,I),pe.u_(I)}})),de(m,X0.STAT_EVENT,(he=>{he.stat===Nm.PROXY?Re(wi,`RPC '${e}' stream ${l} detected buffering proxy`):he.stat===Nm.NOPROXY&&Re(wi,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{pe.__()}),0),pe}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _m(){return typeof document<"u"?document:null}function td(r){return new RC(r,!0)}class wg{constructor(e,n,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&Re("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const jv="PersistentStream";class XT{constructor(e,n,s,l,c,f,m,b){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new Te(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(jv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Re(jv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ek extends XT{constructor(e,n,s,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NC(this.serializer,e),s=(function(c){if(!("targetChange"in c))return et.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?et.min():f.readTime?vs(f.readTime):et.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Bm(this.serializer),n.addTarget=(function(c,f){let m;const b=f.target;if(m=Lm(b)?{documents:MC(c,b)}:{query:xC(c,b).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=zT(c,f.resumeToken);const _=Pm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(et.min())>0){m.readTime=Dh(c,f.snapshotVersion.toTimestamp());const _=Pm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const s=LC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Bm(this.serializer),n.removeTarget=e,this.q_(n)}}class wk extends XT{constructor(e,n,s,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=DC(e.writeResults,e.commitTime),s=vs(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Bm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>HT(this.serializer,s)))};this.q_(n)}}class Ak{}class Rk extends Ak{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,zm(n,s),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(ae.UNKNOWN,c.toString())}))}Ho(e,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,zm(n,s),l,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Te(ae.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ik{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fr(n),this.aa=!1):Re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const vo="RemoteStore";class Ck{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{So(this)&&(Re(vo,"Restarting streams for network reachability change."),await(async function(b){const _=st(b);_.Ea.add(4),await Qc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await nd(_)})(this))}))})),this.Ra=new Ik(s,l)}}async function nd(r){if(So(r))for(const e of r.da)await e(!0)}async function Qc(r){for(const e of r.da)await e(!1)}function ZT(r,e){const n=st(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cg(n)?Ig(n):Ml(n).O_()&&Rg(n,e))}function Ag(r,e){const n=st(r),s=Ml(n);n.Ia.delete(e),s.O_()&&JT(n,e),n.Ia.size===0&&(s.O_()?s.L_():So(n)&&n.Ra.set("Unknown"))}function Rg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ml(r).Y_(e)}function JT(r,e){r.Va.Ue(e),Ml(r).Z_(e)}function Ig(r){r.Va=new SC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ml(r).start(),r.Ra.ua()}function Cg(r){return So(r)&&!Ml(r).x_()&&r.Ia.size>0}function So(r){return st(r).Ea.size===0}function eS(r){r.Va=void 0}async function kk(r){r.Ra.set("Online")}async function Nk(r){r.Ia.forEach(((e,n)=>{Rg(r,e)}))}async function Dk(r,e){eS(r),Cg(r)?(r.Ra.ha(e),Ig(r)):r.Ra.set("Unknown")}async function Mk(r,e,n){if(r.Ra.set("Online"),e instanceof PT&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const m of c.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,f),l.Ia.delete(m),l.Va.removeTarget(m))})(r,e)}catch(s){Re(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Oh(r,s)}else if(e instanceof ph?r.Va.Ze(e):e instanceof jT?r.Va.st(e):r.Va.tt(e),!n.isEqual(et.min()))try{const s=await YT(r.localStore);n.compareTo(s)>=0&&await(function(c,f){const m=c.Va.Tt(f);return m.targetChanges.forEach(((b,_)=>{if(b.resumeToken.approximateByteSize()>0){const S=c.Ia.get(_);S&&c.Ia.set(_,S.withResumeToken(b.resumeToken,f))}})),m.targetMismatches.forEach(((b,_)=>{const S=c.Ia.get(b);if(!S)return;c.Ia.set(b,S.withResumeToken(yi.EMPTY_BYTE_STRING,S.snapshotVersion)),JT(c,b);const A=new Aa(S.target,b,_,S.sequenceNumber);Rg(c,A)})),c.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){Re(vo,"Failed to raise snapshot:",s),await Oh(r,s)}}async function Oh(r,e,n){if(!Dl(e))throw e;r.Ea.add(1),await Qc(r),r.Ra.set("Offline"),n||(n=()=>YT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Re(vo,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await nd(r)}))}function tS(r,e){return e().catch((n=>Oh(r,n,e)))}async function id(r){const e=st(r),n=Pa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;xk(e);)try{const l=await mk(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,Ok(e,l)}catch(l){await Oh(e,l)}nS(e)&&iS(e)}function xk(r){return So(r)&&r.Ta.length<10}function Ok(r,e){r.Ta.push(e);const n=Pa(r);n.O_()&&n.X_&&n.ea(e.mutations)}function nS(r){return So(r)&&!Pa(r).x_()&&r.Ta.length>0}function iS(r){Pa(r).start()}async function Lk(r){Pa(r).ra()}async function Vk(r){const e=Pa(r);for(const n of r.Ta)e.ea(n.mutations)}async function jk(r,e,n){const s=r.Ta.shift(),l=yg.from(s,e,n);await tS(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await id(r)}async function Pk(r,e){e&&Pa(r).X_&&await(async function(s,l){if((function(f){return LT(f)&&f!==ae.ABORTED})(l.code)){const c=s.Ta.shift();Pa(s).B_(),await tS(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await id(s)}})(r,e),nS(r)&&iS(r)}async function Pv(r,e){const n=st(r);n.asyncQueue.verifyOperationInProgress(),Re(vo,"RemoteStore received new credentials");const s=So(n);n.Ea.add(3),await Qc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nd(n)}async function zk(r,e){const n=st(r);e?(n.Ea.delete(2),await nd(n)):e||(n.Ea.add(2),await Qc(n),n.Ra.set("Unknown"))}function Ml(r){return r.ma||(r.ma=(function(n,s,l){const c=st(n);return c.sa(),new Ek(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:kk.bind(null,r),t_:Nk.bind(null,r),r_:Dk.bind(null,r),H_:Mk.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Cg(r)?Ig(r):r.Ra.set("Unknown")):(await r.ma.stop(),eS(r))}))),r.ma}function Pa(r){return r.fa||(r.fa=(function(n,s,l){const c=st(n);return c.sa(),new wk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lk.bind(null,r),r_:Pk.bind(null,r),ta:Vk.bind(null,r),na:jk.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await id(r)):(await r.fa.stop(),r.Ta.length>0&&(Re(vo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class kg{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const f=Date.now()+s,m=new kg(e,n,f,l,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ng(r,e){if(Fr("AsyncQueue",`${e}: ${r}`),Dl(r))return new Te(ae.UNAVAILABLE,`${e}: ${r}`);throw r}class gl{static emptySet(e){return new gl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||$e.comparator(n.key,s.key):(n,s)=>$e.comparator(n.key,s.key),this.keyedMap=vc(),this.sortedSet=new Rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new gl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class zv{constructor(){this.ga=new Rn($e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ze(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Al{constructor(e,n,s,l,c,f,m,b,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=b,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,l,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Al(e,n,gl.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}class Bk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Uk{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=st(n),c=l.queries;l.queries=Bv(),c.forEach(((f,m)=>{for(const b of m.Sa)b.onError(s)}))})(this,new Te(ae.ABORTED,"Firestore shutting down"))}}function Bv(){return new To((r=>TT(r)),Qh)}async function Dg(r,e){const n=st(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new Bk,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const m=Ng(f,`Initialization of query '${al(e.query)}' failed`);return void e.onError(m)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&xg(n)}async function Mg(r,e){const n=st(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function qk(r,e){const n=st(r);let s=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const m of f.Sa)m.Fa(l)&&(s=!0);f.wa=l}}s&&xg(n)}function Hk(r,e,n){const s=st(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function xg(r){r.Ca.forEach((e=>{e.next()}))}var Hm,Uv;(Uv=Hm||(Hm={})).Ma="default",Uv.Cache="cache";class Og{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new Al(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hm.Cache}}class sS{constructor(e){this.key=e}}class rS{constructor(e){this.key=e}}class Fk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Nt(),this.mutatedKeys=Nt(),this.eu=ST(e),this.tu=new gl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new zv,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,m=!1;const b=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((S,A)=>{const V=l.get(S),O=Wh(this.query,A)?A:null,pe=!!V&&this.mutatedKeys.has(V.key),de=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let he=!1;V&&O?V.data.isEqual(O.data)?pe!==de&&(s.track({type:3,doc:O}),he=!0):this.su(V,O)||(s.track({type:2,doc:O}),he=!0,(b&&this.eu(O,b)>0||_&&this.eu(O,_)<0)&&(m=!0)):!V&&O?(s.track({type:0,doc:O}),he=!0):V&&!O&&(s.track({type:1,doc:V}),he=!0,(b||_)&&(m=!0)),he&&(O?(f=f.add(O),c=de?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{tu:f,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((S,A)=>(function(O,pe){const de=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Rt:he})}};return de(O)-de(pe)})(S.type,A.type)||this.eu(S.doc,A.doc))),this.ou(s),l=l??!1;const m=n&&!l?this._u():[],b=this.Xa.size===0&&this.current&&!l?1:0,_=b!==this.Za;return this.Za=b,f.length!==0||_?{snapshot:new Al(this.query,e.tu,c,f,e.mutatedKeys,b===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Nt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new rS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new sS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Nt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lg="SyncEngine";class Gk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Kk{constructor(e){this.key=e,this.hu=!1}}class $k{constructor(e,n,s,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new To((m=>TT(m)),Qh),this.Iu=new Map,this.Eu=new Set,this.du=new Rn($e.comparator),this.Au=new Map,this.Ru=new vg,this.Vu={},this.mu=new Map,this.fu=wl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Qk(r,e,n=!0){const s=hS(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await aS(s,e,n,!0),l}async function Wk(r,e){const n=hS(r);await aS(n,e,!0,!1)}async function aS(r,e,n,s){const l=await gk(r.localStore,mr(e)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await Yk(r,e,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&ZT(r.remoteStore,l),m}async function Yk(r,e,n,s,l){r.pu=(A,V,O)=>(async function(de,he,I,Ae){let Le=he.view.ru(I);Le.Cs&&(Le=await xv(de.localStore,he.query,!1).then((({documents:D})=>he.view.ru(D,Le))));const lt=Ae&&Ae.targetChanges.get(he.targetId),jt=Ae&&Ae.targetMismatches.get(he.targetId)!=null,qe=he.view.applyChanges(Le,de.isPrimaryClient,lt,jt);return Hv(de,he.targetId,qe.au),qe.snapshot})(r,A,V,O);const c=await xv(r.localStore,e,!0),f=new Fk(e,c.Qs),m=f.ru(c.documents),b=$c.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),_=f.applyChanges(m,r.isPrimaryClient,b);Hv(r,n,_.au);const S=new Gk(e,n,f);return r.Tu.set(e,S),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),_.snapshot}async function Xk(r,e,n){const s=st(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((f=>!Qh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Um(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Ag(s.remoteStore,l.targetId),Fm(s,l.targetId)})).catch(Nl)):(Fm(s,l.targetId),await Um(s.localStore,l.targetId,!0))}async function Zk(r,e){const n=st(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ag(n.remoteStore,s.targetId))}async function Jk(r,e,n){const s=aN(r);try{const l=await(function(f,m){const b=st(f),_=_n.now(),S=m.reduce(((O,pe)=>O.add(pe.key)),Nt());let A,V;return b.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let pe=Gr(),de=Nt();return b.Ns.getEntries(O,S).next((he=>{pe=he,pe.forEach(((I,Ae)=>{Ae.isValidDocument()||(de=de.add(I))}))})).next((()=>b.localDocuments.getOverlayedDocuments(O,pe))).next((he=>{A=he;const I=[];for(const Ae of m){const Le=pC(Ae,A.get(Ae.key).overlayedDocument);Le!=null&&I.push(new Ua(Ae.key,Le,fT(Le.value.mapValue),Ci.exists(!0)))}return b.mutationQueue.addMutationBatch(O,_,I,m)})).next((he=>{V=he;const I=he.applyToLocalDocumentSet(A,de);return b.documentOverlayCache.saveOverlays(O,he.batchId,I)}))})).then((()=>({batchId:V.batchId,changes:wT(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(f,m,b){let _=f.Vu[f.currentUser.toKey()];_||(_=new Rn(kt)),_=_.insert(m,b),f.Vu[f.currentUser.toKey()]=_})(s,l.batchId,n),await Wc(s,l.changes),await id(s.remoteStore)}catch(l){const c=Ng(l,"Failed to persist write");n.reject(c)}}async function oS(r,e){const n=st(r);try{const s=await dk(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(Vt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Vt(f.hu,14607):l.removedDocuments.size>0&&(Vt(f.hu,42227),f.hu=!1))})),await Wc(n,s,e)}catch(s){await Nl(s)}}function qv(r,e,n){const s=st(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&l.push(m.snapshot)})),(function(f,m){const b=st(f);b.onlineState=m;let _=!1;b.queries.forEach(((S,A)=>{for(const V of A.Sa)V.va(m)&&(_=!0)})),_&&xg(b)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eN(r,e,n){const s=st(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),c=l&&l.key;if(c){let f=new Rn($e.comparator);f=f.insert(c,ai.newNoDocument(c,et.min()));const m=Nt().add(c),b=new ed(et.min(),new Map,new Rn(kt),f,m);await oS(s,b),s.du=s.du.remove(c),s.Au.delete(e),Vg(s)}else await Um(s.localStore,e,!1).then((()=>Fm(s,e,n))).catch(Nl)}async function tN(r,e){const n=st(r),s=e.batch.batchId;try{const l=await hk(n.localStore,e);cS(n,s,null),lS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wc(n,l)}catch(l){await Nl(l)}}async function nN(r,e,n){const s=st(r);try{const l=await(function(f,m){const b=st(f);return b.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return b.mutationQueue.lookupMutationBatch(_,m).next((A=>(Vt(A!==null,37113),S=A.keys(),b.mutationQueue.removeMutationBatch(_,A)))).next((()=>b.mutationQueue.performConsistencyCheck(_))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(_,S,m))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>b.localDocuments.getDocuments(_,S)))}))})(s.localStore,e);cS(s,e,n),lS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Wc(s,l)}catch(l){await Nl(l)}}function lS(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function cS(r,e,n){const s=st(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function Fm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||uS(r,s)}))}function uS(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Ag(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Vg(r))}function Hv(r,e,n){for(const s of n)s instanceof sS?(r.Ru.addReference(s.key,e),iN(r,s)):s instanceof rS?(Re(Lg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||uS(r,s.key)):Ze(19791,{wu:s})}function iN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(Re(Lg,"New document in limbo: "+n),r.Eu.add(s),Vg(r))}function Vg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new $e(an.fromString(e)),s=r.fu.next();r.Au.set(s,new Kk(n)),r.du=r.du.insert(n,s),ZT(r.remoteStore,new Aa(mr($h(n.path)),s,"TargetPurposeLimboResolution",Gh.ce))}}async function Wc(r,e,n){const s=st(r),l=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,b)=>{f.push(s.pu(b,e,n).then((_=>{if((_||n)&&s.isPrimaryClient){const S=_?!_.fromCache:n?.targetChanges.get(b.targetId)?.current;s.sharedClientState.updateQueryState(b.targetId,S?"current":"not-current")}if(_){l.push(_);const S=Sg.As(b.targetId,_);c.push(S)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(b,_){const S=st(b);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ue.forEach(_,(V=>ue.forEach(V.Es,(O=>S.persistence.referenceDelegate.addReference(A,V.targetId,O))).next((()=>ue.forEach(V.ds,(O=>S.persistence.referenceDelegate.removeReference(A,V.targetId,O)))))))))}catch(A){if(!Dl(A))throw A;Re(Eg,"Failed to update sequence numbers: "+A)}for(const A of _){const V=A.targetId;if(!A.fromCache){const O=S.Ms.get(V),pe=O.snapshotVersion,de=O.withLastLimboFreeSnapshotVersion(pe);S.Ms=S.Ms.insert(V,de)}}})(s.localStore,c))}async function sN(r,e){const n=st(r);if(!n.currentUser.isEqual(e)){Re(Lg,"User change. New user:",e.toKey());const s=await WT(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((b=>{b.reject(new Te(ae.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Wc(n,s.Ls)}}function rN(r,e){const n=st(r),s=n.Au.get(e);if(s&&s.hu)return Nt().add(s.key);{let l=Nt();const c=n.Iu.get(e);if(!c)return l;for(const f of c){const m=n.Tu.get(f);l=l.unionWith(m.view.nu)}return l}}function hS(r){const e=st(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=oS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eN.bind(null,e),e.Pu.H_=qk.bind(null,e.eventManager),e.Pu.yu=Hk.bind(null,e.eventManager),e}function aN(r){const e=st(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nN.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return uk(this.persistence,new ok,e.initialUser,this.serializer)}Cu(e){return new QT(Tg.mi,this.serializer)}Du(e){return new yk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class oN extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Vt(this.persistence.referenceDelegate instanceof xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new KC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new QT((s=>xh.mi(s,n)),this.serializer)}}class Gm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>qv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await zk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Uk})()}createDatastore(e){const n=td(e.databaseInfo.databaseId),s=(function(c){return new Sk(c)})(e.databaseInfo);return(function(c,f,m,b){return new Rk(c,f,m,b)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,c,f,m){return new Ck(s,l,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>qv(this.syncEngine,n,0)),(function(){return Vv.v()?new Vv:new _k})())}createSyncEngine(e,n){return(function(l,c,f,m,b,_,S){const A=new $k(l,c,f,m,b,_);return S&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=st(n);Re(vo,"RemoteStore shutting down."),s.Ea.add(5),await Qc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gm.provider={build:()=>new Gm};class jg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class lN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Te(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(l,c){const f=st(l),m={documents:c.map((A=>Mh(f.serializer,A)))},b=await f.Ho("BatchGetDocuments",f.serializer.databaseId,an.emptyPath(),m,c.length),_=new Map;b.forEach((A=>{const V=kC(f.serializer,A);_.set(V.key.toString(),V)}));const S=[];return c.forEach((A=>{const V=_.get(A.toString());Vt(!!V,55234,{key:A}),S.push(V)})),S})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const l=$e.fromPath(s);this.mutations.push(new OT(l,this.precondition(l)))})),await(async function(s,l){const c=st(s),f={writes:l.map((m=>HT(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,an.emptyPath(),f)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ze(50498,{Gu:e.constructor.name});n=et.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new Te(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(et.min())?Ci.exists(!1):Ci.updateTime(n):Ci.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(et.min()))throw new Te(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ci.updateTime(n)}return Ci.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cN{constructor(e,n,s,l,c){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=l,this.deferred=c,this.zu=s.maxAttempts,this.M_=new wg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new lN(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((l=>{this.Yu(l)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Fc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!LT(n)}return!1}}const za="FirestoreClient";class uN{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Ii.UNAUTHENTICATED,this.clientId=ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{Re(za,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(Re(za,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ng(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function bm(r,e){r.asyncQueue.verifyOperationInProgress(),Re(za,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await WT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Fv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await hN(r);Re(za,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Pv(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>Pv(e.remoteStore,l))),r._onlineComponents=e}async function hN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Re(za,"Using user provided OfflineComponentProvider");try{await bm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ae.FAILED_PRECONDITION||l.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;_l("Error using user provided cache. Falling back to memory cache: "+n),await bm(r,new Lh)}}else Re(za,"Using default OfflineComponentProvider"),await bm(r,new oN(void 0));return r._offlineComponents}async function Pg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Re(za,"Using user provided OnlineComponentProvider"),await Fv(r,r._uninitializedComponentsProvider._online)):(Re(za,"Using default OnlineComponentProvider"),await Fv(r,new Gm))),r._onlineComponents}function dN(r){return Pg(r).then((e=>e.syncEngine))}function fN(r){return Pg(r).then((e=>e.datastore))}async function Vh(r){const e=await Pg(r),n=e.eventManager;return n.onListen=Qk.bind(null,e.syncEngine),n.onUnlisten=Xk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Wk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zk.bind(null,e.syncEngine),n}function mN(r,e,n={}){const s=new fr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,b,_){const S=new jg({next:V=>{S.Nu(),f.enqueueAndForget((()=>Mg(c,A)));const O=V.docs.has(m);!O&&V.fromCache?_.reject(new Te(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&V.fromCache&&b&&b.source==="server"?_.reject(new Te(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(V)},error:V=>_.reject(V)}),A=new Og($h(m.path),S,{includeMetadataChanges:!0,qa:!0});return Dg(c,A)})(await Vh(r),r.asyncQueue,e,n,s))),s.promise}function gN(r,e,n={}){const s=new fr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,b,_){const S=new jg({next:V=>{S.Nu(),f.enqueueAndForget((()=>Mg(c,A))),V.fromCache&&b.source==="server"?_.reject(new Te(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(V)},error:V=>_.reject(V)}),A=new Og(m,S,{includeMetadataChanges:!0,qa:!0});return Dg(c,A)})(await Vh(r),r.asyncQueue,e,n,s))),s.promise}function dS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Gv=new Map;const fS="firestore.googleapis.com",Kv=!0;class $v{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fS,this.ssl=Kv}else this.host=e.host,this.ssl=e.ssl??Kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FC)throw new Te(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new TI;switch(s.type){case"firstParty":return new AI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Te(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Gv.get(n);s&&(Re("ComponentProvider","Removing Datastore"),Gv.delete(n),s.terminate())})(this),Promise.resolve()}}function pN(r,e,n,s={}){r=Zi(r,sd);const l=Rl(e),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;l&&(o0(`https://${m}`),l0("Firestore",!0)),c.host!==fS&&c.host!==m&&_l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...c,host:m,ssl:l,emulatorOptions:s};if(!Br(b,f)&&(r._setSettings(b),s.mockUserToken)){let _,S;if(typeof s.mockUserToken=="string")_=s.mockUserToken,S=Ii.MOCK_USER;else{_=Qw(s.mockUserToken,r._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Te(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ii(A)}r._authCredentials=new SI(new tT(_,S))}}class Eo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class An{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}toJSON(){return{type:An._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Hc(n,An._jsonSchema))return new An(e,s||null,new $e(an.fromString(n.referencePath)))}}An._jsonSchemaVersion="firestore/documentReference/1.0",An._jsonSchema={type:$n("string",An._jsonSchemaVersion),referencePath:$n("string")};class Da extends Eo{constructor(e,n,s){super(e,n,$h(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new $e(e))}withConverter(e){return new Da(this.firestore,e,this._path)}}function Km(r,e,...n){if(r=ei(r),nT("collection","path",e),r instanceof sd){const s=an.fromString(e,...n);return av(s),new Da(r,null,s)}{if(!(r instanceof An||r instanceof Da))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(an.fromString(e,...n));return av(s),new Da(r.firestore,null,s)}}function Ue(r,e,...n){if(r=ei(r),arguments.length===1&&(e=ug.newId()),nT("doc","path",e),r instanceof sd){const s=an.fromString(e,...n);return rv(s),new An(r,null,new $e(s))}{if(!(r instanceof An||r instanceof Da))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(an.fromString(e,...n));return rv(s),new An(r.firestore,r instanceof Da?r.converter:null,new $e(s))}}const Qv="AsyncQueue";class Wv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wg(this,"async_queue_retry"),this._c=()=>{const s=_m();s&&Re(Qv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=_m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dl(e))throw e;Re(Qv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Fr("INTERNAL UNHANDLED ERROR: ",Yv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=kg.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ze(47125,{Pc:Yv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Yv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Xv(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Kr extends sd{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new Wv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function mS(r,e){const n=typeof r=="object"?r:h0(),s=typeof r=="string"?r:Ih,l=eg(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=Kw("firestore");c&&pN(l,...c)}return l}function Yc(r){if(r._terminated)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yN(r),r._firestoreClient}function yN(r){const e=r._freezeSettings(),n=(function(l,c,f,m){return new qI(l,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,dS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new uN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}class _s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _s(yi.fromBase64String(e))}catch(n){throw new Te(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _s(yi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_s._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,_s._jsonSchema))return _s.fromBase64String(e.bytes)}}_s._jsonSchemaVersion="firestore/bytes/1.0",_s._jsonSchema={type:$n("string",_s._jsonSchemaVersion),bytes:$n("string")};class Xc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wo{constructor(e){this._methodName=e}}class gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gr._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,gr._jsonSchema))return new gr(e.latitude,e.longitude)}}gr._jsonSchemaVersion="firestore/geoPoint/1.0",gr._jsonSchema={type:$n("string",gr._jsonSchemaVersion),latitude:$n("number"),longitude:$n("number")};class pr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new pr(e.vectorValues);throw new Te(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:$n("string",pr._jsonSchemaVersion),vectorValues:$n("object")};const _N=/^__.*__$/;class bN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class gS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ua(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ac:r})}}class rd{constructor(e,n,s,l,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pS(this.Ac)&&_N.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||td(e)}Cc(e,n,s,l=!1){return new rd({Ac:e,methodName:n,Dc:s,path:pi.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ad(r){const e=r._freezeSettings(),n=td(r._databaseId);return new vN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function yS(r,e,n,s,l,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,e,n,l);Hg("Data must be an object, but it was:",f,s);const m=TS(s,f);let b,_;if(c.merge)b=new bs(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const A of c.mergeFields){const V=$m(e,A,n);if(!f.contains(V))throw new Te(ae.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);ES(S,V)||S.push(V)}b=new bs(S),_=f.fieldTransforms.filter((A=>b.covers(A.field)))}else b=null,_=f.fieldTransforms;return new bN(new Bi(m),b,_)}class Zc extends wo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}function _S(r,e,n){return new rd({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zg extends wo{_toFieldTransform(e){return new Xh(e.path,new Vc)}isEqual(e){return e instanceof zg}}class Bg extends wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_S(this,e,!0),s=this.vc.map((c=>Ao(c,n))),l=new Sl(s);return new Xh(e.path,l)}isEqual(e){return e instanceof Bg&&Br(this.vc,e.vc)}}class Ug extends wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_S(this,e,!0),s=this.vc.map((c=>Ao(c,n))),l=new El(s);return new Xh(e.path,l)}isEqual(e){return e instanceof Ug&&Br(this.vc,e.vc)}}class qg extends wo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new jc(e.serializer,IT(e.serializer,this.Fc));return new Xh(e.path,n)}isEqual(e){return e instanceof qg&&this.Fc===e.Fc}}function bS(r,e,n,s){const l=r.Cc(1,e,n);Hg("Data must be an object, but it was:",l,s);const c=[],f=Bi.empty();Ba(s,((b,_)=>{const S=Fg(e,b,n);_=ei(_);const A=l.yc(S);if(_ instanceof Zc)c.push(S);else{const V=Ao(_,A);V!=null&&(c.push(S),f.set(S,V))}}));const m=new bs(c);return new gS(f,m,l.fieldTransforms)}function vS(r,e,n,s,l,c){const f=r.Cc(1,e,n),m=[$m(e,s,n)],b=[l];if(c.length%2!=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<c.length;V+=2)m.push($m(e,c[V])),b.push(c[V+1]);const _=[],S=Bi.empty();for(let V=m.length-1;V>=0;--V)if(!ES(_,m[V])){const O=m[V];let pe=b[V];pe=ei(pe);const de=f.yc(O);if(pe instanceof Zc)_.push(O);else{const he=Ao(pe,de);he!=null&&(_.push(O),S.set(O,he))}}const A=new bs(_);return new gS(S,A,f.fieldTransforms)}function TN(r,e,n,s=!1){return Ao(n,r.Cc(s?4:3,e))}function Ao(r,e){if(SS(r=ei(r)))return Hg("Unsupported field value:",e,r),TS(r,e);if(r instanceof wo)return(function(s,l){if(!pS(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let f=0;for(const m of s){let b=Ao(m,l.wc(f));b==null&&(b={nullValue:"NULL_VALUE"}),c.push(b),f++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=ei(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IT(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=_n.fromDate(s);return{timestampValue:Dh(l.serializer,c)}}if(s instanceof _n){const c=new _n(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(l.serializer,c)}}if(s instanceof gr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _s)return{bytesValue:zT(l.serializer,s._byteString)};if(s instanceof An){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:bg(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof pr)return(function(f,m){return{mapValue:{fields:{[hT]:{stringValue:dT},[Ch]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return pg(m.serializer,_)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Fh(s)}`)})(r,e)}function TS(r,e){const n={};return rT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ba(r,((s,l)=>{const c=Ao(l,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function SS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof _n||r instanceof gr||r instanceof _s||r instanceof An||r instanceof wo||r instanceof pr)}function Hg(r,e,n){if(!SS(n)||!iT(n)){const s=Fh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function $m(r,e,n){if((e=ei(e))instanceof Xc)return e._internalPath;if(typeof e=="string")return Fg(r,e);throw jh("Field path arguments must be of type string or ",r,!1,void 0,n)}const SN=new RegExp("[~\\*/\\[\\]]");function Fg(r,e,n){if(e.search(SN)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Xc(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function jh(r,e,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let b="";return(c||f)&&(b+=" (found",c&&(b+=` in field ${s}`),f&&(b+=` in document ${l}`),b+=")"),new Te(ae.INVALID_ARGUMENT,m+r+b)}function ES(r,e){return r.some((n=>n.isEqual(e)))}class Ph{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EN extends Ph{data(){return super.data()}}function Gg(r,e){return typeof e=="string"?Fg(r,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}function wS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Te(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class wN extends Kg{}function Qm(r,e,...n){let s=[];e instanceof Kg&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((b=>b instanceof $g)).length,m=c.filter((b=>b instanceof od)).length;if(f>1||f>0&&m>0)throw new Te(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class od extends wN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new od(e,n,s)}_apply(e){const n=this._parse(e);return AS(e._query,n),new Eo(e.firestore,e.converter,Vm(e._query,n))}_parse(e){const n=ad(e.firestore);return(function(c,f,m,b,_,S,A){let V;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){Jv(A,S);const pe=[];for(const de of A)pe.push(Zv(b,c,de));V={arrayValue:{values:pe}}}else V=Zv(b,c,A)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||Jv(A,S),V=TN(m,f,A,S==="in"||S==="not-in");return Kn.create(_,S,V)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wm(r,e,n){const s=e,l=Gg("where",r);return od._create(l,s,n)}class $g extends Kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $g(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Qs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let f=l;const m=c.getFlattenedFilters();for(const b of m)AS(f,b),f=Vm(f,b)})(e._query,n),new Eo(e.firestore,e.converter,Vm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Zv(r,e,n){if(typeof(n=ei(n))=="string"){if(n==="")throw new Te(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vT(e)&&n.indexOf("/")!==-1)throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(an.fromString(n));if(!$e.isDocumentKey(s))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return mv(r,new $e(s))}if(n instanceof An)return mv(r,n._key);throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(n)}.`)}function Jv(r,e){if(!Array.isArray(r)||r.length===0)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AS(r,e){const n=(function(l,c){for(const f of l)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Te(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class RS{convertValue(e,n="none"){switch(ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ba(e,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[Ch].arrayValue?.values?.map((s=>On(s.doubleValue)));return new pr(n)}convertGeoPoint(e){return new gr(On(e.latitude),On(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const n=La(e);return new _n(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=an.fromString(e);Vt(KT(s),9688,{name:e});const l=new Oc(s.get(1),s.get(3)),c=new $e(s.popFirst(5));return l.isEqual(n)||Fr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function IS(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class AN extends RS{constructor(e){super(),this.firestore=e}convertBytes(e){return new _s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ma extends Ph{constructor(e,n,s,l,c,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Gg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ma._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ma._jsonSchema={type:$n("string",Ma._jsonSchemaVersion),bundleSource:$n("string","DocumentSnapshot"),bundleName:$n("string"),bundle:$n("string")};class yh extends Ma{data(e={}){return super.data(e)}}class po{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new hl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new yh(this._firestore,this._userDataWriter,s.key,s,new hl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((m=>{const b=new yh(l._firestore,l._userDataWriter,m.doc.key,m.doc,new hl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:b,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const b=new yh(l._firestore,l._userDataWriter,m.doc.key,m.doc,new hl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,S=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),S=f.indexOf(m.doc.key)),{type:RN(m.type),doc:b,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ug.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:r})}}function Ri(r){r=Zi(r,An);const e=Zi(r.firestore,Kr);return mN(Yc(e),r._key).then((n=>NS(e,r,n)))}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:$n("string",po._jsonSchemaVersion),bundleSource:$n("string","QuerySnapshot"),bundleName:$n("string"),bundle:$n("string")};class ld extends RS{constructor(e){super(),this.firestore=e}convertBytes(e){return new _s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}}function Ym(r){r=Zi(r,Eo);const e=Zi(r.firestore,Kr),n=Yc(e),s=new ld(e);return wS(r._query),gN(n,r._query).then((l=>new po(e,s,r,l)))}function CS(r,e,n){r=Zi(r,An);const s=Zi(r.firestore,Kr),l=IS(r.converter,e,n);return Qg(s,[yS(ad(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Ci.none())])}function ht(r,e,n,...s){r=Zi(r,An);const l=Zi(r.firestore,Kr),c=ad(l);let f;return f=typeof(e=ei(e))=="string"||e instanceof Xc?vS(c,"updateDoc",r._key,e,n,s):bS(c,"updateDoc",r._key,e),Qg(l,[f.toMutation(r._key,Ci.exists(!0))])}function pl(r){return Qg(Zi(r.firestore,Kr),[new Jh(r._key,Ci.none())])}function kS(r,...e){r=ei(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xv(e[s])||(n=e[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Xv(e[s])){const b=e[s];e[s]=b.next?.bind(b),e[s+1]=b.error?.bind(b),e[s+2]=b.complete?.bind(b)}let c,f,m;if(r instanceof An)f=Zi(r.firestore,Kr),m=$h(r._key.path),c={next:b=>{e[s]&&e[s](NS(f,r,b))},error:e[s+1],complete:e[s+2]};else{const b=Zi(r,Eo);f=Zi(b.firestore,Kr),m=b._query;const _=new ld(f);c={next:S=>{e[s]&&e[s](new po(f,_,b,S))},error:e[s+1],complete:e[s+2]},wS(r._query)}return(function(_,S,A,V){const O=new jg(V),pe=new Og(S,O,A);return _.asyncQueue.enqueueAndForget((async()=>Dg(await Vh(_),pe))),()=>{O.Nu(),_.asyncQueue.enqueueAndForget((async()=>Mg(await Vh(_),pe)))}})(Yc(f),m,l,c)}function Qg(r,e){return(function(s,l){const c=new fr;return s.asyncQueue.enqueueAndForget((async()=>Jk(await dN(s),l,c))),c.promise})(Yc(r),e)}function NS(r,e,n){const s=n.docs.get(e._key),l=new ld(r);return new Ma(r,l,e._key,s,new hl(n.hasPendingWrites,n.fromCache),e.converter)}const IN={maxAttempts:5};function Sc(r,e){if((r=ei(r)).firestore!==e)throw new Te(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class CN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ad(e)}get(e){const n=Sc(e,this._firestore),s=new AN(this._firestore);return this._transaction.lookup([n._key]).then((l=>{if(!l||l.length!==1)return Ze(24041);const c=l[0];if(c.isFoundDocument())return new Ph(this._firestore,s,c.key,c,n.converter);if(c.isNoDocument())return new Ph(this._firestore,s,n._key,null,n.converter);throw Ze(18433,{doc:c})}))}set(e,n,s){const l=Sc(e,this._firestore),c=IS(l.converter,n,s),f=yS(this._dataReader,"Transaction.set",l._key,c,l.converter!==null,s);return this._transaction.set(l._key,f),this}update(e,n,s,...l){const c=Sc(e,this._firestore);let f;return f=typeof(n=ei(n))=="string"||n instanceof Xc?vS(this._dataReader,"Transaction.update",c._key,n,s,l):bS(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,f),this}delete(e){const n=Sc(e,this._firestore);return this._transaction.delete(n._key),this}}class kN extends CN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Sc(e,this._firestore),s=new ld(this._firestore);return super.get(e).then((l=>new Ma(this._firestore,s,n._key,l._document,new hl(!1,!1),n.converter)))}}function e0(r,e,n){r=Zi(r,Kr);const s={...IN,...n};return(function(c){if(c.maxAttempts<1)throw new Te(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(c,f,m){const b=new fr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await fN(c);new cN(c.asyncQueue,_,m,f,b).ju()})),b.promise})(Yc(r),(l=>e(new kN(r,l))),s)}function fi(){return new Zc("deleteField")}function zi(){return new zg("serverTimestamp")}function cl(...r){return new Bg("arrayUnion",r)}function yc(...r){return new Ug("arrayRemove",r)}function vm(r){return new qg("increment",r)}(function(e,n=!0){(function(l){kl=l})(Il),yl(new yo("firestore",((s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Kr(new EI(s.getProvider("auth-internal")),new RI(f,s.getProvider("app-check-internal")),(function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Te(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(_.options.projectId,S)})(f,l),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Ca(tv,nv,e),Ca(tv,nv,"esm2020")})();const mi={astronomie_geographie:{name:"Astronomie & Geographie",emoji:"",questions:[{id:"ag_1",q:"Lieber am Tag oder in der Nacht aktiv sein?",a:"Tag ",b:"Nacht "},{id:"ag_2",q:"Lieber im Regenwald oder in der Wste stranden?",a:"Regenwald ",b:"Wste "},{id:"ag_3",q:"Lieber den Ozean oder riesige Gebirge bestaunen?",a:"Ozean ",b:"Gebirge "},{id:"ag_4",q:"Lieber ewiges Eis oder ewige Hitze ertragen?",a:"Eis ",b:"Hitze "},{id:"ag_5",q:"Lieber eine Stdtereise oder einen Natururlaub machen?",a:"Stadt ",b:"Natur "},{id:"ag_6",q:"Lieber auf einer Insel oder auf dem Festland leben?",a:"Insel ",b:"Festland "},{id:"ag_7",q:"Lieber ein Gewitter oder Sonnenschein beobachten?",a:"Gewitter ",b:"Sonne "},{id:"ag_8",q:"Lieber Schnee zu Weihnachten oder 30 Grad am Strand?",a:"Schnee ",b:"30 Grad "},{id:"ag_9",q:"Lieber zum Mond fliegen oder die Tiefsee erforschen?",a:"Mond ",b:"Tiefsee "},{id:"ag_10",q:"Lieber im Flachland oder in den Bergen wohnen?",a:"Flachland ",b:"Berge "},{id:"ag_11",q:"Lieber im Fluss oder im See schwimmen?",a:"Fluss ",b:"See "},{id:"ag_12",q:"Lieber durch den Dschungel oder durch den Nadelwald spazieren?",a:"Dschungel ",b:"Nadelwald "},{id:"ag_13",q:"Lieber einen Vulkan oder einen Geysir sehen?",a:"Vulkan ",b:"Geysir "},{id:"ag_14",q:"Lieber Polarlichter oder eine Sonnenfinsternis sehen?",a:"Polarlicht ",b:"Sonnenfinsternis "},{id:"ag_15",q:"Lieber den Mars besiedeln oder die Erde retten?",a:"Mars ",b:"Erde "},{id:"ag_16",q:"Lieber Urlaub im Camper oder auf dem Kreuzfahrtschiff machen?",a:"Camper ",b:"Schiff "},{id:"ag_17",q:"Lieber dnne Hhenluft oder salzige Meeresbrise atmen?",a:"Berge ",b:"Meer "},{id:"ag_18",q:"Lieber fliegen knnen oder die Zeit anhalten?",a:"Fliegen ",b:"Zeitstopp "}]},essen_trinken:{name:"Essen & Trinken",emoji:"",questions:[{id:"et_1",q:"Lieber Nutella mit oder ohne Butter essen?",a:"Mit Butter ",b:"Ohne Butter "},{id:"et_2",q:"Lieber Kaffee oder Tee am Morgen trinken?",a:"Kaffee ",b:"Tee "},{id:"et_3",q:"Lieber nie wieder Pizza oder nie wieder Pasta essen?",a:"Keine Pizza ",b:"Keine Pasta "},{id:"et_4",q:"Lieber Schokolade oder Gummibrchen naschen?",a:"Schokolade ",b:"Gummibrchen "},{id:"et_5",q:"Lieber einen Burger oder einen Dner essen?",a:"Burger ",b:"Dner "},{id:"et_6",q:"Lieber selbst kochen oder Essen bestellen?",a:"Kochen ",b:"Bestellen "},{id:"et_7",q:"Lieber Vanille- oder Schokoeis essen?",a:"Vanille ",b:"Schoko "},{id:"et_8",q:"Lieber ses oder salziges Popcorn essen?",a:"S ",b:"Salzig "},{id:"et_9",q:"Lieber Wein oder Bier am Abend trinken?",a:"Wein ",b:"Bier "},{id:"et_10",q:"Lieber Ksebrot oder Wurstbrot essen?",a:"Kse ",b:"Wurst "},{id:"et_11",q:"Lieber frhstcken oder zu Abend essen?",a:"Frhstck ",b:"Abendessen "},{id:"et_12",q:"Lieber Cola oder Saft trinken?",a:"Cola ",b:"Saft "},{id:"et_13",q:"Lieber Sahnetorte oder trockenen Kuchen essen?",a:"Torte ",b:"Kuchen "},{id:"et_14",q:"Lieber Pommes mit Ketchup oder Mayo essen?",a:"Ketchup ",b:"Mayo "},{id:"et_15",q:"Lieber eine Vorspeise oder ein Dessert bestellen?",a:"Vorspeise ",b:"Dessert "},{id:"et_16",q:"Lieber stilles Wasser oder Wasser mit Sprudel trinken?",a:"Still ",b:"Sprudel "},{id:"et_17",q:"Lieber Kartoffeln oder Reis als Beilage?",a:"Kartoffeln ",b:"Reis "},{id:"et_18",q:"Lieber s oder herzhaft frhstcken?",a:"S ",b:"Herzhaft "},{id:"et_19",q:"Lieber scharf oder mild essen?",a:"Scharf ",b:"Mild "},{id:"et_20",q:"Lieber Pizza Hawaii oder Pizza Salami essen?",a:"Hawaii ",b:"Salami "}]},flora_fauna:{name:"Flora & Fauna",emoji:"",questions:[{id:"ff_1",q:"Lieber einen Hund oder eine Katze haben?",a:"Hund ",b:"Katze "},{id:"ff_2",q:"Lieber Topfpflanzen oder Schnittblumen kaufen?",a:"Topf ",b:"Strau "},{id:"ff_3",q:"Lieber Vgel oder Fische beobachten?",a:"Vgel ",b:"Fische "},{id:"ff_4",q:"Lieber Kakteen oder Orchideen pflegen?",a:"Kaktus ",b:"Orchidee "},{id:"ff_5",q:"Lieber ein Pferd oder einen Delfin besitzen?",a:"Pferd ",b:"Delfin "},{id:"ff_6",q:"Lieber im Garten oder im Wald sein?",a:"Garten ",b:"Wald "},{id:"ff_7",q:"Lieber die Spinne fangen oder wegrennen?",a:"Fangen ",b:"Wegrennen "},{id:"ff_8",q:"Lieber einen Dino oder einen Drachen zhmen?",a:"Dino ",b:"Drache "},{id:"ff_9",q:"Lieber Nadelbume oder Laubbume im Garten?",a:"Nadel ",b:"Laub "},{id:"ff_10",q:"Lieber Sugetiere oder Reptilien?",a:"Suger ",b:"Reptil "},{id:"ff_11",q:"Lieber Obst oder Gemse anbauen?",a:"Obst ",b:"Gemse "},{id:"ff_12",q:"Lieber mit Haien schwimmen oder Lwen begegnen?",a:"Hai ",b:"Lwe "},{id:"ff_13",q:"Lieber Wespen oder Mcken ertragen?",a:"Wespe ",b:"Mcke "},{id:"ff_14",q:"Lieber Elefanten oder Wale sehen?",a:"Elefant ",b:"Wal "},{id:"ff_15",q:"Lieber duftende oder bunte Blumen?",a:"Duft ",b:"Farbe "},{id:"ff_16",q:"Lieber einem Wolf oder einem Bren begegnen?",a:"Wolf ",b:"Br "},{id:"ff_17",q:"Lieber in den Zoo oder in einen Wildpark gehen?",a:"Zoo ",b:"Wildpark "},{id:"ff_18",q:"Lieber Insekten essen oder hungern mssen?",a:"Insekten ",b:"Hungern "}]},forschung_wissenschaft:{name:"Forschung & Wissenschaft",emoji:"",questions:[{id:"fw_1",q:"Lieber Biologie- oder Physikunterricht?",a:"Bio ",b:"Physik "},{id:"fw_2",q:"Lieber im Labor oder drauen im Feld arbeiten?",a:"Labor ",b:"Drauen "},{id:"fw_3",q:"Lieber die Weltformel finden oder unsterblich sein?",a:"Formel ",b:"Unsterblich "},{id:"fw_4",q:"Lieber durch ein Mikroskop oder ein Teleskop schauen?",a:"Mikroskop ",b:"Teleskop "},{id:"fw_5",q:"Lieber Chemie oder Mathe verstehen?",a:"Chemie ",b:"Mathe "},{id:"fw_6",q:"Lieber in die Zukunft oder Vergangenheit reisen?",a:"Zukunft ",b:"Vergangenheit "},{id:"fw_7",q:"Lieber Aliens oder eine Super-KI entdecken?",a:"Aliens ",b:"KI "},{id:"fw_8",q:"Lieber wissen WANN oder WIE du stirbst?",a:"Wann ",b:"Wie "},{id:"fw_9",q:"Lieber die Tiefsee oder das Weltall erforschen?",a:"Tiefsee ",b:"Weltall "},{id:"fw_10",q:"Lieber Elon Musk oder Albert Einstein treffen?",a:"Musk ",b:"Einstein "},{id:"fw_11",q:"Lieber Genetik oder Informatik studieren?",a:"Genetik ",b:"Informatik "},{id:"fw_12",q:"Lieber auf Fakten oder auf Intuition vertrauen?",a:"Fakten ",b:"Bauchgefhl "},{id:"fw_13",q:"Lieber einen Roboter oder einen Klon haben?",a:"Roboter ",b:"Klon "},{id:"fw_14",q:"Lieber ein Entdecker oder ein Erfinder sein?",a:"Entdecker ",b:"Erfinder "},{id:"fw_15",q:"Lieber den Nobelpreis oder ein Patent erhalten?",a:"Nobelpreis ",b:"Patent "}]},geschichte_politik:{name:"Geschichte & Politik",emoji:"",questions:[{id:"gp_1",q:"Lieber in der Antike oder Zukunft leben?",a:"Antike ",b:"Zukunft "},{id:"gp_2",q:"Lieber Knig oder gewhlter Prsident sein?",a:"Knig ",b:"Prsident "},{id:"gp_3",q:"Lieber ein Ritter oder ein Pirat sein?",a:"Ritter ",b:"Pirat "},{id:"gp_4",q:"Lieber Revolutionr oder Stratege sein?",a:"Revolutionr ",b:"Stratege "},{id:"gp_5",q:"Lieber im Mittelalter oder in einem Sci-Fi Szenario leben?",a:"Mittelalter ",b:"Sci-Fi "},{id:"gp_6",q:"Lieber in einer Demokratie oder Monarchie leben?",a:"Demokratie ",b:"Monarchie "},{id:"gp_7",q:"Lieber reformieren oder eine Revolution starten?",a:"Reform ",b:"Revolution "},{id:"gp_8",q:"Lieber in einem Imperium oder Stadtstaat leben?",a:"Imperium ",b:"Stadtstaat "},{id:"gp_9",q:"Lieber echte Dinos oder den Pyramidenbau sehen?",a:"Dinos ",b:"Pyramiden "},{id:"gp_10",q:"Lieber Wirtschaft oder Umwelt priorisieren?",a:"Wirtschaft ",b:"Umwelt "},{id:"gp_11",q:"Lieber global oder national denken?",a:"Global ",b:"National "},{id:"gp_12",q:"Lieber Tradition oder Fortschritt bewahren?",a:"Tradition ",b:"Fortschritt "},{id:"gp_13",q:"Lieber Napoleon oder Caesar interviewen?",a:"Napoleon ",b:"Caesar "},{id:"gp_14",q:"Lieber auf Innenpolitik oder Auenpolitik konzentrieren?",a:"Innen ",b:"Auen "},{id:"gp_15",q:"Lieber Wahlpflicht oder Wahlrecht haben?",a:"Pflicht ",b:"Recht "},{id:"gp_16",q:"Lieber 100 Jahre in die Vergangenheit oder Zukunft reisen?",a:"Vergangenheit ",b:"Zukunft "}]},medien_unterhaltung:{name:"Medien & Unterhaltung",emoji:"",questions:[{id:"mu_1",q:"Lieber einen Film oder eine Serie schauen?",a:"Film ",b:"Serie "},{id:"mu_2",q:"Lieber Netflix oder YouTube nutzen?",a:"Netflix ",b:"YouTube "},{id:"mu_3",q:"Lieber ins Kino gehen oder auf der Couch bleiben?",a:"Kino ",b:"Couch "},{id:"mu_4",q:"Lieber Marvel oder DC schauen?",a:"Marvel ",b:"DC "},{id:"mu_5",q:"Lieber Comedy oder Horror schauen?",a:"Comedy ",b:"Horror "},{id:"mu_6",q:"Lieber Star Wars oder Star Trek Fan sein?",a:"Star Wars ",b:"Star Trek "},{id:"mu_7",q:"Lieber eine Doku oder einen Actionfilm sehen?",a:"Doku ",b:"Action "},{id:"mu_8",q:"Lieber im Originalton oder mit Synchro schauen?",a:"Original ",b:"Synchro "},{id:"mu_9",q:"Lieber Harry Potter oder Herr der Ringe schauen?",a:"Potter ",b:"HdR "},{id:"mu_10",q:"Lieber Spotify oder Radio hren?",a:"Spotify ",b:"Radio "},{id:"mu_11",q:"Lieber das Buch lesen oder den Film schauen?",a:"Buch ",b:"Film "},{id:"mu_12",q:"Lieber der Bsewicht oder der Held sein?",a:"Bsewicht ",b:"Held "},{id:"mu_13",q:"Lieber Game of Thrones Anfang oder Ende?",a:"Anfang ",b:"Ende "},{id:"mu_14",q:"Lieber Spoiler wissen oder berrascht werden?",a:"Spoiler ",b:"berraschung "},{id:"mu_15",q:"Lieber Trash-TV oder Arte schauen?",a:"Trash ",b:"Arte "},{id:"mu_16",q:"Lieber E-Books oder Papierbcher lesen?",a:"E-Book ",b:"Papier "}]},musik:{name:"Musik",emoji:"",questions:[{id:"mk_1",q:"Lieber Rock oder Hip-Hop hren?",a:"Rock ",b:"Hip-Hop "},{id:"mk_2",q:"Lieber zu Techno oder Schlager feiern?",a:"Techno ",b:"Schlager "},{id:"mk_3",q:"Lieber Musik mit Gesang oder Instrumental hren?",a:"Gesang ",b:"Instrumental "},{id:"mk_4",q:"Lieber auf ein Festival oder ein Konzert gehen?",a:"Festival ",b:"Konzert "},{id:"mk_5",q:"Lieber Snger oder Gitarrist sein?",a:"Snger ",b:"Gitarrist "},{id:"mk_6",q:"Lieber 80er oder 2000er Musik hren?",a:"80er ",b:"2000er "},{id:"mk_7",q:"Lieber Gitarre oder Klavier spielen knnen?",a:"Gitarre ",b:"Klavier "},{id:"mk_8",q:"Lieber Boybands oder Solo-Knstler hren?",a:"Boyband ",b:"Solo "},{id:"mk_9",q:"Lieber In-Ear oder Over-Ear Kopfhrer tragen?",a:"In-Ear ",b:"Over-Ear "},{id:"mk_10",q:"Lieber Vinyl oder Streaming nutzen?",a:"Vinyl ",b:"Streaming "},{id:"mk_11",q:"Lieber traurige oder frhliche Musik hren?",a:"Traurig ",b:"Frhlich "},{id:"mk_12",q:"Lieber Jazz oder Metal hren?",a:"Jazz ",b:"Metal "},{id:"mk_13",q:"Lieber im Club tanzen oder trinken?",a:"Tanzen ",b:"Trinken "},{id:"mk_14",q:"Lieber nur noch eine Band hren oder gar keine Musik mehr?",a:"Eine Band ",b:"Keine Musik "},{id:"mk_15",q:"Lieber Musik selber machen oder nur hren?",a:"Machen ",b:"Hren "}]},sport:{name:"Sport",emoji:"",questions:[{id:"sp_1",q:"Lieber Teamsport oder Einzelsport machen?",a:"Team ",b:"Einzel "},{id:"sp_2",q:"Lieber Sport gucken oder selbst machen?",a:"Gucken ",b:"Machen "},{id:"sp_3",q:"Lieber morgens oder abends trainieren?",a:"Morgens ",b:"Abends "},{id:"sp_4",q:"Lieber Cardio oder Krafttraining machen?",a:"Cardio ",b:"Kraft "},{id:"sp_5",q:"Lieber Fuball oder Formel 1 schauen?",a:"Fuball ",b:"Formel 1 "},{id:"sp_6",q:"Lieber Yoga oder Boxen machen?",a:"Yoga ",b:"Boxen "},{id:"sp_7",q:"Lieber Olympia oder die WM gewinnen?",a:"Olympia ",b:"WM "},{id:"sp_8",q:"Lieber siegen oder Spa haben?",a:"Siegen ",b:"Spa "},{id:"sp_9",q:"Lieber Schwimmen oder Joggen gehen?",a:"Schwimmen ",b:"Joggen "},{id:"sp_10",q:"Lieber Tennis oder Tischtennis spielen?",a:"Tennis ",b:"Tischtennis "},{id:"sp_11",q:"Lieber Fahrrad oder E-Bike fahren?",a:"Rad ",b:"E-Bike "},{id:"sp_12",q:"Lieber im Gym oder im Wald trainieren?",a:"Gym ",b:"Wald "},{id:"sp_13",q:"Lieber Fallschirm springen oder wandern gehen?",a:"Fallschirm ",b:"Wandern "},{id:"sp_14",q:"Lieber Ski oder Snowboard fahren?",a:"Ski ",b:"Snowboard "},{id:"sp_15",q:"Lieber Muskelkater haben oder faul sein?",a:"Muskelkater ",b:"Faul sein "}]},technik_wirtschaft:{name:"Technik & Wirtschaft",emoji:"",questions:[{id:"tw_1",q:"Lieber Apple oder Android nutzen?",a:"Apple ",b:"Android "},{id:"tw_2",q:"Lieber Windows oder Mac nutzen?",a:"Windows ",b:"Mac "},{id:"tw_3",q:"Lieber bar oder mit Karte zahlen?",a:"Bar ",b:"Karte "},{id:"tw_4",q:"Lieber Chef oder Angestellter sein?",a:"Chef ",b:"Angestellter "},{id:"tw_5",q:"Lieber im Homeoffice oder im Bro arbeiten?",a:"Homeoffice ",b:"Bro "},{id:"tw_6",q:"Lieber Sprachnachricht oder Text senden?",a:"Audio ",b:"Text "},{id:"tw_7",q:"Lieber Online oder im Laden einkaufen?",a:"Online ",b:"Laden "},{id:"tw_8",q:"Lieber in Aktien oder ins Sparbuch investieren?",a:"Aktien ",b:"Sparbuch "},{id:"tw_9",q:"Lieber auf Krypto oder Gold setzen?",a:"Krypto ",b:"Gold "},{id:"tw_10",q:"Lieber fliegen oder beamen knnen?",a:"Fliegen ",b:"Beamen "},{id:"tw_11",q:"Lieber Instagram oder TikTok nutzen?",a:"Insta ",b:"TikTok "},{id:"tw_12",q:"Lieber Elektro oder Verbrenner fahren?",a:"Elektro ",b:"Verbrenner "},{id:"tw_13",q:"Lieber per Sprache oder mit Knpfen steuern?",a:"Sprache ",b:"Knpfe "},{id:"tw_14",q:"Lieber Karriere machen oder viel Freizeit haben?",a:"Karriere ",b:"Freizeit "},{id:"tw_15",q:"Lieber reich oder berhmt sein?",a:"Reich ",b:"Berhmt "},{id:"tw_16",q:"Lieber leeres Postfach oder Chaos haben?",a:"Zero ",b:"Chaos "}]},gaming:{name:"Gaming",emoji:"",questions:[{id:"gm_1",q:"Lieber hohen Ping (Lag) oder Ruckeln (FPS) haben?",a:"Lag ",b:"Ruckeln "},{id:"gm_2",q:"Lieber Spielstand verlieren oder gebannt werden?",a:"Spielstand weg ",b:"Bann "},{id:"gm_3",q:"Lieber ein glcklicher Noob oder ein gestresster Pro sein?",a:"Noob ",b:"Pro "},{id:"gm_4",q:"Lieber Open World oder lineare Story spielen?",a:"Open World ",b:"Story "},{id:"gm_5",q:"Lieber am PC oder an der Konsole zocken?",a:"PC ",b:"Konsole "},{id:"gm_6",q:"Lieber mit Controller oder Maus spielen?",a:"Controller ",b:"Maus "},{id:"gm_7",q:"Lieber Survival oder Creative Modus spielen?",a:"Survival ",b:"Creative "},{id:"gm_8",q:"Lieber gute Grafik oder gute Story haben?",a:"Grafik ",b:"Story "},{id:"gm_9",q:"Lieber toxisch gewinnen oder nett verlieren?",a:"Gewinnen ",b:"Verlieren "},{id:"gm_10",q:"Lieber Singleplayer oder Multiplayer spielen?",a:"Single ",b:"Multi "},{id:"gm_11",q:"Lieber kostenlos (mit Werbung) oder Vollpreis spielen?",a:"Kostenlos ",b:"Vollpreis "},{id:"gm_12",q:"Lieber campen oder rushen?",a:"Campen ",b:"Rushen "},{id:"gm_13",q:"Lieber 100x versuchen oder beim ersten Mal schaffen?",a:"Tryhard ",b:"First Try "},{id:"gm_14",q:"Lieber Healer oder Damage Dealer spielen?",a:"Healer ",b:"Damage "},{id:"gm_15",q:"Lieber Retro-Games oder moderne Spiele zocken?",a:"Retro ",b:"Modern "}]},diverses:{name:"Diverses / Persnlichkeit",emoji:"",questions:[{id:"div_1",q:"Lieber unsichtbar sein oder fliegen knnen?",a:"Unsichtbar ",b:"Fliegen "},{id:"div_2",q:"Lieber immer die Wahrheit sagen oder immer lgen mssen?",a:"Wahrheit ",b:"Lge "},{id:"div_3",q:"Lieber frh aufstehen oder lange wach bleiben?",a:"Frh ",b:"Spt "},{id:"div_4",q:"Lieber nie wieder Musik hren oder nie wieder Filme sehen?",a:"Keine Musik ",b:"Keine Filme "},{id:"div_5",q:"Lieber mehr Zeit oder mehr Geld haben?",a:"Zeit ",b:"Geld "},{id:"div_6",q:"Lieber mit Socken oder barfu schlafen?",a:"An ",b:"Aus "},{id:"div_7",q:"Lieber in die Vergangenheit oder Zukunft reisen?",a:"Vergangenheit ",b:"Zukunft "},{id:"div_8",q:"Lieber chaotisch oder ordentlich sein?",a:"Chaos ",b:"Ordnung "},{id:"div_9",q:"Lieber Gedanken lesen oder mit Tieren sprechen knnen?",a:"Gedanken ",b:"Tiere "},{id:"div_10",q:"Lieber Tattoos oder Piercings haben?",a:"Tattoo ",b:"Piercing "},{id:"div_11",q:"Lieber weich oder hart liegen?",a:"Weich ",b:"Hart "},{id:"div_12",q:"Lieber auf das Handy oder das Auto verzichten?",a:"Kein Handy ",b:"Kein Auto "},{id:"div_13",q:"Lieber morgens oder abends duschen?",a:"Morgens ",b:"Abends "},{id:"div_14",q:"Lieber im Lotto gewinnen oder den Traumjob finden?",a:"Lotto ",b:"Traumjob "},{id:"div_15",q:"Lieber offene Hose oder Zahnlcke haben?",a:"Hose offen ",b:"Zahnlcke "},{id:"div_16",q:"Lieber an Geister oder an Aliens glauben?",a:"Geister ",b:"Aliens "}]},brettspiel:{name:"Brettspiel",emoji:"",questions:[{id:"bs_1",q:"Wenn ich ein Parfm kreieren msste, wonach wrde es am ehesten riechen?",a:"Frisch gemhter Rasen & Benzin",b:"Warme Pizza & Knoblauch",c:"Verbranntes Toast & Verzweiflung",d:"Neues Auto & alter Dachboden"},{id:"bs_2",q:"Was wre am ehesten meine erste Amtshandlung, wenn ich fr einen Tag Gott wre?",a:"Mcken ausrotten (ersatzlos!)",b:"Festlegen, dass Pizza gesund ist und Brokkoli dick macht",c:"Jedem Menschen ein Einhorn schenken",d:"Montags das Aufstehen verbieten"},{id:"bs_3",q:"Wie wrde ich am ehesten versuchen, ein Alien von der Menschheit zu berzeugen?",a:"Ich zeige ihnen se Katzenvideos",b:"Ich lade sie auf einen Dner ein",c:"Ich zeige ihnen Memes ber das Ende der Welt",d:"Wir sind verloren  ich helfe ihnen beim Zerstren"},{id:"bs_4",q:"Was ist am ehesten mein unntigstes Talent?",a:"Mit der Zunge die Nasenspitze berhren",b:"Extrem laut mit den Fingern schnippen",c:"Die Namen aller Pokmon auswendig wissen",d:"So tun, als wrde ich eine unsichtbare Treppe runtergehen"},{id:"bs_5",q:"In welcher Reality-Show wrde ich am ehesten landen?",a:"Shopping Queen (wegen meines fragwrdigen Stils)",b:"Das Sommerhaus der Stars (Drama ist mein Vorname)",c:"Bares fr Rares (um meinen alten Schrott zu verkaufen)",d:"Naked Survival (und ich wrde nach 5 Minuten weinen)"},{id:"bs_6",q:"Wie wrde mein eigener Freizeitpark am ehesten heien?",a:"Nickerchen-Land (berall stehen Sofas)",b:"Chaos-Canyon (nichts funktioniert, aber es macht Spa)",c:"Frittier-Paradies (alles ist aus Teig)",d:"Prokrastinations-World (Erffnung ist auf morgen verschoben)"},{id:"bs_7",q:"Was ist am ehesten der Song, bei dem ich sofort die Party verlasse?",a:"Atemlos durch die Nacht (Helene Fischer)",b:"Last Christmas (im Oktober)",c:"Baby Shark in Dauerschleife",d:"Den Ententanz"},{id:"bs_8",q:"Welches Objekt wrde ich am ehesten bei einer Zombie-Apokalypse als Waffe whlen?",a:"Eine elektrische Zahnbrste",b:"Eine gefrorene Salami",c:"Den Selfie-Stick (fr den letzten Post)",d:"Eine Pfanne (der Klassiker)"},{id:"bs_9",q:"Was ist am ehesten die merkwrdigste Sache, die ich je gegessen habe?",a:"Eine Mutprobe aus dem Garten (Regenwurm & Co.)",b:"Etwas, das 3 Monate ber dem MHD war",c:"Eine Kombination wie Nutella mit Salami",d:"Kreide in der Grundschule"},{id:"bs_10",q:"Wie wrde ich am ehesten eine Bank ausrauben?",a:"Mit einer Wasserpistole und einer Socke ber dem Kopf",b:"Ich wrde hflich nach dem Geld fragen",c:"Mit einem extrem komplizierten Plan, der sofort scheitert",d:"Gar nicht, ich wrde mich im Fluchtauto verfahren"},{id:"bs_11",q:"Wenn ich ein Mbelstck wre, welches wre ich am ehesten?",a:"Ein wackeliger Hocker",b:"Eine gemtliche, aber leicht fleckige Couch",c:"Ein Design-Regal, das niemand anfassen darf",d:"Die Minibar (immer gut gefllt)"},{id:"bs_12",q:"Was ist am ehesten mein Move auf der Tanzflche?",a:"Der betrunkene Onkel (rhythmisches Wippen)",b:"Der DNA-Test / Staubsauger (extrem tief am Boden)",c:"Ich stehe nur am Rand und halte mein Getrnk fest",d:"Ich bin der King/die Queen  Breakdance-Einlage inklusive"},{id:"bs_13",q:"Was wre am ehesten die Schlagzeile nach meiner Verhaftung?",a:"Person versuchte, Eichhrnchen zu hypnotisieren",b:"Wegen zu lauten Singens unter der Dusche festgenommen",c:"Versuchter Diebstahl von Gratis-Proben im Drogeriemarkt",d:"Aus Versehen ins falsche Haus eingebrochen und dort eingeschlafen"},{id:"bs_14",q:"Was wrde ich am ehesten tun, wenn ich eine dritte Hand am Rcken htte?",a:"Mich endlich berall selbst kratzen knnen",b:"Profi-Jongleur werden",c:"Sie unter einem weiten Pulli verstecken und Leute erschrecken",d:"Damit beim Zocken gleichzeitig Pizza essen"},{id:"bs_15",q:"Wie viele Tage wrde ich am ehesten im Dschungelcamp berleben?",a:"Ich wrde schon beim Helikopterflug aussteigen",b:"Genau 3 Tage, bis das erste Insekt mich ansieht",c:"Ich wrde gewinnen, weil ich alles esse",d:"Ich wrde wegen Regelversten rausgeworfen"},{id:"bs_16",q:"Was ist am ehesten meine peinlichste Google-Suche der letzten Zeit?",a:"Wie koche ich Wasser?",b:"Ab wann ist man ein Erwachsener?",c:"Warum guckt mich meine Katze so wertend an?",d:"Promi XY nackt"},{id:"bs_17",q:"Wenn mein Leben eine Sitcom wre, wie wrde der Titelsong am ehesten klingen?",a:"Ein trauriges Saxophon-Solo",b:"Aggressiver Heavy Metal",c:"Eine frhliche Pfeif-Melodie (die nervt)",d:"Der Sound eines abstrzenden Computers"},{id:"bs_18",q:"Was wrde ich am ehesten tun, wenn ich unsichtbar wre?",a:"Leute im Supermarkt erschrecken",b:"In geheime Meetings der Regierung schleichen",c:"Kostenlos ins Kino gehen",d:"Den ganzen Tag nackt drauen rumlaufen"},{id:"bs_19",q:"Welche fiktive Figur wre am ehesten mein idealer bester Freund?",a:"Patrick Star (SpongeBob)",b:"Sherlock Holmes (fr die Rtsel)",c:"Yoda (fr die Lebensweisheiten)",d:"Der Grinch"},{id:"bs_20",q:"Was ist am ehesten mein Endgegner im Haushalt?",a:"Das Beziehen der Bettdecke",b:"Die Steuererklrung",c:"Das Ausrumen der Splmaschine",d:"Socken, die nach dem Waschen keine Partner mehr haben"},{id:"bs_21",q:"Wie wrde ich am ehesten heien, wenn ich ein Rapper wre?",a:"MC Mdigkeit",b:"Lil' Verpeilt",c:"Dr. Dner",d:"Money Schmutz"},{id:"bs_22",q:"Was wre am ehesten das Schlimmste, was auf meinem Grabstein stehen knnte?",a:"Er/Sie hat das WLAN-Passwort mit ins Grab genommen.",b:"Er/Sie war stets bemht.",c:"Habe ich den Herd ausgemacht?",d:"Ladebalken bei 99% stehen geblieben."},{id:"bs_23",q:"Wenn ich eine neue Sportart erfinden msste, was wre das am ehesten?",a:"Extrem-Couch-Chilling",b:"Synchron-Ghnen",c:"Wett-Einkaufswagen-Rennen",d:"Weitwurf mit nassen Socken"},{id:"bs_24",q:"Was wre am ehesten mein letztes Abendmahl?",a:"Ein Eimer voll mit Pommes",b:"Ein 20-Gnge-Men, um die Hinrichtung hinauszuzgern",c:"Eine Schssel Msli (mit Wasser, weil keine Milch da ist)",d:"Ein Glckskeks ohne Zettel"},{id:"bs_25",q:"Wie reagiere ich am ehesten, wenn ich im Fahrstuhl mit einer fremden Person stecke?",a:"Ich fange sofort an, meine ganze Lebensgeschichte zu erzhlen",b:"Ich drcke panisch alle Knpfe",c:"Ich lege mich schlafen, bis Hilfe kommt",d:"Ich tue so, als wre ich der Techniker"},{id:"bs_26",q:"Welche App auf meinem Handy ist am ehesten peinlich?",a:"Eine App zum Kalorienzhlen (die ich nie nutze)",b:"Ein Talking Tom Abklatsch",c:"Eine Dating-App fr Haustierbesitzer",d:"Ein Spiel, fr das ich schon echtes Geld ausgegeben habe"},{id:"bs_27",q:"Was wrde ich am ehesten tun, wenn ich im Lotto gewinne (aber nur 1 Euro)?",a:"Ihn stolz einrahmen",b:"Eine einzige Kaugummi-Kugel kaufen",c:"Ihn jemandem schenken und so tun, als wre ich grozgig",d:"Mich ber die Steuer beschweren"},{id:"bs_28",q:"Wenn ich eine historische Person treffen knnte, wer wre es am ehesten?",a:"Einstein (um ihn zu fragen, ob er meine Hausaufgaben macht)",b:"Cleopatra (um Schmink-Tipps zu bekommen)",c:"Napoleon (um zu sehen, wie klein er wirklich war)",d:"Der Erfinder des Rades (um ihn zu fragen: Warum nicht quadratisch?)"},{id:"bs_29",q:"Was ist am ehesten meine geheime Superkraft?",a:"Ich finde immer die langsamste Schlange an der Kasse",b:"Ich kann Dinge aufrumen, sodass sie nie wieder auftauchen",c:"Ich erkenne Schauspieler in Filmen, wei aber nie ihren Namen",d:"Ich kann 12 Stunden am Stck schlafen und trotzdem mde sein"},{id:"bs_30",q:"Was ist am ehesten mein Spirit Animal beim Feiern?",a:"Die Grille (macht viel Lrm, man sieht sie aber nicht)",b:"Der Goldfisch (vergisst nach 3 Sekunden, welches Getrnk er hat)",c:"Der Pfau (muss im Mittelpunkt stehen)",d:"Der Waschbr (sucht am Ende nur was zu essen)"},{id:"bs_31",q:"Wie wrde ich am ehesten reagieren, wenn ich im falschen Zug sitze?",a:"Panisch bei der nchsten Station rausspringen",b:"So tun, als wre das mein Plan gewesen",c:"Den Schaffner bestechen",d:"Einfach sitzen bleiben und ein neues Leben in der Zielstadt anfangen"},{id:"bs_32",q:"Was war am ehesten mein dmmster Kaufrausch?",a:"Ein Fitnessgert, das jetzt als Kleiderstnder dient",b:"50 Rollen Klopapier (nur zur Sicherheit)",c:"Ein aufblasbares Kostm",d:"Eine DVD-Box einer Serie, die ich hasse"},{id:"bs_33",q:"Was ist am ehesten mein Lieblings-Schimpfwort?",a:"Ein klassisches Mist!",b:"Etwas sehr Kreatives wie Evolutionsbremse",c:"Nur wildes Gestikulieren",d:"Ein ganzer Schwall an Flchen, die keinen Sinn ergeben"},{id:"bs_34",q:"Welches Klischee erflle ich am ehesten voll und ganz?",a:"Der typische Deutsche (Handtuch auf die Liege)",b:"Das Chaos-Genie",c:"Der Frher war alles besser-Sager",d:"Der digitale Junkie (ohne WLAN kein Leben)"},{id:"bs_35",q:"Wenn ich eine Verschwrungstheorie starten msste, welche wre das am ehesten?",a:"Tauben sind eigentlich Kameras der Regierung",b:"Socken verschwinden in der Waschmaschine in eine andere Dimension",c:"Spiegel sind Fenster in eine Parallelwelt, aber die anderen sind schchtern",d:"Avocados wurden erfunden, um Hipster zu kontrollieren"},{id:"bs_36",q:"Wie wrde ich mein eigenes Land am ehesten nennen?",a:"Prokrastinationien",b:"Absurdistan",c:"Pommes-Land",d:"[Mein Name]-City"},{id:"bs_37",q:"Welche Art von kriminellem Mastermind wre ich am ehesten?",a:"Der charmante Hochstapler",b:"Der Hacker, der im Keller Pizza isst",c:"Der Fluchtwagenfahrer, der stndig falsch abbiegt",d:"Derjenige, der aus Versehen den falschen Tresor knackt"},{id:"bs_38",q:"Wenn ich ein Emoji wre, welches wre ich am ehesten?",a:" (Der Dauerlacher)",b:" (Der Klassenclown)",c:" (Der Sarkastische)",d:" (Der, der mit dem Alltag berfordert ist)"},{id:"bs_39",q:"Was wrde ich am ehesten tun, wenn ich in der Wildnis ausgesetzt werde?",a:"Versuchen, ein Feuer mit zwei Stcken zu machen (und scheitern)",b:"Beeren essen, die mich am Ende halluzinieren lassen",c:"Versuchen, Freundschaft mit einem Bren zu schlieen",d:"Nach 10 Minuten nach dem WLAN-Passwort suchen"},{id:"bs_40",q:"Was wre am ehesten mein Beruf in einer mittelalterlichen Fantasy-Welt?",a:"Der tollpatschige Zauberlehrling",b:"Der Dorflteste, der nur Rtsel spricht",c:"Der betrunkene Barde in der Taverne",d:"Der Drachenftterer (mit sehr kurzer Lebenserwartung)"},{id:"bs_41",q:"Wie wrde ich am ehesten reagieren, wenn ich ein Haar in meinem Essen im Restaurant finde?",a:"Den Manager verlangen und eine Szene machen",b:"Es diskret entfernen und einfach weiteressen",c:"Die ganze Zeit angewidert draufstarren, aber nichts sagen",d:"So tun, als wre es mein eigenes, um niemanden zu belstigen"},{id:"bs_42",q:"Was wrde ich am ehesten tun, wenn ich erfahre, dass mein Leben eine Truman Show ist?",a:"Direkt in die Kamera winken und Werbung fr Eistee machen",b:"Versuchen, aus dem Set auszubrechen",c:"Mich ber meine schlechte Gage beschweren",d:"Einfach weitermachen wie bisher, Hauptsache die Einschaltquoten stimmen"},{id:"bs_43",q:"Was ist am ehesten mein Verhalten bei einer Zombie-Invasion?",a:"Ich bin der Erste, der gebissen wird, weil ich den Zombie streicheln wollte",b:"Ich verbarrikadiere mich im nchsten Supermarkt in der Swarenabteilung",c:"Ich grnde eine neue Zivilisation in meinem Garten",d:"Ich versuche, die Zombies mit schlechten Witzen zu vertreiben"},{id:"bs_44",q:"Welches ungewhnliche Haustier htte ich am ehesten?",a:"Ein Alpaka (weil sie so flauschig sind)",b:"Ein Faultier (als Spiegelbild meiner Seele)",c:"Einen Pinguin, der im Khlschrank wohnt",d:"Einen Waschbren, der mir beim Mllsortieren hilft"},{id:"bs_45",q:"Was wrde ich am ehesten tun, wenn ich 24 Stunden lang die Zeit anhalten knnte?",a:"In Ruhe ausschlafen (endlich!)",b:"Leuten im Supermarkt die Einkaufswagen vertauschen",c:"In die Umkleidekabine von Promis schleichen",d:"Alle Hausarbeiten erledigen, um danach nie wieder was tun zu mssen"},{id:"bs_46",q:"Wie wrde ich am ehesten reagieren, wenn ich eine peinliche Nachricht an die falsche Person schicke?",a:"Mein Handy sofort in den nchsten Fluss werfen",b:"So tun, als wre mein Account gehackt worden",c:"Sofort 50 weitere Nachrichten schicken, um die erste zu berdecken",d:"Mit Ups, falscher Chat lol locker drber weggehen"},{id:"bs_47",q:"Was wre am ehesten meine Rolle in einer Zirkus-Show?",a:"Der Dompteur, der Angst vor Katzen hat",b:"Derjenige, der aus der Kanone geschossen wird",c:"Der tollpatschige Akrobat, der vom Seil fllt",d:"Die Person, die die Popcorn-Maschine bewacht"},{id:"bs_48",q:"Was wrde ich am ehesten tun, wenn ich im Fahrstuhl mit meinem absoluten Idol feststecke?",a:"Ohnmchtig werden",b:"Die ganze Zeit ber das Wetter reden, weil mir nichts Besseres einfllt",c:"Ein extrem verwackeltes Selfie machen",d:"Ihn/Sie fragen, ob ich mal am Parfum riechen darf"},{id:"bs_49",q:"Welche Sache wrde ich am ehesten mit auf eine einsame Insel nehmen?",a:"Eine unendliche Vorratspackung Kaffee",b:"Meinen Laptop (auch ohne Internet)",c:"Eine riesige aufblasbare Badeinsel",d:"Ein Buch ber Wie man ein Boot aus Sand baut"},{id:"bs_50",q:"Was wrde ich am ehesten tun, wenn ich pltzlich fliegen knnte?",a:"Den Stau auf dem Weg zur Arbeit ignorieren",b:"Tauben jagen und sie erschrecken",c:"Fenster putzen in schwindelerregender Hhe",d:"Nach 5 Minuten feststellen, dass ich Hhenangst habe und wieder landen"},{id:"bs_51",q:"In welcher Epoche htte ich am ehesten berlebt?",a:"Steinzeit (Beeren sammeln und Hhlen bemalen)",b:"Mittelalter (als Hofnarr)",c:"In der Zukunft (als Museumsstck fr 'Primitivitt')",d:"In den 80ern (wegen der Frisuren)"},{id:"bs_52",q:"Was wre am ehesten mein Markenzeichen als Superheld?",a:"Ein Umhang aus einer alten Bettdecke",b:"Dass ich immer 15 Minuten zu spt zur Rettung komme",c:"Ein extrem unpassender Kampfschrei",d:"Dass ich meine Geheimidentitt sofort aus Versehen verrate"},{id:"bs_53",q:"Was wrde ich am ehesten in einer Zeitkapsel fr die Nachwelt hinterlassen?",a:"Einen USB-Stick mit Memes",b:"Eine halbe Packung Tiefkhlpizza",c:"Eine Anleitung, wie man ein Blatt Papier faltet",d:"Einen Zettel, auf dem 'Ich war hier und es war okay' steht"},{id:"bs_54",q:"Wie wrde ich am ehesten versuchen, ein Feuer ohne Streichhlzer zu machen?",a:"Den Stein ganz fest bse angucken",b:"Zwei Stcke reiben, bis ich Blasen an den Hnden habe",c:"Auf ein Gewitter warten",d:"Eine App dafr herunterladen"},{id:"bs_55",q:"Was wre am ehesten mein Beitrag zu einem Potluck-Buffet?",a:"Eine Tte Chips (lieblos in eine Schssel geschttet)",b:"Etwas extrem Aufwendiges, das leider verbrannt ist",c:"Nudelsalat (der Klassiker, den schon 5 andere mitbringen)",d:"Nur Servietten und gute Laune"},{id:"bs_56",q:"Welche Sache wrde ich am ehesten im Weltraum vergessen?",a:"Meinen Helm",b:"Das Ladekabel fr mein Handy",c:"Die Koordinaten der Erde",d:"Dass ich die Katze noch fttern wollte"},{id:"bs_57",q:"Was wre am ehesten mein Job in einem Zirkus?",a:"Die Person, die die Elefantenpfel aufsammelt",b:"Der Typ, der die Messer wirft (aber immer daneben)",c:"Die menschliche Kanonenkugel (aber nur fr kurze Strecken)",d:"Der Wahrsager, der nur das Wetter von gestern vorhersagt"},{id:"bs_58",q:"Wie wrde ich am ehesten reagieren, wenn ich eine Million Euro geschenkt bekomme?",a:"Sofort alles fr Quatsch ausgeben",b:"Meinen Job kndigen und dann merken, dass es nicht reicht",c:"Erstmal drei Tage lang schlafen, um drber nachzudenken",d:"Fragen, ob das auch in bar geht"},{id:"bs_59",q:"Was ist am ehesten mein Problem beim Campen?",a:"Ich bekomme das Zelt nicht aufgebaut",b:"Ich werde von einer einzigen Mcke die ganze Nacht terrorisiert",c:"Ich vermisse meine Matratze nach 10 Minuten",d:"Ich finde den Weg zum Klo im Dunkeln nicht"},{id:"bs_60",q:"Was wre am ehesten mein Name in einem Western-Film?",a:"Der mde Joe",b:"Schleim-Sattel Sam",c:"Piano-Peter (der gar nicht spielen kann)",d:"Desperado ohne Plan"},{id:"bs_61",q:"Welches Kchengert wre ich am ehesten?",a:"Ein Toaster (macht viel Lrm fr wenig Ergebnis)",b:"Ein Eierkocher (kann nur eine Sache, die aber gut)",c:"Ein Sandwichmaker, der vllig verkrustet im Schrank steht",d:"Eine Kaffeemaschine (ohne mich luft nichts)"},{id:"bs_62",q:"Was wrde ich am ehesten tun, wenn ich Knig/Knigin von England wre?",a:"Die Corgis mit Burgern fttern",b:"Die Krone bei eBay verkaufen",c:"Jeden Tag im Pyjama regieren",d:"Den Tee durch Eiskaffee ersetzen"},{id:"bs_63",q:"Was ist am ehesten mein Talent bei einer Talentshow?",a:"Gerusche mit der Achselhhle machen",b:"Ein Glas Wasser in Rekordzeit austrinken",c:"Meinen eigenen Namen rckwrts rlpsen",d:"So lange stillstehen, bis die Jury mich vergisst"},{id:"bs_64",q:"Welche Disney-Figur wre ich am ehesten im echten Leben?",a:"Goofy (wegen der Tollpatschigkeit)",b:"Schneewittchen (weil ich viel schlafe)",c:"Einer der sieben Zwerge (wahrscheinlich 'Mde')",d:"Die bse Hexe (vor meinem ersten Kaffee)"},{id:"bs_65",q:"Was wre am ehesten mein Grund fr eine Anzeige bei der Polizei?",a:"Zu langsames Gehen auf dem Brgersteig",b:"Illegales Streamen von Kinderfilmen",c:"Bestechung eines Parkautomaten mit Knpfen",d:"Das Singen falscher Songtexte in der ffentlichkeit"},{id:"bs_66",q:"Wie wrde ich am ehesten reagieren, wenn ich einen Geist sehe?",a:"Ihm versuchen, eine Versicherung zu verkaufen",b:"Sofort ein Selfie machen (#GhostVibes)",c:"Ihn fragen, ob er die Miete mitbezahlt",d:"Einfach wegrennen und nie wieder zurckblicken"},{id:"bs_67",q:"Was wre am ehesten mein 'Signature Move' beim Kochen?",a:"Den Rauchmelder als Kurzzeitwecker nutzen",b:"Alles mit so viel Kse berbacken, dass man es nicht mehr erkennt",c:"Viel zu viel Salz benutzen",d:"Bestellen und behaupten, es sei selbstgemacht"},{id:"bs_68",q:"Welches Tier wrde ich am ehesten im Garten zhmen?",a:"Einen betrunkenen Igel",b:"Eine sehr aggressive Taube",c:"Einen Regenwurm namens Hans",d:"Einen Maulwurf, der meinen Rasen ruiniert"},{id:"bs_69",q:"Was wrde ich am ehesten machen, wenn ich eine Zeitmaschine htte?",a:"Lottozahlen von letzter Woche nachschauen",b:"Meinem jngeren Ich sagen: 'Schneid dir die Haare nicht so!'",c:"Dinosaurier streicheln (und wahrscheinlich gefressen werden)",d:"Die Erfindung der Hausaufgaben verhindern"},{id:"bs_70",q:"Was ist am ehesten mein grter Fail im Fitnessstudio?",a:"Vom Laufband fallen, weil ich auf mein Handy geguckt habe",b:"Nicht wissen, wie die Gerte funktionieren und einfach irgendwas machen",c:"Nach 5 Minuten Training ein Foto machen und nach Hause gehen",d:"Sich im Spiegel selbst bewundern und dabei gegen eine Hantelbank laufen"},{id:"bs_71",q:"In welcher Horrorfilm-Situation wrde ich am ehesten sterben?",a:"Ich stolpere ber eine ebene Flche",b:"Ich gehe nachsehen, was das Gerusch im Keller war",c:"Ich versuche, mich im Khlschrank zu verstecken",d:"Ich vertraue dem Mrder, weil er nett aussieht"},{id:"bs_72",q:"Was wre am ehesten meine Rolle in einer Boyband/Girlgroup?",a:"Der/Die Se (die eigentlich nichts kann)",b:"Der/Die Rebellische (der/die stndig Hausverbot hat)",c:"Der/Die Schchterne, die immer im Hintergrund tanzt",d:"Der/Diejenige, die nach zwei Wochen fr eine Solokarriere aussteigt"},{id:"bs_73",q:"Wie wrde ich am ehesten versuchen, ein Date zu beeindrucken?",a:"Mit unntigen Fakten ber Haie",b:"Indem ich sage, dass ich fast mal berhmt war",c:"Mit einem sehr schlechten Zaubertrick",d:"Indem ich die ganze Speisekarte auswendig lerne"},{id:"bs_74",q:"Was ist am ehesten mein 'Guilty Pleasure' im Fernsehen?",a:"Sendungen ber extrem fette Katzen",b:"Trash-TV, bei dem sich Leute anschreien",c:"Teleshopping mitten in der Nacht",d:"Zeichentrickserien fr Dreijhrige"},{id:"bs_75",q:"Was wrde ich am ehesten tun, wenn ich eine Ameise wre?",a:"Versuchen, einen ganzen Krmel Pizza alleine zu tragen",b:"In das Haus eines Promis einbrechen",c:"Die Ameisenknigin strzen und selbst regieren",d:"Mich in einem Picknickkorb verstecken"},{id:"bs_76",q:"Wie wrde mein eigenes Parfm am ehesten heien?",a:"Eau de Couch Potato",b:"Duft des Chaos",c:"Vergessenes Pausenbrot",d:"Frische Wsche (die noch nass ist)"},{id:"bs_77",q:"Was wre am ehesten meine Taktik bei einer Schneeballschlacht?",a:"Hinter einem Baum verstecken und hoffen, dass mich niemand sieht",b:"Haufenweise Schneeblle vorbereiten, die dann schmelzen",c:"Weglaufen und schreien: 'Nicht ins Gesicht!'",d:"Den Schnee essen statt werfen"},{id:"bs_78",q:"Welches Auto wrde ich am ehesten fahren, wenn Geld keine Rolle spielte?",a:"Einen Panzer (fr den Berufsverkehr)",b:"Ein Einhorn-Mobil mit Glitzerlack",c:"Ein Batmobil (ohne die Gadgets)",d:"Einen Oldtimer, der alle 2 km liegen bleibt"},{id:"bs_79",q:"Was ist am ehesten meine nervigste Eigenschaft?",a:"Dass ich Stze nicht zu Ende...",b:"Stndiges Besserwissen (auch wenn ich falsch liege)",c:"Zu laut kauen",d:"Immer zu spt kommen"},{id:"bs_80",q:"Wie wrde ich am ehesten auf eine einsame Insel gelangen?",a:"Vom Kreuzfahrtschiff gefallen, weil ich ein Selfie machen wollte",b:"Mit dem Tretboot verfahren",c:"Fallschirmabsprung an der falschen Stelle",d:"Freiwillig, um mal meine Ruhe zu haben"},{id:"bs_81",q:"Was wre am ehesten mein Wunsch-Superkraft-Nachteil?",a:"Fliegen knnen, aber nur 10 cm ber dem Boden",b:"Gedanken lesen, aber nur die schlechten ber mich",c:"Unsichtbar sein, aber nur wenn niemand hinguckt",d:"Superschnell rennen, aber sofort auer Puste sein"},{id:"bs_82",q:"Welche Frucht wre ich am ehesten?",a:"Eine Zitrone (sauer, aber erfrischend)",b:"Eine Banane (krumm und wird schnell braun)",c:"Eine Kokosnuss (harte Schale, weicher Kern)",d:"Eine Weintraube (nur in der Gruppe stark)"},{id:"bs_83",q:"Was wrde ich am ehesten tun, wenn mein Handy in die Toilette fllt?",a:"Hinterhergreifen ohne nachzudenken",b:"Davor stehen und weinen",c:"In Reis einlegen und beten",d:"Einfach splen und ein neues Leben anfangen"},{id:"bs_84",q:"Was ist am ehesten mein Lieblings-Smalltalk-Thema?",a:"Das Wetter (typisch deutsch)",b:"Wie mde ich heute wieder bin",c:"Was ich gestern gegessen habe",d:"Verschwrungstheorien ber Tauben"},{id:"bs_85",q:"Wie wrde ich am ehesten einen Streit gewinnen?",a:"Indem ich einfach so lange 'Warum?' frage, bis der andere aufgibt",b:"Mit vllig unlogischen Argumenten",c:"Indem ich anfange zu weinen",d:"Gar nicht, ich ziehe mich beleidigt zurck"},{id:"bs_86",q:"Was wre am ehesten mein Job in einer Weltraum-Kolonie?",a:"Sauerstoff-Tester (sehr riskant)",b:"Weltraum-Grtner fr Plastikblumen",c:"Unterhalter fr gelangweilte Roboter",d:"Mllschlucker-Bediener"},{id:"bs_87",q:"Was wrde ich am ehesten tun, wenn ich eine Million Follower htte?",a:"Nur noch Fotos von meinem Essen posten",b:"Versuchen, eine eigene Sekte zu grnden",c:"Meinen Account aus Versehen lschen",d:"Leuten dubiose Vitamin-Gummis verkaufen"},{id:"bs_88",q:"Welcher Wochentag wre ich am ehesten?",a:"Montag (niemand mag mich)",b:"Mittwoch (ich wei nicht, wo ich hingehre)",c:"Freitagabend (voller Energie, die schnell verpufft)",d:"Sonntag (nur am Faulenzen)"},{id:"bs_89",q:"Was wre am ehesten meine Reaktion auf einen Heiratsantrag in der ffentlichkeit?",a:"Wegrennen vor lauter Panik",b:"Ja sagen, nur damit die Leute aufhren zu gucken",c:"Fragen, ob das ein Prank fr YouTube ist",d:"Ohnmchtig werden und in die Torte fallen"},{id:"bs_90",q:"Was wrde ich am ehesten tun, wenn ich fr 5 Minuten der Prsident wre?",a:"Gratis Pizza fr alle befehlen",b:"Den Rasen vor dem Weien Haus mhen",c:"Geheime Akten ber Aliens lesen",d:"Ein Nickerchen im Oval Office machen"},{id:"bs_91",q:"Was ist am ehesten mein Verhalten im Kino?",a:"Nach 10 Minuten einschlafen",b:"Die ganze Zeit lautstark Popcorn essen",c:"Den Film kommentieren, als wre ich der Regisseur",d:"Nach der Hlfte fragen, worum es eigentlich geht"},{id:"bs_92",q:"Welches Brettspiel bringt mich am ehesten zum Ausrasten?",a:"Monopoly (ich lande immer im Gefngnis)",b:"Mensch rgere dich nicht (der Name ist Programm)",c:"Scrabble (weil ich keine Wrter kenne)",d:"Activity (niemand versteht meine Zeichnungen)"},{id:"bs_93",q:"Was wrde ich am ehesten tun, wenn ich ein Gespenst wre?",a:"Nur die Socken der Leute verstecken",b:"Das WLAN immer im spannendsten Moment ausschalten",c:"Nachts leise Witze flstern",d:"Leuten im Schlaf die Haare kmmen"},{id:"bs_94",q:"Wie wrde ich am ehesten auf eine Dit reagieren?",a:"Nach zwei Stunden eine Pizza bestellen",b:"Nur noch ber Essen reden",c:"Behaupten, dass Kekse eigentlich Gemse sind",d:"Einfach mehr Sport machen (hahaha, nein)"},{id:"bs_95",q:"Was wre am ehesten mein Name als Pirat?",a:"Einbein-Ede",b:"Kpt'n Chaos",c:"Scurvy-Susi",d:"Der Schrecken der Badewanne"},{id:"bs_96",q:"Was wrde ich am ehesten tun, wenn ich in einer Zeitschleife feststecke?",a:"Jeden Tag etwas anderes Dummes essen",b:"Endlich mal alle Serien zu Ende schauen",c:"Versuchen, den perfekten Tag zu erleben (und scheitern)",d:"Einfach nur schlafen, weil es eh egal ist"},{id:"bs_97",q:"Welche Art von Museum wrde ich am ehesten erffnen?",a:"Das Museum der gescheiterten Trume",b:"Eine Ausstellung ber hssliche Teppiche",c:"Das Museum fr Dinge, die ich mal verloren habe",d:"Eine Galerie fr schlechte Selfies"},{id:"bs_98",q:"Was wre am ehesten meine Strategie bei einer Talentshow?",a:"Mitleid erregen",b:"Die Jury bestechen",c:"Etwas so Schlechtes machen, dass es wieder gut ist",d:"Einfach nicht erscheinen"},{id:"bs_99",q:"Was wrde ich am ehesten tun, wenn ich einen Roboter-Zwilling htte?",a:"Ihn zur Arbeit schicken",b:"Ihn meine Wohnung aufrumen lassen",c:"Mich mit ihm streiten, wer das Original ist",d:"Ihn als Kleiderstnder benutzen"},{id:"bs_100",q:"Was ist am ehesten das Letzte, was ich vor meinem Tod sagen wrde?",a:"Ich habe das Gold vergraben bei...",b:"War das Fleisch noch gut?",c:"Ich wusste, dass das eine schlechte Idee war.",d:"Lscht meinen Browserverlauf!"}]}};function _c(r=[]){let e=[];return r.length===0&&(r=Object.keys(mi)),r.forEach(n=>{mi[n]&&mi[n].questions&&mi[n].questions.forEach(s=>{e.push({...s,category:n})})}),e}const Tm=new Map,DS=r=>{if(Tm.has(r))return Tm.get(r);try{const e="/Hitzkopf/",n=new Audio(`${e}sounds/${r}.mp3`);return n.addEventListener("error",s=>{console.warn(` Audio-Datei nicht gefunden: ${r}.mp3`,s)}),Tm.set(r,n),n}catch(e){return console.warn(` Fehler beim Erstellen des Audio-Objekts fr ${r}:`,e),null}},NN=(r,e=.5)=>{const n=DS(r);if(n)try{n.volume=e,n.currentTime=0,n.play().catch(s=>{})}catch(s){console.warn(` Fehler beim Abspielen von ${r}:`,s)}},DN=()=>DS("background_music"),MN="_menuModal_1ubl0_2",xN="_menuHeader_1ubl0_23",ON="_menuTitle_1ubl0_30",LN="_menuCloseButton_1ubl0_35",VN="_menuButton_1ubl0_49",jN="_menuBackButton_1ubl0_67",PN="_menuSection_1ubl0_81",zN="_menuSectionTitle_1ubl0_87",BN="_menuLogContainer_1ubl0_94",UN="_menuLogEntry_1ubl0_104",qN="_menuLogEmpty_1ubl0_110",HN="_landingContainer_1ubl0_115",FN="_landingLogoContainer_1ubl0_128",GN="_landingLogo_1ubl0_128",KN="_landingButton_1ubl0_144",$N="_backToProjectsButton_1ubl0_175",QN="_logoContainer_1ubl0_200",WN="_logoHorizontal_1ubl0_208",YN="_emojiGalleryWrapper_1ubl0_217",XN="_emojiGallery_1ubl0_217",ZN="_emojiSpacer_1ubl0_252",JN="_eliminatedText_1ubl0_270",eD="_eliminatedSubtext_1ubl0_276",tD="_thermoTop_1ubl0_296",nD="_thermoTopLeft_1ubl0_303",iD="_thermoTemp_1ubl0_309",sD="_thermoBar_1ubl0_318",rD="_thermoFill_1ubl0_326",aD="_attackSelectionGrid_1ubl0_344",oD="_volumeTitle_1ubl0_440",lD="_volumeIcon_1ubl0_452",cD="_waitText_1ubl0_514",uD="_buttonMarginTop_1ubl0_521",hD="_helpButtonLeft_1ubl0_526",dD="_spacer_1ubl0_539",fD="_settingsButton_1ubl0_544",mD="_settingsButtonGray_1ubl0_555",gD="_settingsButtonRed_1ubl0_559",pD="_settingsButtonDarkRed_1ubl0_564",yD="_settingsButtonDanger_1ubl0_569",_D="_settingsButtonMusic_1ubl0_575",bD="_settingsButtonMusicEnabled_1ubl0_582",vD="_settingsButtonMusicDisabled_1ubl0_586",TD="_volumeSliderContainer_1ubl0_591",SD="_volumeSliderWrapper_1ubl0_595",ED="_volumeSliderInput_1ubl0_601",wD="_correctGuessContainer_1ubl0_642",AD="_correctGuessTitle_1ubl0_646",RD="_correctGuessSubtitle_1ubl0_653",ID="_attackSelectionWrapper_1ubl0_665",CD="_attackSelectionHeader_1ubl0_673",kD="_attackSelectionHeaderIcon_1ubl0_682",ND="_attackPlayerCardLarge_1ubl0_692",DD="_attackPlayerEmojiLarge_1ubl0_711",MD="_attackPlayerNameLarge_1ubl0_716",xD="_attackPlayerDmgLarge_1ubl0_723",OD="_attackNoPlayersLarge_1ubl0_729",LD="_hotseatModalOverlay_1ubl0_737",VD="_hotseatModalContent_1ubl0_750",jD="_hotseatModalIcon_1ubl0_763",PD="_hotseatModalTitle_1ubl0_768",zD="_hotseatModalText_1ubl0_778",BD="_hotseatModalHeader_1ubl0_784",UD="_hotseatModalEmoji_1ubl0_792",qD="_hotseatModalButton_1ubl0_796",HD="_labelWithMargin_1ubl0_833",FD="_grid2Cols_1ubl0_842",GD="_grid3Cols_1ubl0_850",KD="_backButton_1ubl0_862",$D="_joinScreenTitle_1ubl0_870",QD="_refreshButton_1ubl0_875",WD="_noRoomsText_1ubl0_881",YD="_roomCard_1ubl0_887",XD="_categoryEmojiLarge_1ubl0_898",ZD="_categoryNameLarge_1ubl0_903",JD="_lobbyTitle_1ubl0_910",e2="_myPlayerCard_1ubl0_915",t2="_ready_1ubl0_932",n2="_notReady_1ubl0_936",i2="_eliminated_1ubl0_258",s2="_myPlayerEmoji_1ubl0_944",r2="_myPlayerInfo_1ubl0_949",a2="_myPlayerName_1ubl0_956",o2="_crownIcon_1ubl0_965",l2="_readyToggle_1ubl0_969",c2="_readyLabel_1ubl0_975",u2="_toggleSwitch_1ubl0_981",h2="_toggleThumb_1ubl0_1006",d2="_toggleCheck_1ubl0_1026",f2="_toggleCross_1ubl0_1032",m2="_gameQuestion_1ubl0_1103",g2="_gameCategory_1ubl0_1112",p2="_voteSubmitted_1ubl0_1121",y2="_voteSubmittedTitle_1ubl0_1128",_2="_voteSubmittedText_1ubl0_1133",b2="_submitButtonMargin_1ubl0_1139",v2="_resultTitle_1ubl0_1144",T2="_resultThermoItem_1ubl0_1149",S2="_eliminatedTitle_1ubl0_1157",E2="_eliminatedInfoBox_1ubl0_1162",w2="_thermoItemAnswered_1ubl0_1180",A2="_thermoItemNotAnswered_1ubl0_1186",R2="_thermoTempMax_1ubl0_1203",I2="_rewardDecisionMade_1ubl0_1261",C2="_rewardDecisionTitle_1ubl0_1268",k2="_rewardDecisionText_1ubl0_1273",N2="_wrongAnswerContainer_1ubl0_1279",D2="_wrongAnswerIcon_1ubl0_1288",M2="_attackModalOverlay_1ubl0_1306",x2="_attackModalContent_1ubl0_1319",O2="_attackModalNoDamage_1ubl0_1347",L2="_attackModalDetails_1ubl0_1353",V2="_attackModalDetailsTitle_1ubl0_1365",j2="_attackModalDetailItem_1ubl0_1369",P2="_attackModalBar_1ubl0_1374",z2="_attackModalTemp_1ubl0_1384",B2="_attackModalTempDamage_1ubl0_1390",U2="_attackModalTempNoDamage_1ubl0_1394",q2="_attackModalButton_1ubl0_1398",H2="_eliminationModalOverlay_1ubl0_1412",F2="_eliminationModalContent_1ubl0_1425",G2="_eliminationModalLogoContainer_1ubl0_1437",K2="_eliminationModalLogo_1ubl0_1437",$2="_eliminationModalTitle_1ubl0_1451",Q2="_eliminationModalText_1ubl0_1457",W2="_eliminationModalButton_1ubl0_1463",Y2="_rulesModalOverlay_1ubl0_1477",X2="_rulesModalContent_1ubl0_1490",Z2="_rulesModalSectionTitle_1ubl0_1518",J2="_rulesModalButton_1ubl0_1531",eM="_rulesModalHeader_1ubl0_1548",tM="_rulesModalHeaderIcon_1ubl0_1557",nM="_rulesModalBody_1ubl0_1561",iM="_rulesModalSectionBox_1ubl0_1567",sM="_rulesModalSectionHeader_1ubl0_1574",rM="_rulesModalSectionIcon_1ubl0_1581",aM="_rulesModalSectionText_1ubl0_1590",oM="_attackModalContentDamage_1ubl0_1596",lM="_attackModalContentNoDamage_1ubl0_1601",cM="_attackModalIcon_1ubl0_1606",uM="_attackModalName_1ubl0_1611",hM="_attackModalNameDamage_1ubl0_1617",dM="_attackModalNameNoDamage_1ubl0_1622",fM="_attackModalMessage_1ubl0_1627",mM="_attackModalBarFill_1ubl0_1633",gM="_attackModalBarFillDamage_1ubl0_1639",pM="_attackModalBarFillNoDamage_1ubl0_1644",yM="_hotseatWaitContainer_1ubl0_1657",_M="_hotseatWaitBox_1ubl0_1663",bM="_hotseatWaitTitle_1ubl0_1671",vM="_hotseatWaitSubtitle_1ubl0_1678",TM="_guessOverviewContainer_1ubl0_1685",SM="_guessOverviewSection_1ubl0_1691",EM="_guessOverviewTitle_1ubl0_1698",wM="_guessOverviewList_1ubl0_1704",AM="_guessOverviewItem_1ubl0_1710",RM="_playerReadyList_1ubl0_1721",IM="_playerReadyText_1ubl0_1725",CM="_fullWidthButton_1ubl0_1733",k={menuModal:MN,menuHeader:xN,menuTitle:ON,menuCloseButton:LN,menuButton:VN,menuBackButton:jN,menuSection:PN,menuSectionTitle:zN,menuLogContainer:BN,menuLogEntry:UN,menuLogEmpty:qN,landingContainer:HN,landingLogoContainer:FN,landingLogo:GN,landingButton:KN,backToProjectsButton:$N,logoContainer:QN,logoHorizontal:WN,emojiGalleryWrapper:YN,emojiGallery:XN,emojiSpacer:ZN,eliminatedText:JN,eliminatedSubtext:eD,thermoTop:tD,thermoTopLeft:nD,thermoTemp:iD,thermoBar:sD,thermoFill:rD,attackSelectionGrid:aD,volumeTitle:oD,volumeIcon:lD,waitText:cD,buttonMarginTop:uD,helpButtonLeft:hD,spacer:dD,settingsButton:fD,settingsButtonGray:mD,settingsButtonRed:gD,settingsButtonDarkRed:pD,settingsButtonDanger:yD,settingsButtonMusic:_D,settingsButtonMusicEnabled:bD,settingsButtonMusicDisabled:vD,volumeSliderContainer:TD,volumeSliderWrapper:SD,volumeSliderInput:ED,correctGuessContainer:wD,correctGuessTitle:AD,correctGuessSubtitle:RD,attackSelectionWrapper:ID,attackSelectionHeader:CD,attackSelectionHeaderIcon:kD,attackPlayerCardLarge:ND,attackPlayerEmojiLarge:DD,attackPlayerNameLarge:MD,attackPlayerDmgLarge:xD,attackNoPlayersLarge:OD,hotseatModalOverlay:LD,hotseatModalContent:VD,hotseatModalIcon:jD,hotseatModalTitle:PD,hotseatModalText:zD,hotseatModalHeader:BD,hotseatModalEmoji:UD,hotseatModalButton:qD,labelWithMargin:HD,grid2Cols:FD,grid3Cols:GD,backButton:KD,joinScreenTitle:$D,refreshButton:QD,noRoomsText:WD,roomCard:YD,categoryEmojiLarge:XD,categoryNameLarge:ZD,lobbyTitle:JD,myPlayerCard:e2,ready:t2,notReady:n2,eliminated:i2,myPlayerEmoji:s2,myPlayerInfo:r2,myPlayerName:a2,crownIcon:o2,readyToggle:l2,readyLabel:c2,toggleSwitch:u2,toggleThumb:h2,toggleCheck:d2,toggleCross:f2,gameQuestion:m2,gameCategory:g2,voteSubmitted:p2,voteSubmittedTitle:y2,voteSubmittedText:_2,submitButtonMargin:b2,resultTitle:v2,resultThermoItem:T2,eliminatedTitle:S2,eliminatedInfoBox:E2,thermoItemAnswered:w2,thermoItemNotAnswered:A2,thermoTempMax:R2,rewardDecisionMade:I2,rewardDecisionTitle:C2,rewardDecisionText:k2,wrongAnswerContainer:N2,wrongAnswerIcon:D2,attackModalOverlay:M2,attackModalContent:x2,attackModalNoDamage:O2,attackModalDetails:L2,attackModalDetailsTitle:V2,attackModalDetailItem:j2,attackModalBar:P2,attackModalTemp:z2,attackModalTempDamage:B2,attackModalTempNoDamage:U2,attackModalButton:q2,eliminationModalOverlay:H2,eliminationModalContent:F2,eliminationModalLogoContainer:G2,eliminationModalLogo:K2,eliminationModalTitle:$2,eliminationModalText:Q2,eliminationModalButton:W2,rulesModalOverlay:Y2,rulesModalContent:X2,rulesModalSectionTitle:Z2,rulesModalButton:J2,rulesModalHeader:eM,rulesModalHeaderIcon:tM,rulesModalBody:nM,rulesModalSectionBox:iM,rulesModalSectionHeader:sM,rulesModalSectionIcon:rM,rulesModalSectionText:aM,attackModalContentDamage:oM,attackModalContentNoDamage:lM,attackModalIcon:cM,attackModalName:uM,attackModalNameDamage:hM,attackModalNameNoDamage:dM,attackModalMessage:fM,attackModalBarFill:mM,attackModalBarFillDamage:gM,attackModalBarFillNoDamage:pM,hotseatWaitContainer:yM,hotseatWaitBox:_M,hotseatWaitTitle:bM,hotseatWaitSubtitle:vM,guessOverviewContainer:TM,guessOverviewSection:SM,guessOverviewTitle:EM,guessOverviewList:wM,guessOverviewItem:AM,playerReadyList:RM,playerReadyText:IM,fullWidthButton:CM},kM="/Hitzkopf/assets/hk_logo_vertical-B1yR7l9I.png",Ai={MAX_TEMP_DEFAULT:100,ATTACK_DMG_PARTY:20,PENALTY_DMG:10,CONNECTION_CHECK_INTERVAL:2e3,HOST_INACTIVE_THRESHOLD:5e3,CONNECTION_SLOW_THRESHOLD:5e3,CONNECTION_OFFLINE_THRESHOLD:1e4},ce={log:()=>{},warn:()=>{},error:()=>{},debug:()=>{}},il=(r,e=Ai.MAX_TEMP_DEFAULT,n=[])=>Object.keys(r||{}).filter(s=>(r?.[s]?.temp||0)<e&&!n.includes(s)).sort(),NM=r=>typeof r=="string"?r:r?.name||String(r||""),DM=(r,e)=>{const n=Object.keys(r||{}),s=Object.keys(e||{});return n.length!==s.length?!1:n.every(l=>r[l]?.choice===e[l]?.choice)},MM=(r,e,n)=>{const s=e.attackDetails?.length||0,l=e.attackDetails?.some(c=>c.hasOil)||!1;return`${r}-${e.totalDmg}-${s}-${l}-${n}`},xM=(r="op")=>`${r}_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,OM={apiKey:"AIzaSyBQ7c9JkZ3zWlyIjZLl1O1sJJOrKfYJbmA",authDomain:"hitzkopf-f0ea6.firebaseapp.com",projectId:"hitzkopf-f0ea6",storageBucket:"hitzkopf-f0ea6.firebasestorage.app",messagingSenderId:"828164655874",appId:"1:828164655874:web:1cab759bdb03bfb736101b"},LM=["","","","","","","","","","","","","","",""],jr=(()=>{const r=[...LM];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})();function VM({onBack:r}){const[e,n]=ee.useState(null),[s,l]=ee.useState(null),[c,f]=ee.useState("landing"),[m,b]=ee.useState(sessionStorage.getItem("hk_name")||""),_=Math.floor(jr.length/2),S=jr[_],[A,V]=ee.useState(S),[O,pe]=ee.useState(sessionStorage.getItem("hk_room")||""),[de,he]=ee.useState(!1),[I,Ae]=ee.useState(null);ee.useMemo(()=>{if(!I?.players)return[];const M=I.config?.maxTemp||Ai.MAX_TEMP_DEFAULT;return il(I.players,M)},[I?.players,I?.config?.maxTemp]),ee.useMemo(()=>I?.players?Object.keys(I.players).sort():[],[I?.players]),ee.useMemo(()=>Object.keys(I?.players||{}).length,[I?.players]);const[Le,lt]=ee.useState("online"),jt=ee.useRef(Date.now()),qe=ee.useRef(new Set),D=ee.useRef([]),R=ee.useRef(null),[N,z]=ee.useState(!1),[L,B]=ee.useState(!1),[C,Kt]=ee.useState([]),[En,te]=ee.useState(""),[be,Ve]=ee.useState(""),[yt,zt]=ee.useState(""),[j,re]=ee.useState([]),[ye,Se]=ee.useState(null),[je,it]=ee.useState([]),[ct,un]=ee.useState(0),[We,bn]=ee.useState(null),[Ji,js]=ee.useState(null),[Qn,Ln]=ee.useState(!1),[Ws,Ui]=ee.useState(null),[es,Ni]=ee.useState(null),[Wt,Jt]=ee.useState(!1),[_i,qa]=ee.useState(null),[Ys,Nn]=ee.useState(!1),[ts,Xs]=ee.useState(!1),[ns,is]=ee.useState(!1),[ss,Zs]=ee.useState(!1),[qi,Js]=ee.useState(!1),[Di,fn]=ee.useState(!1),[ti,on]=ee.useState(!1),[Ps,Ts]=ee.useState(null),[In,Wn]=ee.useState(null),[Ss,Yt]=ee.useState(!1),[bi,Dn]=ee.useState("main"),[vt,Ha]=ee.useState(()=>{const M=localStorage.getItem("hk_music_enabled");return M!==null?M==="true":!0}),[er,Hi]=ee.useState(()=>{const M=localStorage.getItem("hk_music_volume");return M!==null?parseInt(M):10}),[rs,Fa]=ee.useState(()=>{const M=localStorage.getItem("hk_sound_volume");return M!==null?parseInt(M):10}),U=ee.useRef(null),ne=ee.useRef(new Map),ve=ee.useRef(Date.now()),we=ee.useRef(null),Fe=ee.useCallback(async(M,q=null,X=3,me=1e3)=>{const W=q||xM(),E=Date.now();ne.current.set(W,{startTime:E,attempts:0});for(let se=1;se<=X;se++){ne.current.get(W).attempts=se;try{await M();const Y=Date.now()-E;return ve.current=Date.now(),ne.current.delete(W),ce.log(` [RETRY] Operation erfolgreich (${W}):`,{totalAttempts:se,totalDuration:Y+"ms",operationId:W}),!0}catch(Y){if(ce.warn(` [RETRY] Versuch ${se}/${X} fehlgeschlagen (${W}):`,{error:Y,code:Y?.code,message:Y?.message,stack:Y?.stack,serverResponse:Y?.serverResponse,operationId:W,attempt:se,maxRetries:X,roomId:O,hasDb:!!s}),Y?.code==="permission-denied"&&O)try{const ke=await Ri(Ue(s,"lobbies",O));if(!ke.exists())return ce.warn(` [RETRY] Lobby existiert nicht mehr (${W})`),ne.current.delete(W),!1;const Ce=ke.data();if(Ce?.status==="deleted")return ce.warn(` [RETRY] Lobby wurde gelscht (${W})`),ne.current.delete(W),!1;ce.log(" [RETRY] Lobby existiert noch:",{status:Ce?.status,roundId:Ce?.roundId,host:Ce?.host})}catch{}if((Y?.code==="permission-denied"||Y?.code==="unavailable"||Y?.code==="deadline-exceeded"||Y?.code==="failed-precondition"||Y?.message?.includes("network")||Y?.message?.includes("blocked")||Y?.message?.includes("CORS")||Y?.message?.includes("Failed to fetch")||Y?.message?.includes("failed-precondition"))&&se<X){const ke=me*se;ce.log(` [RETRY] Warte ${ke}ms vor nchstem Versuch (${W}):`,{attempt:se,maxRetries:X,waitTime:ke,errorCode:Y?.code,errorMessage:Y?.message}),await new Promise(Ce=>setTimeout(Ce,ke))}else{if(se===X)return ce.error(` [RETRY] Alle Versuche fehlgeschlagen (${W}):`,{error:Y,code:Y?.code,message:Y?.message,stack:Y?.stack,serverResponse:Y?.serverResponse,operationId:W,totalAttempts:se,roomId:O,timestamp:new Date().toISOString()}),ne.current.delete(W),!1;throw ce.error(` [RETRY] Nicht-retrybarer Fehler (${W}):`,{error:Y,code:Y?.code,message:Y?.message,operationId:W,attempt:se}),ne.current.delete(W),Y}}}return ne.current.delete(W),!1},[]),Bt=ee.useCallback(async()=>{if(!(!s||!O||!I))try{const M=await Ri(Ue(s,"lobbies",O));if(!M.exists()){ce.log(" [RECOVERY] Lobby existiert nicht mehr");return}const q=M.data(),X=q.status,me=q.roundId;if(ce.log(" [RECOVERY] Firebase-Daten geladen:",{status:X,roundId:me,localStatus:I.status,localRoundId:I.roundId}),Ae(q),ve.current=Date.now(),X==="result"&&de&&q.host===m){const W=q.config?.maxTemp||100,E=q.eliminatedPlayers||[],se=Object.keys(q.players||{}).filter(De=>(q.players?.[De]?.temp||0)<W&&!E.includes(De)),Y=(q.ready||[]).filter(De=>(q.players?.[De]?.temp||0)<W).length,Ie=q.roundRecapShown??!1,ke=q.attackResults&&Object.keys(q.attackResults).length>0,Ce=q.popupConfirmed||{},Ee=!ke||se.every(De=>q.attackResults?.[De]?Ce[De]===!0:!0);if(Y>=se.length&&se.length>0&&Ie&&Ee&&!ne.current.has("nextRound")){ce.log(" [RECOVERY] Spiel hngt - alle bereit, aber keine nchste Runde. Starte Recovery...");try{const De=`nextRound_recovery_${Date.now()}`;ne.current.set(De,{startTime:Date.now(),attempts:0});const ut=q.hotseat||"",Pe=typeof ut=="string"?ut:ut?.name||String(ut||"");let ze=se.indexOf(Pe);ze===-1&&(ze=0),ze=(ze+1)%se.length;const wt=se[ze],Dt=q.usedQuestions||[],Ye=q.config?.categories||Object.keys(mi),rt=_c(Ye);let fe=Dt;Dt.length>0&&typeof Dt[0]=="number"&&(fe=Dt.map(Xe=>rt[Xe]?.id).filter(Boolean));const gn=rt.filter(Xe=>Xe.id&&!fe.includes(Xe.id)),pt=gn[Math.floor(Math.random()*gn.length)]||rt[0],_t=(q.roundId??0)+1,Be={status:"game",hotseat:wt,currentQ:pt,roundId:_t,lastQuestionCategory:pt.category,roundRecapShown:!1,votes:fi(),ready:[],lobbyReady:{},pendingAttacks:{},attackDecisions:{},attackResults:{},popupConfirmed:{},countdownEnds:fi()};pt.id&&!fe.includes(pt.id)&&(Be.usedQuestions=[...fe,pt.id]),await Fe(async()=>{await ht(Ue(s,"lobbies",O),Be)},De,3,1e3)?(ne.current.delete(De),ce.log(" [RECOVERY] Nchste Runde erfolgreich gestartet")):ce.error(" [RECOVERY] Nchste Runde fehlgeschlagen")}catch(De){ce.error(" [RECOVERY] Fehler beim Starten der nchsten Runde:",De)}}}if(X==="result"&&de&&q.host===m){const W=Object.keys(q.attackDecisions||{}).length>=Object.keys(q.players||{}).length,E=q.roundRecapShown??!1,se=q.votes?.[q.hotseat]?.choice!==void 0;if(W&&!E&&se&&!ne.current.has("executeAttacks")){ce.log(" [RECOVERY] executePendingAttacks fehlgeschlagen. Versuche erneut...");try{const Y=`executeAttacks_recovery_${q.roundId||Date.now()}`;ne.current.set(Y,{startTime:Date.now(),attempts:0});const Ie={roundRecapShown:!0};await Fe(async()=>{await ht(Ue(s,"lobbies",O),Ie)},Y,3,1e3)?(ne.current.delete(Y),ce.log(" [RECOVERY] roundRecapShown gesetzt - Spiel sollte weitergehen")):ce.error(" [RECOVERY] executePendingAttacks Recovery fehlgeschlagen")}catch(Y){ce.error(" [RECOVERY] Fehler bei executePendingAttacks Recovery:",Y)}}}}catch{}},[s,O,I,de,m]);ee.useEffect(()=>{if(!s||!O||!I){we.current&&(clearInterval(we.current),we.current=null);return}return we.current=setInterval(()=>{const M=Date.now()-ve.current,q=ne.current.size>0;if(M>1e4&&q&&Ri(Ue(s,"lobbies",O)).then(()=>{Bt()}).catch(X=>{}),I.status==="result"&&de){const X=I.config?.maxTemp||100,me=I.eliminatedPlayers||[],W=Object.keys(I.players||{}).filter(Y=>(I.players?.[Y]?.temp||0)<X&&!me.includes(Y)),E=(I.ready||[]).filter(Y=>(I.players?.[Y]?.temp||0)<X).length,se=I.roundRecapShown??!1;E>=W.length&&W.length>0&&se&&M>15e3&&Bt()}},5e3),()=>{we.current&&(clearInterval(we.current),we.current=null)}},[s,O,I,de,Bt]);const Xt=ee.useCallback((M,q=.5)=>{NN(M,q*rs/10)},[rs]);ee.useEffect(()=>{if(!U.current){const q=DN();q&&(q.loop=!0,U.current=q)}const M=U.current;M&&(M.volume=er/10,vt?M.play().catch(q=>{}):M.pause())},[vt,er]),ee.useEffect(()=>{const M=()=>{vt&&U.current&&U.current.play().catch(()=>{})};if(vt){const q=["click","touchstart","keydown"];return q.forEach(X=>{document.addEventListener(X,M,{once:!0})}),()=>{q.forEach(X=>{document.removeEventListener(X,M)})}}},[vt]);const Mi=ee.useCallback(()=>{const M=!vt;Ha(M),localStorage.setItem("hk_music_enabled",String(M))},[vt]),mn=ee.useCallback(M=>{Hi(M),localStorage.setItem("hk_music_volume",String(M)),U.current&&(U.current.volume=M/10)},[]),Vn=ee.useCallback(M=>{Fa(M),localStorage.setItem("hk_sound_volume",String(M))},[]);ee.useEffect(()=>{const M=tg(OM),q=mS(M),X=$0(M);n(M),l(q),cR(X,me=>{me?ce.log(" [AUTH] Anonyme Authentifizierung erfolgreich:",me.uid):L0(X).then(W=>{ce.log(" [AUTH] Automatische anonyme Anmeldung erfolgreich:",W.user.uid)}).catch(W=>{})})},[]),ee.useEffect(()=>{if(!s||!O)return;D.current=[];const M=kS(Ue(s,"lobbies",O),W=>{if(!O)return;if(lt("online"),ve.current=Date.now(),!W.exists()){sessionStorage.removeItem("hk_room"),pe(""),Ae(null),f("start"),R.current=null;return}const E=W.data();if(E.status==="deleted"){sessionStorage.removeItem("hk_room"),pe(""),Ae(null),f("start"),R.current=null,alert("Die Lobby wurde vom Host gelscht.");return}if(!O)return;const se=E.roundId??0,Y=R.current;if(Y!=null&&se<Y){(E.status!==I?.status||se!==I?.roundId)&&ce.warn(" [FIREBASE] Update mit niedrigerer roundId ignoriert:",{lastRoundId:Y,currentRoundId:se,status:E.status,oldStatus:I?.status});return}se>(Y||0)&&(R.current=se),W.metadata.hasPendingWrites===!1&&E?.host===m&&(jt.current=Date.now());const Ie=I?.status,ke=E.status,Ce=I?.roundId,Ee=E.roundId,De=I?.hotseat,ut=E.hotseat,Pe=Ie!==ke,ze=Ce!==Ee,wt=De!==ut,Dt=I?.votes||{},Ye=E.votes||{},rt=Object.keys(Dt),fe=Object.keys(Ye);(rt.length!==fe.length||rt.some(Be=>Dt[Be]?.choice!==Ye[Be]?.choice))&&ce.log(" [VOTES] Votes gendert:",{roundId:E.roundId,oldVotes:rt,newVotes:fe});const pt=E.host===m;if(he(pt),Ce!==Ee){if(Ce!=null&&Ee<Ce){ce.error(" [ROUND] KRITISCH: roundId geht zurck!",{oldRoundId:Ce,newRoundId:Ee,status:E.status,roomId:O});return}We&&bn(null)}let _t=!1;if(!I)_t=!0;else{_t=["status","roundId","hotseat","roundRecapShown"].some(at=>I[at]!==E[at]);const tt=I.lobbyReady||{},Xe=E.lobbyReady||{},Zt=Object.keys(tt),Ot=Object.keys(Xe);if(Zt.length!==Ot.length)ce.log(" [LOBBY READY] Anzahl Keys gendert:",{oldCount:Zt.length,newCount:Ot.length,oldKeys:Zt,newKeys:Ot}),_t=!0;else{const at=new Set([...Zt,...Ot]);let qt=!1;for(const $t of at){const Tt=tt[$t],ge=Xe[$t];Tt===!0!==(ge===!0)&&(qt=!0)}qt&&(_t=!0)}if(!_t){const at=I.votes||{},qt=E.votes||{},$t=Object.keys(at),Tt=Object.keys(qt);($t.length!==Tt.length||$t.some(ge=>at[ge]?.choice!==qt[ge]?.choice))&&(_t=!0)}if(!_t){const at=I.players||{},qt=E.players||{},$t=Object.keys(at),Tt=Object.keys(qt);($t.length!==Tt.length||$t.some(ge=>{const Ge=at[ge],He=qt[ge];return Ge?.temp!==He?.temp||Ge?.emoji!==He?.emoji}))&&(_t=!0)}if(!_t){const at=I.ready||[],qt=E.ready||[];(at.length!==qt.length||at.some(($t,Tt)=>$t!==qt[Tt]))&&(_t=!0)}}if(_t||!I){const Be={...E};E.lobbyReady&&(Be.lobbyReady={...E.lobbyReady}),Ae(Be),(Pe||ze||wt)&&ce.log(" [GLOBAL DATA] globalData aktualisiert:",{statusChanged:Pe,roundIdChanged:ze,hotseatChanged:wt,status:Be.status,roundId:Be.roundId,hotseat:Be.hotseat,playerCount:Object.keys(Be.players||{}).length,voteCount:Object.keys(Be.votes||{}).length,readyCount:Array.isArray(Be.ready)?Be.ready.length:0})}if(E.status==="lobby")c!=="lobby"&&f("lobby");else if(E.status==="game"){c!=="game"?(ce.log(" [SCREEN] Wechsel zu Game:",{from:c,to:"game",roundId:E.roundId,hotseat:E.hotseat,timestamp:new Date().toISOString(),hasPendingWrites:W.metadata.hasPendingWrites,fromCache:W.metadata.fromCache}),f("game")):ce.log(" [SCREEN] Bereits auf Game-Screen, berspringe Wechsel:",{roundId:E.roundId,hotseat:E.hotseat});const Be=I&&I.status===E.status&&I.roundId===E.roundId&&I.hotseat===E.hotseat&&DM({...I,votes:{}},{...E,votes:{}})&&I.votes?.[m]?.choice===E.votes?.[m]?.choice;Y===null&&E.roundId!==void 0&&(ce.log(" [GAME SCREEN] Initialisiere lastRoundId beim ersten Mal:",E.roundId),Ui(E.roundId));const tt=Y??I?.roundId,Xe=tt!=null&&E.roundId!==tt;if(Xe){ce.log(" [GAME SCREEN] Neue Runde erkannt - RESET Selection:",{oldRoundId:tt,newRoundId:E.roundId,oldSelection:We,lastRoundId:Y,globalDataRoundId:I?.roundId}),bn(null),Ui(E.roundId),Ln(!1),Nn(!1),Xs(!1),is(!1);return}const Zt=!I&&Y===E.roundId&&!Xe,Ot=E.votes?.[m]?.choice!==void 0,at=E.votes?.[m]?.roundId,qt=at!==void 0&&at===E.roundId,$t=Ot&&qt&&!We&&!Xe;if(Be||Zt)$t?(ce.log(" [GAME SCREEN] Restore Selection aus Vote:",{oldSelection:We,newSelection:E.votes[m].choice,voteRoundId:at,currentRoundId:E.roundId,isNewRound:Xe}),bn(E.votes[m].choice)):Ot&&!qt&&We?(ce.warn(" [GAME SCREEN] Vote aus alter Runde - RESET Selection:",{oldSelection:We,voteRoundId:at,currentRoundId:E.roundId}),bn(null)):Xe&&We&&(ce.warn(" [GAME SCREEN] Neue Runde erkannt, aber Selection noch gesetzt - RESET:",{oldSelection:We,currentRoundId:E.roundId,oldRoundId:tt}),bn(null));else if(ce.log(" [GAME SCREEN] Game-Screen Update:",{roundId:E.roundId,oldRoundId:I?.roundId,hotseat:E.hotseat,myVote:E.votes?.[m],allVotes:Object.keys(E.votes||{}),mySelection:We,localActionDone:Qn}),!Xe&&(!I&&E.roundId!==Y&&(ce.log(" [GAME SCREEN] Initialisiere lastRoundId:",E.roundId),Ui(E.roundId)),Y===E.roundId&&E.votes?.[m])){const ge=E.votes[m]?.roundId;ge!==void 0&&ge===E.roundId?We?We!==E.votes[m].choice&&(ce.log(" [GAME SCREEN] Synchronisiere Selection mit Vote (gleiche Runde):",{oldSelection:We,newSelection:E.votes[m].choice,voteRoundId:ge,currentRoundId:E.roundId,reason:"Selection stimmt nicht mit Vote berein"}),bn(E.votes[m].choice)):(ce.log(" [GAME SCREEN] Restore Selection aus Vote (gleiche Runde):",{oldSelection:We,newSelection:E.votes[m].choice,voteRoundId:ge,currentRoundId:E.roundId,reason:"Selection fehlt, Vote existiert"}),bn(E.votes[m].choice)):We&&(ce.warn(" [GAME SCREEN] Vote aus alter Runde - RESET Selection:",{mySelection:We,voteRoundId:ge,currentRoundId:E.roundId}),bn(null))}const Tt=E.roundId||0;if(E.hotseat&&E.players&&Tt!==ln.current&&!ss){ln.current=Tt;const ge=m===E.hotseat;ce.log(" [HOTSEAT MODAL] Neue Runde erkannt:",{roundId:Tt,hotseat:E.hotseat,isMeHotseat:ge,myName:m,players:Object.keys(E.players||{}),showHotseatModal:ss}),setTimeout(()=>{ss||Qa(E.hotseat,E.players)},100)}else E.hotseat&&Tt===ln.current?ce.log(" [HOTSEAT MODAL] Bereits fr diese Runde angezeigt, berspringe:",{roundId:Tt,hotseatModalShownRef:ln.current,showHotseatModal:ss}):ss&&Tt!==ln.current&&(Zs(!1),ln.current=null)}else if(E.status==="result"){c!=="result"&&(ce.log(" [SCREEN] Wechsel zu Result:",{from:c,to:"result",roundId:E.roundId}),f("result"));const Be=!0,tt=m===E.hotseat,Xe=E.votes?.[m],Zt=typeof E.hotseat=="string"?E.hotseat:E.hotseat?.name||String(E.hotseat||""),Ot=E.votes?.[Zt],at=Ot?.roundId,qt=E.roundId,Tt=at!==void 0&&at===qt?Ot?.choice:void 0,ge=Tt!=null,Ge=ge&&Xe&&String(Xe.choice)===String(Tt),He=ge&&Xe&&String(Xe.choice)!==String(Tt),Me=E.attackDecisions||{},dt=E.roundRecapShown??!1;if(ce.log(" [RESULT] Result-Screen Analyse:",{roundId:E.roundId,isHotseat:tt,isPartyMode:Be,myVote:Xe?.choice,hotseat:E.hotseat,hotseatVote:Ot,truth:Tt,hasTruth:ge,guessedCorrectly:Ge,guessedWrong:He,attackDecisions:Me,myAttackDecision:Me[m],roundRecapShown:dt,allVotes:Object.keys(E.votes||{}),localActionDone:Qn,showRewardChoice:Ys,showAttackSelection:ts,showJokerShop:ns,pendingAttacks:E.pendingAttacks||{},attackResults:E.attackResults?Object.keys(E.attackResults):[]}),!ge&&!tt)ce.warn(" [RESULT] Hotseat hat noch keine Antwort abgegeben, warte...",{hotseat:E.hotseat,hotseatVote:Ot,allVotes:Object.keys(E.votes||{}),votes:E.votes});else if(tt&&!Me[m]&&s&&O)Ln(!0),ht(Ue(s,"lobbies",O),{[`attackDecisions.${m}`]:!0}).catch(ce.error);else if(!(!tt&&He&&!Me[m]&&!Be)){if(!tt&&He&&!Me[m]&&Be&&s&&O){const Ke=`${E.roundId}-${m}`;Rs.current!==Ke&&(Rs.current=Ke,Is().catch(ce.error),Ln(!0))}}const dn=Y!==E.roundId;dn&&(Nn(!1),Xs(!1),is(!1),Rs.current=null),!tt&&Ge&&!Me[m]&&!Ys&&!ts&&!ns&&(ce.log(" [ATTACK] Zeige Angriffsauswahl",{roundId:E.roundId,lastRoundId:Y,isNewRound:dn,attackDecisions:Me[m],isPartyMode:Be}),Nn(!0));const At=E.popupConfirmed?.[m]===!0,ft=E.config?.maxTemp||100,Yn=E.eliminatedPlayers||[],Xn=Object.keys(E.players||{}).filter(Ke=>(E.players?.[Ke]?.temp||0)<ft&&!Yn.includes(Ke)),ni=Xn.length,ii=Object.keys(Me).filter(Ke=>Me[Ke]===!0),Tn=E.hotseat&&E.votes?.[E.hotseat]?.choice!==void 0,Li=ii.length+(Tn&&!Me[E.hotseat]?1:0);if(E.attackResults&&E.attackResults[m]!==void 0&&dt&&!At){const Ke=E.attackResults[m],Pt=MM(E.roundId,Ke,dt);ce.log(" [ATTACK MODAL] Attack-Result gefunden:",{roundId:E.roundId,result:Ke,resultKey:Pt,lastAttackResultKey:es,attackModalShownRef:hn.current,isOpeningAttackModal:Wt,showAttackModal:qi,roundRecapShown:dt,popupConfirmed:At,totalDmg:Ke.totalDmg,attackDetails:Ke.attackDetails});const Pn=Pt!==hn.current&&!Wt&&!qi&&!At;if(Pn){ce.log(" [ATTACK MODAL] Modal wird angezeigt fr Runde:",E.roundId,"| Schaden:",Ke.totalDmg,"C"),hn.current=Pt,Ni(Pt),Jt(!0),Wn(Ke);const Si=setTimeout(()=>{!qi&&hn.current===Pt&&!At?(Js(!0),Jt(!1)):(ce.log(" [ATTACK MODAL] Modal wird bereits angezeigt, Ref gendert oder Popup besttigt, berspringe setShowAttackModal:",{showAttackModal:qi,refMatches:hn.current===Pt,popupConfirmed:At}),Jt(!1))},300);D.current.push(Si)}else ce.log(" [ATTACK MODAL] Modal wird NICHT angezeigt:",{resultKeyMatches:Pt===hn.current,isOpening:Wt,alreadyShown:qi,popupConfirmed:At,resultKey:Pt,attackModalShownRef:hn.current,shouldShow:Pn})}if(E.eliminationInfo&&E.eliminationInfo.player&&!ti){const Ke=E.eliminationInfo.player,Pt=E.config?.maxTemp||100,Pn=E.players?.[Ke]?.temp||0,Si=`${E.roundId}-${Ke}`;Pn>=Pt&&_i!==Si&&(Ts(Ke),on(!0),qa(Si))}else ce.log(" [ATTACK MODAL] Kein Modal:",{hasAttackResults:!!E.attackResults,hasMyResult:E.attackResults?.[m]!==void 0,roundRecapShown:dt,popupConfirmed:At,roundId:E.roundId});const Gi=Li>=ni,Cs=!dt,sr=E.votes||{},Vi=Xn.filter(Ke=>{const Pt=sr[Ke];if(!Pt||Pt.choice===void 0)return!1;const Pn=Pt.roundId;return Pn!==void 0&&Pn===E.roundId}).length,Mt=Vi>=ni&&ni>0;ce.log(" [EXECUTE ATTACKS] Prfung:",{roundId:E.roundId,playerCount:ni,playersWithDecision:ii.length,effectiveDecidedCount:Li,allDecided:Gi,allVoted:Mt,voteCount:Vi,totalVotesInFirebase:Object.keys(sr).length,recapNotShown:Cs,hasTruth:ge,hotseat:E.hotseat,hotseatVote:Ot,isHost:de,isMeHost:E.host===m,attackDecisions:Me,hotseatShouldBeDecided:Tn,hotseatInDecisions:Me[E.hotseat]});const ji=E.lastHostActivity,li=ji&&ji.toMillis?Date.now()-ji.toMillis()>Ai.HOST_INACTIVE_THRESHOLD:!0,jn=E.host,u=!li&&jn===m,g=E.eliminatedPlayers||[],v=Object.keys(E.players||{}).filter(Ke=>(E.players?.[Ke]?.temp||0)<(E.config?.maxTemp||100)&&!g.includes(Ke)).sort(),F=v.indexOf(m)===0&&v.length>0&&v[0]!==jn,Q=Gi||Mt,_e=Cs,Oe=ge,Ht=u||li&&F,bt=Q&&_e&&Oe&&Ht;if(!bt&&(Gi||Mt)&&ce.log(" [EXECUTE ATTACKS] Prfung fehlgeschlagen - Details:",{roundId:E.roundId,condition1_allDecidedOrVoted:Q,allDecided:Gi,allVoted:Mt,condition2_recapNotShown:_e,roundRecapShown:E.roundRecapShown,condition3_hasTruth:Oe,hotseatVote:E.votes?.[E.hotseat],condition4_hostActive:Ht,isHostActive:u,hostInactive:li,isFirstBackupHost:F,myName:m,host:E.host}),bt){const Ke=`executeAttacks_${E.roundId}`;if(!qe.current.has(Ke)){qe.current.add(Ke);const Pt=setTimeout(()=>{Tr(E).catch(Pn=>{}),qe.current.delete(Ke)},500);D.current.push(Pt)}}else if(!(Gi&&Cs&&!ge&&de&&E.host===m)){if(Gi&&Cs&&ge&&!bt&&(ce.warn(" [EXECUTE ATTACKS] FALLBACK: Alle Bedingungen erfllt, aber canExecuteAttacks ist false. Versuche trotzdem...",{condition1:Q,condition2:_e,condition3:Oe,condition4:Ht,isHost:de,myName:m,host:E.host}),F||v[0]===m)){const Ke=`executeAttacks_fallback_${E.roundId}`;if(!qe.current.has(Ke)){qe.current.add(Ke);const Pt=setTimeout(()=>{Tr(E).catch(Pn=>{}),qe.current.delete(Ke)},1e3);D.current.push(Pt)}}}}else E.status==="winner"&&c!=="winner"&&f("winner");if(E.status==="game"){const Be=E.lastHostActivity,tt=Be&&Be.toMillis?Date.now()-Be.toMillis()>Ai.HOST_INACTIVE_THRESHOLD:!1,Xe=E.host,Zt=E.config?.maxTemp||Ai.MAX_TEMP_DEFAULT,Ot=E.eliminatedPlayers||[],at=il(E.players,Zt,Ot),$t=at.indexOf(m)===0&&at.length>0&&at[0]!==Xe,Tt=!tt&&Xe===m,ge=il(E.players,Zt,Ot),Ge=ge.length,He=ge.filter(Xn=>{const ni=E.votes?.[Xn];if(!ni||ni.choice===void 0)return!1;const ii=ni?.roundId;return ii!==void 0&&ii===E.roundId}).length,Me=NM(E.hotseat),dt=Me?E.votes?.[Me]:null,dn=dt?.roundId;!(Me&&ge.includes(Me)&&dt?.choice!==void 0&&dn!==void 0&&dn===E.roundId)&&Me&&ce.warn(" [AUTO-ADVANCE] Hotseat hat noch nicht (gltig) abgestimmt:",{hotseat:Me,hasVote:!!dt,choice:dt?.choice,voteRoundId:dn,currentRoundId:E.roundId,isActive:ge.includes(Me)});const ft=He>=Ge&&Ge>0;if(E.votes&&(ft||Tt||tt&&$t||Xe===m&&!Be)){const Xn=E.config?.maxTemp||Ai.MAX_TEMP_DEFAULT;if(il(E.players,Xn).length,ft){const Tn=`autoAdvance_${E.roundId}`;if(!qe.current.has(Tn)){qe.current.add(Tn);const Li=setTimeout(async()=>{try{await Fe(()=>ht(Ue(s,"lobbies",O),{status:"result",lastHostActivity:zi()}),`autoAdvance_${E.roundId}`,5,1e3)}catch{lt("slow"),qe.current.delete(Tn)}},500);D.current.push(Li)}}}}if(E.status==="result"){let Be=E.roundRecapShown??!1;const tt=E.lastHostActivity,Xe=tt&&tt.toMillis?Date.now()-tt.toMillis()>Ai.HOST_INACTIVE_THRESHOLD:!0,Zt=E.host,Ot=E.config?.maxTemp||Ai.MAX_TEMP_DEFAULT,at=il(E.players,Ot),$t=at.indexOf(m)===0&&at.length>0&&at[0]!==Zt,Tt=!Xe&&Zt===m,ge=E.config?.maxTemp||100,Ge=E.eliminatedPlayers||[],He=Object.keys(E.players||{}).filter(Mt=>(E.players?.[Mt]?.temp||0)<ge&&!Ge.includes(Mt)),Me=He.length,dt=He.filter(Mt=>{const ji=E.votes?.[Mt];if(!ji||ji.choice===void 0)return!1;const li=ji.roundId;return li!==void 0&&li===E.roundId}).length,dn=E.ready||[],At=He.filter(Mt=>dn.includes(Mt)).length,ft=At>=Me&&Me>0,Yn=dt>=Me&&Me>0,Xn=E.popupConfirmed||{},ii=!(E.attackResults&&Object.keys(E.attackResults).length>0)||He.every(Mt=>E.attackResults?.[Mt]?Xn[Mt]===!0:!0),Tn=E.attackDecisions||{},Li=Object.keys(Tn).filter(Mt=>Tn[Mt]===!0),Gi=E.hotseat&&E.votes?.[E.hotseat]?.choice!==void 0,Cs=Li.length+(Gi&&!Tn[E.hotseat]?1:0),sr=Cs>=Me&&Me>0;E.status==="result"&&!Be&&ft&&(Yn||sr)&&ii&&(Tt||Xe&&$t)&&s&&O&&(ce.log(" [AUTO-NEXT] FALLBACK: Setze roundRecapShown auf true, weil alle bereit sind:",{roundId:E.roundId,allReady:ft,allVoted:Yn,allDecided:sr,allPopupConfirmed:ii,readyCount:At,playerCount:Me,effectiveDecidedCount:Cs}),ht(Ue(s,"lobbies",O),{roundRecapShown:!0}).catch(Mt=>{}),Be=!0);const Vi=E.status==="result"&&Be&&(Tt||Xe&&$t||ft&&Yn&&ii&&at.includes(m));if(!Vi&&E.status==="result"&&ce.log(" [AUTO-NEXT] canAutoNext ist false - Details:",{roundId:E.roundId,status:E.status,roundRecapShown:E.roundRecapShown,roundRecapShownForNext:Be,allReadyCheck:ft,allVotedCheck:Yn,allPopupConfirmedCheck:ii,isHostActiveNext:Tt,hostInactiveNext:Xe,isFirstBackupHostNext:$t,myName:m,host:E.host}),Vi){const Mt=E.config?.maxTemp||100,ji=E.eliminatedPlayers||[],li=Object.keys(E.players||{}).filter(Oe=>(E.players?.[Oe]?.temp||0)<Mt&&!ji.includes(Oe)),jn=li.length,u=li.filter(Oe=>{const Ht=E.votes?.[Oe];if(!Ht||Ht.choice===void 0)return!1;const bt=Ht.roundId;return bt!==void 0&&bt===E.roundId}).length,g=E.popupConfirmed||{};!(E.attackResults&&Object.keys(E.attackResults).length>0)||li.every(Oe=>E.attackResults?.[Oe]?g[Oe]===!0:!0);const w=E.ready||[],F=li.filter(Oe=>w.includes(Oe)).length,Q=F>=jn&&jn>0,_e=u>=jn&&jn>0&&Q;if(!_e&&Vi&&ce.log(" [AUTO-NEXT] shouldNext ist false - Details:",{roundId:E.roundId,voteCount:u,playerCount:jn,readyCount:F,allReady:Q,hasEnoughVotes:u>=jn,hasEnoughPlayers:jn>0,readyList:w,activePlayers:li}),_e){const Oe=`autoNext_${E.roundId}`;if(!qe.current.has(Oe)){qe.current.add(Oe);const Ht=setTimeout(async()=>{try{await Fe(()=>oi(),`autoNext_${E.roundId}`,5,2e3)}catch{lt("slow")}qe.current.delete(Oe)},1e3);D.current.push(Ht)}}}}},{includeMetadataChanges:!0}),q=setInterval(()=>{const W=Date.now()-ve.current;W>Ai.CONNECTION_OFFLINE_THRESHOLD?lt("offline"):W>Ai.CONNECTION_SLOW_THRESHOLD?lt("slow"):lt("online")},Ai.CONNECTION_CHECK_INTERVAL),X=setInterval(async()=>{if(!(!s||!O||!m))try{const W=await Ri(Ue(s,"lobbies",O));if(!W.exists()){ce.debug(" [PRESENCE] Lobby existiert nicht mehr, stoppe Heartbeat");return}if(W.data()?.status==="deleted"){ce.debug(" [PRESENCE] Lobby wurde gelscht, stoppe Heartbeat");return}await ht(Ue(s,"lobbies",O),{[`players.${m}.lastSeen`]:zi()})}catch(W){if(W?.code==="permission-denied"||W?.code==="not-found")return}},5e3),me=setInterval(async()=>{if(!(!de||!s||!O||!I?.players))try{const W=Date.now(),E=15e3,se=[];for(const[Y,Ie]of Object.entries(I.players)){const ke=Ie?.lastSeen;if(ke&&ke.toMillis){const Ce=W-ke.toMillis();Ce>E&&(se.push(Y),ce.warn(` [PRESENCE] Spieler ${Y} ist inaktiv (${Math.round(Ce/1e3)}s)`))}}se.length>0&&ce.warn(" [PRESENCE] Inaktive Spieler erkannt:",se)}catch{}},1e4);return()=>{M(),clearInterval(q),clearInterval(X),clearInterval(me),D.current.forEach(W=>clearTimeout(W)),D.current=[],qe.current.clear()}},[s,O,m,de]);const vi=ee.useRef(null),[Es,_r]=ee.useState(Math.floor(jr.length/2)),zs=ee.useRef(!1),as=ee.useRef({x:0,y:0,time:0});ee.useEffect(()=>{const M=Math.floor(jr.length/2),q=jr[M];if(c==="start")(A!==q||Es!==M)&&(V(q),_r(M),sessionStorage.setItem("hk_emoji",q));else if(!A||!jr.includes(A))V(q),_r(M),sessionStorage.setItem("hk_emoji",q);else{const X=jr.indexOf(A);X>=0?_r(X):(_r(M),V(q))}},[c]),ee.useEffect(()=>{if(vi.current&&Es>=0&&c==="start"){const M=vi.current,X=M.querySelectorAll(".emoji-card")[Es];X&&(zs.current=!0,setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{const me=M.clientWidth,W=X.offsetWidth||80,se=X.offsetLeft-me/2+W/2,Y=Math.max(0,Math.min(se,M.scrollWidth-M.clientWidth));M.scrollLeft=Y,setTimeout(()=>{Math.abs(M.scrollLeft-Y)>10&&(M.scrollLeft=Y),setTimeout(()=>{zs.current=!1},100)},50)})})},150))}},[Es,c]);const os=M=>{const q=jr.indexOf(M);q>=0&&(_r(q),V(M),sessionStorage.setItem("hk_emoji",M),vi.current&&vi.current.querySelectorAll(".emoji-card").forEach((me,W)=>{W===q?me.classList.add("selected"):me.classList.remove("selected")}))},Qr=ee.useCallback(M=>{const q=M.target.value.trim().substring(0,20);b(q),sessionStorage.setItem("hk_name",q)},[]),xi=ee.useCallback(M=>{Kt(M==="all"?q=>q.length===Object.keys(mi).length?[]:Object.keys(mi):q=>q.includes(M)?q.filter(X=>X!==M):[...q,M])},[]);ee.useCallback(M=>{const q=[...M];for(let X=q.length-1;X>0;X--){const me=Math.floor(Math.random()*(X+1));[q[X],q[me]]=[q[me],q[X]]}return q},[]);const Fi=ee.useCallback(()=>{if(je.length===0)return;const M=ct+1;M>=je.length?(un(0),Se(je[0])):(un(M),Se(je[M]))},[je,ct]),Oi=ee.useCallback(()=>{if(ct===0)return;const M=ct-1;un(M),Se(je[M])},[je,ct]),ws=async()=>{if(!m.trim()){alert("Bitte gib deinen Namen ein!");return}if(C.length===0){alert("Bitte whle mindestens eine Kategorie aus!");return}if(!s){alert("Fehler: Firebase ist noch nicht initialisiert. Bitte warte einen Moment und versuche es erneut.");return}const M=Ai.ATTACK_DMG_PARTY,q=1.5,X=Ai.MAX_TEMP_DEFAULT,me=Math.random().toString(36).substring(2,6).toUpperCase();try{const E=_c(C)[0]||{q:"Willkommen zu Hitzkopf!",a:"A",b:"B"},se=E.category||null;ce.log(" [CREATE GAME] Versuche Lobby zu erstellen:",{code:me,host:m,categories:C.length});const Y={host:m,hostName:m,status:"lobby",createdAt:zi(),players:{[m]:{temp:0,inventory:[],emoji:A,lastSeen:zi()}},config:{dmg:M,speed:q,startTemp:0,maxTemp:X,categories:C},votes:{},ready:[],log:[],hotseat:"",currentQ:E,roundId:0,lobbyReady:{}};se&&(Y.lastQuestionCategory=se),await CS(Ue(s,"lobbies",me),Y),pe(me),sessionStorage.setItem("hk_room",me),he(!0),f("lobby"),R.current=null,ce.log(" [CREATE GAME] Lobby erfolgreich erstellt:",me)}catch(W){ce.error(" [CREATE GAME] Fehler beim Erstellen der Lobby:",{error:W,code:W.code,message:W.message,stack:W.stack}),pe(""),sessionStorage.removeItem("hk_room"),he(!1),W.code==="permission-denied"?alert("Fehler: Keine Berechtigung zum Erstellen einer Lobby. Bitte berprfe deine Firebase-Berechtigungen."):W.code==="unavailable"?alert("Fehler: Firebase ist nicht verfgbar. Bitte berprfe deine Internetverbindung."):alert(`Fehler beim Erstellen des Spiels: ${W.message||"Unbekannter Fehler"}`)}},wn=async(M=null)=>{if(!m.trim()){alert("Bitte gib deinen Namen ein!");return}const q=(M||be).toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,6);if(!q||q.length<4){alert("Bitte whle einen Raum aus der Liste!");return}const X=Ue(s,"lobbies",q),me=await Ri(X);if(!me.exists()){alert("Lobby nicht gefunden!");return}const W=me.data();W.players&&W.players[m]&&alert("Du bist bereits in diesem Raum!"),pe(q),sessionStorage.setItem("hk_room",q),he(!1),R.current=null,await ht(X,{[`players.${m}`]:{temp:0,inventory:[],emoji:A},[`players.${m}.lastSeen`]:zi()})},Wr=async()=>{if(!s)return;const M=Km(s,"lobbies"),q=Qm(M,Wm("status","==","lobby")),X=await Ym(q),me=[];X.forEach(W=>{const E=W.data();if(E.hostName&&E.status==="lobby"){const se=E.players?.[E.hostName]?.emoji||"";me.push({id:W.id,hostName:E.hostName,hostEmoji:se,playerCount:Object.keys(E.players||{}).length})}}),re(me),X.forEach(W=>{const E=W.data();E.hostName==="Host"&&E.status==="lobby"&&(ce.log(' [CLEANUP] Lsche alten Raum von "Host":',W.id),pl(W.ref).catch(se=>{}))})},Ga=async M=>{Ve(M),await wn(M)},ls=async()=>{if(Xt("toggle",.4),!s||!O)return;const M=I?.config?.maxTemp||100;if((I?.players?.[m]?.temp||0)>=M){alert("Du bist ausgeschieden und kannst nicht mehr mitspielen!");return}const W=!!!I?.lobbyReady?.[m];I&&Ae({...I,lobbyReady:{...I.lobbyReady||{},[m]:W}}),await ht(Ue(s,"lobbies",O),{[`lobbyReady.${m}`]:W})},As=async()=>{if(!s||!O||!de)return;const M=I?.config?.maxTemp||100,q=Object.keys(I?.players||{}),X=q.filter(De=>(I?.players?.[De]?.temp||0)<M),me=I?.lobbyReady||{},W=X.filter(De=>me[De]).length;if(ce.log(" [START GAME] Prfung:",{allPlayers:q,activePlayers:X,readyCount:W,totalActivePlayers:X.length,lobbyReady:me}),W<X.length||X.length<2){ce.warn(" [START GAME] Nicht alle aktiven Spieler bereit:",W,"/",X.length),alert(`Alle aktiven Spieler mssen bereit sein! (${W}/${X.length})`);return}await Wa(I.players);const E=I?.usedQuestions||[],se=I?.config?.categories||Object.keys(mi),Y=_c(se);let Ie=E;E.length>0&&typeof E[0]=="number"&&(Ie=E.map(De=>Y[De]?.id).filter(Boolean));const ke=Y.filter(De=>De.id&&!Ie.includes(De.id)),Ce=ke[Math.floor(Math.random()*ke.length)]||Y[0],Ee=(I?.roundId??0)+1;ce.log(" [START GAME] Starte erste Runde:",{hotseat:X[0],question:Ce.q,roundId:Ee,questionId:Ce.id}),Xt("game_start",.7),await ht(Ue(s,"lobbies",O),{status:"game",hotseat:X[0],currentQ:Ce,votes:{},ready:[],roundId:Ee,lobbyReady:{},usedQuestions:Ce.id&&!Ie.includes(Ce.id)?[...Ie,Ce.id]:Ie,lastQuestionCategory:Ce.category,pendingAttacks:{},attackDecisions:{},attackResults:{},roundRecapShown:!1,popupConfirmed:{}})},Yr=ee.useCallback(M=>{if(I){const q=I.config?.maxTemp||100;if((I.players?.[m]?.temp||0)>=q){alert("Du bist ausgeschieden und kannst nicht mehr abstimmen!");return}}bn(M),Xt("click",.3)},[Xt,I,m]),Ka=ee.useCallback(async()=>{if(Qn)return;if(!s||!O){alert("Fehler: Datenbank-Verbindung fehlt!");return}const M=await Ri(Ue(s,"lobbies",O));if(!M.exists()){alert("Lobby existiert nicht mehr!");return}const q=M.data(),X=q?.config?.maxTemp||100;if((q?.players?.[m]?.temp||0)>=X){alert("Du bist ausgeschieden und kannst nicht mehr abstimmen!");return}const W=q?.votes?.[m],E=q?.roundId||0;ce.log(" [SUBMIT VOTE] Prfe bestehende Votes:",{existingVote:W,allVotes:Object.keys(q?.votes||{}),roundId:E,myName:m,mySelection:We});const se=W?.roundId;if(W&&se!==void 0&&se===E){alert("Du hast bereits abgestimmt!");return}if(!We)if(W?.choice)ce.log(" [SUBMIT VOTE] Restore mySelection aus existingVote:",W.choice),bn(W.choice),W.choice;else{alert("Bitte whle zuerst eine Antwort!");return}const Ie=We||W?.choice;if(!Ie){alert("Bitte whle zuerst eine Antwort!");return}const ke=`submitVote_${m}_${E}_${Date.now()}`;let Ce=!1;try{Ce=await Fe(async()=>{await e0(s,async Ee=>{const De=Ue(s,"lobbies",O),ut=await Ee.get(De);if(!ut.exists())throw new Error("Lobby existiert nicht mehr!");const Pe=ut.data(),ze=Pe?.roundId||0;if(ze!==E)throw ce.warn(" [SUBMIT VOTE] RoundId hat sich gendert whrend Transaction:",{expectedRoundId:E,actualRoundId:ze}),new Error("Runde hat sich gendert!");const wt=Pe?.votes?.[m],Dt=wt?.roundId;if(wt&&(Dt!==void 0&&Dt===ze||Dt===void 0&&ze===E))throw ce.warn(" [SUBMIT VOTE] Bereits in dieser Runde abgestimmt (Transaction):",{existingVote:wt,currentRoundIdInTransaction:ze,existingVoteRoundId:Dt,currentRoundId:E}),new Error("Du hast bereits abgestimmt!");Ee.update(De,{[`votes.${m}`]:{choice:String(Ie),strategy:Ji||"none",roundId:ze,timestamp:zi()}})})},ke,3,500)}catch(Ee){if(Ee?.code==="failed-precondition"||Ee?.message?.includes("failed-precondition"))try{const De=await Ri(Ue(s,"lobbies",O));if(!De.exists())throw new Error("Lobby existiert nicht mehr!");const ut=De.data(),Pe=ut?.roundId||0;if(Pe!==E)throw ce.warn(" [SUBMIT VOTE] RoundId hat sich gendert:",{expectedRoundId:E,actualRoundId:Pe}),new Error("Runde hat sich gendert!");const ze=ut?.votes?.[m],wt=ze?.roundId;if(ze&&(wt!==void 0&&wt===Pe||wt===void 0&&Pe===E))throw ce.warn(" [SUBMIT VOTE] Bereits in dieser Runde abgestimmt (Fallback):",{existingVote:ze,currentRoundIdInFallback:Pe}),new Error("Du hast bereits abgestimmt!");Ce=await Fe(async()=>{await ht(Ue(s,"lobbies",O),{[`votes.${m}`]:{choice:String(Ie),strategy:Ji||"none",roundId:Pe,timestamp:zi()}})},`${ke}_fallback`,3,500)}catch{Ce=!1}else Ce=!1}Ce?(Ln(!0),Xt("click",.3)):I?.votes?.[m]?.roundId===E?alert("Du hast bereits abgestimmt!"):alert("Fehler beim Absenden der Antwort! Bitte versuche es erneut.")},[Xt,I,m,We,Ji,s,O]),$a=async()=>{if(!s||!O)return;const M=Ue(s,"lobbies",O),X=(I?.ready||[]).includes(m);try{X?(await ht(M,{ready:yc(m)}),ce.log(" [SET READY] Nicht mehr bereit gesetzt")):(await ht(M,{ready:cl(m)}),ce.log(" [SET READY] Bereit gesetzt"))}catch{try{const W=await Ri(M);if(!W.exists()){ce.error(" [SET READY] Lobby existiert nicht mehr");return}const Y=(W.data()?.ready||[]).includes(m);Y!==X&&(Y?await ht(M,{ready:yc(m)}):await ht(M,{ready:cl(m)}),ce.log(" [SET READY] Retry erfolgreich"))}catch{}}},Xr=ee.useCallback(()=>{pe(""),Ae(null),f("start"),sessionStorage.removeItem("hk_room"),R.current=null},[]),br=ee.useMemo(()=>{if(!I?.players)return[];const M=I.host,q=Object.entries(I.players),X=q.find(([E])=>E===M),me=q.filter(([E])=>E!==M);return(X?[X,...me]:me).map(([E,se])=>({name:E,temp:se.temp||0,emoji:se.emoji||""}))},[I?.players,I?.host]),vn=ee.useCallback(()=>br,[br]),ln=ee.useRef(null),hn=ee.useRef(null),Rs=ee.useRef(null),Qa=(M,q)=>{if(M&&q){if(ss)return;Zs(!0)}},Ut=()=>{Zs(!1)},tr=async()=>{if(Js(!1),Jt(!1),Wn(null),O&&m&&s)try{await Fe(async()=>{const M=Ue(s,"lobbies",O);((await Ri(M)).data()?.popupConfirmed||{})[m]||(ce.log(" [ATTACK MODAL] Markiere Popup als besttigt fr",m),await ht(M,{[`popupConfirmed.${m}`]:!0}),ce.log(" [ATTACK MODAL] Popup erfolgreich als besttigt markiert"))},`confirmPopup_${m}`,3,500)}catch{}},Is=async()=>{if(!s||!O)return;const M=10,q=Ue(s,"lobbies",O),W={...(await Ri(q)).data()?.attackDecisions||{},[m]:!0};await ht(q,{[`players.${m}.temp`]:vm(M),log:cl(` ${m} hat falsch geraten und sich selbst aufgeheizt (+${M}C)`),attackDecisions:W}).then(()=>{if(I&&I.players&&I.players[m]){const E=I.players[m].temp||0;Ae({...I,players:{...I.players,[m]:{...I.players[m],temp:E+M}}})}}).catch(E=>{})},vr=async M=>{if(Xt("attack",.6),!s||!O)return;const q=Ai.ATTACK_DMG_PARTY,me=(I?.players?.[m]||{}).inventory?.includes("card_oil"),W=q*(me?2:1);try{await e0(s,async E=>{const se=Ue(s,"lobbies",O),Y=await E.get(se);if(!Y.exists())throw new Error("Lobby existiert nicht mehr!");const Ie=Y.data(),ke=Ie?.pendingAttacks||{},Ce=Ie?.attackDecisions||{};if(Ce[m]===!0)throw new Error("Du hast bereits eine Angriffsentscheidung getroffen!");const Ee=ke[M]||[];Ee.push({attacker:m,dmg:W,hasOil:me});const De={...ke,[M]:Ee},ut={...Ce,[m]:!0};E.update(se,{pendingAttacks:De,attackDecisions:ut}),me&&(E.update(se,{[`players.${m}.inventory`]:yc("card_oil")}),ce.log(" [ATTACK] lfass wird verbraucht"))}),ce.log(" [ATTACK] Angriff erfolgreich gesendet (Transaction)"),Ln(!0)}catch(E){E.message==="Du hast bereits eine Angriffsentscheidung getroffen!"?(Ln(!0),alert("Du hast bereits eine Angriffsentscheidung getroffen!")):alert("Fehler beim Senden des Angriffs: "+E.message)}},oi=async()=>{if(!de)return;const M=`nextRound_${Date.now()}`;if(ne.current.set(M,{startTime:Date.now(),attempts:0}),!s||!O)return;const q=await Ri(Ue(s,"lobbies",O));if(!q.exists())return;const X=q.data();if(X.status==="deleted"||!O)return;const me=X.host===m;if(!me&&!de){const pt=X.config?.maxTemp||100,_t=X.eliminatedPlayers||[],Be=Object.keys(X.players||{}).filter(He=>(X.players?.[He]?.temp||0)<pt&&!_t.includes(He)),tt=Be.length,Xe=Be.filter(He=>{const Me=X.votes?.[He];if(!Me||Me.choice===void 0)return!1;const dt=Me.roundId;return dt!==void 0&&dt===X.roundId}).length,Zt=X.ready||[],Ot=Be.filter(He=>Zt.includes(He)).length,at=Ot>=tt&&tt>0,qt=Xe>=tt&&tt>0,$t=X.popupConfirmed||{},ge=!(X.attackResults&&Object.keys(X.attackResults).length>0)||Be.every(He=>X.attackResults?.[He]?$t[He]===!0:!0),Ge=X.roundRecapShown??!1;if(!(at&&qt&&ge&&Ge&&X.status==="result")){const He=Be.map(Me=>{const dt=X.votes?.[Me];return{player:Me,hasVote:!!dt,choice:dt?.choice,roundId:dt?.roundId,currentRoundId:X.roundId,isValid:dt?.roundId===X.roundId}});ce.warn(" [NEXT ROUND] Nicht der Host und Failover-Bedingungen nicht erfllt:",{roundId:X.roundId,allReady:at,allVoted:qt,allPopupConfirmed:ge,roundRecapShown:Ge,status:X.status,voteCount:Xe,playerCount:tt,readyCount:Ot,voteDetails:He,readyList:Zt});return}}else if(!me){ce.warn(" [NEXT ROUND] Host-Check fehlgeschlagen:",{host:X.host,myName:m});return}ce.log(" [NEXT ROUND] Aktuelle Daten:",{roundId:X.roundId,status:X.status,players:Object.keys(X.players||{})});const W=X?.players||{},E=Object.keys(W),se=X?.config?.maxTemp||Ai.MAX_TEMP_DEFAULT,Y=il(W,se);if(ce.log(" [NEXT ROUND] Aktive Spieler:",{allPlayers:E,activePlayers:Y,maxTemp:se,playerTemps:E.map(pt=>({name:pt,temp:X?.players[pt]?.temp||0}))}),Y.length<=1){const pt=Y.length===1?Y[0]:null;ce.log(" [NEXT ROUND] Spielende erkannt:",{activePlayers:Y.length,winner:pt,allPlayers:E.map(_t=>({name:_t,temp:X?.players[_t]?.temp||0}))}),await ht(Ue(s,"lobbies",O),{status:"winner"});return}const Ie=X?.hotseat||"",ke=typeof Ie=="string"?Ie:Ie?.name||String(Ie||"");let Ce=Y.indexOf(ke);Ce===-1&&(Ce=0),Ce=(Ce+1)%Y.length;const Ee=Y[Ce],De=X?.usedQuestions||[],ut=X?.config?.categories||Object.keys(mi),Pe=_c(ut);let ze=De;De.length>0&&typeof De[0]=="number"&&(ze=De.map(pt=>Pe[pt]?.id).filter(Boolean));const wt=Pe.filter(pt=>pt.id&&!ze.includes(pt.id)),Dt=(X?.roundId??0)+1,Ye=wt.length>0?Dt%wt.length:0,rt=wt[Ye]||Pe[0];ce.log(" [NEXT ROUND] Runden-Details:",{currentHotseat:ke,nextHotseat:Ee,nextHotseatIndex:Ce,question:rt.q,nextRoundId:Dt}),await Wa(X.players),ce.log(" [NEXT ROUND] Bereite nchste Runde vor:",{nextRoundId:Dt,hotseat:Ee,question:rt.q,activePlayers:Y}),ce.log(" [NEXT ROUND] Erstelle updateData Objekt:",{currentRoundId:X?.roundId,nextRoundId:Dt,currentStatus:X?.status,nextHotseat:Ee,hasRandomQ:!!rt,randomQId:rt?.id,randomQCategory:rt?.category});const fe={status:"game",hotseat:Ee,currentQ:rt,roundId:Dt,lastQuestionCategory:rt.category,roundRecapShown:!1,lastHostActivity:zi()};if(ce.log(" [NEXT ROUND] Basis-updateData erstellt:",{keys:Object.keys(fe),status:fe.status,roundId:fe.roundId,hotseat:fe.hotseat,hasCurrentQ:!!fe.currentQ}),fe.votes=fi(),fe.ready=[],fe.lobbyReady={},fe.pendingAttacks={},fe.attackDecisions={},fe.attackResults={},fe.popupConfirmed={},ce.log(" [NEXT ROUND] updateData vollstndig erstellt:",{totalKeys:Object.keys(fe).length,hasDeleteFields:fe.votes===fi(),arrayFields:{ready:Array.isArray(fe.ready),usedQuestions:Array.isArray(fe.usedQuestions)},objectFields:{lobbyReady:typeof fe.lobbyReady=="object",pendingAttacks:typeof fe.pendingAttacks=="object",attackDecisions:typeof fe.attackDecisions=="object",attackResults:typeof fe.attackResults=="object",popupConfirmed:typeof fe.popupConfirmed=="object"}}),rt.id&&!ze.includes(rt.id)?fe.usedQuestions=[...ze,rt.id]:fe.usedQuestions=ze,ce.log(" [NEXT ROUND] Update Firebase mit:",{roomId:O,roundId:fe.roundId,status:fe.status,hotseat:fe.hotseat,currentQ:fe.currentQ?{q:fe.currentQ.q?.substring(0,50),category:fe.currentQ.category}:null,lastQuestionCategory:fe.lastQuestionCategory,roundRecapShown:fe.roundRecapShown,hasLastHostActivity:!!fe.lastHostActivity,votes:"[deleteField]",ready:Array.isArray(fe.ready)?fe.ready:"not array",lobbyReady:fe.lobbyReady?Object.keys(fe.lobbyReady).length:0,pendingAttacks:fe.pendingAttacks?Object.keys(fe.pendingAttacks).length:0,attackDecisions:fe.attackDecisions?Object.keys(fe.attackDecisions).length:0,attackResults:fe.attackResults?Object.keys(fe.attackResults).length:0,popupConfirmed:fe.popupConfirmed?Object.keys(fe.popupConfirmed).length:0,usedQuestions:Array.isArray(fe.usedQuestions)?fe.usedQuestions.length:"not array"}),!O){ne.current.delete(M);return}if(ce.log(" [NEXT ROUND] Starte Firebase-Update:",{roomId:O,updateDataKeys:Object.keys(fe),roundId:fe.roundId,status:fe.status,hasDeleteFields:fe.votes===fi(),updateDataSize:JSON.stringify(fe).length}),await Fe(async()=>{if(!O)throw new Error("roomId wurde gelscht");ce.log(" [NEXT ROUND] Versuche updateDoc:",{roomId:O,timestamp:Date.now(),updateData:{status:fe.status,roundId:fe.roundId,hotseat:fe.hotseat,hasVotes:fe.votes!==void 0,readyLength:Array.isArray(fe.ready)?fe.ready.length:"not array",lobbyReadyKeys:fe.lobbyReady?Object.keys(fe.lobbyReady).length:0,pendingAttacksKeys:fe.pendingAttacks?Object.keys(fe.pendingAttacks).length:0,attackDecisionsKeys:fe.attackDecisions?Object.keys(fe.attackDecisions).length:0,attackResultsKeys:fe.attackResults?Object.keys(fe.attackResults).length:0,popupConfirmedKeys:fe.popupConfirmed?Object.keys(fe.popupConfirmed).length:0,usedQuestionsLength:Array.isArray(fe.usedQuestions)?fe.usedQuestions.length:"not array",hasCurrentQ:!!fe.currentQ,lastQuestionCategory:fe.lastQuestionCategory,roundRecapShown:fe.roundRecapShown,hasLastHostActivity:!!fe.lastHostActivity}});const pt=Date.now();await ht(Ue(s,"lobbies",O),fe);const _t=Date.now()-pt;ce.log(" [NEXT ROUND] updateDoc erfolgreich:",{duration:_t+"ms",roomId:O,roundId:fe.roundId,timestamp:new Date().toISOString()})},M,3,1e3))ne.current.delete(M);else{if(!O){ne.current.delete(M);return}setTimeout(async()=>{if(!O||!s){ne.current.delete(M);return}try{const pt=await Ri(Ue(s,"lobbies",O));if(!pt.exists()||pt.data()?.status==="deleted"){ce.warn(" [NEXT ROUND] Lobby existiert nicht mehr, kein Retry"),ne.current.delete(M);return}await ht(Ue(s,"lobbies",O),fe),ve.current=Date.now(),ne.current.delete(M),ce.log(" [NEXT ROUND] Retry erfolgreich")}catch{ne.current.delete(M)}},3e3)}},Tr=async M=>{const q=`executeAttacks_${M?.roundId||Date.now()}`;ne.current.set(q,{startTime:Date.now(),attempts:0});const X=M?.config?.maxTemp||100,me=Object.keys(M?.players||{}).filter(ge=>(M.players?.[ge]?.temp||0)<X).sort(),W=M?.host,E=W===m,Y=me.indexOf(m)===0&&me.length>0,Ie=E||Y||de;if(ce.log(" [EXECUTE ATTACKS] Starte executePendingAttacks:",{roundId:M?.roundId,myName:m,hostName:W,isCurrentHost:E,isFirstBackupHost:Y,isHost:de,canExecute:Ie,hasDb:!!s,roomId:O}),!Ie){ne.current.delete(q);return}if(!s||!O){ne.current.delete(q);return}const ke=await Ri(Ue(s,"lobbies",O));if(!ke.exists())return;const Ce=ke.data();if(Ce.status==="deleted"||Ce.host!==m||!O)return;const Ee=ke.data(),De=Ee.pendingAttacks||{},ut=Ee.players||{},Pe=Ee.attackDecisions||{},ze=typeof Ee.hotseat=="string"?Ee.hotseat:Ee.hotseat?.name||String(Ee.hotseat||""),wt=Ee?.config?.maxTemp||100,Dt=Ee?.eliminatedPlayers||[],Ye=Object.keys(ut).filter(ge=>(ut[ge]?.temp||0)<wt&&!Dt.includes(ge)),rt=Ye.filter(ge=>{if(ge===ze)return!1;const Ge=Ee.votes||{},He=Ge[ze],Me=Ge[ge];if(He&&Me){const dt=String(He.choice||"");if(String(Me.choice||"")!==dt)return!1}return!0}),fe=rt.every(ge=>Pe[ge]===!0),gn=Ye.filter(ge=>{if(ge===ze)return!1;const Ge=Ee.votes||{},He=Ge[ze],Me=Ge[ge];if(He&&Me){const dt=String(He.choice||"");if(String(Me.choice||"")!==dt)return!0}return!1}),pt=gn.every(ge=>Pe[ge]===!0);if(ce.log(" [EXECUTE ATTACKS] Verarbeite Angriffe:",{roundId:Ee.roundId,pendingAttacks:De,players:Object.keys(ut),playersWhoCanAttack:rt,playersWhoCannotAttack:gn,allAttackersDecided:fe,allNonAttackersDecided:pt,attackDecisions:Pe}),!fe&&rt.length>0){const ge=rt.filter(Ge=>!Pe[Ge]);ce.warn(" [EXECUTE ATTACKS]  Nicht alle Angreifer haben entschieden, warte noch...",{roundId:Ee.roundId,playersWhoCanAttack:rt,missing:ge,attackDecisions:Pe,pendingAttacks:De,allAttackersDecided:fe});return}if(rt.length===0&&!pt&&gn.length>0){const ge=gn.filter(He=>!Pe[He]);if(ce.warn(" [EXECUTE ATTACKS]  Nicht alle Nicht-Angreifer haben entschieden, warte noch...",{roundId:Ee.roundId,playersWhoCannotAttack:gn,missing:ge,attackDecisions:Pe,allNonAttackersDecided:pt,totalPlayers:Ye.length,hotseatName:ze}),Ye.length===gn.length+1){await ht(Ue(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}return}if(rt.length===0&&pt){await ht(Ue(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}if(rt.length===0&&gn.length===0){await ht(Ue(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}ce.log(" [EXECUTE ATTACKS]  Alle Entscheidungen getroffen, verarbeite Angriffe...",{roundId:Ee.roundId,playersWhoCanAttack:rt,playersWhoCannotAttack:gn,allAttackersDecided:fe,allNonAttackersDecided:pt,pendingAttacks:De});const _t={},Be={},tt=[];for(const[ge,Ge]of Object.entries(De)){if(!ut[ge]||!Array.isArray(Ge)||Ge.length===0)continue;const Me=ut[ge].inventory?.includes("card_mirror");let dt=0;const dn=[];if(Ge.forEach(At=>{dt+=At.dmg||0,dn.push(At.attacker),At.hasOil?tt.push(` ${At.attacker} greift ${ge} mit dem lfass an (+${At.dmg}C)`):tt.push(` ${At.attacker} greift ${ge} an (+${At.dmg}C)`)}),Me){await ht(Ue(s,"lobbies",O),{[`players.${ge}.inventory`]:yc("card_mirror")}),Ge.forEach(ft=>{_t[`players.${ft.attacker}.temp`]||(_t[`players.${ft.attacker}.temp`]=0),_t[`players.${ft.attacker}.temp`]+=ft.dmg||0});const At=dn.join(" und ");tt.push(` ${ge} spiegelt die Angriffe von ${At} zurck! (+${dt}C)`),Be[ge]={attackers:dn,totalDmg:0,attackDetails:Ge.map(ft=>({attacker:ft.attacker,dmg:ft.dmg||0,mirrored:!0}))}}else _t[`players.${ge}.temp`]||(_t[`players.${ge}.temp`]=0),_t[`players.${ge}.temp`]+=dt,Be[ge]={attackers:[...dn],totalDmg:dt,attackDetails:Ge.map(At=>({attacker:At.attacker,dmg:At.dmg||0}))}}const Xe=Ee.votes||{},Zt=typeof Ee.hotseat=="string"?Ee.hotseat:Ee.hotseat?.name||String(Ee.hotseat||""),Ot=Xe?.[Zt]?.choice,at=Object.keys(ut);at.forEach(ge=>{if(ge===Zt)return;const Ge=Xe[ge],He=String(Ge?.choice||""),Me=String(Ot||"");if(Ge&&He!==Me){let dt=Ai.PENALTY_DMG;dt=0,dt>0&&(_t[`players.${ge}.temp`]||(_t[`players.${ge}.temp`]=0),_t[`players.${ge}.temp`]+=dt),Be[ge]||(Be[ge]={attackers:[],totalDmg:0,attackDetails:[]});const dn=10;Be[ge].totalDmg+=dn,Be[ge].attackDetails.push({attacker:"Strafhitze",dmg:dn,isPenalty:!0})}}),at.forEach(ge=>{Be[ge]||(Be[ge]={attackers:[],totalDmg:0,attackDetails:[]})});const qt={pendingAttacks:{},attackResults:Be,roundRecapShown:!0,lastHostActivity:zi()};if(tt.length>0){const He=[...Ee.log||[],...tt].slice(-50);qt.log=He}for(const[ge,Ge]of Object.entries(_t)){const He=ge.split(".");if(He.length===3&&He[0]==="players"&&He[2]==="temp"){const Me=He[1];qt[`players.${Me}.temp`]=vm(Ge)}}await Fe(async()=>{await ht(Ue(s,"lobbies",O),qt)},q,3,1e3)?ne.current.delete(q):setTimeout(async()=>{try{await ht(Ue(s,"lobbies",O),qt),ve.current=Date.now(),ne.current.delete(q),ce.log(" [EXECUTE ATTACKS] Retry erfolgreich")}catch{}},3e3);const Tt=await Ri(Ue(s,"lobbies",O));if(Tt.exists()){const ge=Tt.data(),Ge=ge.players||{},He=ge.config?.maxTemp||100,Me=Object.keys(Ge).filter(ft=>(Ge[ft]?.temp||0)<He),dt=Object.keys(Ge).filter(ft=>(Ge[ft]?.temp||0)>=He),dn=Ee.players||{},At=dt.filter(ft=>{const Yn=dn[ft]?.temp||0,Xn=Ge[ft]?.temp||0;return Yn<He&&Xn>=He});if(ce.log(" [WINNER CHECK] Prfe auf Gewinner nach Angriffen:",{roundId:ge.roundId,allPlayers:Object.keys(Ge),activePlayers:Me,newlyEliminated:dt,justEliminated:At,playerTemps:Object.keys(Ge).map(ft=>({name:ft,temp:Ge[ft]?.temp||0,beforeTemp:dn[ft]?.temp||0,isEliminated:(Ge[ft]?.temp||0)>=He})),maxTemp:He}),At.length>0){const ft=At[0],Yn=ge.eliminatedPlayers||[],Xn=Yn.includes(ft)?Yn:[...Yn,ft],ni={eliminationInfo:{player:ft,roundId:ge.roundId,timestamp:Date.now()},eliminatedPlayers:Xn,[`lobbyReady.${ft}`]:fi()},ii=ge.host;if(ft===ii){const Tn=Me.filter(Li=>Li!==ft);if(Tn.length>0){const Li=Tn[0];ni.host=Li}}await ht(Ue(s,"lobbies",O),ni)}Me.length===1?(Me[0],await ht(Ue(s,"lobbies",O),{status:"winner"})):Me.length===0&&await ht(Ue(s,"lobbies",O),{status:"winner"})}},Wa=async M=>{if(!de||!M||!s||!O)return;const q=I?.config?.dmg||10,X=Ue(s,"lobbies",O);for(const me of Object.keys(M))if(M[me].inventory?.includes("card_ice")){const W=Math.min(q,M[me].temp||0);W>0&&await ht(X,{[`players.${me}.temp`]:vm(-W),[`players.${me}.inventory`]:yc("card_ice"),log:cl(` ${me} khlt sich ab (-${W}C)`)})}},Ya=async()=>{!de||!s||!O||window.confirm("Mchtest du wirklich zur nchsten Runde springen?")&&(await oi(),Yt(!1))},nr=async()=>{if(!de||!s||!O||!window.confirm("Mchtest du das Spiel wirklich neustarten? Alle Temperaturen werden zurckgesetzt."))return;const M={};Object.keys(I?.players||{}).forEach(q=>{M[q]={temp:0,inventory:[],emoji:I?.players[q]?.emoji||""}}),await ht(Ue(s,"lobbies",O),{status:"lobby",players:M,votes:fi(),ready:[],log:[],hotseat:"",roundId:0,lobbyReady:{},usedQuestions:[],pendingAttacks:fi(),attackResults:fi(),popupConfirmed:fi(),eliminatedPlayers:[]}),Yt(!1)},Ro=async()=>{if(!(!de||!s||!O)&&window.confirm("Lobby wirklich lschen? Alle Spieler werden ausgeworfen und die Lobby ist danach nicht mehr verfgbar!"))try{const M=Ue(s,"lobbies",O);await ht(M,{status:"deleted",deletedAt:zi()}).catch(q=>{ce.warn(" [KILL LOBBY] Konnte Status nicht setzen, lsche direkt:",q)}),await new Promise(q=>setTimeout(q,500)),await pl(M),ce.log(" [KILL LOBBY] Lobby gelscht:",O),Yt(!1),Xr()}catch(M){alert(`Fehler beim Lschen der Lobby: ${M.message}`)}},ir=async()=>{if(!s){alert("Fehler: Firebase ist nicht verfgbar.");return}if(window.confirm(" WARNUNG: Alle offenen Lobbies werden gelscht! Dies kann nicht rckgngig gemacht werden. Fortfahren?")&&window.confirm("Bist du wirklich sicher? Alle Spieler werden ausgeworfen!"))try{ce.log(" [ADMIN] Starte Lschung aller Lobbies...");const M=Km(s,"lobbies"),q=Qm(M,Wm("status","in",["lobby","game","result"])),X=await Ym(q);let me=0,W=0;for(const E of X.docs)try{const se=E.data();await ht(E.ref,{status:"deleted",deletedAt:zi()}).catch(()=>{}),await pl(E.ref),me++,ce.log(` [ADMIN] Lobby gelscht: ${E.id} (Host: ${se.hostName||se.host})`)}catch(se){W++,ce.error(` [ADMIN] Fehler beim Lschen von ${E.id}:`,se)}alert(` ${me} Lobby(s) gelscht.${W>0?`
 ${W} Fehler aufgetreten.`:""}`),ce.log(` [ADMIN] Lschung abgeschlossen: ${me} gelscht, ${W} Fehler`)}catch(M){alert(`Fehler beim Lschen: ${M.message}`)}},Ti=async()=>{if(!I||!s||!O)return;if(I.host!==m){alert("Nur der Host kann eine Revanche starten.");return}if(!window.confirm("Mchtest du eine Revanche starten? Alle Temperaturen werden zurckgesetzt."))return;const M={};Object.keys(I.players||{}).forEach(q=>{M[q]={temp:0,inventory:[],emoji:I.players[q]?.emoji||""}}),await ht(Ue(s,"lobbies",O),{status:"lobby",players:M,votes:fi(),ready:[],log:cl(" Revanche gestartet! Alle Temperaturen wurden zurckgesetzt."),hotseat:"",roundId:(I.roundId??0)+1,lobbyReady:{},usedQuestions:[],pendingAttacks:fi(),attackResults:fi(),popupConfirmed:fi(),eliminatedPlayers:[]}),alert("Revanche gestartet! Alle zurck in die Lobby.")};return p.jsxs("div",{className:"App",children:[c!=="landing"&&p.jsx("div",{className:"menu-btn",onClick:()=>Yt(!Ss),children:""}),c==="create"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("start"),children:""}),c==="questionGeneratorCategories"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("start"),children:""}),c==="questionGenerator"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("questionGeneratorCategories"),children:""}),c!=="landing"&&c!=="create"&&c!=="questionGeneratorCategories"&&c!=="questionGenerator"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>fn(!0),children:"?"}),Ss&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"overlay open",onClick:()=>{Yt(!1),Dn("main")}}),p.jsxs("div",{className:k.menuModal,children:[bi==="main"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Men"}),p.jsx("button",{onClick:()=>{Yt(!1),Dn("main")},className:k.menuCloseButton,children:""})]}),p.jsx("button",{onClick:()=>Dn("settings"),className:k.menuButton,children:" Einstellungen"}),p.jsx("button",{onClick:()=>Dn("volume"),className:k.menuButton,children:" Lautstrke"}),p.jsx("button",{onClick:()=>Dn("log"),className:k.menuButton,children:" Spielverlauf"}),p.jsx("div",{className:k.spacer}),p.jsx("button",{onClick:Xr,className:k.leaveButton,children:" Spiel verlassen"})]}),bi==="settings"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Einstellungen"}),p.jsx("button",{onClick:()=>Dn("main"),className:k.menuBackButton,children:""})]}),de&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:Ya,className:`${k.settingsButton} ${k.settingsButtonGray}`,children:" Runde erzwingen"}),p.jsx("button",{onClick:nr,className:`${k.settingsButton} ${k.settingsButtonRed}`,children:" Spiel neustarten"}),p.jsx("button",{onClick:Ro,className:`${k.settingsButton} ${k.settingsButtonDarkRed}`,children:" Lobby lschen"})]}),p.jsxs("div",{className:k.menuSection,children:[p.jsx("h4",{className:k.menuSectionTitle,children:" Admin-Funktionen"}),p.jsx("button",{onClick:ir,className:`${k.settingsButton} ${k.settingsButtonDanger}`,children:" Alle Lobbies lschen (Test)"})]}),p.jsxs("button",{onClick:Mi,className:`${k.settingsButton} ${k.settingsButtonMusic} ${vt?k.settingsButtonMusicEnabled:k.settingsButtonMusicDisabled}`,children:[vt?"":""," Hintergrundmusik ",vt?"an":"aus"]})]}),bi==="volume"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Lautstrke"}),p.jsx("button",{onClick:()=>Dn("main"),className:k.menuBackButton,children:""})]}),p.jsxs("div",{className:k.volumeSliderContainer,children:[p.jsx("h4",{className:k.volumeTitle,children:"Hintergrundmusik"}),p.jsxs("div",{className:k.volumeSliderWrapper,children:[p.jsx("span",{className:k.volumeIcon,children:""}),p.jsx("input",{type:"range",min:"0",max:"10",value:er,onChange:M=>mn(parseInt(M.target.value)),className:k.volumeSliderInput}),p.jsx("span",{className:k.volumeIcon,children:""})]})]}),p.jsxs("div",{className:k.volumeSliderContainer,children:[p.jsx("h4",{className:k.volumeTitle,children:"Soundeffekte"}),p.jsxs("div",{className:k.volumeSliderWrapper,children:[p.jsx("span",{className:k.volumeIcon,children:""}),p.jsx("input",{type:"range",min:"0",max:"10",value:rs,onChange:M=>Vn(parseInt(M.target.value)),className:k.volumeSliderInput}),p.jsx("span",{className:k.volumeIcon,children:""})]})]})]}),bi==="log"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Spielverlauf"}),p.jsx("button",{onClick:()=>Dn("main"),className:k.menuBackButton,children:""})]}),p.jsx("div",{className:k.menuLogContainer,children:I?.log&&I.log.length>0?I.log.slice(-20).map((M,q)=>p.jsx("div",{className:k.menuLogEntry,children:M},q)):p.jsx("div",{className:k.menuLogEmpty,children:"Keine Eintrge"})})]})]})]}),c!=="landing"&&p.jsx("div",{className:k.logoContainer,children:p.jsx("img",{src:Ab,alt:"Hitzkopf Logo",className:k.logoHorizontal})}),c==="landing"&&p.jsxs("div",{className:k.landingContainer,children:[r&&p.jsx("button",{onClick:r,className:k.backToProjectsButton,title:"Zurck zur Projektauswahl",children:" Zurck"}),p.jsx("div",{className:k.landingLogoContainer,children:p.jsx("img",{src:kM,alt:"Hitzkopf Logo",className:k.landingLogo})}),p.jsx("button",{onClick:()=>f("start"),className:k.landingButton,children:"SPIELEN"})]}),c==="start"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("input",{id:"playerName",name:"playerName",type:"text",value:m,onChange:Qr,placeholder:"Dein Name",maxLength:20,autoComplete:"name"}),p.jsx("div",{className:`emoji-gallery-wrapper ${k.emojiGalleryWrapper}`,children:p.jsxs("div",{ref:vi,id:"emojiGallery",className:k.emojiGallery,children:[p.jsx("div",{className:`emoji-spacer ${k.emojiSpacer}`}),jr.map((M,q)=>{const X=q===Es;return p.jsx("div",{className:`emoji-card ${X?"selected":""}`,onClick:me=>{zs.current||os(M)},onTouchStart:me=>{as.current={x:me.touches[0].clientX,y:me.touches[0].clientY,time:Date.now()}},onTouchMove:me=>{if(as.current.x!==0){const W=Math.abs(me.touches[0].clientX-as.current.x),E=Math.abs(me.touches[0].clientY-as.current.y);(W>10||E>10)&&(zs.current=!0)}},onTouchEnd:me=>{const W=Math.abs(me.changedTouches[0].clientX-as.current.x),E=Math.abs(me.changedTouches[0].clientY-as.current.y),se=Date.now()-as.current.time;!(W>10||E>10)&&se<300&&!zs.current&&(me.preventDefault(),me.stopPropagation(),os(M)),setTimeout(()=>{zs.current=!1,as.current={x:0,y:0,time:0}},100)},"data-emoji":M,"data-index":q,children:M},`${M}-${q}`)}),p.jsx("div",{className:`emoji-spacer ${k.emojiSpacer}`})]})}),p.jsxs("div",{className:"start-actions",children:[p.jsx("button",{className:"btn-secondary",onClick:()=>f("create"),disabled:!m.trim(),children:" Spiel erstellen"}),p.jsx("button",{className:"btn-secondary",onClick:()=>{f("join"),Wr()},disabled:!m.trim(),children:" Spiel beitreten"})]})]}),c==="start"&&p.jsx("button",{className:k.fullWidthButton,onClick:()=>f("questionGeneratorCategories"),style:{opacity:1},children:" Fragengenerator"}),c==="create"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("label",{className:k.labelWithMargin,children:"Whle Fragenkategorien:"}),p.jsxs("div",{className:k.grid3Cols,children:[p.jsxs("div",{className:`category-card ${C.length===Object.keys(mi).length?"selected":""}`,onClick:()=>xi("all"),children:[p.jsx("div",{className:"category-emoji",children:""}),p.jsx("div",{className:"category-name",children:"Alle"})]}),Object.entries(mi).map(([M,q])=>p.jsxs("div",{className:`category-card ${C.includes(M)?"selected":""}`,onClick:()=>xi(M),children:[p.jsx("div",{className:"category-emoji",children:q.emoji}),p.jsx("div",{className:"category-name",children:q.name.split(" ")[0]})]},M))]}),p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:ws,disabled:!m.trim()||C.length===0,children:" Spiel erstellen"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="questionGeneratorCategories"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("label",{className:k.labelWithMargin,children:"Whle Fragenkategorien:"}),p.jsxs("div",{className:k.grid3Cols,children:[p.jsxs("div",{className:`category-card ${C.length===Object.keys(mi).length?"selected":""}`,onClick:()=>xi("all"),children:[p.jsx("div",{className:"category-emoji",children:""}),p.jsx("div",{className:"category-name",children:"Alle"})]}),Object.entries(mi).map(([M,q])=>p.jsxs("div",{className:`category-card ${C.includes(M)?"selected":""}`,onClick:()=>xi(M),children:[p.jsx("div",{className:"category-emoji",children:q.emoji}),p.jsx("div",{className:"category-name",children:q.name.split(" ")[0]})]},M))]}),p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:()=>{if(C.length===0){alert("Bitte whle mindestens eine Kategorie aus!");return}const M=_c().filter(X=>C.includes(X.category));if(M.length===0){alert("Keine Fragen in den ausgewhlten Kategorien gefunden!");return}const q=[...M];for(let X=q.length-1;X>0;X--){const me=Math.floor(Math.random()*(X+1));[q[X],q[me]]=[q[me],q[X]]}it(q),un(0),Se(q[0]),f("questionGenerator")},disabled:C.length===0,children:" Fragen generieren"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="questionGenerator"&&ye&&p.jsxs("div",{className:"screen active card",children:[ye.category&&p.jsxs("div",{className:k.gameCategory,style:{marginBottom:"20px"},children:[mi[ye.category]?.emoji," ",mi[ye.category]?.name]}),p.jsx("h3",{className:k.gameQuestion,children:ye.q||"Lade Frage..."}),p.jsxs("div",{className:"option-row",children:[p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["a) ",ye.a||"A"]}),p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["b) ",ye.b||"B"]})]}),(ye.c||ye.d)&&p.jsxs("div",{className:"option-row",children:[ye.c&&p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["c) ",ye.c]}),ye.d&&p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["d) ",ye.d]})]}),p.jsx("button",{className:`btn-primary ${k.submitButtonMargin}`,onClick:Fi,style:{background:"linear-gradient(135deg, #ff8c00 0%, #ff6b00 100%)",marginTop:"30px"},children:" Nchste Frage"}),p.jsx("button",{onClick:Oi,className:`btn-secondary ${k.backButton}`,disabled:ct===0,children:" Vorherige Frage"})]}),c==="join"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("h3",{className:k.joinScreenTitle,children:" Spiel beitreten"}),p.jsx("button",{className:`btn-secondary ${k.refreshButton}`,onClick:Wr,children:" Rume aktualisieren"}),j.length>0?p.jsx("div",{className:k.grid2Cols,children:j.map(M=>p.jsxs("div",{className:`category-card ${be===M.id?"selected":""} ${k.roomCard}`,onClick:()=>Ga(M.id,M.hasPassword),children:[p.jsx("div",{className:`category-emoji ${k.categoryEmojiLarge}`,children:M.hostEmoji||""}),p.jsxs("div",{className:`category-name ${k.categoryNameLarge}`,children:["Spiel von ",M.hostName]})]},M.id))}):p.jsx("p",{className:k.noRoomsText,children:"Keine Rume verfgbar"}),be&&p.jsx("button",{className:"btn-secondary",onClick:()=>wn(be),disabled:!m.trim()||!be,children:" Beitreten"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="lobby"&&I&&(()=>{const M=vn(),q=M.find(se=>se.name===m),X=M.filter(se=>se.name!==m),me=I.lobbyReady?.[m]===!0,W=I.config?.maxTemp||100,E=(q?.temp||0)>=W;return p.jsxs("div",{className:"screen active card",children:[p.jsxs("h3",{className:k.lobbyTitle,children:[" Spiel von ",I.hostName||I.host||"Unbekannt"]}),q&&p.jsxs("div",{onClick:ls,className:`${k.myPlayerCard} ${E?k.eliminated:me?k.ready:k.notReady}`,children:[p.jsx("div",{className:k.myPlayerEmoji,children:q.emoji}),p.jsxs("div",{className:k.myPlayerInfo,children:[p.jsxs("div",{className:k.myPlayerName,children:[q.name," (Du)",I.host===q.name&&p.jsx("span",{className:k.crownIcon,children:""})]}),p.jsxs("div",{className:k.readyToggle,children:[p.jsx("span",{className:k.readyLabel,children:"Bereit"}),p.jsx("div",{onClick:se=>{se.stopPropagation(),ls()},className:`${k.toggleSwitch} ${me?k.ready:k.notReady}`,children:p.jsx("div",{className:`${k.toggleThumb} ${me?k.ready:k.notReady}`,children:me?p.jsx("span",{className:k.toggleCheck,children:""}):p.jsx("span",{className:k.toggleCross,children:""})})})]})]})]}),X.length>0&&p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginTop:"20px"},children:X.map(se=>{const Y=I.lobbyReady?.[se.name]===!0,Ie=(se.temp||0)>=W;return p.jsxs("div",{style:{padding:"16px",background:"rgba(22, 27, 34, 0.6)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",opacity:Ie?.5:Y?1:.4,transition:"opacity 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",cursor:"default"},children:[p.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"4px"},children:se.emoji}),p.jsxs("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#fff",textAlign:"center",display:"flex",alignItems:"center",gap:"6px"},children:[se.name,I.host===se.name&&p.jsx("span",{style:{fontSize:"1.2rem"},children:""})]}),p.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",background:Y?"#22c55e":"#d1d5db",cursor:"default",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",padding:"2px",opacity:.8,marginTop:"4px"},children:p.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"12px",background:"#fff",transition:"transform 0.3s ease",transform:Y?"translateX(22px)":"translateX(0)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:Y?p.jsx("span",{style:{color:"#22c55e",fontSize:"14px",fontWeight:"bold"},children:""}):p.jsx("span",{style:{color:"#9ca3af",fontSize:"12px",fontWeight:"bold"},children:""})})})]},se.name)})}),de&&p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:As,disabled:(()=>{const se=I.config?.maxTemp||100,Y=vn().filter(ke=>(ke.temp||0)<se);return Y.filter(ke=>I.lobbyReady?.[ke.name]===!0).length<Y.length||Y.length<2})(),children:" Spiel starten"}),!de&&(()=>{const se=I.config?.maxTemp||100,Y=vn().filter(Ce=>(Ce.temp||0)<se),ke=Y.filter(Ce=>I.lobbyReady?.[Ce.name]===!0).length>=Y.length&&Y.length>=2;return p.jsx("p",{className:k.waitText,children:ke?" Warten bis der Host das Spiel startet":" Warten bis alle bereit sind"})})()]})})(),c==="game"&&I&&(()=>{const M=I.hotseat,q=I.config?.maxTemp||100,X=I.players?.[m]?.temp||0,me=X>=q;return me?p.jsxs("div",{className:"screen active card",children:[p.jsx("h3",{className:k.eliminatedTitle,children:" Du bist ausgeschieden!"}),p.jsxs("div",{className:k.eliminatedInfoBox,children:[p.jsxs("p",{className:k.eliminatedText,children:["Du hast ",X,"C erreicht und bist ausgeschieden."]}),p.jsx("p",{className:k.eliminatedSubtext,children:"Du kannst dem Spiel als Zuschauer folgen."})]}),p.jsx("div",{className:"thermo-grid",style:{display:"none"},children:vn().map(W=>{const E=Math.min(W.temp/q*100,100),se=W.name===M,Y=!!I.votes?.[W.name];return p.jsxs("div",{className:`thermo-item ${se?"is-hotseat":""} ${Y?k.thermoItemAnswered:k.thermoItemNotAnswered}`,children:[p.jsxs("div",{className:k.thermoTop,children:[p.jsxs("span",{className:k.thermoTopLeft,children:[se&&p.jsx("span",{children:""}),p.jsxs("span",{children:[W.emoji," ",W.name,W.name===m?" (Du)":""]})]}),p.jsxs("span",{className:`${k.thermoTemp} ${E>=100?k.thermoTempMax:""}`,children:[W.temp,"C"]})]}),p.jsx("div",{className:k.thermoBar,children:p.jsx("div",{className:k.thermoFill,style:{width:`${E}%`,height:"100%",background:E>=100?"linear-gradient(90deg, #ff0000, #ff4500)":E>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":E>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":E>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out"}})})]},W.name)})}),p.jsxs("div",{className:k.currentQuestionBox,children:[p.jsx("h4",{className:k.currentQuestionTitle,children:"Aktuelle Frage:"}),p.jsx("p",{className:k.currentQuestionText,children:I.currentQ?.q||"Lade Frage..."})]})]}):p.jsxs("div",{className:"screen active card",children:[p.jsx("div",{className:"thermo-grid",style:{display:"none"},children:vn().map(W=>{const E=Math.min(W.temp/q*100,100),se=W.name===M,Y=!!I.votes?.[W.name];return p.jsxs("div",{className:`thermo-item ${se?"is-hotseat":""}`,style:{border:Y?"2px solid #22c55e":"1px solid #333",borderRadius:"10px",padding:"12px",background:Y?"rgba(34, 197, 94, 0.2)":"rgba(22, 27, 34, 0.6)",opacity:Y?1:.5,transition:"opacity 0.3s ease"},children:[p.jsxs("div",{className:"thermo-top",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[se&&p.jsx("span",{children:""}),p.jsxs("span",{children:[W.emoji," ",W.name]})]}),p.jsxs("span",{style:{fontWeight:"bold",color:E>=100?"#ff0000":"#fff"},children:[W.temp,"C"]})]}),p.jsx("div",{className:"thermo-bar",style:{width:"100%",height:"20px",background:"#333",borderRadius:"10px",overflow:"hidden",position:"relative"},children:p.jsx("div",{className:"thermo-fill",style:{width:`${E}%`,height:"100%",background:E>=100?"linear-gradient(90deg, #ff0000, #ff4500)":E>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":E>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":E>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out",boxShadow:E>=100?"0 0 10px rgba(255, 0, 0, 0.5)":"none"}})})]},W.name)})}),(()=>{const W=typeof M=="string"?M:M?.name||String(M||""),E=m===W,se=W?vn().find(ke=>ke.name===W):null,Y=se?.name||W||"Hotseat",Ie=se?.emoji||"";return p.jsx("div",{style:{marginBottom:"15px",padding:"10px 15px",background:"rgba(22, 27, 34, 0.6)",border:"1px solid #333",borderRadius:"10px",textAlign:"center"},children:p.jsx("p",{style:{margin:0,color:"#aaa",fontSize:"0.95rem",fontWeight:E?"bold":"normal"},children:E?p.jsxs(p.Fragment,{children:[" Du bist gefragt! ",p.jsx("br",{}),"Antworte ehrlich - die anderen versuchen deine Wahl zu erraten."]}):p.jsxs(p.Fragment,{children:["Rate, was ",Ie," ",p.jsx("strong",{children:Y})," gewhlt hat."]})})})})(),p.jsx("h3",{className:k.gameQuestion,children:I.currentQ?.q||"Lade Frage..."}),I.currentQ?.category&&p.jsxs("div",{className:k.gameCategory,children:[mi[I.currentQ.category]?.emoji," ",mi[I.currentQ.category]?.name]}),I.votes?.[m]?p.jsxs("div",{className:k.voteSubmitted,children:[p.jsx("p",{className:k.voteSubmittedTitle,children:" Antwort abgesendet!"}),p.jsx("p",{className:k.voteSubmittedText,children:"Warte auf andere Spieler..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"option-row",children:[p.jsx("button",{className:`btn-option ${We==="A"?"selected":""}`,onClick:()=>Yr("A"),disabled:me,children:I.currentQ?.a||"A"}),p.jsx("button",{className:`btn-option ${We==="B"?"selected":""}`,onClick:()=>Yr("B"),disabled:me,children:I.currentQ?.b||"B"})]}),p.jsx("button",{className:`btn-primary ${k.submitButtonMargin}`,onClick:Ka,disabled:!We||me,children:" Antwort absenden"})]}),de&&p.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:p.jsx("button",{className:"btn-text",style:{fontSize:"0.8em",color:"#ff4d4d",opacity:.8},onClick:async()=>{confirm("Wirklich zur Auswertung springen? Dies sollte nur genutzt werden, wenn das Spiel hngt.")&&await ht(Ue(s,"lobbies",O),{status:"result",lastHostActivity:zi()})},children:" Hngt? Weiter zur Auswertung"})})]})})(),c==="result"&&I&&(()=>{I.hotseat;const M=I.roundRecapShown??!1,q=I.config?.maxTemp||100,X=Object.keys(I.players||{}).filter(se=>(I.players?.[se]?.temp||0)<q),me=I.popupConfirmed||{};!(I.attackResults&&Object.keys(I.attackResults).length>0)||X.every(se=>I.attackResults?.[se]?me[se]===!0:!0);const E=M;return p.jsxs("div",{className:"screen active card",children:[E&&p.jsx("h3",{className:k.resultTitle,children:" Zwischenergebnis"}),p.jsx("div",{className:"thermo-grid",style:{display:E?"grid":"none"},children:vn().sort((se,Y)=>Y.temp-se.temp).map(se=>{const Y=I.config?.maxTemp||100,Ie=Math.min(se.temp/Y*100,100);return p.jsxs("div",{className:`thermo-item ${k.resultThermoItem}`,children:[p.jsxs("div",{className:k.thermoTop,children:[p.jsxs("span",{children:[se.emoji," ",se.name,se.name===m?" (Du)":""]}),p.jsxs("span",{className:`${k.thermoTemp} ${Ie>=100?k.thermoTempMax:""}`,children:[se.temp,"C"]})]}),p.jsx("div",{className:k.thermoBar,children:p.jsx("div",{className:k.thermoFill,style:{width:`${Ie}%`,height:"100%",background:Ie>=100?"linear-gradient(90deg, #ff0000, #ff4500)":Ie>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":Ie>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":Ie>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out"}})})]},se.name)})}),!E&&(()=>{const se=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Y=I.votes?.[se]?.choice,Ie=I.votes?.[m],ke=!0,Ce=m===se;if(Ce){const Ee=vn().filter(Pe=>Pe.name!==se),De=Ee.filter(Pe=>{const ze=I.votes?.[Pe.name];return ze&&String(ze.choice)===String(Y)}).sort((Pe,ze)=>Pe.name.localeCompare(ze.name)),ut=Ee.filter(Pe=>{const ze=I.votes?.[Pe.name];return!ze||String(ze.choice)!==String(Y)}).sort((Pe,ze)=>Pe.name.localeCompare(ze.name));return p.jsxs("div",{className:k.hotseatWaitContainer,children:[p.jsxs("div",{className:k.hotseatWaitBox,children:[p.jsx("p",{className:k.hotseatWaitTitle,children:" Warte bis alle Spieler ihre Hitze verteilt haben"}),p.jsx("p",{className:k.hotseatWaitSubtitle,children:"Die anderen Spieler greifen gerade an..."})]}),p.jsxs("div",{className:k.guessOverviewContainer,children:[De.length>0&&p.jsxs("div",{className:k.guessOverviewSection,children:[p.jsx("h4",{className:k.guessOverviewTitle,style:{color:"#22c55e"},children:" Richtig geraten:"}),p.jsx("div",{className:k.guessOverviewList,children:De.map(Pe=>p.jsx("div",{className:k.guessOverviewItem,style:{background:"rgba(34, 197, 94, 0.2)",border:"1px solid #22c55e"},children:p.jsxs("span",{children:[Pe.emoji," ",Pe.name]})},Pe.name))})]}),ut.length>0&&p.jsxs("div",{className:k.guessOverviewSection,children:[p.jsx("h4",{className:k.guessOverviewTitle,style:{color:"#ef4444"},children:" Falsch geraten:"}),p.jsx("div",{className:k.guessOverviewList,children:ut.map(Pe=>p.jsx("div",{className:k.guessOverviewItem,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid #ef4444"},children:p.jsxs("span",{children:[Pe.emoji," ",Pe.name]})},Pe.name))})]})]})]})}else if(Ie&&Y!==void 0&&Y!==null&&String(Ie.choice)===String(Y)){const Ee=I.attackDecisions||{},De=Ee[m]===!0,ut=!De&&ke;return ce.log(" [ATTACK SELECTION] Richtig geraten - Prfe Angriffsauswahl:",{roundId:I.roundId,myName:m,isPartyMode:ke,localActionDone:Qn,attackDecisions:Ee,myAttackDecision:Ee[m],hasAttackDecision:De,showRewardChoice:Ys,showAttackSelection:ts,showJokerShop:ns,isHotseat:Ce,shouldShowAttackSelection:ut,shouldShowReward:!De&&!ke}),ut?p.jsxs("div",{className:k.correctGuessContainer,children:[p.jsx("p",{className:k.correctGuessTitle,children:" RICHTIG GERATEN!"}),p.jsx("p",{className:k.correctGuessSubtitle,children:"Zur Belohnung darfst du einen Spieler aufheizen"}),p.jsxs("div",{className:k.attackSelectionWrapper,children:[p.jsxs("div",{className:k.attackSelectionHeader,children:[p.jsx("span",{className:k.attackSelectionHeaderIcon,children:""}),p.jsx("span",{children:"Wen aufheizen?"})]}),p.jsx("div",{className:k.attackSelectionGrid,children:(()=>{typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");const Pe=I?.config?.maxTemp||100,ze=vn();ze.filter(Ye=>(I?.players?.[Ye.name]?.temp||0)<Pe).length;const Dt=ze.filter(Ye=>!(Ye.name===m||(I?.players?.[Ye.name]?.temp||0)>=Pe));return Dt.length===0?p.jsx("div",{className:k.attackNoPlayersLarge,children:"Keine Spieler zum Angreifen verfgbar"},"no-players"):Dt.map(Ye=>{const pt=20*((I.players?.[m]||{}).inventory?.includes("card_oil")?2:1);return p.jsxs("div",{onClick:()=>vr(Ye.name),className:k.attackPlayerCardLarge,children:[p.jsx("div",{className:k.attackPlayerEmojiLarge,children:Ye.emoji}),p.jsx("div",{className:k.attackPlayerNameLarge,children:Ye.name}),p.jsxs("div",{className:k.attackPlayerDmgLarge,children:["+",pt,""]})]},Ye.name)})})()})]})]}):p.jsxs("div",{className:k.rewardDecisionMade,children:[p.jsx("p",{className:k.rewardDecisionTitle,children:" RICHTIG GERATEN!"}),p.jsx("p",{className:k.rewardDecisionText,children:"Entscheidung getroffen. Warte auf andere Spieler..."})]})}else if(Ie&&Y!==void 0&&Y!==null&&String(Ie.choice)!==String(Y)){const Ee=I?.attackDecisions||{};return ce.log(" [RESULT UI] Falsch geraten erkannt:",{myChoice:Ie.choice,truth:Y,isPartyMode:ke,localActionDone:Qn,hasAttackDecision:Ee[m]}),!Qn&&Ee[m]&&Ln(!0),p.jsxs("div",{className:k.hotseatWaitContainer,children:[p.jsxs("div",{className:k.wrongAnswerContainer,children:[p.jsx("div",{className:k.wrongAnswerIcon,children:""}),p.jsx("p",{className:k.wrongAnswerTitleRed,children:"FALSCH GERATEN"}),p.jsx("p",{className:k.wrongAnswerTextWhite,children:"Du erhltst 10C Strafhitze."})]}),p.jsxs("div",{className:k.hotseatWaitBox,children:[p.jsx("p",{className:k.hotseatWaitTitle,children:" Warte bis alle Spieler ihre Hitze verteilt haben"}),p.jsx("p",{className:k.hotseatWaitSubtitle,children:"Die anderen Spieler greifen gerade an..."})]})]})}else return Ie&&Y==null?p.jsx("div",{className:k.resultStatusBox,children:p.jsx("p",{className:k.resultStatusText,children:"Du hast die Frage beantwortet. Warte auf die anderen Spieler..."})}):p.jsx("div",{className:k.resultStatusBox,children:p.jsx("p",{className:k.resultStatusTextAlt,children:" Keine Antwort abgegeben."})})})(),(()=>{const se=I.players?.[m],Y=I.config?.maxTemp||100,Ie=(se?.temp||0)>=Y,ke=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Ce=m===ke,Ee=I.votes?.[ke]?.choice,De=I.votes?.[m],ut=De&&Ee!==void 0&&String(De.choice)===String(Ee),Pe=De&&Ee!==void 0&&String(De.choice)!==String(Ee),wt=(I.attackDecisions||{})[m]===!0;if(!(E?Qn||Ce||Ie:(Qn||Ie)&&!(!E&&ut&&!wt&&!Ce)&&!Pe&&!Ce))return null;const rt=E?(I.ready||[]).includes(m)?" Bereit fr nchste Frage":" Nchste Frage":(I.ready||[]).includes(m)?" Nicht bereit":" Bereit";return p.jsx("button",{className:(I.ready||[]).includes(m)?"btn-secondary":"btn-primary",onClick:$a,disabled:Ie,style:{marginTop:"20px"},children:Ie?" Hitzkopf - Ausgeschieden":rt})})(),(()=>{const se=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Y=m===se,Ie=I.votes?.[se]?.choice,ke=I.votes?.[m],Ce=ke&&Ie!==void 0&&String(ke.choice)===String(Ie),Ee=ke&&Ie!==void 0&&String(ke.choice)!==String(Ie),ut=(I.attackDecisions||{})[m]===!0;return!E&&Ce&&!ut&&!Y||!E&&Ee||!E&&Y?null:p.jsx("div",{className:k.playerReadyList,children:(()=>{const ze=I.config?.maxTemp||100,wt=vn().filter(fe=>(I.players?.[fe.name]?.temp||0)<ze),Dt=I.ready||[],rt=[...wt].sort((fe,gn)=>fe.name.localeCompare(gn.name)).map(fe=>`${Dt.includes(fe.name)?"":""} ${fe.emoji} ${fe.name}`).join(", ");return p.jsx("div",{className:k.playerReadyText,children:rt})})()})})()]})})(),c==="winner"&&I&&p.jsxs("div",{className:`screen active card ${k.winnerScreen}`,children:[[...Array(50)].map((M,q)=>p.jsx("div",{style:{position:"absolute",width:"10px",height:"10px",background:["#ff4500","#ff8c00","#ffd700","#ff6b35","#ffa500"][Math.floor(Math.random()*5)],left:`${Math.random()*100}%`,top:"-10px",animation:`confettiFall ${2+Math.random()*3}s linear infinite`,animationDelay:`${Math.random()*2}s`,borderRadius:"50%",zIndex:1}},q)),p.jsx("h2",{className:k.winnerTitle,children:" Gewinner!"}),(()=>{const M=I.config?.maxTemp||100,q=Object.entries(I.players||{}).find(([X,me])=>(me.temp||0)<M);if(q){const[X,me]=q;return p.jsxs("div",{className:k.winnerCard,children:[p.jsx("div",{className:k.winnerEmoji,children:me.emoji||""}),p.jsx("p",{className:k.winnerName,children:X}),p.jsx("p",{className:k.winnerText,children:"ist cool geblieben und gewinnt diese Runde Hitzkopf! "}),p.jsxs("p",{className:k.winnerTemp,children:[me.temp||0,"C"]})]})}return null})(),p.jsxs("div",{className:k.winnerActions,children:[de&&p.jsx("button",{onClick:Ti,className:`btn-primary ${k.winnerButton}`,children:" Revanche starten"}),p.jsx("button",{onClick:Xr,className:`btn-secondary ${k.winnerButton}`,children:" Lobby verlassen"})]})]}),ss&&I&&I.hotseat&&p.jsx("div",{className:k.hotseatModalOverlay,onClick:Ut,children:p.jsxs("div",{className:k.hotseatModalContent,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.hotseatModalIcon,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");return m===M?"":""})()}),m===I.hotseat?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:k.hotseatModalTitle,children:"Du bist gefragt!"}),p.jsx("div",{className:k.hotseatModalText,children:"Alle anderen mssen deine Antwort erraten."})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:k.hotseatModalHeader,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),q=I.players?.[M]?.emoji||"";return p.jsxs(p.Fragment,{children:[p.jsx("span",{className:k.hotseatModalEmoji,children:q}),p.jsx("span",{className:k.hotseatModalTitle,children:M})]})})()}),p.jsx("div",{className:k.hotseatModalText,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");return p.jsxs(p.Fragment,{children:["ist gefragt. Versuche ",M,"'s Antwort zu erraten."]})})()})]}),p.jsx("button",{className:`btn-primary ${k.hotseatModalButton}`,onClick:Ut,children:"Los geht's"})]})}),qi&&In&&I&&p.jsx("div",{className:k.attackModalOverlay,onClick:tr,children:p.jsxs("div",{className:`${k.attackModalContent} ${In.totalDmg>0?k.attackModalContentDamage:k.attackModalContentNoDamage}`,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.attackModalIcon,children:In.totalDmg>0?"":""}),p.jsx("div",{className:`${k.attackModalName} ${In.totalDmg>0?k.attackModalNameDamage:k.attackModalNameNoDamage}`,children:m}),p.jsx("div",{className:k.attackModalMessage,children:In.totalDmg>0?`Du wurdest aufgeheizt! Insgesamt ${In.totalDmg}C`:"Cool geblieben - Keiner hat dich aufgeheizt"}),In.totalDmg===0&&p.jsx("div",{className:k.attackModalNoDamage,children:"Du hast diese Runde keine Hitze erhalten"}),In.attackDetails&&In.attackDetails.length>0&&In.totalDmg>0&&p.jsxs("div",{className:k.attackModalDetails,children:[p.jsx("strong",{className:k.attackModalDetailsTitle,children:"Angriffe:"}),p.jsx("br",{}),In.attackDetails.filter(M=>!M.mirrored).map((M,q)=>p.jsxs("div",{className:k.attackModalDetailItem,children:[" ",M.attacker,": +",M.dmg,"C"]},q))]}),p.jsx("div",{className:k.attackModalBar,children:(()=>{const M=I.config?.maxTemp||100,q=I.players?.[m]?.temp||0,X=Math.min(q/M*100,100);return p.jsx("div",{className:`${k.attackModalBarFill} ${In.totalDmg>0?k.attackModalBarFillDamage:k.attackModalBarFillNoDamage}`,ref:me=>{me&&setTimeout(()=>{me.style.width=`${X}%`},100)}})})()}),p.jsxs("div",{className:`${k.attackModalTemp} ${In.totalDmg>0?k.attackModalTempDamage:k.attackModalTempNoDamage}`,children:[I.players?.[m]?.temp||0,"C"]}),p.jsx("button",{className:`btn-primary ${k.attackModalButton}`,onClick:tr,children:"Verstanden"})]})}),ti&&Ps&&I&&p.jsx("div",{className:k.eliminationModalOverlay,onClick:()=>{on(!1),Ts(null),s&&O&&ht(Ue(s,"lobbies",O),{eliminationInfo:fi()}).catch(console.error)},children:p.jsxs("div",{className:k.eliminationModalContent,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.eliminationModalLogoContainer,children:p.jsx("img",{src:Ab,alt:"Hitzkopf Logo",className:k.eliminationModalLogo})}),Ps===m?p.jsxs(p.Fragment,{children:[p.jsx("h2",{className:k.eliminationModalTitle,children:"Oh nein!"}),p.jsx("p",{className:k.eliminationModalText,children:"Du bist ein Hitzkopf und somit ab sofort raus!"})]}):p.jsxs(p.Fragment,{children:[p.jsx("h2",{className:k.eliminationModalTitle,children:Ps}),p.jsx("p",{className:k.eliminationModalText,children:"ist ein Hitzkopf und somit raus!"})]}),p.jsx("button",{className:`btn-primary ${k.eliminationModalButton}`,onClick:()=>{on(!1),Ts(null),s&&O&&ht(Ue(s,"lobbies",O),{eliminationInfo:fi()}).catch(console.error)},children:"Verstanden"})]})}),Di&&p.jsx("div",{className:k.rulesModalOverlay,onClick:()=>fn(!1),children:p.jsxs("div",{className:k.rulesModalContent,onClick:M=>M.stopPropagation(),children:[p.jsxs("h2",{className:k.rulesModalHeader,children:[p.jsx("span",{className:k.rulesModalHeaderIcon,children:""}),p.jsx("span",{children:"Anleitung"})]}),p.jsxs("div",{className:k.rulesModalBody,children:[p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Ziel:"})]}),p.jsxs("p",{className:k.rulesModalSectionText,children:["Errate die Antworten deiner Freunde und bringe sie zum Kochen! ",p.jsx("br",{}),"Rtst du richtig, darfst du Hitze verteilen, liegst du falsch, erhltst du Strafhitze."]})]}),p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Verlierer:"})]}),p.jsx("p",{className:k.rulesModalSectionText,children:"Wer als erstes 100 erreicht ist ein Hitzkopf und fliegt raus."})]}),p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Gewinner:"})]}),p.jsx("p",{className:k.rulesModalSectionText,children:"Bewahrst du einen khlen Kopf, entscheidest du das Spiel fr dich."})]})]}),p.jsxs("button",{className:`btn-primary ${k.rulesModalButton}`,onClick:()=>fn(!1),children:[p.jsx("span",{children:"Verstanden"}),p.jsx("span",{children:""})]})]})})]})}const jM="_lobbySystem_1gg27_1",PM="_backButtonBottom_1gg27_23",zM="_screen_1gg27_67",BM="_title_1gg27_113",UM="_nameInput_1gg27_131",qM="_roomInput_1gg27_133",HM="_emojiGalleryWrapper_1gg27_185",FM="_emojiGallery_1gg27_185",GM="_emojiSpacer_1gg27_229",KM="_emojiCard_1gg27_239",$M="_selected_1gg27_269",QM="_emojiCharacter_1gg27_295",WM="_buttonGroup_1gg27_307",YM="_btnPrimary_1gg27_319",XM="_btnSecondary_1gg27_321",Fn={lobbySystem:jM,backButtonBottom:PM,screen:zM,title:BM,nameInput:UM,roomInput:qM,emojiGalleryWrapper:HM,emojiGallery:FM,emojiSpacer:GM,emojiCard:KM,selected:$M,emojiCharacter:QM,buttonGroup:WM,btnPrimary:YM,btnSecondary:XM},ZM=["","","","","","","","","","","","","","",""],Fs=(()=>{const r=[...ZM];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})(),JM=({onCreateLobby:r,onJoinLobby:e,storagePrefix:n="lobby",title:s="Lobby System",buttonText:l="Lobby erstellen",accentColor:c="#4ecdc4",onBack:f=null})=>{const[m,b]=ee.useState("start"),[_,S]=ee.useState(sessionStorage.getItem(`${n}_name`)||""),[A,V]=ee.useState(()=>{const R=Math.floor(Fs.length/2);return Fs[R]}),[O,pe]=ee.useState(""),[de,he]=ee.useState(Math.floor(Fs.length/2)),I=ee.useRef(null),Ae=ee.useRef(!1),Le=ee.useRef({x:0,y:0,time:0});ee.useEffect(()=>{const R=I.current;if(!R)return;const N=()=>{Ae.current=!0;const L=R.scrollLeft,B=R.scrollWidth/(Fs.length+2),C=Math.round(L/B);he(Math.max(0,Math.min(C,Fs.length-1))),V(Fs[Math.max(0,Math.min(C,Fs.length-1))]),setTimeout(()=>{Ae.current=!1},100)};return R.addEventListener("scroll",N),setTimeout(()=>{const L=R.scrollWidth/(Fs.length+2);R.scrollLeft=de*L},100),()=>R.removeEventListener("scroll",N)},[de]);const lt=R=>{const N=R.target.value.slice(0,20);S(N),sessionStorage.setItem(`${n}_name`,N)},jt=R=>{const N=Fs.indexOf(R);he(N),V(R);const z=I.current;if(z){const L=z.scrollWidth/(Fs.length+2);z.scrollTo({left:N*L,behavior:"smooth"})}},qe=()=>{if(!_.trim()){alert("Bitte gib einen Namen ein!");return}sessionStorage.setItem(`${n}_name`,_),sessionStorage.setItem(`${n}_emoji`,A),r({name:_,emoji:A})},D=()=>{if(!_.trim()){alert("Bitte gib einen Namen ein!");return}if(!O.trim()){alert("Bitte gib einen Lobby-Code ein!");return}sessionStorage.setItem(`${n}_name`,_),sessionStorage.setItem(`${n}_emoji`,A),e({name:_,emoji:A,roomId:O.toUpperCase()})};return p.jsxs("div",{className:Fn.lobbySystem,style:{"--accent-color":c},children:[m==="start"&&p.jsxs("div",{className:Fn.screen,children:[p.jsx("h1",{className:Fn.title,children:s}),p.jsx("input",{type:"text",value:_,onChange:lt,placeholder:"Dein Name",maxLength:20,autoComplete:"name",className:Fn.nameInput}),p.jsx("div",{className:Fn.emojiGalleryWrapper,children:p.jsxs("div",{ref:I,className:Fn.emojiGallery,children:[p.jsx("div",{className:Fn.emojiSpacer}),Fs.map((R,N)=>{const z=N===de;return p.jsx("div",{className:`${Fn.emojiCard} ${z?Fn.selected:""}`,onClick:()=>{Ae.current||jt(R)},onTouchStart:L=>{Le.current={x:L.touches[0].clientX,y:L.touches[0].clientY,time:Date.now()}},onTouchMove:L=>{if(Le.current.x!==0){const B=Math.abs(L.touches[0].clientX-Le.current.x),C=Math.abs(L.touches[0].clientY-Le.current.y);(B>10||C>10)&&(Ae.current=!0)}},onTouchEnd:()=>{setTimeout(()=>{Le.current={x:0,y:0,time:0}},50)},children:p.jsx("div",{className:Fn.emojiCharacter,children:R})},`${R}-${N}`)}),p.jsx("div",{className:Fn.emojiSpacer})]})}),p.jsx("div",{className:Fn.buttonGroup,children:p.jsx("button",{className:Fn.btnPrimary,onClick:qe,children:l})})]}),m==="join"&&p.jsxs("div",{className:Fn.screen,children:[p.jsx("h1",{className:Fn.title,children:"Lobby beitreten"}),p.jsx("input",{type:"text",value:O,onChange:R=>pe(R.target.value.toUpperCase()),placeholder:"Lobby-Code",maxLength:6,className:Fn.roomInput}),p.jsxs("div",{className:Fn.buttonGroup,children:[p.jsx("button",{className:Fn.btnPrimary,onClick:D,children:"Beitreten"}),p.jsx("button",{className:Fn.btnSecondary,onClick:()=>b("start"),children:"Zurck"})]})]}),f&&p.jsx("button",{onClick:f,className:Fn.backButtonBottom,children:" Zurck"})]})},cr="https://api.spotify.com/v1",sl="https://accounts.spotify.com",ps={PKCE_VERIFIER:"spotify_pkce_verifier",USER_ACCESS:"spotify_user_access_token",USER_REFRESH:"spotify_user_refresh_token",USER_EXPIRY:"spotify_user_expiry"};class ex{constructor(){this.clientId="2d9c122237af4b2391ab504f72edfd70",this.clientSecret="dce2d4bdae5b4afc8f9c3e24b309bb72";const e="https://nkillich.github.io/Hitzkopf";this.redirectUri=e.replace(/\/$/,""),typeof console<"u"&&console.log(" Spotify Redirect URI:",this.redirectUri),this.accessToken=null,this.tokenExpiry=null,this._userToken=null,this._deviceId=null,this._player=null,this._sdkReady=!1,!this.clientId||!this.clientSecret?(console.warn(" Spotify Credentials fehlen! berprfe .env.local"),console.log("Client ID vorhanden:",!!this.clientId),console.log("Client Secret vorhanden:",!!this.clientSecret)):console.log(" Spotify Credentials geladen")}_generateRandomString(e){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(e)).reduce((l,c)=>l+n[c%n.length],"")}async _sha256(e){const s=new TextEncoder().encode(e);return window.crypto.subtle.digest("SHA-256",s)}_base64urlEncode(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}async getAuthUrlWithPKCE(){if(!this.clientId)throw new Error("Spotify Client ID fehlt");const e=this._generateRandomString(64),n=await this._sha256(e),s=this._base64urlEncode(n);typeof sessionStorage<"u"&&sessionStorage.setItem(ps.PKCE_VERIFIER,e);const l=["streaming","user-read-email","user-read-private","user-modify-playback-state","user-read-playback-state"].join(" "),c=new URLSearchParams({response_type:"code",client_id:this.clientId,scope:l,code_challenge_method:"S256",code_challenge:s,redirect_uri:this.redirectUri,state:this._generateRandomString(16)});return`${sl}/authorize?${c.toString()}`}async exchangeCodeForToken(e){const n=typeof sessionStorage<"u"?sessionStorage.getItem(ps.PKCE_VERIFIER):null;if(!n)throw new Error("Code Verifier nicht gefunden  bitte erneut verbinden.");const s=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:this.clientId,grant_type:"authorization_code",code:e,redirect_uri:this.redirectUri,code_verifier:n})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.error_description||c.error||"Token-Austausch fehlgeschlagen")}const l=await s.json();return this._storeUserTokens(l.access_token,l.refresh_token,l.expires_in),typeof sessionStorage<"u"&&sessionStorage.removeItem(ps.PKCE_VERIFIER),l}_storeUserTokens(e,n,s){const l=Date.now()+s*1e3;this._userToken=e,typeof sessionStorage<"u"&&(sessionStorage.setItem(ps.USER_ACCESS,e),sessionStorage.setItem(ps.USER_REFRESH,n||""),sessionStorage.setItem(ps.USER_EXPIRY,String(l)))}async getStoredUserToken(){if(typeof sessionStorage>"u")return null;let e=sessionStorage.getItem(ps.USER_ACCESS);const n=sessionStorage.getItem(ps.USER_REFRESH),s=Number(sessionStorage.getItem(ps.USER_EXPIRY)||0);if(e&&Date.now()>=s-6e4&&n)try{e=(await this.refreshUserToken()).access_token}catch{return null}return this._userToken=e,e||null}async refreshUserToken(){const e=typeof sessionStorage<"u"?sessionStorage.getItem(ps.USER_REFRESH):null;if(!e)throw new Error("Kein Refresh Token");const n=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e,client_id:this.clientId})});if(!n.ok)throw this.clearUserTokens(),new Error("Token-Erneuerung fehlgeschlagen");const s=await n.json();return this._storeUserTokens(s.access_token,s.refresh_token||e,s.expires_in),s}clearUserTokens(){this._userToken=null,typeof sessionStorage<"u"&&(sessionStorage.removeItem(ps.USER_ACCESS),sessionStorage.removeItem(ps.USER_REFRESH),sessionStorage.removeItem(ps.USER_EXPIRY))}async isUserLoggedIn(){return!!await this.getStoredUserToken()}getAuthUrl(){const e=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative"].join(" "),n=new URLSearchParams({client_id:this.clientId,response_type:"code",redirect_uri:this.redirectUri,scope:e,show_dialog:"false"});return`${sl}/authorize?${n.toString()}`}async getAccessToken(e){const n=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:this.redirectUri}),s=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${this.clientId}:${this.clientSecret}`)},body:n.toString()});if(!s.ok)throw new Error("Failed to get access token");const l=await s.json();return this.accessToken=l.access_token,this.tokenExpiry=Date.now()+l.expires_in*1e3,l}async getClientCredentialsToken(){if(!this.clientId||!this.clientSecret){const n=new Error("Spotify Credentials fehlen! berprfe .env.local und starte Dev-Server neu.");throw n.code="MISSING_CREDENTIALS",n}const e=new URLSearchParams({grant_type:"client_credentials"});try{const n=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${this.clientId}:${this.clientSecret}`)},body:e.toString()});if(!n.ok){const l=await n.json().catch(()=>({}));console.error("Spotify API Fehler:",l);const c=new Error(`Spotify API Fehler (${n.status}): ${l.error_description||l.error||"Unbekannter Fehler"}`);throw c.code="SPOTIFY_API_ERROR",c.status=n.status,c}const s=await n.json();return this.accessToken=s.access_token,this.tokenExpiry=Date.now()+s.expires_in*1e3,console.log(" Spotify Token erfolgreich abgerufen"),s}catch(n){if(n.code==="MISSING_CREDENTIALS"||n.code==="SPOTIFY_API_ERROR")throw n;const s=new Error("Netzwerkfehler beim Abrufen des Spotify Tokens: "+n.message);throw s.code="NETWORK_ERROR",s}}async ensureValidToken(){(!this.accessToken||Date.now()>=this.tokenExpiry)&&await this.getClientCredentialsToken()}async searchTracks(e,n=10){await this.ensureValidToken();const s=new URLSearchParams({q:e,type:"track",limit:n.toString()}),l=await fetch(`${cr}/search?${s.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!l.ok)throw new Error("Failed to search tracks");return(await l.json()).tracks.items.map(f=>({id:`spotify_track_${f.id}`,spotifyId:f.id,title:f.name,artist:f.artists.map(m=>m.name).join(", "),album:f.album.name,type:"song",source:"spotify",spotifyUrl:f.external_urls.spotify,previewUrl:f.preview_url,imageUrl:f.album.images[0]?.url,duration:f.duration_ms,votes:{},addedAt:Date.now()}))}async searchAlbums(e,n=10){await this.ensureValidToken();const s=new URLSearchParams({q:e,type:"album",limit:n.toString()}),l=await fetch(`${cr}/search?${s.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!l.ok)throw new Error("Failed to search albums");return(await l.json()).albums.items.map(f=>({id:`spotify_album_${f.id}`,spotifyId:f.id,title:f.name,artist:f.artists.map(m=>m.name).join(", "),type:"album",source:"spotify",spotifyUrl:f.external_urls.spotify,imageUrl:f.images[0]?.url,releaseDate:f.release_date,totalTracks:f.total_tracks,votes:{},addedAt:Date.now()}))}async search(e,n=10){try{await this.ensureValidToken();const s=Math.min(Math.floor(n/2),10),l=new URLSearchParams({q:e,type:"track,album",limit:s.toString()}),c=await fetch(`${cr}/search?${l.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!c.ok){const S=await c.json().catch(()=>({}));console.error("Spotify Search Fehler:",S);const A=new Error(`Spotify Search Fehler (${c.status}): ${S.error?.message||"Unbekannter Fehler"}`);throw A.code="SEARCH_FAILED",A}const f=await c.json(),m=(f.tracks?.items||[]).map(S=>({id:`spotify_track_${S.id}`,spotifyId:S.id,title:S.name,artist:S.artists.map(A=>A.name).join(", "),album:S.album.name,type:"song",source:"spotify",spotifyUrl:S.external_urls.spotify,previewUrl:S.preview_url,imageUrl:S.album.images[0]?.url,duration:S.duration_ms,votes:{},addedAt:Date.now()})),b=(f.albums?.items||[]).map(S=>({id:`spotify_album_${S.id}`,spotifyId:S.id,title:S.name,artist:S.artists.map(A=>A.name).join(", "),type:"album",source:"spotify",spotifyUrl:S.external_urls.spotify,imageUrl:S.images[0]?.url,releaseDate:S.release_date,totalTracks:S.total_tracks,votes:{},addedAt:Date.now()})),_=[...m,...b];return console.log(` Spotify Suche erfolgreich: ${_.length} Ergebnisse fr "${e}"`),_}catch(s){throw console.error(" Spotify Suche fehlgeschlagen:",s),s}}async getTrack(e){await this.ensureValidToken();const n=await fetch(`${cr}/tracks/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to get track");return await n.json()}async getAlbum(e){await this.ensureValidToken();const n=await fetch(`${cr}/albums/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to get album");return await n.json()}loadSpotifySDK(){return new Promise(e=>{if(window.Spotify){this._sdkReady=!0,e();return}if(document.querySelector('script[src*="spotify-player"]')){window.onSpotifyWebPlaybackSDKReady=()=>{this._sdkReady=!0,e()};return}const n=document.createElement("script");n.src="https://sdk.scdn.co/spotify-player.js",n.async=!0,window.onSpotifyWebPlaybackSDKReady=()=>{this._sdkReady=!0,e()},document.body.appendChild(n)})}async initPlaybackPlayer(e,n){if(!await this.getStoredUserToken()){n?.("Nicht mit Spotify angemeldet.");return}if(await this.loadSpotifySDK(),!window.Spotify){n?.("Spotify SDK konnte nicht geladen werden.");return}const l=new window.Spotify.Player({name:"Amplify Host",getOAuthToken:c=>{this.getStoredUserToken().then(f=>c(f||""))},volume:.8});l.addListener("ready",({device_id:c})=>{this._deviceId=c,this._player=l,console.log(" Spotify Web Playback bereit, Device ID:",c),e({deviceId:c})}),l.addListener("not_ready",({device_id:c})=>{console.log("Spotify Device offline:",c)}),l.addListener("authentication_error",({message:c})=>{console.error("Spotify Auth-Fehler:",c),n?.(c)}),l.addListener("initialization_error",({message:c})=>{console.error("Spotify Init-Fehler:",c),n?.(c)}),l.connect()}getDeviceId(){return this._deviceId}async playOnDevice(e){const n=await this.getStoredUserToken();if(!n)throw new Error("Nicht mit Spotify verbunden.");const s=this._deviceId;if(!s)throw new Error("Spotify-Player noch nicht bereit. Bitte kurz warten.");const l=`${cr}/me/player/play${s?`?device_id=${s}`:""}`,c=await fetch(l,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({uris:e})});if(!c.ok){const f=await c.json().catch(()=>({}));throw c.status===404?new Error('Kein aktiver Player. Bitte "Mit Spotify verbinden" und Playlist starten.'):new Error(f.error?.message||"Wiedergabe fehlgeschlagen")}}async pausePlayback(){const e=await this.getStoredUserToken();e&&await fetch(`${cr}/me/player/pause`,{method:"PUT",headers:{Authorization:`Bearer ${e}`}})}async resumePlayback(){const e=await this.getStoredUserToken();e&&await fetch(`${cr}/me/player/play`,{method:"PUT",headers:{Authorization:`Bearer ${e}`}})}async nextTrack(){const e=await this.getStoredUserToken();e&&await fetch(`${cr}/me/player/next`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}async getPlaybackState(){const e=await this.getStoredUserToken();if(!e)return null;const n=await fetch(`${cr}/me/player`,{headers:{Authorization:`Bearer ${e}`}});if(n.status===204||!n.ok)return null;const s=await n.json(),l=s.item;return l?{trackName:l.name,artist:l.artists?.map(c=>c.name).join(", ")||"",imageUrl:l.album?.images?.[0]?.url||null,positionMs:s.progress_ms??0,durationMs:l.duration_ms??0,isPlaying:!!s.is_playing,updatedAt:Date.now()}:null}disconnectPlayer(){this._player&&(this._player.disconnect(),this._player=null),this._deviceId=null}}const Gs=new ex,tx="_musicVoter_10045_1",nx="_backgroundOverlay_10045_17",ix="_roomContainer_10045_41",sx="_header_10045_85",rx="_headerLeft_10045_101",ax="_roomTitle_10045_109",ox="_emoji_10045_131",lx="_leaveButton_10045_165",cx="_playersSection_10045_201",ux="_sectionTitle_10045_219",hx="_playersList_10045_233",dx="_playerChip_10045_245",fx="_playerEmoji_10045_267",mx="_playerName_10045_275",gx="_hostBadge_10045_285",px="_addSection_10045_297",yx="_addButton_10045_309",_x="_playlistSection_10045_347",bx="_emptyPlaylist_10045_363",vx="_emptyIcon_10045_375",Tx="_emptyHint_10045_387",Sx="_playlistItems_10045_399",Ex="_playlistItem_10045_399",wx="_itemRank_10045_445",Ax="_itemInfo_10045_471",Rx="_itemTitle_10045_481",Ix="_itemArtist_10045_501",Cx="_itemMeta_10045_513",kx="_itemVoting_10045_525",Nx="_voteButton_10045_537",Dx="_voted_10045_575",Mx="_voteScore_10045_587",xx="_removeButton_10045_603",Ox="_modalOverlay_10045_653",Lx="_modal_10045_653",Vx="_modalHeader_10045_725",jx="_modalTitle_10045_741",Px="_modalCloseButton_10045_759",zx="_addModeButtons_10045_805",Bx="_addModeButton_10045_805",Ux="_addModeIcon_10045_859",qx="_addModeDesc_10045_867",Hx="_manualForm_10045_881",Fx="_input_10045_895",Gx="_spotifySearch_10045_929",Kx="_searchBox_10045_937",$x="_searchButton_10045_965",Qx="_searchLoading_10045_1011",Wx="_spinner_10045_1029",Yx="_searchResults_10045_1055",Xx="_searchResultItem_10045_1077",Zx="_resultImage_10045_1113",Jx="_resultInfo_10045_1129",eO="_resultTitle_10045_1139",tO="_resultArtist_10045_1157",nO="_resultAlbum_10045_1173",iO="_addResultButton_10045_1191",sO="_addResultButtonAdded_10045_1237",rO="_noResults_10045_1263",aO="_noResultsHint_10045_1275",oO="_spotifyNote_10045_1287",lO="_nowPlayingSection_10045_1309",cO="_nowPlayingCard_10045_1317",uO="_nowPlayingImage_10045_1337",hO="_nowPlayingInfo_10045_1353",dO="_nowPlayingTrack_10045_1363",fO="_nowPlayingArtist_10045_1381",mO="_nowPlayingTime_10045_1399",gO="_nowPlayingBadge_10045_1411",pO="_spotifySection_10045_1425",yO="_spotifyError_10045_1441",_O="_spotifyConnectBlock_10045_1453",bO="_spotifyConnectButton_10045_1475",vO="_spotifyPlaybackBlock_10045_1511",TO="_spotifyConnected_10045_1523",SO="_spotifyPlaybackButtons_10045_1533",EO="_spotifyPlayButton_10045_1547",wO="_spotifyPauseButton_10045_1591",AO="_spotifyDisconnectButton_10045_1623",RO="_modalButtons_10045_1655",IO="_btnFertig_10045_1667",CO="_btnPrimary_10045_1705",kO="_lobbyStartScreen_10045_1887",NO="_lobbyStartCard_10045_1909",DO="_lobbyStartTitle_10045_1933",MO="_lobbyStartSlogan_10045_1959",xO="_lobbyStartButtons_10045_1977",OO="_lobbyStartButton_10045_1977",LO="_lobbyStartIcon_10045_2033",VO="_browseLoading_10045_2105",jO="_browseEmpty_10045_2123",PO="_browseEmptyIcon_10045_2141",zO="_lobbyList_10045_2173",BO="_lobbyCard_10045_2187",UO="_lobbyCardDelete_10045_2223",qO="_lobbyCardHeader_10045_2275",HO="_lobbyCardTitle_10045_2291",FO="_lobbyCardIcon_10045_2309",GO="_lobbyCardInfo_10045_2335",KO="_lobbyCardStat_10045_2345",$O="_refreshButton_10045_2361",QO="_headerButtons_10045_2409",WO="_closeButton_10045_2419",YO="_lobbySystem_10045_2481",XO="_screen_10045_2489",ZO="_emojiCard_10045_2497",JO="_emojiCharacter_10045_2507",e4="_backButtonBottom_10045_2541",t4="_title_10045_2609",n4="_nameInput_10045_2627",i4="_emojiGalleryWrapper_10045_2663",s4="_emojiGallery_10045_2663",r4="_emojiSpacer_10045_2707",a4="_selected_10045_2747",o4="_buttonGroup_10045_2785",l4="_lobbyListSection_10045_2799",c4="_lobbyListTitle_10045_2811",u4="_deleteAllButton_10045_2827",J={musicVoter:tx,backgroundOverlay:nx,roomContainer:ix,header:sx,headerLeft:rx,roomTitle:ax,emoji:ox,leaveButton:lx,playersSection:cx,sectionTitle:ux,playersList:hx,playerChip:dx,playerEmoji:fx,playerName:mx,hostBadge:gx,addSection:px,addButton:yx,playlistSection:_x,emptyPlaylist:bx,emptyIcon:vx,emptyHint:Tx,playlistItems:Sx,playlistItem:Ex,itemRank:wx,itemInfo:Ax,itemTitle:Rx,itemArtist:Ix,itemMeta:Cx,itemVoting:kx,voteButton:Nx,voted:Dx,voteScore:Mx,removeButton:xx,modalOverlay:Ox,modal:Lx,modalHeader:Vx,modalTitle:jx,modalCloseButton:Px,addModeButtons:zx,addModeButton:Bx,addModeIcon:Ux,addModeDesc:qx,manualForm:Hx,input:Fx,spotifySearch:Gx,searchBox:Kx,searchButton:$x,searchLoading:Qx,spinner:Wx,searchResults:Yx,searchResultItem:Xx,resultImage:Zx,resultInfo:Jx,resultTitle:eO,resultArtist:tO,resultAlbum:nO,addResultButton:iO,addResultButtonAdded:sO,noResults:rO,noResultsHint:aO,spotifyNote:oO,nowPlayingSection:lO,nowPlayingCard:cO,nowPlayingImage:uO,nowPlayingInfo:hO,nowPlayingTrack:dO,nowPlayingArtist:fO,nowPlayingTime:mO,nowPlayingBadge:gO,spotifySection:pO,spotifyError:yO,spotifyConnectBlock:_O,spotifyConnectButton:bO,spotifyPlaybackBlock:vO,spotifyConnected:TO,spotifyPlaybackButtons:SO,spotifyPlayButton:EO,spotifyPauseButton:wO,spotifyDisconnectButton:AO,modalButtons:RO,btnFertig:IO,btnPrimary:CO,lobbyStartScreen:kO,lobbyStartCard:NO,lobbyStartTitle:DO,lobbyStartSlogan:MO,lobbyStartButtons:xO,lobbyStartButton:OO,lobbyStartIcon:LO,browseLoading:VO,browseEmpty:jO,browseEmptyIcon:PO,lobbyList:zO,lobbyCard:BO,lobbyCardDelete:UO,lobbyCardHeader:qO,lobbyCardTitle:HO,lobbyCardIcon:FO,lobbyCardInfo:GO,lobbyCardStat:KO,refreshButton:$O,headerButtons:QO,closeButton:WO,lobbySystem:YO,screen:XO,emojiCard:ZO,emojiCharacter:JO,backButtonBottom:e4,title:t4,nameInput:n4,emojiGalleryWrapper:i4,emojiGallery:s4,emojiSpacer:r4,selected:a4,buttonGroup:o4,lobbyListSection:l4,lobbyListTitle:c4,deleteAllButton:u4},h4=["","","","","","","","","","","","","","",""],ys=(()=>{const r=[...h4];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})(),d4={apiKey:"AIzaSyBQ7c9JkZ3zWlyIjZLl1O1sJJOrKfYJbmA",authDomain:"hitzkopf-f0ea6.firebaseapp.com",projectId:"hitzkopf-f0ea6",storageBucket:"hitzkopf-f0ea6.firebasestorage.app",messagingSenderId:"828164655874",appId:"1:828164655874:web:1cab759bdb03bfb736101b"},f4=({onBack:r,spotifyCallbackDone:e})=>{const[n,s]=ee.useState(null),[l,c]=ee.useState(null),[f,m]=ee.useState(null),[b,_]=ee.useState("lobby"),[S,A]=ee.useState(sessionStorage.getItem("mv_name")||""),[V,O]=ee.useState(()=>{const U=sessionStorage.getItem("mv_emoji");if(U)return U;const ne=Math.floor(ys.length/2);return ys[ne]}),[pe,de]=ee.useState(()=>{const U=sessionStorage.getItem("mv_emoji");if(U){const ne=ys.indexOf(U);return ne!==-1?ne:Math.floor(ys.length/2)}return Math.floor(ys.length/2)}),[he,I]=ee.useState(""),[Ae,Le]=ee.useState(!1),[lt,jt]=ee.useState(null),[qe,D]=ee.useState([]),[R,N]=ee.useState(!1),[z,L]=ee.useState([]),[B,C]=ee.useState(""),[Kt,En]=ee.useState([]),[te,be]=ee.useState(!1),[Ve,yt]=ee.useState(null),[zt,j]=ee.useState(!1),[re,ye]=ee.useState(""),[Se,je]=ee.useState(""),[it,ct]=ee.useState("song"),[un,We]=ee.useState(()=>new Set),[bn,Ji]=ee.useState(!1),[js,Qn]=ee.useState(!1),[Ln,Ws]=ee.useState(!1),[Ui,es]=ee.useState(null),Ni=ee.useRef(null);ee.useRef(null);const Wt=ee.useRef(null),Jt=ee.useRef(!1),_i=ee.useRef({x:0,y:0,time:0});ee.useEffect(()=>{const U=tg(d4),ne=$0(U),ve=mS(U);return s(U),m(ne),c(ve),L0(ne).catch(console.error),()=>{Ni.current&&Ni.current()}},[]),ee.useEffect(()=>{const U=Wt.current;if(!U)return;const ne=()=>{Jt.current=!0;const we=U.scrollLeft,Fe=U.scrollWidth/(ys.length+2),Bt=Math.round(we/Fe),Xt=Math.max(0,Math.min(Bt,ys.length-1));de(Xt),O(ys[Xt]),setTimeout(()=>{Jt.current=!1},100)};return U.addEventListener("scroll",ne),setTimeout(()=>{const we=U.scrollWidth/(ys.length+2);U.scrollLeft=pe*we},100),()=>U.removeEventListener("scroll",ne)},[pe]),ee.useEffect(()=>{if(b==="browse"&&Wt.current){const U=Wt.current;setTimeout(()=>{const ne=U.scrollWidth/(ys.length+2);U.scrollLeft=pe*ne},150)}},[b]);const qa=U=>{const ne=U.target.value.slice(0,20);A(ne),sessionStorage.setItem("mv_name",ne)},Ys=U=>{const ne=ys.indexOf(U);de(ne),O(U),sessionStorage.setItem("mv_emoji",U);const ve=Wt.current;if(ve){const we=ve.scrollWidth/(ys.length+2);ve.scrollTo({left:ne*we,behavior:"smooth"})}},Nn=U=>{if(!S.trim()){alert("Bitte gib einen Namen ein!");return}sessionStorage.setItem("mv_name",S),sessionStorage.setItem("mv_emoji",V),Xs({name:S,emoji:V,roomId:U})},ts=async({name:U,emoji:ne})=>{if(!l)return;const ve=Ts(),we=Ue(l,"musicVoterLobbies",ve);try{await CS(we,{host:U,createdAt:zi(),players:{[U]:{emoji:ne,joinedAt:zi()}},playlist:[],status:"active"}),A(U),O(ne),I(ve),Le(!0),_("room"),qi(ve)}catch(Fe){console.error("Fehler beim Erstellen der Playlist:",Fe),alert("Fehler beim Erstellen der Playlist")}},Xs=async({name:U,emoji:ne,roomId:ve})=>{if(!l)return;const we=Ue(l,"musicVoterLobbies",ve);try{const Fe=await Ri(we);if(!Fe.exists()){alert("Playlist nicht gefunden!");return}const Bt=Fe.data();if(Bt.players&&Bt.players[U]){alert("Dieser Name ist bereits vergeben!");return}await ht(we,{[`players.${U}`]:{emoji:ne,joinedAt:zi()}}),A(U),O(ne),I(ve),Le(!1),_("room"),qi(ve)}catch(Fe){console.error("Fehler beim Beitreten:",Fe),alert("Fehler beim Beitreten der Playlist")}},ns=async()=>{if(l){N(!0);try{const U=Km(l,"musicVoterLobbies"),ne=Qm(U,Wm("status","==","active")),ve=await Ym(ne),we=[];ve.forEach(Fe=>{const Bt=Fe.data();we.push({id:Fe.id,host:Bt.host,playerCount:Object.keys(Bt.players||{}).length,createdAt:Bt.createdAt,playlist:Bt.playlist||[]})}),we.sort((Fe,Bt)=>Fe.createdAt?Bt.createdAt?Bt.createdAt.toMillis()-Fe.createdAt.toMillis():-1:1),D(we),console.log(` ${we.length} offene Lobbies geladen`)}catch(U){console.error("Fehler beim Laden der Lobbies:",U),D([])}finally{N(!1)}}},is=async(U,ne,ve)=>{if(ve.stopPropagation(),!window.confirm(`Playlist von ${ne} (${U}) wirklich lschen?

Diese Aktion kann nicht rckgngig gemacht werden!`)||!l)return;const Fe=Ue(l,"musicVoterLobbies",U);try{await pl(Fe),console.log(` Playlist ${U} gelscht`),D(Bt=>Bt.filter(Xt=>Xt.id!==U))}catch(Bt){console.error("Fehler beim Lschen:",Bt),alert("Fehler beim Lschen der Playlist: "+(Bt.message||"Unbekannter Fehler"))}},ss=async()=>{if(!(!window.confirm(`ALLE ${qe.length} Playlists wirklich lschen?

 WARNUNG: Diese Aktion kann NICHT rckgngig gemacht werden!
Alle Zuhrer werden entfernt!`)||!window.confirm(`Bist du dir WIRKLICH sicher?

Dies wird alle Playlists unwiderruflich lschen!`))&&l)try{const ve=qe.map(we=>pl(Ue(l,"musicVoterLobbies",we.id)));await Promise.all(ve),console.log(` Alle ${qe.length} Playlists gelscht`),D([]),alert("Alle Playlists wurden gelscht!")}catch(ve){console.error("Fehler beim Lschen aller Playlists:",ve),alert("Fehler beim Lschen: "+(ve.message||"Unbekannter Fehler")),ns()}},Zs=async()=>{if(!Ae||!l||!he){alert("Nur der Host kann die Playlist schlieen!");return}if(!window.confirm("Playlist wirklich schlieen? Alle Zuhrer werden entfernt!"))return;const ne=Ue(l,"musicVoterLobbies",he);try{await pl(ne),console.log(" Playlist geschlossen"),Ni.current&&Ni.current(),_("lobby"),I(""),A(""),O(""),Le(!1),jt(null),L([])}catch(ve){console.error("Fehler beim Schlieen:",ve),alert("Fehler beim Schlieen der Playlist")}},qi=U=>{if(!l)return;const ne=Ue(l,"musicVoterLobbies",U),ve=kS(ne,we=>{if(we.exists()){const Fe=we.data();jt(Fe),L(Fe.playlist||[])}else alert("Playlist wurde geschlossen"),Js()});Ni.current=ve},Js=async()=>{if(Ni.current&&Ni.current(),l&&he&&S){const U=Ue(l,"musicVoterLobbies",he);try{await ht(U,{[`players.${S}`]:fi()}),console.log(` ${S} hat die Lobby verlassen`)}catch(ne){console.error("Fehler beim Verlassen:",ne)}}_("lobby"),I(""),A(""),O(""),Le(!1),jt(null),L([])},Di=async()=>{if(!re.trim()){alert("Bitte gib einen Titel ein!");return}const U={id:`manual_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:re,artist:Se||"Unbekannt",type:it,source:"manual",votes:{},addedBy:S,addedAt:Date.now()};await fn(U),ye(""),je(""),j(!1)},fn=async U=>{if(!l||!he){console.error(" Hinzufgen fehlgeschlagen: DB oder RoomID fehlt",{db:!!l,roomId:he}),alert("Fehler: Nicht mit Lobby verbunden");return}console.log(" Versuche Song hinzuzufgen:",U.title);const ne=Object.keys(U).reduce((we,Fe)=>(U[Fe]!==void 0&&(we[Fe]=U[Fe]),we),{});console.log(" Bereinigtes Item:",ne);const ve=Ue(l,"musicVoterLobbies",he);try{await ht(ve,{playlist:cl(ne)}),console.log(" Song erfolgreich hinzugefgt:",U.title)}catch(we){console.error(" Fehler beim Hinzufgen:",we),console.error("Fehler Details:",{code:we.code,message:we.message,roomId:he,item:U.title}),alert("Fehler beim Hinzufgen: "+(we.message||"Unbekannter Fehler"))}},ti=async(U,ne)=>{if(!l||!he||!S)return;const ve=Ue(l,"musicVoterLobbies",he);try{const Bt=((await Ri(ve)).data().playlist||[]).map(Xt=>{if(Xt.id===U){const Mi=Xt.votes?.[S]||0,mn=ne==="up"?1:ne==="down"?-1:0;return{...Xt,votes:{...Xt.votes,[S]:Mi===mn?0:mn}}}return Xt});await ht(ve,{playlist:Bt})}catch(we){console.error("Fehler beim Voten:",we)}},on=async U=>{if(!l||!he)return;const ne=z.find(Fe=>Fe.id===U);if(!ne)return;if(!Ae&&ne.addedBy!==S){alert("Nur der Host oder der Ersteller kann diesen Eintrag lschen!");return}if(!window.confirm(`"${ne.title}" wirklich aus der Playlist entfernen?`))return;const we=Ue(l,"musicVoterLobbies",he);try{const Fe=z.filter(Bt=>Bt.id!==U);await ht(we,{playlist:Fe})}catch(Fe){console.error("Fehler beim Entfernen:",Fe)}},Ps=async()=>{if(B.trim()){be(!0);try{const U=await Gs.search(B,10);En(U),U.length===0&&console.log("Keine Ergebnisse fr:",B)}catch(U){console.error("Spotify Suche fehlgeschlagen:",U);let ne=`Spotify Suche fehlgeschlagen.

`;U.message?.includes("Failed to get")?(ne+=`Credentials Problem:
`,ne+=`1. berprfe .env.local Datei
`,ne+=`2. Dev-Server neu starten (wichtig!)
`,ne+="3. Spotify Developer Dashboard prfen"):U.message?.includes("network")?ne+="Netzwerkproblem - Internetverbindung prfen":ne+="Fehler: "+U.message,alert(ne),En([])}finally{be(!1)}}},Ts=()=>{const U="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let ne="";for(let ve=0;ve<6;ve++)ne+=U.charAt(Math.floor(Math.random()*U.length));return ne},In=U=>U.votes?Object.values(U.votes).reduce((ne,ve)=>ne+ve,0):0,Wn=[...z].sort((U,ne)=>{const ve=In(U),we=In(ne);return we!==ve?we-ve:(U.addedAt||0)-(ne.addedAt||0)}),Ss=U=>U===1?"#51cf66":U===-1?"#ff6b6b":"transparent",Yt=U=>{if(U==null||Number.isNaN(U))return"0:00";const ne=Math.floor(Number(U)/1e3),ve=Math.floor(ne/60),we=ne%60;return`${ve}:${we.toString().padStart(2,"0")}`},[bi,Dn]=ee.useState(0),vt=lt?.nowPlaying,Ha=vt?vt.isPlaying?Math.min((vt.positionMs||0)+(Date.now()-(vt.updatedAt||0)),vt.durationMs||0):vt.positionMs||0:0;ee.useEffect(()=>{if(!vt?.isPlaying)return;const U=setInterval(()=>Dn(ne=>ne+1),1e3);return()=>clearInterval(U)},[vt?.isPlaying]),ee.useEffect(()=>{if(!Ae||!bn||!l||!he)return;const U=Ue(l,"musicVoterLobbies",he),ne=setInterval(async()=>{try{const ve=await Gs.getPlaybackState();await ht(U,{nowPlaying:ve?{trackName:ve.trackName,artist:ve.artist,imageUrl:ve.imageUrl,positionMs:ve.positionMs,durationMs:ve.durationMs,isPlaying:ve.isPlaying,updatedAt:ve.updatedAt}:null})}catch{}},2e3);return()=>clearInterval(ne)},[Ae,bn,l,he]),ee.useEffect(()=>{Ae&&Gs.isUserLoggedIn().then(Ji)},[Ae,e]),ee.useEffect(()=>{if(!(!Ae||!bn||js))return es(null),Gs.initPlaybackPlayer(()=>Qn(!0),U=>es(U||"Spotify-Fehler")),()=>{Gs.disconnectPlayer(),Qn(!1)}},[Ae,bn]);const er=async()=>{try{sessionStorage.setItem("spotify_return_to","musicvoter");const U=await Gs.getAuthUrlWithPKCE();window.location.href=U}catch(U){alert("Spotify-Verbindung starten fehlgeschlagen: "+(U.message||"Unbekannter Fehler"))}},Hi=async()=>{if(l&&he&&Ae)try{await ht(Ue(l,"musicVoterLobbies",he),{nowPlaying:null})}catch{}Gs.clearUserTokens(),Gs.disconnectPlayer(),Ji(!1),Qn(!1),Ws(!1),es(null)},rs=async()=>{const U=Wn.filter(ne=>ne.source==="spotify"&&ne.spotifyId&&ne.type==="song").map(ne=>`spotify:track:${ne.spotifyId}`);if(U.length===0){alert("In der Playlist sind keine Spotify-Songs. Fge zuerst Songs ber die Spotify-Suche hinzu.");return}es(null);try{await Gs.playOnDevice(U),Ws(!0)}catch(ne){es(ne.message||"Abspielen fehlgeschlagen"),alert("Spotify abspielen: "+(ne.message||"Fehler"))}},Fa=async()=>{try{await Gs.pausePlayback(),Ws(!1)}catch(U){console.error("Pause fehlgeschlagen:",U)}};return p.jsxs("div",{className:J.musicVoter,children:[p.jsx("div",{className:J.backgroundOverlay}),b==="lobby"&&p.jsxs("div",{className:J.lobbyStartScreen,children:[p.jsxs("div",{className:J.lobbyStartCard,children:[p.jsxs("h1",{className:J.lobbyStartTitle,children:[p.jsx("span",{className:J.emoji,children:""}),"Amplify"]}),p.jsx("p",{className:J.lobbyStartSlogan,children:"Gemeinsam den Ton angeben"}),p.jsxs("div",{className:J.lobbyStartButtons,children:[p.jsxs("button",{className:J.lobbyStartButton,onClick:()=>_("create"),children:[p.jsx("span",{className:J.lobbyStartIcon,children:""}),p.jsx("span",{children:"Playlist erstellen"})]}),p.jsxs("button",{className:J.lobbyStartButton,onClick:()=>{_("browse"),ns()},children:[p.jsx("span",{className:J.lobbyStartIcon,children:""}),p.jsx("span",{children:"Playlist beitreten"})]})]})]}),p.jsx("button",{onClick:r,className:J.backButtonBottom,children:" Zurck"})]}),b==="create"&&p.jsx(JM,{onCreateLobby:ts,onJoinLobby:()=>{},storagePrefix:"mv",title:"Playlist erstellen",buttonText:"Playlist erstellen",accentColor:"#4ecdc4",onBack:()=>_("lobby")}),b==="browse"&&p.jsxs("div",{className:J.lobbySystem,style:{"--accent-color":"#4ecdc4"},children:[p.jsxs("div",{className:J.screen,children:[p.jsx("h1",{className:J.title,children:"Playlist beitreten"}),p.jsx("input",{type:"text",value:S,onChange:qa,placeholder:"Dein Name",maxLength:20,autoComplete:"name",className:J.nameInput}),p.jsx("div",{className:J.emojiGalleryWrapper,children:p.jsxs("div",{ref:Wt,className:J.emojiGallery,children:[p.jsx("div",{className:J.emojiSpacer}),ys.map((U,ne)=>{const ve=ne===pe;return p.jsx("div",{className:`${J.emojiCard} ${ve?J.selected:""}`,onClick:()=>{Jt.current||Ys(U)},onTouchStart:we=>{_i.current={x:we.touches[0].clientX,y:we.touches[0].clientY,time:Date.now()}},onTouchMove:we=>{if(_i.current.x!==0){const Fe=Math.abs(we.touches[0].clientX-_i.current.x),Bt=Math.abs(we.touches[0].clientY-_i.current.y);(Fe>10||Bt>10)&&(Jt.current=!0)}},onTouchEnd:()=>{setTimeout(()=>{_i.current={x:0,y:0,time:0}},50)},children:p.jsx("div",{className:J.emojiCharacter,children:U})},`${U}-${ne}`)}),p.jsx("div",{className:J.emojiSpacer})]})}),p.jsxs("div",{className:J.lobbyListSection,children:[p.jsx("h2",{className:J.lobbyListTitle,children:"Offene Playlists"}),R&&p.jsxs("div",{className:J.browseLoading,children:[p.jsx("div",{className:J.spinner}),p.jsx("p",{children:"Lade Playlists..."})]}),!R&&qe.length===0&&p.jsxs("div",{className:J.browseEmpty,children:[p.jsx("div",{className:J.browseEmptyIcon,children:""}),p.jsx("p",{children:"Keine Playlists gefunden"})]}),!R&&qe.length>0&&p.jsx("div",{className:J.lobbyList,children:qe.map(U=>p.jsxs("div",{className:J.lobbyCard,onClick:()=>Nn(U.id),children:[p.jsx("button",{className:J.lobbyCardDelete,onClick:ne=>is(U.id,U.host,ne),title:"Playlist lschen",children:""}),p.jsx("div",{className:J.lobbyCardHeader,children:p.jsxs("div",{className:J.lobbyCardTitle,children:[p.jsx("span",{className:J.lobbyCardIcon,children:""}),p.jsxs("span",{children:["Playlist von ",U.host]})]})}),p.jsxs("div",{className:J.lobbyCardInfo,children:[p.jsxs("div",{className:J.lobbyCardStat,children:[p.jsx("span",{children:""}),p.jsxs("span",{children:[U.playerCount," Zuhrer"]})]}),p.jsxs("div",{className:J.lobbyCardStat,children:[p.jsx("span",{children:""}),p.jsxs("span",{children:[U.playlist.length," Songs"]})]})]})]},U.id))})]}),p.jsxs("div",{className:J.buttonGroup,children:[p.jsx("button",{className:J.refreshButton,onClick:ns,disabled:R,children:" Aktualisieren"}),qe.length>0&&p.jsx("button",{className:J.deleteAllButton,onClick:ss,children:" Alle Playlists lschen"})]})]}),p.jsx("button",{onClick:()=>_("lobby"),className:J.backButtonBottom,children:" Zurck"})]}),b==="room"&&lt&&p.jsxs("div",{className:J.roomContainer,children:[p.jsxs("div",{className:J.header,children:[p.jsx("div",{className:J.headerLeft,children:p.jsxs("h1",{className:J.roomTitle,children:[p.jsx("span",{className:J.emoji,children:""}),"Amplify"]})}),p.jsxs("div",{className:J.headerButtons,children:[Ae&&p.jsx("button",{className:J.closeButton,onClick:Zs,title:"Playlist schlieen",children:"Schlieen"}),p.jsx("button",{className:J.leaveButton,onClick:Js,children:"Verlassen"})]})]}),p.jsxs("div",{className:J.playersSection,children:[p.jsxs("h3",{className:J.sectionTitle,children:["Zuhrer (",Object.keys(lt.players||{}).length,")"]}),p.jsx("div",{className:J.playersList,children:Object.entries(lt.players||{}).map(([U,ne])=>p.jsxs("div",{className:J.playerChip,children:[p.jsx("span",{className:J.playerEmoji,children:ne.emoji}),p.jsx("span",{className:J.playerName,children:U}),U===lt.host&&p.jsx("span",{className:J.hostBadge,children:""})]},U))})]}),Ae&&p.jsxs("div",{className:J.spotifySection,children:[p.jsx("h3",{className:J.sectionTitle,children:"Spotify abspielen"}),Ui&&p.jsx("p",{className:J.spotifyError,children:Ui}),bn?p.jsxs("div",{className:J.spotifyPlaybackBlock,children:[p.jsxs("p",{className:J.spotifyConnected,children:[" Mit Spotify verbunden",js&&"  Player bereit"]}),p.jsxs("div",{className:J.spotifyPlaybackButtons,children:[Ln?p.jsx("button",{type:"button",className:J.spotifyPauseButton,onClick:Fa,children:" Pause"}):p.jsx("button",{type:"button",className:J.spotifyPlayButton,onClick:rs,disabled:!js||Wn.filter(U=>U.source==="spotify"&&U.type==="song").length===0,children:" Playlist abspielen"}),p.jsx("button",{type:"button",className:J.spotifyDisconnectButton,onClick:Hi,children:"Verbindung trennen"})]})]}):p.jsxs("div",{className:J.spotifyConnectBlock,children:[p.jsx("p",{className:J.spotifyNote,children:"Verbinde dich mit Spotify, damit die Playlist im Browser abspielt (Spotify Premium ntig)."}),p.jsx("button",{type:"button",className:J.spotifyConnectButton,onClick:er,children:"Mit Spotify verbinden"})]})]}),vt&&p.jsxs("div",{className:J.nowPlayingSection,children:[p.jsx("h3",{className:J.sectionTitle,children:"Now Playing"}),p.jsxs("div",{className:J.nowPlayingCard,children:[vt.imageUrl&&p.jsx("img",{src:vt.imageUrl,alt:"",className:J.nowPlayingImage}),p.jsxs("div",{className:J.nowPlayingInfo,children:[p.jsx("div",{className:J.nowPlayingTrack,children:vt.trackName}),p.jsx("div",{className:J.nowPlayingArtist,children:vt.artist}),p.jsxs("div",{className:J.nowPlayingTime,children:[Yt(Ha)," / ",Yt(vt.durationMs)]})]}),vt.isPlaying&&p.jsx("span",{className:J.nowPlayingBadge,title:"Luft",children:""})]})]}),p.jsx("div",{className:J.addSection,children:p.jsx("button",{className:J.addButton,onClick:()=>j(!0),children:"+ Song/Album hinzufgen"})}),p.jsxs("div",{className:J.playlistSection,children:[p.jsxs("h3",{className:J.sectionTitle,children:["Playlist (",Wn.length,")"]}),Wn.length===0?p.jsxs("div",{className:J.emptyPlaylist,children:[p.jsx("div",{className:J.emptyIcon,children:""}),p.jsx("p",{children:"Noch keine Songs in der Playlist"}),p.jsx("p",{className:J.emptyHint,children:"Fge Songs hinzu, um abzustimmen!"})]}):p.jsx("div",{className:J.playlistItems,children:Wn.map((U,ne)=>{const ve=In(U),we=U.votes?.[S]||0;return p.jsxs("div",{className:J.playlistItem,style:{"--item-color":Ss(we)},children:[(Ae||U.addedBy===S)&&p.jsx("button",{className:J.removeButton,onClick:()=>on(U.id),title:"Entfernen",children:""}),p.jsxs("div",{className:J.itemRank,children:["#",ne+1]}),p.jsxs("div",{className:J.itemInfo,children:[p.jsxs("div",{className:J.itemTitle,children:[U.type==="album"&&" ",U.title]}),p.jsx("div",{className:J.itemArtist,children:U.artist}),p.jsxs("div",{className:J.itemMeta,children:["von ",U.addedBy,U.source==="spotify"&&"  Spotify"]})]}),p.jsxs("div",{className:J.itemVoting,children:[p.jsx("button",{className:`${J.voteButton} ${we===1?J.voted:""}`,onClick:()=>ti(U.id,"up"),children:""}),p.jsxs("div",{className:J.voteScore,children:[ve>0?"+":"",ve]}),p.jsx("button",{className:`${J.voteButton} ${we===-1?J.voted:""}`,onClick:()=>ti(U.id,"down"),children:""})]})]},U.id)})})]})]}),zt&&p.jsx("div",{className:J.modalOverlay,onClick:()=>{We(new Set),j(!1)},children:p.jsxs("div",{className:J.modal,onClick:U=>U.stopPropagation(),children:[p.jsxs("div",{className:J.modalHeader,children:[p.jsx("h2",{className:J.modalTitle,children:"Hinzufgen"}),p.jsx("button",{type:"button",className:J.modalCloseButton,onClick:()=>{We(new Set),j(!1),yt(null),ye(""),je("")},title:"Schlieen","aria-label":"Schlieen",children:""})]}),!Ve&&p.jsxs("div",{className:J.addModeButtons,children:[p.jsxs("button",{className:J.addModeButton,onClick:()=>yt("spotify"),children:[p.jsx("span",{className:J.addModeIcon,children:""}),p.jsx("span",{children:"Spotify"}),p.jsx("p",{className:J.addModeDesc,children:"Suche nach Songs auf Spotify"})]}),p.jsxs("button",{className:J.addModeButton,onClick:()=>yt("manual"),children:[p.jsx("span",{className:J.addModeIcon,children:""}),p.jsx("span",{children:"Manuell"}),p.jsx("p",{className:J.addModeDesc,children:"Eigenen Song eingeben"})]})]}),Ve==="manual"&&p.jsxs("div",{className:J.manualForm,children:[p.jsxs("select",{value:it,onChange:U=>ct(U.target.value),className:J.input,children:[p.jsx("option",{value:"song",children:"Song"}),p.jsx("option",{value:"album",children:"Album"})]}),p.jsx("input",{type:"text",value:re,onChange:U=>ye(U.target.value),placeholder:"Titel",className:J.input}),p.jsx("input",{type:"text",value:Se,onChange:U=>je(U.target.value),placeholder:"Knstler (optional)",className:J.input}),p.jsx("button",{className:J.btnPrimary,onClick:Di,children:"Hinzufgen"})]}),Ve==="spotify"&&p.jsxs("div",{className:J.spotifySearch,children:[p.jsxs("div",{className:J.searchBox,children:[p.jsx("input",{type:"text",value:B,onChange:U=>C(U.target.value),onKeyPress:U=>{U.key==="Enter"&&Ps()},placeholder:"Song oder Album suchen...",className:J.input}),p.jsx("button",{className:J.searchButton,onClick:Ps,disabled:te||!B.trim(),children:te?" Suche...":" Suchen"})]}),te&&p.jsxs("div",{className:J.searchLoading,children:[p.jsx("div",{className:J.spinner}),p.jsx("p",{children:"Durchsuche Spotify..."})]}),!te&&Kt.length>0&&p.jsx("div",{className:J.searchResults,children:Kt.map(U=>{const ne=un.has(U.id);return p.jsxs("div",{className:J.searchResultItem,onClick:async ve=>{if(!ne&&!ve.target.closest("button"))try{const we={...U,addedBy:S,votes:{}};console.log(" Fge hinzu:",U.title),await fn(we),We(Fe=>new Set(Fe).add(U.id))}catch(we){console.error("Fehler beim Klick:",we)}},children:[U.imageUrl&&p.jsx("img",{src:U.imageUrl,alt:U.title,className:J.resultImage}),p.jsxs("div",{className:J.resultInfo,children:[p.jsxs("div",{className:J.resultTitle,children:[U.type==="album"&&" ",U.title]}),p.jsx("div",{className:J.resultArtist,children:U.artist}),U.album&&U.type==="song"&&p.jsx("div",{className:J.resultAlbum,children:U.album})]}),p.jsx("button",{type:"button",className:`${J.addResultButton} ${ne?J.addResultButtonAdded:""}`,onClick:async ve=>{if(ve.stopPropagation(),!ne)try{const we={...U,addedBy:S,votes:{}};await fn(we),We(Fe=>new Set(Fe).add(U.id))}catch(we){console.error("Fehler beim Hinzufgen:",we)}},disabled:ne,title:ne?"Bereits hinzugefgt":"Zur Playlist hinzufgen",children:ne?"":"+"})]},U.id)})}),!te&&B&&Kt.length===0&&p.jsxs("div",{className:J.noResults,children:[p.jsx("p",{children:"Keine Ergebnisse gefunden"}),p.jsx("p",{className:J.noResultsHint,children:"Versuche einen anderen Suchbegriff"})]})]}),p.jsx("div",{className:J.modalButtons,children:p.jsx("button",{className:J.btnFertig,onClick:()=>{We(new Set),j(!1),yt(null),ye(""),je("")},children:"Fertig"})})]})})]})};function m4(){const[r,e]=ee.useState(()=>new URLSearchParams(typeof window<"u"?window.location.search:"").get("code")?"musicvoter":null),[n,s]=ee.useState(!1);ee.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("code");if(!m||n)return;let b=!1;return(async()=>{try{if(await Gs.exchangeCodeForToken(m),b)return;window.history.replaceState({},"",window.location.pathname||"/"),e("musicvoter")}catch(_){console.error("Spotify Callback Fehler:",_),b||alert("Spotify-Verbindung fehlgeschlagen: "+(_.message||"Unbekannter Fehler"))}finally{b||s(!0)}})(),()=>{b=!0}},[n]);const l=f=>{e(f)},c=()=>{e(null)};return p.jsxs("div",{className:"App",children:[!r&&p.jsx(jw,{onSelectProject:l}),r==="hitzkopf"&&p.jsx(VM,{onBack:c}),r==="musicvoter"&&p.jsx(f4,{onBack:c,spotifyCallbackDone:n})]})}yw.createRoot(document.getElementById("root")).render(p.jsx(ee.StrictMode,{children:p.jsx(m4,{})}));
