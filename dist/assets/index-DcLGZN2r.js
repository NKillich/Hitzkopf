(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var im={exports:{}},mc={};var gb;function lw(){if(gb)return mc;gb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:c}}return mc.Fragment=e,mc.jsx=n,mc.jsxs=n,mc}var pb;function cw(){return pb||(pb=1,im.exports=lw()),im.exports}var p=cw(),sm={exports:{}},lt={};var yb;function uw(){if(yb)return lt;yb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),V=Symbol.iterator;function O(P){return P===null||typeof P!="object"?null:(P=V&&P[V]||P["@@iterator"],typeof P=="function"?P:null)}var pe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,he={};function I(P,re,ye){this.props=P,this.context=re,this.refs=he,this.updater=ye||pe}I.prototype.isReactComponent={},I.prototype.setState=function(P,re){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,re,"setState")},I.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Ae(){}Ae.prototype=I.prototype;function xe(P,re,ye){this.props=P,this.context=re,this.refs=he,this.updater=ye||pe}var ut=xe.prototype=new Ae;ut.constructor=xe,de(ut,I.prototype),ut.isPureReactComponent=!0;var Bt=Array.isArray;function He(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(P,re,ye){var Ee=ye.ref;return{$$typeof:r,type:P,key:re,ref:Ee!==void 0?Ee:null,props:ye}}function B(P,re){return N(P.type,re,P.props)}function L(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function U(P){var re={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ye){return re[ye]})}var C=/\/+/g;function Wt(P,re){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):re.toString(36)}function Rn(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(He,He):(P.status="pending",P.then(function(re){P.status==="pending"&&(P.status="fulfilled",P.value=re)},function(re){P.status==="pending"&&(P.status="rejected",P.reason=re)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ne(P,re,ye,Ee,je){var st=typeof P;(st==="undefined"||st==="boolean")&&(P=null);var ht=!1;if(P===null)ht=!0;else switch(st){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(P.$$typeof){case r:case e:ht=!0;break;case S:return ht=P._init,ne(ht(P._payload),re,ye,Ee,je)}}if(ht)return je=je(P),ht=Ee===""?"."+Wt(P,0):Ee,Bt(je)?(ye="",ht!=null&&(ye=ht.replace(C,"$&/")+"/"),ne(je,re,ye,"",function(rn){return rn})):je!=null&&(L(je)&&(je=B(je,ye+(je.key==null||P&&P.key===je.key?"":(""+je.key).replace(C,"$&/")+"/")+ht)),re.push(je)),1;ht=0;var dn=Ee===""?".":Ee+":";if(Bt(P))for(var Ye=0;Ye<P.length;Ye++)Ee=P[Ye],st=dn+Wt(Ee,Ye),ht+=ne(Ee,re,ye,st,je);else if(Ye=O(P),typeof Ye=="function")for(P=Ye.call(P),Ye=0;!(Ee=P.next()).done;)Ee=Ee.value,st=dn+Wt(Ee,Ye++),ht+=ne(Ee,re,ye,st,je);else if(st==="object"){if(typeof P.then=="function")return ne(Rn(P),re,ye,Ee,je);throw re=String(P),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ht}function ve(P,re,ye){if(P==null)return P;var Ee=[],je=0;return ne(P,Ee,"","",function(st){return re.call(ye,st,je++)}),Ee}function Ve(P){if(P._status===-1){var re=P._result;re=re(),re.then(function(ye){(P._status===0||P._status===-1)&&(P._status=1,P._result=ye)},function(ye){(P._status===0||P._status===-1)&&(P._status=2,P._result=ye)}),P._status===-1&&(P._status=0,P._result=re)}if(P._status===1)return P._result.default;throw P._result}var _t=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Ht={map:ve,forEach:function(P,re,ye){ve(P,function(){re.apply(this,arguments)},ye)},count:function(P){var re=0;return ve(P,function(){re++}),re},toArray:function(P){return ve(P,function(re){return re})||[]},only:function(P){if(!L(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return lt.Activity=A,lt.Children=Ht,lt.Component=I,lt.Fragment=n,lt.Profiler=o,lt.PureComponent=xe,lt.StrictMode=s,lt.Suspense=b,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,lt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return D.H.useMemoCache(P)}},lt.cache=function(P){return function(){return P.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(P,re,ye){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Ee=de({},P.props),je=P.key;if(re!=null)for(st in re.key!==void 0&&(je=""+re.key),re)!R.call(re,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&re.ref===void 0||(Ee[st]=re[st]);var st=arguments.length-2;if(st===1)Ee.children=ye;else if(1<st){for(var ht=Array(st),dn=0;dn<st;dn++)ht[dn]=arguments[dn+2];Ee.children=ht}return N(P.type,je,Ee)},lt.createContext=function(P){return P={$$typeof:f,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},lt.createElement=function(P,re,ye){var Ee,je={},st=null;if(re!=null)for(Ee in re.key!==void 0&&(st=""+re.key),re)R.call(re,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(je[Ee]=re[Ee]);var ht=arguments.length-2;if(ht===1)je.children=ye;else if(1<ht){for(var dn=Array(ht),Ye=0;Ye<ht;Ye++)dn[Ye]=arguments[Ye+2];je.children=dn}if(P&&P.defaultProps)for(Ee in ht=P.defaultProps,ht)je[Ee]===void 0&&(je[Ee]=ht[Ee]);return N(P,st,je)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(P){return{$$typeof:m,render:P}},lt.isValidElement=L,lt.lazy=function(P){return{$$typeof:S,_payload:{_status:-1,_result:P},_init:Ve}},lt.memo=function(P,re){return{$$typeof:_,type:P,compare:re===void 0?null:re}},lt.startTransition=function(P){var re=D.T,ye={};D.T=ye;try{var Ee=P(),je=D.S;je!==null&&je(ye,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(He,_t)}catch(st){_t(st)}finally{re!==null&&ye.types!==null&&(re.types=ye.types),D.T=re}},lt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},lt.use=function(P){return D.H.use(P)},lt.useActionState=function(P,re,ye){return D.H.useActionState(P,re,ye)},lt.useCallback=function(P,re){return D.H.useCallback(P,re)},lt.useContext=function(P){return D.H.useContext(P)},lt.useDebugValue=function(){},lt.useDeferredValue=function(P,re){return D.H.useDeferredValue(P,re)},lt.useEffect=function(P,re){return D.H.useEffect(P,re)},lt.useEffectEvent=function(P){return D.H.useEffectEvent(P)},lt.useId=function(){return D.H.useId()},lt.useImperativeHandle=function(P,re,ye){return D.H.useImperativeHandle(P,re,ye)},lt.useInsertionEffect=function(P,re){return D.H.useInsertionEffect(P,re)},lt.useLayoutEffect=function(P,re){return D.H.useLayoutEffect(P,re)},lt.useMemo=function(P,re){return D.H.useMemo(P,re)},lt.useOptimistic=function(P,re){return D.H.useOptimistic(P,re)},lt.useReducer=function(P,re,ye){return D.H.useReducer(P,re,ye)},lt.useRef=function(P){return D.H.useRef(P)},lt.useState=function(P){return D.H.useState(P)},lt.useSyncExternalStore=function(P,re,ye){return D.H.useSyncExternalStore(P,re,ye)},lt.useTransition=function(){return D.H.useTransition()},lt.version="19.2.0",lt}var _b;function Xm(){return _b||(_b=1,sm.exports=uw()),sm.exports}var X=Xm(),rm={exports:{}},gc={},am={exports:{}},om={};var bb;function hw(){return bb||(bb=1,(function(r){function e(ne,ve){var Ve=ne.length;ne.push(ve);e:for(;0<Ve;){var _t=Ve-1>>>1,Ht=ne[_t];if(0<o(Ht,ve))ne[_t]=ve,ne[Ve]=Ht,Ve=_t;else break e}}function n(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var ve=ne[0],Ve=ne.pop();if(Ve!==ve){ne[0]=Ve;e:for(var _t=0,Ht=ne.length,P=Ht>>>1;_t<P;){var re=2*(_t+1)-1,ye=ne[re],Ee=re+1,je=ne[Ee];if(0>o(ye,Ve))Ee<Ht&&0>o(je,ye)?(ne[_t]=je,ne[Ee]=Ve,_t=Ee):(ne[_t]=ye,ne[re]=Ve,_t=re);else if(Ee<Ht&&0>o(je,Ve))ne[_t]=je,ne[Ee]=Ve,_t=Ee;else break e}}return ve}function o(ne,ve){var Ve=ne.sortIndex-ve.sortIndex;return Ve!==0?Ve:ne.id-ve.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var b=[],_=[],S=1,A=null,V=3,O=!1,pe=!1,de=!1,he=!1,I=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,xe=typeof setImmediate<"u"?setImmediate:null;function ut(ne){for(var ve=n(_);ve!==null;){if(ve.callback===null)s(_);else if(ve.startTime<=ne)s(_),ve.sortIndex=ve.expirationTime,e(b,ve);else break;ve=n(_)}}function Bt(ne){if(de=!1,ut(ne),!pe)if(n(b)!==null)pe=!0,He||(He=!0,U());else{var ve=n(_);ve!==null&&Rn(Bt,ve.startTime-ne)}}var He=!1,D=-1,R=5,N=-1;function B(){return he?!0:!(r.unstable_now()-N<R)}function L(){if(he=!1,He){var ne=r.unstable_now();N=ne;var ve=!0;try{e:{pe=!1,de&&(de=!1,Ae(D),D=-1),O=!0;var Ve=V;try{t:{for(ut(ne),A=n(b);A!==null&&!(A.expirationTime>ne&&B());){var _t=A.callback;if(typeof _t=="function"){A.callback=null,V=A.priorityLevel;var Ht=_t(A.expirationTime<=ne);if(ne=r.unstable_now(),typeof Ht=="function"){A.callback=Ht,ut(ne),ve=!0;break t}A===n(b)&&s(b),ut(ne)}else s(b);A=n(b)}if(A!==null)ve=!0;else{var P=n(_);P!==null&&Rn(Bt,P.startTime-ne),ve=!1}}break e}finally{A=null,V=Ve,O=!1}ve=void 0}}finally{ve?U():He=!1}}}var U;if(typeof xe=="function")U=function(){xe(L)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Wt=C.port2;C.port1.onmessage=L,U=function(){Wt.postMessage(null)}}else U=function(){I(L,0)};function Rn(ne,ve){D=I(function(){ne(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return V},r.unstable_next=function(ne){switch(V){case 1:case 2:case 3:var ve=3;break;default:ve=V}var Ve=V;V=ve;try{return ne()}finally{V=Ve}},r.unstable_requestPaint=function(){he=!0},r.unstable_runWithPriority=function(ne,ve){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Ve=V;V=ne;try{return ve()}finally{V=Ve}},r.unstable_scheduleCallback=function(ne,ve,Ve){var _t=r.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?_t+Ve:_t):Ve=_t,ne){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=Ve+Ht,ne={id:S++,callback:ve,priorityLevel:ne,startTime:Ve,expirationTime:Ht,sortIndex:-1},Ve>_t?(ne.sortIndex=Ve,e(_,ne),n(b)===null&&ne===n(_)&&(de?(Ae(D),D=-1):de=!0,Rn(Bt,Ve-_t))):(ne.sortIndex=Ht,e(b,ne),pe||O||(pe=!0,He||(He=!0,U()))),ne},r.unstable_shouldYield=B,r.unstable_wrapCallback=function(ne){var ve=V;return function(){var Ve=V;V=ve;try{return ne.apply(this,arguments)}finally{V=Ve}}}})(om)),om}var vb;function dw(){return vb||(vb=1,am.exports=hw()),am.exports}var lm={exports:{}},Vi={};var Tb;function fw(){if(Tb)return Vi;Tb=1;var r=Xm();function e(b){var _="https://react.dev/errors/"+b;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(b,_,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:b,containerInfo:_,implementation:S}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(b,_){if(b==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Vi.createPortal=function(b,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(b,_,null,S)},Vi.flushSync=function(b){var _=f.T,S=s.p;try{if(f.T=null,s.p=2,b)return b()}finally{f.T=_,s.p=S,s.d.f()}},Vi.preconnect=function(b,_){typeof b=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(b,_))},Vi.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},Vi.preinit=function(b,_){if(typeof b=="string"&&_&&typeof _.as=="string"){var S=_.as,A=m(S,_.crossOrigin),V=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?s.d.S(b,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:V,fetchPriority:O}):S==="script"&&s.d.X(b,{crossOrigin:A,integrity:V,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Vi.preinitModule=function(b,_){if(typeof b=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=m(_.as,_.crossOrigin);s.d.M(b,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(b)},Vi.preload=function(b,_){if(typeof b=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,A=m(S,_.crossOrigin);s.d.L(b,S,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Vi.preloadModule=function(b,_){if(typeof b=="string")if(_){var S=m(_.as,_.crossOrigin);s.d.m(b,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(b)},Vi.requestFormReset=function(b){s.d.r(b)},Vi.unstable_batchedUpdates=function(b,_){return b(_)},Vi.useFormState=function(b,_,S){return f.H.useFormState(b,_,S)},Vi.useFormStatus=function(){return f.H.useHostTransitionStatus()},Vi.version="19.2.0",Vi}var Sb;function mw(){if(Sb)return lm.exports;Sb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=fw(),lm.exports}var Eb;function gw(){if(Eb)return gc;Eb=1;var r=dw(),e=Xm(),n=mw();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function b(t){if(c(t)!==t)throw Error(s(188))}function _(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return b(h),t;if(d===l)return b(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var y=!1,T=h.child;T;){if(T===a){y=!0,a=h,l=d;break}if(T===l){y=!0,l=h,a=d;break}T=T.sibling}if(!y){for(T=d.child;T;){if(T===a){y=!0,a=d,l=h;break}if(T===l){y=!0,l=d,a=h;break}T=T.sibling}if(!y)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,V=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),pe=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),Ae=Symbol.for("react.consumer"),xe=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),Bt=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Wt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case de:return"Fragment";case I:return"Profiler";case he:return"StrictMode";case Bt:return"Suspense";case He:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case pe:return"Portal";case xe:return t.displayName||"Context";case Ae:return(t._context.displayName||"Context")+".Consumer";case ut:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Wt(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return Wt(t(i))}catch{}}return null}var Rn=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve={pending:!1,data:null,method:null,action:null},_t=[],Ht=-1;function P(t){return{current:t}}function re(t){0>Ht||(t.current=_t[Ht],_t[Ht]=null,Ht--)}function ye(t,i){Ht++,_t[Ht]=t.current,t.current=i}var Ee=P(null),je=P(null),st=P(null),ht=P(null);function dn(t,i){switch(ye(st,i),ye(je,t),ye(Ee,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?P_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=P_(i),t=z_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}re(Ee),ye(Ee,t)}function Ye(){re(Ee),re(je),re(st)}function rn(t){t.memoizedState!==null&&ye(ht,t);var i=Ee.current,a=z_(i,t.type);i!==a&&(ye(je,t),ye(Ee,a))}function us(t){je.current===t&&(re(Ee),re(je)),ht.current===t&&(re(ht),uc._currentValue=Ve)}var Js,ni;function Un(t){if(Js===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Js=i&&i[1]||"",ni=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Js+t+ni}var Hs=!1;function Zi(t,i){if(!t||Hs)return"";Hs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var $=ee}Reflect.construct(t,[],le)}else{try{le.call()}catch(ee){$=ee}t.call(le.prototype)}}else{try{throw Error()}catch(ee){$=ee}(le=t())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&$&&typeof ee.stack=="string")return[ee.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],T=d[1];if(y&&T){var x=y.split(`
`),K=T.split(`
`);for(h=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;h<K.length&&!K[h].includes("DetermineComponentFrameRoot");)h++;if(l===x.length||h===K.length)for(l=x.length-1,h=K.length-1;1<=l&&0<=h&&x[l]!==K[h];)h--;for(;1<=l&&0<=h;l--,h--)if(x[l]!==K[h]){if(l!==1||h!==1)do if(l--,h--,0>h||x[l]!==K[h]){var ie=`
`+x[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=h);break}}}finally{Hs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Un(a):""}function Hi(t,i){switch(t.tag){case 26:case 27:case 5:return Un(t.type);case 16:return Un("Lazy");case 13:return t.child!==i&&i!==null?Un("Suspense Fallback"):Un("Suspense");case 19:return Un("SuspenseList");case 0:case 15:return Zi(t.type,!1);case 11:return Zi(t.type.render,!1);case 1:return Zi(t.type,!0);case 31:return Un("Activity");default:return""}}function vr(t){try{var i="",a=null;do i+=Hi(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var fn=Object.prototype.hasOwnProperty,Ut=r.unstable_scheduleCallback,As=r.unstable_cancelCallback,hs=r.unstable_shouldYield,Rs=r.unstable_requestPaint,mn=r.unstable_now,pi=r.unstable_getCurrentPriorityLevel,Ji=r.unstable_ImmediatePriority,Ni=r.unstable_UserBlockingPriority,qn=r.unstable_NormalPriority,es=r.unstable_LowPriority,Fs=r.unstable_IdlePriority,ds=r.log,Tr=r.unstable_setDisableYieldValue,Fi=null,In=null;function yi(t){if(typeof ds=="function"&&Tr(t),In&&typeof In.setStrictMode=="function")try{In.setStrictMode(Fi,t)}catch{}}var tn=Math.clz32?Math.clz32:Dn,er=Math.log,Is=Math.LN2;function Dn(t){return t>>>=0,t===0?32:31-(er(t)/Is|0)|0}var Di=256,Cs=262144,Yt=4194304;function li(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=li(l):(y&=T,y!==0?h=li(y):a||(a=T&~t,a!==0&&(h=li(a))))):(T=l&~d,T!==0?h=li(T):y!==0?h=li(y):a||(a=l&~t,a!==0&&(h=li(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function yn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Ga(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ks(){var t=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),t}function Hn(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function fs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Zr(t,i,a,l,h,d){var y=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,x=t.expirationTimes,K=t.hiddenUpdates;for(a=y&~a;0<a;){var ie=31-tn(a),le=1<<ie;T[ie]=0,x[ie]=-1;var $=K[ie];if($!==null)for(K[ie]=null,ie=0;ie<$.length;ie++){var ee=$[ie];ee!==null&&(ee.lane&=-536870913)}a&=~le}l!==0&&Mi(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(y&~i))}function Mi(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-tn(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function At(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-tn(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Tt(t,i){var a=i&-i;return a=(a&42)!==0?1:_i(a),(a&(t.suspendedLanes|i))!==0?0:a}function _i(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function jn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function tr(){var t=ve.p;return t!==0?t:(t=window.event,t===void 0?32:lb(t.type))}function Mn(t,i){var a=ve.p;try{return ve.p=t,i()}finally{ve.p=a}}var Gi=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Gi,xn="__reactProps$"+Gi,ci="__reactContainer$"+Gi,ts="__reactEvents$"+Gi,j="__reactListeners$"+Gi,Z="__reactHandles$"+Gi,_e="__reactResources$"+Gi,Te="__reactMarker$"+Gi;function Pe(t){delete t[Sn],delete t[xn],delete t[ts],delete t[j],delete t[Z]}function We(t){var i=t[Sn];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ci]||a[Sn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=K_(t);t!==null;){if(a=t[Sn])return a;t=K_(t)}return i}t=a,a=t.parentNode}return null}function Rt(t){if(t=t[Sn]||t[ci]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Cn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Fn(t){var i=t[_e];return i||(i=t[_e]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Xt(t){t[Te]=!0}var nr=new Set,Sr={};function xi(t,i){Ns(t,i),Ns(t+"Capture",i)}function Ns(t,i){for(Sr[t]=i,t=0;t<i.length;t++)nr.add(i[t])}var Jr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ka={},$a={};function ea(t){return fn.call($a,t)?!0:fn.call(Ka,t)?!1:Jr.test(t)?$a[t]=!0:(Ka[t]=!0,!1)}function Er(t,i,a){if(ea(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function En(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function un(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ds(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qa(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ft(t){if(!t._valueTracker){var i=Ds(t)?"checked":"value";t._valueTracker=Qa(t,i,""+t[i])}}function ir(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ds(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var wr=/[\n"\\]/g;function bi(t){return t.replace(wr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ar(t,i,a,l,h,d,y,T){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),i!=null?y==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+gn(i)):t.value!==""+gn(i)&&(t.value=""+gn(i)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),i!=null?Ya(t,y,gn(i)):a!=null?Ya(t,y,gn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+gn(T):t.removeAttribute("name")}function Wa(t,i,a,l,h,d,y,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Ft(t);return}a=a!=null?""+gn(a):"",i=i!=null?""+gn(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),Ft(t)}function Ya(t,i,a){i==="number"&&Ms(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function sr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+gn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ro(t,i,a){if(i!=null&&(i=""+gn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+gn(a):""}function rr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Rn(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=gn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ft(t)}function Oi(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var M=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function q(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||M.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function J(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&q(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&q(t,d,i[d])}function me(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function se(t){return E.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Y(){}var Ie=null;function ke(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ce=null,we=null;function De(t){var i=Rt(t);if(i&&(t=i.stateNode)){var a=t[xn]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ar(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bi(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[xn]||null;if(!h)throw Error(s(90));Ar(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&ir(l)}break e;case"textarea":Ro(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&sr(t,!!a.multiple,i,!1)}}}var dt=!1;function ze(t,i,a){if(dt)return t(i,a);dt=!0;try{var l=t(i);return l}finally{if(dt=!1,(Ce!==null||we!==null)&&(Ou(),Ce&&(i=Ce,t=we,we=Ce=null,De(i),t)))for(i=0;i<t.length;i++)De(t[i])}}function Be(t,i){var a=t.stateNode;if(a===null)return null;var l=a[xn]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ot=!1;if(It)try{var Xe={};Object.defineProperty(Xe,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Xe,Xe),window.removeEventListener("test",Xe,Xe)}catch{Ot=!1}var at=null,fe=null,_n=null;function yt(){if(_n)return _n;var t,i=fe,a=i.length,l,h="value"in at?at.value:at.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var y=a-t;for(l=1;l<=y&&i[a-l]===h[d-l];l++);return _n=h.slice(t,1<l?1-l:void 0)}function bt(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ue(){return!0}function nt(){return!1}function Ze(t){function i(a,l,h,d,y){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ue:nt,this.isPropagationStopped=nt,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ue)},persist:function(){},isPersistent:Ue}),i}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jt=Ze(en),ot=A({},en,{view:0,detail:0}),Gt=Ze(ot),Zt,St,ge,Ge=A({},ot,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ge&&(ge&&t.type==="mousemove"?(Zt=t.screenX-ge.screenX,St=t.screenY-ge.screenY):St=Zt=0,ge=t),Zt)},movementY:function(t){return"movementY"in t?t.movementY:St}}),Fe=Ze(Ge),Me=A({},Ge,{dataTransfer:0}),ft=Ze(Me),pn=A({},ot,{relatedTarget:0}),Ct=Ze(pn),mt=A({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),ii=Ze(mt),si=A({},en,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ui=Ze(si),hi=A({},en,{data:0}),wn=Ze(hi),Ki={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ns={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ar(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=xs[t])?!!i[t]:!1}function $i(){return ar}var Lt=A({},ot,{key:function(t){if(t.key){var i=Ki[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=bt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ns[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(t){return t.type==="keypress"?bt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qi=Ze(Lt),vi=A({},Ge,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gn=Ze(vi),u=A({},ot,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),g=Ze(u),v=A({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Ze(v),F=A({},Ge,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Ze(F),be=A({},en,{newState:0,oldState:0}),Le=Ze(be),Kt=[9,13,27,32],vt=It&&"CompositionEvent"in window,Ke=null;It&&"documentMode"in document&&(Ke=document.documentMode);var qt=It&&"TextEvent"in window&&!Ke,Kn=It&&(!vt||Ke&&8<Ke&&11>=Ke),Li=" ",Gs=!1;function Xa(t,i){switch(t){case"keyup":return Kt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Io(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function M0(t,i){switch(t){case"compositionend":return Io(i);case"keypress":return i.which!==32?null:(Gs=!0,Li);case"textInput":return t=i.data,t===Li&&Gs?null:t;default:return null}}function x0(t,i){if(Co)return t==="compositionend"||!vt&&Xa(t,i)?(t=yt(),_n=fe=at=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Kn&&i.locale!=="ko"?null:i.data;default:return null}}var O0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!O0[t.type]:i==="textarea"}function Yg(t,i,a,l){Ce?we?we.push(l):we=[l]:Ce=l,i=Uu(i,"onChange"),0<i.length&&(a=new jt("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Ml=null,xl=null;function L0(t){M_(t,0)}function Jc(t){var i=Cn(t);if(ir(i))return t}function Xg(t,i){if(t==="change")return i}var Zg=!1;if(It){var cd;if(It){var ud="oninput"in document;if(!ud){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),ud=typeof Jg.oninput=="function"}cd=ud}else cd=!1;Zg=cd&&(!document.documentMode||9<document.documentMode)}function ep(){Ml&&(Ml.detachEvent("onpropertychange",tp),xl=Ml=null)}function tp(t){if(t.propertyName==="value"&&Jc(xl)){var i=[];Yg(i,xl,t,ke(t)),ze(L0,i)}}function V0(t,i,a){t==="focusin"?(ep(),Ml=i,xl=a,Ml.attachEvent("onpropertychange",tp)):t==="focusout"&&ep()}function j0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jc(xl)}function P0(t,i){if(t==="click")return Jc(i)}function z0(t,i){if(t==="input"||t==="change")return Jc(i)}function B0(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ms=typeof Object.is=="function"?Object.is:B0;function Ol(t,i){if(ms(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!fn.call(i,h)||!ms(t[h],i[h]))return!1}return!0}function np(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ip(t,i){var a=np(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=np(a)}}function sp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?sp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function rp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ms(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ms(t.document)}return i}function hd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var U0=It&&"documentMode"in document&&11>=document.documentMode,ko=null,dd=null,Ll=null,fd=!1;function ap(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fd||ko==null||ko!==Ms(l)||(l=ko,"selectionStart"in l&&hd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ll&&Ol(Ll,l)||(Ll=l,l=Uu(dd,"onSelect"),0<l.length&&(i=new jt("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ko)))}function Za(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var No={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},md={},op={};It&&(op=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Ja(t){if(md[t])return md[t];if(!No[t])return t;var i=No[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in op)return md[t]=i[a];return t}var lp=Ja("animationend"),cp=Ja("animationiteration"),up=Ja("animationstart"),q0=Ja("transitionrun"),H0=Ja("transitionstart"),F0=Ja("transitioncancel"),hp=Ja("transitionend"),dp=new Map,gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gd.push("scrollEnd");function Ks(t,i){dp.set(t,i),xi(i,[t])}var eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Os=[],Do=0,pd=0;function tu(){for(var t=Do,i=pd=Do=0;i<t;){var a=Os[i];Os[i++]=null;var l=Os[i];Os[i++]=null;var h=Os[i];Os[i++]=null;var d=Os[i];if(Os[i++]=null,l!==null&&h!==null){var y=l.pending;y===null?h.next=h:(h.next=y.next,y.next=h),l.pending=h}d!==0&&fp(a,h,d)}}function nu(t,i,a,l){Os[Do++]=t,Os[Do++]=i,Os[Do++]=a,Os[Do++]=l,pd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function yd(t,i,a,l){return nu(t,i,a,l),iu(t)}function eo(t,i){return nu(t,null,null,i),iu(t)}function fp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-tn(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function iu(t){if(50<ic)throw ic=0,If=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Mo={};function G0(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(t,i,a,l){return new G0(t,i,a,l)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rr(t,i){var a=t.alternate;return a===null?(a=gs(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function mp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function su(t,i,a,l,h,d){var y=0;if(l=t,typeof t=="function")_d(t)&&(y=1);else if(typeof t=="string")y=YE(t,a,Ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=gs(31,a,i,h),t.elementType=N,t.lanes=d,t;case de:return to(a.children,h,d,i);case he:y=8,h|=24;break;case I:return t=gs(12,a,i,h|2),t.elementType=I,t.lanes=d,t;case Bt:return t=gs(13,a,i,h),t.elementType=Bt,t.lanes=d,t;case He:return t=gs(19,a,i,h),t.elementType=He,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xe:y=10;break e;case Ae:y=9;break e;case ut:y=11;break e;case D:y=14;break e;case R:y=16,l=null;break e}y=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=gs(y,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function to(t,i,a,l){return t=gs(7,t,l,i),t.lanes=a,t}function bd(t,i,a){return t=gs(6,t,null,i),t.lanes=a,t}function gp(t){var i=gs(18,null,null,0);return i.stateNode=t,i}function vd(t,i,a){return i=gs(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var pp=new WeakMap;function Ls(t,i){if(typeof t=="object"&&t!==null){var a=pp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:vr(i)},pp.set(t,i),i)}return{value:t,source:i,stack:vr(i)}}var xo=[],Oo=0,ru=null,Vl=0,Vs=[],js=0,ta=null,or=1,lr="";function Ir(t,i){xo[Oo++]=Vl,xo[Oo++]=ru,ru=t,Vl=i}function yp(t,i,a){Vs[js++]=or,Vs[js++]=lr,Vs[js++]=ta,ta=t;var l=or;t=lr;var h=32-tn(l)-1;l&=~(1<<h),a+=1;var d=32-tn(i)+h;if(30<d){var y=h-h%5;d=(l&(1<<y)-1).toString(32),l>>=y,h-=y,or=1<<32-tn(i)+h|a<<h|l,lr=d+t}else or=1<<d|a<<h|l,lr=t}function Td(t){t.return!==null&&(Ir(t,1),yp(t,1,0))}function Sd(t){for(;t===ru;)ru=xo[--Oo],xo[Oo]=null,Vl=xo[--Oo],xo[Oo]=null;for(;t===ta;)ta=Vs[--js],Vs[js]=null,lr=Vs[--js],Vs[js]=null,or=Vs[--js],Vs[js]=null}function _p(t,i){Vs[js++]=or,Vs[js++]=lr,Vs[js++]=ta,or=i.id,lr=i.overflow,ta=t}var Ti=null,bn=null,Vt=!1,na=null,Ps=!1,Ed=Error(s(519));function ia(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(Ls(i,t)),Ed}function bp(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Sn]=t,i[xn]=l,a){case"dialog":wt("cancel",i),wt("close",i);break;case"iframe":case"object":case"embed":wt("load",i);break;case"video":case"audio":for(a=0;a<rc.length;a++)wt(rc[a],i);break;case"source":wt("error",i);break;case"img":case"image":case"link":wt("error",i),wt("load",i);break;case"details":wt("toggle",i);break;case"input":wt("invalid",i),Wa(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":wt("invalid",i);break;case"textarea":wt("invalid",i),rr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||V_(i.textContent,a)?(l.popover!=null&&(wt("beforetoggle",i),wt("toggle",i)),l.onScroll!=null&&wt("scroll",i),l.onScrollEnd!=null&&wt("scrollend",i),l.onClick!=null&&(i.onclick=Y),i=!0):i=!1,i||ia(t,!0)}function vp(t){for(Ti=t.return;Ti;)switch(Ti.tag){case 5:case 31:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:Ti=Ti.return}}function Lo(t){if(t!==Ti)return!1;if(!Vt)return vp(t),Vt=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||qf(t.type,t.memoizedProps)),a=!a),a&&bn&&ia(t),vp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));bn=G_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));bn=G_(t)}else i===27?(i=bn,ya(t.type)?(t=$f,$f=null,bn=t):bn=i):bn=Ti?Bs(t.stateNode.nextSibling):null;return!0}function no(){bn=Ti=null,Vt=!1}function wd(){var t=na;return t!==null&&(as===null?as=t:as.push.apply(as,t),na=null),t}function jl(t){na===null?na=[t]:na.push(t)}var Ad=P(null),io=null,Cr=null;function sa(t,i,a){ye(Ad,i._currentValue),i._currentValue=a}function kr(t){t._currentValue=Ad.current,re(Ad)}function Rd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Id(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var y=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var x=0;x<i.length;x++)if(T.context===i[x]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Rd(d.return,a,t),l||(y=null);break e}d=T.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(s(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),Rd(y,a,t),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===t){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function Vo(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var T=h.type;ms(h.pendingProps.value,y.value)||(t!==null?t.push(T):t=[T])}}else if(h===ht.current){if(y=h.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(uc):t=[uc])}h=h.return}t!==null&&Id(i,t,a,l),i.flags|=262144}function au(t){for(t=t.firstContext;t!==null;){if(!ms(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function so(t){io=t,Cr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Si(t){return Tp(io,t)}function ou(t,i){return io===null&&so(t),Tp(t,i)}function Tp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Cr===null){if(t===null)throw Error(s(308));Cr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Cr=Cr.next=i;return a}var K0=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},$0=r.unstable_scheduleCallback,Q0=r.unstable_NormalPriority,$n={$$typeof:xe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cd(){return{controller:new K0,data:new Map,refCount:0}}function Pl(t){t.refCount--,t.refCount===0&&$0(Q0,function(){t.controller.abort()})}var zl=null,kd=0,jo=0,Po=null;function W0(t,i){if(zl===null){var a=zl=[];kd=0,jo=xf(),Po={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kd++,i.then(Sp,Sp),i}function Sp(){if(--kd===0&&zl!==null){Po!==null&&(Po.status="fulfilled");var t=zl;zl=null,jo=0,Po=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Y0(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ep=ne.S;ne.S=function(t,i){a_=mn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&W0(t,i),Ep!==null&&Ep(t,i)};var ro=P(null);function Nd(){var t=ro.current;return t!==null?t:hn.pooledCache}function lu(t,i){i===null?ye(ro,ro.current):ye(ro,i.pool)}function wp(){var t=Nd();return t===null?null:{parent:$n._currentValue,pool:t}}var zo=Error(s(460)),Dd=Error(s(474)),cu=Error(s(542)),uu={then:function(){}};function Ap(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Rp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Y,Y),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Cp(t),t;default:if(typeof i.status=="string")i.then(Y,Y);else{if(t=hn,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Cp(t),t}throw oo=i,zo}}function ao(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oo=a,zo):a}}var oo=null;function Ip(){if(oo===null)throw Error(s(459));var t=oo;return oo=null,t}function Cp(t){if(t===zo||t===cu)throw Error(s(483))}var Bo=null,Bl=0;function hu(t){var i=Bl;return Bl+=1,Bo===null&&(Bo=[]),Rp(Bo,t,i)}function Ul(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function du(t,i){throw i.$$typeof===V?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function kp(t){function i(H,z){if(t){var G=H.deletions;G===null?(H.deletions=[z],H.flags|=16):G.push(z)}}function a(H,z){if(!t)return null;for(;z!==null;)i(H,z),z=z.sibling;return null}function l(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function h(H,z){return H=Rr(H,z),H.index=0,H.sibling=null,H}function d(H,z,G){return H.index=G,t?(G=H.alternate,G!==null?(G=G.index,G<z?(H.flags|=67108866,z):G):(H.flags|=67108866,z)):(H.flags|=1048576,z)}function y(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function T(H,z,G,oe){return z===null||z.tag!==6?(z=bd(G,H.mode,oe),z.return=H,z):(z=h(z,G),z.return=H,z)}function x(H,z,G,oe){var Qe=G.type;return Qe===de?ie(H,z,G.props.children,oe,G.key):z!==null&&(z.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===R&&ao(Qe)===z.type)?(z=h(z,G.props),Ul(z,G),z.return=H,z):(z=su(G.type,G.key,G.props,null,H.mode,oe),Ul(z,G),z.return=H,z)}function K(H,z,G,oe){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=vd(G,H.mode,oe),z.return=H,z):(z=h(z,G.children||[]),z.return=H,z)}function ie(H,z,G,oe,Qe){return z===null||z.tag!==7?(z=to(G,H.mode,oe,Qe),z.return=H,z):(z=h(z,G),z.return=H,z)}function le(H,z,G){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=bd(""+z,H.mode,G),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return G=su(z.type,z.key,z.props,null,H.mode,G),Ul(G,z),G.return=H,G;case pe:return z=vd(z,H.mode,G),z.return=H,z;case R:return z=ao(z),le(H,z,G)}if(Rn(z)||U(z))return z=to(z,H.mode,G,null),z.return=H,z;if(typeof z.then=="function")return le(H,hu(z),G);if(z.$$typeof===xe)return le(H,ou(H,z),G);du(H,z)}return null}function $(H,z,G,oe){var Qe=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Qe!==null?null:T(H,z,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case O:return G.key===Qe?x(H,z,G,oe):null;case pe:return G.key===Qe?K(H,z,G,oe):null;case R:return G=ao(G),$(H,z,G,oe)}if(Rn(G)||U(G))return Qe!==null?null:ie(H,z,G,oe,null);if(typeof G.then=="function")return $(H,z,hu(G),oe);if(G.$$typeof===xe)return $(H,z,ou(H,G),oe);du(H,G)}return null}function ee(H,z,G,oe,Qe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(G)||null,T(z,H,""+oe,Qe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:return H=H.get(oe.key===null?G:oe.key)||null,x(z,H,oe,Qe);case pe:return H=H.get(oe.key===null?G:oe.key)||null,K(z,H,oe,Qe);case R:return oe=ao(oe),ee(H,z,G,oe,Qe)}if(Rn(oe)||U(oe))return H=H.get(G)||null,ie(z,H,oe,Qe,null);if(typeof oe.then=="function")return ee(H,z,G,hu(oe),Qe);if(oe.$$typeof===xe)return ee(H,z,G,ou(z,oe),Qe);du(z,oe)}return null}function Ne(H,z,G,oe){for(var Qe=null,$t=null,Oe=z,pt=z=0,Nt=null;Oe!==null&&pt<G.length;pt++){Oe.index>pt?(Nt=Oe,Oe=null):Nt=Oe.sibling;var Qt=$(H,Oe,G[pt],oe);if(Qt===null){Oe===null&&(Oe=Nt);break}t&&Oe&&Qt.alternate===null&&i(H,Oe),z=d(Qt,z,pt),$t===null?Qe=Qt:$t.sibling=Qt,$t=Qt,Oe=Nt}if(pt===G.length)return a(H,Oe),Vt&&Ir(H,pt),Qe;if(Oe===null){for(;pt<G.length;pt++)Oe=le(H,G[pt],oe),Oe!==null&&(z=d(Oe,z,pt),$t===null?Qe=Oe:$t.sibling=Oe,$t=Oe);return Vt&&Ir(H,pt),Qe}for(Oe=l(Oe);pt<G.length;pt++)Nt=ee(Oe,H,pt,G[pt],oe),Nt!==null&&(t&&Nt.alternate!==null&&Oe.delete(Nt.key===null?pt:Nt.key),z=d(Nt,z,pt),$t===null?Qe=Nt:$t.sibling=Nt,$t=Nt);return t&&Oe.forEach(function(Sa){return i(H,Sa)}),Vt&&Ir(H,pt),Qe}function et(H,z,G,oe){if(G==null)throw Error(s(151));for(var Qe=null,$t=null,Oe=z,pt=z=0,Nt=null,Qt=G.next();Oe!==null&&!Qt.done;pt++,Qt=G.next()){Oe.index>pt?(Nt=Oe,Oe=null):Nt=Oe.sibling;var Sa=$(H,Oe,Qt.value,oe);if(Sa===null){Oe===null&&(Oe=Nt);break}t&&Oe&&Sa.alternate===null&&i(H,Oe),z=d(Sa,z,pt),$t===null?Qe=Sa:$t.sibling=Sa,$t=Sa,Oe=Nt}if(Qt.done)return a(H,Oe),Vt&&Ir(H,pt),Qe;if(Oe===null){for(;!Qt.done;pt++,Qt=G.next())Qt=le(H,Qt.value,oe),Qt!==null&&(z=d(Qt,z,pt),$t===null?Qe=Qt:$t.sibling=Qt,$t=Qt);return Vt&&Ir(H,pt),Qe}for(Oe=l(Oe);!Qt.done;pt++,Qt=G.next())Qt=ee(Oe,H,pt,Qt.value,oe),Qt!==null&&(t&&Qt.alternate!==null&&Oe.delete(Qt.key===null?pt:Qt.key),z=d(Qt,z,pt),$t===null?Qe=Qt:$t.sibling=Qt,$t=Qt);return t&&Oe.forEach(function(ow){return i(H,ow)}),Vt&&Ir(H,pt),Qe}function ln(H,z,G,oe){if(typeof G=="object"&&G!==null&&G.type===de&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case O:e:{for(var Qe=G.key;z!==null;){if(z.key===Qe){if(Qe=G.type,Qe===de){if(z.tag===7){a(H,z.sibling),oe=h(z,G.props.children),oe.return=H,H=oe;break e}}else if(z.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===R&&ao(Qe)===z.type){a(H,z.sibling),oe=h(z,G.props),Ul(oe,G),oe.return=H,H=oe;break e}a(H,z);break}else i(H,z);z=z.sibling}G.type===de?(oe=to(G.props.children,H.mode,oe,G.key),oe.return=H,H=oe):(oe=su(G.type,G.key,G.props,null,H.mode,oe),Ul(oe,G),oe.return=H,H=oe)}return y(H);case pe:e:{for(Qe=G.key;z!==null;){if(z.key===Qe)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){a(H,z.sibling),oe=h(z,G.children||[]),oe.return=H,H=oe;break e}else{a(H,z);break}else i(H,z);z=z.sibling}oe=vd(G,H.mode,oe),oe.return=H,H=oe}return y(H);case R:return G=ao(G),ln(H,z,G,oe)}if(Rn(G))return Ne(H,z,G,oe);if(U(G)){if(Qe=U(G),typeof Qe!="function")throw Error(s(150));return G=Qe.call(G),et(H,z,G,oe)}if(typeof G.then=="function")return ln(H,z,hu(G),oe);if(G.$$typeof===xe)return ln(H,z,ou(H,G),oe);du(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,z!==null&&z.tag===6?(a(H,z.sibling),oe=h(z,G),oe.return=H,H=oe):(a(H,z),oe=bd(G,H.mode,oe),oe.return=H,H=oe),y(H)):a(H,z)}return function(H,z,G,oe){try{Bl=0;var Qe=ln(H,z,G,oe);return Bo=null,Qe}catch(Oe){if(Oe===zo||Oe===cu)throw Oe;var $t=gs(29,Oe,null,H.mode);return $t.lanes=oe,$t.return=H,$t}finally{}}}var lo=kp(!0),Np=kp(!1),ra=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function aa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function oa(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Jt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=iu(t),fp(t,null,a),i}return nu(t,l,i,a),iu(t)}function ql(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,At(t,a)}}function Od(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Ld=!1;function Hl(){if(Ld){var t=Po;if(t!==null)throw t}}function Fl(t,i,a,l){Ld=!1;var h=t.updateQueue;ra=!1;var d=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var x=T,K=x.next;x.next=null,y===null?d=K:y.next=K,y=x;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==y&&(T===null?ie.firstBaseUpdate=K:T.next=K,ie.lastBaseUpdate=x))}if(d!==null){var le=h.baseState;y=0,ie=K=x=null,T=d;do{var $=T.lane&-536870913,ee=$!==T.lane;if(ee?(kt&$)===$:(l&$)===$){$!==0&&$===jo&&(Ld=!0),ie!==null&&(ie=ie.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ne=t,et=T;$=i;var ln=a;switch(et.tag){case 1:if(Ne=et.payload,typeof Ne=="function"){le=Ne.call(ln,le,$);break e}le=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=et.payload,$=typeof Ne=="function"?Ne.call(ln,le,$):Ne,$==null)break e;le=A({},le,$);break e;case 2:ra=!0}}$=T.callback,$!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=h.callbacks,ee===null?h.callbacks=[$]:ee.push($))}else ee={lane:$,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(K=ie=ee,x=le):ie=ie.next=ee,y|=$;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;ee=T,T=ee.next,ee.next=null,h.lastBaseUpdate=ee,h.shared.pending=null}}while(!0);ie===null&&(x=le),h.baseState=x,h.firstBaseUpdate=K,h.lastBaseUpdate=ie,d===null&&(h.shared.lanes=0),da|=y,t.lanes=y,t.memoizedState=le}}function Dp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Mp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Dp(a[t],i)}var Uo=P(null),fu=P(0);function xp(t,i){t=Pr,ye(fu,t),ye(Uo,i),Pr=t|i.baseLanes}function Vd(){ye(fu,Pr),ye(Uo,Uo.current)}function jd(){Pr=fu.current,re(Uo),re(fu)}var ps=P(null),zs=null;function la(t){var i=t.alternate;ye(Pn,Pn.current&1),ye(ps,t),zs===null&&(i===null||Uo.current!==null||i.memoizedState!==null)&&(zs=t)}function Pd(t){ye(Pn,Pn.current),ye(ps,t),zs===null&&(zs=t)}function Op(t){t.tag===22?(ye(Pn,Pn.current),ye(ps,t),zs===null&&(zs=t)):ca()}function ca(){ye(Pn,Pn.current),ye(ps,ps.current)}function ys(t){re(ps),zs===t&&(zs=null),re(Pn)}var Pn=P(0);function mu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gf(a)||Kf(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Nr=0,gt=null,an=null,Qn=null,gu=!1,qo=!1,co=!1,pu=0,Gl=0,Ho=null,X0=0;function On(){throw Error(s(321))}function zd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!ms(t[a],i[a]))return!1;return!0}function Bd(t,i,a,l,h,d){return Nr=d,gt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ne.H=t===null||t.memoizedState===null?yy:tf,co=!1,d=a(l,h),co=!1,qo&&(d=Vp(i,a,l,h)),Lp(t),d}function Lp(t){ne.H=Ql;var i=an!==null&&an.next!==null;if(Nr=0,Qn=an=gt=null,gu=!1,Gl=0,Ho=null,i)throw Error(s(300));t===null||Wn||(t=t.dependencies,t!==null&&au(t)&&(Wn=!0))}function Vp(t,i,a,l){gt=t;var h=0;do{if(qo&&(Ho=null),Gl=0,qo=!1,25<=h)throw Error(s(301));if(h+=1,Qn=an=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}ne.H=_y,d=i(a,l)}while(qo);return d}function Z0(){var t=ne.H,i=t.useState()[0];return i=typeof i.then=="function"?Kl(i):i,t=t.useState()[0],(an!==null?an.memoizedState:null)!==t&&(gt.flags|=1024),i}function Ud(){var t=pu!==0;return pu=0,t}function qd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Hd(t){if(gu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}gu=!1}Nr=0,Qn=an=gt=null,qo=!1,Gl=pu=0,Ho=null}function Wi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?gt.memoizedState=Qn=t:Qn=Qn.next=t,Qn}function zn(){if(an===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=an.next;var i=Qn===null?gt.memoizedState:Qn.next;if(i!==null)Qn=i,an=t;else{if(t===null)throw gt.alternate===null?Error(s(467)):Error(s(310));an=t,t={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Qn===null?gt.memoizedState=Qn=t:Qn=Qn.next=t}return Qn}function yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(t){var i=Gl;return Gl+=1,Ho===null&&(Ho=[]),t=Rp(Ho,t,i),i=gt,(Qn===null?i.memoizedState:Qn.next)===null&&(i=i.alternate,ne.H=i===null||i.memoizedState===null?yy:tf),t}function _u(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Kl(t);if(t.$$typeof===xe)return Si(t)}throw Error(s(438,String(t)))}function Fd(t){var i=null,a=gt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=gt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=yu(),gt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=B;return i.index++,a}function Dr(t,i){return typeof i=="function"?i(t):i}function bu(t){var i=zn();return Gd(i,an,t)}function Gd(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var y=h.next;h.next=d.next,d.next=y}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=y=null,x=null,K=i,ie=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(kt&le)===le:(Nr&le)===le){var $=K.revertLane;if($===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===jo&&(ie=!0);else if((Nr&$)===$){K=K.next,$===jo&&(ie=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},x===null?(T=x=le,y=d):x=x.next=le,gt.lanes|=$,da|=$;le=K.action,co&&a(d,le),d=K.hasEagerState?K.eagerState:a(d,le)}else $={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},x===null?(T=x=$,y=d):x=x.next=$,gt.lanes|=le,da|=le;K=K.next}while(K!==null&&K!==i);if(x===null?y=d:x.next=T,!ms(d,t.memoizedState)&&(Wn=!0,ie&&(a=Po,a!==null)))throw a;t.memoizedState=d,t.baseState=y,t.baseQueue=x,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Kd(t){var i=zn(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var y=h=h.next;do d=t(d,y.action),y=y.next;while(y!==h);ms(d,i.memoizedState)||(Wn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function jp(t,i,a){var l=gt,h=zn(),d=Vt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var y=!ms((an||h).memoizedState,a);if(y&&(h.memoizedState=a,Wn=!0),h=h.queue,Wd(Bp.bind(null,l,h,t),[t]),h.getSnapshot!==i||y||Qn!==null&&Qn.memoizedState.tag&1){if(l.flags|=2048,Fo(9,{destroy:void 0},zp.bind(null,l,h,a,i),null),hn===null)throw Error(s(349));d||(Nr&127)!==0||Pp(l,i,a)}return a}function Pp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=gt.updateQueue,i===null?(i=yu(),gt.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function zp(t,i,a,l){i.value=a,i.getSnapshot=l,Up(i)&&qp(t)}function Bp(t,i,a){return a(function(){Up(i)&&qp(t)})}function Up(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!ms(t,a)}catch{return!0}}function qp(t){var i=eo(t,2);i!==null&&os(i,t,2)}function $d(t){var i=Wi();if(typeof t=="function"){var a=t;if(t=a(),co){yi(!0);try{a()}finally{yi(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:t},i}function Hp(t,i,a,l){return t.baseState=a,Gd(t,an,typeof l=="function"?l:Dr)}function J0(t,i,a,l,h){if(Su(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};ne.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Fp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Fp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=ne.T,y={};ne.T=y;try{var T=a(h,l),x=ne.S;x!==null&&x(y,T),Gp(t,i,T)}catch(K){Qd(t,i,K)}finally{d!==null&&y.types!==null&&(d.types=y.types),ne.T=d}}else try{d=a(h,l),Gp(t,i,d)}catch(K){Qd(t,i,K)}}function Gp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Kp(t,i,l)},function(l){return Qd(t,i,l)}):Kp(t,i,a)}function Kp(t,i,a){i.status="fulfilled",i.value=a,$p(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Fp(t,a)))}function Qd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,$p(i),i=i.next;while(i!==l)}t.action=null}function $p(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Qp(t,i){return i}function Wp(t,i){if(Vt){var a=hn.formState;if(a!==null){e:{var l=gt;if(Vt){if(bn){t:{for(var h=bn,d=Ps;h.nodeType!==8;){if(!d){h=null;break t}if(h=Bs(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){bn=Bs(h.nextSibling),l=h.data==="F!";break e}}ia(l)}l=!1}l&&(i=a[0])}}return a=Wi(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qp,lastRenderedState:i},a.queue=l,a=my.bind(null,gt,l),l.dispatch=a,l=$d(!1),d=ef.bind(null,gt,!1,l.queue),l=Wi(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=J0.bind(null,gt,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Yp(t){var i=zn();return Xp(i,an,t)}function Xp(t,i,a){if(i=Gd(t,i,Qp)[0],t=bu(Dr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Kl(i)}catch(y){throw y===zo?cu:y}else l=i;i=zn();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(gt.flags|=2048,Fo(9,{destroy:void 0},eE.bind(null,h,a),null)),[l,d,t]}function eE(t,i){t.action=i}function Zp(t){var i=zn(),a=an;if(a!==null)return Xp(i,a,t);zn(),i=i.memoizedState,a=zn();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Fo(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=gt.updateQueue,i===null&&(i=yu(),gt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Jp(){return zn().memoizedState}function vu(t,i,a,l){var h=Wi();gt.flags|=t,h.memoizedState=Fo(1|i,{destroy:void 0},a,l===void 0?null:l)}function Tu(t,i,a,l){var h=zn();l=l===void 0?null:l;var d=h.memoizedState.inst;an!==null&&l!==null&&zd(l,an.memoizedState.deps)?h.memoizedState=Fo(i,d,a,l):(gt.flags|=t,h.memoizedState=Fo(1|i,d,a,l))}function ey(t,i){vu(8390656,8,t,i)}function Wd(t,i){Tu(2048,8,t,i)}function tE(t){gt.flags|=4;var i=gt.updateQueue;if(i===null)i=yu(),gt.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function ty(t){var i=zn().memoizedState;return tE({ref:i,nextImpl:t}),function(){if((Jt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ny(t,i){return Tu(4,2,t,i)}function iy(t,i){return Tu(4,4,t,i)}function sy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ry(t,i,a){a=a!=null?a.concat([t]):null,Tu(4,4,sy.bind(null,i,t),a)}function Yd(){}function ay(t,i){var a=zn();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&zd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function oy(t,i){var a=zn();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&zd(i,l[1]))return l[0];if(l=t(),co){yi(!0);try{t()}finally{yi(!1)}}return a.memoizedState=[l,i],l}function Xd(t,i,a){return a===void 0||(Nr&1073741824)!==0&&(kt&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=l_(),gt.lanes|=t,da|=t,a)}function ly(t,i,a,l){return ms(a,i)?a:Uo.current!==null?(t=Xd(t,a,l),ms(t,i)||(Wn=!0),t):(Nr&42)===0||(Nr&1073741824)!==0&&(kt&261930)===0?(Wn=!0,t.memoizedState=a):(t=l_(),gt.lanes|=t,da|=t,i)}function cy(t,i,a,l,h){var d=ve.p;ve.p=d!==0&&8>d?d:8;var y=ne.T,T={};ne.T=T,ef(t,!1,i,a);try{var x=h(),K=ne.S;if(K!==null&&K(T,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var ie=Y0(x,l);$l(t,i,ie,vs(t))}else $l(t,i,l,vs(t))}catch(le){$l(t,i,{then:function(){},status:"rejected",reason:le},vs())}finally{ve.p=d,y!==null&&T.types!==null&&(y.types=T.types),ne.T=y}}function nE(){}function Zd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=uy(t).queue;cy(t,h,i,Ve,a===null?nE:function(){return hy(t),a(l)})}function uy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Ve,baseState:Ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:Ve},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function hy(t){var i=uy(t);i.next===null&&(i=t.alternate.memoizedState),$l(t,i.next.queue,{},vs())}function Jd(){return Si(uc)}function dy(){return zn().memoizedState}function fy(){return zn().memoizedState}function iE(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=vs();t=aa(a);var l=oa(i,t,a);l!==null&&(os(l,i,a),ql(l,i,a)),i={cache:Cd()},t.payload=i;return}i=i.return}}function sE(t,i,a){var l=vs();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Su(t)?gy(i,a):(a=yd(t,i,a,l),a!==null&&(os(a,t,l),py(a,i,l)))}function my(t,i,a){var l=vs();$l(t,i,a,l)}function $l(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Su(t))gy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var y=i.lastRenderedState,T=d(y,a);if(h.hasEagerState=!0,h.eagerState=T,ms(T,y))return nu(t,i,h,0),hn===null&&tu(),!1}catch{}finally{}if(a=yd(t,i,h,l),a!==null)return os(a,t,l),py(a,i,l),!0}return!1}function ef(t,i,a,l){if(l={lane:2,revertLane:xf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Su(t)){if(i)throw Error(s(479))}else i=yd(t,a,l,2),i!==null&&os(i,t,2)}function Su(t){var i=t.alternate;return t===gt||i!==null&&i===gt}function gy(t,i){qo=gu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function py(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,At(t,a)}}var Ql={readContext:Si,use:_u,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};Ql.useEffectEvent=On;var yy={readContext:Si,use:_u,useCallback:function(t,i){return Wi().memoizedState=[t,i===void 0?null:i],t},useContext:Si,useEffect:ey,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,vu(4194308,4,sy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return vu(4194308,4,t,i)},useInsertionEffect:function(t,i){vu(4,2,t,i)},useMemo:function(t,i){var a=Wi();i=i===void 0?null:i;var l=t();if(co){yi(!0);try{t()}finally{yi(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Wi();if(a!==void 0){var h=a(i);if(co){yi(!0);try{a(i)}finally{yi(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=sE.bind(null,gt,t),[l.memoizedState,t]},useRef:function(t){var i=Wi();return t={current:t},i.memoizedState=t},useState:function(t){t=$d(t);var i=t.queue,a=my.bind(null,gt,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Yd,useDeferredValue:function(t,i){var a=Wi();return Xd(a,t,i)},useTransition:function(){var t=$d(!1);return t=cy.bind(null,gt,t.queue,!0,!1),Wi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=gt,h=Wi();if(Vt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),hn===null)throw Error(s(349));(kt&127)!==0||Pp(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,ey(Bp.bind(null,l,d,t),[t]),l.flags|=2048,Fo(9,{destroy:void 0},zp.bind(null,l,d,a,i),null),a},useId:function(){var t=Wi(),i=hn.identifierPrefix;if(Vt){var a=lr,l=or;a=(l&~(1<<32-tn(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=pu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=X0++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Jd,useFormState:Wp,useActionState:Wp,useOptimistic:function(t){var i=Wi();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ef.bind(null,gt,!0,a),a.dispatch=i,[t,i]},useMemoCache:Fd,useCacheRefresh:function(){return Wi().memoizedState=iE.bind(null,gt)},useEffectEvent:function(t){var i=Wi(),a={impl:t};return i.memoizedState=a,function(){if((Jt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:Si,use:_u,useCallback:ay,useContext:Si,useEffect:Wd,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:oy,useReducer:bu,useRef:Jp,useState:function(){return bu(Dr)},useDebugValue:Yd,useDeferredValue:function(t,i){var a=zn();return ly(a,an.memoizedState,t,i)},useTransition:function(){var t=bu(Dr)[0],i=zn().memoizedState;return[typeof t=="boolean"?t:Kl(t),i]},useSyncExternalStore:jp,useId:dy,useHostTransitionStatus:Jd,useFormState:Yp,useActionState:Yp,useOptimistic:function(t,i){var a=zn();return Hp(a,an,t,i)},useMemoCache:Fd,useCacheRefresh:fy};tf.useEffectEvent=ty;var _y={readContext:Si,use:_u,useCallback:ay,useContext:Si,useEffect:Wd,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:oy,useReducer:Kd,useRef:Jp,useState:function(){return Kd(Dr)},useDebugValue:Yd,useDeferredValue:function(t,i){var a=zn();return an===null?Xd(a,t,i):ly(a,an.memoizedState,t,i)},useTransition:function(){var t=Kd(Dr)[0],i=zn().memoizedState;return[typeof t=="boolean"?t:Kl(t),i]},useSyncExternalStore:jp,useId:dy,useHostTransitionStatus:Jd,useFormState:Zp,useActionState:Zp,useOptimistic:function(t,i){var a=zn();return an!==null?Hp(a,an,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Fd,useCacheRefresh:fy};_y.useEffectEvent=ty;function nf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=vs(),h=aa(l);h.payload=i,a!=null&&(h.callback=a),i=oa(t,h,l),i!==null&&(os(i,t,l),ql(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=vs(),h=aa(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=oa(t,h,l),i!==null&&(os(i,t,l),ql(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=vs(),l=aa(a);l.tag=2,i!=null&&(l.callback=i),i=oa(t,l,a),i!==null&&(os(i,t,a),ql(i,t,a))}};function by(t,i,a,l,h,d,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,y):i.prototype&&i.prototype.isPureReactComponent?!Ol(a,l)||!Ol(h,d):!0}function vy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&sf.enqueueReplaceState(i,i.state,null)}function uo(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Ty(t){eu(t)}function Sy(t){console.error(t)}function Ey(t){eu(t)}function Eu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function wy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function rf(t,i,a){return a=aa(a),a.tag=3,a.payload={element:null},a.callback=function(){Eu(t,i)},a}function Ay(t){return t=aa(t),t.tag=3,t}function Ry(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){wy(i,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){wy(i,a,l),typeof h!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function rE(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Vo(i,a,h,!0),a=ps.current,a!==null){switch(a.tag){case 31:case 13:return zs===null?Lu():a.alternate===null&&Ln===0&&(Ln=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===uu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Nf(t,l,h)),!1;case 22:return a.flags|=65536,l===uu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Nf(t,l,h)),!1}throw Error(s(435,a.tag))}return Nf(t,l,h),Lu(),!1}if(Vt)return i=ps.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Ed&&(t=Error(s(422),{cause:l}),jl(Ls(t,a)))):(l!==Ed&&(i=Error(s(423),{cause:l}),jl(Ls(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ls(l,a),h=rf(t.stateNode,l,h),Od(t,h),Ln!==4&&(Ln=2)),!1;var d=Error(s(520),{cause:l});if(d=Ls(d,a),nc===null?nc=[d]:nc.push(d),Ln!==4&&(Ln=2),i===null)return!0;l=Ls(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=rf(a.stateNode,l,t),Od(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(fa===null||!fa.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ay(h),Ry(h,t,a,l),Od(a,h),!1}a=a.return}while(a!==null);return!1}var af=Error(s(461)),Wn=!1;function Ei(t,i,a,l){i.child=t===null?Np(i,null,a,l):lo(i,t.child,a,l)}function Iy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var y={};for(var T in l)T!=="ref"&&(y[T]=l[T])}else y=l;return so(i),l=Bd(t,i,a,y,d,h),T=Ud(),t!==null&&!Wn?(qd(t,i,h),Mr(t,i,h)):(Vt&&T&&Td(i),i.flags|=1,Ei(t,i,l,h),i.child)}function Cy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!_d(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ky(t,i,d,l,h)):(t=su(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!mf(t,h)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ol,a(y,l)&&t.ref===i.ref)return Mr(t,i,h)}return i.flags|=1,t=Rr(d,l),t.ref=i.ref,t.return=i,i.child=t}function ky(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Ol(d,l)&&t.ref===i.ref)if(Wn=!1,i.pendingProps=l=d,mf(t,h))(t.flags&131072)!==0&&(Wn=!0);else return i.lanes=t.lanes,Mr(t,i,h)}return of(t,i,a,l,h)}function Ny(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return Dy(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&lu(i,d!==null?d.cachePool:null),d!==null?xp(i,d):Vd(),Op(i);else return l=i.lanes=536870912,Dy(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(lu(i,d.cachePool),xp(i,d),ca(),i.memoizedState=null):(t!==null&&lu(i,null),Vd(),ca());return Ei(t,i,h,a),i.child}function Wl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Dy(t,i,a,l,h){var d=Nd();return d=d===null?null:{parent:$n._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&lu(i,null),Vd(),Op(i),t!==null&&Vo(t,i,l,!0),i.childLanes=h,null}function wu(t,i){return i=Ru({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function My(t,i,a){return lo(i,t.child,null,a),t=wu(i,i.pendingProps),t.flags|=2,ys(i),i.memoizedState=null,t}function aE(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Vt){if(l.mode==="hidden")return t=wu(i,l),i.lanes=536870912,Wl(null,t);if(Pd(i),(t=bn)?(t=F_(t,Ps),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ta!==null?{id:or,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},a=gp(t),a.return=i,i.child=a,Ti=i,bn=null)):t=null,t===null)throw ia(i);return i.lanes=536870912,null}return wu(i,l)}var d=t.memoizedState;if(d!==null){var y=d.dehydrated;if(Pd(i),h)if(i.flags&256)i.flags&=-257,i=My(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Wn||Vo(t,i,a,!1),h=(a&t.childLanes)!==0,Wn||h){if(l=hn,l!==null&&(y=Tt(l,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,eo(t,y),os(l,t,y),af;Lu(),i=My(t,i,a)}else t=d.treeContext,bn=Bs(y.nextSibling),Ti=i,Vt=!0,na=null,Ps=!1,t!==null&&_p(i,t),i=wu(i,l),i.flags|=4096;return i}return t=Rr(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Au(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function of(t,i,a,l,h){return so(i),a=Bd(t,i,a,l,void 0,h),l=Ud(),t!==null&&!Wn?(qd(t,i,h),Mr(t,i,h)):(Vt&&l&&Td(i),i.flags|=1,Ei(t,i,a,h),i.child)}function xy(t,i,a,l,h,d){return so(i),i.updateQueue=null,a=Vp(i,l,a,h),Lp(t),l=Ud(),t!==null&&!Wn?(qd(t,i,d),Mr(t,i,d)):(Vt&&l&&Td(i),i.flags|=1,Ei(t,i,a,d),i.child)}function Oy(t,i,a,l,h){if(so(i),i.stateNode===null){var d=Mo,y=a.contextType;typeof y=="object"&&y!==null&&(d=Si(y)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Md(i),y=a.contextType,d.context=typeof y=="object"&&y!==null?Si(y):Mo,d.state=i.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(nf(i,a,y,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&sf.enqueueReplaceState(d,d.state,null),Fl(i,l,d,h),Hl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,x=uo(a,T);d.props=x;var K=d.context,ie=a.contextType;y=Mo,typeof ie=="object"&&ie!==null&&(y=Si(ie));var le=a.getDerivedStateFromProps;ie=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,ie||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||K!==y)&&vy(i,d,l,y),ra=!1;var $=i.memoizedState;d.state=$,Fl(i,l,d,h),Hl(),K=i.memoizedState,T||$!==K||ra?(typeof le=="function"&&(nf(i,a,le,l),K=i.memoizedState),(x=ra||by(i,a,x,l,$,K,y))?(ie||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=y,l=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,xd(t,i),y=i.memoizedProps,ie=uo(a,y),d.props=ie,le=i.pendingProps,$=d.context,K=a.contextType,x=Mo,typeof K=="object"&&K!==null&&(x=Si(K)),T=a.getDerivedStateFromProps,(K=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==le||$!==x)&&vy(i,d,l,x),ra=!1,$=i.memoizedState,d.state=$,Fl(i,l,d,h),Hl();var ee=i.memoizedState;y!==le||$!==ee||ra||t!==null&&t.dependencies!==null&&au(t.dependencies)?(typeof T=="function"&&(nf(i,a,T,l),ee=i.memoizedState),(ie=ra||by(i,a,ie,l,$,ee,x)||t!==null&&t.dependencies!==null&&au(t.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ee,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ee,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=ee),d.props=l,d.state=ee,d.context=x,l=ie):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Au(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=lo(i,t.child,null,h),i.child=lo(i,null,a,h)):Ei(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Mr(t,i,h),t}function Ly(t,i,a,l){return no(),i.flags|=256,Ei(t,i,a,l),i.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cf(t){return{baseLanes:t,cachePool:wp()}}function uf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=bs),t}function Vy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,y;if((y=d)||(y=t!==null&&t.memoizedState===null?!1:(Pn.current&2)!==0),y&&(h=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,t===null){if(Vt){if(h?la(i):ca(),(t=bn)?(t=F_(t,Ps),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ta!==null?{id:or,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},a=gp(t),a.return=i,i.child=a,Ti=i,bn=null)):t=null,t===null)throw ia(i);return Kf(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(ca(),h=i.mode,T=Ru({mode:"hidden",children:T},h),l=to(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=cf(a),l.childLanes=uf(t,y,a),i.memoizedState=lf,Wl(null,l)):(la(i),hf(i,T))}var x=t.memoizedState;if(x!==null&&(T=x.dehydrated,T!==null)){if(d)i.flags&256?(la(i),i.flags&=-257,i=df(t,i,a)):i.memoizedState!==null?(ca(),i.child=t.child,i.flags|=128,i=null):(ca(),T=l.fallback,h=i.mode,l=Ru({mode:"visible",children:l.children},h),T=to(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,lo(i,t.child,null,a),l=i.child,l.memoizedState=cf(a),l.childLanes=uf(t,y,a),i.memoizedState=lf,i=Wl(null,l));else if(la(i),Kf(T)){if(y=T.nextSibling&&T.nextSibling.dataset,y)var K=y.dgst;y=K,l=Error(s(419)),l.stack="",l.digest=y,jl({value:l,source:null,stack:null}),i=df(t,i,a)}else if(Wn||Vo(t,i,a,!1),y=(a&t.childLanes)!==0,Wn||y){if(y=hn,y!==null&&(l=Tt(y,a),l!==0&&l!==x.retryLane))throw x.retryLane=l,eo(t,l),os(y,t,l),af;Gf(T)||Lu(),i=df(t,i,a)}else Gf(T)?(i.flags|=192,i.child=t.child,i=null):(t=x.treeContext,bn=Bs(T.nextSibling),Ti=i,Vt=!0,na=null,Ps=!1,t!==null&&_p(i,t),i=hf(i,l.children),i.flags|=4096);return i}return h?(ca(),T=l.fallback,h=i.mode,x=t.child,K=x.sibling,l=Rr(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,K!==null?T=Rr(K,T):(T=to(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Wl(null,l),l=i.child,T=t.child.memoizedState,T===null?T=cf(a):(h=T.cachePool,h!==null?(x=$n._currentValue,h=h.parent!==x?{parent:x,pool:x}:h):h=wp(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=uf(t,y,a),i.memoizedState=lf,Wl(t.child,l)):(la(i),a=t.child,t=a.sibling,a=Rr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(y=i.deletions,y===null?(i.deletions=[t],i.flags|=16):y.push(t)),i.child=a,i.memoizedState=null,a)}function hf(t,i){return i=Ru({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ru(t,i){return t=gs(22,t,null,i),t.lanes=0,t}function df(t,i,a){return lo(i,t.child,null,a),t=hf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function jy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Rd(t.return,i,a)}function ff(t,i,a,l,h,d){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=h,y.treeForkCount=d)}function Py(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var y=Pn.current,T=(y&2)!==0;if(T?(y=y&1|2,i.flags|=128):y&=1,ye(Pn,y),Ei(t,i,l,a),l=Vt?Vl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jy(t,a,i);else if(t.tag===19)jy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&mu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),ff(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&mu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ff(i,!0,a,null,d,l);break;case"together":ff(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Mr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),da|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Vo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Rr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Rr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function mf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&au(t)))}function oE(t,i,a){switch(i.tag){case 3:dn(i,i.stateNode.containerInfo),sa(i,$n,t.memoizedState.cache),no();break;case 27:case 5:rn(i);break;case 4:dn(i,i.stateNode.containerInfo);break;case 10:sa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Pd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(la(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Vy(t,i,a):(la(i),t=Mr(t,i,a),t!==null?t.sibling:null);la(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Vo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Py(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ye(Pn,Pn.current),l)break;return null;case 22:return i.lanes=0,Ny(t,i,a,i.pendingProps);case 24:sa(i,$n,t.memoizedState.cache)}return Mr(t,i,a)}function zy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Wn=!0;else{if(!mf(t,a)&&(i.flags&128)===0)return Wn=!1,oE(t,i,a);Wn=(t.flags&131072)!==0}else Wn=!1,Vt&&(i.flags&1048576)!==0&&yp(i,Vl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=ao(i.elementType),i.type=t,typeof t=="function")_d(t)?(l=uo(t,l),i.tag=1,i=Oy(null,i,t,l,a)):(i.tag=0,i=of(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ut){i.tag=11,i=Iy(null,i,t,l,a);break e}else if(h===D){i.tag=14,i=Cy(null,i,t,l,a);break e}}throw i=Wt(t)||t,Error(s(306,i,""))}}return i;case 0:return of(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=uo(l,i.pendingProps),Oy(t,i,l,h,a);case 3:e:{if(dn(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,xd(t,i),Fl(i,l,null,a);var y=i.memoizedState;if(l=y.cache,sa(i,$n,l),l!==d.cache&&Id(i,[$n],a,!0),Hl(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ly(t,i,l,a);break e}else if(l!==h){h=Ls(Error(s(424)),i),jl(h),i=Ly(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bn=Bs(t.firstChild),Ti=i,Vt=!0,na=null,Ps=!0,a=Np(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(no(),l===h){i=Mr(t,i,a);break e}Ei(t,i,l,a)}i=i.child}return i;case 26:return Au(t,i),t===null?(a=Y_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Vt||(a=i.type,t=i.pendingProps,l=qu(st.current).createElement(a),l[Sn]=i,l[xn]=t,wi(l,a,t),Xt(l),i.stateNode=l):i.memoizedState=Y_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return rn(i),t===null&&Vt&&(l=i.stateNode=$_(i.type,i.pendingProps,st.current),Ti=i,Ps=!0,h=bn,ya(i.type)?($f=h,bn=Bs(l.firstChild)):bn=h),Ei(t,i,i.pendingProps.children,a),Au(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Vt&&((h=l=bn)&&(l=jE(l,i.type,i.pendingProps,Ps),l!==null?(i.stateNode=l,Ti=i,bn=Bs(l.firstChild),Ps=!1,h=!0):h=!1),h||ia(i)),rn(i),h=i.type,d=i.pendingProps,y=t!==null?t.memoizedProps:null,l=d.children,qf(h,d)?l=null:y!==null&&qf(h,y)&&(i.flags|=32),i.memoizedState!==null&&(h=Bd(t,i,Z0,null,null,a),uc._currentValue=h),Au(t,i),Ei(t,i,l,a),i.child;case 6:return t===null&&Vt&&((t=a=bn)&&(a=PE(a,i.pendingProps,Ps),a!==null?(i.stateNode=a,Ti=i,bn=null,t=!0):t=!1),t||ia(i)),null;case 13:return Vy(t,i,a);case 4:return dn(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=lo(i,null,l,a):Ei(t,i,l,a),i.child;case 11:return Iy(t,i,i.type,i.pendingProps,a);case 7:return Ei(t,i,i.pendingProps,a),i.child;case 8:return Ei(t,i,i.pendingProps.children,a),i.child;case 12:return Ei(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,sa(i,i.type,l.value),Ei(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,so(i),h=Si(h),l=l(h),i.flags|=1,Ei(t,i,l,a),i.child;case 14:return Cy(t,i,i.type,i.pendingProps,a);case 15:return ky(t,i,i.type,i.pendingProps,a);case 19:return Py(t,i,a);case 31:return aE(t,i,a);case 22:return Ny(t,i,a,i.pendingProps);case 24:return so(i),l=Si($n),t===null?(h=Nd(),h===null&&(h=hn,d=Cd(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Md(i),sa(i,$n,h)):((t.lanes&a)!==0&&(xd(t,i),Fl(i,null,null,a),Hl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),sa(i,$n,l)):(l=d.cache,sa(i,$n,l),l!==h.cache&&Id(i,[$n],a,!0))),Ei(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function xr(t){t.flags|=4}function gf(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(d_())t.flags|=8192;else throw oo=uu,Dd}else t.flags&=-16777217}function By(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!tb(i))if(d_())t.flags|=8192;else throw oo=uu,Dd}function Iu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?ks():536870912,t.lanes|=i,Qo|=i)}function Yl(t,i){if(!Vt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function vn(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function lE(t,i,a){var l=i.pendingProps;switch(Sd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(i),null;case 1:return vn(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),kr($n),Ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Lo(i)?xr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wd())),vn(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(xr(i),d!==null?(vn(i),By(i,d)):(vn(i),gf(i,h,null,l,a))):d?d!==t.memoizedState?(xr(i),vn(i),By(i,d)):(vn(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&xr(i),vn(i),gf(i,h,t,l,a)),null;case 27:if(us(i),a=st.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&xr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return vn(i),null}t=Ee.current,Lo(i)?bp(i):(t=$_(h,l,a),i.stateNode=t,xr(i))}return vn(i),null;case 5:if(us(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&xr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return vn(i),null}if(d=Ee.current,Lo(i))bp(i);else{var y=qu(st.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(h,{is:l.is}):y.createElement(h)}}d[Sn]=i,d[xn]=l;e:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=d;e:switch(wi(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&xr(i)}}return vn(i),gf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&xr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=st.current,Lo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Ti,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Sn]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||V_(t.nodeValue,a)),t||ia(i,!0)}else t=qu(t).createTextNode(l),t[Sn]=i,i.stateNode=t}return vn(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Lo(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Sn]=i}else no(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vn(i),t=!1}else a=wd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(ys(i),i):(ys(i),null);if((i.flags&128)!==0)throw Error(s(558))}return vn(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Lo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Sn]=i}else no(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vn(i),h=!1}else h=wd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(ys(i),i):(ys(i),null)}return ys(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Iu(i,i.updateQueue),vn(i),null);case 4:return Ye(),t===null&&jf(i.stateNode.containerInfo),vn(i),null;case 10:return kr(i.type),vn(i),null;case 19:if(re(Pn),l=i.memoizedState,l===null)return vn(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)Yl(l,!1);else{if(Ln!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=mu(t),d!==null){for(i.flags|=128,Yl(l,!1),t=d.updateQueue,i.updateQueue=t,Iu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)mp(a,t),a=a.sibling;return ye(Pn,Pn.current&1|2),Vt&&Ir(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&mn()>Mu&&(i.flags|=128,h=!0,Yl(l,!1),i.lanes=4194304)}else{if(!h)if(t=mu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Iu(i,t),Yl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Vt)return vn(i),null}else 2*mn()-l.renderingStartTime>Mu&&a!==536870912&&(i.flags|=128,h=!0,Yl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=mn(),t.sibling=null,a=Pn.current,ye(Pn,h?a&1|2:a&1),Vt&&Ir(i,l.treeForkCount),t):(vn(i),null);case 22:case 23:return ys(i),jd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(vn(i),i.subtreeFlags&6&&(i.flags|=8192)):vn(i),a=i.updateQueue,a!==null&&Iu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&re(ro),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),kr($n),vn(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function cE(t,i){switch(Sd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return kr($n),Ye(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return us(i),null;case 31:if(i.memoizedState!==null){if(ys(i),i.alternate===null)throw Error(s(340));no()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(ys(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));no()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return re(Pn),null;case 4:return Ye(),null;case 10:return kr(i.type),null;case 22:case 23:return ys(i),jd(),t!==null&&re(ro),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return kr($n),null;case 25:return null;default:return null}}function Uy(t,i){switch(Sd(i),i.tag){case 3:kr($n),Ye();break;case 26:case 27:case 5:us(i);break;case 4:Ye();break;case 31:i.memoizedState!==null&&ys(i);break;case 13:ys(i);break;case 19:re(Pn);break;case 10:kr(i.type);break;case 22:case 23:ys(i),jd(),t!==null&&re(ro);break;case 24:kr($n)}}function Xl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,y=a.inst;l=d(),y.destroy=l}a=a.next}while(a!==h)}}catch(T){sn(i,i.return,T)}}function ua(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var y=l.inst,T=y.destroy;if(T!==void 0){y.destroy=void 0,h=i;var x=a,K=T;try{K()}catch(ie){sn(h,x,ie)}}}l=l.next}while(l!==d)}}catch(ie){sn(i,i.return,ie)}}function qy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Mp(i,a)}catch(l){sn(t,t.return,l)}}}function Hy(t,i,a){a.props=uo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){sn(t,i,l)}}function Zl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){sn(t,i,h)}}function cr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){sn(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){sn(t,i,h)}else a.current=null}function Fy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){sn(t,t.return,h)}}function pf(t,i,a){try{var l=t.stateNode;DE(l,t.type,a,i),l[xn]=i}catch(h){sn(t,t.return,h)}}function Gy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ya(t.type)||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ya(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _f(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Y));else if(l!==4&&(l===27&&ya(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(_f(t,i,a),t=t.sibling;t!==null;)_f(t,i,a),t=t.sibling}function Cu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&ya(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cu(t,i,a),t=t.sibling;t!==null;)Cu(t,i,a),t=t.sibling}function Ky(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);wi(i,l,a),i[Sn]=t,i[xn]=a}catch(d){sn(t,t.return,d)}}var Or=!1,Yn=!1,bf=!1,$y=typeof WeakSet=="function"?WeakSet:Set,di=null;function uE(t,i){if(t=t.containerInfo,Bf=Wu,t=rp(t),hd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var y=0,T=-1,x=-1,K=0,ie=0,le=t,$=null;t:for(;;){for(var ee;le!==a||h!==0&&le.nodeType!==3||(T=y+h),le!==d||l!==0&&le.nodeType!==3||(x=y+l),le.nodeType===3&&(y+=le.nodeValue.length),(ee=le.firstChild)!==null;)$=le,le=ee;for(;;){if(le===t)break t;if($===a&&++K===h&&(T=y),$===d&&++ie===l&&(x=y),(ee=le.nextSibling)!==null)break;le=$,$=le.parentNode}le=ee}a=T===-1||x===-1?null:{start:T,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Uf={focusedElem:t,selectionRange:a},Wu=!1,di=i;di!==null;)if(i=di,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,di=t;else for(;di!==null;){switch(i=di,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ne=uo(a.type,h);t=l.getSnapshotBeforeUpdate(Ne,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(et){sn(a,a.return,et)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,di=t;break}di=i.return}}function Qy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Vr(t,a),l&4&&Xl(5,a);break;case 1:if(Vr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(y){sn(a,a.return,y)}else{var h=uo(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(y){sn(a,a.return,y)}}l&64&&qy(a),l&512&&Zl(a,a.return);break;case 3:if(Vr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Mp(t,i)}catch(y){sn(a,a.return,y)}}break;case 27:i===null&&l&4&&Ky(a);case 26:case 5:Vr(t,a),i===null&&l&4&&Fy(a),l&512&&Zl(a,a.return);break;case 12:Vr(t,a);break;case 31:Vr(t,a),l&4&&Xy(t,a);break;case 13:Vr(t,a),l&4&&Zy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=bE.bind(null,a),zE(t,a))));break;case 22:if(l=a.memoizedState!==null||Or,!l){i=i!==null&&i.memoizedState!==null||Yn,h=Or;var d=Yn;Or=l,(Yn=i)&&!d?jr(t,a,(a.subtreeFlags&8772)!==0):Vr(t,a),Or=h,Yn=d}break;case 30:break;default:Vr(t,a)}}function Wy(t){var i=t.alternate;i!==null&&(t.alternate=null,Wy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Pe(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var An=null,is=!1;function Lr(t,i,a){for(a=a.child;a!==null;)Yy(t,i,a),a=a.sibling}function Yy(t,i,a){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Fi,a)}catch{}switch(a.tag){case 26:Yn||cr(a,i),Lr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Yn||cr(a,i);var l=An,h=is;ya(a.type)&&(An=a.stateNode,is=!1),Lr(t,i,a),oc(a.stateNode),An=l,is=h;break;case 5:Yn||cr(a,i);case 6:if(l=An,h=is,An=null,Lr(t,i,a),An=l,is=h,An!==null)if(is)try{(An.nodeType===9?An.body:An.nodeName==="HTML"?An.ownerDocument.body:An).removeChild(a.stateNode)}catch(d){sn(a,i,d)}else try{An.removeChild(a.stateNode)}catch(d){sn(a,i,d)}break;case 18:An!==null&&(is?(t=An,q_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),nl(t)):q_(An,a.stateNode));break;case 4:l=An,h=is,An=a.stateNode.containerInfo,is=!0,Lr(t,i,a),An=l,is=h;break;case 0:case 11:case 14:case 15:ua(2,a,i),Yn||ua(4,a,i),Lr(t,i,a);break;case 1:Yn||(cr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Hy(a,i,l)),Lr(t,i,a);break;case 21:Lr(t,i,a);break;case 22:Yn=(l=Yn)||a.memoizedState!==null,Lr(t,i,a),Yn=l;break;default:Lr(t,i,a)}}function Xy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{nl(t)}catch(a){sn(i,i.return,a)}}}function Zy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{nl(t)}catch(a){sn(i,i.return,a)}}function hE(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new $y),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new $y),i;default:throw Error(s(435,t.tag))}}function ku(t,i){var a=hE(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=vE.bind(null,t,l);l.then(h,h)}})}function ss(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,y=i,T=y;e:for(;T!==null;){switch(T.tag){case 27:if(ya(T.type)){An=T.stateNode,is=!1;break e}break;case 5:An=T.stateNode,is=!1;break e;case 3:case 4:An=T.stateNode.containerInfo,is=!0;break e}T=T.return}if(An===null)throw Error(s(160));Yy(d,y,h),An=null,is=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Jy(i,t),i=i.sibling}var $s=null;function Jy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ss(i,t),rs(t),l&4&&(ua(3,t,t.return),Xl(3,t),ua(5,t,t.return));break;case 1:ss(i,t),rs(t),l&512&&(Yn||a===null||cr(a,a.return)),l&64&&Or&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=$s;if(ss(i,t),rs(t),l&512&&(Yn||a===null||cr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Te]||d[Sn]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),wi(d,l,a),d[Sn]=t,Xt(d),l=d;break e;case"link":var y=J_("link","href",h).get(l+(a.href||""));if(y){for(var T=0;T<y.length;T++)if(d=y[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(T,1);break t}}d=h.createElement(l),wi(d,l,a),h.head.appendChild(d);break;case"meta":if(y=J_("meta","content",h).get(l+(a.content||""))){for(T=0;T<y.length;T++)if(d=y[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(T,1);break t}}d=h.createElement(l),wi(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Sn]=t,Xt(d),l=d}t.stateNode=l}else eb(h,t.type,t.stateNode);else t.stateNode=Z_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?eb(h,t.type,t.stateNode):Z_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pf(t,t.memoizedProps,a.memoizedProps)}break;case 27:ss(i,t),rs(t),l&512&&(Yn||a===null||cr(a,a.return)),a!==null&&l&4&&pf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ss(i,t),rs(t),l&512&&(Yn||a===null||cr(a,a.return)),t.flags&32){h=t.stateNode;try{Oi(h,"")}catch(Ne){sn(t,t.return,Ne)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,pf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(bf=!0);break;case 6:if(ss(i,t),rs(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ne){sn(t,t.return,Ne)}}break;case 3:if(Gu=null,h=$s,$s=Hu(i.containerInfo),ss(i,t),$s=h,rs(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{nl(i.containerInfo)}catch(Ne){sn(t,t.return,Ne)}bf&&(bf=!1,e_(t));break;case 4:l=$s,$s=Hu(t.stateNode.containerInfo),ss(i,t),rs(t),$s=l;break;case 12:ss(i,t),rs(t);break;case 31:ss(i,t),rs(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 13:ss(i,t),rs(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Du=mn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 22:h=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,K=Or,ie=Yn;if(Or=K||h,Yn=ie||x,ss(i,t),Yn=ie,Or=K,rs(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||x||Or||Yn||ho(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,h)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{T=x.stateNode;var le=x.memoizedProps.style,$=le!=null&&le.hasOwnProperty("display")?le.display:null;T.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Ne){sn(x,x.return,Ne)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(Ne){sn(x,x.return,Ne)}}}else if(i.tag===18){if(a===null){x=i;try{var ee=x.stateNode;h?H_(ee,!0):H_(x.stateNode,!1)}catch(Ne){sn(x,x.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ku(t,a))));break;case 19:ss(i,t),rs(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 30:break;case 21:break;default:ss(i,t),rs(t)}}function rs(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Gy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=yf(t);Cu(t,d,h);break;case 5:var y=a.stateNode;a.flags&32&&(Oi(y,""),a.flags&=-33);var T=yf(t);Cu(t,T,y);break;case 3:case 4:var x=a.stateNode.containerInfo,K=yf(t);_f(t,K,x);break;default:throw Error(s(161))}}catch(ie){sn(t,t.return,ie)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function e_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;e_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Vr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Qy(t,i.alternate,i),i=i.sibling}function ho(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ua(4,i,i.return),ho(i);break;case 1:cr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Hy(i,i.return,a),ho(i);break;case 27:oc(i.stateNode);case 26:case 5:cr(i,i.return),ho(i);break;case 22:i.memoizedState===null&&ho(i);break;case 30:ho(i);break;default:ho(i)}t=t.sibling}}function jr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,y=d.flags;switch(d.tag){case 0:case 11:case 15:jr(h,d,a),Xl(4,d);break;case 1:if(jr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(K){sn(l,l.return,K)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)Dp(x[h],T)}catch(K){sn(l,l.return,K)}}a&&y&64&&qy(d),Zl(d,d.return);break;case 27:Ky(d);case 26:case 5:jr(h,d,a),a&&l===null&&y&4&&Fy(d),Zl(d,d.return);break;case 12:jr(h,d,a);break;case 31:jr(h,d,a),a&&y&4&&Xy(h,d);break;case 13:jr(h,d,a),a&&y&4&&Zy(h,d);break;case 22:d.memoizedState===null&&jr(h,d,a),Zl(d,d.return);break;case 30:break;default:jr(h,d,a)}i=i.sibling}}function vf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Pl(a))}function Tf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Pl(t))}function Qs(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)t_(t,i,a,l),i=i.sibling}function t_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Qs(t,i,a,l),h&2048&&Xl(9,i);break;case 1:Qs(t,i,a,l);break;case 3:Qs(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Pl(t)));break;case 12:if(h&2048){Qs(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,y=d.id,T=d.onPostCommit;typeof T=="function"&&T(y,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){sn(i,i.return,x)}}else Qs(t,i,a,l);break;case 31:Qs(t,i,a,l);break;case 13:Qs(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,y=i.alternate,i.memoizedState!==null?d._visibility&2?Qs(t,i,a,l):Jl(t,i):d._visibility&2?Qs(t,i,a,l):(d._visibility|=2,Go(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&vf(y,i);break;case 24:Qs(t,i,a,l),h&2048&&Tf(i.alternate,i);break;default:Qs(t,i,a,l)}}function Go(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,y=i,T=a,x=l,K=y.flags;switch(y.tag){case 0:case 11:case 15:Go(d,y,T,x,h),Xl(8,y);break;case 23:break;case 22:var ie=y.stateNode;y.memoizedState!==null?ie._visibility&2?Go(d,y,T,x,h):Jl(d,y):(ie._visibility|=2,Go(d,y,T,x,h)),h&&K&2048&&vf(y.alternate,y);break;case 24:Go(d,y,T,x,h),h&&K&2048&&Tf(y.alternate,y);break;default:Go(d,y,T,x,h)}i=i.sibling}}function Jl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Jl(a,l),h&2048&&vf(l.alternate,l);break;case 24:Jl(a,l),h&2048&&Tf(l.alternate,l);break;default:Jl(a,l)}i=i.sibling}}var ec=8192;function Ko(t,i,a){if(t.subtreeFlags&ec)for(t=t.child;t!==null;)n_(t,i,a),t=t.sibling}function n_(t,i,a){switch(t.tag){case 26:Ko(t,i,a),t.flags&ec&&t.memoizedState!==null&&XE(a,$s,t.memoizedState,t.memoizedProps);break;case 5:Ko(t,i,a);break;case 3:case 4:var l=$s;$s=Hu(t.stateNode.containerInfo),Ko(t,i,a),$s=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ec,ec=16777216,Ko(t,i,a),ec=l):Ko(t,i,a));break;default:Ko(t,i,a)}}function i_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function tc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];di=l,r_(l,t)}i_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)s_(t),t=t.sibling}function s_(t){switch(t.tag){case 0:case 11:case 15:tc(t),t.flags&2048&&ua(9,t,t.return);break;case 3:tc(t);break;case 12:tc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Nu(t)):tc(t);break;default:tc(t)}}function Nu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];di=l,r_(l,t)}i_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ua(8,i,i.return),Nu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Nu(i));break;default:Nu(i)}t=t.sibling}}function r_(t,i){for(;di!==null;){var a=di;switch(a.tag){case 0:case 11:case 15:ua(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,di=l;else e:for(a=t;di!==null;){l=di;var h=l.sibling,d=l.return;if(Wy(l),l===a){di=null;break e}if(h!==null){h.return=d,di=h;break e}di=d}}}var dE={getCacheForType:function(t){var i=Si($n),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Si($n).controller.signal}},fE=typeof WeakMap=="function"?WeakMap:Map,Jt=0,hn=null,Et=null,kt=0,nn=0,_s=null,ha=!1,$o=!1,Sf=!1,Pr=0,Ln=0,da=0,fo=0,Ef=0,bs=0,Qo=0,nc=null,as=null,wf=!1,Du=0,a_=0,Mu=1/0,xu=null,fa=null,ri=0,ma=null,Wo=null,zr=0,Af=0,Rf=null,o_=null,ic=0,If=null;function vs(){return(Jt&2)!==0&&kt!==0?kt&-kt:ne.T!==null?xf():tr()}function l_(){if(bs===0)if((kt&536870912)===0||Vt){var t=Cs;Cs<<=1,(Cs&3932160)===0&&(Cs=262144),bs=t}else bs=536870912;return t=ps.current,t!==null&&(t.flags|=32),bs}function os(t,i,a){(t===hn&&(nn===2||nn===9)||t.cancelPendingCommit!==null)&&(Yo(t,0),ga(t,kt,bs,!1)),fs(t,a),((Jt&2)===0||t!==hn)&&(t===hn&&((Jt&2)===0&&(fo|=a),Ln===4&&ga(t,kt,bs,!1)),ur(t))}function c_(t,i,a){if((Jt&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||yn(t,i),h=l?pE(t,i):kf(t,i,!0),d=l;do{if(h===0){$o&&!l&&ga(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!mE(a)){h=kf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;e:{var T=t;h=nc;var x=T.current.memoizedState.isDehydrated;if(x&&(Yo(T,y).flags|=256),y=kf(T,y,!1),y!==2){if(Sf&&!x){T.errorRecoveryDisabledLanes|=d,fo|=d,h=4;break e}d=as,as=h,d!==null&&(as===null?as=d:as.push.apply(as,d))}h=y}if(d=!1,h!==2)continue}}if(h===1){Yo(t,0),ga(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ga(l,i,bs,!ha);break e;case 2:as=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Du+300-mn(),10<h)){if(ga(l,i,bs,!ha),Vn(l,0,!0)!==0)break e;zr=i,l.timeoutHandle=B_(u_.bind(null,l,a,as,xu,wf,i,bs,fo,Qo,ha,d,"Throttled",-0,0),h);break e}u_(l,a,as,xu,wf,i,bs,fo,Qo,ha,d,null,-0,0)}}break}while(!0);ur(t)}function u_(t,i,a,l,h,d,y,T,x,K,ie,le,$,ee){if(t.timeoutHandle=-1,le=i.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Y},n_(i,d,le);var Ne=(d&62914560)===d?Du-mn():(d&4194048)===d?a_-mn():0;if(Ne=ZE(le,Ne),Ne!==null){zr=d,t.cancelPendingCommit=Ne(__.bind(null,t,i,d,a,l,h,y,T,x,ie,le,null,$,ee)),ga(t,d,y,!K);return}}__(t,i,d,a,l,h,y,T,x)}function mE(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!ms(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ga(t,i,a,l){i&=~Ef,i&=~fo,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-tn(h),y=1<<d;l[d]=-1,h&=~y}a!==0&&Mi(t,a,i)}function Ou(){return(Jt&6)===0?(sc(0),!1):!0}function Cf(){if(Et!==null){if(nn===0)var t=Et.return;else t=Et,Cr=io=null,Hd(t),Bo=null,Bl=0,t=Et;for(;t!==null;)Uy(t.alternate,t),t=t.return;Et=null}}function Yo(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,OE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),zr=0,Cf(),hn=t,Et=a=Rr(t.current,null),kt=i,nn=0,_s=null,ha=!1,$o=yn(t,i),Sf=!1,Qo=bs=Ef=fo=da=Ln=0,as=nc=null,wf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-tn(l),d=1<<h;i|=t[h],l&=~d}return Pr=i,tu(),a}function h_(t,i){gt=null,ne.H=Ql,i===zo||i===cu?(i=Ip(),nn=3):i===Dd?(i=Ip(),nn=4):nn=i===af?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_s=i,Et===null&&(Ln=1,Eu(t,Ls(i,t.current)))}function d_(){var t=ps.current;return t===null?!0:(kt&4194048)===kt?zs===null:(kt&62914560)===kt||(kt&536870912)!==0?t===zs:!1}function f_(){var t=ne.H;return ne.H=Ql,t===null?Ql:t}function m_(){var t=ne.A;return ne.A=dE,t}function Lu(){Ln=4,ha||(kt&4194048)!==kt&&ps.current!==null||($o=!0),(da&134217727)===0&&(fo&134217727)===0||hn===null||ga(hn,kt,bs,!1)}function kf(t,i,a){var l=Jt;Jt|=2;var h=f_(),d=m_();(hn!==t||kt!==i)&&(xu=null,Yo(t,i)),i=!1;var y=Ln;e:do try{if(nn!==0&&Et!==null){var T=Et,x=_s;switch(nn){case 8:Cf(),y=6;break e;case 3:case 2:case 9:case 6:ps.current===null&&(i=!0);var K=nn;if(nn=0,_s=null,Xo(t,T,x,K),a&&$o){y=0;break e}break;default:K=nn,nn=0,_s=null,Xo(t,T,x,K)}}gE(),y=Ln;break}catch(ie){h_(t,ie)}while(!0);return i&&t.shellSuspendCounter++,Cr=io=null,Jt=l,ne.H=h,ne.A=d,Et===null&&(hn=null,kt=0,tu()),y}function gE(){for(;Et!==null;)g_(Et)}function pE(t,i){var a=Jt;Jt|=2;var l=f_(),h=m_();hn!==t||kt!==i?(xu=null,Mu=mn()+500,Yo(t,i)):$o=yn(t,i);e:do try{if(nn!==0&&Et!==null){i=Et;var d=_s;t:switch(nn){case 1:nn=0,_s=null,Xo(t,i,d,1);break;case 2:case 9:if(Ap(d)){nn=0,_s=null,p_(i);break}i=function(){nn!==2&&nn!==9||hn!==t||(nn=7),ur(t)},d.then(i,i);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:Ap(d)?(nn=0,_s=null,p_(i)):(nn=0,_s=null,Xo(t,i,d,7));break;case 5:var y=null;switch(Et.tag){case 26:y=Et.memoizedState;case 5:case 27:var T=Et;if(y?tb(y):T.stateNode.complete){nn=0,_s=null;var x=T.sibling;if(x!==null)Et=x;else{var K=T.return;K!==null?(Et=K,Vu(K)):Et=null}break t}}nn=0,_s=null,Xo(t,i,d,5);break;case 6:nn=0,_s=null,Xo(t,i,d,6);break;case 8:Cf(),Ln=6;break e;default:throw Error(s(462))}}yE();break}catch(ie){h_(t,ie)}while(!0);return Cr=io=null,ne.H=l,ne.A=h,Jt=a,Et!==null?0:(hn=null,kt=0,tu(),Ln)}function yE(){for(;Et!==null&&!hs();)g_(Et)}function g_(t){var i=zy(t.alternate,t,Pr);t.memoizedProps=t.pendingProps,i===null?Vu(t):Et=i}function p_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=xy(a,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=xy(a,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:Hd(i);default:Uy(a,i),i=Et=mp(i,Pr),i=zy(a,i,Pr)}t.memoizedProps=t.pendingProps,i===null?Vu(t):Et=i}function Xo(t,i,a,l){Cr=io=null,Hd(i),Bo=null,Bl=0;var h=i.return;try{if(rE(t,h,i,a,kt)){Ln=1,Eu(t,Ls(a,t.current)),Et=null;return}}catch(d){if(h!==null)throw Et=h,d;Ln=1,Eu(t,Ls(a,t.current)),Et=null;return}i.flags&32768?(Vt||l===1?t=!0:$o||(kt&536870912)!==0?t=!1:(ha=t=!0,(l===2||l===9||l===3||l===6)&&(l=ps.current,l!==null&&l.tag===13&&(l.flags|=16384))),y_(i,t)):Vu(i)}function Vu(t){var i=t;do{if((i.flags&32768)!==0){y_(i,ha);return}t=i.return;var a=lE(i.alternate,i,Pr);if(a!==null){Et=a;return}if(i=i.sibling,i!==null){Et=i;return}Et=i=t}while(i!==null);Ln===0&&(Ln=5)}function y_(t,i){do{var a=cE(t.alternate,t);if(a!==null){a.flags&=32767,Et=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Et=t;return}Et=t=a}while(t!==null);Ln=6,Et=null}function __(t,i,a,l,h,d,y,T,x){t.cancelPendingCommit=null;do ju();while(ri!==0);if((Jt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=pd,Zr(t,a,d,y,T,x),t===hn&&(Et=hn=null,kt=0),Wo=i,ma=t,zr=a,Af=d,Rf=h,o_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,TE(qn,function(){return E_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null,h=ve.p,ve.p=2,y=Jt,Jt|=4;try{uE(t,i,a)}finally{Jt=y,ve.p=h,ne.T=l}}ri=1,b_(),v_(),T_()}}function b_(){if(ri===1){ri=0;var t=ma,i=Wo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=ne.T,ne.T=null;var l=ve.p;ve.p=2;var h=Jt;Jt|=4;try{Jy(i,t);var d=Uf,y=rp(t.containerInfo),T=d.focusedElem,x=d.selectionRange;if(y!==T&&T&&T.ownerDocument&&sp(T.ownerDocument.documentElement,T)){if(x!==null&&hd(T)){var K=x.start,ie=x.end;if(ie===void 0&&(ie=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(ie,T.value.length);else{var le=T.ownerDocument||document,$=le&&le.defaultView||window;if($.getSelection){var ee=$.getSelection(),Ne=T.textContent.length,et=Math.min(x.start,Ne),ln=x.end===void 0?et:Math.min(x.end,Ne);!ee.extend&&et>ln&&(y=ln,ln=et,et=y);var H=ip(T,et),z=ip(T,ln);if(H&&z&&(ee.rangeCount!==1||ee.anchorNode!==H.node||ee.anchorOffset!==H.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var G=le.createRange();G.setStart(H.node,H.offset),ee.removeAllRanges(),et>ln?(ee.addRange(G),ee.extend(z.node,z.offset)):(G.setEnd(z.node,z.offset),ee.addRange(G))}}}}for(le=[],ee=T;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<le.length;T++){var oe=le[T];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Wu=!!Bf,Uf=Bf=null}finally{Jt=h,ve.p=l,ne.T=a}}t.current=i,ri=2}}function v_(){if(ri===2){ri=0;var t=ma,i=Wo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=ne.T,ne.T=null;var l=ve.p;ve.p=2;var h=Jt;Jt|=4;try{Qy(t,i.alternate,i)}finally{Jt=h,ve.p=l,ne.T=a}}ri=3}}function T_(){if(ri===4||ri===3){ri=0,Rs();var t=ma,i=Wo,a=zr,l=o_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ri=5:(ri=0,Wo=ma=null,S_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(fa=null),jn(a),i=i.stateNode,In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Fi,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=ne.T,h=ve.p,ve.p=2,ne.T=null;try{for(var d=t.onRecoverableError,y=0;y<l.length;y++){var T=l[y];d(T.value,{componentStack:T.stack})}}finally{ne.T=i,ve.p=h}}(zr&3)!==0&&ju(),ur(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===If?ic++:(ic=0,If=t):ic=0,sc(0)}}function S_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Pl(i)))}function ju(){return b_(),v_(),T_(),E_()}function E_(){if(ri!==5)return!1;var t=ma,i=Af;Af=0;var a=jn(zr),l=ne.T,h=ve.p;try{ve.p=32>a?32:a,ne.T=null,a=Rf,Rf=null;var d=ma,y=zr;if(ri=0,Wo=ma=null,zr=0,(Jt&6)!==0)throw Error(s(331));var T=Jt;if(Jt|=4,s_(d.current),t_(d,d.current,y,a),Jt=T,sc(0,!1),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Fi,d)}catch{}return!0}finally{ve.p=h,ne.T=l,S_(t,i)}}function w_(t,i,a){i=Ls(a,i),i=rf(t.stateNode,i,2),t=oa(t,i,2),t!==null&&(fs(t,2),ur(t))}function sn(t,i,a){if(t.tag===3)w_(t,t,a);else for(;i!==null;){if(i.tag===3){w_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(fa===null||!fa.has(l))){t=Ls(a,t),a=Ay(2),l=oa(i,a,2),l!==null&&(Ry(a,l,i,t),fs(l,2),ur(l));break}}i=i.return}}function Nf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new fE;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Sf=!0,h.add(a),t=_E.bind(null,t,i,a),i.then(t,t))}function _E(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,hn===t&&(kt&a)===a&&(Ln===4||Ln===3&&(kt&62914560)===kt&&300>mn()-Du?(Jt&2)===0&&Yo(t,0):Ef|=a,Qo===kt&&(Qo=0)),ur(t)}function A_(t,i){i===0&&(i=ks()),t=eo(t,i),t!==null&&(fs(t,i),ur(t))}function bE(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),A_(t,a)}function vE(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),A_(t,a)}function TE(t,i){return Ut(t,i)}var Pu=null,Zo=null,Df=!1,zu=!1,Mf=!1,pa=0;function ur(t){t!==Zo&&t.next===null&&(Zo===null?Pu=Zo=t:Zo=Zo.next=t),zu=!0,Df||(Df=!0,EE())}function sc(t,i){if(!Mf&&zu){Mf=!0;do for(var a=!1,l=Pu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var y=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-tn(42|t)+1)-1,d&=h&~(y&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,k_(l,d))}else d=kt,d=Vn(l,l===hn?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||yn(l,d)||(a=!0,k_(l,d));l=l.next}while(a);Mf=!1}}function SE(){R_()}function R_(){zu=Df=!1;var t=0;pa!==0&&xE()&&(t=pa);for(var i=mn(),a=null,l=Pu;l!==null;){var h=l.next,d=I_(l,i);d===0?(l.next=null,a===null?Pu=h:a.next=h,h===null&&(Zo=a)):(a=l,(t!==0||(d&3)!==0)&&(zu=!0)),l=h}ri!==0&&ri!==5||sc(t),pa!==0&&(pa=0)}function I_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var y=31-tn(d),T=1<<y,x=h[y];x===-1?((T&a)===0||(T&l)!==0)&&(h[y]=Ga(T,i)):x<=i&&(t.expiredLanes|=T),d&=~T}if(i=hn,a=kt,a=Vn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(nn===2||nn===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&As(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||yn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&As(l),jn(a)){case 2:case 8:a=Ni;break;case 32:a=qn;break;case 268435456:a=Fs;break;default:a=qn}return l=C_.bind(null,t),a=Ut(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&As(l),t.callbackPriority=2,t.callbackNode=null,2}function C_(t,i){if(ri!==0&&ri!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ju()&&t.callbackNode!==a)return null;var l=kt;return l=Vn(t,t===hn?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(c_(t,l,i),I_(t,mn()),t.callbackNode!=null&&t.callbackNode===a?C_.bind(null,t):null)}function k_(t,i){if(ju())return null;c_(t,i,!0)}function EE(){LE(function(){(Jt&6)!==0?Ut(Ji,SE):R_()})}function xf(){if(pa===0){var t=jo;t===0&&(t=Di,Di<<=1,(Di&261888)===0&&(Di=256)),pa=t}return pa}function N_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:se(""+t)}function D_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function wE(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=N_((h[xn]||null).action),y=l.submitter;y&&(i=(i=y[xn]||null)?N_(i.formAction):y.getAttribute("formAction"),i!==null&&(d=i,y=null));var T=new jt("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(pa!==0){var x=y?D_(h,y):new FormData(h);Zd(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(T.preventDefault(),x=y?D_(h,y):new FormData(h),Zd(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var Of=0;Of<gd.length;Of++){var Lf=gd[Of],AE=Lf.toLowerCase(),RE=Lf[0].toUpperCase()+Lf.slice(1);Ks(AE,"on"+RE)}Ks(lp,"onAnimationEnd"),Ks(cp,"onAnimationIteration"),Ks(up,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(q0,"onTransitionRun"),Ks(H0,"onTransitionStart"),Ks(F0,"onTransitionCancel"),Ks(hp,"onTransitionEnd"),Ns("onMouseEnter",["mouseout","mouseover"]),Ns("onMouseLeave",["mouseout","mouseover"]),Ns("onPointerEnter",["pointerout","pointerover"]),Ns("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rc));function M_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var y=l.length-1;0<=y;y--){var T=l[y],x=T.instance,K=T.currentTarget;if(T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=K;try{d(h)}catch(ie){eu(ie)}h.currentTarget=null,d=x}else for(y=0;y<l.length;y++){if(T=l[y],x=T.instance,K=T.currentTarget,T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=K;try{d(h)}catch(ie){eu(ie)}h.currentTarget=null,d=x}}}}function wt(t,i){var a=i[ts];a===void 0&&(a=i[ts]=new Set);var l=t+"__bubble";a.has(l)||(x_(i,t,2,!1),a.add(l))}function Vf(t,i,a){var l=0;i&&(l|=4),x_(a,t,l,i)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function jf(t){if(!t[Bu]){t[Bu]=!0,nr.forEach(function(a){a!=="selectionchange"&&(IE.has(a)||Vf(a,!1,t),Vf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Bu]||(i[Bu]=!0,Vf("selectionchange",!1,i))}}function x_(t,i,a,l){switch(lb(i)){case 2:var h=tw;break;case 8:h=nw;break;default:h=Zf}a=h.bind(null,i,a,t),h=void 0,!Ot||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Pf(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var T=l.stateNode.containerInfo;if(T===h)break;if(y===4)for(y=l.return;y!==null;){var x=y.tag;if((x===3||x===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;T!==null;){if(y=We(T),y===null)return;if(x=y.tag,x===5||x===6||x===26||x===27){l=d=y;continue e}T=T.parentNode}}l=l.return}ze(function(){var K=d,ie=ke(a),le=[];e:{var $=dp.get(t);if($!==void 0){var ee=jt,Ne=t;switch(t){case"keypress":if(bt(a)===0)break e;case"keydown":case"keyup":ee=Qi;break;case"focusin":Ne="focus",ee=Ct;break;case"focusout":Ne="blur",ee=Ct;break;case"beforeblur":case"afterblur":ee=Ct;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Fe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=ft;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=g;break;case lp:case cp:case up:ee=ii;break;case hp:ee=w;break;case"scroll":case"scrollend":ee=Gt;break;case"wheel":ee=Q;break;case"copy":case"cut":case"paste":ee=ui;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Gn;break;case"toggle":case"beforetoggle":ee=Le}var et=(i&4)!==0,ln=!et&&(t==="scroll"||t==="scrollend"),H=et?$!==null?$+"Capture":null:$;et=[];for(var z=K,G;z!==null;){var oe=z;if(G=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||G===null||H===null||(oe=Be(z,H),oe!=null&&et.push(ac(z,oe,G))),ln)break;z=z.return}0<et.length&&($=new ee($,Ne,null,a,ie),le.push({event:$,listeners:et}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",$&&a!==Ie&&(Ne=a.relatedTarget||a.fromElement)&&(We(Ne)||Ne[ci]))break e;if((ee||$)&&($=ie.window===ie?ie:($=ie.ownerDocument)?$.defaultView||$.parentWindow:window,ee?(Ne=a.relatedTarget||a.toElement,ee=K,Ne=Ne?We(Ne):null,Ne!==null&&(ln=c(Ne),et=Ne.tag,Ne!==ln||et!==5&&et!==27&&et!==6)&&(Ne=null)):(ee=null,Ne=K),ee!==Ne)){if(et=Fe,oe="onMouseLeave",H="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(et=Gn,oe="onPointerLeave",H="onPointerEnter",z="pointer"),ln=ee==null?$:Cn(ee),G=Ne==null?$:Cn(Ne),$=new et(oe,z+"leave",ee,a,ie),$.target=ln,$.relatedTarget=G,oe=null,We(ie)===K&&(et=new et(H,z+"enter",Ne,a,ie),et.target=G,et.relatedTarget=ln,oe=et),ln=oe,ee&&Ne)t:{for(et=CE,H=ee,z=Ne,G=0,oe=H;oe;oe=et(oe))G++;oe=0;for(var Qe=z;Qe;Qe=et(Qe))oe++;for(;0<G-oe;)H=et(H),G--;for(;0<oe-G;)z=et(z),oe--;for(;G--;){if(H===z||z!==null&&H===z.alternate){et=H;break t}H=et(H),z=et(z)}et=null}else et=null;ee!==null&&O_(le,$,ee,et,!1),Ne!==null&&ln!==null&&O_(le,ln,Ne,et,!0)}}e:{if($=K?Cn(K):window,ee=$.nodeName&&$.nodeName.toLowerCase(),ee==="select"||ee==="input"&&$.type==="file")var $t=Xg;else if(Wg($))if(Zg)$t=z0;else{$t=j0;var Oe=V0}else ee=$.nodeName,!ee||ee.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&me(K.elementType)&&($t=Xg):$t=P0;if($t&&($t=$t(t,K))){Yg(le,$t,a,ie);break e}Oe&&Oe(t,$,K),t==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Ya($,"number",$.value)}switch(Oe=K?Cn(K):window,t){case"focusin":(Wg(Oe)||Oe.contentEditable==="true")&&(ko=Oe,dd=K,Ll=null);break;case"focusout":Ll=dd=ko=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,ap(le,a,ie);break;case"selectionchange":if(U0)break;case"keydown":case"keyup":ap(le,a,ie)}var pt;if(vt)e:{switch(t){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else Co?Xa(t,a)&&(Nt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Nt="onCompositionStart");Nt&&(Kn&&a.locale!=="ko"&&(Co||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Co&&(pt=yt()):(at=ie,fe="value"in at?at.value:at.textContent,Co=!0)),Oe=Uu(K,Nt),0<Oe.length&&(Nt=new wn(Nt,t,null,a,ie),le.push({event:Nt,listeners:Oe}),pt?Nt.data=pt:(pt=Io(a),pt!==null&&(Nt.data=pt)))),(pt=qt?M0(t,a):x0(t,a))&&(Nt=Uu(K,"onBeforeInput"),0<Nt.length&&(Oe=new wn("onBeforeInput","beforeinput",null,a,ie),le.push({event:Oe,listeners:Nt}),Oe.data=pt)),wE(le,t,K,a,ie)}M_(le,i)})}function ac(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Uu(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Be(t,a),h!=null&&l.unshift(ac(t,h,d)),h=Be(t,i),h!=null&&l.push(ac(t,h,d))),t.tag===3)return l;t=t.return}return[]}function CE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function O_(t,i,a,l,h){for(var d=i._reactName,y=[];a!==null&&a!==l;){var T=a,x=T.alternate,K=T.stateNode;if(T=T.tag,x!==null&&x===l)break;T!==5&&T!==26&&T!==27||K===null||(x=K,h?(K=Be(a,d),K!=null&&y.unshift(ac(a,K,x))):h||(K=Be(a,d),K!=null&&y.push(ac(a,K,x)))),a=a.return}y.length!==0&&t.push({event:i,listeners:y})}var kE=/\r\n?/g,NE=/\u0000|\uFFFD/g;function L_(t){return(typeof t=="string"?t:""+t).replace(kE,`
`).replace(NE,"")}function V_(t,i){return i=L_(i),L_(t)===i}function on(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Oi(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Oi(t,""+l);break;case"className":En(t,"class",l);break;case"tabIndex":En(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":En(t,a,l);break;case"style":J(t,l,d);break;case"data":if(i!=="object"){En(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=se(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&on(t,i,"name",h.name,h,null),on(t,i,"formEncType",h.formEncType,h,null),on(t,i,"formMethod",h.formMethod,h,null),on(t,i,"formTarget",h.formTarget,h,null)):(on(t,i,"encType",h.encType,h,null),on(t,i,"method",h.method,h,null),on(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=se(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Y);break;case"onScroll":l!=null&&wt("scroll",t);break;case"onScrollEnd":l!=null&&wt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=se(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":wt("beforetoggle",t),wt("toggle",t),Er(t,"popover",l);break;case"xlinkActuate":un(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":un(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":un(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":un(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":un(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":un(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":un(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Er(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=W.get(a)||a,Er(t,a,l))}}function zf(t,i,a,l,h,d){switch(a){case"style":J(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Oi(t,l):(typeof l=="number"||typeof l=="bigint")&&Oi(t,""+l);break;case"onScroll":l!=null&&wt("scroll",t);break;case"onScrollEnd":l!=null&&wt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Y);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[xn]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Er(t,a,l)}}}function wi(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",t),wt("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:on(t,i,d,y,a,null)}}h&&on(t,i,"srcSet",a.srcSet,a,null),l&&on(t,i,"src",a.src,a,null);return;case"input":wt("invalid",t);var T=d=y=h=null,x=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var ie=a[l];if(ie!=null)switch(l){case"name":h=ie;break;case"type":y=ie;break;case"checked":x=ie;break;case"defaultChecked":K=ie;break;case"value":d=ie;break;case"defaultValue":T=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:on(t,i,l,ie,a,null)}}Wa(t,d,T,x,K,y,h,!1);return;case"select":wt("invalid",t),l=y=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":y=T;break;case"multiple":l=T;default:on(t,i,h,T,a,null)}i=d,a=y,t.multiple=!!l,i!=null?sr(t,!!l,i,!1):a!=null&&sr(t,!!l,a,!0);return;case"textarea":wt("invalid",t),d=h=l=null;for(y in a)if(a.hasOwnProperty(y)&&(T=a[y],T!=null))switch(y){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:on(t,i,y,T,a,null)}rr(t,l,h,d);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:on(t,i,x,l,a,null)}return;case"dialog":wt("beforetoggle",t),wt("toggle",t),wt("cancel",t),wt("close",t);break;case"iframe":case"object":wt("load",t);break;case"video":case"audio":for(l=0;l<rc.length;l++)wt(rc[l],t);break;case"image":wt("error",t),wt("load",t);break;case"details":wt("toggle",t);break;case"embed":case"source":case"link":wt("error",t),wt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:on(t,i,K,l,a,null)}return;default:if(me(i)){for(ie in a)a.hasOwnProperty(ie)&&(l=a[ie],l!==void 0&&zf(t,i,ie,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&on(t,i,T,l,a,null))}function DE(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,y=null,T=null,x=null,K=null,ie=null;for(ee in a){var le=a[ee];if(a.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":x=le;default:l.hasOwnProperty(ee)||on(t,i,ee,null,l,le)}}for(var $ in l){var ee=l[$];if(le=a[$],l.hasOwnProperty($)&&(ee!=null||le!=null))switch($){case"type":d=ee;break;case"name":h=ee;break;case"checked":K=ee;break;case"defaultChecked":ie=ee;break;case"value":y=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:ee!==le&&on(t,i,$,ee,l,le)}}Ar(t,y,T,x,K,ie,d,h);return;case"select":ee=y=T=$=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":ee=x;default:l.hasOwnProperty(d)||on(t,i,d,null,l,x)}for(h in l)if(d=l[h],x=a[h],l.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":$=d;break;case"defaultValue":T=d;break;case"multiple":y=d;default:d!==x&&on(t,i,h,d,l,x)}i=T,a=y,l=ee,$!=null?sr(t,!!a,$,!1):!!l!=!!a&&(i!=null?sr(t,!!a,i,!0):sr(t,!!a,a?[]:"",!1));return;case"textarea":ee=$=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:on(t,i,T,null,l,h)}for(y in l)if(h=l[y],d=a[y],l.hasOwnProperty(y)&&(h!=null||d!=null))switch(y){case"value":$=h;break;case"defaultValue":ee=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&on(t,i,y,h,l,d)}Ro(t,$,ee);return;case"option":for(var Ne in a)if($=a[Ne],a.hasOwnProperty(Ne)&&$!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:on(t,i,Ne,null,l,$)}for(x in l)if($=l[x],ee=a[x],l.hasOwnProperty(x)&&$!==ee&&($!=null||ee!=null))switch(x){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:on(t,i,x,$,l,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in a)$=a[et],a.hasOwnProperty(et)&&$!=null&&!l.hasOwnProperty(et)&&on(t,i,et,null,l,$);for(K in l)if($=l[K],ee=a[K],l.hasOwnProperty(K)&&$!==ee&&($!=null||ee!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:on(t,i,K,$,l,ee)}return;default:if(me(i)){for(var ln in a)$=a[ln],a.hasOwnProperty(ln)&&$!==void 0&&!l.hasOwnProperty(ln)&&zf(t,i,ln,void 0,l,$);for(ie in l)$=l[ie],ee=a[ie],!l.hasOwnProperty(ie)||$===ee||$===void 0&&ee===void 0||zf(t,i,ie,$,l,ee);return}}for(var H in a)$=a[H],a.hasOwnProperty(H)&&$!=null&&!l.hasOwnProperty(H)&&on(t,i,H,null,l,$);for(le in l)$=l[le],ee=a[le],!l.hasOwnProperty(le)||$===ee||$==null&&ee==null||on(t,i,le,$,l,ee)}function j_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ME(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,y=h.initiatorType,T=h.duration;if(d&&T&&j_(y)){for(y=0,T=h.responseEnd,l+=1;l<a.length;l++){var x=a[l],K=x.startTime;if(K>T)break;var ie=x.transferSize,le=x.initiatorType;ie&&j_(le)&&(x=x.responseEnd,y+=ie*(x<T?1:(T-K)/(x-K)))}if(--l,i+=8*(d+y)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bf=null,Uf=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function P_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function qf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hf=null;function xE(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var B_=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,LE=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(t){return U_.resolve(null).then(t).catch(VE)}:B_;function VE(t){setTimeout(function(){throw t})}function ya(t){return t==="head"}function q_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),nl(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")oc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,oc(a);for(var d=a.firstChild;d;){var y=d.nextSibling,T=d.nodeName;d[Te]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&oc(t.ownerDocument.body);a=h}while(a);nl(i)}function H_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ff(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ff(a),Pe(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function jE(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Te])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Bs(t.nextSibling),t===null)break}return null}function PE(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Bs(t.nextSibling),t===null))return null;return t}function F_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Bs(t.nextSibling),t===null))return null;return t}function Gf(t){return t.data==="$?"||t.data==="$~"}function Kf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function zE(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Bs(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var $f=null;function G_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Bs(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function K_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function $_(t,i,a){switch(i=qu(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function oc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Pe(t)}var Us=new Map,Q_=new Set;function Hu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Br=ve.d;ve.d={f:BE,r:UE,D:qE,C:HE,L:FE,m:GE,X:$E,S:KE,M:QE};function BE(){var t=Br.f(),i=Ou();return t||i}function UE(t){var i=Rt(t);i!==null&&i.tag===5&&i.type==="form"?hy(i):Br.r(t)}var Jo=typeof document>"u"?null:document;function W_(t,i,a){var l=Jo;if(l&&typeof i=="string"&&i){var h=bi(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Q_.has(h)||(Q_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),wi(i,"link",t),Xt(i),l.head.appendChild(i)))}}function qE(t){Br.D(t),W_("dns-prefetch",t,null)}function HE(t,i){Br.C(t,i),W_("preconnect",t,i)}function FE(t,i,a){Br.L(t,i,a);var l=Jo;if(l&&t&&i){var h='link[rel="preload"][as="'+bi(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+bi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+bi(a.imageSizes)+'"]')):h+='[href="'+bi(t)+'"]';var d=h;switch(i){case"style":d=el(t);break;case"script":d=tl(t)}Us.has(d)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Us.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(lc(d))||i==="script"&&l.querySelector(cc(d))||(i=l.createElement("link"),wi(i,"link",t),Xt(i),l.head.appendChild(i)))}}function GE(t,i){Br.m(t,i);var a=Jo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+bi(l)+'"][href="'+bi(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=tl(t)}if(!Us.has(d)&&(t=A({rel:"modulepreload",href:t},i),Us.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cc(d)))return}l=a.createElement("link"),wi(l,"link",t),Xt(l),a.head.appendChild(l)}}}function KE(t,i,a){Br.S(t,i,a);var l=Jo;if(l&&t){var h=Fn(l).hoistableStyles,d=el(t);i=i||"default";var y=h.get(d);if(!y){var T={loading:0,preload:null};if(y=l.querySelector(lc(d)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Us.get(d))&&Qf(t,a);var x=y=l.createElement("link");Xt(x),wi(x,"link",t),x._p=new Promise(function(K,ie){x.onload=K,x.onerror=ie}),x.addEventListener("load",function(){T.loading|=1}),x.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fu(y,i,l)}y={type:"stylesheet",instance:y,count:1,state:T},h.set(d,y)}}}function $E(t,i){Br.X(t,i);var a=Jo;if(a&&t){var l=Fn(a).hoistableScripts,h=tl(t),d=l.get(h);d||(d=a.querySelector(cc(h)),d||(t=A({src:t,async:!0},i),(i=Us.get(h))&&Wf(t,i),d=a.createElement("script"),Xt(d),wi(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function QE(t,i){Br.M(t,i);var a=Jo;if(a&&t){var l=Fn(a).hoistableScripts,h=tl(t),d=l.get(h);d||(d=a.querySelector(cc(h)),d||(t=A({src:t,async:!0,type:"module"},i),(i=Us.get(h))&&Wf(t,i),d=a.createElement("script"),Xt(d),wi(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Y_(t,i,a,l){var h=(h=st.current)?Hu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=el(a.href),a=Fn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=el(a.href);var d=Fn(h).hoistableStyles,y=d.get(t);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,y),(d=h.querySelector(lc(t)))&&!d._p&&(y.instance=d,y.state.loading=5),Us.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Us.set(t,a),d||WE(h,t,a,y.state))),i&&l===null)throw Error(s(528,""));return y}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=tl(a),a=Fn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function el(t){return'href="'+bi(t)+'"'}function lc(t){return'link[rel="stylesheet"]['+t+"]"}function X_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function WE(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),wi(i,"link",a),Xt(i),t.head.appendChild(i))}function tl(t){return'[src="'+bi(t)+'"]'}function cc(t){return"script[async]"+t}function Z_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+bi(a.href)+'"]');if(l)return i.instance=l,Xt(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Xt(l),wi(l,"style",h),Fu(l,a.precedence,t),i.instance=l;case"stylesheet":h=el(a.href);var d=t.querySelector(lc(h));if(d)return i.state.loading|=4,i.instance=d,Xt(d),d;l=X_(a),(h=Us.get(h))&&Qf(l,h),d=(t.ownerDocument||t).createElement("link"),Xt(d);var y=d;return y._p=new Promise(function(T,x){y.onload=T,y.onerror=x}),wi(d,"link",l),i.state.loading|=4,Fu(d,a.precedence,t),i.instance=d;case"script":return d=tl(a.src),(h=t.querySelector(cc(d)))?(i.instance=h,Xt(h),h):(l=a,(h=Us.get(d))&&(l=A({},a),Wf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Xt(h),wi(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Fu(l,a.precedence,t));return i.instance}function Fu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,y=0;y<l.length;y++){var T=l[y];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Qf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Wf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Gu=null;function J_(t,i,a){if(Gu===null){var l=new Map,h=Gu=new Map;h.set(a,l)}else h=Gu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Te]||d[Sn]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(i)||"";y=t+y;var T=l.get(y);T?T.push(d):l.set(y,[d])}}return l}function eb(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function YE(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function tb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function XE(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=el(l.href),d=i.querySelector(lc(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ku.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Xt(d);return}d=i.ownerDocument||i,l=X_(l),(h=Us.get(h))&&Qf(l,h),d=d.createElement("link"),Xt(d);var y=d;y._p=new Promise(function(T,x){y.onload=T,y.onerror=x}),wi(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ku.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Yf=0;function ZE(t,i){return t.stylesheets&&t.count===0&&Qu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Yf===0&&(Yf=62500*ME());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Yf?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Ku(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function Qu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,i.forEach(JE,t),$u=null,Ku.call(t))}function JE(t,i){if(!(i.state.loading&4)){var a=$u.get(t);if(a)var l=a.get(null);else{a=new Map,$u.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var y=h[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}h=i.instance,y=h.getAttribute("data-precedence"),d=a.get(y)||l,d===l&&a.set(null,h),a.set(y,h),this.count++,l=Ku.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var uc={$$typeof:xe,Provider:null,Consumer:null,_currentValue:Ve,_currentValue2:Ve,_threadCount:0};function ew(t,i,a,l,h,d,y,T,x){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function nb(t,i,a,l,h,d,y,T,x,K,ie,le){return t=new ew(t,i,a,y,x,K,ie,le,T),i=1,d===!0&&(i|=24),d=gs(3,null,null,i),t.current=d,d.stateNode=t,i=Cd(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Md(d),t}function ib(t){return t?(t=Mo,t):Mo}function sb(t,i,a,l,h,d){h=ib(h),l.context===null?l.context=h:l.pendingContext=h,l=aa(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=oa(t,l,i),a!==null&&(os(a,t,i),ql(a,t,i))}function rb(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Xf(t,i){rb(t,i),(t=t.alternate)&&rb(t,i)}function ab(t){if(t.tag===13||t.tag===31){var i=eo(t,67108864);i!==null&&os(i,t,67108864),Xf(t,67108864)}}function ob(t){if(t.tag===13||t.tag===31){var i=vs();i=_i(i);var a=eo(t,i);a!==null&&os(a,t,i),Xf(t,i)}}var Wu=!0;function tw(t,i,a,l){var h=ne.T;ne.T=null;var d=ve.p;try{ve.p=2,Zf(t,i,a,l)}finally{ve.p=d,ne.T=h}}function nw(t,i,a,l){var h=ne.T;ne.T=null;var d=ve.p;try{ve.p=8,Zf(t,i,a,l)}finally{ve.p=d,ne.T=h}}function Zf(t,i,a,l){if(Wu){var h=Jf(l);if(h===null)Pf(t,i,l,Yu,a),cb(t,l);else if(sw(h,t,i,a,l))l.stopPropagation();else if(cb(t,l),i&4&&-1<iw.indexOf(t)){for(;h!==null;){var d=Rt(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=li(d.pendingLanes);if(y!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;y;){var x=1<<31-tn(y);T.entanglements[1]|=x,y&=~x}ur(d),(Jt&6)===0&&(Mu=mn()+500,sc(0))}}break;case 31:case 13:T=eo(d,2),T!==null&&os(T,d,2),Ou(),Xf(d,2)}if(d=Jf(l),d===null&&Pf(t,i,l,Yu,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Pf(t,i,l,null,a)}}function Jf(t){return t=ke(t),em(t)}var Yu=null;function em(t){if(Yu=null,t=We(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Yu=t,null}function lb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pi()){case Ji:return 2;case Ni:return 8;case qn:case es:return 32;case Fs:return 268435456;default:return 32}default:return 32}}var tm=!1,_a=null,ba=null,va=null,hc=new Map,dc=new Map,Ta=[],iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cb(t,i){switch(t){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":hc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(i.pointerId)}}function fc(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Rt(i),i!==null&&ab(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function sw(t,i,a,l,h){switch(i){case"focusin":return _a=fc(_a,t,i,a,l,h),!0;case"dragenter":return ba=fc(ba,t,i,a,l,h),!0;case"mouseover":return va=fc(va,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return hc.set(d,fc(hc.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,dc.set(d,fc(dc.get(d)||null,t,i,a,l,h)),!0}return!1}function ub(t){var i=We(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Mn(t.priority,function(){ob(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,Mn(t.priority,function(){ob(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Jf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ie=l,a.target.dispatchEvent(l),Ie=null}else return i=Rt(a),i!==null&&ab(i),t.blockedOn=a,!1;i.shift()}return!0}function hb(t,i,a){Xu(t)&&a.delete(i)}function rw(){tm=!1,_a!==null&&Xu(_a)&&(_a=null),ba!==null&&Xu(ba)&&(ba=null),va!==null&&Xu(va)&&(va=null),hc.forEach(hb),dc.forEach(hb)}function Zu(t,i){t.blockedOn===i&&(t.blockedOn=null,tm||(tm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,rw)))}var Ju=null;function db(t){Ju!==t&&(Ju=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ju===t&&(Ju=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(em(l||a)===null)continue;break}var d=Rt(a);d!==null&&(t.splice(i,3),i-=3,Zd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function nl(t){function i(x){return Zu(x,t)}_a!==null&&Zu(_a,t),ba!==null&&Zu(ba,t),va!==null&&Zu(va,t),hc.forEach(i),dc.forEach(i);for(var a=0;a<Ta.length;a++){var l=Ta[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ta.length&&(a=Ta[0],a.blockedOn===null);)ub(a),a.blockedOn===null&&Ta.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],y=h[xn]||null;if(typeof d=="function")y||db(a);else if(y){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,y=d[xn]||null)T=y.formAction;else if(em(h)!==null)continue}else T=y.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),db(a)}}}function fb(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function nm(t){this._internalRoot=t}eh.prototype.render=nm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=vs();sb(a,l,t,i,null,null)},eh.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;sb(t.current,2,null,t,null,null),Ou(),i[ci]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var i=tr();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Ta.length&&i!==0&&i<Ta[a].priority;a++);Ta.splice(a,0,t),a===0&&ub(t)}};var mb=e.version;if(mb!=="19.2.0")throw Error(s(527,mb,"19.2.0"));ve.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=_(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var aw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Fi=th.inject(aw),In=th}catch{}}return gc.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Ty,d=Sy,y=Ey;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=nb(t,1,!1,null,null,a,l,null,h,d,y,fb),t[ci]=i.current,jf(t),new nm(i)},gc.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Ty,y=Sy,T=Ey,x=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),i=nb(t,1,!0,i,a??null,l,h,x,d,y,T,fb),i.context=ib(null),a=i.current,l=vs(),l=_i(l),h=aa(l),h.callback=null,oa(a,h,l),a=l,i.current.lanes=a,fs(i,a),ur(i),t[ci]=i.current,jf(t),new eh(i)},gc.version="19.2.0",gc}var wb;function pw(){if(wb)return rm.exports;wb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=gw(),rm.exports}var yw=pw();const _w="_projectHub_bg565_1",bw="_backgroundOverlay_bg565_23",vw="_content_bg565_53",Tw="_header_bg565_77",Sw="_logoContainer_bg565_109",Ew="_title_bg565_123",ww="_titleGradient_bg565_137",Aw="_subtitle_bg565_173",Rw="_projectGrid_bg565_189",Iw="_projectCard_bg565_229",Cw="_cardGlow_bg565_291",kw="_cardContent_bg565_329",Nw="_projectEmoji_bg565_347",Dw="_projectName_bg565_369",Mw="_projectDescription_bg565_397",xw="_comingSoon_bg565_411",Ow="_cardBorder_bg565_431",Lw="_footer_bg565_471",Vw="_footerText_bg565_491",Xn={projectHub:_w,backgroundOverlay:bw,content:vw,header:Tw,logoContainer:Sw,title:Ew,titleGradient:ww,subtitle:Aw,projectGrid:Rw,projectCard:Iw,cardGlow:Cw,cardContent:kw,projectEmoji:Nw,projectName:Dw,projectDescription:Mw,comingSoon:xw,cardBorder:Ow,footer:Lw,footerText:Vw},Ab="/Hitzkopf/assets/hk_logo_horizontal-EzCfu4m-.png",jw=({onSelectProject:r})=>{const[e,n]=X.useState(null),s=[{id:"hitzkopf",name:"Hitzkopf",description:"Das explosive Partyspiel",color:"#ff6b35",emoji:"",available:!0},{id:"musicvoter",name:"Amplify",description:"Gemeinsam den Ton angeben",color:"#4ecdc4",emoji:"",available:!0}];return p.jsxs("div",{className:Xn.projectHub,children:[p.jsx("div",{className:Xn.backgroundOverlay}),p.jsxs("div",{className:Xn.content,children:[p.jsx("div",{className:Xn.header,children:p.jsxs("div",{className:Xn.logoContainer,children:[p.jsx("h1",{className:Xn.title,children:p.jsx("span",{className:Xn.titleGradient,children:"Party Games"})}),p.jsx("p",{className:Xn.subtitle,children:"Whle dein Spiel"})]})}),p.jsx("div",{className:Xn.projectGrid,children:s.map(o=>p.jsxs("button",{className:`${Xn.projectCard} ${e===o.id?Xn.hovered:""}`,onClick:()=>o.available&&r(o.id),onMouseEnter:()=>n(o.id),onMouseLeave:()=>n(null),disabled:!o.available,style:{"--project-color":o.color,"--project-glow":`${o.color}40`},children:[p.jsx("div",{className:Xn.cardGlow}),p.jsxs("div",{className:Xn.cardContent,children:[p.jsx("div",{className:Xn.projectEmoji,children:o.emoji}),p.jsx("h2",{className:Xn.projectName,children:o.name}),p.jsx("p",{className:Xn.projectDescription,children:o.description}),!o.available&&p.jsx("div",{className:Xn.comingSoon,children:"Bald verfgbar"})]}),p.jsx("div",{className:Xn.cardBorder})]},o.id))}),p.jsx("div",{className:Xn.footer,children:p.jsx("p",{className:Xn.footerText,children:"Made with  by Niklas"})})]})]})},Pw=()=>{};var Rb={};const tT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},zw=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],f=r[n++],m=r[n++],b=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(b>>10)),e[s++]=String.fromCharCode(56320+(b&1023))}else{const c=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},nT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],f=o+1<r.length,m=f?r[o+1]:0,b=o+2<r.length,_=b?r[o+2]:0,S=c>>2,A=(c&3)<<4|m>>4;let V=(m&15)<<2|_>>6,O=_&63;b||(O=64,f||(V=64)),s.push(n[S],n[A],n[V],n[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(tT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):zw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const _=o<r.length?n[r.charAt(o)]:64;++o;const A=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||m==null||_==null||A==null)throw new Bw;const V=c<<2|m>>4;if(s.push(V),_!==64){const O=m<<4&240|_>>2;if(s.push(O),A!==64){const pe=_<<6&192|A;s.push(pe)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uw=function(r){const e=tT(r);return nT.encodeByteArray(e,!0)},_h=function(r){return Uw(r).replace(/\./g,"")},iT=function(r){try{return nT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Hw=()=>qw().__FIREBASE_DEFAULTS__,Fw=()=>{if(typeof process>"u"||typeof Rb>"u")return;const r=Rb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Gw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&iT(r[1]);return e&&JSON.parse(e)},zh=()=>{try{return Pw()||Hw()||Fw()||Gw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},sT=r=>zh()?.emulatorHosts?.[r],Kw=r=>{const e=sT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},rT=()=>zh()?.config,aT=r=>zh()?.[`_${r}`];class $w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Al(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oT(r){return(await fetch(r,{credentials:"include"})).ok}function Qw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[_h(JSON.stringify(n)),_h(JSON.stringify(f)),""].join(".")}const Sc={};function Ww(){const r={prod:[],emulator:[]};for(const e of Object.keys(Sc))Sc[e]?r.emulator.push(e):r.prod.push(e);return r}function Yw(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Ib=!1;function lT(r,e){if(typeof window>"u"||typeof document>"u"||!Al(window.location.host)||Sc[r]===e||Sc[r]||Ib)return;Sc[r]=e;function n(V){return`__firebase__banner__${V}`}const s="__firebase__banner",c=Ww().prod.length>0;function f(){const V=document.getElementById(s);V&&V.remove()}function m(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function b(V,O){V.setAttribute("width","24"),V.setAttribute("id",O),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function _(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{Ib=!0,f()},V}function S(V,O){V.setAttribute("id",O),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function A(){const V=Yw(s),O=n("text"),pe=document.getElementById(O)||document.createElement("span"),de=n("learnmore"),he=document.getElementById(de)||document.createElement("a"),I=n("preprendIcon"),Ae=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const xe=V.element;m(xe),S(he,de);const ut=_();b(Ae,I),xe.append(Ae,pe,he,ut),document.body.appendChild(xe)}c?(pe.innerText="Preview backend disconnected.",Ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,pe.innerText="Preview backend running in this workspace."),pe.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function qi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qi())}function Zw(){const r=zh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function e1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function t1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function n1(){const r=qi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function i1(){return!Zw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){try{return typeof indexedDB=="object"}catch{return!1}}function r1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const a1="FirebaseError";class Xr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=a1,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?o1(c,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Xr(o,m,s)}}function o1(r,e){return r.replace(l1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const l1=/\{\$([^}]+)}/g;function c1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Fr(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],f=e[o];if(Cb(c)&&Cb(f)){if(!Fr(c,f))return!1}else if(c!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Cb(r){return r!==null&&typeof r=="object"}function zc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function u1(r,e){const n=new h1(r,e);return n.subscribe.bind(n)}class h1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");d1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=cm),o.error===void 0&&(o.error=cm),o.complete===void 0&&(o.complete=cm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function cm(){}function oi(r){return r&&r._delegate?r._delegate:r}class yo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mo="[DEFAULT]";class f1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $w;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g1(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:m1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m1(r){return r===mo?void 0:r}function g1(r){return r.instantiationMode==="EAGER"}class p1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new f1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Dt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Dt||(Dt={}));const y1={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},_1=Dt.INFO,b1={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},v1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=b1[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zm{constructor(e){this.name=e,this._logLevel=_1,this._logHandler=v1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?y1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...e),this._logHandler(this,Dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...e),this._logHandler(this,Dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...e),this._logHandler(this,Dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...e),this._logHandler(this,Dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...e),this._logHandler(this,Dt.ERROR,...e)}}const T1=(r,e)=>e.some(n=>r instanceof n);let kb,Nb;function S1(){return kb||(kb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cT=new WeakMap,Sm=new WeakMap,uT=new WeakMap,um=new WeakMap,Jm=new WeakMap;function w1(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(ka(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&cT.set(n,r)}).catch(()=>{}),Jm.set(e,r),e}function A1(r){if(Sm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Sm.set(r,e)}let Em={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Sm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||uT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ka(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function R1(r){Em=r(Em)}function I1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(hm(this),e,...n);return uT.set(s,e.sort?e.sort():[e]),ka(s)}:E1().includes(r)?function(...e){return r.apply(hm(this),e),ka(cT.get(this))}:function(...e){return ka(r.apply(hm(this),e))}}function C1(r){return typeof r=="function"?I1(r):(r instanceof IDBTransaction&&A1(r),T1(r,S1())?new Proxy(r,Em):r)}function ka(r){if(r instanceof IDBRequest)return w1(r);if(um.has(r))return um.get(r);const e=C1(r);return e!==r&&(um.set(r,e),Jm.set(e,r)),e}const hm=r=>Jm.get(r);function k1(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const f=indexedDB.open(r,e),m=ka(f);return s&&f.addEventListener("upgradeneeded",b=>{s(ka(f.result),b.oldVersion,b.newVersion,ka(f.transaction),b)}),n&&f.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),m.then(b=>{c&&b.addEventListener("close",()=>c()),o&&b.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const N1=["get","getKey","getAll","getAllKeys","count"],D1=["put","add","delete","clear"],dm=new Map;function Db(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=D1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||N1.includes(n)))return;const c=async function(f,...m){const b=this.transaction(f,o?"readwrite":"readonly");let _=b.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&b.done]))[0]};return dm.set(e,c),c}R1(r=>({...r,get:(e,n,s)=>Db(e,n)||r.get(e,n,s),has:(e,n)=>!!Db(e,n)||r.has(e,n)}));class M1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function x1(r){return r.getComponent()?.type==="VERSION"}const wm="@firebase/app",Mb="0.14.6";const Gr=new Zm("@firebase/app"),O1="@firebase/app-compat",L1="@firebase/analytics-compat",V1="@firebase/analytics",j1="@firebase/app-check-compat",P1="@firebase/app-check",z1="@firebase/auth",B1="@firebase/auth-compat",U1="@firebase/database",q1="@firebase/data-connect",H1="@firebase/database-compat",F1="@firebase/functions",G1="@firebase/functions-compat",K1="@firebase/installations",$1="@firebase/installations-compat",Q1="@firebase/messaging",W1="@firebase/messaging-compat",Y1="@firebase/performance",X1="@firebase/performance-compat",Z1="@firebase/remote-config",J1="@firebase/remote-config-compat",eA="@firebase/storage",tA="@firebase/storage-compat",nA="@firebase/firestore",iA="@firebase/ai",sA="@firebase/firestore-compat",rA="firebase",aA="12.6.0";const Am="[DEFAULT]",oA={[wm]:"fire-core",[O1]:"fire-core-compat",[V1]:"fire-analytics",[L1]:"fire-analytics-compat",[P1]:"fire-app-check",[j1]:"fire-app-check-compat",[z1]:"fire-auth",[B1]:"fire-auth-compat",[U1]:"fire-rtdb",[q1]:"fire-data-connect",[H1]:"fire-rtdb-compat",[F1]:"fire-fn",[G1]:"fire-fn-compat",[K1]:"fire-iid",[$1]:"fire-iid-compat",[Q1]:"fire-fcm",[W1]:"fire-fcm-compat",[Y1]:"fire-perf",[X1]:"fire-perf-compat",[Z1]:"fire-rc",[J1]:"fire-rc-compat",[eA]:"fire-gcs",[tA]:"fire-gcs-compat",[nA]:"fire-fst",[sA]:"fire-fst-compat",[iA]:"fire-vertex","fire-js":"fire-js",[rA]:"fire-js-all"};const bh=new Map,lA=new Map,Rm=new Map;function xb(r,e){try{r.container.addComponent(e)}catch(n){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function pl(r){const e=r.name;if(Rm.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;Rm.set(e,r);for(const n of bh.values())xb(n,r);for(const n of lA.values())xb(n,r);return!0}function eg(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Ys(r){return r==null?!1:r.settings!==void 0}const cA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Na=new Pc("app","Firebase",cA);class uA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Na.create("app-deleted",{appName:this._name})}}const Rl=aA;function tg(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Am,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Na.create("bad-app-name",{appName:String(o)});if(n||(n=rT()),!n)throw Na.create("no-options");const c=bh.get(o);if(c){if(Fr(n,c.options)&&Fr(s,c.config))return c;throw Na.create("duplicate-app",{appName:o})}const f=new p1(o);for(const b of Rm.values())f.addComponent(b);const m=new uA(n,s,f);return bh.set(o,m),m}function hT(r=Am){const e=bh.get(r);if(!e&&r===Am&&rT())return tg();if(!e)throw Na.create("no-app",{appName:r});return e}function Da(r,e,n){let s=oA[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(f.join(" "));return}pl(new yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const hA="firebase-heartbeat-database",dA=1,Nc="firebase-heartbeat-store";let fm=null;function dT(){return fm||(fm=k1(hA,dA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Nc)}catch(n){console.warn(n)}}}}).catch(r=>{throw Na.create("idb-open",{originalErrorMessage:r.message})})),fm}async function fA(r){try{const n=(await dT()).transaction(Nc),s=await n.objectStore(Nc).get(fT(r));return await n.done,s}catch(e){if(e instanceof Xr)Gr.warn(e.message);else{const n=Na.create("idb-get",{originalErrorMessage:e?.message});Gr.warn(n.message)}}}async function Ob(r,e){try{const s=(await dT()).transaction(Nc,"readwrite");await s.objectStore(Nc).put(e,fT(r)),await s.done}catch(n){if(n instanceof Xr)Gr.warn(n.message);else{const s=Na.create("idb-set",{originalErrorMessage:n?.message});Gr.warn(s.message)}}}function fT(r){return`${r.name}!${r.options.appId}`}const mA=1024,gA=30;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _A(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Lb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>gA){const o=bA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Gr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lb(),{heartbeatsToSend:n,unsentEntries:s}=yA(this._heartbeatsCache.heartbeats),o=_h(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Gr.warn(e),""}}}function Lb(){return new Date().toISOString().substring(0,10)}function yA(r,e=mA){const n=[];let s=r.slice();for(const o of r){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Vb(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Vb(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _A{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s1()?r1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vb(r){return _h(JSON.stringify({version:2,heartbeats:r})).length}function bA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function vA(r){pl(new yo("platform-logger",e=>new M1(e),"PRIVATE")),pl(new yo("heartbeat",e=>new pA(e),"PRIVATE")),Da(wm,Mb,r),Da(wm,Mb,"esm2020"),Da("fire-js","")}vA("");var TA="firebase",SA="12.6.0";Da(TA,SA,"app");function mT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EA=mT,gT=new Pc("auth","Firebase",mT());const vh=new Zm("@firebase/auth");function wA(r,...e){vh.logLevel<=Dt.WARN&&vh.warn(`Auth (${Rl}): ${r}`,...e)}function lh(r,...e){vh.logLevel<=Dt.ERROR&&vh.error(`Auth (${Rl}): ${r}`,...e)}function Kr(r,...e){throw ng(r,...e)}function fr(r,...e){return ng(r,...e)}function pT(r,e,n){const s={...EA(),[e]:n};return new Pc("auth","Firebase",s).create(e,{appName:r.name})}function Ma(r){return pT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return gT.create(r,...e)}function it(r,e,...n){if(!r)throw ng(e,...n)}function qr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw lh(e),new Error(e)}function $r(r,e){r||qr(e)}function Im(){return typeof self<"u"&&self.location?.href||""}function AA(){return jb()==="http:"||jb()==="https:"}function jb(){return typeof self<"u"&&self.location?.protocol||null}function RA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AA()||e1()||"connection"in navigator)?navigator.onLine:!0}function IA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,$r(n>e,"Short delay should be less than long delay!"),this.isMobile=Xw()||t1()}get(){return RA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ig(r,e){$r(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class yT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const CA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NA=new Bc(3e4,6e4);function Bh(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Il(r,e,n,s,o={}){return _T(r,o,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const m=zc({key:r.config.apiKey,...f}).slice(1),b=await r._getAdditionalHeaders();b["Content-Type"]="application/json",r.languageCode&&(b["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:b,...c};return Jw()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Al(r.emulatorConfig.host)&&(_.credentials="include"),yT.fetch()(await vT(r,r.config.apiHost,n,m),_)})}async function _T(r,e,n){r._canInitEmulator=!1;const s={...CA,...e};try{const o=new DA(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw nh(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const m=c.ok?f.errorMessage:f.error.message,[b,_]=m.split(" : ");if(b==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(r,"credential-already-in-use",f);if(b==="EMAIL_EXISTS")throw nh(r,"email-already-in-use",f);if(b==="USER_DISABLED")throw nh(r,"user-disabled",f);const S=s[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw pT(r,S,_);Kr(r,S)}}catch(o){if(o instanceof Xr)throw o;Kr(r,"network-request-failed",{message:String(o)})}}async function bT(r,e,n,s,o={}){const c=await Il(r,e,n,s,o);return"mfaPendingCredential"in c&&Kr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function vT(r,e,n,s){const o=`${e}${n}?${s}`,c=r,f=c.config.emulator?ig(r.config,o):`${r.config.apiScheme}://${o}`;return kA.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}class DA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(fr(this.auth,"network-request-failed")),NA.get())})}}function nh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=fr(r,e,s);return o.customData._tokenResponse=n,o}async function MA(r,e){return Il(r,"POST","/v1/accounts:delete",e)}async function Th(r,e){return Il(r,"POST","/v1/accounts:lookup",e)}function Ec(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xA(r,e=!1){const n=oi(r),s=await n.getIdToken(e),o=sg(s);it(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c?.sign_in_provider;return{claims:o,token:s,authTime:Ec(mm(o.auth_time)),issuedAtTime:Ec(mm(o.iat)),expirationTime:Ec(mm(o.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function mm(r){return Number(r)*1e3}function sg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const o=iT(n);return o?JSON.parse(o):(lh("Failed to decode base64 JWT payload"),null)}catch(o){return lh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Pb(r){const e=sg(r);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Dc(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Xr&&OA(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function OA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class LA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Cm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sh(r){const e=r.auth,n=await r.getIdToken(),s=await Dc(r,Th(e,{idToken:n}));it(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?TT(o.providerUserInfo):[],f=jA(r.providerData,c),m=r.isAnonymous,b=!(r.email&&o.passwordHash)&&!f?.length,_=m?b:!1,S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Cm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,S)}async function VA(r){const e=oi(r);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jA(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function TT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function PA(r,e){const n=await _T(r,{},async()=>{const s=zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,f=await vT(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const b={method:"POST",headers:m,body:s};return r.emulatorConfig&&Al(r.emulatorConfig.host)&&(b.credentials="include"),yT.fetch()(f,b)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zA(r,e){return Il(r,"POST","/v2/accounts:revokeToken",Bh(r,e))}class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){it(e.length!==0,"internal-error");const n=Pb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await PA(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,f=new dl;return s&&(it(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(it(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(it(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return qr("not implemented")}}function Ea(r,e){it(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new LA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xA(this,e)}reload(){return VA(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ys(this.auth.app))return Promise.reject(Ma(this.auth));const e=await this.getIdToken();return await Dc(this,MA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,b=n._redirectEventId??void 0,_=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:A,emailVerified:V,isAnonymous:O,providerData:pe,stsTokenManager:de}=n;it(A&&de,e,"internal-error");const he=dl.fromJSON(this.name,de);it(typeof A=="string",e,"internal-error"),Ea(s,e.name),Ea(o,e.name),it(typeof V=="boolean",e,"internal-error"),it(typeof O=="boolean",e,"internal-error"),Ea(c,e.name),Ea(f,e.name),Ea(m,e.name),Ea(b,e.name),Ea(_,e.name),Ea(S,e.name);const I=new Xs({uid:A,auth:e,email:o,emailVerified:V,displayName:s,isAnonymous:O,photoURL:f,phoneNumber:c,tenantId:m,stsTokenManager:he,createdAt:_,lastLoginAt:S});return pe&&Array.isArray(pe)&&(I.providerData=pe.map(Ae=>({...Ae}))),b&&(I._redirectEventId=b),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new dl;o.updateFromServerResponse(n);const c=new Xs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Sh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];it(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?TT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!c?.length,m=new dl;m.updateFromIdToken(s);const b=new Xs({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Cm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(b,_),b}}const zb=new Map;function Hr(r){$r(r instanceof Function,"Expected a class definition");let e=zb.get(r);return e?($r(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,zb.set(r,e),e)}class ST{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ST.type="NONE";const Bb=ST;function ch(r,e,n){return`firebase:${r}:${e}:${n}`}class fl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=ch(this.userKey,o.apiKey,c),this.fullPersistenceKey=ch("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Th(this.auth,{idToken:e}).catch(()=>{});return n?Xs._fromGetAccountInfoResponse(this.auth,n,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new fl(Hr(Bb),e,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||Hr(Bb);const f=ch(s,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const S=await _._get(f);if(S){let A;if(typeof S=="string"){const V=await Th(e,{idToken:S}).catch(()=>{});if(!V)break;A=await Xs._fromGetAccountInfoResponse(e,V,S)}else A=Xs._fromJSON(e,S);_!==c&&(m=A),c=_;break}}catch{}const b=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!b.length?new fl(c,e,s):(c=b[0],m&&await c._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(f)}catch{}})),new fl(c,e,s))}}function Ub(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ET(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CT(e))return"Blackberry";if(kT(e))return"Webos";if(wT(e))return"Safari";if((e.includes("chrome/")||AT(e))&&!e.includes("edge/"))return"Chrome";if(IT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function ET(r=qi()){return/firefox\//i.test(r)}function wT(r=qi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AT(r=qi()){return/crios\//i.test(r)}function RT(r=qi()){return/iemobile/i.test(r)}function IT(r=qi()){return/android/i.test(r)}function CT(r=qi()){return/blackberry/i.test(r)}function kT(r=qi()){return/webos/i.test(r)}function rg(r=qi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function BA(r=qi()){return rg(r)&&!!window.navigator?.standalone}function UA(){return n1()&&document.documentMode===10}function NT(r=qi()){return rg(r)||IT(r)||kT(r)||CT(r)||/windows phone/i.test(r)||RT(r)}function DT(r,e=[]){let n;switch(r){case"Browser":n=Ub(qi());break;case"Worker":n=`${Ub(qi())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rl}/${s}`}class qA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((f,m)=>{try{const b=e(c);f(b)}catch(b){m(b)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function HA(r,e={}){return Il(r,"GET","/v2/passwordPolicy",Bh(r,e))}const FA=6;class GA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??FA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class KA{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qb(this),this.idTokenSubscription=new qb(this),this.beforeStateQueue=new qA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Th(this,{idToken:e}),s=await Xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ys(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ys(this.app))return Promise.reject(Ma(this));const n=e?oi(e):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ys(this.app)?Promise.reject(Ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ys(this.app)?Promise.reject(Ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HA(this),n=new GA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await zA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hr(e)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[Hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(m,this,"internal-error"),m.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const b=e.addObserver(n,s,o);return()=>{f=!0,b()}}else{const b=e.addObserver(n);return()=>{f=!0,b()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Uh(r){return oi(r)}class qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=u1(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $A(r){ag=r}function QA(r){return ag.loadJS(r)}function WA(){return ag.gapiScript}function YA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function XA(r,e){const n=eg(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Fr(c,e??{}))return o;Kr(o,"already-initialized")}return n.initialize({options:e})}function ZA(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Hr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function JA(r,e,n){const s=Uh(r);it(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=MT(e),{host:f,port:m}=eR(e),b=m===null?"":`:${m}`,_={url:`${c}//${f}${b}/`},S=Object.freeze({host:f,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){it(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),it(Fr(_,s.config.emulator)&&Fr(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,Al(f)?(oT(`${c}//${f}${b}`),lT("Auth",!0)):tR()}function MT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function eR(r){const e=MT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:Hb(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:Hb(f)}}}function Hb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function tR(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class xT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,n){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}}async function ml(r,e){return bT(r,"POST","/v1/accounts:signInWithIdp",Bh(r,e))}const nR="http://localhost";class _o extends xT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const f=new _o(s,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ml(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ml(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ml(e,n)}buildRequest(){const e={requestUri:nR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zc(n)}return e}}class OT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Uc extends OT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wa extends Uc{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";class Aa extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _o._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Aa.credential(n,s)}catch{return null}}}Aa.GOOGLE_SIGN_IN_METHOD="google.com";Aa.PROVIDER_ID="google.com";class Ra extends Uc{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ra.credential(e.oauthAccessToken)}catch{return null}}}Ra.GITHUB_SIGN_IN_METHOD="github.com";Ra.PROVIDER_ID="github.com";class Ia extends Uc{constructor(){super("twitter.com")}static credential(e,n){return _o._fromParams({providerId:Ia.PROVIDER_ID,signInMethod:Ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ia.credentialFromTaggedObject(e)}static credentialFromError(e){return Ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ia.credential(n,s)}catch{return null}}}Ia.TWITTER_SIGN_IN_METHOD="twitter.com";Ia.PROVIDER_ID="twitter.com";async function iR(r,e){return bT(r,"POST","/v1/accounts:signUp",Bh(r,e))}class Va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Xs._fromIdTokenResponse(e,s,o),f=Fb(s);return new Va({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Fb(s);return new Va({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Fb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function LT(r){if(Ys(r.app))return Promise.reject(Ma(r));const e=Uh(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Va({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await iR(e,{returnSecureToken:!0}),s=await Va._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}class Eh extends Xr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Eh(e,n,s,o)}}function VT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(r,c,e,s):c})}async function sR(r,e,n=!1){const s=await Dc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Va._forOperation(r,"link",s)}async function rR(r,e,n=!1){const{auth:s}=r;if(Ys(s.app))return Promise.reject(Ma(s));const o="reauthenticate";try{const c=await Dc(r,VT(s,o,e,r),n);it(c.idToken,s,"internal-error");const f=sg(c.idToken);it(f,s,"internal-error");const{sub:m}=f;return it(r.uid===m,s,"user-mismatch"),Va._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Kr(s,"user-mismatch"),c}}async function aR(r,e,n=!1){if(Ys(r.app))return Promise.reject(Ma(r));const s="signIn",o=await VT(r,s,e),c=await Va._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}function oR(r,e,n,s){return oi(r).onIdTokenChanged(e,n,s)}function lR(r,e,n){return oi(r).beforeAuthStateChanged(e,n)}function cR(r,e,n,s){return oi(r).onAuthStateChanged(e,n,s)}const wh="__sak";class jT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uR=1e3,hR=10;class PT extends jT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,b)=>{this.notifyListeners(f,b)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);UA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,hR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},uR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PT.type="LOCAL";const dR=PT;class zT extends jT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zT.type="SESSION";const BT=zT;function fR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new qh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async _=>_(n.origin,c)),b=await fR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:b})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qh.receivers=[];function og(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class mR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((m,b)=>{const _=og("",20);o.port1.start();const S=setTimeout(()=>{b(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(A){const V=A;if(V.data.eventId===_)switch(V.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{b(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(V.data.response);break;default:clearTimeout(S),clearTimeout(c),b(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function mr(){return window}function gR(r){mr().location.href=r}function UT(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function pR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yR(){return navigator?.serviceWorker?.controller||null}function _R(){return UT()?self:null}const qT="firebaseLocalStorageDb",bR=1,Ah="firebaseLocalStorage",HT="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(r,e){return r.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function vR(){const r=indexedDB.deleteDatabase(qT);return new qc(r).toPromise()}function km(){const r=indexedDB.open(qT,bR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Ah,{keyPath:HT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Ah)?e(s):(s.close(),await vR(),e(await km()))})})}async function Gb(r,e,n){const s=Hh(r,!0).put({[HT]:e,value:n});return new qc(s).toPromise()}async function TR(r,e){const n=Hh(r,!1).get(e),s=await new qc(n).toPromise();return s===void 0?null:s.value}function Kb(r,e){const n=Hh(r,!0).delete(e);return new qc(n).toPromise()}const SR=800,ER=3;class FT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ER)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qh._getInstance(_R()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pR(),!this.activeServiceWorker)return;this.sender=new mR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Gb(e,wh,"1"),await Kb(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>TR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Hh(o,!1).getAll();return new qc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FT.type="LOCAL";const wR=FT;new Bc(3e4,6e4);function AR(r,e){return e?Hr(e):(it(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class lg extends xT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ml(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ml(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RR(r){return aR(r.auth,new lg(r),r.bypassAuthState)}function IR(r){const{auth:e,user:n}=r;return it(n,e,"internal-error"),rR(n,new lg(r),r.bypassAuthState)}async function CR(r){const{auth:e,user:n}=r;return it(n,e,"internal-error"),sR(n,new lg(r),r.bypassAuthState)}class GT{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:f,type:m}=e;if(f){this.reject(f);return}const b={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(b))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RR;case"linkViaPopup":case"linkViaRedirect":return CR;case"reauthViaPopup":case"reauthViaRedirect":return IR;default:Kr(this.auth,"internal-error")}}resolve(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kR=new Bc(2e3,1e4);class ul extends GT{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return it(e,this.auth,"internal-error"),e}async onExecution(){$r(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kR.get())};e()}}ul.currentPopupAction=null;const NR="pendingRedirect",uh=new Map;class DR extends GT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=uh.get(this.auth._key());if(!e){try{const s=await MR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}uh.set(this.auth._key(),e)}return this.bypassAuthState||uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MR(r,e){const n=LR(e),s=OR(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function xR(r,e){uh.set(r._key(),e)}function OR(r){return Hr(r._redirectPersistence)}function LR(r){return ch(NR,r.config.apiKey,r.name)}async function VR(r,e,n=!1){if(Ys(r.app))return Promise.reject(Ma(r));const s=Uh(r),o=AR(s,e),f=await new DR(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const jR=600*1e3;class PR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!KT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jR&&this.cachedEventUids.clear(),this.cachedEventUids.has($b(e))}saveEventToCache(e){this.cachedEventUids.add($b(e)),this.lastProcessedEventTime=Date.now()}}function $b(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function KT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KT(r);default:return!1}}async function BR(r,e={}){return Il(r,"GET","/v1/projects",e)}const UR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qR=/^https?/;async function HR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await BR(r);for(const n of e)try{if(FR(n))return}catch{}Kr(r,"unauthorized-domain")}function FR(r){const e=Im(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!qR.test(n))return!1;if(UR.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const GR=new Bc(3e4,6e4);function Qb(){const r=mr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function KR(r){return new Promise((e,n)=>{function s(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),n(fr(r,"network-request-failed"))},timeout:GR.get()})}if(mr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mr().gapi?.load)s();else{const o=YA("iframefcb");return mr()[o]=()=>{gapi.load?s():n(fr(r,"network-request-failed"))},QA(`${WA()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw hh=null,e})}let hh=null;function $R(r){return hh=hh||KR(r),hh}const QR=new Bc(5e3,15e3),WR="__/auth/iframe",YR="emulator/auth/iframe",XR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JR(r){const e=r.config;it(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?ig(e,YR):`https://${r.config.authDomain}/${WR}`,s={apiKey:e.apiKey,appName:r.name,v:Rl},o=ZR.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${zc(s).slice(1)}`}async function eI(r){const e=await $R(r),n=mr().gapi;return it(n,r,"internal-error"),e.open({where:document.body,url:JR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XR,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const f=fr(r,"network-request-failed"),m=mr().setTimeout(()=>{c(f)},QR.get());function b(){mr().clearTimeout(m),o(s)}s.ping(b).then(b,()=>{c(f)})}))}const tI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nI=500,iI=600,sI="_blank",rI="http://localhost";class Wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aI(r,e,n,s=nI,o=iI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const b={...tI,width:s.toString(),height:o.toString(),top:c,left:f},_=qi().toLowerCase();n&&(m=AT(_)?sI:n),ET(_)&&(e=e||rI,b.scrollbars="yes");const S=Object.entries(b).reduce((V,[O,pe])=>`${V}${O}=${pe},`,"");if(BA(_)&&m!=="_self")return oI(e||"",m),new Wb(null);const A=window.open(e||"",m,S);it(A,r,"popup-blocked");try{A.focus()}catch{}return new Wb(A)}function oI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const lI="__/auth/handler",cI="emulator/auth/handler",uI=encodeURIComponent("fac");async function Yb(r,e,n,s,o,c){it(r.config.authDomain,r,"auth-domain-config-required"),it(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Rl,eventId:o};if(e instanceof OT){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",c1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,A]of Object.entries({}))f[S]=A}if(e instanceof Uc){const S=e.getScopes().filter(A=>A!=="");S.length>0&&(f.scopes=S.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const S of Object.keys(m))m[S]===void 0&&delete m[S];const b=await r._getAppCheckToken(),_=b?`#${uI}=${encodeURIComponent(b)}`:"";return`${hI(r)}?${zc(m).slice(1)}${_}`}function hI({config:r}){return r.emulator?ig(r,cI):`https://${r.authDomain}/${lI}`}const gm="webStorageSupport";class dI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=VR,this._overrideRedirectResult=xR}async _openPopup(e,n,s,o){$r(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Yb(e,n,s,Im(),o);return aI(e,c,og())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await Yb(e,n,s,Im(),o);return gR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):($r(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await eI(e),s=new PR(e);return n.register("authEvent",o=>(it(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gm,{type:gm},o=>{const c=o?.[0]?.[gm];c!==void 0&&n(!!c),Kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NT()||wT()||rg()}}const fI=dI;var Xb="@firebase/auth",Zb="1.11.1";class mI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pI(r){pl(new yo("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;it(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const b={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DT(r)},_=new KA(s,o,c,b);return ZA(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),pl(new yo("auth-internal",e=>{const n=Uh(e.getProvider("auth").getImmediate());return(s=>new mI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Da(Xb,Zb,gI(r)),Da(Xb,Zb,"esm2020")}const yI=300,_I=aT("authIdTokenMaxAge")||yI;let Jb=null;const bI=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>_I)return;const o=n?.token;Jb!==o&&(Jb=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $T(r=hT()){const e=eg(r,"auth");if(e.isInitialized())return e.getImmediate();const n=XA(r,{popupRedirectResolver:fI,persistence:[wR,dR,BT]}),s=aT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=bI(c.toString());lR(n,f,()=>f(n.currentUser)),oR(n,m=>f(m))}}const o=sT("auth");return o&&JA(n,`http://${o}`),n}function vI(){return document.getElementsByTagName("head")?.[0]??document}$A({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=fr("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",vI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pI("Browser");var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xa,QT;(function(){var r;function e(D,R){function N(){}N.prototype=R.prototype,D.F=R.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(B,L,U){for(var C=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)C[Wt-2]=arguments[Wt];return R.prototype[L].apply(B,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,N){N||(N=0);const B=Array(16);if(typeof R=="string")for(var L=0;L<16;++L)B[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;L<16;++L)B[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=D.g[0],N=D.g[1],L=D.g[2];let U=D.g[3],C;C=R+(U^N&(L^U))+B[0]+3614090360&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+B[1]+3905402710&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+B[2]+606105819&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+B[3]+3250441966&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+B[4]+4118548399&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+B[5]+1200080426&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+B[6]+2821735955&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+B[7]+4249261313&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+B[8]+1770035416&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+B[9]+2336552879&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+B[10]+4294925233&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+B[11]+2304563134&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(U^N&(L^U))+B[12]+1804603682&4294967295,R=N+(C<<7&4294967295|C>>>25),C=U+(L^R&(N^L))+B[13]+4254626195&4294967295,U=R+(C<<12&4294967295|C>>>20),C=L+(N^U&(R^N))+B[14]+2792965006&4294967295,L=U+(C<<17&4294967295|C>>>15),C=N+(R^L&(U^R))+B[15]+1236535329&4294967295,N=L+(C<<22&4294967295|C>>>10),C=R+(L^U&(N^L))+B[1]+4129170786&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+B[6]+3225465664&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+B[11]+643717713&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+B[0]+3921069994&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+B[5]+3593408605&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+B[10]+38016083&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+B[15]+3634488961&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+B[4]+3889429448&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+B[9]+568446438&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+B[14]+3275163606&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+B[3]+4107603335&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+B[8]+1163531501&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(L^U&(N^L))+B[13]+2850285829&4294967295,R=N+(C<<5&4294967295|C>>>27),C=U+(N^L&(R^N))+B[2]+4243563512&4294967295,U=R+(C<<9&4294967295|C>>>23),C=L+(R^N&(U^R))+B[7]+1735328473&4294967295,L=U+(C<<14&4294967295|C>>>18),C=N+(U^R&(L^U))+B[12]+2368359562&4294967295,N=L+(C<<20&4294967295|C>>>12),C=R+(N^L^U)+B[5]+4294588738&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+B[8]+2272392833&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+B[11]+1839030562&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+B[14]+4259657740&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+B[1]+2763975236&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+B[4]+1272893353&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+B[7]+4139469664&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+B[10]+3200236656&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+B[13]+681279174&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+B[0]+3936430074&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+B[3]+3572445317&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+B[6]+76029189&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(N^L^U)+B[9]+3654602809&4294967295,R=N+(C<<4&4294967295|C>>>28),C=U+(R^N^L)+B[12]+3873151461&4294967295,U=R+(C<<11&4294967295|C>>>21),C=L+(U^R^N)+B[15]+530742520&4294967295,L=U+(C<<16&4294967295|C>>>16),C=N+(L^U^R)+B[2]+3299628645&4294967295,N=L+(C<<23&4294967295|C>>>9),C=R+(L^(N|~U))+B[0]+4096336452&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+B[7]+1126891415&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+B[14]+2878612391&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+B[5]+4237533241&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+B[12]+1700485571&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+B[3]+2399980690&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+B[10]+4293915773&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+B[1]+2240044497&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+B[8]+1873313359&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+B[15]+4264355552&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+B[6]+2734768916&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+B[13]+1309151649&4294967295,N=L+(C<<21&4294967295|C>>>11),C=R+(L^(N|~U))+B[4]+4149444226&4294967295,R=N+(C<<6&4294967295|C>>>26),C=U+(N^(R|~L))+B[11]+3174756917&4294967295,U=R+(C<<10&4294967295|C>>>22),C=L+(R^(U|~N))+B[2]+718787259&4294967295,L=U+(C<<15&4294967295|C>>>17),C=N+(U^(L|~R))+B[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+U&4294967295}s.prototype.v=function(D,R){R===void 0&&(R=D.length);const N=R-this.blockSize,B=this.C;let L=this.h,U=0;for(;U<R;){if(L==0)for(;U<=N;)o(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<R;)if(B[L++]=D.charCodeAt(U++),L==this.blockSize){o(this,B),L=0;break}}else for(;U<R;)if(B[L++]=D[U++],L==this.blockSize){o(this,B),L=0;break}}this.h=L,this.o+=R},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,N=0;N<4;++N)for(let B=0;B<32;B+=8)D[R++]=this.g[N]>>>B&255;return D};function c(D,R){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=R(D)}function f(D,R){this.h=R;const N=[];let B=!0;for(let L=D.length-1;L>=0;L--){const U=D[L]|0;B&&U==R||(N[L]=U,B=!1)}this.g=N}var m={};function b(D){return-128<=D&&D<128?c(D,function(R){return new f([R|0],R<0?-1:0)}):new f([D|0],D<0?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return A;if(D<0)return he(_(-D));const R=[];let N=1;for(let B=0;D>=N;B++)R[B]=D/N|0,N*=4294967296;return new f(R,0)}function S(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return he(S(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=_(Math.pow(R,8));let B=A;for(let U=0;U<D.length;U+=8){var L=Math.min(8,D.length-U);const C=parseInt(D.substring(U,U+L),R);L<8?(L=_(Math.pow(R,L)),B=B.j(L).add(_(C))):(B=B.j(N),B=B.add(_(C)))}return B}var A=b(0),V=b(1),O=b(16777216);r=f.prototype,r.m=function(){if(de(this))return-he(this).m();let D=0,R=1;for(let N=0;N<this.g.length;N++){const B=this.i(N);D+=(B>=0?B:4294967296+B)*R,R*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(pe(this))return"0";if(de(this))return"-"+he(this).toString(D);const R=_(Math.pow(D,6));var N=this;let B="";for(;;){const L=ut(N,R).g;N=I(N,L.j(R));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=L,pe(N))return U+B;for(;U.length<6;)U="0"+U;B=U+B}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function pe(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function de(D){return D.h==-1}r.l=function(D){return D=I(this,D),de(D)?-1:pe(D)?0:1};function he(D){const R=D.g.length,N=[];for(let B=0;B<R;B++)N[B]=~D.g[B];return new f(N,~D.h).add(V)}r.abs=function(){return de(this)?he(this):this},r.add=function(D){const R=Math.max(this.g.length,D.g.length),N=[];let B=0;for(let L=0;L<=R;L++){let U=B+(this.i(L)&65535)+(D.i(L)&65535),C=(U>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);B=C>>>16,U&=65535,C&=65535,N[L]=C<<16|U}return new f(N,N[N.length-1]&-2147483648?-1:0)};function I(D,R){return D.add(he(R))}r.j=function(D){if(pe(this)||pe(D))return A;if(de(this))return de(D)?he(this).j(he(D)):he(he(this).j(D));if(de(D))return he(this.j(he(D)));if(this.l(O)<0&&D.l(O)<0)return _(this.m()*D.m());const R=this.g.length+D.g.length,N=[];for(var B=0;B<2*R;B++)N[B]=0;for(B=0;B<this.g.length;B++)for(let L=0;L<D.g.length;L++){const U=this.i(B)>>>16,C=this.i(B)&65535,Wt=D.i(L)>>>16,Rn=D.i(L)&65535;N[2*B+2*L]+=C*Rn,Ae(N,2*B+2*L),N[2*B+2*L+1]+=U*Rn,Ae(N,2*B+2*L+1),N[2*B+2*L+1]+=C*Wt,Ae(N,2*B+2*L+1),N[2*B+2*L+2]+=U*Wt,Ae(N,2*B+2*L+2)}for(D=0;D<R;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=R;D<2*R;D++)N[D]=0;return new f(N,0)};function Ae(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function xe(D,R){this.g=D,this.h=R}function ut(D,R){if(pe(R))throw Error("division by zero");if(pe(D))return new xe(A,A);if(de(D))return R=ut(he(D),R),new xe(he(R.g),he(R.h));if(de(R))return R=ut(D,he(R)),new xe(he(R.g),R.h);if(D.g.length>30){if(de(D)||de(R))throw Error("slowDivide_ only works with positive integers.");for(var N=V,B=R;B.l(D)<=0;)N=Bt(N),B=Bt(B);var L=He(N,1),U=He(B,1);for(B=He(B,2),N=He(N,2);!pe(B);){var C=U.add(B);C.l(D)<=0&&(L=L.add(N),U=C),B=He(B,1),N=He(N,1)}return R=I(D,L.j(R)),new xe(L,R)}for(L=A;D.l(R)>=0;){for(N=Math.max(1,Math.floor(D.m()/R.m())),B=Math.ceil(Math.log(N)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),U=_(N),C=U.j(R);de(C)||C.l(D)>0;)N-=B,U=_(N),C=U.j(R);pe(U)&&(U=V),L=L.add(U),D=I(D,C)}return new xe(L,D)}r.B=function(D){return ut(this,D).h},r.and=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let B=0;B<R;B++)N[B]=this.i(B)&D.i(B);return new f(N,this.h&D.h)},r.or=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let B=0;B<R;B++)N[B]=this.i(B)|D.i(B);return new f(N,this.h|D.h)},r.xor=function(D){const R=Math.max(this.g.length,D.g.length),N=[];for(let B=0;B<R;B++)N[B]=this.i(B)^D.i(B);return new f(N,this.h^D.h)};function Bt(D){const R=D.g.length+1,N=[];for(let B=0;B<R;B++)N[B]=D.i(B)<<1|D.i(B-1)>>>31;return new f(N,D.h)}function He(D,R){const N=R>>5;R%=32;const B=D.g.length-N,L=[];for(let U=0;U<B;U++)L[U]=R>0?D.i(U+N)>>>R|D.i(U+N+1)<<32-R:D.i(U+N);return new f(L,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,QT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=S,xa=f}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var WT,_c,YT,dh,Nm,XT,ZT,JT;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(u,g){if(g)e:{var v=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var F=u[w];if(!(F in v))break e;v=v[F]}u=u[u.length-1],w=v[u],g=g(w),g!=w&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var v=[],w;for(w in g)Object.prototype.hasOwnProperty.call(g,w)&&v.push([w,g[w]]);return v}});var c=c||{},f=this||self;function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function b(u,g,v){return u.call.apply(u.bind,arguments)}function _(u,g,v){return _=b,_.apply(null,arguments)}function S(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function A(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(w,F,Q){for(var be=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)be[Le-2]=arguments[Le];return g.prototype[F].apply(w,be)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const g=u.length;if(g>0){const v=Array(g);for(let w=0;w<g;w++)v[w]=u[w];return v}return[]}function pe(u,g){for(let w=1;w<arguments.length;w++){const F=arguments[w];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=u.length||0;const Q=F.length||0;u.length=v+Q;for(let be=0;be<Q;be++)u[v+be]=F[be]}else u.push(F)}}class de{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function he(u){f.setTimeout(()=>{throw u},0)}function I(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ae{constructor(){this.h=this.g=null}add(g,v){const w=xe.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var xe=new de(()=>new ut,u=>u.reset());class ut{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Bt,He=!1,D=new Ae,R=()=>{const u=Promise.resolve(void 0);Bt=()=>{u.then(N)}};function N(){for(var u;u=I();){try{u.h.call(u.g)}catch(v){he(v)}var g=xe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}He=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Wt(u,g){L.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}A(Wt,L),Wt.prototype.init=function(u,g){const v=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Wt.Z.h.call(this)},Wt.prototype.h=function(){Wt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Rn="closure_listenable_"+(Math.random()*1e6|0),ne=0;function ve(u,g,v,w,F){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=F,this.key=++ne,this.da=this.fa=!1}function Ve(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function _t(u,g,v){for(const w in u)g.call(v,u[w],w,u)}function Ht(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function P(u){const g={};for(const v in u)g[v]=u[v];return g}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(u,g){let v,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(v in w)u[v]=w[v];for(let Q=0;Q<re.length;Q++)v=re[Q],Object.prototype.hasOwnProperty.call(w,v)&&(u[v]=w[v])}}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,g,v,w,F){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const be=st(u,g,w,F);return be>-1?(g=u[be],v||(g.fa=!1)):(g=new ve(g,this.src,Q,!!w,F),g.fa=v,u.push(g)),g};function je(u,g){const v=g.type;if(v in u.g){var w=u.g[v],F=Array.prototype.indexOf.call(w,g,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(w,F,1),Q&&(Ve(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function st(u,g,v,w){for(let F=0;F<u.length;++F){const Q=u[F];if(!Q.da&&Q.listener==g&&Q.capture==!!v&&Q.ha==w)return F}return-1}var ht="closure_lm_"+(Math.random()*1e6|0),dn={};function Ye(u,g,v,w,F){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)Ye(u,g[Q],v,w,F);return null}return v=vr(v),u&&u[Rn]?u.J(g,v,m(w)?!!w.capture:!1,F):rn(u,g,v,!1,w,F)}function rn(u,g,v,w,F,Q){if(!g)throw Error("Invalid event type");const be=m(F)?!!F.capture:!!F;let Le=Zi(u);if(Le||(u[ht]=Le=new Ee(u)),v=Le.add(g,v,w,be,Q),v.proxy)return v;if(w=us(),v.proxy=w,w.src=u,w.listener=v,u.addEventListener)U||(F=be),F===void 0&&(F=!1),u.addEventListener(g.toString(),w,F);else if(u.attachEvent)u.attachEvent(Un(g.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function us(){function u(v){return g.call(u.src,u.listener,v)}const g=Hs;return u}function Js(u,g,v,w,F){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)Js(u,g[Q],v,w,F);else w=m(w)?!!w.capture:!!w,v=vr(v),u&&u[Rn]?(u=u.i,Q=String(g).toString(),Q in u.g&&(g=u.g[Q],v=st(g,v,w,F),v>-1&&(Ve(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[Q],u.h--)))):u&&(u=Zi(u))&&(g=u.g[g.toString()],u=-1,g&&(u=st(g,v,w,F)),(v=u>-1?g[u]:null)&&ni(v))}function ni(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Rn])je(g.i,u);else{var v=u.type,w=u.proxy;g.removeEventListener?g.removeEventListener(v,w,u.capture):g.detachEvent?g.detachEvent(Un(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=Zi(g))?(je(v,u),v.h==0&&(v.src=null,g[ht]=null)):Ve(u)}}}function Un(u){return u in dn?dn[u]:dn[u]="on"+u}function Hs(u,g){if(u.da)u=!0;else{g=new Wt(g,this);const v=u.listener,w=u.ha||u.src;u.fa&&ni(u),u=v.call(w,g)}return u}function Zi(u){return u=u[ht],u instanceof Ee?u:null}var Hi="__closure_events_fn_"+(Math.random()*1e9>>>0);function vr(u){return typeof u=="function"?u:(u[Hi]||(u[Hi]=function(g){return u.handleEvent(g)}),u[Hi])}function fn(){B.call(this),this.i=new Ee(this),this.M=this,this.G=null}A(fn,B),fn.prototype[Rn]=!0,fn.prototype.removeEventListener=function(u,g,v,w){Js(this,u,g,v,w)};function Ut(u,g){var v,w=u.G;if(w)for(v=[];w;w=w.G)v.push(w);if(u=u.M,w=g.type||g,typeof g=="string")g=new L(g,u);else if(g instanceof L)g.target=g.target||u;else{var F=g;g=new L(w,u),ye(g,F)}F=!0;let Q,be;if(v)for(be=v.length-1;be>=0;be--)Q=g.g=v[be],F=As(Q,w,!0,g)&&F;if(Q=g.g=u,F=As(Q,w,!0,g)&&F,F=As(Q,w,!1,g)&&F,v)for(be=0;be<v.length;be++)Q=g.g=v[be],F=As(Q,w,!1,g)&&F}fn.prototype.N=function(){if(fn.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let w=0;w<v.length;w++)Ve(v[w]);delete u.g[g],u.h--}}this.G=null},fn.prototype.J=function(u,g,v,w){return this.i.add(String(u),g,!1,v,w)},fn.prototype.K=function(u,g,v,w){return this.i.add(String(u),g,!0,v,w)};function As(u,g,v,w){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let Q=0;Q<g.length;++Q){const be=g[Q];if(be&&!be.da&&be.capture==v){const Le=be.listener,Kt=be.ha||be.src;be.fa&&je(u.i,be),F=Le.call(Kt,w)!==!1&&F}}return F&&!w.defaultPrevented}function hs(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function Rs(u){u.g=hs(()=>{u.g=null,u.i&&(u.i=!1,Rs(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class mn extends B{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Rs(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(u){B.call(this),this.h=u,this.g={}}A(pi,B);var Ji=[];function Ni(u){_t(u.g,function(g,v){this.g.hasOwnProperty(v)&&ni(g)},u),u.g={}}pi.prototype.N=function(){pi.Z.N.call(this),Ni(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=f.JSON.stringify,es=f.JSON.parse,Fs=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function ds(){}function Tr(){}var Fi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function In(){L.call(this,"d")}A(In,L);function yi(){L.call(this,"c")}A(yi,L);var tn={},er=null;function Is(){return er=er||new fn}tn.Ia="serverreachability";function Dn(u){L.call(this,tn.Ia,u)}A(Dn,L);function Di(u){const g=Is();Ut(g,new Dn(g))}tn.STAT_EVENT="statevent";function Cs(u,g){L.call(this,tn.STAT_EVENT,u),this.stat=g}A(Cs,L);function Yt(u){const g=Is();Ut(g,new Cs(g,u))}tn.Ja="timingevent";function li(u,g){L.call(this,tn.Ja,u),this.size=g}A(li,L);function Vn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function yn(){this.g=!0}yn.prototype.ua=function(){this.g=!1};function Ga(u,g,v,w,F,Q){u.info(function(){if(u.g)if(Q){var be="",Le=Q.split("&");for(let vt=0;vt<Le.length;vt++){var Kt=Le[vt].split("=");if(Kt.length>1){const Ke=Kt[0];Kt=Kt[1];const qt=Ke.split("_");be=qt.length>=2&&qt[1]=="type"?be+(Ke+"="+Kt+"&"):be+(Ke+"=redacted&")}}}else be=null;else be=Q;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+g+`
`+v+`
`+be})}function ks(u,g,v,w,F,Q,be){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+g+`
`+v+`
`+Q+" "+be})}function Hn(u,g,v,w){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Zr(u,v)+(w?" "+w:"")})}function fs(u,g){u.info(function(){return"TIMEOUT: "+g})}yn.prototype.info=function(){};function Zr(u,g){if(!u.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var v=Q[u];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var F=w[0];if(F!="noop"&&F!="stop"&&F!="close")for(let be=1;be<w.length;be++)w[be]=""}}}}return qn(Q)}catch{return g}}var Mi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},At={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tt;function _i(){}A(_i,ds),_i.prototype.g=function(){return new XMLHttpRequest},Tt=new _i;function jn(u){return encodeURIComponent(String(u))}function tr(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Mn(u,g,v,w){this.j=u,this.i=g,this.l=v,this.S=w||1,this.V=new pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gi}function Gi(){this.i=null,this.g="",this.h=!1}var Sn={},xn={};function ci(u,g,v){u.M=1,u.A=ir(un(g)),u.u=v,u.R=!0,ts(u,null)}function ts(u,g){u.F=Date.now(),Te(u),u.B=un(u.A);var v=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),me(v.i,"t",w),u.C=0,v=u.j.L,u.h=new Gi,u.g=xs(u.j,v?g:null,!u.u),u.P>0&&(u.O=new mn(_(u.Y,u,u.g),u.P)),g=u.V,v=u.g,w=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Ji[0]=F.toString()),F=Ji);for(let Q=0;Q<F.length;Q++){const be=Ye(v,F[Q],w||g.handleEvent,!1,g.h||g);if(!be)break;g.g[be.key]=be}g=u.J?P(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Di(),Ga(u.i,u.v,u.B,u.l,u.S,u.u)}Mn.prototype.ba=function(u){u=u.target;const g=this.O;g&&nt(u)==3?g.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const Le=nt(this.g),Kt=this.g.ya(),vt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||Ze(this.g)))){this.K||Le!=4||Kt==7||(Kt==8||vt<=0?Di(3):Di(2)),We(this);var g=this.g.ca();this.X=g;var v=j(this);if(this.o=g==200,ks(this.i,this.v,this.B,this.l,this.S,Le,g),this.o){if(this.U&&!this.L){t:{if(this.g){var w,F=this.g;if((w=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(w)){var Q=w;break t}}Q=null}if(u=Q)Hn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fn(this,u);else{this.o=!1,this.m=3,Yt(12),Cn(this),Rt(this);break e}}if(this.R){u=!0;let Ke;for(;!this.K&&this.C<v.length;)if(Ke=_e(this,v),Ke==xn){Le==4&&(this.m=4,Yt(14),u=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==Sn){this.m=4,Yt(15),Hn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Hn(this.i,this.l,Ke,null),Fn(this,Ke);if(Z(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||v.length!=0||this.h.h||(this.m=1,Yt(16),u=!1),this.o=this.o&&u,!u)Hn(this.i,this.l,v,"[Invalid Chunked Response]"),Cn(this),Rt(this);else if(v.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),mt(be),be.P=!0,Yt(11))}}else Hn(this.i,this.l,v,null),Fn(this,v);Le==4&&Cn(this),this.o&&!this.K&&(Le==4?ui(this.j,this):(this.o=!1,Te(this)))}else en(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),Cn(this),Rt(this)}}}catch{}finally{}};function j(u){if(!Z(u))return u.g.la();const g=Ze(u.g);if(g==="")return"";let v="";const w=g.length,F=nt(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Cn(u),Rt(u),"";u.h.i=new f.TextDecoder}for(let Q=0;Q<w;Q++)u.h.h=!0,v+=u.h.i.decode(g[Q],{stream:!(F&&Q==w-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function Z(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function _e(u,g){var v=u.C,w=g.indexOf(`
`,v);return w==-1?xn:(v=Number(g.substring(v,w)),isNaN(v)?Sn:(w+=1,w+v>g.length?xn:(g=g.slice(w,w+v),u.C=w+v,g)))}Mn.prototype.cancel=function(){this.K=!0,Cn(this)};function Te(u){u.T=Date.now()+u.H,Pe(u,u.H)}function Pe(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Vn(_(u.aa,u),g)}function We(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Mn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(fs(this.i,this.B),this.M!=2&&(Di(),Yt(17)),Cn(this),this.m=2,Rt(this)):Pe(this,this.T-u)};function Rt(u){u.j.I==0||u.K||ui(u.j,u)}function Cn(u){We(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Ni(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Fn(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||Ns(v.h,u))){if(!u.L&&Ns(v.h,u)&&v.I==3){try{var w=v.Ba.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)si(v),Zt(v);else break e;Ct(v),Yt(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Vn(_(v.Va,v),6e3));xi(v.h)<=1&&v.ta&&(v.ta=void 0)}else wn(v,11)}else if((u.L||v.g==u)&&si(v),!C(g))for(F=v.Ba.g.parse(g),g=0;g<F.length;g++){let vt=F[g];const Ke=vt[0];if(!(Ke<=v.K))if(v.K=Ke,vt=vt[1],v.I==2)if(vt[0]=="c"){v.M=vt[1],v.ba=vt[2];const qt=vt[3];qt!=null&&(v.ka=qt,v.j.info("VER="+v.ka));const Kn=vt[4];Kn!=null&&(v.za=Kn,v.j.info("SVER="+v.za));const Li=vt[5];Li!=null&&typeof Li=="number"&&Li>0&&(w=1.5*Li,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Gs=u.g;if(Gs){const Xa=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var Q=w.h;Q.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Jr(Q,Q.h),Q.h=null))}if(w.G){const Io=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(w.wa=Io,Ft(w.J,w.G,Io))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var be=u;if(w.na=ns(w,w.L?w.ba:null,w.W),be.L){Ka(w.h,be);var Le=be,Kt=w.O;Kt&&(Le.H=Kt),Le.D&&(We(Le),Te(Le)),w.g=be}else pn(w);v.i.length>0&&ge(v)}else vt[0]!="stop"&&vt[0]!="close"||wn(v,7);else v.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?wn(v,7):Gt(v):vt[0]!="noop"&&v.l&&v.l.qa(vt),v.A=0)}}Di(4)}catch{}}var Xt=class{constructor(u,g){this.g=u,this.map=g}};function nr(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xi(u){return u.h?1:u.g?u.g.size:0}function Ns(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Jr(u,g){u.g?u.g.add(g):u.h=g}function Ka(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}nr.prototype.cancel=function(){if(this.i=$a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $a(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return O(u.i)}var ea=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Er(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const w=u[v].indexOf("=");let F,Q=null;w>=0?(F=u[v].substring(0,w),Q=u[v].substring(w+1)):F=u[v],g(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function En(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof En?(this.l=u.l,gn(this,u.j),this.o=u.o,this.g=u.g,Ds(this,u.u),this.h=u.h,Qa(this,W(u.i)),this.m=u.m):u&&(g=String(u).match(ea))?(this.l=!1,gn(this,g[1]||"",!0),this.o=Ms(g[2]||""),this.g=Ms(g[3]||"",!0),Ds(this,g[4]),this.h=Ms(g[5]||"",!0),Qa(this,g[6]||"",!0),this.m=Ms(g[7]||"")):(this.l=!1,this.i=new rr(null,this.l))}En.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(wr(g,Ar,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(wr(g,Ar,!0),"@"),u.push(jn(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(wr(v,v.charAt(0)=="/"?Ya:Wa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",wr(v,Ro)),u.join("")},En.prototype.resolve=function(u){const g=un(this);let v=!!u.j;v?gn(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var w=u.h;if(v)Ds(g,u.u);else if(v=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var F=g.h.lastIndexOf("/");F!=-1&&(w=g.h.slice(0,F+1)+w)}if(F=w,F==".."||F==".")w="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){w=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let be=0;be<F.length;){const Le=F[be++];Le=="."?w&&be==F.length&&Q.push(""):Le==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&be==F.length&&Q.push("")):(Q.push(Le),w=!0)}w=Q.join("/")}else w=F}return v?g.h=w:v=u.i.toString()!=="",v?Qa(g,W(u.i)):v=!!u.m,v&&(g.m=u.m),g};function un(u){return new En(u)}function gn(u,g,v){u.j=v?Ms(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Ds(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Qa(u,g,v){g instanceof rr?(u.i=g,se(u.i,u.l)):(v||(g=wr(g,sr)),u.i=new rr(g,u.l))}function Ft(u,g,v){u.i.set(g,v)}function ir(u){return Ft(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ms(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function wr(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,bi),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bi(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ar=/[#\/\?@]/g,Wa=/[#\?:]/g,Ya=/[#\?]/g,sr=/[#\?@]/g,Ro=/#/g;function rr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Oi(u){u.g||(u.g=new Map,u.h=0,u.i&&Er(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=rr.prototype,r.add=function(u,g){Oi(this),this.i=null,u=E(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function M(u,g){Oi(u),g=E(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function q(u,g){return Oi(u),g=E(u,g),u.g.has(g)}r.forEach=function(u,g){Oi(this),this.g.forEach(function(v,w){v.forEach(function(F){u.call(g,F,w,this)},this)},this)};function J(u,g){Oi(u);let v=[];if(typeof g=="string")q(u,g)&&(v=v.concat(u.g.get(E(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}r.set=function(u,g){return Oi(this),this.i=null,u=E(this,u),q(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=J(this,u),u.length>0?String(u[0]):g):g};function me(u,g,v){M(u,g),v.length>0&&(u.i=null,u.g.set(E(u,g),O(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let w=0;w<g.length;w++){var v=g[w];const F=jn(v);v=J(this,v);for(let Q=0;Q<v.length;Q++){let be=F;v[Q]!==""&&(be+="="+jn(v[Q])),u.push(be)}}return this.i=u.join("&")};function W(u){const g=new rr;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function E(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function se(u,g){g&&!u.j&&(Oi(u),u.i=null,u.g.forEach(function(v,w){const F=w.toLowerCase();w!=F&&(M(this,w),me(this,F,v))},u)),u.j=g}function Y(u,g){const v=new yn;if(f.Image){const w=new Image;w.onload=S(ke,v,"TestLoadImage: loaded",!0,g,w),w.onerror=S(ke,v,"TestLoadImage: error",!1,g,w),w.onabort=S(ke,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=S(ke,v,"TestLoadImage: timeout",!1,g,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else g(!1)}function Ie(u,g){const v=new yn,w=new AbortController,F=setTimeout(()=>{w.abort(),ke(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:w.signal}).then(Q=>{clearTimeout(F),Q.ok?ke(v,"TestPingServer: ok",!0,g):ke(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),ke(v,"TestPingServer: error",!1,g)})}function ke(u,g,v,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(v)}catch{}}function Ce(){this.g=new Fs}function we(u){this.i=u.Sb||null,this.h=u.ab||!1}A(we,ds),we.prototype.g=function(){return new De(this.i,this.h)};function De(u,g){fn.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(De,fn),r=De.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Be(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ze(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Be(this)),this.g&&(this.readyState=3,Be(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dt(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function dt(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ze(this):Be(this),this.readyState==3&&dt(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ze(this))},r.Na=function(u){this.g&&(this.response=u,ze(this))},r.ga=function(){this.g&&ze(this)};function ze(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Be(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Be(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(De.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function It(u){let g="";return _t(u,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function Ot(u,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=It(v),typeof u=="string"?v!=null&&jn(v):Ft(u,g,v))}function Xe(u){fn.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Xe,fn);var at=/^https?$/i,fe=["POST","PUT"];r=Xe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tt.g(),this.g.onreadystatechange=V(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){_n(this,Q);return}if(u=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)v.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())v.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(fe,g,void 0)>=0)||w||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,be]of v)this.g.setRequestHeader(Q,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){_n(this,Q)}};function _n(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,yt(u),Ue(u)}function yt(u){u.A||(u.A=!0,Ut(u,"complete"),Ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ut(this,"complete"),Ut(this,"abort"),Ue(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ue(this,!0)),Xe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?bt(this):this.Xa())},r.Xa=function(){bt(this)};function bt(u){if(u.h&&typeof c<"u"){if(u.v&&nt(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ut(u,"readystatechange"),nt(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=Q===0){let be=String(u.D).match(ea)[1]||null;!be&&f.self&&f.self.location&&(be=f.self.location.protocol.slice(0,-1)),w=!at.test(be?be.toLowerCase():"")}v=w}if(v)Ut(u,"complete"),Ut(u,"success");else{u.o=6;try{var F=nt(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",yt(u)}}finally{Ue(u)}}}}function Ue(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Ut(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function nt(u){return u.g?u.g.readyState:0}r.ca=function(){try{return nt(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),es(g)}};function Ze(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function en(u){const g={};u=(u.g&&nt(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(C(u[w]))continue;var v=tr(u[w]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=g[F]||[];g[F]=Q,Q.push(v)}Ht(g,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function jt(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function ot(u){this.za=0,this.i=[],this.j=new yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jt("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jt("baseRetryDelayMs",5e3,u),this.Za=jt("retryDelaySeedMs",1e4,u),this.Ta=jt("forwardChannelMaxRetries",2,u),this.va=jt("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new nr(u&&u.concurrentRequestLimit),this.Ba=new Ce,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ot.prototype,r.ka=8,r.I=1,r.connect=function(u,g,v,w){Yt(0),this.W=u,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=ns(this,null,this.W),ge(this)};function Gt(u){if(St(u),u.I==3){var g=u.V++,v=un(u.J);if(Ft(v,"SID",u.M),Ft(v,"RID",g),Ft(v,"TYPE","terminate"),Me(u,v),g=new Mn(u,u.j,g),g.M=2,g.A=ir(un(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=xs(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Te(g)}Ki(u)}function Zt(u){u.g&&(mt(u),u.g.cancel(),u.g=null)}function St(u){Zt(u),u.v&&(f.clearTimeout(u.v),u.v=null),si(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function ge(u){if(!Sr(u.h)&&!u.m){u.m=!0;var g=u.Ea;Bt||R(),He||(Bt(),He=!0),D.add(g,u),u.D=0}}function Ge(u,g){return xi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Vn(_(u.Ea,u,g),hi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Mn(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=P(Q),ye(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=ft(this,F,g),v=un(this.J),Ft(v,"RID",u),Ft(v,"CVER",22),this.G&&Ft(v,"X-HTTP-Session-Id",this.G),Me(this,v),Q&&(this.R?g="headers="+jn(It(Q))+"&"+g:this.u&&Ot(v,this.u,Q)),Jr(this.h,F),this.Ra&&Ft(v,"TYPE","init"),this.S?(Ft(v,"$req",g),Ft(v,"SID","null"),F.U=!0,ci(F,v,null)):ci(F,v,g),this.I=2}}else this.I==3&&(u?Fe(this,u):this.i.length==0||Sr(this.h)||Fe(this))};function Fe(u,g){var v;g?v=g.l:v=u.V++;const w=un(u.J);Ft(w,"SID",u.M),Ft(w,"RID",v),Ft(w,"AID",u.K),Me(u,w),u.u&&u.o&&Ot(w,u.u,u.o),v=new Mn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=ft(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Jr(u.h,v),ci(v,w,g)}function Me(u,g){u.H&&_t(u.H,function(v,w){Ft(g,w,v)}),u.l&&_t({},function(v,w){Ft(g,w,v)})}function ft(u,g,v){v=Math.min(u.i.length,v);const w=u.l?_(u.l.Ka,u.l,u):null;e:{var F=u.i;let Le=-1;for(;;){const Kt=["count="+v];Le==-1?v>0?(Le=F[0].g,Kt.push("ofs="+Le)):Le=0:Kt.push("ofs="+Le);let vt=!0;for(let Ke=0;Ke<v;Ke++){var Q=F[Ke].g;const qt=F[Ke].map;if(Q-=Le,Q<0)Le=Math.max(0,F[Ke].g-100),vt=!1;else try{Q="req"+Q+"_"||"";try{var be=qt instanceof Map?qt:Object.entries(qt);for(const[Kn,Li]of be){let Gs=Li;m(Li)&&(Gs=qn(Li)),Kt.push(Q+Kn+"="+encodeURIComponent(Gs))}}catch(Kn){throw Kt.push(Q+"type="+encodeURIComponent("_badmap")),Kn}}catch{w&&w(qt)}}if(vt){be=Kt.join("&");break e}}be=void 0}return u=u.i.splice(0,v),g.G=u,be}function pn(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Bt||R(),He||(Bt(),He=!0),D.add(g,u),u.A=0}}function Ct(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Vn(_(u.Da,u),hi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ii(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Vn(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Zt(this),ii(this))};function mt(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function ii(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=un(u.na);Ft(g,"RID","rpc"),Ft(g,"SID",u.M),Ft(g,"AID",u.K),Ft(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ft(g,"TO",u.ia),Ft(g,"TYPE","xmlhttp"),Me(u,g),u.u&&u.o&&Ot(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=ir(un(g)),v.u=null,v.R=!0,ts(v,u)}r.Va=function(){this.C!=null&&(this.C=null,Zt(this),Ct(this),Yt(19))};function si(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function ui(u,g){var v=null;if(u.g==g){si(u),mt(u),u.g=null;var w=2}else if(Ns(u.h,g))v=g.G,Ka(u.h,g),w=1;else return;if(u.I!=0){if(g.o)if(w==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;w=Is(),Ut(w,new li(w,v)),ge(u)}else pn(u);else if(F=g.m,F==3||F==0&&g.X>0||!(w==1&&Ge(u,g)||w==2&&Ct(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),F){case 1:wn(u,5);break;case 4:wn(u,10);break;case 3:wn(u,6);break;default:wn(u,2)}}}function hi(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function wn(u,g){if(u.j.info("Error code "+g),g==2){var v=_(u.bb,u),w=u.Ua;const F=!w;w=new En(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||gn(w,"https"),ir(w),F?Y(w.toString(),v):Ie(w.toString(),v)}else Yt(2);u.I=0,u.l&&u.l.pa(g),Ki(u),St(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Ki(u){if(u.I=0,u.ja=[],u.l){const g=$a(u.h);(g.length!=0||u.i.length!=0)&&(pe(u.ja,g),pe(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function ns(u,g,v){var w=v instanceof En?un(v):new En(v);if(w.g!="")g&&(w.g=g+"."+w.g),Ds(w,w.u);else{var F=f.location;w=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const Q=new En(null);w&&gn(Q,w),g&&(Q.g=g),F&&Ds(Q,F),v&&(Q.h=v),w=Q}return v=u.G,g=u.wa,v&&g&&Ft(w,v,g),Ft(w,"VER",u.ka),Me(u,w),w}function xs(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Xe(new we({ab:v})):new Xe(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ar(){}r=ar.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function $i(){}$i.prototype.g=function(u,g){return new Lt(u,g)};function Lt(u,g){fn.call(this),this.g=new ot(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Gn(this)}A(Lt,fn),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Gt(this.g)},Lt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=qn(u),u=v);g.i.push(new Xt(g.Ya++,u)),g.I==3&&ge(g)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,Lt.Z.N.call(this)};function Qi(u){In.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}A(Qi,In);function vi(){yi.call(this),this.status=1}A(vi,yi);function Gn(u){this.g=u}A(Gn,ar),Gn.prototype.ra=function(){Ut(this.g,"a")},Gn.prototype.qa=function(u){Ut(this.g,new Qi(u))},Gn.prototype.pa=function(u){Ut(this.g,new vi)},Gn.prototype.oa=function(){Ut(this.g,"b")},$i.prototype.createWebChannel=$i.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,JT=function(){return new $i},ZT=function(){return Is()},XT=tn,Nm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,dh=Mi,At.COMPLETE="complete",YT=At,Tr.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",fn.prototype.listen=fn.prototype.J,_c=Tr,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,WT=Xe}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const tv="@firebase/firestore",nv="4.9.2";class Bi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");let Cl="12.3.0";const bo=new Zm("@firebase/firestore");function rl(){return bo.logLevel}function Re(r,...e){if(bo.logLevel<=Dt.DEBUG){const n=e.map(cg);bo.debug(`Firestore (${Cl}): ${r}`,...n)}}function Qr(r,...e){if(bo.logLevel<=Dt.ERROR){const n=e.map(cg);bo.error(`Firestore (${Cl}): ${r}`,...n)}}function yl(r,...e){if(bo.logLevel<=Dt.WARN){const n=e.map(cg);bo.warn(`Firestore (${Cl}): ${r}`,...n)}}function cg(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Je(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,eS(r,s,n)}function eS(r,e,n){let s=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Qr(s),new Error(s)}function zt(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||eS(e,o,s)}function rt(r,e){return r}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class tS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Bi.UNAUTHENTICATED)))}shutdown(){}}class SI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){zt(this.o===void 0,42304);let s=this.i;const o=b=>this.i!==s?(s=this.i,n(b)):Promise.resolve();let c=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new gr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const b=c;e.enqueueRetryable((async()=>{await b.promise,await o(this.currentUser)}))},m=b=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((b=>m(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new gr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(zt(typeof s.accessToken=="string",31837,{l:s}),new tS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zt(e===null||typeof e=="string",2055,{h:e}),new Bi(e)}}class wI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new wI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Bi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ys(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){zt(this.o===void 0,3512);const s=c=>{c.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(zt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function II(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=II(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Mt(r,e){return r<e?-1:r>e?1:0}function Dm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return pm(o)===pm(c)?Mt(o,c):pm(o)?1:-1}return Mt(r.length,e.length)}const CI=55296,kI=57343;function pm(r){const e=r.charCodeAt(0);return e>=CI&&e<=kI}function _l(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const sv="__name__";class dr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Je(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Je(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=dr.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Mt(e.length,n.length)}static compareSegments(e,n){const s=dr.isNumericId(e),o=dr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?dr.extractNumericId(e).compare(dr.extractNumericId(n)):Dm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xa.fromString(e.substring(4,e.length-2))}}class cn extends dr{construct(e,n,s){return new cn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new cn(n)}static emptyPath(){return new cn([])}}const NI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ci extends dr{construct(e,n,s){return new Ci(e,n,s)}static isValidIdentifier(e){return NI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ci.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sv}static keyField(){return new Ci([sv])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new Se(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Se(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[o+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new Se(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(c(),o++)}if(c(),f)throw new Se(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ci(n)}static emptyPath(){return new Ci([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(cn.fromString(e))}static fromName(e){return new $e(cn.fromString(e).popFirst(5))}static empty(){return new $e(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new cn(e.slice()))}}function nS(r,e,n){if(!n)throw new Se(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function DI(r,e,n,s){if(e===!0&&s===!0)throw new Se(ae.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function rv(r){if(!$e.isDocumentKey(r))throw new Se(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function av(r){if($e.isDocumentKey(r))throw new Se(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function iS(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Je(12329,{type:typeof r})}function cs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Se(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fh(r);throw new Se(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function ti(r,e){const n={typeString:r};return e&&(n.value=e),n}function Hc(r,e){if(!iS(r))throw new Se(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new Se(ae.INVALID_ARGUMENT,n);return!0}const ov=-62135596800,lv=1e6;class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*lv);return new Tn(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ov)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lv}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,Tn._jsonSchema))return new Tn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ov;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tn._jsonSchemaVersion="firestore/timestamp/1.0",Tn._jsonSchema={type:ti("string",Tn._jsonSchemaVersion),seconds:ti("number"),nanoseconds:ti("number")};class tt{static fromTimestamp(e){return new tt(e)}static min(){return new tt(new Tn(0,0))}static max(){return new tt(new Tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mc=-1;function MI(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=tt.fromTimestamp(s===1e9?new Tn(n+1,0):new Tn(n,s));return new ja(o,$e.empty(),e)}function xI(r){return new ja(r.readTime,r.key,Mc)}class ja{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ja(tt.min(),$e.empty(),Mc)}static max(){return new ja(tt.max(),$e.empty(),Mc)}}function OI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(r.documentKey,e.documentKey),n!==0?n:Mt(r.largestBatchId,e.largestBatchId))}const LI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function kl(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==LI)throw r;Re("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,s)=>{n(e)}))}static reject(e){return new ue(((n,s)=>{s(e)}))}static waitFor(e){return new ue(((n,s)=>{let o=0,c=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++c,f&&c===o&&n()}),(b=>s(b)))})),f=!0,c===o&&n()}))}static or(e){let n=ue.resolve(!1);for(const s of e)n=n.next((o=>o?ue.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new ue(((s,o)=>{const c=e.length,f=new Array(c);let m=0;for(let b=0;b<c;b++){const _=b;n(e[_]).next((S=>{f[_]=S,++m,m===c&&s(f)}),(S=>o(S)))}}))}static doWhile(e,n){return new ue(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function jI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nl(r){return r.name==="IndexedDbTransactionError"}class Gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gh.ce=-1;const hg=-1;function Fc(r){return r==null}function Rh(r){return r===0&&1/r==-1/0}function PI(r){return typeof r=="number"&&Number.isInteger(r)&&!Rh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const sS="";function zI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=cv(e)),e=BI(r.get(n),e);return cv(e)}function BI(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case sS:n+="";break;default:n+=c}}return n}function cv(r){return r+sS+""}function uv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ha(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function rS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Nn{constructor(e,n){this.comparator=e,this.root=n||Ii.EMPTY}insert(e,n){return new Nn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ii{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??Ii.RED,this.left=o??Ii.EMPTY,this.right=c??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new Ii(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ii.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Je(27949);return e+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1;Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw Je(57766)}get value(){throw Je(16141)}get color(){throw Je(16727)}get left(){throw Je(29726)}get right(){throw Je(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new Ii(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ai{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ai(this.comparator);return n.data=e,n}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Es{constructor(e){this.fields=e,e.sort(Ci.comparator)}static empty(){return new Es([])}unionWith(e){let n=new ai(Ci.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Es(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class aS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ki{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new aS("Invalid base64 string: "+c):c}})(e);return new ki(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c})(e);return new ki(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ki.EMPTY_BYTE_STRING=new ki("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pa(r){if(zt(!!r,39018),typeof r=="string"){let e=0;const n=UI.exec(r);if(zt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Bn(r.seconds),nanos:Bn(r.nanos)}}function Bn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function za(r){return typeof r=="string"?ki.fromBase64String(r):ki.fromUint8Array(r)}const oS="server_timestamp",lS="__type__",cS="__previous_value__",uS="__local_write_time__";function dg(r){return(r?.mapValue?.fields||{})[lS]?.stringValue===oS}function Kh(r){const e=r.mapValue.fields[cS];return dg(e)?Kh(e):e}function xc(r){const e=Pa(r.mapValue.fields[uS].timestampValue);return new Tn(e.seconds,e.nanos)}class qI{constructor(e,n,s,o,c,f,m,b,_,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=b,this.useFetchStreams=_,this.isUsingEmulator=S}}const Ih="(default)";class Oc{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new Oc("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}const hS="__type__",HI="__max__",rh={mapValue:{}},dS="__vector__",Ch="value";function Ba(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?dg(r)?4:GI(r)?9007199254740991:FI(r)?10:11:Je(28295,{value:r})}function br(r,e){if(r===e)return!0;const n=Ba(r);if(n!==Ba(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return xc(r).isEqual(xc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=Pa(o.timestampValue),m=Pa(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return za(o.bytesValue).isEqual(za(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Bn(o.geoPointValue.latitude)===Bn(c.geoPointValue.latitude)&&Bn(o.geoPointValue.longitude)===Bn(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Bn(o.integerValue)===Bn(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Bn(o.doubleValue),m=Bn(c.doubleValue);return f===m?Rh(f)===Rh(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return _l(r.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return(function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(uv(f)!==uv(m))return!1;for(const b in f)if(f.hasOwnProperty(b)&&(m[b]===void 0||!br(f[b],m[b])))return!1;return!0})(r,e);default:return Je(52216,{left:r})}}function Lc(r,e){return(r.values||[]).find((n=>br(n,e)))!==void 0}function bl(r,e){if(r===e)return 0;const n=Ba(r),s=Ba(e);if(n!==s)return Mt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(r.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=Bn(c.integerValue||c.doubleValue),b=Bn(f.integerValue||f.doubleValue);return m<b?-1:m>b?1:m===b?0:isNaN(m)?isNaN(b)?0:-1:1})(r,e);case 3:return dv(r.timestampValue,e.timestampValue);case 4:return dv(xc(r),xc(e));case 5:return Dm(r.stringValue,e.stringValue);case 6:return(function(c,f){const m=za(c),b=za(f);return m.compareTo(b)})(r.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),b=f.split("/");for(let _=0;_<m.length&&_<b.length;_++){const S=Mt(m[_],b[_]);if(S!==0)return S}return Mt(m.length,b.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=Mt(Bn(c.latitude),Bn(f.latitude));return m!==0?m:Mt(Bn(c.longitude),Bn(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return fv(r.arrayValue,e.arrayValue);case 10:return(function(c,f){const m=c.fields||{},b=f.fields||{},_=m[Ch]?.arrayValue,S=b[Ch]?.arrayValue,A=Mt(_?.values?.length||0,S?.values?.length||0);return A!==0?A:fv(_,S)})(r.mapValue,e.mapValue);case 11:return(function(c,f){if(c===rh.mapValue&&f===rh.mapValue)return 0;if(c===rh.mapValue)return 1;if(f===rh.mapValue)return-1;const m=c.fields||{},b=Object.keys(m),_=f.fields||{},S=Object.keys(_);b.sort(),S.sort();for(let A=0;A<b.length&&A<S.length;++A){const V=Dm(b[A],S[A]);if(V!==0)return V;const O=bl(m[b[A]],_[S[A]]);if(O!==0)return O}return Mt(b.length,S.length)})(r.mapValue,e.mapValue);default:throw Je(23264,{he:n})}}function dv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Mt(r,e);const n=Pa(r),s=Pa(e),o=Mt(n.seconds,s.seconds);return o!==0?o:Mt(n.nanos,s.nanos)}function fv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=bl(n[o],s[o]);if(c)return c}return Mt(n.length,s.length)}function vl(r){return Mm(r)}function Mm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Pa(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return za(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return $e.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=Mm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const f of s)c?c=!1:o+=",",o+=`${f}:${Mm(n.fields[f])}`;return o+"}"})(r.mapValue):Je(61005,{value:r})}function fh(r){switch(Ba(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(r);return e?16+fh(e):16;case 5:return 2*r.stringValue.length;case 6:return za(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+fh(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ha(s.fields,((c,f)=>{o+=c.length+fh(f)})),o})(r.mapValue);default:throw Je(13486,{value:r})}}function mv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function xm(r){return!!r&&"integerValue"in r}function fg(r){return!!r&&"arrayValue"in r}function gv(r){return!!r&&"nullValue"in r}function pv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mh(r){return!!r&&"mapValue"in r}function FI(r){return(r?.mapValue?.fields||{})[hS]?.stringValue===dS}function wc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ha(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=wc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wc(r.arrayValue.values[n]);return e}return{...r}}function GI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===HI}class Xi{constructor(e){this.value=e}static empty(){return new Xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(n)}setAll(e){let n=Ci.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const b=this.getFieldsMap(n);this.applyChanges(b,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=wc(f):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];mh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ha(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new Xi(wc(this.value))}}function fS(r){const e=[];return Ha(r.fields,((n,s)=>{const o=new Ci([n]);if(mh(s)){const c=fS(s.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)})),new Es(e)}class gi{constructor(e,n,s,o,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new gi(e,0,tt.min(),tt.min(),tt.min(),Xi.empty(),0)}static newFoundDocument(e,n,s,o){return new gi(e,1,n,tt.min(),s,o,0)}static newNoDocument(e,n){return new gi(e,2,n,tt.min(),tt.min(),Xi.empty(),0)}static newUnknownDocument(e,n){return new gi(e,3,n,tt.min(),tt.min(),Xi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kh{constructor(e,n){this.position=e,this.inclusive=n}}function yv(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],f=r.position[o];if(c.field.isKeyField()?s=$e.comparator($e.fromName(f.referenceValue),n.key):s=bl(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function _v(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!br(r.position[n],e.position[n]))return!1;return!0}class Nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function KI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class mS{}class ei extends mS{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new QI(e,n,s):n==="array-contains"?new XI(e,s):n==="in"?new ZI(e,s):n==="not-in"?new JI(e,s):n==="array-contains-any"?new eC(e,s):new ei(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new WI(e,s):new YI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bl(n,this.value)):n!==null&&Ba(this.value)===Ba(n)&&this.matchesComparison(bl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zs extends mS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zs(e,n)}matches(e){return gS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gS(r){return r.op==="and"}function pS(r){return $I(r)&&gS(r)}function $I(r){for(const e of r.filters)if(e instanceof Zs)return!1;return!0}function Om(r){if(r instanceof ei)return r.field.canonicalString()+r.op.toString()+vl(r.value);if(pS(r))return r.filters.map((e=>Om(e))).join(",");{const e=r.filters.map((n=>Om(n))).join(",");return`${r.op}(${e})`}}function yS(r,e){return r instanceof ei?(function(s,o){return o instanceof ei&&s.op===o.op&&s.field.isEqual(o.field)&&br(s.value,o.value)})(r,e):r instanceof Zs?(function(s,o){return o instanceof Zs&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,f,m)=>c&&yS(f,o.filters[m])),!0):!1})(r,e):void Je(19439)}function _S(r){return r instanceof ei?(function(n){return`${n.field.canonicalString()} ${n.op} ${vl(n.value)}`})(r):r instanceof Zs?(function(n){return n.op.toString()+" {"+n.getFilters().map(_S).join(" ,")+"}"})(r):"Filter"}class QI extends ei{constructor(e,n,s){super(e,n,s),this.key=$e.fromName(s.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class WI extends ei{constructor(e,n){super(e,"in",n),this.keys=bS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class YI extends ei{constructor(e,n){super(e,"not-in",n),this.keys=bS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bS(r,e){return(e.arrayValue?.values||[]).map((n=>$e.fromName(n.referenceValue)))}class XI extends ei{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fg(n)&&Lc(n.arrayValue,this.value)}}class ZI extends ei{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class JI extends ei{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class eC extends ei{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Lc(this.value.arrayValue,s)))}}class tC{constructor(e,n=null,s=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function bv(r,e=null,n=[],s=[],o=null,c=null,f=null){return new tC(r,e,n,s,o,c,f)}function mg(r){const e=rt(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Om(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Fc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>vl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>vl(s))).join(",")),e.Te=n}return e.Te}function gg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!KI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!yS(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!_v(r.startAt,e.startAt)&&_v(r.endAt,e.endAt)}function Lm(r){return $e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Gc{constructor(e,n=null,s=[],o=[],c=null,f="F",m=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nC(r,e,n,s,o,c,f,m){return new Gc(r,e,n,s,o,c,f,m)}function $h(r){return new Gc(r)}function vv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function vS(r){return r.collectionGroup!==null}function Ac(r){const e=rt(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new ai(Ci.comparator);return f.filters.forEach((b=>{b.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Nh(c,s))})),n.has(Ci.keyField().canonicalString())||e.Ie.push(new Nh(Ci.keyField(),s))}return e.Ie}function pr(r){const e=rt(r);return e.Ee||(e.Ee=iC(e,Ac(r))),e.Ee}function iC(r,e){if(r.limitType==="F")return bv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Nh(o.field,c)}));const n=r.endAt?new kh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new kh(r.startAt.position,r.startAt.inclusive):null;return bv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Vm(r,e){const n=r.filters.concat([e]);return new Gc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function jm(r,e,n){return new Gc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Qh(r,e){return gg(pr(r),pr(e))&&r.limitType===e.limitType}function TS(r){return`${mg(pr(r))}|lt:${r.limitType}`}function al(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>_S(o))).join(", ")}]`),Fc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>vl(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>vl(o))).join(",")),`Target(${s})`})(pr(r))}; limitType=${r.limitType})`}function Wh(r,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):$e.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,o){for(const c of Ac(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,b){const _=yv(f,m,b);return f.inclusive?_<=0:_<0})(s.startAt,Ac(s),o)||s.endAt&&!(function(f,m,b){const _=yv(f,m,b);return f.inclusive?_>=0:_>0})(s.endAt,Ac(s),o))})(r,e)}function sC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function SS(r){return(e,n)=>{let s=!1;for(const o of Ac(r)){const c=rC(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function rC(r,e,n){const s=r.field.isKeyField()?$e.comparator(e.key,n.key):(function(c,f,m){const b=f.data.field(c),_=m.data.field(c);return b!==null&&_!==null?bl(b,_):Je(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Je(19790,{direction:r.dir})}}class To{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ha(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return rS(this.inner)}size(){return this.innerSize}}const aC=new Nn($e.comparator);function Wr(){return aC}const ES=new Nn($e.comparator);function bc(...r){let e=ES;for(const n of r)e=e.insert(n.key,n);return e}function wS(r){let e=ES;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function go(){return Rc()}function AS(){return Rc()}function Rc(){return new To((r=>r.toString()),((r,e)=>r.isEqual(e)))}const oC=new Nn($e.comparator),lC=new ai($e.comparator);function xt(...r){let e=lC;for(const n of r)e=e.add(n);return e}const cC=new ai(Mt);function uC(){return cC}function pg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function RS(r){return{integerValue:""+r}}function IS(r,e){return PI(e)?RS(e):pg(r,e)}class Yh{constructor(){this._=void 0}}function hC(r,e,n){return r instanceof Vc?(function(o,c){const f={fields:{[lS]:{stringValue:oS},[uS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&dg(c)&&(c=Kh(c)),c&&(f.fields[cS]=c),{mapValue:f}})(n,e):r instanceof Tl?kS(r,e):r instanceof Sl?NS(r,e):(function(o,c){const f=CS(o,c),m=Tv(f)+Tv(o.Ae);return xm(f)&&xm(o.Ae)?RS(m):pg(o.serializer,m)})(r,e)}function dC(r,e,n){return r instanceof Tl?kS(r,e):r instanceof Sl?NS(r,e):n}function CS(r,e){return r instanceof jc?(function(s){return xm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Vc extends Yh{}class Tl extends Yh{constructor(e){super(),this.elements=e}}function kS(r,e){const n=DS(e);for(const s of r.elements)n.some((o=>br(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Sl extends Yh{constructor(e){super(),this.elements=e}}function NS(r,e){let n=DS(e);for(const s of r.elements)n=n.filter((o=>!br(o,s)));return{arrayValue:{values:n}}}class jc extends Yh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tv(r){return Bn(r.integerValue||r.doubleValue)}function DS(r){return fg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Xh{constructor(e,n){this.field=e,this.transform=n}}function fC(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Tl&&o instanceof Tl||s instanceof Sl&&o instanceof Sl?_l(s.elements,o.elements,br):s instanceof jc&&o instanceof jc?br(s.Ae,o.Ae):s instanceof Vc&&o instanceof Vc})(r.transform,e.transform)}class mC{constructor(e,n){this.version=e,this.transformResults=n}}class Ui{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Zh{}function MS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Jh(r.key,Ui.none()):new Kc(r.key,r.data,Ui.none());{const n=r.data,s=Xi.empty();let o=new ai(Ci.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),o=o.add(c)}return new Fa(r.key,s,new Es(o.toArray()),Ui.none())}}function gC(r,e,n){r instanceof Kc?(function(o,c,f){const m=o.value.clone(),b=Ev(o.fieldTransforms,c,f.transformResults);m.setAll(b),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Fa?(function(o,c,f){if(!gh(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Ev(o.fieldTransforms,c,f.transformResults),b=c.data;b.setAll(xS(o)),b.setAll(m),c.convertToFoundDocument(f.version,b).setHasCommittedMutations()})(r,e,n):(function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Ic(r,e,n,s){return r instanceof Kc?(function(c,f,m,b){if(!gh(c.precondition,f))return m;const _=c.value.clone(),S=wv(c.fieldTransforms,b,f);return _.setAll(S),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(r,e,n,s):r instanceof Fa?(function(c,f,m,b){if(!gh(c.precondition,f))return m;const _=wv(c.fieldTransforms,b,f),S=f.data;return S.setAll(xS(c)),S.setAll(_),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(r,e,n,s):(function(c,f,m){return gh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function pC(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=CS(s.transform,o||null);c!=null&&(n===null&&(n=Xi.empty()),n.set(s.field,c))}return n||null}function Sv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&_l(s,o,((c,f)=>fC(c,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Kc extends Zh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fa extends Zh{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function xS(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Ev(r,e,n){const s=new Map;zt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const c=r[o],f=c.transform,m=e.data.field(c.field);s.set(c.field,dC(f,m,n[o]))}return s}function wv(r,e,n){const s=new Map;for(const o of r){const c=o.transform,f=n.data.field(o.field);s.set(o.field,hC(c,f,e))}return s}class Jh extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OS extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&gC(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ic(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ic(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=AS();return this.mutations.forEach((o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(o.key)?null:m;const b=MS(f,m);b!==null&&s.set(o.key,b),f.isValidDocument()||f.convertToNoDocument(tt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),xt())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,((n,s)=>Sv(n,s)))&&_l(this.baseMutations,e.baseMutations,((n,s)=>Sv(n,s)))}}class yg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){zt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return oC})();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,s[f].version);return new yg(e,n,s,o)}}class _C{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class bC{constructor(e,n){this.count=e,this.unchangedNames=n}}var Jn,Pt;function LS(r){switch(r){case ae.OK:return Je(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Je(15467,{code:r})}}function VS(r){if(r===void 0)return Qr("GRPC error has no .code"),ae.UNKNOWN;switch(r){case Jn.OK:return ae.OK;case Jn.CANCELLED:return ae.CANCELLED;case Jn.UNKNOWN:return ae.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return ae.INTERNAL;case Jn.UNAVAILABLE:return ae.UNAVAILABLE;case Jn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Jn.NOT_FOUND:return ae.NOT_FOUND;case Jn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Jn.ABORTED:return ae.ABORTED;case Jn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Jn.DATA_LOSS:return ae.DATA_LOSS;default:return Je(39323,{code:r})}}(Pt=Jn||(Jn={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";function vC(){return new TextEncoder}const TC=new xa([4294967295,4294967295],0);function Av(r){const e=vC().encode(r),n=new QT;return n.update(e),new Uint8Array(n.digest())}function Rv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new xa([n,s],0),new xa([o,c],0)]}class _g{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new vc(`Invalid padding: ${n}`);if(s<0)throw new vc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new vc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xa.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(xa.fromNumber(s)));return o.compare(TC)===1&&(o=new xa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Av(e),[s,o]=Rv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new _g(c,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Av(e),[s,o]=Rv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ed{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ed(tt.min(),o,new Nn(Mt),Wr(),xt())}}class $c{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new $c(s,n,xt(),xt(),xt())}}class ph{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class jS{constructor(e,n){this.targetId=e,this.Ce=n}}class PS{constructor(e,n,s=ki.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Iv{constructor(){this.ve=0,this.Fe=Cv(),this.Me=ki.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),n=xt(),s=xt();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Je(38017,{changeType:c})}})),new $c(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Cv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wr(),this.Je=ah(),this.He=ah(),this.Ye=new Nn(Mt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Je(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Lm(c))if(s===0){const f=new $e(c.path);this.et(n,f,gi.newNoDocument(f,tt.min()))}else zt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),b=m?this.ct(m,e,f):1;if(b!==0){this.it(n);const _=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let f,m;try{f=za(s).toUint8Array()}catch(b){if(b instanceof aS)return yl("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{m=new _g(f,o,c)}catch(b){return yl(b instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&Lm(m.target)){const b=new $e(m.target.path);this.It(b).has(f)||this.Et(f,b)||this.et(f,b,gi.newNoDocument(b,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=xt();this.He.forEach(((c,f)=>{let m=!0;f.forEachWhile((b=>{const _=this.ot(b);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const o=new ed(e,n,this.Ye,this.je,s);return this.je=Wr(),this.Je=ah(),this.He=ah(),this.Ye=new Nn(Mt),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Iv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ai(Mt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ai(Mt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ah(){return new Nn($e.comparator)}function Cv(){return new Nn($e.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},wC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AC={and:"AND",or:"OR"};class RC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pm(r,e){return r.useProto3Json||Fc(e)?e:{value:e}}function Dh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IC(r,e){return Dh(r,e.toTimestamp())}function ws(r){return zt(!!r,49232),tt.fromTimestamp((function(n){const s=Pa(n);return new Tn(s.seconds,s.nanos)})(r))}function bg(r,e){return zm(r,e).canonicalString()}function zm(r,e){const n=(function(o){return new cn(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function BS(r){const e=cn.fromString(r);return zt(KS(e),10190,{key:e.toString()}),e}function Mh(r,e){return bg(r.databaseId,e.path)}function Cc(r,e){const n=BS(e);if(n.get(1)!==r.databaseId.projectId)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new $e(qS(n))}function US(r,e){return bg(r.databaseId,e)}function CC(r){const e=BS(r);return e.length===4?cn.emptyPath():qS(e)}function Bm(r){return new cn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function qS(r){return zt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function kv(r,e,n){return{name:Mh(r,e),fields:n.value.mapValue.fields}}function kC(r,e){return"found"in e?(function(s,o){zt(!!o.found,43571),o.found.name,o.found.updateTime;const c=Cc(s,o.found.name),f=ws(o.found.updateTime),m=o.found.createTime?ws(o.found.createTime):tt.min(),b=new Xi({mapValue:{fields:o.found.fields}});return gi.newFoundDocument(c,f,m,b)})(r,e):"missing"in e?(function(s,o){zt(!!o.missing,3894),zt(!!o.readTime,22933);const c=Cc(s,o.missing),f=ws(o.readTime);return gi.newNoDocument(c,f)})(r,e):Je(7234,{result:e})}function NC(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Je(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,S){return _.useProto3Json?(zt(S===void 0||typeof S=="string",58123),ki.fromBase64String(S||"")):(zt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),ki.fromUint8Array(S||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(_){const S=_.code===void 0?ae.UNKNOWN:VS(_.code);return new Se(S,_.message||"")})(f);n=new PS(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Cc(r,s.document.name),c=ws(s.document.updateTime),f=s.document.createTime?ws(s.document.createTime):tt.min(),m=new Xi({mapValue:{fields:s.document.fields}}),b=gi.newFoundDocument(o,c,f,m),_=s.targetIds||[],S=s.removedTargetIds||[];n=new ph(_,S,b.key,b)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Cc(r,s.document),c=s.readTime?ws(s.readTime):tt.min(),f=gi.newNoDocument(o,c),m=s.removedTargetIds||[];n=new ph([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Cc(r,s.document),c=s.removedTargetIds||[];n=new ph([],c,o,null)}else{if(!("filter"in e))return Je(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,f=new bC(o,c),m=s.targetId;n=new jS(m,f)}}return n}function HS(r,e){let n;if(e instanceof Kc)n={update:kv(r,e.key,e.value)};else if(e instanceof Jh)n={delete:Mh(r,e.key)};else if(e instanceof Fa)n={update:kv(r,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof OS))return Je(16599,{Vt:e.type});n={verify:Mh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Vc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Tl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Sl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof jc)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Je(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:IC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Je(27497)})(r,e.precondition)),n}function DC(r,e){return r&&r.length>0?(zt(e!==void 0,14353),r.map((n=>(function(o,c){let f=o.updateTime?ws(o.updateTime):ws(c);return f.isEqual(tt.min())&&(f=ws(c)),new mC(f,o.transformResults||[])})(n,e)))):[]}function MC(r,e){return{documents:[US(r,e.path)]}}function xC(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=US(r,o);const c=(function(_){if(_.length!==0)return GS(Zs.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(_){if(_.length!==0)return _.map((S=>(function(V){return{field:ol(V.field),direction:VC(V.dir)}})(S)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Pm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function OC(r){let e=CC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){zt(s===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=(function(A){const V=FS(A);return V instanceof Zs&&pS(V)?V.getFilters():[V]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((V=>(function(pe){return new Nh(ll(pe.field),(function(he){switch(he){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(pe.direction))})(V)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let V;return V=typeof A=="object"?A.value:A,Fc(V)?null:V})(n.limit));let b=null;n.startAt&&(b=(function(A){const V=!!A.before,O=A.values||[];return new kh(O,V)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const V=!A.before,O=A.values||[];return new kh(O,V)})(n.endAt)),nC(e,o,f,c,m,"F",b,_)}function LC(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Je(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FS(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ll(n.unaryFilter.field);return ei.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ll(n.unaryFilter.field);return ei.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ll(n.unaryFilter.field);return ei.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ll(n.unaryFilter.field);return ei.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Je(61313);default:return Je(60726)}})(r):r.fieldFilter!==void 0?(function(n){return ei.create(ll(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Je(58110);default:return Je(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Zs.create(n.compositeFilter.filters.map((s=>FS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Je(1026)}})(n.compositeFilter.op))})(r):Je(30097,{filter:r})}function VC(r){return EC[r]}function jC(r){return wC[r]}function PC(r){return AC[r]}function ol(r){return{fieldPath:r.canonicalString()}}function ll(r){return Ci.fromServerFormat(r.fieldPath)}function GS(r){return r instanceof ei?(function(n){if(n.op==="=="){if(pv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(gv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(gv(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:jC(n.op),value:n.value}}})(r):r instanceof Zs?(function(n){const s=n.getFilters().map((o=>GS(o)));return s.length===1?s[0]:{compositeFilter:{op:PC(n.op),filters:s}}})(r):Je(54877,{filter:r})}function zC(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function KS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ca{constructor(e,n,s,o,c=tt.min(),f=tt.min(),m=ki.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=b}withSequenceNumber(e){return new Ca(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BC{constructor(e){this.yt=e}}function UC(r){const e=OC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?jm(e,e.limit,"L"):e}class qC{constructor(){this.Cn=new HC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(ja.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(ja.min())}updateCollectionGroup(e,n,s){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class HC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new ai(cn.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new ai(cn.comparator)).toArray()}}const Nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$S=41943040;class ls{static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls($S,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);class El{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new El(0)}static cr(){return new El(-1)}}const Dv="LruGarbageCollector",FC=1048576;function Mv([r,e],[n,s]){const o=Mt(r,n);return o===0?Mt(e,s):o}class GC{constructor(e){this.Ir=e,this.buffer=new ai(Mv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Mv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(Dv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nl(n)?Re(Dv,"Ignoring IndexedDB error during garbage collection: ",n):await kl(n)}await this.Vr(3e5)}))}}class $C{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(Gh.ce);const s=new GC(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Nv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,f,m,b,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,n)))).next((A=>(c=A,b=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(_=Date.now(),rl()<=Dt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(b-m)+`ms
	Removed ${A} documents in `+(_-b)+`ms
Total Duration: ${_-S}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A}))))}}function QC(r,e){return new $C(r,e)}class WC{constructor(){this.changes=new To((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ue.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Ic(s.mutation,o,Es.empty(),Tn.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,xt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=xt()){const o=go();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let f=bc();return c.forEach(((m,b)=>{f=f.insert(m,b.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=go();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,xt())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let c=Wr();const f=Rc(),m=(function(){return Rc()})();return n.forEach(((b,_)=>{const S=s.get(_.key);o.has(_.key)&&(S===void 0||S.mutation instanceof Fa)?c=c.insert(_.key,_):S!==void 0?(f.set(_.key,S.mutation.getFieldMask()),Ic(S.mutation,_,S.mutation.getFieldMask(),Tn.now())):f.set(_.key,Es.empty())})),this.recalculateAndSaveOverlays(e,c).next((b=>(b.forEach(((_,S)=>f.set(_,S))),n.forEach(((_,S)=>m.set(_,new YC(S,f.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Rc();let o=new Nn(((f,m)=>f-m)),c=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((b=>{const _=n.get(b);if(_===null)return;let S=s.get(b)||Es.empty();S=m.applyToLocalView(_,S),s.set(b,S);const A=(o.get(m.batchId)||xt()).add(b);o=o.insert(m.batchId,A)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const b=m.getNext(),_=b.key,S=b.value,A=AS();S.forEach((V=>{if(!c.has(V)){const O=MS(n.get(V),s.get(V));O!==null&&A.set(V,O),c=c.add(V)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,A))}return ue.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return $e.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):ue.resolve(go());let m=Mc,b=c;return f.next((_=>ue.forEach(_,((S,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(S)?ue.resolve():this.remoteDocumentCache.getEntry(e,S).next((V=>{b=b.insert(S,V)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,b,_,xt()))).next((S=>({batchId:m,changes:wS(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next((s=>{let o=bc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let f=bc();return this.indexManager.getCollectionParents(e,c).next((m=>ue.forEach(m,(b=>{const _=(function(A,V){return new Gc(V,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,b.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next((S=>{S.forEach(((A,V)=>{f=f.insert(A,V)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((f=>{c.forEach(((b,_)=>{const S=_.getKey();f.get(S)===null&&(f=f.insert(S,gi.newInvalidDocument(S)))}));let m=bc();return f.forEach(((b,_)=>{const S=c.get(b);S!==void 0&&Ic(S.mutation,_,Es.empty(),Tn.now()),Wh(n,_)&&(m=m.insert(b,_))})),m}))}}class ZC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ws(o.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:UC(o.bundledQuery),readTime:ws(o.readTime)}})(n)),ue.resolve()}}class JC{constructor(){this.overlays=new Nn($e.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const s=go();return ue.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),ue.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,n,s){const o=go(),c=n.length+1,f=new $e(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const b=m.getNext().value,_=b.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&b.largestBatchId>s&&o.set(b.getKey(),b)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new Nn(((_,S)=>_-S));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let S=c.get(_.largestBatchId);S===null&&(S=go(),c=c.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const m=go(),b=c.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((_,S)=>m.set(_,S))),!(m.size()>=o)););return ue.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new _C(n,s));let c=this.qr.get(n);c===void 0&&(c=xt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}class ek{constructor(){this.sessionToken=ki.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}class vg{constructor(){this.Qr=new ai(mi.$r),this.Ur=new ai(mi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new mi(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new mi(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new $e(new cn([])),s=new mi(n,e),o=new mi(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $e(new cn([])),s=new mi(n,e),o=new mi(n,e+1);let c=xt();return this.Ur.forEachInRange([s,o],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new mi(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class mi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $e.comparator(e.key,n.key)||Mt(e.Yr,n.Yr)}static Kr(e,n){return Mt(e.Yr,n.Yr)||$e.comparator(e.key,n.key)}}class tk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ai(mi.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new yC(c,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new mi(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return ue.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new mi(n,0),o=new mi(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);c.push(m)})),ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ai(Mt);return n.forEach((o=>{const c=new mi(o,0),f=new mi(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(m=>{s=s.add(m.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;$e.isDocumentKey(c)||(c=c.child(""));const f=new mi(new $e(c),0);let m=new ai(Mt);return this.Zr.forEachWhile((b=>{const _=b.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(b.Yr)),!0)}),f),ue.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){zt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(n.mutations,(o=>{const c=new mi(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new mi(n,0),o=this.Zr.firstAfterOrEqual(s);return ue.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nk{constructor(e){this.ri=e,this.docs=(function(){return new Nn($e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ue.resolve(s?s.document.mutableCopy():gi.newInvalidDocument(n))}getEntries(e,n){let s=Wr();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():gi.newInvalidDocument(o))})),ue.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Wr();const f=n.path,m=new $e(f.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(m);for(;b.hasNext();){const{key:_,value:{document:S}}=b.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||OI(xI(S),s)<=0||(o.has(S.key)||Wh(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return ue.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Je(9500)}ii(e,n){return ue.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new ik(this)}getSize(e){return ue.resolve(this.size)}}class ik extends WC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class sk{constructor(e){this.persistence=e,this.si=new To((n=>mg(n)),gg),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.oi=0,this._i=new vg,this.targetCount=0,this.ai=El.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new El(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(c).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ue.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ue.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((f=>{c.push(o.markPotentiallyOrphaned(e,f))})),ue.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ue.resolve(s)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}class QS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Gh(0),this.li=!1,this.li=!0,this.hi=new ek,this.referenceDelegate=e(this),this.Pi=new sk(this),this.indexManager=new qC,this.remoteDocumentCache=(function(o){return new nk(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BC(n),this.Ii=new ZC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new tk(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Re("MemoryPersistence","Starting transaction:",e);const o=new rk(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class rk extends VI{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Ri=new vg,this.Vi=null}static mi(e){return new Tg(e)}get fi(){if(this.Vi)return this.Vi;throw Je(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const o=$e.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,tt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class xh{constructor(e,n){this.persistence=e,this.pi=new To((s=>zI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=QC(this,n)}static mi(e,n){return new xh(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ue.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ue.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,c.removeEntry(f,tt.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fh(e.data.value)),n}br(e,n,s){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ue.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Sg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=xt(),o=xt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Sg(e,n.fromCache,s,o)}}class ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ok{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return i1()?8:jI(qi())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new ak;return this.Ss(e,n,f).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(rl()<=Dt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(rl()<=Dt.DEBUG&&Re("QueryEngine","Query:",al(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(rl()<=Dt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):ue.resolve())}ys(e,n){if(vv(n))return ue.resolve(null);let s=pr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=jm(n,null,"F"),s=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=xt(...c);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((b=>{const _=this.Ds(n,m);return this.Cs(n,_,f,b.readTime)?this.ys(e,jm(n,null,"F")):this.vs(e,_,n,b)}))))})))))}ws(e,n,s,o){return vv(n)||o.isEqual(tt.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,o)?ue.resolve(null):(rl()<=Dt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),al(n)),this.vs(e,f,n,MI(o,Mc)).next((m=>m)))}))}Ds(e,n){let s=new ai(SS(e));return n.forEach(((o,c)=>{Wh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return rl()<=Dt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",al(n)),this.ps.getDocumentsMatchingQuery(e,n,ja.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const Eg="LocalStore",lk=3e8;class ck{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Nn(Mt),this.xs=new To((c=>mg(c)),gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function uk(r,e,n,s){return new ck(r,e,n,s)}async function WS(r,e){const n=rt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let b=xt();for(const _ of o){f.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}for(const _ of c){m.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}return n.localDocuments.getDocuments(s,b).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:m})))}))}))}function hk(r,e){const n=rt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,b,_,S){const A=_.batch,V=A.keys();let O=ue.resolve();return V.forEach((pe=>{O=O.next((()=>S.getEntry(b,pe))).next((de=>{const he=_.docVersions.get(pe);zt(he!==null,48541),de.version.compareTo(he)<0&&(A.applyToRemoteDocument(de,_),de.isValidDocument()&&(de.setReadTime(_.commitVersion),S.addEntry(de)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(b,A)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let b=xt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(b=b.add(m.batch.mutations[_].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function YS(r){const e=rt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function dk(r,e){const n=rt(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((S,A)=>{const V=o.get(A);if(!V)return;m.push(n.Pi.removeMatchingKeys(c,S.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(c,S.addedDocuments,A))));let O=V.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?O=O.withResumeToken(ki.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):S.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(S.resumeToken,s)),o=o.insert(A,O),(function(de,he,I){return de.resumeToken.approximateByteSize()===0||he.snapshotVersion.toMicroseconds()-de.snapshotVersion.toMicroseconds()>=lk?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(V,O,S)&&m.push(n.Pi.updateTargetData(c,O))}));let b=Wr(),_=xt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))})),m.push(fk(c,f,e.documentUpdates).next((S=>{b=S.ks,_=S.qs}))),!s.isEqual(tt.min())){const S=n.Pi.getLastRemoteSnapshotVersion(c).next((A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(S)}return ue.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,b,_))).next((()=>b))})).then((c=>(n.Ms=o,c)))}function fk(r,e,n){let s=xt(),o=xt();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let f=Wr();return n.forEach(((m,b)=>{const _=c.get(m);b.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),b.isNoDocument()&&b.version.isEqual(tt.min())?(e.removeEntry(m,b.readTime),f=f.insert(m,b)):!_.isValidDocument()||b.version.compareTo(_.version)>0||b.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(b),f=f.insert(m,b)):Re(Eg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",b.version)})),{ks:f,qs:o}}))}function mk(r,e){const n=rt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=hg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gk(r,e){const n=rt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,ue.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new Ca(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Um(r,e,n){const s=rt(r),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Nl(f))throw f;Re(Eg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function xv(r,e,n){const s=rt(r);let o=tt.min(),c=xt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(b,_,S){const A=rt(b),V=A.xs.get(S);return V!==void 0?ue.resolve(A.Ms.get(V)):A.Pi.getTargetData(_,S)})(s,f,pr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((b=>{c=b}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:tt.min(),n?c:xt()))).next((m=>(pk(s,sC(e),m),{documents:m,Qs:c})))))}function pk(r,e,n){let s=r.Os.get(e)||tt.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class Ov{constructor(){this.activeTargetIds=uC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yk{constructor(){this.Mo=new Ov,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ov,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _k{Oo(e){}shutdown(){}}const Lv="ConnectivityMonitor";class Vv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(Lv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(Lv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let oh=null;function qm(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}const ym="RestConnection",bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const f=qm(),m=this.zo(e,n.toUriEncodedString());Re(ym,`Sending RPC '${e}' ${f}:`,m,s);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,o,c);const{host:_}=new URL(m),S=Al(_);return this.Jo(e,m,b,s,S).then((A=>(Re(ym,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw yl(ym,`RPC '${e}' ${f} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,n,s,o,c,f){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=bk[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class Tk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ji="WebChannelConnection";class Sk extends vk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const f=qm();return new Promise(((m,b)=>{const _=new WT;_.setWithCredentials(!0),_.listenOnce(YT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case dh.NO_ERROR:const A=_.getResponseJson();Re(ji,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),m(A);break;case dh.TIMEOUT:Re(ji,`RPC '${e}' ${f} timed out`),b(new Se(ae.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const V=_.getStatus();if(Re(ji,`RPC '${e}' ${f} failed with status:`,V,"response text:",_.getResponseText()),V>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const pe=O?.error;if(pe&&pe.status&&pe.message){const de=(function(I){const Ae=I.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Ae)>=0?Ae:ae.UNKNOWN})(pe.status);b(new Se(de,pe.message))}else b(new Se(ae.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new Se(ae.UNAVAILABLE,"Connection failed."));break;default:Je(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Re(ji,`RPC '${e}' ${f} completed.`)}}));const S=JSON.stringify(o);Re(ji,`RPC '${e}' ${f} sending request:`,o),_.send(n,"POST",S,s,15)}))}T_(e,n,s){const o=qm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=JT(),m=ZT(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(b.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,s),b.encodeInitMessageHeaders=!0;const S=c.join("");Re(ji,`Creating RPC '${e}' stream ${o}: ${S}`,b);const A=f.createWebChannel(S,b);this.I_(A);let V=!1,O=!1;const pe=new Tk({Yo:he=>{O?Re(ji,`Not sending because RPC '${e}' stream ${o} is closed:`,he):(V||(Re(ji,`Opening RPC '${e}' stream ${o} transport.`),A.open(),V=!0),Re(ji,`RPC '${e}' stream ${o} sending:`,he),A.send(he))},Zo:()=>A.close()}),de=(he,I,Ae)=>{he.listen(I,(xe=>{try{Ae(xe)}catch(ut){setTimeout((()=>{throw ut}),0)}}))};return de(A,_c.EventType.OPEN,(()=>{O||(Re(ji,`RPC '${e}' stream ${o} transport opened.`),pe.o_())})),de(A,_c.EventType.CLOSE,(()=>{O||(O=!0,Re(ji,`RPC '${e}' stream ${o} transport closed`),pe.a_(),this.E_(A))})),de(A,_c.EventType.ERROR,(he=>{O||(O=!0,yl(ji,`RPC '${e}' stream ${o} transport errored. Name:`,he.name,"Message:",he.message),pe.a_(new Se(ae.UNAVAILABLE,"The operation could not be completed")))})),de(A,_c.EventType.MESSAGE,(he=>{if(!O){const I=he.data[0];zt(!!I,16349);const Ae=I,xe=Ae?.error||Ae[0]?.error;if(xe){Re(ji,`RPC '${e}' stream ${o} received error:`,xe);const ut=xe.status;let Bt=(function(R){const N=Jn[R];if(N!==void 0)return VS(N)})(ut),He=xe.message;Bt===void 0&&(Bt=ae.INTERNAL,He="Unknown error status: "+ut+" with message "+xe.message),O=!0,pe.a_(new Se(Bt,He)),A.close()}else Re(ji,`RPC '${e}' stream ${o} received:`,I),pe.u_(I)}})),de(m,XT.STAT_EVENT,(he=>{he.stat===Nm.PROXY?Re(ji,`RPC '${e}' stream ${o} detected buffering proxy`):he.stat===Nm.NOPROXY&&Re(ji,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{pe.__()}),0),pe}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _m(){return typeof document<"u"?document:null}function td(r){return new RC(r,!0)}class wg{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const jv="PersistentStream";class XS{constructor(e,n,s,o,c,f,m,b){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(Qr(n.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Se(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(jv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Re(jv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ek extends XS{constructor(e,n,s,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NC(this.serializer,e),s=(function(c){if(!("targetChange"in c))return tt.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?tt.min():f.readTime?ws(f.readTime):tt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Bm(this.serializer),n.addTarget=(function(c,f){let m;const b=f.target;if(m=Lm(b)?{documents:MC(c,b)}:{query:xC(c,b).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=zS(c,f.resumeToken);const _=Pm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(tt.min())>0){m.readTime=Dh(c,f.snapshotVersion.toTimestamp());const _=Pm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const s=LC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Bm(this.serializer),n.removeTarget=e,this.q_(n)}}class wk extends XS{constructor(e,n,s,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=DC(e.writeResults,e.commitTime),s=ws(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Bm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>HS(this.serializer,s)))};this.q_(n)}}class Ak{}class Rk extends Ak{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,zm(n,s),o,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ae.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,zm(n,s),o,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Se(ae.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ik{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qr(n),this.aa=!1):Re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const vo="RemoteStore";class Ck{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{So(this)&&(Re(vo,"Restarting streams for network reachability change."),await(async function(b){const _=rt(b);_.Ea.add(4),await Qc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await nd(_)})(this))}))})),this.Ra=new Ik(s,o)}}async function nd(r){if(So(r))for(const e of r.da)await e(!0)}async function Qc(r){for(const e of r.da)await e(!1)}function ZS(r,e){const n=rt(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cg(n)?Ig(n):Dl(n).O_()&&Rg(n,e))}function Ag(r,e){const n=rt(r),s=Dl(n);n.Ia.delete(e),s.O_()&&JS(n,e),n.Ia.size===0&&(s.O_()?s.L_():So(n)&&n.Ra.set("Unknown"))}function Rg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Dl(r).Y_(e)}function JS(r,e){r.Va.Ue(e),Dl(r).Z_(e)}function Ig(r){r.Va=new SC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Dl(r).start(),r.Ra.ua()}function Cg(r){return So(r)&&!Dl(r).x_()&&r.Ia.size>0}function So(r){return rt(r).Ea.size===0}function e0(r){r.Va=void 0}async function kk(r){r.Ra.set("Online")}async function Nk(r){r.Ia.forEach(((e,n)=>{Rg(r,e)}))}async function Dk(r,e){e0(r),Cg(r)?(r.Ra.ha(e),Ig(r)):r.Ra.set("Unknown")}async function Mk(r,e,n){if(r.Ra.set("Online"),e instanceof PS&&e.state===2&&e.cause)try{await(async function(o,c){const f=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){Re(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Oh(r,s)}else if(e instanceof ph?r.Va.Ze(e):e instanceof jS?r.Va.st(e):r.Va.tt(e),!n.isEqual(tt.min()))try{const s=await YS(r.localStore);n.compareTo(s)>=0&&await(function(c,f){const m=c.Va.Tt(f);return m.targetChanges.forEach(((b,_)=>{if(b.resumeToken.approximateByteSize()>0){const S=c.Ia.get(_);S&&c.Ia.set(_,S.withResumeToken(b.resumeToken,f))}})),m.targetMismatches.forEach(((b,_)=>{const S=c.Ia.get(b);if(!S)return;c.Ia.set(b,S.withResumeToken(ki.EMPTY_BYTE_STRING,S.snapshotVersion)),JS(c,b);const A=new Ca(S.target,b,_,S.sequenceNumber);Rg(c,A)})),c.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){Re(vo,"Failed to raise snapshot:",s),await Oh(r,s)}}async function Oh(r,e,n){if(!Nl(e))throw e;r.Ea.add(1),await Qc(r),r.Ra.set("Offline"),n||(n=()=>YS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Re(vo,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await nd(r)}))}function t0(r,e){return e().catch((n=>Oh(r,n,e)))}async function id(r){const e=rt(r),n=Ua(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;xk(e);)try{const o=await mk(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Ok(e,o)}catch(o){await Oh(e,o)}n0(e)&&i0(e)}function xk(r){return So(r)&&r.Ta.length<10}function Ok(r,e){r.Ta.push(e);const n=Ua(r);n.O_()&&n.X_&&n.ea(e.mutations)}function n0(r){return So(r)&&!Ua(r).x_()&&r.Ta.length>0}function i0(r){Ua(r).start()}async function Lk(r){Ua(r).ra()}async function Vk(r){const e=Ua(r);for(const n of r.Ta)e.ea(n.mutations)}async function jk(r,e,n){const s=r.Ta.shift(),o=yg.from(s,e,n);await t0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await id(r)}async function Pk(r,e){e&&Ua(r).X_&&await(async function(s,o){if((function(f){return LS(f)&&f!==ae.ABORTED})(o.code)){const c=s.Ta.shift();Ua(s).B_(),await t0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await id(s)}})(r,e),n0(r)&&i0(r)}async function Pv(r,e){const n=rt(r);n.asyncQueue.verifyOperationInProgress(),Re(vo,"RemoteStore received new credentials");const s=So(n);n.Ea.add(3),await Qc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nd(n)}async function zk(r,e){const n=rt(r);e?(n.Ea.delete(2),await nd(n)):e||(n.Ea.add(2),await Qc(n),n.Ra.set("Unknown"))}function Dl(r){return r.ma||(r.ma=(function(n,s,o){const c=rt(n);return c.sa(),new Ek(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:kk.bind(null,r),t_:Nk.bind(null,r),r_:Dk.bind(null,r),H_:Mk.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Cg(r)?Ig(r):r.Ra.set("Unknown")):(await r.ma.stop(),e0(r))}))),r.ma}function Ua(r){return r.fa||(r.fa=(function(n,s,o){const c=rt(n);return c.sa(),new wk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lk.bind(null,r),r_:Pk.bind(null,r),ta:Vk.bind(null,r),na:jk.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await id(r)):(await r.fa.stop(),r.Ta.length>0&&(Re(vo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class kg{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const f=Date.now()+s,m=new kg(e,n,f,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ng(r,e){if(Qr("AsyncQueue",`${e}: ${r}`),Nl(r))return new Se(ae.UNAVAILABLE,`${e}: ${r}`);throw r}class gl{static emptySet(e){return new gl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||$e.comparator(n.key,s.key):(n,s)=>$e.comparator(n.key,s.key),this.keyedMap=bc(),this.sortedSet=new Nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new gl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class zv{constructor(){this.ga=new Nn($e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Je(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class wl{constructor(e,n,s,o,c,f,m,b,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=b,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,o,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new wl(e,n,gl.emptySet(n),f,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class Bk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Uk{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=rt(n),c=o.queries;o.queries=Bv(),c.forEach(((f,m)=>{for(const b of m.Sa)b.onError(s)}))})(this,new Se(ae.ABORTED,"Firestore shutting down"))}}function Bv(){return new To((r=>TS(r)),Qh)}async function Dg(r,e){const n=rt(r);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new Bk,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Ng(f,`Initialization of query '${al(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&xg(n)}async function Mg(r,e){const n=rt(r),s=e.query;let o=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function qk(r,e){const n=rt(r);let s=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&xg(n)}function Hk(r,e,n){const s=rt(r),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function xg(r){r.Ca.forEach((e=>{e.next()}))}var Hm,Uv;(Uv=Hm||(Hm={})).Ma="default",Uv.Cache="cache";class Og{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new wl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hm.Cache}}class s0{constructor(e){this.key=e}}class r0{constructor(e){this.key=e}}class Fk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=SS(e),this.tu=new gl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new zv,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const b=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,A)=>{const V=o.get(S),O=Wh(this.query,A)?A:null,pe=!!V&&this.mutatedKeys.has(V.key),de=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let he=!1;V&&O?V.data.isEqual(O.data)?pe!==de&&(s.track({type:3,doc:O}),he=!0):this.su(V,O)||(s.track({type:2,doc:O}),he=!0,(b&&this.eu(O,b)>0||_&&this.eu(O,_)<0)&&(m=!0)):!V&&O?(s.track({type:0,doc:O}),he=!0):V&&!O&&(s.track({type:1,doc:V}),he=!0,(b||_)&&(m=!0)),he&&(O?(f=f.add(O),c=de?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{tu:f,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((S,A)=>(function(O,pe){const de=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je(20277,{Rt:he})}};return de(O)-de(pe)})(S.type,A.type)||this.eu(S.doc,A.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],b=this.Xa.size===0&&this.current&&!o?1:0,_=b!==this.Za;return this.Za=b,f.length!==0||_?{snapshot:new wl(this.query,e.tu,c,f,e.mutatedKeys,b===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new r0(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new s0(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lg="SyncEngine";class Gk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Kk{constructor(e){this.key=e,this.hu=!1}}class $k{constructor(e,n,s,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new To((m=>TS(m)),Qh),this.Iu=new Map,this.Eu=new Set,this.du=new Nn($e.comparator),this.Au=new Map,this.Ru=new vg,this.Vu={},this.mu=new Map,this.fu=El.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Qk(r,e,n=!0){const s=h0(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await a0(s,e,n,!0),o}async function Wk(r,e){const n=h0(r);await a0(n,e,!0,!1)}async function a0(r,e,n,s){const o=await gk(r.localStore,pr(e)),c=o.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await Yk(r,e,c,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&ZS(r.remoteStore,o),m}async function Yk(r,e,n,s,o){r.pu=(A,V,O)=>(async function(de,he,I,Ae){let xe=he.view.ru(I);xe.Cs&&(xe=await xv(de.localStore,he.query,!1).then((({documents:D})=>he.view.ru(D,xe))));const ut=Ae&&Ae.targetChanges.get(he.targetId),Bt=Ae&&Ae.targetMismatches.get(he.targetId)!=null,He=he.view.applyChanges(xe,de.isPrimaryClient,ut,Bt);return Hv(de,he.targetId,He.au),He.snapshot})(r,A,V,O);const c=await xv(r.localStore,e,!0),f=new Fk(e,c.Qs),m=f.ru(c.documents),b=$c.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),_=f.applyChanges(m,r.isPrimaryClient,b);Hv(r,n,_.au);const S=new Gk(e,n,f);return r.Tu.set(e,S),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),_.snapshot}async function Xk(r,e,n){const s=rt(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((f=>!Qh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Um(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Ag(s.remoteStore,o.targetId),Fm(s,o.targetId)})).catch(kl)):(Fm(s,o.targetId),await Um(s.localStore,o.targetId,!0))}async function Zk(r,e){const n=rt(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ag(n.remoteStore,s.targetId))}async function Jk(r,e,n){const s=aN(r);try{const o=await(function(f,m){const b=rt(f),_=Tn.now(),S=m.reduce(((O,pe)=>O.add(pe.key)),xt());let A,V;return b.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let pe=Wr(),de=xt();return b.Ns.getEntries(O,S).next((he=>{pe=he,pe.forEach(((I,Ae)=>{Ae.isValidDocument()||(de=de.add(I))}))})).next((()=>b.localDocuments.getOverlayedDocuments(O,pe))).next((he=>{A=he;const I=[];for(const Ae of m){const xe=pC(Ae,A.get(Ae.key).overlayedDocument);xe!=null&&I.push(new Fa(Ae.key,xe,fS(xe.value.mapValue),Ui.exists(!0)))}return b.mutationQueue.addMutationBatch(O,_,I,m)})).next((he=>{V=he;const I=he.applyToLocalDocumentSet(A,de);return b.documentOverlayCache.saveOverlays(O,he.batchId,I)}))})).then((()=>({batchId:V.batchId,changes:wS(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,b){let _=f.Vu[f.currentUser.toKey()];_||(_=new Nn(Mt)),_=_.insert(m,b),f.Vu[f.currentUser.toKey()]=_})(s,o.batchId,n),await Wc(s,o.changes),await id(s.remoteStore)}catch(o){const c=Ng(o,"Failed to persist write");n.reject(c)}}async function o0(r,e){const n=rt(r);try{const s=await dk(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const f=n.Au.get(c);f&&(zt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?zt(f.hu,14607):o.removedDocuments.size>0&&(zt(f.hu,42227),f.hu=!1))})),await Wc(n,s,e)}catch(s){await kl(s)}}function qv(r,e,n){const s=rt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const b=rt(f);b.onlineState=m;let _=!1;b.queries.forEach(((S,A)=>{for(const V of A.Sa)V.va(m)&&(_=!0)})),_&&xg(b)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eN(r,e,n){const s=rt(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let f=new Nn($e.comparator);f=f.insert(c,gi.newNoDocument(c,tt.min()));const m=xt().add(c),b=new ed(tt.min(),new Map,new Nn(Mt),f,m);await o0(s,b),s.du=s.du.remove(c),s.Au.delete(e),Vg(s)}else await Um(s.localStore,e,!1).then((()=>Fm(s,e,n))).catch(kl)}async function tN(r,e){const n=rt(r),s=e.batch.batchId;try{const o=await hk(n.localStore,e);c0(n,s,null),l0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wc(n,o)}catch(o){await kl(o)}}async function nN(r,e,n){const s=rt(r);try{const o=await(function(f,m){const b=rt(f);return b.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return b.mutationQueue.lookupMutationBatch(_,m).next((A=>(zt(A!==null,37113),S=A.keys(),b.mutationQueue.removeMutationBatch(_,A)))).next((()=>b.mutationQueue.performConsistencyCheck(_))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(_,S,m))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>b.localDocuments.getDocuments(_,S)))}))})(s.localStore,e);c0(s,e,n),l0(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Wc(s,o)}catch(o){await kl(o)}}function l0(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function c0(r,e,n){const s=rt(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Fm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||u0(r,s)}))}function u0(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Ag(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Vg(r))}function Hv(r,e,n){for(const s of n)s instanceof s0?(r.Ru.addReference(s.key,e),iN(r,s)):s instanceof r0?(Re(Lg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||u0(r,s.key)):Je(19791,{wu:s})}function iN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(Re(Lg,"New document in limbo: "+n),r.Eu.add(s),Vg(r))}function Vg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new $e(cn.fromString(e)),s=r.fu.next();r.Au.set(s,new Kk(n)),r.du=r.du.insert(n,s),ZS(r.remoteStore,new Ca(pr($h(n.path)),s,"TargetPurposeLimboResolution",Gh.ce))}}async function Wc(r,e,n){const s=rt(r),o=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,b)=>{f.push(s.pu(b,e,n).then((_=>{if((_||n)&&s.isPrimaryClient){const S=_?!_.fromCache:n?.targetChanges.get(b.targetId)?.current;s.sharedClientState.updateQueryState(b.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Sg.As(b.targetId,_);c.push(S)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(b,_){const S=rt(b);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ue.forEach(_,(V=>ue.forEach(V.Es,(O=>S.persistence.referenceDelegate.addReference(A,V.targetId,O))).next((()=>ue.forEach(V.ds,(O=>S.persistence.referenceDelegate.removeReference(A,V.targetId,O)))))))))}catch(A){if(!Nl(A))throw A;Re(Eg,"Failed to update sequence numbers: "+A)}for(const A of _){const V=A.targetId;if(!A.fromCache){const O=S.Ms.get(V),pe=O.snapshotVersion,de=O.withLastLimboFreeSnapshotVersion(pe);S.Ms=S.Ms.insert(V,de)}}})(s.localStore,c))}async function sN(r,e){const n=rt(r);if(!n.currentUser.isEqual(e)){Re(Lg,"User change. New user:",e.toKey());const s=await WS(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((b=>{b.reject(new Se(ae.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Wc(n,s.Ls)}}function rN(r,e){const n=rt(r),s=n.Au.get(e);if(s&&s.hu)return xt().add(s.key);{let o=xt();const c=n.Iu.get(e);if(!c)return o;for(const f of c){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function h0(r){const e=rt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=o0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eN.bind(null,e),e.Pu.H_=qk.bind(null,e.eventManager),e.Pu.yu=Hk.bind(null,e.eventManager),e}function aN(r){const e=rt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nN.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return uk(this.persistence,new ok,e.initialUser,this.serializer)}Cu(e){return new QS(Tg.mi,this.serializer)}Du(e){return new yk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class oN extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){zt(this.persistence.referenceDelegate instanceof xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new KC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new QS((s=>xh.mi(s,n)),this.serializer)}}class Gm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>qv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await zk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Uk})()}createDatastore(e){const n=td(e.databaseInfo.databaseId),s=(function(c){return new Sk(c)})(e.databaseInfo);return(function(c,f,m,b){return new Rk(c,f,m,b)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,f,m){return new Ck(s,o,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>qv(this.syncEngine,n,0)),(function(){return Vv.v()?new Vv:new _k})())}createSyncEngine(e,n){return(function(o,c,f,m,b,_,S){const A=new $k(o,c,f,m,b,_);return S&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=rt(n);Re(vo,"RemoteStore shutting down."),s.Ea.add(5),await Qc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gm.provider={build:()=>new Gm};class jg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class lN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Se(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const f=rt(o),m={documents:c.map((A=>Mh(f.serializer,A)))},b=await f.Ho("BatchGetDocuments",f.serializer.databaseId,cn.emptyPath(),m,c.length),_=new Map;b.forEach((A=>{const V=kC(f.serializer,A);_.set(V.key.toString(),V)}));const S=[];return c.forEach((A=>{const V=_.get(A.toString());zt(!!V,55234,{key:A}),S.push(V)})),S})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=$e.fromPath(s);this.mutations.push(new OS(o,this.precondition(o)))})),await(async function(s,o){const c=rt(s),f={writes:o.map((m=>HS(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,cn.emptyPath(),f)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Je(50498,{Gu:e.constructor.name});n=tt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new Se(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(tt.min())?Ui.exists(!1):Ui.updateTime(n):Ui.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(tt.min()))throw new Se(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ui.updateTime(n)}return Ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cN{constructor(e,n,s,o,c){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=c,this.zu=s.maxAttempts,this.M_=new wg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new lN(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Fc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!LS(n)}return!1}}const qa="FirestoreClient";class uN{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Bi.UNAUTHENTICATED,this.clientId=ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{Re(qa,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(Re(qa,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ng(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function bm(r,e){r.asyncQueue.verifyOperationInProgress(),Re(qa,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await WS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Fv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await hN(r);Re(qa,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Pv(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Pv(e.remoteStore,o))),r._onlineComponents=e}async function hN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Re(qa,"Using user provided OfflineComponentProvider");try{await bm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;yl("Error using user provided cache. Falling back to memory cache: "+n),await bm(r,new Lh)}}else Re(qa,"Using default OfflineComponentProvider"),await bm(r,new oN(void 0));return r._offlineComponents}async function Pg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Re(qa,"Using user provided OnlineComponentProvider"),await Fv(r,r._uninitializedComponentsProvider._online)):(Re(qa,"Using default OnlineComponentProvider"),await Fv(r,new Gm))),r._onlineComponents}function dN(r){return Pg(r).then((e=>e.syncEngine))}function fN(r){return Pg(r).then((e=>e.datastore))}async function Vh(r){const e=await Pg(r),n=e.eventManager;return n.onListen=Qk.bind(null,e.syncEngine),n.onUnlisten=Xk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Wk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zk.bind(null,e.syncEngine),n}function mN(r,e,n={}){const s=new gr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,b,_){const S=new jg({next:V=>{S.Nu(),f.enqueueAndForget((()=>Mg(c,A)));const O=V.docs.has(m);!O&&V.fromCache?_.reject(new Se(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&V.fromCache&&b&&b.source==="server"?_.reject(new Se(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(V)},error:V=>_.reject(V)}),A=new Og($h(m.path),S,{includeMetadataChanges:!0,qa:!0});return Dg(c,A)})(await Vh(r),r.asyncQueue,e,n,s))),s.promise}function gN(r,e,n={}){const s=new gr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,b,_){const S=new jg({next:V=>{S.Nu(),f.enqueueAndForget((()=>Mg(c,A))),V.fromCache&&b.source==="server"?_.reject(new Se(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(V)},error:V=>_.reject(V)}),A=new Og(m,S,{includeMetadataChanges:!0,qa:!0});return Dg(c,A)})(await Vh(r),r.asyncQueue,e,n,s))),s.promise}function d0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Gv=new Map;const f0="firestore.googleapis.com",Kv=!0;class $v{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f0,this.ssl=Kv}else this.host=e.host,this.ssl=e.ssl??Kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FC)throw new Se(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new TI;switch(s.type){case"firstParty":return new AI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Se(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Gv.get(n);s&&(Re("ComponentProvider","Removing Datastore"),Gv.delete(n),s.terminate())})(this),Promise.resolve()}}function pN(r,e,n,s={}){r=cs(r,sd);const o=Al(e),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(oT(`https://${m}`),lT("Firestore",!0)),c.host!==f0&&c.host!==m&&yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...c,host:m,ssl:o,emulatorOptions:s};if(!Fr(b,f)&&(r._setSettings(b),s.mockUserToken)){let _,S;if(typeof s.mockUserToken=="string")_=s.mockUserToken,S=Bi.MOCK_USER;else{_=Qw(s.mockUserToken,r._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Se(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Bi(A)}r._authCredentials=new SI(new tS(_,S))}}class Eo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class kn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}toJSON(){return{type:kn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Hc(n,kn._jsonSchema))return new kn(e,s||null,new $e(cn.fromString(n.referencePath)))}}kn._jsonSchemaVersion="firestore/documentReference/1.0",kn._jsonSchema={type:ti("string",kn._jsonSchemaVersion),referencePath:ti("string")};class Oa extends Eo{constructor(e,n,s){super(e,n,$h(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new $e(e))}withConverter(e){return new Oa(this.firestore,e,this._path)}}function Km(r,e,...n){if(r=oi(r),nS("collection","path",e),r instanceof sd){const s=cn.fromString(e,...n);return av(s),new Oa(r,null,s)}{if(!(r instanceof kn||r instanceof Oa))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(cn.fromString(e,...n));return av(s),new Oa(r.firestore,null,s)}}function qe(r,e,...n){if(r=oi(r),arguments.length===1&&(e=ug.newId()),nS("doc","path",e),r instanceof sd){const s=cn.fromString(e,...n);return rv(s),new kn(r,null,new $e(s))}{if(!(r instanceof kn||r instanceof Oa))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(cn.fromString(e,...n));return rv(s),new kn(r.firestore,r instanceof Oa?r.converter:null,new $e(s))}}const Qv="AsyncQueue";class Wv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wg(this,"async_queue_retry"),this._c=()=>{const s=_m();s&&Re(Qv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=_m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new gr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nl(e))throw e;Re(Qv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Qr("INTERNAL UNHANDLED ERROR: ",Yv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=kg.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Je(47125,{Pc:Yv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Yv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Xv(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Yr extends sd{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Wv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function m0(r,e){const n=typeof r=="object"?r:hT(),s=typeof r=="string"?r:Ih,o=eg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=Kw("firestore");c&&pN(o,...c)}return o}function Yc(r){if(r._terminated)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yN(r),r._firestoreClient}function yN(r){const e=r._freezeSettings(),n=(function(o,c,f,m){return new qI(o,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,d0(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new uN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class Ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ss(ki.fromBase64String(e))}catch(n){throw new Se(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ss(ki.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ss._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,Ss._jsonSchema))return Ss.fromBase64String(e.bytes)}}Ss._jsonSchemaVersion="firestore/bytes/1.0",Ss._jsonSchema={type:ti("string",Ss._jsonSchemaVersion),bytes:ti("string")};class Xc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wo{constructor(e){this._methodName=e}}class yr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:ti("string",yr._jsonSchemaVersion),latitude:ti("number"),longitude:ti("number")};class _r{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _r(e.vectorValues);throw new Se(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:ti("string",_r._jsonSchemaVersion),vectorValues:ti("object")};const _N=/^__.*__$/;class bN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Fa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class g0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Fa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function p0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je(40011,{Ac:r})}}class rd{constructor(e,n,s,o,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(p0(this.Ac)&&_N.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||td(e)}Cc(e,n,s,o=!1){return new rd({Ac:e,methodName:n,Dc:s,path:Ci.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ad(r){const e=r._freezeSettings(),n=td(r._databaseId);return new vN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function y0(r,e,n,s,o,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,e,n,o);Hg("Data must be an object, but it was:",f,s);const m=T0(s,f);let b,_;if(c.merge)b=new Es(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const A of c.mergeFields){const V=$m(e,A,n);if(!f.contains(V))throw new Se(ae.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);E0(S,V)||S.push(V)}b=new Es(S),_=f.fieldTransforms.filter((A=>b.covers(A.field)))}else b=null,_=f.fieldTransforms;return new bN(new Xi(m),b,_)}class Zc extends wo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}function _0(r,e,n){return new rd({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zg extends wo{_toFieldTransform(e){return new Xh(e.path,new Vc)}isEqual(e){return e instanceof zg}}class Bg extends wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_0(this,e,!0),s=this.vc.map((c=>Ao(c,n))),o=new Tl(s);return new Xh(e.path,o)}isEqual(e){return e instanceof Bg&&Fr(this.vc,e.vc)}}class Ug extends wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_0(this,e,!0),s=this.vc.map((c=>Ao(c,n))),o=new Sl(s);return new Xh(e.path,o)}isEqual(e){return e instanceof Ug&&Fr(this.vc,e.vc)}}class qg extends wo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new jc(e.serializer,IS(e.serializer,this.Fc));return new Xh(e.path,n)}isEqual(e){return e instanceof qg&&this.Fc===e.Fc}}function b0(r,e,n,s){const o=r.Cc(1,e,n);Hg("Data must be an object, but it was:",o,s);const c=[],f=Xi.empty();Ha(s,((b,_)=>{const S=Fg(e,b,n);_=oi(_);const A=o.yc(S);if(_ instanceof Zc)c.push(S);else{const V=Ao(_,A);V!=null&&(c.push(S),f.set(S,V))}}));const m=new Es(c);return new g0(f,m,o.fieldTransforms)}function v0(r,e,n,s,o,c){const f=r.Cc(1,e,n),m=[$m(e,s,n)],b=[o];if(c.length%2!=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<c.length;V+=2)m.push($m(e,c[V])),b.push(c[V+1]);const _=[],S=Xi.empty();for(let V=m.length-1;V>=0;--V)if(!E0(_,m[V])){const O=m[V];let pe=b[V];pe=oi(pe);const de=f.yc(O);if(pe instanceof Zc)_.push(O);else{const he=Ao(pe,de);he!=null&&(_.push(O),S.set(O,he))}}const A=new Es(_);return new g0(S,A,f.fieldTransforms)}function TN(r,e,n,s=!1){return Ao(n,r.Cc(s?4:3,e))}function Ao(r,e){if(S0(r=oi(r)))return Hg("Unsupported field value:",e,r),T0(r,e);if(r instanceof wo)return(function(s,o){if(!p0(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let f=0;for(const m of s){let b=Ao(m,o.wc(f));b==null&&(b={nullValue:"NULL_VALUE"}),c.push(b),f++}return{arrayValue:{values:c}}})(r,e)}return(function(s,o){if((s=oi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Tn.fromDate(s);return{timestampValue:Dh(o.serializer,c)}}if(s instanceof Tn){const c=new Tn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(o.serializer,c)}}if(s instanceof yr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ss)return{bytesValue:zS(o.serializer,s._byteString)};if(s instanceof kn){const c=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:bg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof _r)return(function(f,m){return{mapValue:{fields:{[hS]:{stringValue:dS},[Ch]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return pg(m.serializer,_)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Fh(s)}`)})(r,e)}function T0(r,e){const n={};return rS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ha(r,((s,o)=>{const c=Ao(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function S0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Tn||r instanceof yr||r instanceof Ss||r instanceof kn||r instanceof wo||r instanceof _r)}function Hg(r,e,n){if(!S0(n)||!iS(n)){const s=Fh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function $m(r,e,n){if((e=oi(e))instanceof Xc)return e._internalPath;if(typeof e=="string")return Fg(r,e);throw jh("Field path arguments must be of type string or ",r,!1,void 0,n)}const SN=new RegExp("[~\\*/\\[\\]]");function Fg(r,e,n){if(e.search(SN)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Xc(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function jh(r,e,n,s,o){const c=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let b="";return(c||f)&&(b+=" (found",c&&(b+=` in field ${s}`),f&&(b+=` in document ${o}`),b+=")"),new Se(ae.INVALID_ARGUMENT,m+r+b)}function E0(r,e){return r.some((n=>n.isEqual(e)))}class Ph{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EN extends Ph{data(){return super.data()}}function Gg(r,e){return typeof e=="string"?Fg(r,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}function w0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Se(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class wN extends Kg{}function Qm(r,e,...n){let s=[];e instanceof Kg&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((b=>b instanceof $g)).length,m=c.filter((b=>b instanceof od)).length;if(f>1||f>0&&m>0)throw new Se(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class od extends wN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new od(e,n,s)}_apply(e){const n=this._parse(e);return A0(e._query,n),new Eo(e.firestore,e.converter,Vm(e._query,n))}_parse(e){const n=ad(e.firestore);return(function(c,f,m,b,_,S,A){let V;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){Jv(A,S);const pe=[];for(const de of A)pe.push(Zv(b,c,de));V={arrayValue:{values:pe}}}else V=Zv(b,c,A)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||Jv(A,S),V=TN(m,f,A,S==="in"||S==="not-in");return ei.create(_,S,V)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wm(r,e,n){const s=e,o=Gg("where",r);return od._create(o,s,n)}class $g extends Kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $g(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Zs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let f=o;const m=c.getFlattenedFilters();for(const b of m)A0(f,b),f=Vm(f,b)})(e._query,n),new Eo(e.firestore,e.converter,Vm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Zv(r,e,n){if(typeof(n=oi(n))=="string"){if(n==="")throw new Se(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vS(e)&&n.indexOf("/")!==-1)throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(cn.fromString(n));if(!$e.isDocumentKey(s))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return mv(r,new $e(s))}if(n instanceof kn)return mv(r,n._key);throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(n)}.`)}function Jv(r,e){if(!Array.isArray(r)||r.length===0)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A0(r,e){const n=(function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Se(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class R0{convertValue(e,n="none"){switch(Ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ha(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[Ch].arrayValue?.values?.map((s=>Bn(s.doubleValue)));return new _r(n)}convertGeoPoint(e){return new yr(Bn(e.latitude),Bn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const n=Pa(e);return new Tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=cn.fromString(e);zt(KS(s),9688,{name:e});const o=new Oc(s.get(1),s.get(3)),c=new $e(s.popFirst(5));return o.isEqual(n)||Qr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function I0(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class AN extends R0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,n)}}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class La extends Ph{constructor(e,n,s,o,c,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Gg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=La._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}La._jsonSchemaVersion="firestore/documentSnapshot/1.0",La._jsonSchema={type:ti("string",La._jsonSchemaVersion),bundleSource:ti("string","DocumentSnapshot"),bundleName:ti("string"),bundle:ti("string")};class yh extends La{data(e={}){return super.data(e)}}class po{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new hl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new yh(this._firestore,this._userDataWriter,s.key,s,new hl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const b=new yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:b,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const b=new yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,S=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),S=f.indexOf(m.doc.key)),{type:RN(m.type),doc:b,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ug.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je(61501,{type:r})}}function fi(r){r=cs(r,kn);const e=cs(r.firestore,Yr);return mN(Yc(e),r._key).then((n=>N0(e,r,n)))}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:ti("string",po._jsonSchemaVersion),bundleSource:ti("string","QuerySnapshot"),bundleName:ti("string"),bundle:ti("string")};class ld extends R0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,n)}}function Ym(r){r=cs(r,Eo);const e=cs(r.firestore,Yr),n=Yc(e),s=new ld(e);return w0(r._query),gN(n,r._query).then((o=>new po(e,s,r,o)))}function C0(r,e,n){r=cs(r,kn);const s=cs(r.firestore,Yr),o=I0(r.converter,e,n);return Qg(s,[y0(ad(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Ui.none())])}function ct(r,e,n,...s){r=cs(r,kn);const o=cs(r.firestore,Yr),c=ad(o);let f;return f=typeof(e=oi(e))=="string"||e instanceof Xc?v0(c,"updateDoc",r._key,e,n,s):b0(c,"updateDoc",r._key,e),Qg(o,[f.toMutation(r._key,Ui.exists(!0))])}function kc(r){return Qg(cs(r.firestore,Yr),[new Jh(r._key,Ui.none())])}function k0(r,...e){r=oi(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xv(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Xv(e[s])){const b=e[s];e[s]=b.next?.bind(b),e[s+1]=b.error?.bind(b),e[s+2]=b.complete?.bind(b)}let c,f,m;if(r instanceof kn)f=cs(r.firestore,Yr),m=$h(r._key.path),c={next:b=>{e[s]&&e[s](N0(f,r,b))},error:e[s+1],complete:e[s+2]};else{const b=cs(r,Eo);f=cs(b.firestore,Yr),m=b._query;const _=new ld(f);c={next:S=>{e[s]&&e[s](new po(f,_,b,S))},error:e[s+1],complete:e[s+2]},w0(r._query)}return(function(_,S,A,V){const O=new jg(V),pe=new Og(S,O,A);return _.asyncQueue.enqueueAndForget((async()=>Dg(await Vh(_),pe))),()=>{O.Nu(),_.asyncQueue.enqueueAndForget((async()=>Mg(await Vh(_),pe)))}})(Yc(f),m,o,c)}function Qg(r,e){return(function(s,o){const c=new gr;return s.asyncQueue.enqueueAndForget((async()=>Jk(await dN(s),o,c))),c.promise})(Yc(r),e)}function N0(r,e,n){const s=n.docs.get(e._key),o=new ld(r);return new La(r,o,e._key,s,new hl(n.hasPendingWrites,n.fromCache),e.converter)}const IN={maxAttempts:5};function Tc(r,e){if((r=oi(r)).firestore!==e)throw new Se(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class CN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ad(e)}get(e){const n=Tc(e,this._firestore),s=new AN(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Je(24041);const c=o[0];if(c.isFoundDocument())return new Ph(this._firestore,s,c.key,c,n.converter);if(c.isNoDocument())return new Ph(this._firestore,s,n._key,null,n.converter);throw Je(18433,{doc:c})}))}set(e,n,s){const o=Tc(e,this._firestore),c=I0(o.converter,n,s),f=y0(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,s);return this._transaction.set(o._key,f),this}update(e,n,s,...o){const c=Tc(e,this._firestore);let f;return f=typeof(n=oi(n))=="string"||n instanceof Xc?v0(this._dataReader,"Transaction.update",c._key,n,s,o):b0(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,f),this}delete(e){const n=Tc(e,this._firestore);return this._transaction.delete(n._key),this}}class kN extends CN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Tc(e,this._firestore),s=new ld(this._firestore);return super.get(e).then((o=>new La(this._firestore,s,n._key,o._document,new hl(!1,!1),n.converter)))}}function eT(r,e,n){r=cs(r,Yr);const s={...IN,...n};return(function(c){if(c.maxAttempts<1)throw new Se(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(c,f,m){const b=new gr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await fN(c);new cN(c.asyncQueue,_,m,f,b).ju()})),b.promise})(Yc(r),(o=>e(new kN(r,o))),s)}function Ai(){return new Zc("deleteField")}function Yi(){return new zg("serverTimestamp")}function cl(...r){return new Bg("arrayUnion",r)}function pc(...r){return new Ug("arrayRemove",r)}function vm(r){return new qg("increment",r)}(function(e,n=!0){(function(o){Cl=o})(Rl),pl(new yo("firestore",((s,{instanceIdentifier:o,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Yr(new EI(s.getProvider("auth-internal")),new RI(f,s.getProvider("app-check-internal")),(function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Se(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(_.options.projectId,S)})(f,o),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Da(tv,nv,e),Da(tv,nv,"esm2020")})();const Ri={astronomie_geographie:{name:"Astronomie & Geographie",emoji:"",questions:[{id:"ag_1",q:"Lieber am Tag oder in der Nacht aktiv sein?",a:"Tag ",b:"Nacht "},{id:"ag_2",q:"Lieber im Regenwald oder in der Wste stranden?",a:"Regenwald ",b:"Wste "},{id:"ag_3",q:"Lieber den Ozean oder riesige Gebirge bestaunen?",a:"Ozean ",b:"Gebirge "},{id:"ag_4",q:"Lieber ewiges Eis oder ewige Hitze ertragen?",a:"Eis ",b:"Hitze "},{id:"ag_5",q:"Lieber eine Stdtereise oder einen Natururlaub machen?",a:"Stadt ",b:"Natur "},{id:"ag_6",q:"Lieber auf einer Insel oder auf dem Festland leben?",a:"Insel ",b:"Festland "},{id:"ag_7",q:"Lieber ein Gewitter oder Sonnenschein beobachten?",a:"Gewitter ",b:"Sonne "},{id:"ag_8",q:"Lieber Schnee zu Weihnachten oder 30 Grad am Strand?",a:"Schnee ",b:"30 Grad "},{id:"ag_9",q:"Lieber zum Mond fliegen oder die Tiefsee erforschen?",a:"Mond ",b:"Tiefsee "},{id:"ag_10",q:"Lieber im Flachland oder in den Bergen wohnen?",a:"Flachland ",b:"Berge "},{id:"ag_11",q:"Lieber im Fluss oder im See schwimmen?",a:"Fluss ",b:"See "},{id:"ag_12",q:"Lieber durch den Dschungel oder durch den Nadelwald spazieren?",a:"Dschungel ",b:"Nadelwald "},{id:"ag_13",q:"Lieber einen Vulkan oder einen Geysir sehen?",a:"Vulkan ",b:"Geysir "},{id:"ag_14",q:"Lieber Polarlichter oder eine Sonnenfinsternis sehen?",a:"Polarlicht ",b:"Sonnenfinsternis "},{id:"ag_15",q:"Lieber den Mars besiedeln oder die Erde retten?",a:"Mars ",b:"Erde "},{id:"ag_16",q:"Lieber Urlaub im Camper oder auf dem Kreuzfahrtschiff machen?",a:"Camper ",b:"Schiff "},{id:"ag_17",q:"Lieber dnne Hhenluft oder salzige Meeresbrise atmen?",a:"Berge ",b:"Meer "},{id:"ag_18",q:"Lieber fliegen knnen oder die Zeit anhalten?",a:"Fliegen ",b:"Zeitstopp "}]},essen_trinken:{name:"Essen & Trinken",emoji:"",questions:[{id:"et_1",q:"Lieber Nutella mit oder ohne Butter essen?",a:"Mit Butter ",b:"Ohne Butter "},{id:"et_2",q:"Lieber Kaffee oder Tee am Morgen trinken?",a:"Kaffee ",b:"Tee "},{id:"et_3",q:"Lieber nie wieder Pizza oder nie wieder Pasta essen?",a:"Keine Pizza ",b:"Keine Pasta "},{id:"et_4",q:"Lieber Schokolade oder Gummibrchen naschen?",a:"Schokolade ",b:"Gummibrchen "},{id:"et_5",q:"Lieber einen Burger oder einen Dner essen?",a:"Burger ",b:"Dner "},{id:"et_6",q:"Lieber selbst kochen oder Essen bestellen?",a:"Kochen ",b:"Bestellen "},{id:"et_7",q:"Lieber Vanille- oder Schokoeis essen?",a:"Vanille ",b:"Schoko "},{id:"et_8",q:"Lieber ses oder salziges Popcorn essen?",a:"S ",b:"Salzig "},{id:"et_9",q:"Lieber Wein oder Bier am Abend trinken?",a:"Wein ",b:"Bier "},{id:"et_10",q:"Lieber Ksebrot oder Wurstbrot essen?",a:"Kse ",b:"Wurst "},{id:"et_11",q:"Lieber frhstcken oder zu Abend essen?",a:"Frhstck ",b:"Abendessen "},{id:"et_12",q:"Lieber Cola oder Saft trinken?",a:"Cola ",b:"Saft "},{id:"et_13",q:"Lieber Sahnetorte oder trockenen Kuchen essen?",a:"Torte ",b:"Kuchen "},{id:"et_14",q:"Lieber Pommes mit Ketchup oder Mayo essen?",a:"Ketchup ",b:"Mayo "},{id:"et_15",q:"Lieber eine Vorspeise oder ein Dessert bestellen?",a:"Vorspeise ",b:"Dessert "},{id:"et_16",q:"Lieber stilles Wasser oder Wasser mit Sprudel trinken?",a:"Still ",b:"Sprudel "},{id:"et_17",q:"Lieber Kartoffeln oder Reis als Beilage?",a:"Kartoffeln ",b:"Reis "},{id:"et_18",q:"Lieber s oder herzhaft frhstcken?",a:"S ",b:"Herzhaft "},{id:"et_19",q:"Lieber scharf oder mild essen?",a:"Scharf ",b:"Mild "},{id:"et_20",q:"Lieber Pizza Hawaii oder Pizza Salami essen?",a:"Hawaii ",b:"Salami "}]},flora_fauna:{name:"Flora & Fauna",emoji:"",questions:[{id:"ff_1",q:"Lieber einen Hund oder eine Katze haben?",a:"Hund ",b:"Katze "},{id:"ff_2",q:"Lieber Topfpflanzen oder Schnittblumen kaufen?",a:"Topf ",b:"Strau "},{id:"ff_3",q:"Lieber Vgel oder Fische beobachten?",a:"Vgel ",b:"Fische "},{id:"ff_4",q:"Lieber Kakteen oder Orchideen pflegen?",a:"Kaktus ",b:"Orchidee "},{id:"ff_5",q:"Lieber ein Pferd oder einen Delfin besitzen?",a:"Pferd ",b:"Delfin "},{id:"ff_6",q:"Lieber im Garten oder im Wald sein?",a:"Garten ",b:"Wald "},{id:"ff_7",q:"Lieber die Spinne fangen oder wegrennen?",a:"Fangen ",b:"Wegrennen "},{id:"ff_8",q:"Lieber einen Dino oder einen Drachen zhmen?",a:"Dino ",b:"Drache "},{id:"ff_9",q:"Lieber Nadelbume oder Laubbume im Garten?",a:"Nadel ",b:"Laub "},{id:"ff_10",q:"Lieber Sugetiere oder Reptilien?",a:"Suger ",b:"Reptil "},{id:"ff_11",q:"Lieber Obst oder Gemse anbauen?",a:"Obst ",b:"Gemse "},{id:"ff_12",q:"Lieber mit Haien schwimmen oder Lwen begegnen?",a:"Hai ",b:"Lwe "},{id:"ff_13",q:"Lieber Wespen oder Mcken ertragen?",a:"Wespe ",b:"Mcke "},{id:"ff_14",q:"Lieber Elefanten oder Wale sehen?",a:"Elefant ",b:"Wal "},{id:"ff_15",q:"Lieber duftende oder bunte Blumen?",a:"Duft ",b:"Farbe "},{id:"ff_16",q:"Lieber einem Wolf oder einem Bren begegnen?",a:"Wolf ",b:"Br "},{id:"ff_17",q:"Lieber in den Zoo oder in einen Wildpark gehen?",a:"Zoo ",b:"Wildpark "},{id:"ff_18",q:"Lieber Insekten essen oder hungern mssen?",a:"Insekten ",b:"Hungern "}]},forschung_wissenschaft:{name:"Forschung & Wissenschaft",emoji:"",questions:[{id:"fw_1",q:"Lieber Biologie- oder Physikunterricht?",a:"Bio ",b:"Physik "},{id:"fw_2",q:"Lieber im Labor oder drauen im Feld arbeiten?",a:"Labor ",b:"Drauen "},{id:"fw_3",q:"Lieber die Weltformel finden oder unsterblich sein?",a:"Formel ",b:"Unsterblich "},{id:"fw_4",q:"Lieber durch ein Mikroskop oder ein Teleskop schauen?",a:"Mikroskop ",b:"Teleskop "},{id:"fw_5",q:"Lieber Chemie oder Mathe verstehen?",a:"Chemie ",b:"Mathe "},{id:"fw_6",q:"Lieber in die Zukunft oder Vergangenheit reisen?",a:"Zukunft ",b:"Vergangenheit "},{id:"fw_7",q:"Lieber Aliens oder eine Super-KI entdecken?",a:"Aliens ",b:"KI "},{id:"fw_8",q:"Lieber wissen WANN oder WIE du stirbst?",a:"Wann ",b:"Wie "},{id:"fw_9",q:"Lieber die Tiefsee oder das Weltall erforschen?",a:"Tiefsee ",b:"Weltall "},{id:"fw_10",q:"Lieber Elon Musk oder Albert Einstein treffen?",a:"Musk ",b:"Einstein "},{id:"fw_11",q:"Lieber Genetik oder Informatik studieren?",a:"Genetik ",b:"Informatik "},{id:"fw_12",q:"Lieber auf Fakten oder auf Intuition vertrauen?",a:"Fakten ",b:"Bauchgefhl "},{id:"fw_13",q:"Lieber einen Roboter oder einen Klon haben?",a:"Roboter ",b:"Klon "},{id:"fw_14",q:"Lieber ein Entdecker oder ein Erfinder sein?",a:"Entdecker ",b:"Erfinder "},{id:"fw_15",q:"Lieber den Nobelpreis oder ein Patent erhalten?",a:"Nobelpreis ",b:"Patent "}]},geschichte_politik:{name:"Geschichte & Politik",emoji:"",questions:[{id:"gp_1",q:"Lieber in der Antike oder Zukunft leben?",a:"Antike ",b:"Zukunft "},{id:"gp_2",q:"Lieber Knig oder gewhlter Prsident sein?",a:"Knig ",b:"Prsident "},{id:"gp_3",q:"Lieber ein Ritter oder ein Pirat sein?",a:"Ritter ",b:"Pirat "},{id:"gp_4",q:"Lieber Revolutionr oder Stratege sein?",a:"Revolutionr ",b:"Stratege "},{id:"gp_5",q:"Lieber im Mittelalter oder in einem Sci-Fi Szenario leben?",a:"Mittelalter ",b:"Sci-Fi "},{id:"gp_6",q:"Lieber in einer Demokratie oder Monarchie leben?",a:"Demokratie ",b:"Monarchie "},{id:"gp_7",q:"Lieber reformieren oder eine Revolution starten?",a:"Reform ",b:"Revolution "},{id:"gp_8",q:"Lieber in einem Imperium oder Stadtstaat leben?",a:"Imperium ",b:"Stadtstaat "},{id:"gp_9",q:"Lieber echte Dinos oder den Pyramidenbau sehen?",a:"Dinos ",b:"Pyramiden "},{id:"gp_10",q:"Lieber Wirtschaft oder Umwelt priorisieren?",a:"Wirtschaft ",b:"Umwelt "},{id:"gp_11",q:"Lieber global oder national denken?",a:"Global ",b:"National "},{id:"gp_12",q:"Lieber Tradition oder Fortschritt bewahren?",a:"Tradition ",b:"Fortschritt "},{id:"gp_13",q:"Lieber Napoleon oder Caesar interviewen?",a:"Napoleon ",b:"Caesar "},{id:"gp_14",q:"Lieber auf Innenpolitik oder Auenpolitik konzentrieren?",a:"Innen ",b:"Auen "},{id:"gp_15",q:"Lieber Wahlpflicht oder Wahlrecht haben?",a:"Pflicht ",b:"Recht "},{id:"gp_16",q:"Lieber 100 Jahre in die Vergangenheit oder Zukunft reisen?",a:"Vergangenheit ",b:"Zukunft "}]},medien_unterhaltung:{name:"Medien & Unterhaltung",emoji:"",questions:[{id:"mu_1",q:"Lieber einen Film oder eine Serie schauen?",a:"Film ",b:"Serie "},{id:"mu_2",q:"Lieber Netflix oder YouTube nutzen?",a:"Netflix ",b:"YouTube "},{id:"mu_3",q:"Lieber ins Kino gehen oder auf der Couch bleiben?",a:"Kino ",b:"Couch "},{id:"mu_4",q:"Lieber Marvel oder DC schauen?",a:"Marvel ",b:"DC "},{id:"mu_5",q:"Lieber Comedy oder Horror schauen?",a:"Comedy ",b:"Horror "},{id:"mu_6",q:"Lieber Star Wars oder Star Trek Fan sein?",a:"Star Wars ",b:"Star Trek "},{id:"mu_7",q:"Lieber eine Doku oder einen Actionfilm sehen?",a:"Doku ",b:"Action "},{id:"mu_8",q:"Lieber im Originalton oder mit Synchro schauen?",a:"Original ",b:"Synchro "},{id:"mu_9",q:"Lieber Harry Potter oder Herr der Ringe schauen?",a:"Potter ",b:"HdR "},{id:"mu_10",q:"Lieber Spotify oder Radio hren?",a:"Spotify ",b:"Radio "},{id:"mu_11",q:"Lieber das Buch lesen oder den Film schauen?",a:"Buch ",b:"Film "},{id:"mu_12",q:"Lieber der Bsewicht oder der Held sein?",a:"Bsewicht ",b:"Held "},{id:"mu_13",q:"Lieber Game of Thrones Anfang oder Ende?",a:"Anfang ",b:"Ende "},{id:"mu_14",q:"Lieber Spoiler wissen oder berrascht werden?",a:"Spoiler ",b:"berraschung "},{id:"mu_15",q:"Lieber Trash-TV oder Arte schauen?",a:"Trash ",b:"Arte "},{id:"mu_16",q:"Lieber E-Books oder Papierbcher lesen?",a:"E-Book ",b:"Papier "}]},musik:{name:"Musik",emoji:"",questions:[{id:"mk_1",q:"Lieber Rock oder Hip-Hop hren?",a:"Rock ",b:"Hip-Hop "},{id:"mk_2",q:"Lieber zu Techno oder Schlager feiern?",a:"Techno ",b:"Schlager "},{id:"mk_3",q:"Lieber Musik mit Gesang oder Instrumental hren?",a:"Gesang ",b:"Instrumental "},{id:"mk_4",q:"Lieber auf ein Festival oder ein Konzert gehen?",a:"Festival ",b:"Konzert "},{id:"mk_5",q:"Lieber Snger oder Gitarrist sein?",a:"Snger ",b:"Gitarrist "},{id:"mk_6",q:"Lieber 80er oder 2000er Musik hren?",a:"80er ",b:"2000er "},{id:"mk_7",q:"Lieber Gitarre oder Klavier spielen knnen?",a:"Gitarre ",b:"Klavier "},{id:"mk_8",q:"Lieber Boybands oder Solo-Knstler hren?",a:"Boyband ",b:"Solo "},{id:"mk_9",q:"Lieber In-Ear oder Over-Ear Kopfhrer tragen?",a:"In-Ear ",b:"Over-Ear "},{id:"mk_10",q:"Lieber Vinyl oder Streaming nutzen?",a:"Vinyl ",b:"Streaming "},{id:"mk_11",q:"Lieber traurige oder frhliche Musik hren?",a:"Traurig ",b:"Frhlich "},{id:"mk_12",q:"Lieber Jazz oder Metal hren?",a:"Jazz ",b:"Metal "},{id:"mk_13",q:"Lieber im Club tanzen oder trinken?",a:"Tanzen ",b:"Trinken "},{id:"mk_14",q:"Lieber nur noch eine Band hren oder gar keine Musik mehr?",a:"Eine Band ",b:"Keine Musik "},{id:"mk_15",q:"Lieber Musik selber machen oder nur hren?",a:"Machen ",b:"Hren "}]},sport:{name:"Sport",emoji:"",questions:[{id:"sp_1",q:"Lieber Teamsport oder Einzelsport machen?",a:"Team ",b:"Einzel "},{id:"sp_2",q:"Lieber Sport gucken oder selbst machen?",a:"Gucken ",b:"Machen "},{id:"sp_3",q:"Lieber morgens oder abends trainieren?",a:"Morgens ",b:"Abends "},{id:"sp_4",q:"Lieber Cardio oder Krafttraining machen?",a:"Cardio ",b:"Kraft "},{id:"sp_5",q:"Lieber Fuball oder Formel 1 schauen?",a:"Fuball ",b:"Formel 1 "},{id:"sp_6",q:"Lieber Yoga oder Boxen machen?",a:"Yoga ",b:"Boxen "},{id:"sp_7",q:"Lieber Olympia oder die WM gewinnen?",a:"Olympia ",b:"WM "},{id:"sp_8",q:"Lieber siegen oder Spa haben?",a:"Siegen ",b:"Spa "},{id:"sp_9",q:"Lieber Schwimmen oder Joggen gehen?",a:"Schwimmen ",b:"Joggen "},{id:"sp_10",q:"Lieber Tennis oder Tischtennis spielen?",a:"Tennis ",b:"Tischtennis "},{id:"sp_11",q:"Lieber Fahrrad oder E-Bike fahren?",a:"Rad ",b:"E-Bike "},{id:"sp_12",q:"Lieber im Gym oder im Wald trainieren?",a:"Gym ",b:"Wald "},{id:"sp_13",q:"Lieber Fallschirm springen oder wandern gehen?",a:"Fallschirm ",b:"Wandern "},{id:"sp_14",q:"Lieber Ski oder Snowboard fahren?",a:"Ski ",b:"Snowboard "},{id:"sp_15",q:"Lieber Muskelkater haben oder faul sein?",a:"Muskelkater ",b:"Faul sein "}]},technik_wirtschaft:{name:"Technik & Wirtschaft",emoji:"",questions:[{id:"tw_1",q:"Lieber Apple oder Android nutzen?",a:"Apple ",b:"Android "},{id:"tw_2",q:"Lieber Windows oder Mac nutzen?",a:"Windows ",b:"Mac "},{id:"tw_3",q:"Lieber bar oder mit Karte zahlen?",a:"Bar ",b:"Karte "},{id:"tw_4",q:"Lieber Chef oder Angestellter sein?",a:"Chef ",b:"Angestellter "},{id:"tw_5",q:"Lieber im Homeoffice oder im Bro arbeiten?",a:"Homeoffice ",b:"Bro "},{id:"tw_6",q:"Lieber Sprachnachricht oder Text senden?",a:"Audio ",b:"Text "},{id:"tw_7",q:"Lieber Online oder im Laden einkaufen?",a:"Online ",b:"Laden "},{id:"tw_8",q:"Lieber in Aktien oder ins Sparbuch investieren?",a:"Aktien ",b:"Sparbuch "},{id:"tw_9",q:"Lieber auf Krypto oder Gold setzen?",a:"Krypto ",b:"Gold "},{id:"tw_10",q:"Lieber fliegen oder beamen knnen?",a:"Fliegen ",b:"Beamen "},{id:"tw_11",q:"Lieber Instagram oder TikTok nutzen?",a:"Insta ",b:"TikTok "},{id:"tw_12",q:"Lieber Elektro oder Verbrenner fahren?",a:"Elektro ",b:"Verbrenner "},{id:"tw_13",q:"Lieber per Sprache oder mit Knpfen steuern?",a:"Sprache ",b:"Knpfe "},{id:"tw_14",q:"Lieber Karriere machen oder viel Freizeit haben?",a:"Karriere ",b:"Freizeit "},{id:"tw_15",q:"Lieber reich oder berhmt sein?",a:"Reich ",b:"Berhmt "},{id:"tw_16",q:"Lieber leeres Postfach oder Chaos haben?",a:"Zero ",b:"Chaos "}]},gaming:{name:"Gaming",emoji:"",questions:[{id:"gm_1",q:"Lieber hohen Ping (Lag) oder Ruckeln (FPS) haben?",a:"Lag ",b:"Ruckeln "},{id:"gm_2",q:"Lieber Spielstand verlieren oder gebannt werden?",a:"Spielstand weg ",b:"Bann "},{id:"gm_3",q:"Lieber ein glcklicher Noob oder ein gestresster Pro sein?",a:"Noob ",b:"Pro "},{id:"gm_4",q:"Lieber Open World oder lineare Story spielen?",a:"Open World ",b:"Story "},{id:"gm_5",q:"Lieber am PC oder an der Konsole zocken?",a:"PC ",b:"Konsole "},{id:"gm_6",q:"Lieber mit Controller oder Maus spielen?",a:"Controller ",b:"Maus "},{id:"gm_7",q:"Lieber Survival oder Creative Modus spielen?",a:"Survival ",b:"Creative "},{id:"gm_8",q:"Lieber gute Grafik oder gute Story haben?",a:"Grafik ",b:"Story "},{id:"gm_9",q:"Lieber toxisch gewinnen oder nett verlieren?",a:"Gewinnen ",b:"Verlieren "},{id:"gm_10",q:"Lieber Singleplayer oder Multiplayer spielen?",a:"Single ",b:"Multi "},{id:"gm_11",q:"Lieber kostenlos (mit Werbung) oder Vollpreis spielen?",a:"Kostenlos ",b:"Vollpreis "},{id:"gm_12",q:"Lieber campen oder rushen?",a:"Campen ",b:"Rushen "},{id:"gm_13",q:"Lieber 100x versuchen oder beim ersten Mal schaffen?",a:"Tryhard ",b:"First Try "},{id:"gm_14",q:"Lieber Healer oder Damage Dealer spielen?",a:"Healer ",b:"Damage "},{id:"gm_15",q:"Lieber Retro-Games oder moderne Spiele zocken?",a:"Retro ",b:"Modern "}]},diverses:{name:"Diverses / Persnlichkeit",emoji:"",questions:[{id:"div_1",q:"Lieber unsichtbar sein oder fliegen knnen?",a:"Unsichtbar ",b:"Fliegen "},{id:"div_2",q:"Lieber immer die Wahrheit sagen oder immer lgen mssen?",a:"Wahrheit ",b:"Lge "},{id:"div_3",q:"Lieber frh aufstehen oder lange wach bleiben?",a:"Frh ",b:"Spt "},{id:"div_4",q:"Lieber nie wieder Musik hren oder nie wieder Filme sehen?",a:"Keine Musik ",b:"Keine Filme "},{id:"div_5",q:"Lieber mehr Zeit oder mehr Geld haben?",a:"Zeit ",b:"Geld "},{id:"div_6",q:"Lieber mit Socken oder barfu schlafen?",a:"An ",b:"Aus "},{id:"div_7",q:"Lieber in die Vergangenheit oder Zukunft reisen?",a:"Vergangenheit ",b:"Zukunft "},{id:"div_8",q:"Lieber chaotisch oder ordentlich sein?",a:"Chaos ",b:"Ordnung "},{id:"div_9",q:"Lieber Gedanken lesen oder mit Tieren sprechen knnen?",a:"Gedanken ",b:"Tiere "},{id:"div_10",q:"Lieber Tattoos oder Piercings haben?",a:"Tattoo ",b:"Piercing "},{id:"div_11",q:"Lieber weich oder hart liegen?",a:"Weich ",b:"Hart "},{id:"div_12",q:"Lieber auf das Handy oder das Auto verzichten?",a:"Kein Handy ",b:"Kein Auto "},{id:"div_13",q:"Lieber morgens oder abends duschen?",a:"Morgens ",b:"Abends "},{id:"div_14",q:"Lieber im Lotto gewinnen oder den Traumjob finden?",a:"Lotto ",b:"Traumjob "},{id:"div_15",q:"Lieber offene Hose oder Zahnlcke haben?",a:"Hose offen ",b:"Zahnlcke "},{id:"div_16",q:"Lieber an Geister oder an Aliens glauben?",a:"Geister ",b:"Aliens "}]},brettspiel:{name:"Brettspiel",emoji:"",questions:[{id:"bs_1",q:"Wenn ich ein Parfm kreieren msste, wonach wrde es am ehesten riechen?",a:"Frisch gemhter Rasen & Benzin",b:"Warme Pizza & Knoblauch",c:"Verbranntes Toast & Verzweiflung",d:"Neues Auto & alter Dachboden"},{id:"bs_2",q:"Was wre am ehesten meine erste Amtshandlung, wenn ich fr einen Tag Gott wre?",a:"Mcken ausrotten (ersatzlos!)",b:"Festlegen, dass Pizza gesund ist und Brokkoli dick macht",c:"Jedem Menschen ein Einhorn schenken",d:"Montags das Aufstehen verbieten"},{id:"bs_3",q:"Wie wrde ich am ehesten versuchen, ein Alien von der Menschheit zu berzeugen?",a:"Ich zeige ihnen se Katzenvideos",b:"Ich lade sie auf einen Dner ein",c:"Ich zeige ihnen Memes ber das Ende der Welt",d:"Wir sind verloren  ich helfe ihnen beim Zerstren"},{id:"bs_4",q:"Was ist am ehesten mein unntigstes Talent?",a:"Mit der Zunge die Nasenspitze berhren",b:"Extrem laut mit den Fingern schnippen",c:"Die Namen aller Pokmon auswendig wissen",d:"So tun, als wrde ich eine unsichtbare Treppe runtergehen"},{id:"bs_5",q:"In welcher Reality-Show wrde ich am ehesten landen?",a:"Shopping Queen (wegen meines fragwrdigen Stils)",b:"Das Sommerhaus der Stars (Drama ist mein Vorname)",c:"Bares fr Rares (um meinen alten Schrott zu verkaufen)",d:"Naked Survival (und ich wrde nach 5 Minuten weinen)"},{id:"bs_6",q:"Wie wrde mein eigener Freizeitpark am ehesten heien?",a:"Nickerchen-Land (berall stehen Sofas)",b:"Chaos-Canyon (nichts funktioniert, aber es macht Spa)",c:"Frittier-Paradies (alles ist aus Teig)",d:"Prokrastinations-World (Erffnung ist auf morgen verschoben)"},{id:"bs_7",q:"Was ist am ehesten der Song, bei dem ich sofort die Party verlasse?",a:"Atemlos durch die Nacht (Helene Fischer)",b:"Last Christmas (im Oktober)",c:"Baby Shark in Dauerschleife",d:"Den Ententanz"},{id:"bs_8",q:"Welches Objekt wrde ich am ehesten bei einer Zombie-Apokalypse als Waffe whlen?",a:"Eine elektrische Zahnbrste",b:"Eine gefrorene Salami",c:"Den Selfie-Stick (fr den letzten Post)",d:"Eine Pfanne (der Klassiker)"},{id:"bs_9",q:"Was ist am ehesten die merkwrdigste Sache, die ich je gegessen habe?",a:"Eine Mutprobe aus dem Garten (Regenwurm & Co.)",b:"Etwas, das 3 Monate ber dem MHD war",c:"Eine Kombination wie Nutella mit Salami",d:"Kreide in der Grundschule"},{id:"bs_10",q:"Wie wrde ich am ehesten eine Bank ausrauben?",a:"Mit einer Wasserpistole und einer Socke ber dem Kopf",b:"Ich wrde hflich nach dem Geld fragen",c:"Mit einem extrem komplizierten Plan, der sofort scheitert",d:"Gar nicht, ich wrde mich im Fluchtauto verfahren"},{id:"bs_11",q:"Wenn ich ein Mbelstck wre, welches wre ich am ehesten?",a:"Ein wackeliger Hocker",b:"Eine gemtliche, aber leicht fleckige Couch",c:"Ein Design-Regal, das niemand anfassen darf",d:"Die Minibar (immer gut gefllt)"},{id:"bs_12",q:"Was ist am ehesten mein Move auf der Tanzflche?",a:"Der betrunkene Onkel (rhythmisches Wippen)",b:"Der DNA-Test / Staubsauger (extrem tief am Boden)",c:"Ich stehe nur am Rand und halte mein Getrnk fest",d:"Ich bin der King/die Queen  Breakdance-Einlage inklusive"},{id:"bs_13",q:"Was wre am ehesten die Schlagzeile nach meiner Verhaftung?",a:"Person versuchte, Eichhrnchen zu hypnotisieren",b:"Wegen zu lauten Singens unter der Dusche festgenommen",c:"Versuchter Diebstahl von Gratis-Proben im Drogeriemarkt",d:"Aus Versehen ins falsche Haus eingebrochen und dort eingeschlafen"},{id:"bs_14",q:"Was wrde ich am ehesten tun, wenn ich eine dritte Hand am Rcken htte?",a:"Mich endlich berall selbst kratzen knnen",b:"Profi-Jongleur werden",c:"Sie unter einem weiten Pulli verstecken und Leute erschrecken",d:"Damit beim Zocken gleichzeitig Pizza essen"},{id:"bs_15",q:"Wie viele Tage wrde ich am ehesten im Dschungelcamp berleben?",a:"Ich wrde schon beim Helikopterflug aussteigen",b:"Genau 3 Tage, bis das erste Insekt mich ansieht",c:"Ich wrde gewinnen, weil ich alles esse",d:"Ich wrde wegen Regelversten rausgeworfen"},{id:"bs_16",q:"Was ist am ehesten meine peinlichste Google-Suche der letzten Zeit?",a:"Wie koche ich Wasser?",b:"Ab wann ist man ein Erwachsener?",c:"Warum guckt mich meine Katze so wertend an?",d:"Promi XY nackt"},{id:"bs_17",q:"Wenn mein Leben eine Sitcom wre, wie wrde der Titelsong am ehesten klingen?",a:"Ein trauriges Saxophon-Solo",b:"Aggressiver Heavy Metal",c:"Eine frhliche Pfeif-Melodie (die nervt)",d:"Der Sound eines abstrzenden Computers"},{id:"bs_18",q:"Was wrde ich am ehesten tun, wenn ich unsichtbar wre?",a:"Leute im Supermarkt erschrecken",b:"In geheime Meetings der Regierung schleichen",c:"Kostenlos ins Kino gehen",d:"Den ganzen Tag nackt drauen rumlaufen"},{id:"bs_19",q:"Welche fiktive Figur wre am ehesten mein idealer bester Freund?",a:"Patrick Star (SpongeBob)",b:"Sherlock Holmes (fr die Rtsel)",c:"Yoda (fr die Lebensweisheiten)",d:"Der Grinch"},{id:"bs_20",q:"Was ist am ehesten mein Endgegner im Haushalt?",a:"Das Beziehen der Bettdecke",b:"Die Steuererklrung",c:"Das Ausrumen der Splmaschine",d:"Socken, die nach dem Waschen keine Partner mehr haben"},{id:"bs_21",q:"Wie wrde ich am ehesten heien, wenn ich ein Rapper wre?",a:"MC Mdigkeit",b:"Lil' Verpeilt",c:"Dr. Dner",d:"Money Schmutz"},{id:"bs_22",q:"Was wre am ehesten das Schlimmste, was auf meinem Grabstein stehen knnte?",a:"Er/Sie hat das WLAN-Passwort mit ins Grab genommen.",b:"Er/Sie war stets bemht.",c:"Habe ich den Herd ausgemacht?",d:"Ladebalken bei 99% stehen geblieben."},{id:"bs_23",q:"Wenn ich eine neue Sportart erfinden msste, was wre das am ehesten?",a:"Extrem-Couch-Chilling",b:"Synchron-Ghnen",c:"Wett-Einkaufswagen-Rennen",d:"Weitwurf mit nassen Socken"},{id:"bs_24",q:"Was wre am ehesten mein letztes Abendmahl?",a:"Ein Eimer voll mit Pommes",b:"Ein 20-Gnge-Men, um die Hinrichtung hinauszuzgern",c:"Eine Schssel Msli (mit Wasser, weil keine Milch da ist)",d:"Ein Glckskeks ohne Zettel"},{id:"bs_25",q:"Wie reagiere ich am ehesten, wenn ich im Fahrstuhl mit einer fremden Person stecke?",a:"Ich fange sofort an, meine ganze Lebensgeschichte zu erzhlen",b:"Ich drcke panisch alle Knpfe",c:"Ich lege mich schlafen, bis Hilfe kommt",d:"Ich tue so, als wre ich der Techniker"},{id:"bs_26",q:"Welche App auf meinem Handy ist am ehesten peinlich?",a:"Eine App zum Kalorienzhlen (die ich nie nutze)",b:"Ein Talking Tom Abklatsch",c:"Eine Dating-App fr Haustierbesitzer",d:"Ein Spiel, fr das ich schon echtes Geld ausgegeben habe"},{id:"bs_27",q:"Was wrde ich am ehesten tun, wenn ich im Lotto gewinne (aber nur 1 Euro)?",a:"Ihn stolz einrahmen",b:"Eine einzige Kaugummi-Kugel kaufen",c:"Ihn jemandem schenken und so tun, als wre ich grozgig",d:"Mich ber die Steuer beschweren"},{id:"bs_28",q:"Wenn ich eine historische Person treffen knnte, wer wre es am ehesten?",a:"Einstein (um ihn zu fragen, ob er meine Hausaufgaben macht)",b:"Cleopatra (um Schmink-Tipps zu bekommen)",c:"Napoleon (um zu sehen, wie klein er wirklich war)",d:"Der Erfinder des Rades (um ihn zu fragen: Warum nicht quadratisch?)"},{id:"bs_29",q:"Was ist am ehesten meine geheime Superkraft?",a:"Ich finde immer die langsamste Schlange an der Kasse",b:"Ich kann Dinge aufrumen, sodass sie nie wieder auftauchen",c:"Ich erkenne Schauspieler in Filmen, wei aber nie ihren Namen",d:"Ich kann 12 Stunden am Stck schlafen und trotzdem mde sein"},{id:"bs_30",q:"Was ist am ehesten mein Spirit Animal beim Feiern?",a:"Die Grille (macht viel Lrm, man sieht sie aber nicht)",b:"Der Goldfisch (vergisst nach 3 Sekunden, welches Getrnk er hat)",c:"Der Pfau (muss im Mittelpunkt stehen)",d:"Der Waschbr (sucht am Ende nur was zu essen)"},{id:"bs_31",q:"Wie wrde ich am ehesten reagieren, wenn ich im falschen Zug sitze?",a:"Panisch bei der nchsten Station rausspringen",b:"So tun, als wre das mein Plan gewesen",c:"Den Schaffner bestechen",d:"Einfach sitzen bleiben und ein neues Leben in der Zielstadt anfangen"},{id:"bs_32",q:"Was war am ehesten mein dmmster Kaufrausch?",a:"Ein Fitnessgert, das jetzt als Kleiderstnder dient",b:"50 Rollen Klopapier (nur zur Sicherheit)",c:"Ein aufblasbares Kostm",d:"Eine DVD-Box einer Serie, die ich hasse"},{id:"bs_33",q:"Was ist am ehesten mein Lieblings-Schimpfwort?",a:"Ein klassisches Mist!",b:"Etwas sehr Kreatives wie Evolutionsbremse",c:"Nur wildes Gestikulieren",d:"Ein ganzer Schwall an Flchen, die keinen Sinn ergeben"},{id:"bs_34",q:"Welches Klischee erflle ich am ehesten voll und ganz?",a:"Der typische Deutsche (Handtuch auf die Liege)",b:"Das Chaos-Genie",c:"Der Frher war alles besser-Sager",d:"Der digitale Junkie (ohne WLAN kein Leben)"},{id:"bs_35",q:"Wenn ich eine Verschwrungstheorie starten msste, welche wre das am ehesten?",a:"Tauben sind eigentlich Kameras der Regierung",b:"Socken verschwinden in der Waschmaschine in eine andere Dimension",c:"Spiegel sind Fenster in eine Parallelwelt, aber die anderen sind schchtern",d:"Avocados wurden erfunden, um Hipster zu kontrollieren"},{id:"bs_36",q:"Wie wrde ich mein eigenes Land am ehesten nennen?",a:"Prokrastinationien",b:"Absurdistan",c:"Pommes-Land",d:"[Mein Name]-City"},{id:"bs_37",q:"Welche Art von kriminellem Mastermind wre ich am ehesten?",a:"Der charmante Hochstapler",b:"Der Hacker, der im Keller Pizza isst",c:"Der Fluchtwagenfahrer, der stndig falsch abbiegt",d:"Derjenige, der aus Versehen den falschen Tresor knackt"},{id:"bs_38",q:"Wenn ich ein Emoji wre, welches wre ich am ehesten?",a:" (Der Dauerlacher)",b:" (Der Klassenclown)",c:" (Der Sarkastische)",d:" (Der, der mit dem Alltag berfordert ist)"},{id:"bs_39",q:"Was wrde ich am ehesten tun, wenn ich in der Wildnis ausgesetzt werde?",a:"Versuchen, ein Feuer mit zwei Stcken zu machen (und scheitern)",b:"Beeren essen, die mich am Ende halluzinieren lassen",c:"Versuchen, Freundschaft mit einem Bren zu schlieen",d:"Nach 10 Minuten nach dem WLAN-Passwort suchen"},{id:"bs_40",q:"Was wre am ehesten mein Beruf in einer mittelalterlichen Fantasy-Welt?",a:"Der tollpatschige Zauberlehrling",b:"Der Dorflteste, der nur Rtsel spricht",c:"Der betrunkene Barde in der Taverne",d:"Der Drachenftterer (mit sehr kurzer Lebenserwartung)"},{id:"bs_41",q:"Wie wrde ich am ehesten reagieren, wenn ich ein Haar in meinem Essen im Restaurant finde?",a:"Den Manager verlangen und eine Szene machen",b:"Es diskret entfernen und einfach weiteressen",c:"Die ganze Zeit angewidert draufstarren, aber nichts sagen",d:"So tun, als wre es mein eigenes, um niemanden zu belstigen"},{id:"bs_42",q:"Was wrde ich am ehesten tun, wenn ich erfahre, dass mein Leben eine Truman Show ist?",a:"Direkt in die Kamera winken und Werbung fr Eistee machen",b:"Versuchen, aus dem Set auszubrechen",c:"Mich ber meine schlechte Gage beschweren",d:"Einfach weitermachen wie bisher, Hauptsache die Einschaltquoten stimmen"},{id:"bs_43",q:"Was ist am ehesten mein Verhalten bei einer Zombie-Invasion?",a:"Ich bin der Erste, der gebissen wird, weil ich den Zombie streicheln wollte",b:"Ich verbarrikadiere mich im nchsten Supermarkt in der Swarenabteilung",c:"Ich grnde eine neue Zivilisation in meinem Garten",d:"Ich versuche, die Zombies mit schlechten Witzen zu vertreiben"},{id:"bs_44",q:"Welches ungewhnliche Haustier htte ich am ehesten?",a:"Ein Alpaka (weil sie so flauschig sind)",b:"Ein Faultier (als Spiegelbild meiner Seele)",c:"Einen Pinguin, der im Khlschrank wohnt",d:"Einen Waschbren, der mir beim Mllsortieren hilft"},{id:"bs_45",q:"Was wrde ich am ehesten tun, wenn ich 24 Stunden lang die Zeit anhalten knnte?",a:"In Ruhe ausschlafen (endlich!)",b:"Leuten im Supermarkt die Einkaufswagen vertauschen",c:"In die Umkleidekabine von Promis schleichen",d:"Alle Hausarbeiten erledigen, um danach nie wieder was tun zu mssen"},{id:"bs_46",q:"Wie wrde ich am ehesten reagieren, wenn ich eine peinliche Nachricht an die falsche Person schicke?",a:"Mein Handy sofort in den nchsten Fluss werfen",b:"So tun, als wre mein Account gehackt worden",c:"Sofort 50 weitere Nachrichten schicken, um die erste zu berdecken",d:"Mit Ups, falscher Chat lol locker drber weggehen"},{id:"bs_47",q:"Was wre am ehesten meine Rolle in einer Zirkus-Show?",a:"Der Dompteur, der Angst vor Katzen hat",b:"Derjenige, der aus der Kanone geschossen wird",c:"Der tollpatschige Akrobat, der vom Seil fllt",d:"Die Person, die die Popcorn-Maschine bewacht"},{id:"bs_48",q:"Was wrde ich am ehesten tun, wenn ich im Fahrstuhl mit meinem absoluten Idol feststecke?",a:"Ohnmchtig werden",b:"Die ganze Zeit ber das Wetter reden, weil mir nichts Besseres einfllt",c:"Ein extrem verwackeltes Selfie machen",d:"Ihn/Sie fragen, ob ich mal am Parfum riechen darf"},{id:"bs_49",q:"Welche Sache wrde ich am ehesten mit auf eine einsame Insel nehmen?",a:"Eine unendliche Vorratspackung Kaffee",b:"Meinen Laptop (auch ohne Internet)",c:"Eine riesige aufblasbare Badeinsel",d:"Ein Buch ber Wie man ein Boot aus Sand baut"},{id:"bs_50",q:"Was wrde ich am ehesten tun, wenn ich pltzlich fliegen knnte?",a:"Den Stau auf dem Weg zur Arbeit ignorieren",b:"Tauben jagen und sie erschrecken",c:"Fenster putzen in schwindelerregender Hhe",d:"Nach 5 Minuten feststellen, dass ich Hhenangst habe und wieder landen"},{id:"bs_51",q:"In welcher Epoche htte ich am ehesten berlebt?",a:"Steinzeit (Beeren sammeln und Hhlen bemalen)",b:"Mittelalter (als Hofnarr)",c:"In der Zukunft (als Museumsstck fr 'Primitivitt')",d:"In den 80ern (wegen der Frisuren)"},{id:"bs_52",q:"Was wre am ehesten mein Markenzeichen als Superheld?",a:"Ein Umhang aus einer alten Bettdecke",b:"Dass ich immer 15 Minuten zu spt zur Rettung komme",c:"Ein extrem unpassender Kampfschrei",d:"Dass ich meine Geheimidentitt sofort aus Versehen verrate"},{id:"bs_53",q:"Was wrde ich am ehesten in einer Zeitkapsel fr die Nachwelt hinterlassen?",a:"Einen USB-Stick mit Memes",b:"Eine halbe Packung Tiefkhlpizza",c:"Eine Anleitung, wie man ein Blatt Papier faltet",d:"Einen Zettel, auf dem 'Ich war hier und es war okay' steht"},{id:"bs_54",q:"Wie wrde ich am ehesten versuchen, ein Feuer ohne Streichhlzer zu machen?",a:"Den Stein ganz fest bse angucken",b:"Zwei Stcke reiben, bis ich Blasen an den Hnden habe",c:"Auf ein Gewitter warten",d:"Eine App dafr herunterladen"},{id:"bs_55",q:"Was wre am ehesten mein Beitrag zu einem Potluck-Buffet?",a:"Eine Tte Chips (lieblos in eine Schssel geschttet)",b:"Etwas extrem Aufwendiges, das leider verbrannt ist",c:"Nudelsalat (der Klassiker, den schon 5 andere mitbringen)",d:"Nur Servietten und gute Laune"},{id:"bs_56",q:"Welche Sache wrde ich am ehesten im Weltraum vergessen?",a:"Meinen Helm",b:"Das Ladekabel fr mein Handy",c:"Die Koordinaten der Erde",d:"Dass ich die Katze noch fttern wollte"},{id:"bs_57",q:"Was wre am ehesten mein Job in einem Zirkus?",a:"Die Person, die die Elefantenpfel aufsammelt",b:"Der Typ, der die Messer wirft (aber immer daneben)",c:"Die menschliche Kanonenkugel (aber nur fr kurze Strecken)",d:"Der Wahrsager, der nur das Wetter von gestern vorhersagt"},{id:"bs_58",q:"Wie wrde ich am ehesten reagieren, wenn ich eine Million Euro geschenkt bekomme?",a:"Sofort alles fr Quatsch ausgeben",b:"Meinen Job kndigen und dann merken, dass es nicht reicht",c:"Erstmal drei Tage lang schlafen, um drber nachzudenken",d:"Fragen, ob das auch in bar geht"},{id:"bs_59",q:"Was ist am ehesten mein Problem beim Campen?",a:"Ich bekomme das Zelt nicht aufgebaut",b:"Ich werde von einer einzigen Mcke die ganze Nacht terrorisiert",c:"Ich vermisse meine Matratze nach 10 Minuten",d:"Ich finde den Weg zum Klo im Dunkeln nicht"},{id:"bs_60",q:"Was wre am ehesten mein Name in einem Western-Film?",a:"Der mde Joe",b:"Schleim-Sattel Sam",c:"Piano-Peter (der gar nicht spielen kann)",d:"Desperado ohne Plan"},{id:"bs_61",q:"Welches Kchengert wre ich am ehesten?",a:"Ein Toaster (macht viel Lrm fr wenig Ergebnis)",b:"Ein Eierkocher (kann nur eine Sache, die aber gut)",c:"Ein Sandwichmaker, der vllig verkrustet im Schrank steht",d:"Eine Kaffeemaschine (ohne mich luft nichts)"},{id:"bs_62",q:"Was wrde ich am ehesten tun, wenn ich Knig/Knigin von England wre?",a:"Die Corgis mit Burgern fttern",b:"Die Krone bei eBay verkaufen",c:"Jeden Tag im Pyjama regieren",d:"Den Tee durch Eiskaffee ersetzen"},{id:"bs_63",q:"Was ist am ehesten mein Talent bei einer Talentshow?",a:"Gerusche mit der Achselhhle machen",b:"Ein Glas Wasser in Rekordzeit austrinken",c:"Meinen eigenen Namen rckwrts rlpsen",d:"So lange stillstehen, bis die Jury mich vergisst"},{id:"bs_64",q:"Welche Disney-Figur wre ich am ehesten im echten Leben?",a:"Goofy (wegen der Tollpatschigkeit)",b:"Schneewittchen (weil ich viel schlafe)",c:"Einer der sieben Zwerge (wahrscheinlich 'Mde')",d:"Die bse Hexe (vor meinem ersten Kaffee)"},{id:"bs_65",q:"Was wre am ehesten mein Grund fr eine Anzeige bei der Polizei?",a:"Zu langsames Gehen auf dem Brgersteig",b:"Illegales Streamen von Kinderfilmen",c:"Bestechung eines Parkautomaten mit Knpfen",d:"Das Singen falscher Songtexte in der ffentlichkeit"},{id:"bs_66",q:"Wie wrde ich am ehesten reagieren, wenn ich einen Geist sehe?",a:"Ihm versuchen, eine Versicherung zu verkaufen",b:"Sofort ein Selfie machen (#GhostVibes)",c:"Ihn fragen, ob er die Miete mitbezahlt",d:"Einfach wegrennen und nie wieder zurckblicken"},{id:"bs_67",q:"Was wre am ehesten mein 'Signature Move' beim Kochen?",a:"Den Rauchmelder als Kurzzeitwecker nutzen",b:"Alles mit so viel Kse berbacken, dass man es nicht mehr erkennt",c:"Viel zu viel Salz benutzen",d:"Bestellen und behaupten, es sei selbstgemacht"},{id:"bs_68",q:"Welches Tier wrde ich am ehesten im Garten zhmen?",a:"Einen betrunkenen Igel",b:"Eine sehr aggressive Taube",c:"Einen Regenwurm namens Hans",d:"Einen Maulwurf, der meinen Rasen ruiniert"},{id:"bs_69",q:"Was wrde ich am ehesten machen, wenn ich eine Zeitmaschine htte?",a:"Lottozahlen von letzter Woche nachschauen",b:"Meinem jngeren Ich sagen: 'Schneid dir die Haare nicht so!'",c:"Dinosaurier streicheln (und wahrscheinlich gefressen werden)",d:"Die Erfindung der Hausaufgaben verhindern"},{id:"bs_70",q:"Was ist am ehesten mein grter Fail im Fitnessstudio?",a:"Vom Laufband fallen, weil ich auf mein Handy geguckt habe",b:"Nicht wissen, wie die Gerte funktionieren und einfach irgendwas machen",c:"Nach 5 Minuten Training ein Foto machen und nach Hause gehen",d:"Sich im Spiegel selbst bewundern und dabei gegen eine Hantelbank laufen"},{id:"bs_71",q:"In welcher Horrorfilm-Situation wrde ich am ehesten sterben?",a:"Ich stolpere ber eine ebene Flche",b:"Ich gehe nachsehen, was das Gerusch im Keller war",c:"Ich versuche, mich im Khlschrank zu verstecken",d:"Ich vertraue dem Mrder, weil er nett aussieht"},{id:"bs_72",q:"Was wre am ehesten meine Rolle in einer Boyband/Girlgroup?",a:"Der/Die Se (die eigentlich nichts kann)",b:"Der/Die Rebellische (der/die stndig Hausverbot hat)",c:"Der/Die Schchterne, die immer im Hintergrund tanzt",d:"Der/Diejenige, die nach zwei Wochen fr eine Solokarriere aussteigt"},{id:"bs_73",q:"Wie wrde ich am ehesten versuchen, ein Date zu beeindrucken?",a:"Mit unntigen Fakten ber Haie",b:"Indem ich sage, dass ich fast mal berhmt war",c:"Mit einem sehr schlechten Zaubertrick",d:"Indem ich die ganze Speisekarte auswendig lerne"},{id:"bs_74",q:"Was ist am ehesten mein 'Guilty Pleasure' im Fernsehen?",a:"Sendungen ber extrem fette Katzen",b:"Trash-TV, bei dem sich Leute anschreien",c:"Teleshopping mitten in der Nacht",d:"Zeichentrickserien fr Dreijhrige"},{id:"bs_75",q:"Was wrde ich am ehesten tun, wenn ich eine Ameise wre?",a:"Versuchen, einen ganzen Krmel Pizza alleine zu tragen",b:"In das Haus eines Promis einbrechen",c:"Die Ameisenknigin strzen und selbst regieren",d:"Mich in einem Picknickkorb verstecken"},{id:"bs_76",q:"Wie wrde mein eigenes Parfm am ehesten heien?",a:"Eau de Couch Potato",b:"Duft des Chaos",c:"Vergessenes Pausenbrot",d:"Frische Wsche (die noch nass ist)"},{id:"bs_77",q:"Was wre am ehesten meine Taktik bei einer Schneeballschlacht?",a:"Hinter einem Baum verstecken und hoffen, dass mich niemand sieht",b:"Haufenweise Schneeblle vorbereiten, die dann schmelzen",c:"Weglaufen und schreien: 'Nicht ins Gesicht!'",d:"Den Schnee essen statt werfen"},{id:"bs_78",q:"Welches Auto wrde ich am ehesten fahren, wenn Geld keine Rolle spielte?",a:"Einen Panzer (fr den Berufsverkehr)",b:"Ein Einhorn-Mobil mit Glitzerlack",c:"Ein Batmobil (ohne die Gadgets)",d:"Einen Oldtimer, der alle 2 km liegen bleibt"},{id:"bs_79",q:"Was ist am ehesten meine nervigste Eigenschaft?",a:"Dass ich Stze nicht zu Ende...",b:"Stndiges Besserwissen (auch wenn ich falsch liege)",c:"Zu laut kauen",d:"Immer zu spt kommen"},{id:"bs_80",q:"Wie wrde ich am ehesten auf eine einsame Insel gelangen?",a:"Vom Kreuzfahrtschiff gefallen, weil ich ein Selfie machen wollte",b:"Mit dem Tretboot verfahren",c:"Fallschirmabsprung an der falschen Stelle",d:"Freiwillig, um mal meine Ruhe zu haben"},{id:"bs_81",q:"Was wre am ehesten mein Wunsch-Superkraft-Nachteil?",a:"Fliegen knnen, aber nur 10 cm ber dem Boden",b:"Gedanken lesen, aber nur die schlechten ber mich",c:"Unsichtbar sein, aber nur wenn niemand hinguckt",d:"Superschnell rennen, aber sofort auer Puste sein"},{id:"bs_82",q:"Welche Frucht wre ich am ehesten?",a:"Eine Zitrone (sauer, aber erfrischend)",b:"Eine Banane (krumm und wird schnell braun)",c:"Eine Kokosnuss (harte Schale, weicher Kern)",d:"Eine Weintraube (nur in der Gruppe stark)"},{id:"bs_83",q:"Was wrde ich am ehesten tun, wenn mein Handy in die Toilette fllt?",a:"Hinterhergreifen ohne nachzudenken",b:"Davor stehen und weinen",c:"In Reis einlegen und beten",d:"Einfach splen und ein neues Leben anfangen"},{id:"bs_84",q:"Was ist am ehesten mein Lieblings-Smalltalk-Thema?",a:"Das Wetter (typisch deutsch)",b:"Wie mde ich heute wieder bin",c:"Was ich gestern gegessen habe",d:"Verschwrungstheorien ber Tauben"},{id:"bs_85",q:"Wie wrde ich am ehesten einen Streit gewinnen?",a:"Indem ich einfach so lange 'Warum?' frage, bis der andere aufgibt",b:"Mit vllig unlogischen Argumenten",c:"Indem ich anfange zu weinen",d:"Gar nicht, ich ziehe mich beleidigt zurck"},{id:"bs_86",q:"Was wre am ehesten mein Job in einer Weltraum-Kolonie?",a:"Sauerstoff-Tester (sehr riskant)",b:"Weltraum-Grtner fr Plastikblumen",c:"Unterhalter fr gelangweilte Roboter",d:"Mllschlucker-Bediener"},{id:"bs_87",q:"Was wrde ich am ehesten tun, wenn ich eine Million Follower htte?",a:"Nur noch Fotos von meinem Essen posten",b:"Versuchen, eine eigene Sekte zu grnden",c:"Meinen Account aus Versehen lschen",d:"Leuten dubiose Vitamin-Gummis verkaufen"},{id:"bs_88",q:"Welcher Wochentag wre ich am ehesten?",a:"Montag (niemand mag mich)",b:"Mittwoch (ich wei nicht, wo ich hingehre)",c:"Freitagabend (voller Energie, die schnell verpufft)",d:"Sonntag (nur am Faulenzen)"},{id:"bs_89",q:"Was wre am ehesten meine Reaktion auf einen Heiratsantrag in der ffentlichkeit?",a:"Wegrennen vor lauter Panik",b:"Ja sagen, nur damit die Leute aufhren zu gucken",c:"Fragen, ob das ein Prank fr YouTube ist",d:"Ohnmchtig werden und in die Torte fallen"},{id:"bs_90",q:"Was wrde ich am ehesten tun, wenn ich fr 5 Minuten der Prsident wre?",a:"Gratis Pizza fr alle befehlen",b:"Den Rasen vor dem Weien Haus mhen",c:"Geheime Akten ber Aliens lesen",d:"Ein Nickerchen im Oval Office machen"},{id:"bs_91",q:"Was ist am ehesten mein Verhalten im Kino?",a:"Nach 10 Minuten einschlafen",b:"Die ganze Zeit lautstark Popcorn essen",c:"Den Film kommentieren, als wre ich der Regisseur",d:"Nach der Hlfte fragen, worum es eigentlich geht"},{id:"bs_92",q:"Welches Brettspiel bringt mich am ehesten zum Ausrasten?",a:"Monopoly (ich lande immer im Gefngnis)",b:"Mensch rgere dich nicht (der Name ist Programm)",c:"Scrabble (weil ich keine Wrter kenne)",d:"Activity (niemand versteht meine Zeichnungen)"},{id:"bs_93",q:"Was wrde ich am ehesten tun, wenn ich ein Gespenst wre?",a:"Nur die Socken der Leute verstecken",b:"Das WLAN immer im spannendsten Moment ausschalten",c:"Nachts leise Witze flstern",d:"Leuten im Schlaf die Haare kmmen"},{id:"bs_94",q:"Wie wrde ich am ehesten auf eine Dit reagieren?",a:"Nach zwei Stunden eine Pizza bestellen",b:"Nur noch ber Essen reden",c:"Behaupten, dass Kekse eigentlich Gemse sind",d:"Einfach mehr Sport machen (hahaha, nein)"},{id:"bs_95",q:"Was wre am ehesten mein Name als Pirat?",a:"Einbein-Ede",b:"Kpt'n Chaos",c:"Scurvy-Susi",d:"Der Schrecken der Badewanne"},{id:"bs_96",q:"Was wrde ich am ehesten tun, wenn ich in einer Zeitschleife feststecke?",a:"Jeden Tag etwas anderes Dummes essen",b:"Endlich mal alle Serien zu Ende schauen",c:"Versuchen, den perfekten Tag zu erleben (und scheitern)",d:"Einfach nur schlafen, weil es eh egal ist"},{id:"bs_97",q:"Welche Art von Museum wrde ich am ehesten erffnen?",a:"Das Museum der gescheiterten Trume",b:"Eine Ausstellung ber hssliche Teppiche",c:"Das Museum fr Dinge, die ich mal verloren habe",d:"Eine Galerie fr schlechte Selfies"},{id:"bs_98",q:"Was wre am ehesten meine Strategie bei einer Talentshow?",a:"Mitleid erregen",b:"Die Jury bestechen",c:"Etwas so Schlechtes machen, dass es wieder gut ist",d:"Einfach nicht erscheinen"},{id:"bs_99",q:"Was wrde ich am ehesten tun, wenn ich einen Roboter-Zwilling htte?",a:"Ihn zur Arbeit schicken",b:"Ihn meine Wohnung aufrumen lassen",c:"Mich mit ihm streiten, wer das Original ist",d:"Ihn als Kleiderstnder benutzen"},{id:"bs_100",q:"Was ist am ehesten das Letzte, was ich vor meinem Tod sagen wrde?",a:"Ich habe das Gold vergraben bei...",b:"War das Fleisch noch gut?",c:"Ich wusste, dass das eine schlechte Idee war.",d:"Lscht meinen Browserverlauf!"}]}};function yc(r=[]){let e=[];return r.length===0&&(r=Object.keys(Ri)),r.forEach(n=>{Ri[n]&&Ri[n].questions&&Ri[n].questions.forEach(s=>{e.push({...s,category:n})})}),e}const Tm=new Map,D0=r=>{if(Tm.has(r))return Tm.get(r);try{const e="/Hitzkopf/",n=new Audio(`${e}sounds/${r}.mp3`);return n.addEventListener("error",s=>{console.warn(` Audio-Datei nicht gefunden: ${r}.mp3`,s)}),Tm.set(r,n),n}catch(e){return console.warn(` Fehler beim Erstellen des Audio-Objekts fr ${r}:`,e),null}},NN=(r,e=.5)=>{const n=D0(r);if(n)try{n.volume=e,n.currentTime=0,n.play().catch(s=>{})}catch(s){console.warn(` Fehler beim Abspielen von ${r}:`,s)}},DN=()=>D0("background_music"),MN="_menuModal_1ubl0_2",xN="_menuHeader_1ubl0_23",ON="_menuTitle_1ubl0_30",LN="_menuCloseButton_1ubl0_35",VN="_menuButton_1ubl0_49",jN="_menuBackButton_1ubl0_67",PN="_menuSection_1ubl0_81",zN="_menuSectionTitle_1ubl0_87",BN="_menuLogContainer_1ubl0_94",UN="_menuLogEntry_1ubl0_104",qN="_menuLogEmpty_1ubl0_110",HN="_landingContainer_1ubl0_115",FN="_landingLogoContainer_1ubl0_128",GN="_landingLogo_1ubl0_128",KN="_landingButton_1ubl0_144",$N="_backToProjectsButton_1ubl0_175",QN="_logoContainer_1ubl0_200",WN="_logoHorizontal_1ubl0_208",YN="_emojiGalleryWrapper_1ubl0_217",XN="_emojiGallery_1ubl0_217",ZN="_emojiSpacer_1ubl0_252",JN="_eliminatedText_1ubl0_270",eD="_eliminatedSubtext_1ubl0_276",tD="_thermoTop_1ubl0_296",nD="_thermoTopLeft_1ubl0_303",iD="_thermoTemp_1ubl0_309",sD="_thermoBar_1ubl0_318",rD="_thermoFill_1ubl0_326",aD="_attackSelectionGrid_1ubl0_344",oD="_volumeTitle_1ubl0_440",lD="_volumeIcon_1ubl0_452",cD="_waitText_1ubl0_514",uD="_buttonMarginTop_1ubl0_521",hD="_helpButtonLeft_1ubl0_526",dD="_spacer_1ubl0_539",fD="_settingsButton_1ubl0_544",mD="_settingsButtonGray_1ubl0_555",gD="_settingsButtonRed_1ubl0_559",pD="_settingsButtonDarkRed_1ubl0_564",yD="_settingsButtonDanger_1ubl0_569",_D="_settingsButtonMusic_1ubl0_575",bD="_settingsButtonMusicEnabled_1ubl0_582",vD="_settingsButtonMusicDisabled_1ubl0_586",TD="_volumeSliderContainer_1ubl0_591",SD="_volumeSliderWrapper_1ubl0_595",ED="_volumeSliderInput_1ubl0_601",wD="_correctGuessContainer_1ubl0_642",AD="_correctGuessTitle_1ubl0_646",RD="_correctGuessSubtitle_1ubl0_653",ID="_attackSelectionWrapper_1ubl0_665",CD="_attackSelectionHeader_1ubl0_673",kD="_attackSelectionHeaderIcon_1ubl0_682",ND="_attackPlayerCardLarge_1ubl0_692",DD="_attackPlayerEmojiLarge_1ubl0_711",MD="_attackPlayerNameLarge_1ubl0_716",xD="_attackPlayerDmgLarge_1ubl0_723",OD="_attackNoPlayersLarge_1ubl0_729",LD="_hotseatModalOverlay_1ubl0_737",VD="_hotseatModalContent_1ubl0_750",jD="_hotseatModalIcon_1ubl0_763",PD="_hotseatModalTitle_1ubl0_768",zD="_hotseatModalText_1ubl0_778",BD="_hotseatModalHeader_1ubl0_784",UD="_hotseatModalEmoji_1ubl0_792",qD="_hotseatModalButton_1ubl0_796",HD="_labelWithMargin_1ubl0_833",FD="_grid2Cols_1ubl0_842",GD="_grid3Cols_1ubl0_850",KD="_backButton_1ubl0_862",$D="_joinScreenTitle_1ubl0_870",QD="_refreshButton_1ubl0_875",WD="_noRoomsText_1ubl0_881",YD="_roomCard_1ubl0_887",XD="_categoryEmojiLarge_1ubl0_898",ZD="_categoryNameLarge_1ubl0_903",JD="_lobbyTitle_1ubl0_910",e2="_myPlayerCard_1ubl0_915",t2="_ready_1ubl0_932",n2="_notReady_1ubl0_936",i2="_eliminated_1ubl0_258",s2="_myPlayerEmoji_1ubl0_944",r2="_myPlayerInfo_1ubl0_949",a2="_myPlayerName_1ubl0_956",o2="_crownIcon_1ubl0_965",l2="_readyToggle_1ubl0_969",c2="_readyLabel_1ubl0_975",u2="_toggleSwitch_1ubl0_981",h2="_toggleThumb_1ubl0_1006",d2="_toggleCheck_1ubl0_1026",f2="_toggleCross_1ubl0_1032",m2="_gameQuestion_1ubl0_1103",g2="_gameCategory_1ubl0_1112",p2="_voteSubmitted_1ubl0_1121",y2="_voteSubmittedTitle_1ubl0_1128",_2="_voteSubmittedText_1ubl0_1133",b2="_submitButtonMargin_1ubl0_1139",v2="_resultTitle_1ubl0_1144",T2="_resultThermoItem_1ubl0_1149",S2="_eliminatedTitle_1ubl0_1157",E2="_eliminatedInfoBox_1ubl0_1162",w2="_thermoItemAnswered_1ubl0_1180",A2="_thermoItemNotAnswered_1ubl0_1186",R2="_thermoTempMax_1ubl0_1203",I2="_rewardDecisionMade_1ubl0_1261",C2="_rewardDecisionTitle_1ubl0_1268",k2="_rewardDecisionText_1ubl0_1273",N2="_wrongAnswerContainer_1ubl0_1279",D2="_wrongAnswerIcon_1ubl0_1288",M2="_attackModalOverlay_1ubl0_1306",x2="_attackModalContent_1ubl0_1319",O2="_attackModalNoDamage_1ubl0_1347",L2="_attackModalDetails_1ubl0_1353",V2="_attackModalDetailsTitle_1ubl0_1365",j2="_attackModalDetailItem_1ubl0_1369",P2="_attackModalBar_1ubl0_1374",z2="_attackModalTemp_1ubl0_1384",B2="_attackModalTempDamage_1ubl0_1390",U2="_attackModalTempNoDamage_1ubl0_1394",q2="_attackModalButton_1ubl0_1398",H2="_eliminationModalOverlay_1ubl0_1412",F2="_eliminationModalContent_1ubl0_1425",G2="_eliminationModalLogoContainer_1ubl0_1437",K2="_eliminationModalLogo_1ubl0_1437",$2="_eliminationModalTitle_1ubl0_1451",Q2="_eliminationModalText_1ubl0_1457",W2="_eliminationModalButton_1ubl0_1463",Y2="_rulesModalOverlay_1ubl0_1477",X2="_rulesModalContent_1ubl0_1490",Z2="_rulesModalSectionTitle_1ubl0_1518",J2="_rulesModalButton_1ubl0_1531",eM="_rulesModalHeader_1ubl0_1548",tM="_rulesModalHeaderIcon_1ubl0_1557",nM="_rulesModalBody_1ubl0_1561",iM="_rulesModalSectionBox_1ubl0_1567",sM="_rulesModalSectionHeader_1ubl0_1574",rM="_rulesModalSectionIcon_1ubl0_1581",aM="_rulesModalSectionText_1ubl0_1590",oM="_attackModalContentDamage_1ubl0_1596",lM="_attackModalContentNoDamage_1ubl0_1601",cM="_attackModalIcon_1ubl0_1606",uM="_attackModalName_1ubl0_1611",hM="_attackModalNameDamage_1ubl0_1617",dM="_attackModalNameNoDamage_1ubl0_1622",fM="_attackModalMessage_1ubl0_1627",mM="_attackModalBarFill_1ubl0_1633",gM="_attackModalBarFillDamage_1ubl0_1639",pM="_attackModalBarFillNoDamage_1ubl0_1644",yM="_hotseatWaitContainer_1ubl0_1657",_M="_hotseatWaitBox_1ubl0_1663",bM="_hotseatWaitTitle_1ubl0_1671",vM="_hotseatWaitSubtitle_1ubl0_1678",TM="_guessOverviewContainer_1ubl0_1685",SM="_guessOverviewSection_1ubl0_1691",EM="_guessOverviewTitle_1ubl0_1698",wM="_guessOverviewList_1ubl0_1704",AM="_guessOverviewItem_1ubl0_1710",RM="_playerReadyList_1ubl0_1721",IM="_playerReadyText_1ubl0_1725",CM="_fullWidthButton_1ubl0_1733",k={menuModal:MN,menuHeader:xN,menuTitle:ON,menuCloseButton:LN,menuButton:VN,menuBackButton:jN,menuSection:PN,menuSectionTitle:zN,menuLogContainer:BN,menuLogEntry:UN,menuLogEmpty:qN,landingContainer:HN,landingLogoContainer:FN,landingLogo:GN,landingButton:KN,backToProjectsButton:$N,logoContainer:QN,logoHorizontal:WN,emojiGalleryWrapper:YN,emojiGallery:XN,emojiSpacer:ZN,eliminatedText:JN,eliminatedSubtext:eD,thermoTop:tD,thermoTopLeft:nD,thermoTemp:iD,thermoBar:sD,thermoFill:rD,attackSelectionGrid:aD,volumeTitle:oD,volumeIcon:lD,waitText:cD,buttonMarginTop:uD,helpButtonLeft:hD,spacer:dD,settingsButton:fD,settingsButtonGray:mD,settingsButtonRed:gD,settingsButtonDarkRed:pD,settingsButtonDanger:yD,settingsButtonMusic:_D,settingsButtonMusicEnabled:bD,settingsButtonMusicDisabled:vD,volumeSliderContainer:TD,volumeSliderWrapper:SD,volumeSliderInput:ED,correctGuessContainer:wD,correctGuessTitle:AD,correctGuessSubtitle:RD,attackSelectionWrapper:ID,attackSelectionHeader:CD,attackSelectionHeaderIcon:kD,attackPlayerCardLarge:ND,attackPlayerEmojiLarge:DD,attackPlayerNameLarge:MD,attackPlayerDmgLarge:xD,attackNoPlayersLarge:OD,hotseatModalOverlay:LD,hotseatModalContent:VD,hotseatModalIcon:jD,hotseatModalTitle:PD,hotseatModalText:zD,hotseatModalHeader:BD,hotseatModalEmoji:UD,hotseatModalButton:qD,labelWithMargin:HD,grid2Cols:FD,grid3Cols:GD,backButton:KD,joinScreenTitle:$D,refreshButton:QD,noRoomsText:WD,roomCard:YD,categoryEmojiLarge:XD,categoryNameLarge:ZD,lobbyTitle:JD,myPlayerCard:e2,ready:t2,notReady:n2,eliminated:i2,myPlayerEmoji:s2,myPlayerInfo:r2,myPlayerName:a2,crownIcon:o2,readyToggle:l2,readyLabel:c2,toggleSwitch:u2,toggleThumb:h2,toggleCheck:d2,toggleCross:f2,gameQuestion:m2,gameCategory:g2,voteSubmitted:p2,voteSubmittedTitle:y2,voteSubmittedText:_2,submitButtonMargin:b2,resultTitle:v2,resultThermoItem:T2,eliminatedTitle:S2,eliminatedInfoBox:E2,thermoItemAnswered:w2,thermoItemNotAnswered:A2,thermoTempMax:R2,rewardDecisionMade:I2,rewardDecisionTitle:C2,rewardDecisionText:k2,wrongAnswerContainer:N2,wrongAnswerIcon:D2,attackModalOverlay:M2,attackModalContent:x2,attackModalNoDamage:O2,attackModalDetails:L2,attackModalDetailsTitle:V2,attackModalDetailItem:j2,attackModalBar:P2,attackModalTemp:z2,attackModalTempDamage:B2,attackModalTempNoDamage:U2,attackModalButton:q2,eliminationModalOverlay:H2,eliminationModalContent:F2,eliminationModalLogoContainer:G2,eliminationModalLogo:K2,eliminationModalTitle:$2,eliminationModalText:Q2,eliminationModalButton:W2,rulesModalOverlay:Y2,rulesModalContent:X2,rulesModalSectionTitle:Z2,rulesModalButton:J2,rulesModalHeader:eM,rulesModalHeaderIcon:tM,rulesModalBody:nM,rulesModalSectionBox:iM,rulesModalSectionHeader:sM,rulesModalSectionIcon:rM,rulesModalSectionText:aM,attackModalContentDamage:oM,attackModalContentNoDamage:lM,attackModalIcon:cM,attackModalName:uM,attackModalNameDamage:hM,attackModalNameNoDamage:dM,attackModalMessage:fM,attackModalBarFill:mM,attackModalBarFillDamage:gM,attackModalBarFillNoDamage:pM,hotseatWaitContainer:yM,hotseatWaitBox:_M,hotseatWaitTitle:bM,hotseatWaitSubtitle:vM,guessOverviewContainer:TM,guessOverviewSection:SM,guessOverviewTitle:EM,guessOverviewList:wM,guessOverviewItem:AM,playerReadyList:RM,playerReadyText:IM,fullWidthButton:CM},kM="/Hitzkopf/assets/hk_logo_vertical-B1yR7l9I.png",Pi={MAX_TEMP_DEFAULT:100,ATTACK_DMG_PARTY:20,PENALTY_DMG:10,CONNECTION_CHECK_INTERVAL:2e3,HOST_INACTIVE_THRESHOLD:5e3,CONNECTION_SLOW_THRESHOLD:5e3,CONNECTION_OFFLINE_THRESHOLD:1e4},ce={log:()=>{},warn:()=>{},error:()=>{},debug:()=>{}},il=(r,e=Pi.MAX_TEMP_DEFAULT,n=[])=>Object.keys(r||{}).filter(s=>(r?.[s]?.temp||0)<e&&!n.includes(s)).sort(),NM=r=>typeof r=="string"?r:r?.name||String(r||""),DM=(r,e)=>{const n=Object.keys(r||{}),s=Object.keys(e||{});return n.length!==s.length?!1:n.every(o=>r[o]?.choice===e[o]?.choice)},MM=(r,e,n)=>{const s=e.attackDetails?.length||0,o=e.attackDetails?.some(c=>c.hasOil)||!1;return`${r}-${e.totalDmg}-${s}-${o}-${n}`},xM=(r="op")=>`${r}_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,OM={apiKey:"AIzaSyBQ7c9JkZ3zWlyIjZLl1O1sJJOrKfYJbmA",authDomain:"hitzkopf-f0ea6.firebaseapp.com",projectId:"hitzkopf-f0ea6",storageBucket:"hitzkopf-f0ea6.firebasestorage.app",messagingSenderId:"828164655874",appId:"1:828164655874:web:1cab759bdb03bfb736101b"},LM=["","","","","","","","","","","","","","",""],Ur=(()=>{const r=[...LM];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})();function VM({onBack:r}){const[e,n]=X.useState(null),[s,o]=X.useState(null),[c,f]=X.useState("landing"),[m,b]=X.useState(sessionStorage.getItem("hk_name")||""),_=Math.floor(Ur.length/2),S=Ur[_],[A,V]=X.useState(S),[O,pe]=X.useState(sessionStorage.getItem("hk_room")||""),[de,he]=X.useState(!1),[I,Ae]=X.useState(null);X.useMemo(()=>{if(!I?.players)return[];const M=I.config?.maxTemp||Pi.MAX_TEMP_DEFAULT;return il(I.players,M)},[I?.players,I?.config?.maxTemp]),X.useMemo(()=>I?.players?Object.keys(I.players).sort():[],[I?.players]),X.useMemo(()=>Object.keys(I?.players||{}).length,[I?.players]);const[xe,ut]=X.useState("online"),Bt=X.useRef(Date.now()),He=X.useRef(new Set),D=X.useRef([]),R=X.useRef(null),[N,B]=X.useState(!1),[L,U]=X.useState(!1),[C,Wt]=X.useState([]),[Rn,ne]=X.useState(""),[ve,Ve]=X.useState(""),[_t,Ht]=X.useState(""),[P,re]=X.useState([]),[ye,Ee]=X.useState(null),[je,st]=X.useState([]),[ht,dn]=X.useState(0),[Ye,rn]=X.useState(null),[us,Js]=X.useState(null),[ni,Un]=X.useState(!1),[Hs,Zi]=X.useState(null),[Hi,vr]=X.useState(null),[fn,Ut]=X.useState(!1),[As,hs]=X.useState(null),[Rs,mn]=X.useState(!1),[pi,Ji]=X.useState(!1),[Ni,qn]=X.useState(!1),[es,Fs]=X.useState(!1),[ds,Tr]=X.useState(!1),[Fi,In]=X.useState(!1),[yi,tn]=X.useState(!1),[er,Is]=X.useState(null),[Dn,Di]=X.useState(null),[Cs,Yt]=X.useState(!1),[li,Vn]=X.useState("main"),[yn,Ga]=X.useState(()=>{const M=localStorage.getItem("hk_music_enabled");return M!==null?M==="true":!0}),[ks,Hn]=X.useState(()=>{const M=localStorage.getItem("hk_music_volume");return M!==null?parseInt(M):10}),[fs,Zr]=X.useState(()=>{const M=localStorage.getItem("hk_sound_volume");return M!==null?parseInt(M):10}),Mi=X.useRef(null),At=X.useRef(new Map),Tt=X.useRef(Date.now()),_i=X.useRef(null),jn=X.useCallback(async(M,q=null,J=3,me=1e3)=>{const W=q||xM(),E=Date.now();At.current.set(W,{startTime:E,attempts:0});for(let se=1;se<=J;se++){At.current.get(W).attempts=se;try{await M();const Y=Date.now()-E;return Tt.current=Date.now(),At.current.delete(W),ce.log(` [RETRY] Operation erfolgreich (${W}):`,{totalAttempts:se,totalDuration:Y+"ms",operationId:W}),!0}catch(Y){if(ce.warn(` [RETRY] Versuch ${se}/${J} fehlgeschlagen (${W}):`,{error:Y,code:Y?.code,message:Y?.message,stack:Y?.stack,serverResponse:Y?.serverResponse,operationId:W,attempt:se,maxRetries:J,roomId:O,hasDb:!!s}),Y?.code==="permission-denied"&&O)try{const ke=await fi(qe(s,"lobbies",O));if(!ke.exists())return ce.warn(` [RETRY] Lobby existiert nicht mehr (${W})`),At.current.delete(W),!1;const Ce=ke.data();if(Ce?.status==="deleted")return ce.warn(` [RETRY] Lobby wurde gelscht (${W})`),At.current.delete(W),!1;ce.log(" [RETRY] Lobby existiert noch:",{status:Ce?.status,roundId:Ce?.roundId,host:Ce?.host})}catch{}if((Y?.code==="permission-denied"||Y?.code==="unavailable"||Y?.code==="deadline-exceeded"||Y?.code==="failed-precondition"||Y?.message?.includes("network")||Y?.message?.includes("blocked")||Y?.message?.includes("CORS")||Y?.message?.includes("Failed to fetch")||Y?.message?.includes("failed-precondition"))&&se<J){const ke=me*se;ce.log(` [RETRY] Warte ${ke}ms vor nchstem Versuch (${W}):`,{attempt:se,maxRetries:J,waitTime:ke,errorCode:Y?.code,errorMessage:Y?.message}),await new Promise(Ce=>setTimeout(Ce,ke))}else{if(se===J)return ce.error(` [RETRY] Alle Versuche fehlgeschlagen (${W}):`,{error:Y,code:Y?.code,message:Y?.message,stack:Y?.stack,serverResponse:Y?.serverResponse,operationId:W,totalAttempts:se,roomId:O,timestamp:new Date().toISOString()}),At.current.delete(W),!1;throw ce.error(` [RETRY] Nicht-retrybarer Fehler (${W}):`,{error:Y,code:Y?.code,message:Y?.message,operationId:W,attempt:se}),At.current.delete(W),Y}}}return At.current.delete(W),!1},[]),tr=X.useCallback(async()=>{if(!(!s||!O||!I))try{const M=await fi(qe(s,"lobbies",O));if(!M.exists()){ce.log(" [RECOVERY] Lobby existiert nicht mehr");return}const q=M.data(),J=q.status,me=q.roundId;if(ce.log(" [RECOVERY] Firebase-Daten geladen:",{status:J,roundId:me,localStatus:I.status,localRoundId:I.roundId}),Ae(q),Tt.current=Date.now(),J==="result"&&de&&q.host===m){const W=q.config?.maxTemp||100,E=q.eliminatedPlayers||[],se=Object.keys(q.players||{}).filter(De=>(q.players?.[De]?.temp||0)<W&&!E.includes(De)),Y=(q.ready||[]).filter(De=>(q.players?.[De]?.temp||0)<W).length,Ie=q.roundRecapShown??!1,ke=q.attackResults&&Object.keys(q.attackResults).length>0,Ce=q.popupConfirmed||{},we=!ke||se.every(De=>q.attackResults?.[De]?Ce[De]===!0:!0);if(Y>=se.length&&se.length>0&&Ie&&we&&!At.current.has("nextRound")){ce.log(" [RECOVERY] Spiel hngt - alle bereit, aber keine nchste Runde. Starte Recovery...");try{const De=`nextRound_recovery_${Date.now()}`;At.current.set(De,{startTime:Date.now(),attempts:0});const dt=q.hotseat||"",ze=typeof dt=="string"?dt:dt?.name||String(dt||"");let Be=se.indexOf(ze);Be===-1&&(Be=0),Be=(Be+1)%se.length;const It=se[Be],Ot=q.usedQuestions||[],Xe=q.config?.categories||Object.keys(Ri),at=yc(Xe);let fe=Ot;Ot.length>0&&typeof Ot[0]=="number"&&(fe=Ot.map(Ze=>at[Ze]?.id).filter(Boolean));const _n=at.filter(Ze=>Ze.id&&!fe.includes(Ze.id)),yt=_n[Math.floor(Math.random()*_n.length)]||at[0],bt=(q.roundId??0)+1,Ue={status:"game",hotseat:It,currentQ:yt,roundId:bt,lastQuestionCategory:yt.category,roundRecapShown:!1,votes:Ai(),ready:[],lobbyReady:{},pendingAttacks:{},attackDecisions:{},attackResults:{},popupConfirmed:{},countdownEnds:Ai()};yt.id&&!fe.includes(yt.id)&&(Ue.usedQuestions=[...fe,yt.id]),await jn(async()=>{await ct(qe(s,"lobbies",O),Ue)},De,3,1e3)?(At.current.delete(De),ce.log(" [RECOVERY] Nchste Runde erfolgreich gestartet")):ce.error(" [RECOVERY] Nchste Runde fehlgeschlagen")}catch(De){ce.error(" [RECOVERY] Fehler beim Starten der nchsten Runde:",De)}}}if(J==="result"&&de&&q.host===m){const W=Object.keys(q.attackDecisions||{}).length>=Object.keys(q.players||{}).length,E=q.roundRecapShown??!1,se=q.votes?.[q.hotseat]?.choice!==void 0;if(W&&!E&&se&&!At.current.has("executeAttacks")){ce.log(" [RECOVERY] executePendingAttacks fehlgeschlagen. Versuche erneut...");try{const Y=`executeAttacks_recovery_${q.roundId||Date.now()}`;At.current.set(Y,{startTime:Date.now(),attempts:0});const Ie={roundRecapShown:!0};await jn(async()=>{await ct(qe(s,"lobbies",O),Ie)},Y,3,1e3)?(At.current.delete(Y),ce.log(" [RECOVERY] roundRecapShown gesetzt - Spiel sollte weitergehen")):ce.error(" [RECOVERY] executePendingAttacks Recovery fehlgeschlagen")}catch(Y){ce.error(" [RECOVERY] Fehler bei executePendingAttacks Recovery:",Y)}}}}catch{}},[s,O,I,de,m]);X.useEffect(()=>{if(!s||!O||!I){_i.current&&(clearInterval(_i.current),_i.current=null);return}return _i.current=setInterval(()=>{const M=Date.now()-Tt.current,q=At.current.size>0;if(M>1e4&&q&&fi(qe(s,"lobbies",O)).then(()=>{tr()}).catch(J=>{}),I.status==="result"&&de){const J=I.config?.maxTemp||100,me=I.eliminatedPlayers||[],W=Object.keys(I.players||{}).filter(Y=>(I.players?.[Y]?.temp||0)<J&&!me.includes(Y)),E=(I.ready||[]).filter(Y=>(I.players?.[Y]?.temp||0)<J).length,se=I.roundRecapShown??!1;E>=W.length&&W.length>0&&se&&M>15e3&&tr()}},5e3),()=>{_i.current&&(clearInterval(_i.current),_i.current=null)}},[s,O,I,de,tr]);const Mn=X.useCallback((M,q=.5)=>{NN(M,q*fs/10)},[fs]);X.useEffect(()=>{if(!Mi.current){const q=DN();q&&(q.loop=!0,Mi.current=q)}const M=Mi.current;M&&(M.volume=ks/10,yn?M.play().catch(q=>{}):M.pause())},[yn,ks]),X.useEffect(()=>{const M=()=>{yn&&Mi.current&&Mi.current.play().catch(()=>{})};if(yn){const q=["click","touchstart","keydown"];return q.forEach(J=>{document.addEventListener(J,M,{once:!0})}),()=>{q.forEach(J=>{document.removeEventListener(J,M)})}}},[yn]);const Gi=X.useCallback(()=>{const M=!yn;Ga(M),localStorage.setItem("hk_music_enabled",String(M))},[yn]),Sn=X.useCallback(M=>{Hn(M),localStorage.setItem("hk_music_volume",String(M)),Mi.current&&(Mi.current.volume=M/10)},[]),xn=X.useCallback(M=>{Zr(M),localStorage.setItem("hk_sound_volume",String(M))},[]);X.useEffect(()=>{const M=tg(OM),q=m0(M),J=$T(M);n(M),o(q),cR(J,me=>{me?ce.log(" [AUTH] Anonyme Authentifizierung erfolgreich:",me.uid):LT(J).then(W=>{ce.log(" [AUTH] Automatische anonyme Anmeldung erfolgreich:",W.user.uid)}).catch(W=>{})})},[]),X.useEffect(()=>{if(!s||!O)return;D.current=[];const M=k0(qe(s,"lobbies",O),W=>{if(!O)return;if(ut("online"),Tt.current=Date.now(),!W.exists()){sessionStorage.removeItem("hk_room"),pe(""),Ae(null),f("start"),R.current=null;return}const E=W.data();if(E.status==="deleted"){sessionStorage.removeItem("hk_room"),pe(""),Ae(null),f("start"),R.current=null,alert("Die Lobby wurde vom Host gelscht.");return}if(!O)return;const se=E.roundId??0,Y=R.current;if(Y!=null&&se<Y){(E.status!==I?.status||se!==I?.roundId)&&ce.warn(" [FIREBASE] Update mit niedrigerer roundId ignoriert:",{lastRoundId:Y,currentRoundId:se,status:E.status,oldStatus:I?.status});return}se>(Y||0)&&(R.current=se),W.metadata.hasPendingWrites===!1&&E?.host===m&&(Bt.current=Date.now());const Ie=I?.status,ke=E.status,Ce=I?.roundId,we=E.roundId,De=I?.hotseat,dt=E.hotseat,ze=Ie!==ke,Be=Ce!==we,It=De!==dt,Ot=I?.votes||{},Xe=E.votes||{},at=Object.keys(Ot),fe=Object.keys(Xe);(at.length!==fe.length||at.some(Ue=>Ot[Ue]?.choice!==Xe[Ue]?.choice))&&ce.log(" [VOTES] Votes gendert:",{roundId:E.roundId,oldVotes:at,newVotes:fe});const yt=E.host===m;if(he(yt),Ce!==we){if(Ce!=null&&we<Ce){ce.error(" [ROUND] KRITISCH: roundId geht zurck!",{oldRoundId:Ce,newRoundId:we,status:E.status,roomId:O});return}Ye&&rn(null)}let bt=!1;if(!I)bt=!0;else{bt=["status","roundId","hotseat","roundRecapShown"].some(ot=>I[ot]!==E[ot]);const nt=I.lobbyReady||{},Ze=E.lobbyReady||{},en=Object.keys(nt),jt=Object.keys(Ze);if(en.length!==jt.length)ce.log(" [LOBBY READY] Anzahl Keys gendert:",{oldCount:en.length,newCount:jt.length,oldKeys:en,newKeys:jt}),bt=!0;else{const ot=new Set([...en,...jt]);let Gt=!1;for(const Zt of ot){const St=nt[Zt],ge=Ze[Zt];St===!0!==(ge===!0)&&(Gt=!0)}Gt&&(bt=!0)}if(!bt){const ot=I.votes||{},Gt=E.votes||{},Zt=Object.keys(ot),St=Object.keys(Gt);(Zt.length!==St.length||Zt.some(ge=>ot[ge]?.choice!==Gt[ge]?.choice))&&(bt=!0)}if(!bt){const ot=I.players||{},Gt=E.players||{},Zt=Object.keys(ot),St=Object.keys(Gt);(Zt.length!==St.length||Zt.some(ge=>{const Ge=ot[ge],Fe=Gt[ge];return Ge?.temp!==Fe?.temp||Ge?.emoji!==Fe?.emoji}))&&(bt=!0)}if(!bt){const ot=I.ready||[],Gt=E.ready||[];(ot.length!==Gt.length||ot.some((Zt,St)=>Zt!==Gt[St]))&&(bt=!0)}}if(bt||!I){const Ue={...E};E.lobbyReady&&(Ue.lobbyReady={...E.lobbyReady}),Ae(Ue),(ze||Be||It)&&ce.log(" [GLOBAL DATA] globalData aktualisiert:",{statusChanged:ze,roundIdChanged:Be,hotseatChanged:It,status:Ue.status,roundId:Ue.roundId,hotseat:Ue.hotseat,playerCount:Object.keys(Ue.players||{}).length,voteCount:Object.keys(Ue.votes||{}).length,readyCount:Array.isArray(Ue.ready)?Ue.ready.length:0})}if(E.status==="lobby")c!=="lobby"&&f("lobby");else if(E.status==="game"){c!=="game"?(ce.log(" [SCREEN] Wechsel zu Game:",{from:c,to:"game",roundId:E.roundId,hotseat:E.hotseat,timestamp:new Date().toISOString(),hasPendingWrites:W.metadata.hasPendingWrites,fromCache:W.metadata.fromCache}),f("game")):ce.log(" [SCREEN] Bereits auf Game-Screen, berspringe Wechsel:",{roundId:E.roundId,hotseat:E.hotseat});const Ue=I&&I.status===E.status&&I.roundId===E.roundId&&I.hotseat===E.hotseat&&DM({...I,votes:{}},{...E,votes:{}})&&I.votes?.[m]?.choice===E.votes?.[m]?.choice;Y===null&&E.roundId!==void 0&&(ce.log(" [GAME SCREEN] Initialisiere lastRoundId beim ersten Mal:",E.roundId),Zi(E.roundId));const nt=Y??I?.roundId,Ze=nt!=null&&E.roundId!==nt;if(Ze){ce.log(" [GAME SCREEN] Neue Runde erkannt - RESET Selection:",{oldRoundId:nt,newRoundId:E.roundId,oldSelection:Ye,lastRoundId:Y,globalDataRoundId:I?.roundId}),rn(null),Zi(E.roundId),Un(!1),mn(!1),Ji(!1),qn(!1);return}const en=!I&&Y===E.roundId&&!Ze,jt=E.votes?.[m]?.choice!==void 0,ot=E.votes?.[m]?.roundId,Gt=ot!==void 0&&ot===E.roundId,Zt=jt&&Gt&&!Ye&&!Ze;if(Ue||en)Zt?(ce.log(" [GAME SCREEN] Restore Selection aus Vote:",{oldSelection:Ye,newSelection:E.votes[m].choice,voteRoundId:ot,currentRoundId:E.roundId,isNewRound:Ze}),rn(E.votes[m].choice)):jt&&!Gt&&Ye?(ce.warn(" [GAME SCREEN] Vote aus alter Runde - RESET Selection:",{oldSelection:Ye,voteRoundId:ot,currentRoundId:E.roundId}),rn(null)):Ze&&Ye&&(ce.warn(" [GAME SCREEN] Neue Runde erkannt, aber Selection noch gesetzt - RESET:",{oldSelection:Ye,currentRoundId:E.roundId,oldRoundId:nt}),rn(null));else if(ce.log(" [GAME SCREEN] Game-Screen Update:",{roundId:E.roundId,oldRoundId:I?.roundId,hotseat:E.hotseat,myVote:E.votes?.[m],allVotes:Object.keys(E.votes||{}),mySelection:Ye,localActionDone:ni}),!Ze&&(!I&&E.roundId!==Y&&(ce.log(" [GAME SCREEN] Initialisiere lastRoundId:",E.roundId),Zi(E.roundId)),Y===E.roundId&&E.votes?.[m])){const ge=E.votes[m]?.roundId;ge!==void 0&&ge===E.roundId?Ye?Ye!==E.votes[m].choice&&(ce.log(" [GAME SCREEN] Synchronisiere Selection mit Vote (gleiche Runde):",{oldSelection:Ye,newSelection:E.votes[m].choice,voteRoundId:ge,currentRoundId:E.roundId,reason:"Selection stimmt nicht mit Vote berein"}),rn(E.votes[m].choice)):(ce.log(" [GAME SCREEN] Restore Selection aus Vote (gleiche Runde):",{oldSelection:Ye,newSelection:E.votes[m].choice,voteRoundId:ge,currentRoundId:E.roundId,reason:"Selection fehlt, Vote existiert"}),rn(E.votes[m].choice)):Ye&&(ce.warn(" [GAME SCREEN] Vote aus alter Runde - RESET Selection:",{mySelection:Ye,voteRoundId:ge,currentRoundId:E.roundId}),rn(null))}const St=E.roundId||0;if(E.hotseat&&E.players&&St!==un.current&&!es){un.current=St;const ge=m===E.hotseat;ce.log(" [HOTSEAT MODAL] Neue Runde erkannt:",{roundId:St,hotseat:E.hotseat,isMeHotseat:ge,myName:m,players:Object.keys(E.players||{}),showHotseatModal:es}),setTimeout(()=>{es||Qa(E.hotseat,E.players)},100)}else E.hotseat&&St===un.current?ce.log(" [HOTSEAT MODAL] Bereits fr diese Runde angezeigt, berspringe:",{roundId:St,hotseatModalShownRef:un.current,showHotseatModal:es}):es&&St!==un.current&&(Fs(!1),un.current=null)}else if(E.status==="result"){c!=="result"&&(ce.log(" [SCREEN] Wechsel zu Result:",{from:c,to:"result",roundId:E.roundId}),f("result"));const Ue=!0,nt=m===E.hotseat,Ze=E.votes?.[m],en=typeof E.hotseat=="string"?E.hotseat:E.hotseat?.name||String(E.hotseat||""),jt=E.votes?.[en],ot=jt?.roundId,Gt=E.roundId,St=ot!==void 0&&ot===Gt?jt?.choice:void 0,ge=St!=null,Ge=ge&&Ze&&String(Ze.choice)===String(St),Fe=ge&&Ze&&String(Ze.choice)!==String(St),Me=E.attackDecisions||{},ft=E.roundRecapShown??!1;if(ce.log(" [RESULT] Result-Screen Analyse:",{roundId:E.roundId,isHotseat:nt,isPartyMode:Ue,myVote:Ze?.choice,hotseat:E.hotseat,hotseatVote:jt,truth:St,hasTruth:ge,guessedCorrectly:Ge,guessedWrong:Fe,attackDecisions:Me,myAttackDecision:Me[m],roundRecapShown:ft,allVotes:Object.keys(E.votes||{}),localActionDone:ni,showRewardChoice:Rs,showAttackSelection:pi,showJokerShop:Ni,pendingAttacks:E.pendingAttacks||{},attackResults:E.attackResults?Object.keys(E.attackResults):[]}),!ge&&!nt)ce.warn(" [RESULT] Hotseat hat noch keine Antwort abgegeben, warte...",{hotseat:E.hotseat,hotseatVote:jt,allVotes:Object.keys(E.votes||{}),votes:E.votes});else if(nt&&!Me[m]&&s&&O)Un(!0),ct(qe(s,"lobbies",O),{[`attackDecisions.${m}`]:!0}).catch(ce.error);else if(!(!nt&&Fe&&!Me[m]&&!Ue)){if(!nt&&Fe&&!Me[m]&&Ue&&s&&O){const Ke=`${E.roundId}-${m}`;Ds.current!==Ke&&(Ds.current=Ke,Ms().catch(ce.error),Un(!0))}}const pn=Y!==E.roundId;pn&&(mn(!1),Ji(!1),qn(!1),Ds.current=null),!nt&&Ge&&!Me[m]&&!Rs&&!pi&&!Ni&&(ce.log(" [ATTACK] Zeige Angriffsauswahl",{roundId:E.roundId,lastRoundId:Y,isNewRound:pn,attackDecisions:Me[m],isPartyMode:Ue}),mn(!0));const Ct=E.popupConfirmed?.[m]===!0,mt=E.config?.maxTemp||100,ii=E.eliminatedPlayers||[],si=Object.keys(E.players||{}).filter(Ke=>(E.players?.[Ke]?.temp||0)<mt&&!ii.includes(Ke)),ui=si.length,hi=Object.keys(Me).filter(Ke=>Me[Ke]===!0),wn=E.hotseat&&E.votes?.[E.hotseat]?.choice!==void 0,Ki=hi.length+(wn&&!Me[E.hotseat]?1:0);if(E.attackResults&&E.attackResults[m]!==void 0&&ft&&!Ct){const Ke=E.attackResults[m],qt=MM(E.roundId,Ke,ft);ce.log(" [ATTACK MODAL] Attack-Result gefunden:",{roundId:E.roundId,result:Ke,resultKey:qt,lastAttackResultKey:Hi,attackModalShownRef:gn.current,isOpeningAttackModal:fn,showAttackModal:ds,roundRecapShown:ft,popupConfirmed:Ct,totalDmg:Ke.totalDmg,attackDetails:Ke.attackDetails});const Kn=qt!==gn.current&&!fn&&!ds&&!Ct;if(Kn){ce.log(" [ATTACK MODAL] Modal wird angezeigt fr Runde:",E.roundId,"| Schaden:",Ke.totalDmg,"C"),gn.current=qt,vr(qt),Ut(!0),Di(Ke);const Li=setTimeout(()=>{!ds&&gn.current===qt&&!Ct?(Tr(!0),Ut(!1)):(ce.log(" [ATTACK MODAL] Modal wird bereits angezeigt, Ref gendert oder Popup besttigt, berspringe setShowAttackModal:",{showAttackModal:ds,refMatches:gn.current===qt,popupConfirmed:Ct}),Ut(!1))},300);D.current.push(Li)}else ce.log(" [ATTACK MODAL] Modal wird NICHT angezeigt:",{resultKeyMatches:qt===gn.current,isOpening:fn,alreadyShown:ds,popupConfirmed:Ct,resultKey:qt,attackModalShownRef:gn.current,shouldShow:Kn})}if(E.eliminationInfo&&E.eliminationInfo.player&&!yi){const Ke=E.eliminationInfo.player,qt=E.config?.maxTemp||100,Kn=E.players?.[Ke]?.temp||0,Li=`${E.roundId}-${Ke}`;Kn>=qt&&As!==Li&&(Is(Ke),tn(!0),hs(Li))}else ce.log(" [ATTACK MODAL] Kein Modal:",{hasAttackResults:!!E.attackResults,hasMyResult:E.attackResults?.[m]!==void 0,roundRecapShown:ft,popupConfirmed:Ct,roundId:E.roundId});const ns=Ki>=ui,xs=!ft,ar=E.votes||{},$i=si.filter(Ke=>{const qt=ar[Ke];if(!qt||qt.choice===void 0)return!1;const Kn=qt.roundId;return Kn!==void 0&&Kn===E.roundId}).length,Lt=$i>=ui&&ui>0;ce.log(" [EXECUTE ATTACKS] Prfung:",{roundId:E.roundId,playerCount:ui,playersWithDecision:hi.length,effectiveDecidedCount:Ki,allDecided:ns,allVoted:Lt,voteCount:$i,totalVotesInFirebase:Object.keys(ar).length,recapNotShown:xs,hasTruth:ge,hotseat:E.hotseat,hotseatVote:jt,isHost:de,isMeHost:E.host===m,attackDecisions:Me,hotseatShouldBeDecided:wn,hotseatInDecisions:Me[E.hotseat]});const Qi=E.lastHostActivity,vi=Qi&&Qi.toMillis?Date.now()-Qi.toMillis()>Pi.HOST_INACTIVE_THRESHOLD:!0,Gn=E.host,u=!vi&&Gn===m,g=E.eliminatedPlayers||[],v=Object.keys(E.players||{}).filter(Ke=>(E.players?.[Ke]?.temp||0)<(E.config?.maxTemp||100)&&!g.includes(Ke)).sort(),F=v.indexOf(m)===0&&v.length>0&&v[0]!==Gn,Q=ns||Lt,be=xs,Le=ge,Kt=u||vi&&F,vt=Q&&be&&Le&&Kt;if(!vt&&(ns||Lt)&&ce.log(" [EXECUTE ATTACKS] Prfung fehlgeschlagen - Details:",{roundId:E.roundId,condition1_allDecidedOrVoted:Q,allDecided:ns,allVoted:Lt,condition2_recapNotShown:be,roundRecapShown:E.roundRecapShown,condition3_hasTruth:Le,hotseatVote:E.votes?.[E.hotseat],condition4_hostActive:Kt,isHostActive:u,hostInactive:vi,isFirstBackupHost:F,myName:m,host:E.host}),vt){const Ke=`executeAttacks_${E.roundId}`;if(!He.current.has(Ke)){He.current.add(Ke);const qt=setTimeout(()=>{Ar(E).catch(Kn=>{}),He.current.delete(Ke)},500);D.current.push(qt)}}else if(!(ns&&xs&&!ge&&de&&E.host===m)){if(ns&&xs&&ge&&!vt&&(ce.warn(" [EXECUTE ATTACKS] FALLBACK: Alle Bedingungen erfllt, aber canExecuteAttacks ist false. Versuche trotzdem...",{condition1:Q,condition2:be,condition3:Le,condition4:Kt,isHost:de,myName:m,host:E.host}),F||v[0]===m)){const Ke=`executeAttacks_fallback_${E.roundId}`;if(!He.current.has(Ke)){He.current.add(Ke);const qt=setTimeout(()=>{Ar(E).catch(Kn=>{}),He.current.delete(Ke)},1e3);D.current.push(qt)}}}}else E.status==="winner"&&c!=="winner"&&f("winner");if(E.status==="game"){const Ue=E.lastHostActivity,nt=Ue&&Ue.toMillis?Date.now()-Ue.toMillis()>Pi.HOST_INACTIVE_THRESHOLD:!1,Ze=E.host,en=E.config?.maxTemp||Pi.MAX_TEMP_DEFAULT,jt=E.eliminatedPlayers||[],ot=il(E.players,en,jt),Zt=ot.indexOf(m)===0&&ot.length>0&&ot[0]!==Ze,St=!nt&&Ze===m,ge=il(E.players,en,jt),Ge=ge.length,Fe=ge.filter(si=>{const ui=E.votes?.[si];if(!ui||ui.choice===void 0)return!1;const hi=ui?.roundId;return hi!==void 0&&hi===E.roundId}).length,Me=NM(E.hotseat),ft=Me?E.votes?.[Me]:null,pn=ft?.roundId;!(Me&&ge.includes(Me)&&ft?.choice!==void 0&&pn!==void 0&&pn===E.roundId)&&Me&&ce.warn(" [AUTO-ADVANCE] Hotseat hat noch nicht (gltig) abgestimmt:",{hotseat:Me,hasVote:!!ft,choice:ft?.choice,voteRoundId:pn,currentRoundId:E.roundId,isActive:ge.includes(Me)});const mt=Fe>=Ge&&Ge>0;if(E.votes&&(mt||St||nt&&Zt||Ze===m&&!Ue)){const si=E.config?.maxTemp||Pi.MAX_TEMP_DEFAULT;if(il(E.players,si).length,mt){const wn=`autoAdvance_${E.roundId}`;if(!He.current.has(wn)){He.current.add(wn);const Ki=setTimeout(async()=>{try{await jn(()=>ct(qe(s,"lobbies",O),{status:"result",lastHostActivity:Yi()}),`autoAdvance_${E.roundId}`,5,1e3)}catch{ut("slow"),He.current.delete(wn)}},500);D.current.push(Ki)}}}}if(E.status==="result"){let Ue=E.roundRecapShown??!1;const nt=E.lastHostActivity,Ze=nt&&nt.toMillis?Date.now()-nt.toMillis()>Pi.HOST_INACTIVE_THRESHOLD:!0,en=E.host,jt=E.config?.maxTemp||Pi.MAX_TEMP_DEFAULT,ot=il(E.players,jt),Zt=ot.indexOf(m)===0&&ot.length>0&&ot[0]!==en,St=!Ze&&en===m,ge=E.config?.maxTemp||100,Ge=E.eliminatedPlayers||[],Fe=Object.keys(E.players||{}).filter(Lt=>(E.players?.[Lt]?.temp||0)<ge&&!Ge.includes(Lt)),Me=Fe.length,ft=Fe.filter(Lt=>{const Qi=E.votes?.[Lt];if(!Qi||Qi.choice===void 0)return!1;const vi=Qi.roundId;return vi!==void 0&&vi===E.roundId}).length,pn=E.ready||[],Ct=Fe.filter(Lt=>pn.includes(Lt)).length,mt=Ct>=Me&&Me>0,ii=ft>=Me&&Me>0,si=E.popupConfirmed||{},hi=!(E.attackResults&&Object.keys(E.attackResults).length>0)||Fe.every(Lt=>E.attackResults?.[Lt]?si[Lt]===!0:!0),wn=E.attackDecisions||{},Ki=Object.keys(wn).filter(Lt=>wn[Lt]===!0),ns=E.hotseat&&E.votes?.[E.hotseat]?.choice!==void 0,xs=Ki.length+(ns&&!wn[E.hotseat]?1:0),ar=xs>=Me&&Me>0;E.status==="result"&&!Ue&&mt&&(ii||ar)&&hi&&(St||Ze&&Zt)&&s&&O&&(ce.log(" [AUTO-NEXT] FALLBACK: Setze roundRecapShown auf true, weil alle bereit sind:",{roundId:E.roundId,allReady:mt,allVoted:ii,allDecided:ar,allPopupConfirmed:hi,readyCount:Ct,playerCount:Me,effectiveDecidedCount:xs}),ct(qe(s,"lobbies",O),{roundRecapShown:!0}).catch(Lt=>{}),Ue=!0);const $i=E.status==="result"&&Ue&&(St||Ze&&Zt||mt&&ii&&hi&&ot.includes(m));if(!$i&&E.status==="result"&&ce.log(" [AUTO-NEXT] canAutoNext ist false - Details:",{roundId:E.roundId,status:E.status,roundRecapShown:E.roundRecapShown,roundRecapShownForNext:Ue,allReadyCheck:mt,allVotedCheck:ii,allPopupConfirmedCheck:hi,isHostActiveNext:St,hostInactiveNext:Ze,isFirstBackupHostNext:Zt,myName:m,host:E.host}),$i){const Lt=E.config?.maxTemp||100,Qi=E.eliminatedPlayers||[],vi=Object.keys(E.players||{}).filter(Le=>(E.players?.[Le]?.temp||0)<Lt&&!Qi.includes(Le)),Gn=vi.length,u=vi.filter(Le=>{const Kt=E.votes?.[Le];if(!Kt||Kt.choice===void 0)return!1;const vt=Kt.roundId;return vt!==void 0&&vt===E.roundId}).length,g=E.popupConfirmed||{};!(E.attackResults&&Object.keys(E.attackResults).length>0)||vi.every(Le=>E.attackResults?.[Le]?g[Le]===!0:!0);const w=E.ready||[],F=vi.filter(Le=>w.includes(Le)).length,Q=F>=Gn&&Gn>0,be=u>=Gn&&Gn>0&&Q;if(!be&&$i&&ce.log(" [AUTO-NEXT] shouldNext ist false - Details:",{roundId:E.roundId,voteCount:u,playerCount:Gn,readyCount:F,allReady:Q,hasEnoughVotes:u>=Gn,hasEnoughPlayers:Gn>0,readyList:w,activePlayers:vi}),be){const Le=`autoNext_${E.roundId}`;if(!He.current.has(Le)){He.current.add(Le);const Kt=setTimeout(async()=>{try{await jn(()=>bi(),`autoNext_${E.roundId}`,5,2e3)}catch{ut("slow")}He.current.delete(Le)},1e3);D.current.push(Kt)}}}}},{includeMetadataChanges:!0}),q=setInterval(()=>{const W=Date.now()-Tt.current;W>Pi.CONNECTION_OFFLINE_THRESHOLD?ut("offline"):W>Pi.CONNECTION_SLOW_THRESHOLD?ut("slow"):ut("online")},Pi.CONNECTION_CHECK_INTERVAL),J=setInterval(async()=>{if(!(!s||!O||!m))try{const W=await fi(qe(s,"lobbies",O));if(!W.exists()){ce.debug(" [PRESENCE] Lobby existiert nicht mehr, stoppe Heartbeat");return}if(W.data()?.status==="deleted"){ce.debug(" [PRESENCE] Lobby wurde gelscht, stoppe Heartbeat");return}await ct(qe(s,"lobbies",O),{[`players.${m}.lastSeen`]:Yi()})}catch(W){if(W?.code==="permission-denied"||W?.code==="not-found")return}},5e3),me=setInterval(async()=>{if(!(!de||!s||!O||!I?.players))try{const W=Date.now(),E=15e3,se=[];for(const[Y,Ie]of Object.entries(I.players)){const ke=Ie?.lastSeen;if(ke&&ke.toMillis){const Ce=W-ke.toMillis();Ce>E&&(se.push(Y),ce.warn(` [PRESENCE] Spieler ${Y} ist inaktiv (${Math.round(Ce/1e3)}s)`))}}se.length>0&&ce.warn(" [PRESENCE] Inaktive Spieler erkannt:",se)}catch{}},1e4);return()=>{M(),clearInterval(q),clearInterval(J),clearInterval(me),D.current.forEach(W=>clearTimeout(W)),D.current=[],He.current.clear()}},[s,O,m,de]);const ci=X.useRef(null),[ts,j]=X.useState(Math.floor(Ur.length/2)),Z=X.useRef(!1),_e=X.useRef({x:0,y:0,time:0});X.useEffect(()=>{const M=Math.floor(Ur.length/2),q=Ur[M];if(c==="start")(A!==q||ts!==M)&&(V(q),j(M),sessionStorage.setItem("hk_emoji",q));else if(!A||!Ur.includes(A))V(q),j(M),sessionStorage.setItem("hk_emoji",q);else{const J=Ur.indexOf(A);J>=0?j(J):(j(M),V(q))}},[c]),X.useEffect(()=>{if(ci.current&&ts>=0&&c==="start"){const M=ci.current,J=M.querySelectorAll(".emoji-card")[ts];J&&(Z.current=!0,setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{const me=M.clientWidth,W=J.offsetWidth||80,se=J.offsetLeft-me/2+W/2,Y=Math.max(0,Math.min(se,M.scrollWidth-M.clientWidth));M.scrollLeft=Y,setTimeout(()=>{Math.abs(M.scrollLeft-Y)>10&&(M.scrollLeft=Y),setTimeout(()=>{Z.current=!1},100)},50)})})},150))}},[ts,c]);const Te=M=>{const q=Ur.indexOf(M);q>=0&&(j(q),V(M),sessionStorage.setItem("hk_emoji",M),ci.current&&ci.current.querySelectorAll(".emoji-card").forEach((me,W)=>{W===q?me.classList.add("selected"):me.classList.remove("selected")}))},Pe=X.useCallback(M=>{const q=M.target.value.trim().substring(0,20);b(q),sessionStorage.setItem("hk_name",q)},[]),We=X.useCallback(M=>{Wt(M==="all"?q=>q.length===Object.keys(Ri).length?[]:Object.keys(Ri):q=>q.includes(M)?q.filter(J=>J!==M):[...q,M])},[]);X.useCallback(M=>{const q=[...M];for(let J=q.length-1;J>0;J--){const me=Math.floor(Math.random()*(J+1));[q[J],q[me]]=[q[me],q[J]]}return q},[]);const Rt=X.useCallback(()=>{if(je.length===0)return;const M=ht+1;M>=je.length?(dn(0),Ee(je[0])):(dn(M),Ee(je[M]))},[je,ht]),Cn=X.useCallback(()=>{if(ht===0)return;const M=ht-1;dn(M),Ee(je[M])},[je,ht]),Fn=async()=>{if(!m.trim()){alert("Bitte gib deinen Namen ein!");return}if(C.length===0){alert("Bitte whle mindestens eine Kategorie aus!");return}if(!s){alert("Fehler: Firebase ist noch nicht initialisiert. Bitte warte einen Moment und versuche es erneut.");return}const M=Pi.ATTACK_DMG_PARTY,q=1.5,J=Pi.MAX_TEMP_DEFAULT,me=Math.random().toString(36).substring(2,6).toUpperCase();try{const E=yc(C)[0]||{q:"Willkommen zu Hitzkopf!",a:"A",b:"B"},se=E.category||null;ce.log(" [CREATE GAME] Versuche Lobby zu erstellen:",{code:me,host:m,categories:C.length});const Y={host:m,hostName:m,status:"lobby",createdAt:Yi(),players:{[m]:{temp:0,inventory:[],emoji:A,lastSeen:Yi()}},config:{dmg:M,speed:q,startTemp:0,maxTemp:J,categories:C},votes:{},ready:[],log:[],hotseat:"",currentQ:E,roundId:0,lobbyReady:{}};se&&(Y.lastQuestionCategory=se),await C0(qe(s,"lobbies",me),Y),pe(me),sessionStorage.setItem("hk_room",me),he(!0),f("lobby"),R.current=null,ce.log(" [CREATE GAME] Lobby erfolgreich erstellt:",me)}catch(W){ce.error(" [CREATE GAME] Fehler beim Erstellen der Lobby:",{error:W,code:W.code,message:W.message,stack:W.stack}),pe(""),sessionStorage.removeItem("hk_room"),he(!1),W.code==="permission-denied"?alert("Fehler: Keine Berechtigung zum Erstellen einer Lobby. Bitte berprfe deine Firebase-Berechtigungen."):W.code==="unavailable"?alert("Fehler: Firebase ist nicht verfgbar. Bitte berprfe deine Internetverbindung."):alert(`Fehler beim Erstellen des Spiels: ${W.message||"Unbekannter Fehler"}`)}},Xt=async(M=null)=>{if(!m.trim()){alert("Bitte gib deinen Namen ein!");return}const q=(M||ve).toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,6);if(!q||q.length<4){alert("Bitte whle einen Raum aus der Liste!");return}const J=qe(s,"lobbies",q),me=await fi(J);if(!me.exists()){alert("Lobby nicht gefunden!");return}const W=me.data();W.players&&W.players[m]&&alert("Du bist bereits in diesem Raum!"),pe(q),sessionStorage.setItem("hk_room",q),he(!1),R.current=null,await ct(J,{[`players.${m}`]:{temp:0,inventory:[],emoji:A},[`players.${m}.lastSeen`]:Yi()})},nr=async()=>{if(!s)return;const M=Km(s,"lobbies"),q=Qm(M,Wm("status","==","lobby")),J=await Ym(q),me=[];J.forEach(W=>{const E=W.data();if(E.hostName&&E.status==="lobby"){const se=E.players?.[E.hostName]?.emoji||"";me.push({id:W.id,hostName:E.hostName,hostEmoji:se,playerCount:Object.keys(E.players||{}).length})}}),re(me),J.forEach(W=>{const E=W.data();E.hostName==="Host"&&E.status==="lobby"&&(ce.log(' [CLEANUP] Lsche alten Raum von "Host":',W.id),kc(W.ref).catch(se=>{}))})},Sr=async M=>{Ve(M),await Xt(M)},xi=async()=>{if(Mn("toggle",.4),!s||!O)return;const M=I?.config?.maxTemp||100;if((I?.players?.[m]?.temp||0)>=M){alert("Du bist ausgeschieden und kannst nicht mehr mitspielen!");return}const W=!!!I?.lobbyReady?.[m];I&&Ae({...I,lobbyReady:{...I.lobbyReady||{},[m]:W}}),await ct(qe(s,"lobbies",O),{[`lobbyReady.${m}`]:W})},Ns=async()=>{if(!s||!O||!de)return;const M=I?.config?.maxTemp||100,q=Object.keys(I?.players||{}),J=q.filter(De=>(I?.players?.[De]?.temp||0)<M),me=I?.lobbyReady||{},W=J.filter(De=>me[De]).length;if(ce.log(" [START GAME] Prfung:",{allPlayers:q,activePlayers:J,readyCount:W,totalActivePlayers:J.length,lobbyReady:me}),W<J.length||J.length<2){ce.warn(" [START GAME] Nicht alle aktiven Spieler bereit:",W,"/",J.length),alert(`Alle aktiven Spieler mssen bereit sein! (${W}/${J.length})`);return}await Wa(I.players);const E=I?.usedQuestions||[],se=I?.config?.categories||Object.keys(Ri),Y=yc(se);let Ie=E;E.length>0&&typeof E[0]=="number"&&(Ie=E.map(De=>Y[De]?.id).filter(Boolean));const ke=Y.filter(De=>De.id&&!Ie.includes(De.id)),Ce=ke[Math.floor(Math.random()*ke.length)]||Y[0],we=(I?.roundId??0)+1;ce.log(" [START GAME] Starte erste Runde:",{hotseat:J[0],question:Ce.q,roundId:we,questionId:Ce.id}),Mn("game_start",.7),await ct(qe(s,"lobbies",O),{status:"game",hotseat:J[0],currentQ:Ce,votes:{},ready:[],roundId:we,lobbyReady:{},usedQuestions:Ce.id&&!Ie.includes(Ce.id)?[...Ie,Ce.id]:Ie,lastQuestionCategory:Ce.category,pendingAttacks:{},attackDecisions:{},attackResults:{},roundRecapShown:!1,popupConfirmed:{}})},Jr=X.useCallback(M=>{if(I){const q=I.config?.maxTemp||100;if((I.players?.[m]?.temp||0)>=q){alert("Du bist ausgeschieden und kannst nicht mehr abstimmen!");return}}rn(M),Mn("click",.3)},[Mn,I,m]),Ka=X.useCallback(async()=>{if(ni)return;if(!s||!O){alert("Fehler: Datenbank-Verbindung fehlt!");return}const M=await fi(qe(s,"lobbies",O));if(!M.exists()){alert("Lobby existiert nicht mehr!");return}const q=M.data(),J=q?.config?.maxTemp||100;if((q?.players?.[m]?.temp||0)>=J){alert("Du bist ausgeschieden und kannst nicht mehr abstimmen!");return}const W=q?.votes?.[m],E=q?.roundId||0;ce.log(" [SUBMIT VOTE] Prfe bestehende Votes:",{existingVote:W,allVotes:Object.keys(q?.votes||{}),roundId:E,myName:m,mySelection:Ye});const se=W?.roundId;if(W&&se!==void 0&&se===E){alert("Du hast bereits abgestimmt!");return}if(!Ye)if(W?.choice)ce.log(" [SUBMIT VOTE] Restore mySelection aus existingVote:",W.choice),rn(W.choice),W.choice;else{alert("Bitte whle zuerst eine Antwort!");return}const Ie=Ye||W?.choice;if(!Ie){alert("Bitte whle zuerst eine Antwort!");return}const ke=`submitVote_${m}_${E}_${Date.now()}`;let Ce=!1;try{Ce=await jn(async()=>{await eT(s,async we=>{const De=qe(s,"lobbies",O),dt=await we.get(De);if(!dt.exists())throw new Error("Lobby existiert nicht mehr!");const ze=dt.data(),Be=ze?.roundId||0;if(Be!==E)throw ce.warn(" [SUBMIT VOTE] RoundId hat sich gendert whrend Transaction:",{expectedRoundId:E,actualRoundId:Be}),new Error("Runde hat sich gendert!");const It=ze?.votes?.[m],Ot=It?.roundId;if(It&&(Ot!==void 0&&Ot===Be||Ot===void 0&&Be===E))throw ce.warn(" [SUBMIT VOTE] Bereits in dieser Runde abgestimmt (Transaction):",{existingVote:It,currentRoundIdInTransaction:Be,existingVoteRoundId:Ot,currentRoundId:E}),new Error("Du hast bereits abgestimmt!");we.update(De,{[`votes.${m}`]:{choice:String(Ie),strategy:us||"none",roundId:Be,timestamp:Yi()}})})},ke,3,500)}catch(we){if(we?.code==="failed-precondition"||we?.message?.includes("failed-precondition"))try{const De=await fi(qe(s,"lobbies",O));if(!De.exists())throw new Error("Lobby existiert nicht mehr!");const dt=De.data(),ze=dt?.roundId||0;if(ze!==E)throw ce.warn(" [SUBMIT VOTE] RoundId hat sich gendert:",{expectedRoundId:E,actualRoundId:ze}),new Error("Runde hat sich gendert!");const Be=dt?.votes?.[m],It=Be?.roundId;if(Be&&(It!==void 0&&It===ze||It===void 0&&ze===E))throw ce.warn(" [SUBMIT VOTE] Bereits in dieser Runde abgestimmt (Fallback):",{existingVote:Be,currentRoundIdInFallback:ze}),new Error("Du hast bereits abgestimmt!");Ce=await jn(async()=>{await ct(qe(s,"lobbies",O),{[`votes.${m}`]:{choice:String(Ie),strategy:us||"none",roundId:ze,timestamp:Yi()}})},`${ke}_fallback`,3,500)}catch{Ce=!1}else Ce=!1}Ce?(Un(!0),Mn("click",.3)):I?.votes?.[m]?.roundId===E?alert("Du hast bereits abgestimmt!"):alert("Fehler beim Absenden der Antwort! Bitte versuche es erneut.")},[Mn,I,m,Ye,us,s,O]),$a=async()=>{if(!s||!O)return;const M=qe(s,"lobbies",O),J=(I?.ready||[]).includes(m);try{J?(await ct(M,{ready:pc(m)}),ce.log(" [SET READY] Nicht mehr bereit gesetzt")):(await ct(M,{ready:cl(m)}),ce.log(" [SET READY] Bereit gesetzt"))}catch{try{const W=await fi(M);if(!W.exists()){ce.error(" [SET READY] Lobby existiert nicht mehr");return}const Y=(W.data()?.ready||[]).includes(m);Y!==J&&(Y?await ct(M,{ready:pc(m)}):await ct(M,{ready:cl(m)}),ce.log(" [SET READY] Retry erfolgreich"))}catch{}}},ea=X.useCallback(()=>{pe(""),Ae(null),f("start"),sessionStorage.removeItem("hk_room"),R.current=null},[]),Er=X.useMemo(()=>{if(!I?.players)return[];const M=I.host,q=Object.entries(I.players),J=q.find(([E])=>E===M),me=q.filter(([E])=>E!==M);return(J?[J,...me]:me).map(([E,se])=>({name:E,temp:se.temp||0,emoji:se.emoji||""}))},[I?.players,I?.host]),En=X.useCallback(()=>Er,[Er]),un=X.useRef(null),gn=X.useRef(null),Ds=X.useRef(null),Qa=(M,q)=>{if(M&&q){if(es)return;Fs(!0)}},Ft=()=>{Fs(!1)},ir=async()=>{if(Tr(!1),Ut(!1),Di(null),O&&m&&s)try{await jn(async()=>{const M=qe(s,"lobbies",O);((await fi(M)).data()?.popupConfirmed||{})[m]||(ce.log(" [ATTACK MODAL] Markiere Popup als besttigt fr",m),await ct(M,{[`popupConfirmed.${m}`]:!0}),ce.log(" [ATTACK MODAL] Popup erfolgreich als besttigt markiert"))},`confirmPopup_${m}`,3,500)}catch{}},Ms=async()=>{if(!s||!O)return;const M=10,q=qe(s,"lobbies",O),W={...(await fi(q)).data()?.attackDecisions||{},[m]:!0};await ct(q,{[`players.${m}.temp`]:vm(M),log:cl(` ${m} hat falsch geraten und sich selbst aufgeheizt (+${M}C)`),attackDecisions:W}).then(()=>{if(I&&I.players&&I.players[m]){const E=I.players[m].temp||0;Ae({...I,players:{...I.players,[m]:{...I.players[m],temp:E+M}}})}}).catch(E=>{})},wr=async M=>{if(Mn("attack",.6),!s||!O)return;const q=Pi.ATTACK_DMG_PARTY,me=(I?.players?.[m]||{}).inventory?.includes("card_oil"),W=q*(me?2:1);try{await eT(s,async E=>{const se=qe(s,"lobbies",O),Y=await E.get(se);if(!Y.exists())throw new Error("Lobby existiert nicht mehr!");const Ie=Y.data(),ke=Ie?.pendingAttacks||{},Ce=Ie?.attackDecisions||{};if(Ce[m]===!0)throw new Error("Du hast bereits eine Angriffsentscheidung getroffen!");const we=ke[M]||[];we.push({attacker:m,dmg:W,hasOil:me});const De={...ke,[M]:we},dt={...Ce,[m]:!0};E.update(se,{pendingAttacks:De,attackDecisions:dt}),me&&(E.update(se,{[`players.${m}.inventory`]:pc("card_oil")}),ce.log(" [ATTACK] lfass wird verbraucht"))}),ce.log(" [ATTACK] Angriff erfolgreich gesendet (Transaction)"),Un(!0)}catch(E){E.message==="Du hast bereits eine Angriffsentscheidung getroffen!"?(Un(!0),alert("Du hast bereits eine Angriffsentscheidung getroffen!")):alert("Fehler beim Senden des Angriffs: "+E.message)}},bi=async()=>{if(!de)return;const M=`nextRound_${Date.now()}`;if(At.current.set(M,{startTime:Date.now(),attempts:0}),!s||!O)return;const q=await fi(qe(s,"lobbies",O));if(!q.exists())return;const J=q.data();if(J.status==="deleted"||!O)return;const me=J.host===m;if(!me&&!de){const yt=J.config?.maxTemp||100,bt=J.eliminatedPlayers||[],Ue=Object.keys(J.players||{}).filter(Fe=>(J.players?.[Fe]?.temp||0)<yt&&!bt.includes(Fe)),nt=Ue.length,Ze=Ue.filter(Fe=>{const Me=J.votes?.[Fe];if(!Me||Me.choice===void 0)return!1;const ft=Me.roundId;return ft!==void 0&&ft===J.roundId}).length,en=J.ready||[],jt=Ue.filter(Fe=>en.includes(Fe)).length,ot=jt>=nt&&nt>0,Gt=Ze>=nt&&nt>0,Zt=J.popupConfirmed||{},ge=!(J.attackResults&&Object.keys(J.attackResults).length>0)||Ue.every(Fe=>J.attackResults?.[Fe]?Zt[Fe]===!0:!0),Ge=J.roundRecapShown??!1;if(!(ot&&Gt&&ge&&Ge&&J.status==="result")){const Fe=Ue.map(Me=>{const ft=J.votes?.[Me];return{player:Me,hasVote:!!ft,choice:ft?.choice,roundId:ft?.roundId,currentRoundId:J.roundId,isValid:ft?.roundId===J.roundId}});ce.warn(" [NEXT ROUND] Nicht der Host und Failover-Bedingungen nicht erfllt:",{roundId:J.roundId,allReady:ot,allVoted:Gt,allPopupConfirmed:ge,roundRecapShown:Ge,status:J.status,voteCount:Ze,playerCount:nt,readyCount:jt,voteDetails:Fe,readyList:en});return}}else if(!me){ce.warn(" [NEXT ROUND] Host-Check fehlgeschlagen:",{host:J.host,myName:m});return}ce.log(" [NEXT ROUND] Aktuelle Daten:",{roundId:J.roundId,status:J.status,players:Object.keys(J.players||{})});const W=J?.players||{},E=Object.keys(W),se=J?.config?.maxTemp||Pi.MAX_TEMP_DEFAULT,Y=il(W,se);if(ce.log(" [NEXT ROUND] Aktive Spieler:",{allPlayers:E,activePlayers:Y,maxTemp:se,playerTemps:E.map(yt=>({name:yt,temp:J?.players[yt]?.temp||0}))}),Y.length<=1){const yt=Y.length===1?Y[0]:null;ce.log(" [NEXT ROUND] Spielende erkannt:",{activePlayers:Y.length,winner:yt,allPlayers:E.map(bt=>({name:bt,temp:J?.players[bt]?.temp||0}))}),await ct(qe(s,"lobbies",O),{status:"winner"});return}const Ie=J?.hotseat||"",ke=typeof Ie=="string"?Ie:Ie?.name||String(Ie||"");let Ce=Y.indexOf(ke);Ce===-1&&(Ce=0),Ce=(Ce+1)%Y.length;const we=Y[Ce],De=J?.usedQuestions||[],dt=J?.config?.categories||Object.keys(Ri),ze=yc(dt);let Be=De;De.length>0&&typeof De[0]=="number"&&(Be=De.map(yt=>ze[yt]?.id).filter(Boolean));const It=ze.filter(yt=>yt.id&&!Be.includes(yt.id)),Ot=(J?.roundId??0)+1,Xe=It.length>0?Ot%It.length:0,at=It[Xe]||ze[0];ce.log(" [NEXT ROUND] Runden-Details:",{currentHotseat:ke,nextHotseat:we,nextHotseatIndex:Ce,question:at.q,nextRoundId:Ot}),await Wa(J.players),ce.log(" [NEXT ROUND] Bereite nchste Runde vor:",{nextRoundId:Ot,hotseat:we,question:at.q,activePlayers:Y}),ce.log(" [NEXT ROUND] Erstelle updateData Objekt:",{currentRoundId:J?.roundId,nextRoundId:Ot,currentStatus:J?.status,nextHotseat:we,hasRandomQ:!!at,randomQId:at?.id,randomQCategory:at?.category});const fe={status:"game",hotseat:we,currentQ:at,roundId:Ot,lastQuestionCategory:at.category,roundRecapShown:!1,lastHostActivity:Yi()};if(ce.log(" [NEXT ROUND] Basis-updateData erstellt:",{keys:Object.keys(fe),status:fe.status,roundId:fe.roundId,hotseat:fe.hotseat,hasCurrentQ:!!fe.currentQ}),fe.votes=Ai(),fe.ready=[],fe.lobbyReady={},fe.pendingAttacks={},fe.attackDecisions={},fe.attackResults={},fe.popupConfirmed={},ce.log(" [NEXT ROUND] updateData vollstndig erstellt:",{totalKeys:Object.keys(fe).length,hasDeleteFields:fe.votes===Ai(),arrayFields:{ready:Array.isArray(fe.ready),usedQuestions:Array.isArray(fe.usedQuestions)},objectFields:{lobbyReady:typeof fe.lobbyReady=="object",pendingAttacks:typeof fe.pendingAttacks=="object",attackDecisions:typeof fe.attackDecisions=="object",attackResults:typeof fe.attackResults=="object",popupConfirmed:typeof fe.popupConfirmed=="object"}}),at.id&&!Be.includes(at.id)?fe.usedQuestions=[...Be,at.id]:fe.usedQuestions=Be,ce.log(" [NEXT ROUND] Update Firebase mit:",{roomId:O,roundId:fe.roundId,status:fe.status,hotseat:fe.hotseat,currentQ:fe.currentQ?{q:fe.currentQ.q?.substring(0,50),category:fe.currentQ.category}:null,lastQuestionCategory:fe.lastQuestionCategory,roundRecapShown:fe.roundRecapShown,hasLastHostActivity:!!fe.lastHostActivity,votes:"[deleteField]",ready:Array.isArray(fe.ready)?fe.ready:"not array",lobbyReady:fe.lobbyReady?Object.keys(fe.lobbyReady).length:0,pendingAttacks:fe.pendingAttacks?Object.keys(fe.pendingAttacks).length:0,attackDecisions:fe.attackDecisions?Object.keys(fe.attackDecisions).length:0,attackResults:fe.attackResults?Object.keys(fe.attackResults).length:0,popupConfirmed:fe.popupConfirmed?Object.keys(fe.popupConfirmed).length:0,usedQuestions:Array.isArray(fe.usedQuestions)?fe.usedQuestions.length:"not array"}),!O){At.current.delete(M);return}if(ce.log(" [NEXT ROUND] Starte Firebase-Update:",{roomId:O,updateDataKeys:Object.keys(fe),roundId:fe.roundId,status:fe.status,hasDeleteFields:fe.votes===Ai(),updateDataSize:JSON.stringify(fe).length}),await jn(async()=>{if(!O)throw new Error("roomId wurde gelscht");ce.log(" [NEXT ROUND] Versuche updateDoc:",{roomId:O,timestamp:Date.now(),updateData:{status:fe.status,roundId:fe.roundId,hotseat:fe.hotseat,hasVotes:fe.votes!==void 0,readyLength:Array.isArray(fe.ready)?fe.ready.length:"not array",lobbyReadyKeys:fe.lobbyReady?Object.keys(fe.lobbyReady).length:0,pendingAttacksKeys:fe.pendingAttacks?Object.keys(fe.pendingAttacks).length:0,attackDecisionsKeys:fe.attackDecisions?Object.keys(fe.attackDecisions).length:0,attackResultsKeys:fe.attackResults?Object.keys(fe.attackResults).length:0,popupConfirmedKeys:fe.popupConfirmed?Object.keys(fe.popupConfirmed).length:0,usedQuestionsLength:Array.isArray(fe.usedQuestions)?fe.usedQuestions.length:"not array",hasCurrentQ:!!fe.currentQ,lastQuestionCategory:fe.lastQuestionCategory,roundRecapShown:fe.roundRecapShown,hasLastHostActivity:!!fe.lastHostActivity}});const yt=Date.now();await ct(qe(s,"lobbies",O),fe);const bt=Date.now()-yt;ce.log(" [NEXT ROUND] updateDoc erfolgreich:",{duration:bt+"ms",roomId:O,roundId:fe.roundId,timestamp:new Date().toISOString()})},M,3,1e3))At.current.delete(M);else{if(!O){At.current.delete(M);return}setTimeout(async()=>{if(!O||!s){At.current.delete(M);return}try{const yt=await fi(qe(s,"lobbies",O));if(!yt.exists()||yt.data()?.status==="deleted"){ce.warn(" [NEXT ROUND] Lobby existiert nicht mehr, kein Retry"),At.current.delete(M);return}await ct(qe(s,"lobbies",O),fe),Tt.current=Date.now(),At.current.delete(M),ce.log(" [NEXT ROUND] Retry erfolgreich")}catch{At.current.delete(M)}},3e3)}},Ar=async M=>{const q=`executeAttacks_${M?.roundId||Date.now()}`;At.current.set(q,{startTime:Date.now(),attempts:0});const J=M?.config?.maxTemp||100,me=Object.keys(M?.players||{}).filter(ge=>(M.players?.[ge]?.temp||0)<J).sort(),W=M?.host,E=W===m,Y=me.indexOf(m)===0&&me.length>0,Ie=E||Y||de;if(ce.log(" [EXECUTE ATTACKS] Starte executePendingAttacks:",{roundId:M?.roundId,myName:m,hostName:W,isCurrentHost:E,isFirstBackupHost:Y,isHost:de,canExecute:Ie,hasDb:!!s,roomId:O}),!Ie){At.current.delete(q);return}if(!s||!O){At.current.delete(q);return}const ke=await fi(qe(s,"lobbies",O));if(!ke.exists())return;const Ce=ke.data();if(Ce.status==="deleted"||Ce.host!==m||!O)return;const we=ke.data(),De=we.pendingAttacks||{},dt=we.players||{},ze=we.attackDecisions||{},Be=typeof we.hotseat=="string"?we.hotseat:we.hotseat?.name||String(we.hotseat||""),It=we?.config?.maxTemp||100,Ot=we?.eliminatedPlayers||[],Xe=Object.keys(dt).filter(ge=>(dt[ge]?.temp||0)<It&&!Ot.includes(ge)),at=Xe.filter(ge=>{if(ge===Be)return!1;const Ge=we.votes||{},Fe=Ge[Be],Me=Ge[ge];if(Fe&&Me){const ft=String(Fe.choice||"");if(String(Me.choice||"")!==ft)return!1}return!0}),fe=at.every(ge=>ze[ge]===!0),_n=Xe.filter(ge=>{if(ge===Be)return!1;const Ge=we.votes||{},Fe=Ge[Be],Me=Ge[ge];if(Fe&&Me){const ft=String(Fe.choice||"");if(String(Me.choice||"")!==ft)return!0}return!1}),yt=_n.every(ge=>ze[ge]===!0);if(ce.log(" [EXECUTE ATTACKS] Verarbeite Angriffe:",{roundId:we.roundId,pendingAttacks:De,players:Object.keys(dt),playersWhoCanAttack:at,playersWhoCannotAttack:_n,allAttackersDecided:fe,allNonAttackersDecided:yt,attackDecisions:ze}),!fe&&at.length>0){const ge=at.filter(Ge=>!ze[Ge]);ce.warn(" [EXECUTE ATTACKS]  Nicht alle Angreifer haben entschieden, warte noch...",{roundId:we.roundId,playersWhoCanAttack:at,missing:ge,attackDecisions:ze,pendingAttacks:De,allAttackersDecided:fe});return}if(at.length===0&&!yt&&_n.length>0){const ge=_n.filter(Fe=>!ze[Fe]);if(ce.warn(" [EXECUTE ATTACKS]  Nicht alle Nicht-Angreifer haben entschieden, warte noch...",{roundId:we.roundId,playersWhoCannotAttack:_n,missing:ge,attackDecisions:ze,allNonAttackersDecided:yt,totalPlayers:Xe.length,hotseatName:Be}),Xe.length===_n.length+1){await ct(qe(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}return}if(at.length===0&&yt){await ct(qe(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}if(at.length===0&&_n.length===0){await ct(qe(s,"lobbies",O),{roundRecapShown:!0,attackResults:{}});return}ce.log(" [EXECUTE ATTACKS]  Alle Entscheidungen getroffen, verarbeite Angriffe...",{roundId:we.roundId,playersWhoCanAttack:at,playersWhoCannotAttack:_n,allAttackersDecided:fe,allNonAttackersDecided:yt,pendingAttacks:De});const bt={},Ue={},nt=[];for(const[ge,Ge]of Object.entries(De)){if(!dt[ge]||!Array.isArray(Ge)||Ge.length===0)continue;const Me=dt[ge].inventory?.includes("card_mirror");let ft=0;const pn=[];if(Ge.forEach(Ct=>{ft+=Ct.dmg||0,pn.push(Ct.attacker),Ct.hasOil?nt.push(` ${Ct.attacker} greift ${ge} mit dem lfass an (+${Ct.dmg}C)`):nt.push(` ${Ct.attacker} greift ${ge} an (+${Ct.dmg}C)`)}),Me){await ct(qe(s,"lobbies",O),{[`players.${ge}.inventory`]:pc("card_mirror")}),Ge.forEach(mt=>{bt[`players.${mt.attacker}.temp`]||(bt[`players.${mt.attacker}.temp`]=0),bt[`players.${mt.attacker}.temp`]+=mt.dmg||0});const Ct=pn.join(" und ");nt.push(` ${ge} spiegelt die Angriffe von ${Ct} zurck! (+${ft}C)`),Ue[ge]={attackers:pn,totalDmg:0,attackDetails:Ge.map(mt=>({attacker:mt.attacker,dmg:mt.dmg||0,mirrored:!0}))}}else bt[`players.${ge}.temp`]||(bt[`players.${ge}.temp`]=0),bt[`players.${ge}.temp`]+=ft,Ue[ge]={attackers:[...pn],totalDmg:ft,attackDetails:Ge.map(Ct=>({attacker:Ct.attacker,dmg:Ct.dmg||0}))}}const Ze=we.votes||{},en=typeof we.hotseat=="string"?we.hotseat:we.hotseat?.name||String(we.hotseat||""),jt=Ze?.[en]?.choice,ot=Object.keys(dt);ot.forEach(ge=>{if(ge===en)return;const Ge=Ze[ge],Fe=String(Ge?.choice||""),Me=String(jt||"");if(Ge&&Fe!==Me){let ft=Pi.PENALTY_DMG;ft=0,ft>0&&(bt[`players.${ge}.temp`]||(bt[`players.${ge}.temp`]=0),bt[`players.${ge}.temp`]+=ft),Ue[ge]||(Ue[ge]={attackers:[],totalDmg:0,attackDetails:[]});const pn=10;Ue[ge].totalDmg+=pn,Ue[ge].attackDetails.push({attacker:"Strafhitze",dmg:pn,isPenalty:!0})}}),ot.forEach(ge=>{Ue[ge]||(Ue[ge]={attackers:[],totalDmg:0,attackDetails:[]})});const Gt={pendingAttacks:{},attackResults:Ue,roundRecapShown:!0,lastHostActivity:Yi()};if(nt.length>0){const Fe=[...we.log||[],...nt].slice(-50);Gt.log=Fe}for(const[ge,Ge]of Object.entries(bt)){const Fe=ge.split(".");if(Fe.length===3&&Fe[0]==="players"&&Fe[2]==="temp"){const Me=Fe[1];Gt[`players.${Me}.temp`]=vm(Ge)}}await jn(async()=>{await ct(qe(s,"lobbies",O),Gt)},q,3,1e3)?At.current.delete(q):setTimeout(async()=>{try{await ct(qe(s,"lobbies",O),Gt),Tt.current=Date.now(),At.current.delete(q),ce.log(" [EXECUTE ATTACKS] Retry erfolgreich")}catch{}},3e3);const St=await fi(qe(s,"lobbies",O));if(St.exists()){const ge=St.data(),Ge=ge.players||{},Fe=ge.config?.maxTemp||100,Me=Object.keys(Ge).filter(mt=>(Ge[mt]?.temp||0)<Fe),ft=Object.keys(Ge).filter(mt=>(Ge[mt]?.temp||0)>=Fe),pn=we.players||{},Ct=ft.filter(mt=>{const ii=pn[mt]?.temp||0,si=Ge[mt]?.temp||0;return ii<Fe&&si>=Fe});if(ce.log(" [WINNER CHECK] Prfe auf Gewinner nach Angriffen:",{roundId:ge.roundId,allPlayers:Object.keys(Ge),activePlayers:Me,newlyEliminated:ft,justEliminated:Ct,playerTemps:Object.keys(Ge).map(mt=>({name:mt,temp:Ge[mt]?.temp||0,beforeTemp:pn[mt]?.temp||0,isEliminated:(Ge[mt]?.temp||0)>=Fe})),maxTemp:Fe}),Ct.length>0){const mt=Ct[0],ii=ge.eliminatedPlayers||[],si=ii.includes(mt)?ii:[...ii,mt],ui={eliminationInfo:{player:mt,roundId:ge.roundId,timestamp:Date.now()},eliminatedPlayers:si,[`lobbyReady.${mt}`]:Ai()},hi=ge.host;if(mt===hi){const wn=Me.filter(Ki=>Ki!==mt);if(wn.length>0){const Ki=wn[0];ui.host=Ki}}await ct(qe(s,"lobbies",O),ui)}Me.length===1?(Me[0],await ct(qe(s,"lobbies",O),{status:"winner"})):Me.length===0&&await ct(qe(s,"lobbies",O),{status:"winner"})}},Wa=async M=>{if(!de||!M||!s||!O)return;const q=I?.config?.dmg||10,J=qe(s,"lobbies",O);for(const me of Object.keys(M))if(M[me].inventory?.includes("card_ice")){const W=Math.min(q,M[me].temp||0);W>0&&await ct(J,{[`players.${me}.temp`]:vm(-W),[`players.${me}.inventory`]:pc("card_ice"),log:cl(` ${me} khlt sich ab (-${W}C)`)})}},Ya=async()=>{!de||!s||!O||window.confirm("Mchtest du wirklich zur nchsten Runde springen?")&&(await bi(),Yt(!1))},sr=async()=>{if(!de||!s||!O||!window.confirm("Mchtest du das Spiel wirklich neustarten? Alle Temperaturen werden zurckgesetzt."))return;const M={};Object.keys(I?.players||{}).forEach(q=>{M[q]={temp:0,inventory:[],emoji:I?.players[q]?.emoji||""}}),await ct(qe(s,"lobbies",O),{status:"lobby",players:M,votes:Ai(),ready:[],log:[],hotseat:"",roundId:0,lobbyReady:{},usedQuestions:[],pendingAttacks:Ai(),attackResults:Ai(),popupConfirmed:Ai(),eliminatedPlayers:[]}),Yt(!1)},Ro=async()=>{if(!(!de||!s||!O)&&window.confirm("Lobby wirklich lschen? Alle Spieler werden ausgeworfen und die Lobby ist danach nicht mehr verfgbar!"))try{const M=qe(s,"lobbies",O);await ct(M,{status:"deleted",deletedAt:Yi()}).catch(q=>{ce.warn(" [KILL LOBBY] Konnte Status nicht setzen, lsche direkt:",q)}),await new Promise(q=>setTimeout(q,500)),await kc(M),ce.log(" [KILL LOBBY] Lobby gelscht:",O),Yt(!1),ea()}catch(M){alert(`Fehler beim Lschen der Lobby: ${M.message}`)}},rr=async()=>{if(!s){alert("Fehler: Firebase ist nicht verfgbar.");return}if(window.confirm(" WARNUNG: Alle offenen Lobbies werden gelscht! Dies kann nicht rckgngig gemacht werden. Fortfahren?")&&window.confirm("Bist du wirklich sicher? Alle Spieler werden ausgeworfen!"))try{ce.log(" [ADMIN] Starte Lschung aller Lobbies...");const M=Km(s,"lobbies"),q=Qm(M,Wm("status","in",["lobby","game","result"])),J=await Ym(q);let me=0,W=0;for(const E of J.docs)try{const se=E.data();await ct(E.ref,{status:"deleted",deletedAt:Yi()}).catch(()=>{}),await kc(E.ref),me++,ce.log(` [ADMIN] Lobby gelscht: ${E.id} (Host: ${se.hostName||se.host})`)}catch(se){W++,ce.error(` [ADMIN] Fehler beim Lschen von ${E.id}:`,se)}alert(` ${me} Lobby(s) gelscht.${W>0?`
 ${W} Fehler aufgetreten.`:""}`),ce.log(` [ADMIN] Lschung abgeschlossen: ${me} gelscht, ${W} Fehler`)}catch(M){alert(`Fehler beim Lschen: ${M.message}`)}},Oi=async()=>{if(!I||!s||!O)return;if(I.host!==m){alert("Nur der Host kann eine Revanche starten.");return}if(!window.confirm("Mchtest du eine Revanche starten? Alle Temperaturen werden zurckgesetzt."))return;const M={};Object.keys(I.players||{}).forEach(q=>{M[q]={temp:0,inventory:[],emoji:I.players[q]?.emoji||""}}),await ct(qe(s,"lobbies",O),{status:"lobby",players:M,votes:Ai(),ready:[],log:cl(" Revanche gestartet! Alle Temperaturen wurden zurckgesetzt."),hotseat:"",roundId:(I.roundId??0)+1,lobbyReady:{},usedQuestions:[],pendingAttacks:Ai(),attackResults:Ai(),popupConfirmed:Ai(),eliminatedPlayers:[]}),alert("Revanche gestartet! Alle zurck in die Lobby.")};return p.jsxs("div",{className:"App",children:[c!=="landing"&&p.jsx("div",{className:"menu-btn",onClick:()=>Yt(!Cs),children:""}),c==="create"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("start"),children:""}),c==="questionGeneratorCategories"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("start"),children:""}),c==="questionGenerator"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>f("questionGeneratorCategories"),children:""}),c!=="landing"&&c!=="create"&&c!=="questionGeneratorCategories"&&c!=="questionGenerator"&&p.jsx("div",{className:`menu-btn help-btn ${k.helpButtonLeft}`,onClick:()=>In(!0),children:"?"}),Cs&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"overlay open",onClick:()=>{Yt(!1),Vn("main")}}),p.jsxs("div",{className:k.menuModal,children:[li==="main"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Men"}),p.jsx("button",{onClick:()=>{Yt(!1),Vn("main")},className:k.menuCloseButton,children:""})]}),p.jsx("button",{onClick:()=>Vn("settings"),className:k.menuButton,children:" Einstellungen"}),p.jsx("button",{onClick:()=>Vn("volume"),className:k.menuButton,children:" Lautstrke"}),p.jsx("button",{onClick:()=>Vn("log"),className:k.menuButton,children:" Spielverlauf"}),p.jsx("div",{className:k.spacer}),p.jsx("button",{onClick:ea,className:k.leaveButton,children:" Spiel verlassen"})]}),li==="settings"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Einstellungen"}),p.jsx("button",{onClick:()=>Vn("main"),className:k.menuBackButton,children:""})]}),de&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:Ya,className:`${k.settingsButton} ${k.settingsButtonGray}`,children:" Runde erzwingen"}),p.jsx("button",{onClick:sr,className:`${k.settingsButton} ${k.settingsButtonRed}`,children:" Spiel neustarten"}),p.jsx("button",{onClick:Ro,className:`${k.settingsButton} ${k.settingsButtonDarkRed}`,children:" Lobby lschen"})]}),p.jsxs("div",{className:k.menuSection,children:[p.jsx("h4",{className:k.menuSectionTitle,children:" Admin-Funktionen"}),p.jsx("button",{onClick:rr,className:`${k.settingsButton} ${k.settingsButtonDanger}`,children:" Alle Lobbies lschen (Test)"})]}),p.jsxs("button",{onClick:Gi,className:`${k.settingsButton} ${k.settingsButtonMusic} ${yn?k.settingsButtonMusicEnabled:k.settingsButtonMusicDisabled}`,children:[yn?"":""," Hintergrundmusik ",yn?"an":"aus"]})]}),li==="volume"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Lautstrke"}),p.jsx("button",{onClick:()=>Vn("main"),className:k.menuBackButton,children:""})]}),p.jsxs("div",{className:k.volumeSliderContainer,children:[p.jsx("h4",{className:k.volumeTitle,children:"Hintergrundmusik"}),p.jsxs("div",{className:k.volumeSliderWrapper,children:[p.jsx("span",{className:k.volumeIcon,children:""}),p.jsx("input",{type:"range",min:"0",max:"10",value:ks,onChange:M=>Sn(parseInt(M.target.value)),className:k.volumeSliderInput}),p.jsx("span",{className:k.volumeIcon,children:""})]})]}),p.jsxs("div",{className:k.volumeSliderContainer,children:[p.jsx("h4",{className:k.volumeTitle,children:"Soundeffekte"}),p.jsxs("div",{className:k.volumeSliderWrapper,children:[p.jsx("span",{className:k.volumeIcon,children:""}),p.jsx("input",{type:"range",min:"0",max:"10",value:fs,onChange:M=>xn(parseInt(M.target.value)),className:k.volumeSliderInput}),p.jsx("span",{className:k.volumeIcon,children:""})]})]})]}),li==="log"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:k.menuHeader,children:[p.jsx("h3",{className:k.menuTitle,children:" Spielverlauf"}),p.jsx("button",{onClick:()=>Vn("main"),className:k.menuBackButton,children:""})]}),p.jsx("div",{className:k.menuLogContainer,children:I?.log&&I.log.length>0?I.log.slice(-20).map((M,q)=>p.jsx("div",{className:k.menuLogEntry,children:M},q)):p.jsx("div",{className:k.menuLogEmpty,children:"Keine Eintrge"})})]})]})]}),c!=="landing"&&p.jsx("div",{className:k.logoContainer,children:p.jsx("img",{src:Ab,alt:"Hitzkopf Logo",className:k.logoHorizontal})}),c==="landing"&&p.jsxs("div",{className:k.landingContainer,children:[r&&p.jsx("button",{onClick:r,className:k.backToProjectsButton,title:"Zurck zur Projektauswahl",children:" Zurck"}),p.jsx("div",{className:k.landingLogoContainer,children:p.jsx("img",{src:kM,alt:"Hitzkopf Logo",className:k.landingLogo})}),p.jsx("button",{onClick:()=>f("start"),className:k.landingButton,children:"SPIELEN"})]}),c==="start"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("input",{id:"playerName",name:"playerName",type:"text",value:m,onChange:Pe,placeholder:"Dein Name",maxLength:20,autoComplete:"name"}),p.jsx("div",{className:`emoji-gallery-wrapper ${k.emojiGalleryWrapper}`,children:p.jsxs("div",{ref:ci,id:"emojiGallery",className:k.emojiGallery,children:[p.jsx("div",{className:`emoji-spacer ${k.emojiSpacer}`}),Ur.map((M,q)=>{const J=q===ts;return p.jsx("div",{className:`emoji-card ${J?"selected":""}`,onClick:me=>{Z.current||Te(M)},onTouchStart:me=>{_e.current={x:me.touches[0].clientX,y:me.touches[0].clientY,time:Date.now()}},onTouchMove:me=>{if(_e.current.x!==0){const W=Math.abs(me.touches[0].clientX-_e.current.x),E=Math.abs(me.touches[0].clientY-_e.current.y);(W>10||E>10)&&(Z.current=!0)}},onTouchEnd:me=>{const W=Math.abs(me.changedTouches[0].clientX-_e.current.x),E=Math.abs(me.changedTouches[0].clientY-_e.current.y),se=Date.now()-_e.current.time;!(W>10||E>10)&&se<300&&!Z.current&&(me.preventDefault(),me.stopPropagation(),Te(M)),setTimeout(()=>{Z.current=!1,_e.current={x:0,y:0,time:0}},100)},"data-emoji":M,"data-index":q,children:M},`${M}-${q}`)}),p.jsx("div",{className:`emoji-spacer ${k.emojiSpacer}`})]})}),p.jsxs("div",{className:"start-actions",children:[p.jsx("button",{className:"btn-secondary",onClick:()=>f("create"),disabled:!m.trim(),children:" Spiel erstellen"}),p.jsx("button",{className:"btn-secondary",onClick:()=>{f("join"),nr()},disabled:!m.trim(),children:" Spiel beitreten"})]})]}),c==="start"&&p.jsx("button",{className:k.fullWidthButton,onClick:()=>f("questionGeneratorCategories"),style:{opacity:1},children:" Fragengenerator"}),c==="create"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("label",{className:k.labelWithMargin,children:"Whle Fragenkategorien:"}),p.jsxs("div",{className:k.grid3Cols,children:[p.jsxs("div",{className:`category-card ${C.length===Object.keys(Ri).length?"selected":""}`,onClick:()=>We("all"),children:[p.jsx("div",{className:"category-emoji",children:""}),p.jsx("div",{className:"category-name",children:"Alle"})]}),Object.entries(Ri).map(([M,q])=>p.jsxs("div",{className:`category-card ${C.includes(M)?"selected":""}`,onClick:()=>We(M),children:[p.jsx("div",{className:"category-emoji",children:q.emoji}),p.jsx("div",{className:"category-name",children:q.name.split(" ")[0]})]},M))]}),p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:Fn,disabled:!m.trim()||C.length===0,children:" Spiel erstellen"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="questionGeneratorCategories"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("label",{className:k.labelWithMargin,children:"Whle Fragenkategorien:"}),p.jsxs("div",{className:k.grid3Cols,children:[p.jsxs("div",{className:`category-card ${C.length===Object.keys(Ri).length?"selected":""}`,onClick:()=>We("all"),children:[p.jsx("div",{className:"category-emoji",children:""}),p.jsx("div",{className:"category-name",children:"Alle"})]}),Object.entries(Ri).map(([M,q])=>p.jsxs("div",{className:`category-card ${C.includes(M)?"selected":""}`,onClick:()=>We(M),children:[p.jsx("div",{className:"category-emoji",children:q.emoji}),p.jsx("div",{className:"category-name",children:q.name.split(" ")[0]})]},M))]}),p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:()=>{if(C.length===0){alert("Bitte whle mindestens eine Kategorie aus!");return}const M=yc().filter(J=>C.includes(J.category));if(M.length===0){alert("Keine Fragen in den ausgewhlten Kategorien gefunden!");return}const q=[...M];for(let J=q.length-1;J>0;J--){const me=Math.floor(Math.random()*(J+1));[q[J],q[me]]=[q[me],q[J]]}st(q),dn(0),Ee(q[0]),f("questionGenerator")},disabled:C.length===0,children:" Fragen generieren"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="questionGenerator"&&ye&&p.jsxs("div",{className:"screen active card",children:[ye.category&&p.jsxs("div",{className:k.gameCategory,style:{marginBottom:"20px"},children:[Ri[ye.category]?.emoji," ",Ri[ye.category]?.name]}),p.jsx("h3",{className:k.gameQuestion,children:ye.q||"Lade Frage..."}),p.jsxs("div",{className:"option-row",children:[p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["a) ",ye.a||"A"]}),p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["b) ",ye.b||"B"]})]}),(ye.c||ye.d)&&p.jsxs("div",{className:"option-row",children:[ye.c&&p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["c) ",ye.c]}),ye.d&&p.jsxs("div",{className:"btn-option",style:{cursor:"default",opacity:.9,pointerEvents:"none"},children:["d) ",ye.d]})]}),p.jsx("button",{className:`btn-primary ${k.submitButtonMargin}`,onClick:Rt,style:{background:"linear-gradient(135deg, #ff8c00 0%, #ff6b00 100%)",marginTop:"30px"},children:" Nchste Frage"}),p.jsx("button",{onClick:Cn,className:`btn-secondary ${k.backButton}`,disabled:ht===0,children:" Vorherige Frage"})]}),c==="join"&&p.jsxs("div",{className:"screen active card",children:[p.jsx("h3",{className:k.joinScreenTitle,children:" Spiel beitreten"}),p.jsx("button",{className:`btn-secondary ${k.refreshButton}`,onClick:nr,children:" Rume aktualisieren"}),P.length>0?p.jsx("div",{className:k.grid2Cols,children:P.map(M=>p.jsxs("div",{className:`category-card ${ve===M.id?"selected":""} ${k.roomCard}`,onClick:()=>Sr(M.id,M.hasPassword),children:[p.jsx("div",{className:`category-emoji ${k.categoryEmojiLarge}`,children:M.hostEmoji||""}),p.jsxs("div",{className:`category-name ${k.categoryNameLarge}`,children:["Spiel von ",M.hostName]})]},M.id))}):p.jsx("p",{className:k.noRoomsText,children:"Keine Rume verfgbar"}),ve&&p.jsx("button",{className:"btn-secondary",onClick:()=>Xt(ve),disabled:!m.trim()||!ve,children:" Beitreten"}),p.jsx("button",{onClick:()=>f("start"),className:`btn-secondary ${k.backButton}`,children:" Zurck"})]}),c==="lobby"&&I&&(()=>{const M=En(),q=M.find(se=>se.name===m),J=M.filter(se=>se.name!==m),me=I.lobbyReady?.[m]===!0,W=I.config?.maxTemp||100,E=(q?.temp||0)>=W;return p.jsxs("div",{className:"screen active card",children:[p.jsxs("h3",{className:k.lobbyTitle,children:[" Spiel von ",I.hostName||I.host||"Unbekannt"]}),q&&p.jsxs("div",{onClick:xi,className:`${k.myPlayerCard} ${E?k.eliminated:me?k.ready:k.notReady}`,children:[p.jsx("div",{className:k.myPlayerEmoji,children:q.emoji}),p.jsxs("div",{className:k.myPlayerInfo,children:[p.jsxs("div",{className:k.myPlayerName,children:[q.name," (Du)",I.host===q.name&&p.jsx("span",{className:k.crownIcon,children:""})]}),p.jsxs("div",{className:k.readyToggle,children:[p.jsx("span",{className:k.readyLabel,children:"Bereit"}),p.jsx("div",{onClick:se=>{se.stopPropagation(),xi()},className:`${k.toggleSwitch} ${me?k.ready:k.notReady}`,children:p.jsx("div",{className:`${k.toggleThumb} ${me?k.ready:k.notReady}`,children:me?p.jsx("span",{className:k.toggleCheck,children:""}):p.jsx("span",{className:k.toggleCross,children:""})})})]})]})]}),J.length>0&&p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginTop:"20px"},children:J.map(se=>{const Y=I.lobbyReady?.[se.name]===!0,Ie=(se.temp||0)>=W;return p.jsxs("div",{style:{padding:"16px",background:"rgba(22, 27, 34, 0.6)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",opacity:Ie?.5:Y?1:.4,transition:"opacity 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",cursor:"default"},children:[p.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"4px"},children:se.emoji}),p.jsxs("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#fff",textAlign:"center",display:"flex",alignItems:"center",gap:"6px"},children:[se.name,I.host===se.name&&p.jsx("span",{style:{fontSize:"1.2rem"},children:""})]}),p.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",background:Y?"#22c55e":"#d1d5db",cursor:"default",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",padding:"2px",opacity:.8,marginTop:"4px"},children:p.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"12px",background:"#fff",transition:"transform 0.3s ease",transform:Y?"translateX(22px)":"translateX(0)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:Y?p.jsx("span",{style:{color:"#22c55e",fontSize:"14px",fontWeight:"bold"},children:""}):p.jsx("span",{style:{color:"#9ca3af",fontSize:"12px",fontWeight:"bold"},children:""})})})]},se.name)})}),de&&p.jsx("button",{className:`btn-primary ${k.buttonMarginTop}`,onClick:Ns,disabled:(()=>{const se=I.config?.maxTemp||100,Y=En().filter(ke=>(ke.temp||0)<se);return Y.filter(ke=>I.lobbyReady?.[ke.name]===!0).length<Y.length||Y.length<2})(),children:" Spiel starten"}),!de&&(()=>{const se=I.config?.maxTemp||100,Y=En().filter(Ce=>(Ce.temp||0)<se),ke=Y.filter(Ce=>I.lobbyReady?.[Ce.name]===!0).length>=Y.length&&Y.length>=2;return p.jsx("p",{className:k.waitText,children:ke?" Warten bis der Host das Spiel startet":" Warten bis alle bereit sind"})})()]})})(),c==="game"&&I&&(()=>{const M=I.hotseat,q=I.config?.maxTemp||100,J=I.players?.[m]?.temp||0,me=J>=q;return me?p.jsxs("div",{className:"screen active card",children:[p.jsx("h3",{className:k.eliminatedTitle,children:" Du bist ausgeschieden!"}),p.jsxs("div",{className:k.eliminatedInfoBox,children:[p.jsxs("p",{className:k.eliminatedText,children:["Du hast ",J,"C erreicht und bist ausgeschieden."]}),p.jsx("p",{className:k.eliminatedSubtext,children:"Du kannst dem Spiel als Zuschauer folgen."})]}),p.jsx("div",{className:"thermo-grid",style:{display:"none"},children:En().map(W=>{const E=Math.min(W.temp/q*100,100),se=W.name===M,Y=!!I.votes?.[W.name];return p.jsxs("div",{className:`thermo-item ${se?"is-hotseat":""} ${Y?k.thermoItemAnswered:k.thermoItemNotAnswered}`,children:[p.jsxs("div",{className:k.thermoTop,children:[p.jsxs("span",{className:k.thermoTopLeft,children:[se&&p.jsx("span",{children:""}),p.jsxs("span",{children:[W.emoji," ",W.name,W.name===m?" (Du)":""]})]}),p.jsxs("span",{className:`${k.thermoTemp} ${E>=100?k.thermoTempMax:""}`,children:[W.temp,"C"]})]}),p.jsx("div",{className:k.thermoBar,children:p.jsx("div",{className:k.thermoFill,style:{width:`${E}%`,height:"100%",background:E>=100?"linear-gradient(90deg, #ff0000, #ff4500)":E>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":E>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":E>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out"}})})]},W.name)})}),p.jsxs("div",{className:k.currentQuestionBox,children:[p.jsx("h4",{className:k.currentQuestionTitle,children:"Aktuelle Frage:"}),p.jsx("p",{className:k.currentQuestionText,children:I.currentQ?.q||"Lade Frage..."})]})]}):p.jsxs("div",{className:"screen active card",children:[p.jsx("div",{className:"thermo-grid",style:{display:"none"},children:En().map(W=>{const E=Math.min(W.temp/q*100,100),se=W.name===M,Y=!!I.votes?.[W.name];return p.jsxs("div",{className:`thermo-item ${se?"is-hotseat":""}`,style:{border:Y?"2px solid #22c55e":"1px solid #333",borderRadius:"10px",padding:"12px",background:Y?"rgba(34, 197, 94, 0.2)":"rgba(22, 27, 34, 0.6)",opacity:Y?1:.5,transition:"opacity 0.3s ease"},children:[p.jsxs("div",{className:"thermo-top",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[se&&p.jsx("span",{children:""}),p.jsxs("span",{children:[W.emoji," ",W.name]})]}),p.jsxs("span",{style:{fontWeight:"bold",color:E>=100?"#ff0000":"#fff"},children:[W.temp,"C"]})]}),p.jsx("div",{className:"thermo-bar",style:{width:"100%",height:"20px",background:"#333",borderRadius:"10px",overflow:"hidden",position:"relative"},children:p.jsx("div",{className:"thermo-fill",style:{width:`${E}%`,height:"100%",background:E>=100?"linear-gradient(90deg, #ff0000, #ff4500)":E>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":E>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":E>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out",boxShadow:E>=100?"0 0 10px rgba(255, 0, 0, 0.5)":"none"}})})]},W.name)})}),(()=>{const W=typeof M=="string"?M:M?.name||String(M||""),E=m===W,se=W?En().find(ke=>ke.name===W):null,Y=se?.name||W||"Hotseat",Ie=se?.emoji||"";return p.jsx("div",{style:{marginBottom:"15px",padding:"10px 15px",background:"rgba(22, 27, 34, 0.6)",border:"1px solid #333",borderRadius:"10px",textAlign:"center"},children:p.jsx("p",{style:{margin:0,color:"#aaa",fontSize:"0.95rem",fontWeight:E?"bold":"normal"},children:E?p.jsxs(p.Fragment,{children:[" Du bist gefragt! ",p.jsx("br",{}),"Antworte ehrlich - die anderen versuchen deine Wahl zu erraten."]}):p.jsxs(p.Fragment,{children:["Rate, was ",Ie," ",p.jsx("strong",{children:Y})," gewhlt hat."]})})})})(),p.jsx("h3",{className:k.gameQuestion,children:I.currentQ?.q||"Lade Frage..."}),I.currentQ?.category&&p.jsxs("div",{className:k.gameCategory,children:[Ri[I.currentQ.category]?.emoji," ",Ri[I.currentQ.category]?.name]}),I.votes?.[m]?p.jsxs("div",{className:k.voteSubmitted,children:[p.jsx("p",{className:k.voteSubmittedTitle,children:" Antwort abgesendet!"}),p.jsx("p",{className:k.voteSubmittedText,children:"Warte auf andere Spieler..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"option-row",children:[p.jsx("button",{className:`btn-option ${Ye==="A"?"selected":""}`,onClick:()=>Jr("A"),disabled:me,children:I.currentQ?.a||"A"}),p.jsx("button",{className:`btn-option ${Ye==="B"?"selected":""}`,onClick:()=>Jr("B"),disabled:me,children:I.currentQ?.b||"B"})]}),p.jsx("button",{className:`btn-primary ${k.submitButtonMargin}`,onClick:Ka,disabled:!Ye||me,children:" Antwort absenden"})]}),de&&p.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:p.jsx("button",{className:"btn-text",style:{fontSize:"0.8em",color:"#ff4d4d",opacity:.8},onClick:async()=>{confirm("Wirklich zur Auswertung springen? Dies sollte nur genutzt werden, wenn das Spiel hngt.")&&await ct(qe(s,"lobbies",O),{status:"result",lastHostActivity:Yi()})},children:" Hngt? Weiter zur Auswertung"})})]})})(),c==="result"&&I&&(()=>{I.hotseat;const M=I.roundRecapShown??!1,q=I.config?.maxTemp||100,J=Object.keys(I.players||{}).filter(se=>(I.players?.[se]?.temp||0)<q),me=I.popupConfirmed||{};!(I.attackResults&&Object.keys(I.attackResults).length>0)||J.every(se=>I.attackResults?.[se]?me[se]===!0:!0);const E=M;return p.jsxs("div",{className:"screen active card",children:[E&&p.jsx("h3",{className:k.resultTitle,children:" Zwischenergebnis"}),p.jsx("div",{className:"thermo-grid",style:{display:E?"grid":"none"},children:En().sort((se,Y)=>Y.temp-se.temp).map(se=>{const Y=I.config?.maxTemp||100,Ie=Math.min(se.temp/Y*100,100);return p.jsxs("div",{className:`thermo-item ${k.resultThermoItem}`,children:[p.jsxs("div",{className:k.thermoTop,children:[p.jsxs("span",{children:[se.emoji," ",se.name,se.name===m?" (Du)":""]}),p.jsxs("span",{className:`${k.thermoTemp} ${Ie>=100?k.thermoTempMax:""}`,children:[se.temp,"C"]})]}),p.jsx("div",{className:k.thermoBar,children:p.jsx("div",{className:k.thermoFill,style:{width:`${Ie}%`,height:"100%",background:Ie>=100?"linear-gradient(90deg, #ff0000, #ff4500)":Ie>=75?"linear-gradient(90deg, #ff8c00, #ff4500, #ff0000)":Ie>=50?"linear-gradient(90deg, #ffae00, #ff8c00, #ff4500)":Ie>=25?"linear-gradient(90deg, #4a9eff, #ffae00, #ff8c00)":"linear-gradient(90deg, #4a9eff, #0066cc)",transition:"width 0.5s ease-out"}})})]},se.name)})}),!E&&(()=>{const se=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Y=I.votes?.[se]?.choice,Ie=I.votes?.[m],ke=!0,Ce=m===se;if(Ce){const we=En().filter(ze=>ze.name!==se),De=we.filter(ze=>{const Be=I.votes?.[ze.name];return Be&&String(Be.choice)===String(Y)}).sort((ze,Be)=>ze.name.localeCompare(Be.name)),dt=we.filter(ze=>{const Be=I.votes?.[ze.name];return!Be||String(Be.choice)!==String(Y)}).sort((ze,Be)=>ze.name.localeCompare(Be.name));return p.jsxs("div",{className:k.hotseatWaitContainer,children:[p.jsxs("div",{className:k.hotseatWaitBox,children:[p.jsx("p",{className:k.hotseatWaitTitle,children:" Warte bis alle Spieler ihre Hitze verteilt haben"}),p.jsx("p",{className:k.hotseatWaitSubtitle,children:"Die anderen Spieler greifen gerade an..."})]}),p.jsxs("div",{className:k.guessOverviewContainer,children:[De.length>0&&p.jsxs("div",{className:k.guessOverviewSection,children:[p.jsx("h4",{className:k.guessOverviewTitle,style:{color:"#22c55e"},children:" Richtig geraten:"}),p.jsx("div",{className:k.guessOverviewList,children:De.map(ze=>p.jsx("div",{className:k.guessOverviewItem,style:{background:"rgba(34, 197, 94, 0.2)",border:"1px solid #22c55e"},children:p.jsxs("span",{children:[ze.emoji," ",ze.name]})},ze.name))})]}),dt.length>0&&p.jsxs("div",{className:k.guessOverviewSection,children:[p.jsx("h4",{className:k.guessOverviewTitle,style:{color:"#ef4444"},children:" Falsch geraten:"}),p.jsx("div",{className:k.guessOverviewList,children:dt.map(ze=>p.jsx("div",{className:k.guessOverviewItem,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid #ef4444"},children:p.jsxs("span",{children:[ze.emoji," ",ze.name]})},ze.name))})]})]})]})}else if(Ie&&Y!==void 0&&Y!==null&&String(Ie.choice)===String(Y)){const we=I.attackDecisions||{},De=we[m]===!0,dt=!De&&ke;return ce.log(" [ATTACK SELECTION] Richtig geraten - Prfe Angriffsauswahl:",{roundId:I.roundId,myName:m,isPartyMode:ke,localActionDone:ni,attackDecisions:we,myAttackDecision:we[m],hasAttackDecision:De,showRewardChoice:Rs,showAttackSelection:pi,showJokerShop:Ni,isHotseat:Ce,shouldShowAttackSelection:dt,shouldShowReward:!De&&!ke}),dt?p.jsxs("div",{className:k.correctGuessContainer,children:[p.jsx("p",{className:k.correctGuessTitle,children:" RICHTIG GERATEN!"}),p.jsx("p",{className:k.correctGuessSubtitle,children:"Zur Belohnung darfst du einen Spieler aufheizen"}),p.jsxs("div",{className:k.attackSelectionWrapper,children:[p.jsxs("div",{className:k.attackSelectionHeader,children:[p.jsx("span",{className:k.attackSelectionHeaderIcon,children:""}),p.jsx("span",{children:"Wen aufheizen?"})]}),p.jsx("div",{className:k.attackSelectionGrid,children:(()=>{typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");const ze=I?.config?.maxTemp||100,Be=En();Be.filter(Xe=>(I?.players?.[Xe.name]?.temp||0)<ze).length;const Ot=Be.filter(Xe=>!(Xe.name===m||(I?.players?.[Xe.name]?.temp||0)>=ze));return Ot.length===0?p.jsx("div",{className:k.attackNoPlayersLarge,children:"Keine Spieler zum Angreifen verfgbar"},"no-players"):Ot.map(Xe=>{const yt=20*((I.players?.[m]||{}).inventory?.includes("card_oil")?2:1);return p.jsxs("div",{onClick:()=>wr(Xe.name),className:k.attackPlayerCardLarge,children:[p.jsx("div",{className:k.attackPlayerEmojiLarge,children:Xe.emoji}),p.jsx("div",{className:k.attackPlayerNameLarge,children:Xe.name}),p.jsxs("div",{className:k.attackPlayerDmgLarge,children:["+",yt,""]})]},Xe.name)})})()})]})]}):p.jsxs("div",{className:k.rewardDecisionMade,children:[p.jsx("p",{className:k.rewardDecisionTitle,children:" RICHTIG GERATEN!"}),p.jsx("p",{className:k.rewardDecisionText,children:"Entscheidung getroffen. Warte auf andere Spieler..."})]})}else if(Ie&&Y!==void 0&&Y!==null&&String(Ie.choice)!==String(Y)){const we=I?.attackDecisions||{};return ce.log(" [RESULT UI] Falsch geraten erkannt:",{myChoice:Ie.choice,truth:Y,isPartyMode:ke,localActionDone:ni,hasAttackDecision:we[m]}),!ni&&we[m]&&Un(!0),p.jsxs("div",{className:k.hotseatWaitContainer,children:[p.jsxs("div",{className:k.wrongAnswerContainer,children:[p.jsx("div",{className:k.wrongAnswerIcon,children:""}),p.jsx("p",{className:k.wrongAnswerTitleRed,children:"FALSCH GERATEN"}),p.jsx("p",{className:k.wrongAnswerTextWhite,children:"Du erhltst 10C Strafhitze."})]}),p.jsxs("div",{className:k.hotseatWaitBox,children:[p.jsx("p",{className:k.hotseatWaitTitle,children:" Warte bis alle Spieler ihre Hitze verteilt haben"}),p.jsx("p",{className:k.hotseatWaitSubtitle,children:"Die anderen Spieler greifen gerade an..."})]})]})}else return Ie&&Y==null?p.jsx("div",{className:k.resultStatusBox,children:p.jsx("p",{className:k.resultStatusText,children:"Du hast die Frage beantwortet. Warte auf die anderen Spieler..."})}):p.jsx("div",{className:k.resultStatusBox,children:p.jsx("p",{className:k.resultStatusTextAlt,children:" Keine Antwort abgegeben."})})})(),(()=>{const se=I.players?.[m],Y=I.config?.maxTemp||100,Ie=(se?.temp||0)>=Y,ke=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Ce=m===ke,we=I.votes?.[ke]?.choice,De=I.votes?.[m],dt=De&&we!==void 0&&String(De.choice)===String(we),ze=De&&we!==void 0&&String(De.choice)!==String(we),It=(I.attackDecisions||{})[m]===!0;if(!(E?ni||Ce||Ie:(ni||Ie)&&!(!E&&dt&&!It&&!Ce)&&!ze&&!Ce))return null;const at=E?(I.ready||[]).includes(m)?" Bereit fr nchste Frage":" Nchste Frage":(I.ready||[]).includes(m)?" Nicht bereit":" Bereit";return p.jsx("button",{className:(I.ready||[]).includes(m)?"btn-secondary":"btn-primary",onClick:$a,disabled:Ie,style:{marginTop:"20px"},children:Ie?" Hitzkopf - Ausgeschieden":at})})(),(()=>{const se=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),Y=m===se,Ie=I.votes?.[se]?.choice,ke=I.votes?.[m],Ce=ke&&Ie!==void 0&&String(ke.choice)===String(Ie),we=ke&&Ie!==void 0&&String(ke.choice)!==String(Ie),dt=(I.attackDecisions||{})[m]===!0;return!E&&Ce&&!dt&&!Y||!E&&we||!E&&Y?null:p.jsx("div",{className:k.playerReadyList,children:(()=>{const Be=I.config?.maxTemp||100,It=En().filter(fe=>(I.players?.[fe.name]?.temp||0)<Be),Ot=I.ready||[],at=[...It].sort((fe,_n)=>fe.name.localeCompare(_n.name)).map(fe=>`${Ot.includes(fe.name)?"":""} ${fe.emoji} ${fe.name}`).join(", ");return p.jsx("div",{className:k.playerReadyText,children:at})})()})})()]})})(),c==="winner"&&I&&p.jsxs("div",{className:`screen active card ${k.winnerScreen}`,children:[[...Array(50)].map((M,q)=>p.jsx("div",{style:{position:"absolute",width:"10px",height:"10px",background:["#ff4500","#ff8c00","#ffd700","#ff6b35","#ffa500"][Math.floor(Math.random()*5)],left:`${Math.random()*100}%`,top:"-10px",animation:`confettiFall ${2+Math.random()*3}s linear infinite`,animationDelay:`${Math.random()*2}s`,borderRadius:"50%",zIndex:1}},q)),p.jsx("h2",{className:k.winnerTitle,children:" Gewinner!"}),(()=>{const M=I.config?.maxTemp||100,q=Object.entries(I.players||{}).find(([J,me])=>(me.temp||0)<M);if(q){const[J,me]=q;return p.jsxs("div",{className:k.winnerCard,children:[p.jsx("div",{className:k.winnerEmoji,children:me.emoji||""}),p.jsx("p",{className:k.winnerName,children:J}),p.jsx("p",{className:k.winnerText,children:"ist cool geblieben und gewinnt diese Runde Hitzkopf! "}),p.jsxs("p",{className:k.winnerTemp,children:[me.temp||0,"C"]})]})}return null})(),p.jsxs("div",{className:k.winnerActions,children:[de&&p.jsx("button",{onClick:Oi,className:`btn-primary ${k.winnerButton}`,children:" Revanche starten"}),p.jsx("button",{onClick:ea,className:`btn-secondary ${k.winnerButton}`,children:" Lobby verlassen"})]})]}),es&&I&&I.hotseat&&p.jsx("div",{className:k.hotseatModalOverlay,onClick:Ft,children:p.jsxs("div",{className:k.hotseatModalContent,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.hotseatModalIcon,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");return m===M?"":""})()}),m===I.hotseat?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:k.hotseatModalTitle,children:"Du bist gefragt!"}),p.jsx("div",{className:k.hotseatModalText,children:"Alle anderen mssen deine Antwort erraten."})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:k.hotseatModalHeader,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||""),q=I.players?.[M]?.emoji||"";return p.jsxs(p.Fragment,{children:[p.jsx("span",{className:k.hotseatModalEmoji,children:q}),p.jsx("span",{className:k.hotseatModalTitle,children:M})]})})()}),p.jsx("div",{className:k.hotseatModalText,children:(()=>{const M=typeof I.hotseat=="string"?I.hotseat:I.hotseat?.name||String(I.hotseat||"");return p.jsxs(p.Fragment,{children:["ist gefragt. Versuche ",M,"'s Antwort zu erraten."]})})()})]}),p.jsx("button",{className:`btn-primary ${k.hotseatModalButton}`,onClick:Ft,children:"Los geht's"})]})}),ds&&Dn&&I&&p.jsx("div",{className:k.attackModalOverlay,onClick:ir,children:p.jsxs("div",{className:`${k.attackModalContent} ${Dn.totalDmg>0?k.attackModalContentDamage:k.attackModalContentNoDamage}`,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.attackModalIcon,children:Dn.totalDmg>0?"":""}),p.jsx("div",{className:`${k.attackModalName} ${Dn.totalDmg>0?k.attackModalNameDamage:k.attackModalNameNoDamage}`,children:m}),p.jsx("div",{className:k.attackModalMessage,children:Dn.totalDmg>0?`Du wurdest aufgeheizt! Insgesamt ${Dn.totalDmg}C`:"Cool geblieben - Keiner hat dich aufgeheizt"}),Dn.totalDmg===0&&p.jsx("div",{className:k.attackModalNoDamage,children:"Du hast diese Runde keine Hitze erhalten"}),Dn.attackDetails&&Dn.attackDetails.length>0&&Dn.totalDmg>0&&p.jsxs("div",{className:k.attackModalDetails,children:[p.jsx("strong",{className:k.attackModalDetailsTitle,children:"Angriffe:"}),p.jsx("br",{}),Dn.attackDetails.filter(M=>!M.mirrored).map((M,q)=>p.jsxs("div",{className:k.attackModalDetailItem,children:[" ",M.attacker,": +",M.dmg,"C"]},q))]}),p.jsx("div",{className:k.attackModalBar,children:(()=>{const M=I.config?.maxTemp||100,q=I.players?.[m]?.temp||0,J=Math.min(q/M*100,100);return p.jsx("div",{className:`${k.attackModalBarFill} ${Dn.totalDmg>0?k.attackModalBarFillDamage:k.attackModalBarFillNoDamage}`,ref:me=>{me&&setTimeout(()=>{me.style.width=`${J}%`},100)}})})()}),p.jsxs("div",{className:`${k.attackModalTemp} ${Dn.totalDmg>0?k.attackModalTempDamage:k.attackModalTempNoDamage}`,children:[I.players?.[m]?.temp||0,"C"]}),p.jsx("button",{className:`btn-primary ${k.attackModalButton}`,onClick:ir,children:"Verstanden"})]})}),yi&&er&&I&&p.jsx("div",{className:k.eliminationModalOverlay,onClick:()=>{tn(!1),Is(null),s&&O&&ct(qe(s,"lobbies",O),{eliminationInfo:Ai()}).catch(console.error)},children:p.jsxs("div",{className:k.eliminationModalContent,onClick:M=>M.stopPropagation(),children:[p.jsx("div",{className:k.eliminationModalLogoContainer,children:p.jsx("img",{src:Ab,alt:"Hitzkopf Logo",className:k.eliminationModalLogo})}),er===m?p.jsxs(p.Fragment,{children:[p.jsx("h2",{className:k.eliminationModalTitle,children:"Oh nein!"}),p.jsx("p",{className:k.eliminationModalText,children:"Du bist ein Hitzkopf und somit ab sofort raus!"})]}):p.jsxs(p.Fragment,{children:[p.jsx("h2",{className:k.eliminationModalTitle,children:er}),p.jsx("p",{className:k.eliminationModalText,children:"ist ein Hitzkopf und somit raus!"})]}),p.jsx("button",{className:`btn-primary ${k.eliminationModalButton}`,onClick:()=>{tn(!1),Is(null),s&&O&&ct(qe(s,"lobbies",O),{eliminationInfo:Ai()}).catch(console.error)},children:"Verstanden"})]})}),Fi&&p.jsx("div",{className:k.rulesModalOverlay,onClick:()=>In(!1),children:p.jsxs("div",{className:k.rulesModalContent,onClick:M=>M.stopPropagation(),children:[p.jsxs("h2",{className:k.rulesModalHeader,children:[p.jsx("span",{className:k.rulesModalHeaderIcon,children:""}),p.jsx("span",{children:"Anleitung"})]}),p.jsxs("div",{className:k.rulesModalBody,children:[p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Ziel:"})]}),p.jsxs("p",{className:k.rulesModalSectionText,children:["Errate die Antworten deiner Freunde und bringe sie zum Kochen! ",p.jsx("br",{}),"Rtst du richtig, darfst du Hitze verteilen, liegst du falsch, erhltst du Strafhitze."]})]}),p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Verlierer:"})]}),p.jsx("p",{className:k.rulesModalSectionText,children:"Wer als erstes 100 erreicht ist ein Hitzkopf und fliegt raus."})]}),p.jsxs("div",{className:k.rulesModalSectionBox,children:[p.jsxs("div",{className:k.rulesModalSectionHeader,children:[p.jsx("span",{className:k.rulesModalSectionIcon,children:""}),p.jsx("strong",{className:k.rulesModalSectionTitle,children:"Gewinner:"})]}),p.jsx("p",{className:k.rulesModalSectionText,children:"Bewahrst du einen khlen Kopf, entscheidest du das Spiel fr dich."})]})]}),p.jsxs("button",{className:`btn-primary ${k.rulesModalButton}`,onClick:()=>In(!1),children:[p.jsx("span",{children:"Verstanden"}),p.jsx("span",{children:""})]})]})})]})}const jM="_lobbySystem_1gg27_1",PM="_backButtonBottom_1gg27_23",zM="_screen_1gg27_67",BM="_title_1gg27_113",UM="_nameInput_1gg27_131",qM="_roomInput_1gg27_133",HM="_emojiGalleryWrapper_1gg27_185",FM="_emojiGallery_1gg27_185",GM="_emojiSpacer_1gg27_229",KM="_emojiCard_1gg27_239",$M="_selected_1gg27_269",QM="_emojiCharacter_1gg27_295",WM="_buttonGroup_1gg27_307",YM="_btnPrimary_1gg27_319",XM="_btnSecondary_1gg27_321",Zn={lobbySystem:jM,backButtonBottom:PM,screen:zM,title:BM,nameInput:UM,roomInput:qM,emojiGalleryWrapper:HM,emojiGallery:FM,emojiSpacer:GM,emojiCard:KM,selected:$M,emojiCharacter:QM,buttonGroup:WM,btnPrimary:YM,btnSecondary:XM},ZM=["","","","","","","","","","","","","","",""],Ws=(()=>{const r=[...ZM];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})(),JM=({onCreateLobby:r,onJoinLobby:e,storagePrefix:n="lobby",title:s="Lobby System",buttonText:o="Lobby erstellen",accentColor:c="#4ecdc4",onBack:f=null})=>{const[m,b]=X.useState("start"),[_,S]=X.useState(sessionStorage.getItem(`${n}_name`)||""),[A,V]=X.useState(()=>{const R=Math.floor(Ws.length/2);return Ws[R]}),[O,pe]=X.useState(""),[de,he]=X.useState(Math.floor(Ws.length/2)),I=X.useRef(null),Ae=X.useRef(!1),xe=X.useRef({x:0,y:0,time:0});X.useEffect(()=>{const R=I.current;if(!R)return;const N=()=>{Ae.current=!0;const L=R.scrollLeft,U=R.scrollWidth/(Ws.length+2),C=Math.round(L/U);he(Math.max(0,Math.min(C,Ws.length-1))),V(Ws[Math.max(0,Math.min(C,Ws.length-1))]),setTimeout(()=>{Ae.current=!1},100)};return R.addEventListener("scroll",N),setTimeout(()=>{const L=R.scrollWidth/(Ws.length+2);R.scrollLeft=de*L},100),()=>R.removeEventListener("scroll",N)},[de]);const ut=R=>{const N=R.target.value.slice(0,20);S(N),sessionStorage.setItem(`${n}_name`,N)},Bt=R=>{const N=Ws.indexOf(R);he(N),V(R);const B=I.current;if(B){const L=B.scrollWidth/(Ws.length+2);B.scrollTo({left:N*L,behavior:"smooth"})}},He=()=>{if(!_.trim()){alert("Bitte gib einen Namen ein!");return}sessionStorage.setItem(`${n}_name`,_),sessionStorage.setItem(`${n}_emoji`,A),r({name:_,emoji:A})},D=()=>{if(!_.trim()){alert("Bitte gib einen Namen ein!");return}if(!O.trim()){alert("Bitte gib einen Lobby-Code ein!");return}sessionStorage.setItem(`${n}_name`,_),sessionStorage.setItem(`${n}_emoji`,A),e({name:_,emoji:A,roomId:O.toUpperCase()})};return p.jsxs("div",{className:Zn.lobbySystem,style:{"--accent-color":c},children:[m==="start"&&p.jsxs("div",{className:Zn.screen,children:[p.jsx("h1",{className:Zn.title,children:s}),p.jsx("input",{type:"text",value:_,onChange:ut,placeholder:"Dein Name",maxLength:20,autoComplete:"name",className:Zn.nameInput}),p.jsx("div",{className:Zn.emojiGalleryWrapper,children:p.jsxs("div",{ref:I,className:Zn.emojiGallery,children:[p.jsx("div",{className:Zn.emojiSpacer}),Ws.map((R,N)=>{const B=N===de;return p.jsx("div",{className:`${Zn.emojiCard} ${B?Zn.selected:""}`,onClick:()=>{Ae.current||Bt(R)},onTouchStart:L=>{xe.current={x:L.touches[0].clientX,y:L.touches[0].clientY,time:Date.now()}},onTouchMove:L=>{if(xe.current.x!==0){const U=Math.abs(L.touches[0].clientX-xe.current.x),C=Math.abs(L.touches[0].clientY-xe.current.y);(U>10||C>10)&&(Ae.current=!0)}},onTouchEnd:()=>{setTimeout(()=>{xe.current={x:0,y:0,time:0}},50)},children:p.jsx("div",{className:Zn.emojiCharacter,children:R})},`${R}-${N}`)}),p.jsx("div",{className:Zn.emojiSpacer})]})}),p.jsx("div",{className:Zn.buttonGroup,children:p.jsx("button",{className:Zn.btnPrimary,onClick:He,children:o})})]}),m==="join"&&p.jsxs("div",{className:Zn.screen,children:[p.jsx("h1",{className:Zn.title,children:"Lobby beitreten"}),p.jsx("input",{type:"text",value:O,onChange:R=>pe(R.target.value.toUpperCase()),placeholder:"Lobby-Code",maxLength:6,className:Zn.roomInput}),p.jsxs("div",{className:Zn.buttonGroup,children:[p.jsx("button",{className:Zn.btnPrimary,onClick:D,children:"Beitreten"}),p.jsx("button",{className:Zn.btnSecondary,onClick:()=>b("start"),children:"Zurck"})]})]}),f&&p.jsx("button",{onClick:f,className:Zn.backButtonBottom,children:" Zurck"})]})},qs="https://api.spotify.com/v1",sl="https://accounts.spotify.com",Ts={PKCE_VERIFIER:"spotify_pkce_verifier",USER_ACCESS:"spotify_user_access_token",USER_REFRESH:"spotify_user_refresh_token",USER_EXPIRY:"spotify_user_expiry"};class ex{constructor(){this.clientId="2d9c122237af4b2391ab504f72edfd70",this.clientSecret="dce2d4bdae5b4afc8f9c3e24b309bb72";const e="https://nkillich.github.io/Hitzkopf";this.redirectUri=e.replace(/\/$/,""),typeof console<"u"&&console.log(" Spotify Redirect URI:",this.redirectUri),this.accessToken=null,this.tokenExpiry=null,this._userToken=null,this._deviceId=null,this._player=null,this._sdkReady=!1,!this.clientId||!this.clientSecret?(console.warn(" Spotify Credentials fehlen! berprfe .env.local"),console.log("Client ID vorhanden:",!!this.clientId),console.log("Client Secret vorhanden:",!!this.clientSecret)):console.log(" Spotify Credentials geladen")}_generateRandomString(e){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(e)).reduce((o,c)=>o+n[c%n.length],"")}async _sha256(e){const s=new TextEncoder().encode(e);return window.crypto.subtle.digest("SHA-256",s)}_base64urlEncode(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}async getAuthUrlWithPKCE(){if(!this.clientId)throw new Error("Spotify Client ID fehlt");const e=this._generateRandomString(64),n=await this._sha256(e),s=this._base64urlEncode(n);typeof sessionStorage<"u"&&sessionStorage.setItem(Ts.PKCE_VERIFIER,e);const o=["streaming","user-read-email","user-read-private","user-modify-playback-state","user-read-playback-state"].join(" "),c=new URLSearchParams({response_type:"code",client_id:this.clientId,scope:o,code_challenge_method:"S256",code_challenge:s,redirect_uri:this.redirectUri,state:this._generateRandomString(16)});return`${sl}/authorize?${c.toString()}`}async exchangeCodeForToken(e){const n=typeof sessionStorage<"u"?sessionStorage.getItem(Ts.PKCE_VERIFIER):null;if(!n)throw new Error("Code Verifier nicht gefunden  bitte erneut verbinden.");const s=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:this.clientId,grant_type:"authorization_code",code:e,redirect_uri:this.redirectUri,code_verifier:n})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.error_description||c.error||"Token-Austausch fehlgeschlagen")}const o=await s.json();return this._storeUserTokens(o.access_token,o.refresh_token,o.expires_in),typeof sessionStorage<"u"&&sessionStorage.removeItem(Ts.PKCE_VERIFIER),o}_storeUserTokens(e,n,s){const o=Date.now()+s*1e3;this._userToken=e,typeof sessionStorage<"u"&&(sessionStorage.setItem(Ts.USER_ACCESS,e),sessionStorage.setItem(Ts.USER_REFRESH,n||""),sessionStorage.setItem(Ts.USER_EXPIRY,String(o)))}async getStoredUserToken(){if(typeof sessionStorage>"u")return null;let e=sessionStorage.getItem(Ts.USER_ACCESS);const n=sessionStorage.getItem(Ts.USER_REFRESH),s=Number(sessionStorage.getItem(Ts.USER_EXPIRY)||0);if(e&&Date.now()>=s-6e4&&n)try{e=(await this.refreshUserToken()).access_token}catch{return null}return this._userToken=e,e||null}async refreshUserToken(){const e=typeof sessionStorage<"u"?sessionStorage.getItem(Ts.USER_REFRESH):null;if(!e)throw new Error("Kein Refresh Token");const n=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e,client_id:this.clientId})});if(!n.ok)throw this.clearUserTokens(),new Error("Token-Erneuerung fehlgeschlagen");const s=await n.json();return this._storeUserTokens(s.access_token,s.refresh_token||e,s.expires_in),s}clearUserTokens(){this._userToken=null,typeof sessionStorage<"u"&&(sessionStorage.removeItem(Ts.USER_ACCESS),sessionStorage.removeItem(Ts.USER_REFRESH),sessionStorage.removeItem(Ts.USER_EXPIRY))}async isUserLoggedIn(){return!!await this.getStoredUserToken()}getAuthUrl(){const e=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative"].join(" "),n=new URLSearchParams({client_id:this.clientId,response_type:"code",redirect_uri:this.redirectUri,scope:e,show_dialog:"false"});return`${sl}/authorize?${n.toString()}`}async getAccessToken(e){const n=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:this.redirectUri}),s=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${this.clientId}:${this.clientSecret}`)},body:n.toString()});if(!s.ok)throw new Error("Failed to get access token");const o=await s.json();return this.accessToken=o.access_token,this.tokenExpiry=Date.now()+o.expires_in*1e3,o}async getClientCredentialsToken(){if(!this.clientId||!this.clientSecret){const n=new Error("Spotify Credentials fehlen! berprfe .env.local und starte Dev-Server neu.");throw n.code="MISSING_CREDENTIALS",n}const e=new URLSearchParams({grant_type:"client_credentials"});try{const n=await fetch(`${sl}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${this.clientId}:${this.clientSecret}`)},body:e.toString()});if(!n.ok){const o=await n.json().catch(()=>({}));console.error("Spotify API Fehler:",o);const c=new Error(`Spotify API Fehler (${n.status}): ${o.error_description||o.error||"Unbekannter Fehler"}`);throw c.code="SPOTIFY_API_ERROR",c.status=n.status,c}const s=await n.json();return this.accessToken=s.access_token,this.tokenExpiry=Date.now()+s.expires_in*1e3,console.log(" Spotify Token erfolgreich abgerufen"),s}catch(n){if(n.code==="MISSING_CREDENTIALS"||n.code==="SPOTIFY_API_ERROR")throw n;const s=new Error("Netzwerkfehler beim Abrufen des Spotify Tokens: "+n.message);throw s.code="NETWORK_ERROR",s}}async ensureValidToken(){(!this.accessToken||Date.now()>=this.tokenExpiry)&&await this.getClientCredentialsToken()}async searchTracks(e,n=10){await this.ensureValidToken();const s=new URLSearchParams({q:e,type:"track",limit:n.toString()}),o=await fetch(`${qs}/search?${s.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!o.ok)throw new Error("Failed to search tracks");return(await o.json()).tracks.items.map(f=>({id:`spotify_track_${f.id}`,spotifyId:f.id,title:f.name,artist:f.artists.map(m=>m.name).join(", "),album:f.album.name,type:"song",source:"spotify",spotifyUrl:f.external_urls.spotify,previewUrl:f.preview_url,imageUrl:f.album.images[0]?.url,duration:f.duration_ms,votes:{},addedAt:Date.now()}))}async searchAlbums(e,n=10){await this.ensureValidToken();const s=new URLSearchParams({q:e,type:"album",limit:n.toString()}),o=await fetch(`${qs}/search?${s.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!o.ok)throw new Error("Failed to search albums");return(await o.json()).albums.items.map(f=>({id:`spotify_album_${f.id}`,spotifyId:f.id,title:f.name,artist:f.artists.map(m=>m.name).join(", "),type:"album",source:"spotify",spotifyUrl:f.external_urls.spotify,imageUrl:f.images[0]?.url,releaseDate:f.release_date,totalTracks:f.total_tracks,votes:{},addedAt:Date.now()}))}async search(e,n=10){try{await this.ensureValidToken();const s=Math.min(Math.floor(n/2),10),o=new URLSearchParams({q:e,type:"track,album",limit:s.toString()}),c=await fetch(`${qs}/search?${o.toString()}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!c.ok){const S=await c.json().catch(()=>({}));console.error("Spotify Search Fehler:",S);const A=new Error(`Spotify Search Fehler (${c.status}): ${S.error?.message||"Unbekannter Fehler"}`);throw A.code="SEARCH_FAILED",A}const f=await c.json(),m=(f.tracks?.items||[]).map(S=>({id:`spotify_track_${S.id}`,spotifyId:S.id,title:S.name,artist:S.artists.map(A=>A.name).join(", "),album:S.album.name,type:"song",source:"spotify",spotifyUrl:S.external_urls.spotify,previewUrl:S.preview_url,imageUrl:S.album.images[0]?.url,duration:S.duration_ms,votes:{},addedAt:Date.now()})),b=(f.albums?.items||[]).map(S=>({id:`spotify_album_${S.id}`,spotifyId:S.id,title:S.name,artist:S.artists.map(A=>A.name).join(", "),type:"album",source:"spotify",spotifyUrl:S.external_urls.spotify,imageUrl:S.images[0]?.url,releaseDate:S.release_date,totalTracks:S.total_tracks,votes:{},addedAt:Date.now()})),_=[...m,...b];return console.log(` Spotify Suche erfolgreich: ${_.length} Ergebnisse fr "${e}"`),_}catch(s){throw console.error(" Spotify Suche fehlgeschlagen:",s),s}}async getTrack(e){await this.ensureValidToken();const n=await fetch(`${qs}/tracks/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to get track");return await n.json()}async getAlbum(e){await this.ensureValidToken();const n=await fetch(`${qs}/albums/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to get album");return await n.json()}loadSpotifySDK(){return new Promise(e=>{if(window.Spotify){this._sdkReady=!0,e();return}if(document.querySelector('script[src*="spotify-player"]')){window.onSpotifyWebPlaybackSDKReady=()=>{this._sdkReady=!0,e()};return}const n=document.createElement("script");n.src="https://sdk.scdn.co/spotify-player.js",n.async=!0,window.onSpotifyWebPlaybackSDKReady=()=>{this._sdkReady=!0,e()},document.body.appendChild(n)})}async initPlaybackPlayer(e,n){if(!await this.getStoredUserToken()){n?.("Nicht mit Spotify angemeldet.");return}if(await this.loadSpotifySDK(),!window.Spotify){n?.("Spotify SDK konnte nicht geladen werden.");return}const o=new window.Spotify.Player({name:"Amplify Host",getOAuthToken:c=>{this.getStoredUserToken().then(f=>c(f||""))},volume:.8});o.addListener("ready",({device_id:c})=>{this._deviceId=c,this._player=o,console.log(" Spotify Web Playback bereit, Device ID:",c),e({deviceId:c})}),o.addListener("not_ready",({device_id:c})=>{console.log("Spotify Device offline:",c)}),o.addListener("authentication_error",({message:c})=>{console.error("Spotify Auth-Fehler:",c),n?.(c)}),o.addListener("initialization_error",({message:c})=>{console.error("Spotify Init-Fehler:",c),n?.(c)}),o.connect()}getDeviceId(){return this._deviceId}async getDevices(){const e=await this.getStoredUserToken();if(!e)return[];const n=await fetch(`${qs}/me/player/devices`,{headers:{Authorization:`Bearer ${e}`}});return n.ok?((await n.json()).devices||[]).map(c=>({id:c.id,name:c.name||"Unbekannt",type:c.type||"unknown",is_active:!!c.is_active})):[]}async playOnDevice(e,n,s){const o=await this.getStoredUserToken();if(!o)throw new Error("Nicht mit Spotify verbunden.");const c=n==="active",f=c?null:n||this._deviceId;if(!c&&!f)throw new Error("Whle ein Gert aus oder warte, bis Amplify Host erscheint.");const m=`${qs}/me/player/play${f?`?device_id=${f}`:""}`,b={uris:e};s!=null&&s>=0&&(b.position_ms=Math.floor(s));const _=await fetch(m,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!_.ok){const S=await _.json().catch(()=>({}));throw _.status===404?new Error('Kein aktiver Player. Bitte "Mit Spotify verbinden" und in Amplify starten.'):new Error(S.error?.message||"Wiedergabe fehlgeschlagen")}}async addToQueue(e,n){const s=await this.getStoredUserToken();if(!s)throw new Error("Nicht mit Spotify verbunden.");const c=n==="active"?null:n||this._deviceId,f=new URLSearchParams({uri:e});c&&f.set("device_id",c);const m=await fetch(`${qs}/me/player/queue?${f}`,{method:"POST",headers:{Authorization:`Bearer ${s}`}});if(!m.ok){const b=await m.json().catch(()=>({}));throw new Error(b.error?.message||"Queue hinzufgen fehlgeschlagen")}}async pausePlayback(){const e=await this.getStoredUserToken();e&&await fetch(`${qs}/me/player/pause`,{method:"PUT",headers:{Authorization:`Bearer ${e}`}})}async resumePlayback(){const e=await this.getStoredUserToken();e&&await fetch(`${qs}/me/player/play`,{method:"PUT",headers:{Authorization:`Bearer ${e}`}})}async nextTrack(){const e=await this.getStoredUserToken();e&&await fetch(`${qs}/me/player/next`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}async getPlaybackState(){const e=await this.getStoredUserToken();if(!e)return null;const n=await fetch(`${qs}/me/player`,{headers:{Authorization:`Bearer ${e}`}});if(n.status===204||!n.ok)return null;const s=await n.json(),o=s.item;return o?{trackId:o.id,trackName:o.name,artist:o.artists?.map(c=>c.name).join(", ")||"",imageUrl:o.album?.images?.[0]?.url||null,positionMs:s.progress_ms??0,durationMs:o.duration_ms??0,isPlaying:!!s.is_playing,updatedAt:Date.now()}:null}disconnectPlayer(){this._player&&(this._player.disconnect(),this._player=null),this._deviceId=null}}const zi=new ex,tx="_musicVoter_1cha9_1",nx="_backgroundOverlay_1cha9_9",ix="_roomContainer_1cha9_21",sx="_header_1cha9_43",rx="_headerLeft_1cha9_51",ax="_roomTitle_1cha9_55",ox="_emoji_1cha9_66",lx="_leaveButton_1cha9_83",cx="_playersSection_1cha9_101",ux="_sectionTitle_1cha9_110",hx="_playersList_1cha9_117",dx="_playerChip_1cha9_123",fx="_playerEmoji_1cha9_134",mx="_playerName_1cha9_138",gx="_hostBadge_1cha9_143",px="_addSection_1cha9_149",yx="_addButton_1cha9_155",_x="_playlistSection_1cha9_174",bx="_emptyPlaylist_1cha9_182",vx="_emptyIcon_1cha9_188",Tx="_emptyHint_1cha9_194",Sx="_playlistItems_1cha9_200",Ex="_playlistItem_1cha9_200",wx="_itemRank_1cha9_236",Ax="_itemInfo_1cha9_249",Rx="_itemTitle_1cha9_254",Ix="_itemArtist_1cha9_264",Cx="_itemMeta_1cha9_270",kx="_itemVoting_1cha9_276",Nx="_voteButton_1cha9_282",Dx="_voted_1cha9_301",Mx="_voteScore_1cha9_307",xx="_removeButton_1cha9_315",Ox="_modalOverlay_1cha9_340",Lx="_modal_1cha9_340",Vx="_modalHeader_1cha9_376",jx="_modalTitle_1cha9_384",Px="_modalCloseButton_1cha9_393",zx="_addModeButtons_1cha9_416",Bx="_addModeButton_1cha9_416",Ux="_addModeIcon_1cha9_443",qx="_addModeDesc_1cha9_447",Hx="_manualForm_1cha9_454",Fx="_input_1cha9_461",Gx="_spotifySearch_1cha9_478",Kx="_searchBox_1cha9_482",$x="_searchButton_1cha9_496",Qx="_searchLoading_1cha9_519",Wx="_spinner_1cha9_528",Yx="_searchResults_1cha9_541",Xx="_searchResultItem_1cha9_552",Zx="_resultImage_1cha9_570",Jx="_resultInfo_1cha9_578",eO="_resultTitle_1cha9_583",tO="_resultArtist_1cha9_592",nO="_resultAlbum_1cha9_600",iO="_addResultButton_1cha9_609",sO="_addResultButtonAdded_1cha9_632",rO="_noResults_1cha9_645",aO="_noResultsHint_1cha9_651",oO="_spotifyNote_1cha9_657",lO="_nowPlayingSection_1cha9_668",cO="_nowPlayingCard_1cha9_672",uO="_nowPlayingImage_1cha9_682",hO="_nowPlayingInfo_1cha9_690",dO="_nowPlayingTrack_1cha9_695",fO="_nowPlayingArtist_1cha9_704",mO="_nowPlayingTime_1cha9_713",gO="_nowPlayingBadge_1cha9_719",pO="_spotifySection_1cha9_726",yO="_spotifyError_1cha9_734",_O="_spotifyConnectBlock_1cha9_740",bO="_spotifyConnectButton_1cha9_751",vO="_spotifyPlaybackBlock_1cha9_769",TO="_spotifyDeviceSelect_1cha9_775",SO="_spotifyDeviceLabel_1cha9_781",EO="_spotifyDeviceSelectEl_1cha9_786",wO="_spotifyResendButton_1cha9_801",AO="_spotifyConnected_1cha9_818",RO="_spotifyPlaybackButtons_1cha9_823",IO="_spotifyPlayButton_1cha9_830",CO="_spotifyPauseButton_1cha9_852",kO="_spotifyDisconnectButton_1cha9_868",NO="_modalButtons_1cha9_884",DO="_btnFertig_1cha9_890",MO="_btnPrimary_1cha9_909",xO="_lobbyStartScreen_1cha9_1000",OO="_lobbyStartCard_1cha9_1011",LO="_lobbyStartTitle_1cha9_1023",VO="_lobbyStartSlogan_1cha9_1036",jO="_lobbyStartButtons_1cha9_1045",PO="_lobbyStartButton_1cha9_1045",zO="_lobbyStartIcon_1cha9_1073",BO="_browseLoading_1cha9_1109",UO="_browseEmpty_1cha9_1118",qO="_browseEmptyIcon_1cha9_1127",HO="_lobbyList_1cha9_1143",FO="_lobbyCard_1cha9_1150",GO="_lobbyCardHeader_1cha9_1194",KO="_lobbyCardTitle_1cha9_1202",$O="_lobbyCardIcon_1cha9_1211",QO="_lobbyCardInfo_1cha9_1224",WO="_lobbyCardStat_1cha9_1229",YO="_refreshButton_1cha9_1237",XO="_headerButtons_1cha9_1261",ZO="_closeButton_1cha9_1266",JO="_lobbySystem_1cha9_1297",eL="_screen_1cha9_1301",tL="_emojiCard_1cha9_1305",nL="_emojiCharacter_1cha9_1310",iL="_backButtonBottom_1cha9_1334",sL="_title_1cha9_1374",rL="_nameInput_1cha9_1383",aL="_emojiGalleryWrapper_1cha9_1401",oL="_emojiGallery_1cha9_1401",lL="_emojiSpacer_1cha9_1423",cL="_selected_1cha9_1443",uL="_buttonGroup_1cha9_1468",hL="_lobbyListSection_1cha9_1475",dL="_lobbyListTitle_1cha9_1481",fL="_deleteAllButton_1cha9_1489",te={musicVoter:tx,backgroundOverlay:nx,roomContainer:ix,header:sx,headerLeft:rx,roomTitle:ax,emoji:ox,leaveButton:lx,playersSection:cx,sectionTitle:ux,playersList:hx,playerChip:dx,playerEmoji:fx,playerName:mx,hostBadge:gx,addSection:px,addButton:yx,playlistSection:_x,emptyPlaylist:bx,emptyIcon:vx,emptyHint:Tx,playlistItems:Sx,playlistItem:Ex,itemRank:wx,itemInfo:Ax,itemTitle:Rx,itemArtist:Ix,itemMeta:Cx,itemVoting:kx,voteButton:Nx,voted:Dx,voteScore:Mx,removeButton:xx,modalOverlay:Ox,modal:Lx,modalHeader:Vx,modalTitle:jx,modalCloseButton:Px,addModeButtons:zx,addModeButton:Bx,addModeIcon:Ux,addModeDesc:qx,manualForm:Hx,input:Fx,spotifySearch:Gx,searchBox:Kx,searchButton:$x,searchLoading:Qx,spinner:Wx,searchResults:Yx,searchResultItem:Xx,resultImage:Zx,resultInfo:Jx,resultTitle:eO,resultArtist:tO,resultAlbum:nO,addResultButton:iO,addResultButtonAdded:sO,noResults:rO,noResultsHint:aO,spotifyNote:oO,nowPlayingSection:lO,nowPlayingCard:cO,nowPlayingImage:uO,nowPlayingInfo:hO,nowPlayingTrack:dO,nowPlayingArtist:fO,nowPlayingTime:mO,nowPlayingBadge:gO,spotifySection:pO,spotifyError:yO,spotifyConnectBlock:_O,spotifyConnectButton:bO,spotifyPlaybackBlock:vO,spotifyDeviceSelect:TO,spotifyDeviceLabel:SO,spotifyDeviceSelectEl:EO,spotifyResendButton:wO,spotifyConnected:AO,spotifyPlaybackButtons:RO,spotifyPlayButton:IO,spotifyPauseButton:CO,spotifyDisconnectButton:kO,modalButtons:NO,btnFertig:DO,btnPrimary:MO,lobbyStartScreen:xO,lobbyStartCard:OO,lobbyStartTitle:LO,lobbyStartSlogan:VO,lobbyStartButtons:jO,lobbyStartButton:PO,lobbyStartIcon:zO,browseLoading:BO,browseEmpty:UO,browseEmptyIcon:qO,lobbyList:HO,lobbyCard:FO,lobbyCardHeader:GO,lobbyCardTitle:KO,lobbyCardIcon:$O,lobbyCardInfo:QO,lobbyCardStat:WO,refreshButton:YO,headerButtons:XO,closeButton:ZO,lobbySystem:JO,screen:eL,emojiCard:tL,emojiCharacter:nL,backButtonBottom:iL,title:sL,nameInput:rL,emojiGalleryWrapper:aL,emojiGallery:oL,emojiSpacer:lL,selected:cL,buttonGroup:uL,lobbyListSection:hL,lobbyListTitle:dL,deleteAllButton:fL},mL=["","","","","","","","","","","","","","",""],hr=(()=>{const r=[...mL];for(let e=r.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[r[e],r[n]]=[r[n],r[e]]}return r})(),gL={apiKey:"AIzaSyBQ7c9JkZ3zWlyIjZLl1O1sJJOrKfYJbmA",authDomain:"hitzkopf-f0ea6.firebaseapp.com",projectId:"hitzkopf-f0ea6",storageBucket:"hitzkopf-f0ea6.firebasestorage.app",messagingSenderId:"828164655874",appId:"1:828164655874:web:1cab759bdb03bfb736101b"},pL=({onBack:r,spotifyCallbackDone:e})=>{const[n,s]=X.useState(null),[o,c]=X.useState(null),[f,m]=X.useState(null),[b,_]=X.useState("lobby"),[S,A]=X.useState(sessionStorage.getItem("mv_name")||""),[V,O]=X.useState(()=>{const j=sessionStorage.getItem("mv_emoji");if(j)return j;const Z=Math.floor(hr.length/2);return hr[Z]}),[pe,de]=X.useState(()=>{const j=sessionStorage.getItem("mv_emoji");if(j){const Z=hr.indexOf(j);return Z!==-1?Z:Math.floor(hr.length/2)}return Math.floor(hr.length/2)}),[he,I]=X.useState(sessionStorage.getItem("mv_roomId")||""),[Ae,xe]=X.useState(!1),[ut,Bt]=X.useState(null),[He,D]=X.useState([]),[R,N]=X.useState(!1),[B,L]=X.useState([]),[U,C]=X.useState(""),[Wt,Rn]=X.useState([]),[ne,ve]=X.useState(!1),[Ve,_t]=X.useState(null),[Ht,P]=X.useState(!1),[re,ye]=X.useState(""),[Ee,je]=X.useState(""),[st,ht]=X.useState("song"),[dn,Ye]=X.useState(()=>new Set),[rn,us]=X.useState(!1),[Js,ni]=X.useState(!1),[Un,Hs]=X.useState(!1),[Zi,Hi]=X.useState(null),[vr,fn]=X.useState([]),[Ut,As]=X.useState("active"),hs=X.useRef(null);X.useRef(null);const Rs=X.useRef(null),mn=X.useRef(!1),pi=X.useRef({x:0,y:0,time:0}),Ji=X.useRef(null),Ni=X.useRef(null),qn=X.useRef(null),es=X.useRef(null),Fs=X.useRef(S);X.useEffect(()=>{Fs.current=S},[S]),X.useEffect(()=>{const j=tg(gL),Z=$T(j),_e=m0(j);return s(j),m(Z),c(_e),LT(Z).catch(console.error),()=>{hs.current&&hs.current()}},[]),X.useEffect(()=>{const j=Rs.current;if(!j||b!=="browse")return;const Z=()=>{mn.current=!0;const Pe=j.scrollLeft+j.clientWidth/2,We=j.querySelectorAll("[data-emoji-index]");let Rt=0,Cn=1/0;We.forEach(Xt=>{const nr=parseInt(Xt.getAttribute("data-emoji-index"),10),Sr=Xt.offsetLeft+Xt.offsetWidth/2,xi=Math.abs(Sr-Pe);xi<Cn&&(Cn=xi,Rt=nr)});const Fn=Math.max(0,Math.min(Rt,hr.length-1));de(Fn),O(hr[Fn]),setTimeout(()=>{mn.current=!1},100)};j.addEventListener("scroll",Z);const Te=setTimeout(()=>{const Pe=j.querySelector(`[data-emoji-index="${pe}"]`);Pe&&(mn.current=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{const We=j.clientWidth,Rt=Pe.offsetWidth||80,Fn=Pe.offsetLeft-We/2+Rt/2,Xt=Math.max(0,Math.min(Fn,j.scrollWidth-j.clientWidth));j.scrollLeft=Xt,setTimeout(()=>{Math.abs(j.scrollLeft-Xt)>10&&(j.scrollLeft=Xt),setTimeout(()=>{mn.current=!1},100)},50)})}))},150);return()=>{j.removeEventListener("scroll",Z),clearTimeout(Te)}},[b,pe]);const ds=j=>{const Z=j.target.value.slice(0,20);A(Z),sessionStorage.setItem("mv_name",Z)},Tr=j=>{const Z=hr.indexOf(j);if(de(Z),O(j),sessionStorage.setItem("mv_emoji",j),b==="browse")return;const _e=Rs.current;if(_e){const Te=_e.scrollWidth/(hr.length+2);_e.scrollTo({left:Z*Te,behavior:"smooth"})}},Fi=j=>{if(!S.trim()){alert("Bitte gib einen Namen ein!");return}sessionStorage.setItem("mv_name",S),sessionStorage.setItem("mv_emoji",V),yi({name:S,emoji:V,roomId:j})},In=async({name:j,emoji:Z})=>{if(!o)return;const _e=Ga(),Te=qe(o,"musicVoterLobbies",_e);try{await C0(Te,{host:j,createdAt:Yi(),players:{[j]:{emoji:Z,joinedAt:Yi()}},playlist:[],status:"active"}),A(j),O(Z),I(_e),xe(!0),sessionStorage.setItem("mv_roomId",_e),_("room"),Dn(_e)}catch(Pe){console.error("Fehler beim Erstellen der Playlist:",Pe),alert("Fehler beim Erstellen der Playlist")}},yi=async({name:j,emoji:Z,roomId:_e})=>{if(!o)return;const Te=qe(o,"musicVoterLobbies",_e);try{const Pe=await fi(Te);if(!Pe.exists()){alert("Playlist nicht gefunden!");return}const We=Pe.data();if(We.players&&We.players[j]){alert("Dieser Name ist bereits vergeben!");return}await ct(Te,{[`players.${j}`]:{emoji:Z,joinedAt:Yi()}}),A(j),O(Z),I(_e),xe(!1),sessionStorage.setItem("mv_roomId",_e),_("room"),Dn(_e)}catch(Pe){console.error("Fehler beim Beitreten:",Pe),alert("Fehler beim Beitreten der Playlist")}},tn=async()=>{if(o){N(!0);try{const j=Km(o,"musicVoterLobbies"),Z=Qm(j,Wm("status","==","active")),_e=await Ym(Z),Te=[];_e.forEach(Pe=>{const We=Pe.data();Te.push({id:Pe.id,host:We.host,playerCount:Object.keys(We.players||{}).length,createdAt:We.createdAt,playlist:We.playlist||[]})}),Te.sort((Pe,We)=>Pe.createdAt?We.createdAt?We.createdAt.toMillis()-Pe.createdAt.toMillis():-1:1),D(Te),console.log(` ${Te.length} offene Lobbies geladen`)}catch(j){console.error("Fehler beim Laden der Lobbies:",j),D([])}finally{N(!1)}}},er=async()=>{if(!(!window.confirm(`ALLE ${He.length} Playlists wirklich lschen?

 WARNUNG: Diese Aktion kann NICHT rckgngig gemacht werden!
Alle Zuhrer werden entfernt!`)||!window.confirm(`Bist du dir WIRKLICH sicher?

Dies wird alle Playlists unwiderruflich lschen!`))&&o)try{const _e=He.map(Te=>kc(qe(o,"musicVoterLobbies",Te.id)));await Promise.all(_e),console.log(` Alle ${He.length} Playlists gelscht`),D([]),alert("Alle Playlists wurden gelscht!")}catch(_e){console.error("Fehler beim Lschen aller Playlists:",_e),alert("Fehler beim Lschen: "+(_e.message||"Unbekannter Fehler")),tn()}},Is=async()=>{if(!Ae||!o||!he){alert("Nur der Host kann die Playlist schlieen!");return}if(!window.confirm("Playlist wirklich schlieen? Alle Zuhrer werden entfernt!"))return;const Z=qe(o,"musicVoterLobbies",he);try{await kc(Z),console.log(" Playlist geschlossen"),hs.current&&hs.current(),_("lobby"),I(""),A(""),O(""),xe(!1),Bt(null),L([]),sessionStorage.removeItem("mv_roomId")}catch(_e){console.error("Fehler beim Schlieen:",_e),alert("Fehler beim Schlieen der Playlist")}},Dn=j=>{if(!o)return;const Z=qe(o,"musicVoterLobbies",j),_e=k0(Z,Te=>{if(Te.exists()){const Pe=Te.data();Bt(Pe),L(Pe.playlist||[]),xe(Pe.host===Fs.current)}else alert("Playlist wurde geschlossen"),Di()});hs.current=_e},Di=async()=>{if(hs.current&&hs.current(),o&&he&&S){const j=qe(o,"musicVoterLobbies",he);try{await ct(j,{[`players.${S}`]:Ai()}),console.log(` ${S} hat die Lobby verlassen`)}catch(Z){console.error("Fehler beim Verlassen:",Z)}}_("lobby"),I(""),A(""),O(""),xe(!1),Bt(null),L([]),sessionStorage.removeItem("mv_roomId")};X.useEffect(()=>{const j=sessionStorage.getItem("mv_roomId"),Z=sessionStorage.getItem("mv_name");if(!o||!j||!Z?.trim())return;let _e=!1;const Te=qe(o,"musicVoterLobbies",j);return fi(Te).then(Pe=>{if(_e)return;if(!Pe.exists()){sessionStorage.removeItem("mv_roomId");return}const We=Pe.data();if(!We.players?.[Z]){sessionStorage.removeItem("mv_roomId");return}I(j),A(Z),O(sessionStorage.getItem("mv_emoji")||""),xe(We.host===Z),_("room"),Dn(j)}).catch(()=>{_e||sessionStorage.removeItem("mv_roomId")}),()=>{_e=!0}},[o]);const Cs=async()=>{if(!re.trim()){alert("Bitte gib einen Titel ein!");return}const j={id:`manual_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:re,artist:Ee||"Unbekannt",type:st,source:"manual",votes:{},addedBy:S,addedAt:Date.now()};await Yt(j),ye(""),je(""),P(!1)},Yt=async j=>{if(!o||!he){console.error(" Hinzufgen fehlgeschlagen: DB oder RoomID fehlt",{db:!!o,roomId:he}),alert("Fehler: Nicht mit Lobby verbunden");return}console.log(" Versuche Song hinzuzufgen:",j.title);const Z=Object.keys(j).reduce((Te,Pe)=>(j[Pe]!==void 0&&(Te[Pe]=j[Pe]),Te),{});console.log(" Bereinigtes Item:",Z);const _e=qe(o,"musicVoterLobbies",he);try{await ct(_e,{playlist:cl(Z)}),console.log(" Song erfolgreich hinzugefgt:",j.title)}catch(Te){console.error(" Fehler beim Hinzufgen:",Te),console.error("Fehler Details:",{code:Te.code,message:Te.message,roomId:he,item:j.title}),alert("Fehler beim Hinzufgen: "+(Te.message||"Unbekannter Fehler"))}},li=async(j,Z)=>{if(!o||!he||!S)return;const _e=qe(o,"musicVoterLobbies",he);try{const We=((await fi(_e)).data().playlist||[]).map(Rt=>{if(Rt.id===j){const Cn=Rt.votes?.[S]||0,Fn=Z==="up"?1:Z==="down"?-1:0;return{...Rt,votes:{...Rt.votes,[S]:Cn===Fn?0:Fn}}}return Rt});await ct(_e,{playlist:We})}catch(Te){console.error("Fehler beim Voten:",Te)}},Vn=async j=>{if(!o||!he)return;const Z=B.find(Pe=>Pe.id===j);if(!Z)return;if(!Ae&&Z.addedBy!==S){alert("Nur der Host oder der Ersteller kann diesen Eintrag lschen!");return}if(!window.confirm(`"${Z.title}" wirklich aus der Playlist entfernen?`))return;const Te=qe(o,"musicVoterLobbies",he);try{const Pe=B.filter(We=>We.id!==j);await ct(Te,{playlist:Pe})}catch(Pe){console.error("Fehler beim Entfernen:",Pe)}},yn=async()=>{if(U.trim()){ve(!0);try{const j=await zi.search(U,10);Rn(j),j.length===0&&console.log("Keine Ergebnisse fr:",U)}catch(j){console.error("Spotify Suche fehlgeschlagen:",j);let Z=`Spotify Suche fehlgeschlagen.

`;j.message?.includes("Failed to get")?(Z+=`Credentials Problem:
`,Z+=`1. berprfe .env.local Datei
`,Z+=`2. Dev-Server neu starten (wichtig!)
`,Z+="3. Spotify Developer Dashboard prfen"):j.message?.includes("network")?Z+="Netzwerkproblem - Internetverbindung prfen":Z+="Fehler: "+j.message,alert(Z),Rn([])}finally{ve(!1)}}},Ga=()=>{const j="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let Z="";for(let _e=0;_e<6;_e++)Z+=j.charAt(Math.floor(Math.random()*j.length));return Z},ks=j=>j.votes?Object.values(j.votes).reduce((Z,_e)=>Z+_e,0):0,Hn=[...B].sort((j,Z)=>{const _e=ks(j),Te=ks(Z);return Te!==_e?Te-_e:(j.addedAt||0)-(Z.addedAt||0)}),fs=j=>j===1?"#51cf66":j===-1?"#ff6b6b":"transparent",Zr=j=>{if(j==null||Number.isNaN(j))return"0:00";const Z=Math.floor(Number(j)/1e3),_e=Math.floor(Z/60),Te=Z%60;return`${_e}:${Te.toString().padStart(2,"0")}`},[Mi,At]=X.useState(0),Tt=ut?.nowPlaying,_i=Tt?Tt.isPlaying?Math.min((Tt.positionMs||0)+(Date.now()-(Tt.updatedAt||0)),Tt.durationMs||0):Tt.positionMs||0:0;X.useEffect(()=>{if(!Tt?.isPlaying)return;const j=setInterval(()=>At(Z=>Z+1),1e3);return()=>clearInterval(j)},[Tt?.isPlaying]),X.useEffect(()=>{if(!Ae||!rn||!o||!he)return;const j=qe(o,"musicVoterLobbies",he),Z=setInterval(async()=>{try{const _e=await zi.getPlaybackState();if(await ct(j,{nowPlaying:_e?{trackId:_e.trackId,trackName:_e.trackName,artist:_e.artist,imageUrl:_e.imageUrl,positionMs:_e.positionMs,durationMs:_e.durationMs,isPlaying:_e.isPlaying,updatedAt:_e.updatedAt}:null}),_e?.trackId&&Ji.current!==null&&Ji.current!==_e.trackId)try{const Pe=(await fi(j)).data()?.playlist||[];if(Pe.some(Rt=>Rt.spotifyId===Ji.current)){const Rt=Pe.filter(Cn=>Cn.spotifyId!==Ji.current);await ct(j,{playlist:Rt}),Ni.current=null}}catch{}_e?.trackId&&(Ji.current=_e.trackId)}catch{}},2e3);return()=>clearInterval(Z)},[Ae,rn,o,he]),X.useEffect(()=>{Ae&&zi.isUserLoggedIn().then(us)},[Ae,e]),X.useEffect(()=>{if(!(!Ae||!rn||Js))return Hi(null),zi.initPlaybackPlayer(()=>ni(!0),j=>Hi(j||"Spotify-Fehler")),()=>{zi.disconnectPlayer(),ni(!1)}},[Ae,rn]),X.useEffect(()=>{if(!Ae||!rn)return;const j=async()=>{try{const _e=await zi.getDevices();fn(_e)}catch{}};j();const Z=setInterval(j,1e4);return()=>clearInterval(Z)},[Ae,rn]);const jn=async()=>{try{sessionStorage.setItem("spotify_return_to","musicvoter");const j=await zi.getAuthUrlWithPKCE();window.location.href=j}catch(j){alert("Spotify-Verbindung starten fehlgeschlagen: "+(j.message||"Unbekannter Fehler"))}},tr=async()=>{if(o&&he&&Ae)try{await ct(qe(o,"musicVoterLobbies",he),{nowPlaying:null})}catch{}zi.clearUserTokens(),zi.disconnectPlayer(),us(!1),ni(!1),Hs(!1),Hi(null)},Mn=()=>Hn.filter(j=>j.source==="spotify"&&j.spotifyId&&j.type==="song").map(j=>`spotify:track:${j.spotifyId}`),Gi=async()=>{const j=Mn();if(j.length===0){alert("In der Playlist sind keine Spotify-Songs. Fge zuerst Songs ber die Spotify-Suche hinzu.");return}Hi(null);try{await zi.playOnDevice(j,Ut==="active"?"active":Ut),Ni.current=Hn.filter(Z=>Z.source==="spotify"&&Z.spotifyId&&Z.type==="song").map(Z=>Z.spotifyId),Hs(!0)}catch(Z){Hi(Z.message||"Abspielen fehlgeschlagen"),alert("Spotify abspielen: "+(Z.message||"Fehler"))}},Sn=async()=>{const j=es.current;if(j)try{const Z=await zi.getPlaybackState();if(!Z||Z.trackId!==j.currentTrackId)return;const _e=[`spotify:track:${Z.trackId}`,...j.queueOrder.map(Te=>`spotify:track:${Te}`)];await zi.playOnDevice(_e,j.deviceId,Z.positionMs),Ni.current=j.queueOrder}catch{}},xn=async()=>{const j=Mn();if(j.length!==0){Hi(null);try{await zi.playOnDevice(j,Ut==="active"?"active":Ut),Ni.current=Hn.filter(Z=>Z.source==="spotify"&&Z.spotifyId&&Z.type==="song").map(Z=>Z.spotifyId),Hs(!0)}catch(Z){Hi(Z.message||"Fehler")}}},ci=Hn.filter(j=>j.source==="spotify"&&j.spotifyId&&j.type==="song").filter(j=>j.spotifyId!==Tt?.trackId).map(j=>j.spotifyId).join(",");X.useEffect(()=>{if(!Ae||!rn||!Tt?.trackId)return;const j=Hn.filter(We=>We.source==="spotify"&&We.spotifyId&&We.type==="song").filter(We=>We.spotifyId!==Tt.trackId).map(We=>We.spotifyId),Z=Ni.current;if(Z&&Z.length===j.length&&Z.every((We,Rt)=>We===j[Rt]))return;qn.current&&clearTimeout(qn.current);const Te=Ut==="active"?"active":Ut;if(es.current={queueOrder:j,currentTrackId:Tt.trackId,deviceId:Te},Z&&j.length>=Z.length&&Z.every((We,Rt)=>We===j[Rt])){const We=j.slice(Z.length);qn.current=setTimeout(async()=>{qn.current=null;try{for(const Rt of We)await zi.addToQueue(`spotify:track:${Rt}`,Te);Ni.current=j}catch{}},400)}else qn.current=setTimeout(()=>{qn.current=null,Sn()},4e3);return()=>{qn.current&&clearTimeout(qn.current)}},[Ae,rn,Tt?.trackId,ci,Ut]);const ts=async()=>{try{await zi.pausePlayback(),Hs(!1)}catch(j){console.error("Pause fehlgeschlagen:",j)}};return p.jsxs("div",{className:te.musicVoter,children:[p.jsx("div",{className:te.backgroundOverlay}),b==="lobby"&&p.jsxs("div",{className:te.lobbyStartScreen,children:[p.jsxs("div",{className:te.lobbyStartCard,children:[p.jsxs("h1",{className:te.lobbyStartTitle,children:[p.jsx("span",{className:te.emoji,children:""}),"Amplify"]}),p.jsx("p",{className:te.lobbyStartSlogan,children:"Gemeinsam den Ton angeben"}),p.jsxs("div",{className:te.lobbyStartButtons,children:[p.jsxs("button",{className:te.lobbyStartButton,onClick:()=>_("create"),children:[p.jsx("span",{className:te.lobbyStartIcon,children:""}),p.jsx("span",{children:"Playlist erstellen"})]}),p.jsxs("button",{className:te.lobbyStartButton,onClick:()=>{_("browse"),tn()},children:[p.jsx("span",{className:te.lobbyStartIcon,children:""}),p.jsx("span",{children:"Playlist beitreten"})]})]})]}),p.jsx("button",{onClick:r,className:te.backButtonBottom,children:" Zurck"})]}),b==="create"&&p.jsx(JM,{onCreateLobby:In,onJoinLobby:()=>{},storagePrefix:"mv",title:"Playlist erstellen",buttonText:"Playlist erstellen",accentColor:"#4ecdc4",onBack:()=>_("lobby")}),b==="browse"&&p.jsxs("div",{className:te.lobbySystem,style:{"--accent-color":"#4ecdc4"},children:[p.jsxs("div",{className:te.screen,children:[p.jsx("h1",{className:te.title,children:"Playlist beitreten"}),p.jsx("input",{type:"text",value:S,onChange:ds,placeholder:"Dein Name",maxLength:20,autoComplete:"name",className:te.nameInput}),p.jsx("div",{className:te.emojiGalleryWrapper,children:p.jsxs("div",{ref:Rs,className:te.emojiGallery,children:[p.jsx("div",{className:te.emojiSpacer}),hr.map((j,Z)=>{const _e=Z===pe;return p.jsx("div",{"data-emoji-index":Z,className:`${te.emojiCard} ${_e?te.selected:""}`,onClick:()=>{mn.current||Tr(j)},onTouchStart:Te=>{pi.current={x:Te.touches[0].clientX,y:Te.touches[0].clientY,time:Date.now()}},onTouchMove:Te=>{if(pi.current.x!==0){const Pe=Math.abs(Te.touches[0].clientX-pi.current.x),We=Math.abs(Te.touches[0].clientY-pi.current.y);(Pe>10||We>10)&&(mn.current=!0)}},onTouchEnd:()=>{setTimeout(()=>{pi.current={x:0,y:0,time:0}},50)},children:p.jsx("div",{className:te.emojiCharacter,children:j})},`${j}-${Z}`)}),p.jsx("div",{className:te.emojiSpacer})]})}),p.jsxs("div",{className:te.lobbyListSection,children:[p.jsx("h2",{className:te.lobbyListTitle,children:"Offene Playlists"}),R&&p.jsxs("div",{className:te.browseLoading,children:[p.jsx("div",{className:te.spinner}),p.jsx("p",{children:"Lade Playlists..."})]}),!R&&He.length===0&&p.jsxs("div",{className:te.browseEmpty,children:[p.jsx("div",{className:te.browseEmptyIcon,children:""}),p.jsx("p",{children:"Keine Playlists gefunden"})]}),!R&&He.length>0&&p.jsx("div",{className:te.lobbyList,children:He.map(j=>p.jsxs("div",{className:te.lobbyCard,onClick:()=>Fi(j.id),children:[p.jsx("div",{className:te.lobbyCardHeader,children:p.jsxs("div",{className:te.lobbyCardTitle,children:[p.jsx("span",{className:te.lobbyCardIcon,children:""}),p.jsxs("span",{children:["Playlist von ",j.host]})]})}),p.jsxs("div",{className:te.lobbyCardInfo,children:[p.jsxs("div",{className:te.lobbyCardStat,children:[p.jsx("span",{children:""}),p.jsxs("span",{children:[j.playerCount," Zuhrer"]})]}),p.jsxs("div",{className:te.lobbyCardStat,children:[p.jsx("span",{children:""}),p.jsxs("span",{children:[j.playlist.length," Songs"]})]})]})]},j.id))})]}),p.jsxs("div",{className:te.buttonGroup,children:[p.jsx("button",{className:te.refreshButton,onClick:tn,disabled:R,children:" Aktualisieren"}),He.length>0&&p.jsx("button",{className:te.deleteAllButton,onClick:er,children:" Alle Playlists lschen"})]})]}),p.jsx("button",{onClick:()=>_("lobby"),className:te.backButtonBottom,children:" Zurck"})]}),b==="room"&&ut&&p.jsxs("div",{className:te.roomContainer,children:[p.jsxs("div",{className:te.header,children:[p.jsx("div",{className:te.headerLeft,children:p.jsxs("h1",{className:te.roomTitle,children:[p.jsx("span",{className:te.emoji,children:""}),"Amplify"]})}),p.jsxs("div",{className:te.headerButtons,children:[Ae&&p.jsx("button",{className:te.closeButton,onClick:Is,title:"Playlist schlieen",children:"Schlieen"}),p.jsx("button",{className:te.leaveButton,onClick:Di,children:"Verlassen"})]})]}),p.jsxs("div",{className:te.playersSection,children:[p.jsxs("h3",{className:te.sectionTitle,children:["Zuhrer (",Object.keys(ut.players||{}).length,")"]}),p.jsx("div",{className:te.playersList,children:Object.entries(ut.players||{}).map(([j,Z])=>p.jsxs("div",{className:te.playerChip,children:[p.jsx("span",{className:te.playerEmoji,children:Z.emoji}),p.jsx("span",{className:te.playerName,children:j}),j===ut.host&&p.jsx("span",{className:te.hostBadge,children:""})]},j))})]}),Ae&&p.jsxs("div",{className:te.spotifySection,children:[p.jsx("h3",{className:te.sectionTitle,children:"Spotify abspielen"}),Zi&&p.jsx("p",{className:te.spotifyError,children:Zi}),rn?p.jsxs("div",{className:te.spotifyPlaybackBlock,children:[p.jsxs("p",{className:te.spotifyConnected,children:[" Mit Spotify verbunden",Js&&"  Player bereit"]}),p.jsxs("div",{className:te.spotifyDeviceSelect,children:[p.jsx("label",{className:te.spotifyDeviceLabel,children:"Wiedergabe auf:"}),p.jsxs("select",{className:te.spotifyDeviceSelectEl,value:Ut,onChange:j=>As(j.target.value),children:[p.jsx("option",{value:"active",children:"Aktives Gert (z.B. Alexa)"}),vr.map(j=>p.jsxs("option",{value:j.id,children:[j.name,j.is_active?"  aktiv":""]},j.id))]})]}),p.jsxs("div",{className:te.spotifyPlaybackButtons,children:[Un?p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",className:te.spotifyPauseButton,onClick:ts,children:" Pause"}),p.jsx("button",{type:"button",className:te.spotifyResendButton,onClick:xn,title:"Interaktive Playlist erneut auf das gewhlte Gert senden (z.B. nach Wechsel per Spotify Connect)",children:" Playlist erneut senden"})]}):p.jsx("button",{type:"button",className:te.spotifyPlayButton,onClick:Gi,disabled:Hn.filter(j=>j.source==="spotify"&&j.type==="song").length===0,children:" Playlist abspielen"}),p.jsx("button",{type:"button",className:te.spotifyDisconnectButton,onClick:tr,children:"Verbindung trennen"})]})]}):p.jsxs("div",{className:te.spotifyConnectBlock,children:[p.jsx("p",{className:te.spotifyNote,children:"Verbinde dich mit Spotify, damit die Playlist im Browser abspielt (Spotify Premium ntig)."}),p.jsx("button",{type:"button",className:te.spotifyConnectButton,onClick:jn,children:"Mit Spotify verbinden"})]})]}),Tt&&p.jsxs("div",{className:te.nowPlayingSection,children:[p.jsx("h3",{className:te.sectionTitle,children:"Now Playing"}),p.jsxs("div",{className:te.nowPlayingCard,children:[Tt.imageUrl&&p.jsx("img",{src:Tt.imageUrl,alt:"",className:te.nowPlayingImage}),p.jsxs("div",{className:te.nowPlayingInfo,children:[p.jsx("div",{className:te.nowPlayingTrack,children:Tt.trackName}),p.jsx("div",{className:te.nowPlayingArtist,children:Tt.artist}),p.jsxs("div",{className:te.nowPlayingTime,children:[Zr(_i)," / ",Zr(Tt.durationMs)]})]}),Tt.isPlaying&&p.jsx("span",{className:te.nowPlayingBadge,title:"Luft",children:""})]})]}),p.jsx("div",{className:te.addSection,children:p.jsx("button",{className:te.addButton,onClick:()=>P(!0),children:"+ Song/Album hinzufgen"})}),(()=>{const j=Hn.filter(Z=>Z.spotifyId!==Tt?.trackId);return p.jsxs("div",{className:te.playlistSection,children:[p.jsxs("h3",{className:te.sectionTitle,children:["Playlist (",j.length,Tt?.trackId?" + 1 luft":"",")"]}),j.length===0?p.jsxs("div",{className:te.emptyPlaylist,children:[p.jsx("div",{className:te.emptyIcon,children:""}),p.jsx("p",{children:Tt?.trackId?"Keine weiteren Songs in der Warteschlange":"Noch keine Songs in der Playlist"}),p.jsx("p",{className:te.emptyHint,children:Tt?.trackId?"Der aktuelle Song luft oben bei Now Playing.":"Fge Songs hinzu, um abzustimmen!"})]}):p.jsx("div",{className:te.playlistItems,children:j.map((Z,_e)=>{const Te=ks(Z),Pe=Z.votes?.[S]||0;return p.jsxs("div",{className:te.playlistItem,style:{"--item-color":fs(Pe)},children:[(Ae||Z.addedBy===S)&&p.jsx("button",{className:te.removeButton,onClick:()=>Vn(Z.id),title:"Entfernen",children:""}),p.jsxs("div",{className:te.itemRank,children:["#",_e+1]}),p.jsxs("div",{className:te.itemInfo,children:[p.jsxs("div",{className:te.itemTitle,children:[Z.type==="album"&&" ",Z.title]}),p.jsx("div",{className:te.itemArtist,children:Z.artist}),p.jsxs("div",{className:te.itemMeta,children:["von ",Z.addedBy,Z.source==="spotify"&&"  Spotify"]})]}),p.jsxs("div",{className:te.itemVoting,children:[p.jsx("button",{className:`${te.voteButton} ${Pe===1?te.voted:""}`,onClick:()=>li(Z.id,"up"),children:""}),p.jsxs("div",{className:te.voteScore,children:[Te>0?"+":"",Te]}),p.jsx("button",{className:`${te.voteButton} ${Pe===-1?te.voted:""}`,onClick:()=>li(Z.id,"down"),children:""})]})]},Z.id)})})]})})()]}),Ht&&p.jsx("div",{className:te.modalOverlay,onClick:()=>{Ye(new Set),P(!1)},children:p.jsxs("div",{className:te.modal,onClick:j=>j.stopPropagation(),children:[p.jsxs("div",{className:te.modalHeader,children:[p.jsx("h2",{className:te.modalTitle,children:"Hinzufgen"}),p.jsx("button",{type:"button",className:te.modalCloseButton,onClick:()=>{Ye(new Set),P(!1),_t(null),ye(""),je("")},title:"Schlieen","aria-label":"Schlieen",children:""})]}),!Ve&&p.jsxs("div",{className:te.addModeButtons,children:[p.jsxs("button",{className:te.addModeButton,onClick:()=>_t("spotify"),children:[p.jsx("span",{className:te.addModeIcon,children:""}),p.jsx("span",{children:"Spotify"}),p.jsx("p",{className:te.addModeDesc,children:"Suche nach Songs auf Spotify"})]}),p.jsxs("button",{className:te.addModeButton,onClick:()=>_t("manual"),children:[p.jsx("span",{className:te.addModeIcon,children:""}),p.jsx("span",{children:"Manuell"}),p.jsx("p",{className:te.addModeDesc,children:"Eigenen Song eingeben"})]})]}),Ve==="manual"&&p.jsxs("div",{className:te.manualForm,children:[p.jsxs("select",{value:st,onChange:j=>ht(j.target.value),className:te.input,children:[p.jsx("option",{value:"song",children:"Song"}),p.jsx("option",{value:"album",children:"Album"})]}),p.jsx("input",{type:"text",value:re,onChange:j=>ye(j.target.value),placeholder:"Titel",className:te.input}),p.jsx("input",{type:"text",value:Ee,onChange:j=>je(j.target.value),placeholder:"Knstler (optional)",className:te.input}),p.jsx("button",{className:te.btnPrimary,onClick:Cs,children:"Hinzufgen"})]}),Ve==="spotify"&&p.jsxs("div",{className:te.spotifySearch,children:[p.jsxs("div",{className:te.searchBox,children:[p.jsx("input",{type:"text",value:U,onChange:j=>C(j.target.value),onKeyPress:j=>{j.key==="Enter"&&yn()},placeholder:"Song oder Album suchen...",className:te.input}),p.jsx("button",{className:te.searchButton,onClick:yn,disabled:ne||!U.trim(),children:ne?" Suche...":" Suchen"})]}),ne&&p.jsxs("div",{className:te.searchLoading,children:[p.jsx("div",{className:te.spinner}),p.jsx("p",{children:"Durchsuche Spotify..."})]}),!ne&&Wt.length>0&&p.jsx("div",{className:te.searchResults,children:Wt.map(j=>{const Z=dn.has(j.id);return p.jsxs("div",{className:te.searchResultItem,onClick:async _e=>{if(!Z&&!_e.target.closest("button"))try{const Te={...j,addedBy:S,votes:{}};console.log(" Fge hinzu:",j.title),await Yt(Te),Ye(Pe=>new Set(Pe).add(j.id))}catch(Te){console.error("Fehler beim Klick:",Te)}},children:[j.imageUrl&&p.jsx("img",{src:j.imageUrl,alt:j.title,className:te.resultImage}),p.jsxs("div",{className:te.resultInfo,children:[p.jsxs("div",{className:te.resultTitle,children:[j.type==="album"&&" ",j.title]}),p.jsx("div",{className:te.resultArtist,children:j.artist}),j.album&&j.type==="song"&&p.jsx("div",{className:te.resultAlbum,children:j.album})]}),p.jsx("button",{type:"button",className:`${te.addResultButton} ${Z?te.addResultButtonAdded:""}`,onClick:async _e=>{if(_e.stopPropagation(),!Z)try{const Te={...j,addedBy:S,votes:{}};await Yt(Te),Ye(Pe=>new Set(Pe).add(j.id))}catch(Te){console.error("Fehler beim Hinzufgen:",Te)}},disabled:Z,title:Z?"Bereits hinzugefgt":"Zur Playlist hinzufgen",children:Z?"":"+"})]},j.id)})}),!ne&&U&&Wt.length===0&&p.jsxs("div",{className:te.noResults,children:[p.jsx("p",{children:"Keine Ergebnisse gefunden"}),p.jsx("p",{className:te.noResultsHint,children:"Versuche einen anderen Suchbegriff"})]})]}),p.jsx("div",{className:te.modalButtons,children:p.jsx("button",{className:te.btnFertig,onClick:()=>{Ye(new Set),P(!1),_t(null),ye(""),je("")},children:"Fertig"})})]})})]})};function yL(){const[r,e]=X.useState(()=>new URLSearchParams(typeof window<"u"?window.location.search:"").get("code")?"musicvoter":null),[n,s]=X.useState(!1);X.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("code");if(!m||n)return;let b=!1;return(async()=>{try{if(await zi.exchangeCodeForToken(m),b)return;window.history.replaceState({},"",window.location.pathname||"/"),e("musicvoter")}catch(_){console.error("Spotify Callback Fehler:",_),b||alert("Spotify-Verbindung fehlgeschlagen: "+(_.message||"Unbekannter Fehler"))}finally{b||s(!0)}})(),()=>{b=!0}},[n]);const o=f=>{e(f)},c=()=>{e(null)};return p.jsxs("div",{className:"App",children:[!r&&p.jsx(jw,{onSelectProject:o}),r==="hitzkopf"&&p.jsx(VM,{onBack:c}),r==="musicvoter"&&p.jsx(pL,{onBack:c,spotifyCallbackDone:n})]})}yw.createRoot(document.getElementById("root")).render(p.jsx(X.StrictMode,{children:p.jsx(yL,{})}));
